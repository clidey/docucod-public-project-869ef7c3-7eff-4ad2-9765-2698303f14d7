---
title: "Integrating GoogleTest into Your Workflow"
description: "Explains how GoogleTest fits with CMake, Bazel, and other build systems; outlines basic steps for setup and configuration. Mentions compatibility with continuous integration pipelines and supported platforms."
---

# Integrating GoogleTest into Your Workflow

Integrating GoogleTest into your development and testing workflow ensures that your C++ tests are built, executed, and maintained with maximum efficiency and reliability. This page explains how GoogleTest fits with popular build systems such as CMake and Bazel, outlines the basic steps for setup and configuration, and highlights compatibility with continuous integration (CI) pipelines and supported platforms.

---

## Why Integration Matters

Smooth integration with build systems allows you to seamlessly compile GoogleTest alongside your code, manage dependencies, and automate test execution. Proper setup eliminates friction points so developers can focus on writing tests rather than troubleshooting build issues.

For CI pipelines, integration ensures that tests run automatically on every commit or build, providing fast feedback on code quality.

---

## Supported Build Systems

GoogleTest actively supports integration with several widely used build systems:

- **CMake**: The primary, community-supported integration method. GoogleTest offers robust CMake scripts that simplify adding GoogleTest to your projects, handle compiler flags, and facilitate running tests.
- **Bazel**: Official Bazel build definitions are included in the repository, enabling straightforward usage within Bazel-based workflows.
- **Others**: GoogleTest can be manually integrated into custom or less common build environments by managing source files and include paths appropriately.

---

## Setting Up GoogleTest with CMake

CMake is the most common way to build and integrate GoogleTest, supporting many platforms such as Linux, Windows, and macOS.

### Basic Standalone Setup

1. **Clone GoogleTest repository**

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
dir googletest
```

2. **Create a Build Directory**

```bash
mkdir build && cd build
```

3. **Generate Build Files**

By default, GoogleMock is included:
```bash
cmake ..
```
Or build only GoogleTest:
```bash
cmake .. -DBUILD_GMOCK=OFF
```

4. **Build**

```bash
make
```

5. **Optionally Install** (typically needs admin privileges)

```bash
sudo make install
```

### Embedding GoogleTest into Your Existing CMake Project

Instead of building GoogleTest separately, you can include it directly in your project's build:

- Use `add_subdirectory()` to add GoogleTest sources as part of your build.
- This ensures consistent compiler flags and avoids linkage incompatibilities.

Example snippet to add in your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(your_tests your_test.cpp)
target_link_libraries(your_tests gtest_main)
add_test(NAME your_tests COMMAND your_tests)
```

### Compiler Requirements

GoogleTest requires a C++17 compatible compiler. Specify this in your top-level project with:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### Handling Compiler and Linker Flags

GoogleTest's CMake scripts auto-detect pthread availability on Unix platforms and adjust compilation flags accordingly to support thread-safe tests.

Various options control runtime library linking behavior, especially on Windows (MSVC), to avoid common issues like static/dynamic runtime mismatches.

---

## Using GoogleTest with Bazel

The repository includes build definitions for Bazel users. You can:

- Add GoogleTest as a dependency in your `BUILD` files.
- Utilize the provided Bazel rules for compilation and testing.

This enables CI systems using Bazel to run GoogleTest-based tests seamlessly.

---

## Recommended Workflow for Integration

1. **Choose your build system** (CMake recommended for most).
2. **Add GoogleTest to your project** via submodule, FetchContent, or manual copy.
3. **Configure compiler standards and flags** to ensure compatibility.
4. **Link test executables against** `gtest` or `gtest_main` (and optionally `gmock`/`gmock_main`).
5. **Define tests and register them with your CI system**.
6. **Run tests regularly** to get immediate feedback on code quality.

---

## Example: Adding a Test Target with CMake

Here's a concrete example of integrating a GoogleTest executable named `example_test`:

```cmake
add_executable(example_test example_test.cpp)
target_link_libraries(example_test gtest_main)
add_test(NAME example_test COMMAND example_test)
```

Running `ctest` will then execute this test target.

---

## Continuous Integration Compatibility

By integrating GoogleTest with your build system, you enable your CI platform to:

- Automatically build and run tests on code changes.
- Aggregate test results and provide reports.
- Detect regressions early in the development lifecycle.

Most CI tools support running `ctest` or the directly compiled test executables.

---

## Supported Platforms

GoogleTest is designed for wide portability and supports:

- Linux distributions
- Windows (MSVC and MinGW)
- macOS
- Embedded platforms with C++17 support (limited, e.g., ESP32, ESP8266 with adaptations)

Build scripts account for compiler idiosyncrasies and thread support detection.

---

## Troubleshooting Integration Issues

- Make sure your compiler supports C++17.
- On Windows, check that runtime library linking (static/dynamic) is consistent.
- If pthread is not detected but your environment supports it, define `-DGTEST_HAS_PTHREAD=1`.
- Use the verbose build modes (`VERBOSE=1` for `make`) to diagnose compilation issues.
- In multi-configuration build systems (Visual Studio), ensure that build and test tasks use compatible configurations.

For detailed help, consult the [Installation Using CMake](https://github.com/google/googletest/blob/main/docs/primer.md#installation-using-cmake) and [GoogleTest README](https://github.com/google/googletest/blob/main/googletest/README.md).

---

## Next Steps

- Proceed to the [Quickstart & Resources](../integration-and-getting-started/quickstart-resources) guide to write your first test and validate the setup.
- Review the [Configuring Your Test Environment](../../getting-started/configuration-and-validation/configuration-setup) for fine-tuning build and runtime configurations.


---

## References

- [Googletest GitHub Repository - README](https://github.com/google/googletest/blob/main/googletest/README.md)
- [GoogleTest Integration Guide (README.md)](https://github.com/google/googletest/blob/main/googletest/README.md#generic-build-instructions)
- [GoogleMock CMakeLists.txt](https://github.com/google/googletest/blob/main/googlemock/CMakeLists.txt)
- [GoogleTest Primer](../../docs/primer.md)
- [CMake Official Site](https://cmake.org/)

---

This integration reference equips you to incorporate GoogleTest cleanly into your builds and CI workflows, enabling reliable, maintainable, and scalable automated testing across your C++ projects.

---

<Info>
Remember, proper integration is the foundation for effective automated testing. Invest time upfront to configure GoogleTest within your build and CI systems to reap long-term benefits in test reliability and developer productivity.
</Info>
