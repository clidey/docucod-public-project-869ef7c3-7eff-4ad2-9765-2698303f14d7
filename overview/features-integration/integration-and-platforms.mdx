---
title: "Integration and Platform Support"
description: "Understand how GoogleTest integrates with your build and CI systems: CMake and Bazel support, cross-platform considerations, and how the core files enable smooth integration into various operating environments. See how easily GoogleTest connects with modern toolchains."
---

# Integration and Platform Support

## Seamlessly Integrate GoogleTest into Your Build and CI Systems

Building reliable C++ tests across diverse development environments requires a testing framework that fits effortlessly into your toolchain. GoogleTest offers native support for popular build systems like CMake and Bazel and ensures compatibility across all major platforms. This page explains how GoogleTest integrates with your build infrastructure and CI workflows, highlighting the key aspects that enable a smooth development experience.

---

## Why Integration Matters

Imagine setting up tests for a complex C++ project spanning Linux, Windows, and macOS. Manually configuring your build system and CI pipelines to discover, execute, and report on tests can be error-prone and cumbersome. GoogleTest provides native constructs and configuration files designed to eliminate the guesswork—helping your build system effortlessly detect tests, handle dependencies, and deliver consistent results.

Through straightforward integration:

- Developers spend less time wrestling with build scripts and more time writing meaningful tests.
- CI pipelines run tests reliably with minimal manual setup.
- Cross-platform teams share test configurations that just work everywhere.

---

## Integration with CMake

CMake is the primary build system supported by GoogleTest, enabling cross-platform build automation that fits into your existing workflow.

### Building GoogleTest and GoogleMock Together

GoogleTest ships with a comprehensive CMakeLists.txt script that supports:

- Building GoogleTest standalone or as part of your project.
- Enabling or disabling GoogleMock with a simple flag (`-DBUILD_GMOCK=ON/OFF`).
- Exporting install targets and pkg-config files for smooth dependency resolution.

#### Typical Standalone Build Flow

```bash
# Clone the repository
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest

# Create build directory
$ mkdir build && cd build

# Configure CMake project
$ cmake ..

# Build the libraries and tests
$ make

# (Optional) Install system-wide
$ sudo make install
```

> Tip: To build only GoogleTest without GoogleMock, add `-DBUILD_GMOCK=OFF` to the `cmake` command.

### Integration Into Existing CMake Projects

GoogleTest encourages two integration strategies:

1. **Using Installed Artifacts:** After installing GoogleTest, use `find_package(GTest CONFIG REQUIRED)` in your `CMakeLists.txt` to locate and link GoogleTest libraries.
2. **Including GoogleTest as a Subdirectory:** Embed the source code as a git submodule or fetch content at configure time and add it via `add_subdirectory()`. This method ensures consistent compiler flags and compatibility across your project.

Example snippet to link GoogleTest in your project:

```cmake
find_package(GTest CONFIG REQUIRED)
add_executable(my_test test.cpp)
target_link_libraries(my_test PRIVATE GTest::gtest_main)
add_test(NAME my_test COMMAND my_test)
```

### Supporting GoogleMock

GoogleMock is part of the GoogleTest repository and can be enabled via CMake. Two special libraries are provided:

- `gmock` — the GoogleMock framework without the `main()` function.
- `gmock_main` — GoogleMock with a ready-made `main()` function for convenience.

Linking against `gmock_main` allows you to run tests immediately without writing your own main.

### Threading and Platform Flags

GoogleTest's CMake scripts detect available threading libraries and platform specifics automatically, passing proper flags to the compiler and linker. For example, on POSIX systems, the pthread library is linked as needed.

### Best Practices

- Prefer linking `gtest_main` or `gmock_main` to avoid writing your own test runners.
- Use the same C++ standard (C++17 or higher) for your project and GoogleTest for compatibility.
- For Visual Studio, be mindful of runtime library settings (`gtest_force_shared_crt` option) to prevent linkage conflicts.

---

## Integration with Bazel

While not covered extensively here, GoogleTest supports Bazel, Google's build system, through dedicated BUILD files and rules. This allows large-scale projects to use fast, incremental builds alongside GoogleTest's core testing functionality.

See the [GoogleTest GitHub repository](https://github.com/google/googletest) for Bazel-specific examples and configurations.

---

## Cross-Platform Considerations

GoogleTest supports Linux, Windows (including MinGW and Visual Studio), macOS, and embedded platforms like Android and iOS. Its build system abstraction layers detect platform capabilities for features such as:

- Threading and synchronization primitives
- Regex library availability
- File system access
- Exception support

This platform detection ensures GoogleTest adapts optimally, providing predictable behavior without extra user intervention.

---

## Core Files Enabling Integration

Several key files anchor GoogleTest's build and integration logic:

- **CMakeLists.txt:** Orchestrates the build with options for enabling/disabling GoogleMock, setting compiler standards, and exporting targets.
- **gmock_main.pc.in and gmock.pc.in:** Pkg-config templates that facilitate dependency detection by other build systems.
- **gmock_main.cc:** Contains an out-of-the-box `main` function ready to bootstrap GoogleMock and run all tests.
- **Internal headers and platform detection code (e.g., `gtest-port.h`):** Automatically manage environment-specific configurations and portability.

Together, these components abstract away platform quirks and build system complexities to provide a seamless testing experience.

---

## Example User Flow: Integrating Tests in a CMake Project

1. Clone or add GoogleTest to your project.
2. Configure your CMake build:
    - Use `find_package(GTest REQUIRED)` if installed system-wide.
    - Or `add_subdirectory(googletest)` to compile in-tree.
3. Create your test executable linking against `GTest::gtest_main` or `GTest::gmock_main`.
4. Use `add_test()` to register tests with CTest or your CI system.
5. Run tests locally via `ctest` or let your CI pipeline pick them up automatically.

This flow ensures your tests build and execute consistently across all developer machines and CI environments.

---

## Troubleshooting Integration Issues

<AccordionGroup title="Common Build and Integration Issues">
<Accordion title="Linker Errors with Visual Studio Runtime">
Conflicts between your project's runtime and GoogleTest's default runtime may cause linker errors. Use the CMake option `gtest_force_shared_crt=ON` to align runtimes across all components.
</Accordion>
<Accordion title="Tests Not Detected in CTest">
Ensure your tests are properly registered using `add_test()` in your `CMakeLists.txt`. Also, verify your tests return correct exit codes, which GoogleTest manages by returning the result of `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Missing pthread Linkage on Linux">
If you manually compile GoogleTest or integrate without CMake, remember to link against pthread (`-pthread`) to avoid undefined references.
</Accordion>
<Accordion title="Platform-Specific Feature Detection Fails">
Confirm you’re using compatible compiler versions and C++17 support. GoogleTest requires this minimum to function correctly in multi-threaded and regex features.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Proceed to the [Setup and Installation Guide](/getting-started/setup-prerequisites-installation/prerequisites-system-requirements) to configure your environment.
- Learn how to write your first test in the [Writing and Running Your First Test](/getting-started/first-test-and-validation/writing-and-running-first-test) page.
- Explore the [Mocking Reference](/api-reference/mocking-and-matcher-api/mock-methods-api) to harness GoogleMock features.

---