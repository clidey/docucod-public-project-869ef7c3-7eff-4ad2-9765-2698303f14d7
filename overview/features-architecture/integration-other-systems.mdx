---
title: "Integrating with Build and CI Systems"
description: "High-level guidance on how GoogleTest plugs into various build systems (CMake, Bazel, platform-specific build scripts) and CI/CD pipelines. Outlines typical integration workflows and links to deeper guides."
---

# Integrating with Build and CI Systems

## Seamlessly Incorporate GoogleTest into Your Build Environment and CI/CD Pipelines

Integrating GoogleTest effectively into your build system and continuous integration/continuous deployment (CI/CD) pipelines is essential to fully leverage its power, ensuring tests are built, executed, and reported automatically with minimal manual effort. This page provides high-level guidance on how GoogleTest connects with common build tools like CMake and Bazel, as well as platform-specific build scripts and automated testing pipelines.

---

## Why Integrate GoogleTest with Your Build and CI Systems?

Modern software development depends on automation to maintain code quality and reliability. GoogleTest integration allows you to:

- **Automate compilation and linking of test binaries** alongside your application code seamlessly.
- **Run tests automatically during builds or as part of CI pipelines** to catch regressions early.
- **Generate standardized test reports and logs** that integrate with CI dashboards.
- **Leverage platform-specific conveniences and optimizations** through tailored build and test configurations.

Successful integration removes friction from your workflow, enabling rapid feedback cycles and higher confidence in code quality.

---

## Common Build Systems Supported by GoogleTest

### 1. CMake

CMake is widely used for cross-platform C++ projects, and GoogleTest provides first-class support:

- You'll typically add GoogleTest as either a subdirectory or link against installed libraries.
- Use `find_package(GTest REQUIRED)` to locate an installed GoogleTest.
- Link your test target against `GTest::gtest` or `GTest::gtest_main` for automatic test main function.

Basic workflow:

```cmake
# Add GoogleTest as a subdirectory or find it installed
find_package(GTest REQUIRED)

# Define your test target
add_executable(my_tests test_main.cpp sample_tests.cpp)

# Link against GTest libraries and pthread (if required)
target_link_libraries(my_tests PRIVATE GTest::gtest GTest::gtest_main pthread)

# Enable testing and add test
enable_testing()
add_test(NAME MyTests COMMAND my_tests)
```

This approach compiles GoogleTest along with your code or uses an installed version, ensuring consistent flags and dependencies.

### 2. Bazel

GoogleTest integrates smoothly with Bazel, Google's build and test system:

- Bazel rules for GoogleTest are built-in.
- Build your tests with `cc_test` rules where you specify sources and dependencies.

Example:

```python
cc_test(
    name = "my_tests",
    srcs = ["sample_tests.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

Bazel manages test execution and isolation, and it integrates test reporting in its dashboard.

### 3. Platform-Specific Build Scripts

For custom or legacy builds, you can manually compile GoogleTest sources and link tests:

- Include GoogleTest headers and source files in your build scripts.
- Define compiler and linker flags compatible with your environment.
- Ensure test binaries link against required system libraries like pthread.

### 4. CI/CD Pipelines

When integrated in CI/CD platforms (e.g., Jenkins, GitHub Actions, GitLab CI):

- Ensure tests are built as part of the pipeline build step.
- Run tests as a distinct pipeline stage using native test runners or GoogleTest executables.
- Capture and parse test output—GoogleTest supports XML output format with `--gtest_output=xml:<file>` for better integration.

Example pipeline step:

```bash
./my_tests --gtest_output=xml=report.xml
# CI system can parse report.xml for test results
```

---

## Typical Integration Workflow

1. **Set Up GoogleTest in the Build Environment**
   - Add GoogleTest either as a submodule, external dependency, or installed library.
   - Configure your build script to find and link GoogleTest.

2. **Configure Test Targets/Binaries**
   - Include test source files and link against GoogleTest libraries.
   - Define appropriate compiler definitions and flags.

3. **Automate Test Execution in Build/CI**
   - Invoke test executables as part of build or test phases.
   - Enable structured logging or XML reports for CI systems.

4. **Review and React to Test Results**
   - Use CI tools to monitor test pass/fail status.
   - Analyze failures and iterate on code or tests as necessary.

---

## Best Practices for Smooth Integration

- **Use Official Build Scripts When Possible:** GoogleTest provides CMake support that is robust and well-maintained.
- **Configure Proper C++ Standard Version:** GoogleTest requires C++17 or later.
- **Manage Threading and Linker Flags:** For pthread-based threading support, ensure appropriate flags are set.
- **Use Shared or Static Libraries Consistently:** Be aware of your build configuration when linking GoogleTest as a shared or static library.
- **Generate Machine-Readable Test Reports:** Utilize XML output so CI tools can parse and display results.
- **Keep GoogleTest Up-to-Date:** To ensure compatibility and access latest features.

---

## Troubleshooting Integration Issues

<AccordionGroup title="Common Integration Challenges and Solutions">
<Accordion title="Build Errors Related to Missing Headers or Libraries">
Verify include paths and linkage to GoogleTest and dependencies like pthread. Check your build scripts and environment variables.
</Accordion>
<Accordion title="Test Executables Not Running or Discovering Tests">
Ensure that tests are linked with `gtest_main` or provide your own `main()` that calls `::testing::InitGoogleTest()`. Confirm test binaries have execute permissions.
</Accordion>
<Accordion title="CI Pipeline Fails to Parse Test Reports">
Make sure GoogleTest is invoked with proper flags for XML reporting: `--gtest_output=xml:<filename>`. Also, validate your CI tool’s configuration for test report ingestion.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Explore detailed guides:
  - [Installing with CMake](../getting-started/setup-and-installation/installing-with-cmake)
  - [Installing with Bazel](../getting-started/setup-and-installation/installing-with-bazel)
  - [Project Configuration](../getting-started/configuration-and-first-use/project-configuration)
- Dive into advanced integration:
  - [Integrating GoogleTest with Your Build System](../guides/advanced-usage-and-integration/integrating-into-builds)
  - [Continuous Integration & Automation Best Practices (external resource)](https://docs.microsoft.com/en-us/azure/devops/pipelines/test/continuous-testing)

Embracing these approaches will empower you to embed testing deeply into your workflow, dramatically improving software quality and developer productivity.

---

For a foundational understanding of GoogleTest's value and concepts, consider reviewing the [What is GoogleTest?](../intro-concepts/product-value-proposition) page and core terminology docs.
