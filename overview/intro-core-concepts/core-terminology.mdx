---
title: "Core Concepts & Terminology"
description: "Explain critical concepts such as test fixtures, assertions, test discovery, death tests, parameterized tests, matchers, and mock expectations. Offer succinct definitions, differentiating between xUnit-style principles and the unique terminology/concepts in the GoogleTest/GoogleMock ecosystem."
---

# Core Concepts & Terminology

Understanding GoogleTest and GoogleMock starts with mastering several key concepts and terminology unique to testing and mocking in C++. This page delivers essential definitions and clarifications to confidently navigate test creation, execution, and interaction verification within the GoogleTest ecosystem.

---

## Test Fixtures

A *test fixture* is a class that groups tests which share common objects and setup code. Reusing fixtures promotes well-organized, maintainable tests by enabling common initialization and cleanup.

- **Purpose:** Encapsulate the test environment for multiple related tests.
- **Implementation:** Derive a class from `testing::Test`.
- **Usage:** Write tests using `TEST_F()` macro, providing access to fixture members.

Example:
```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

This setup ensures a fresh environment for each test, preventing cross-test interference.

---

## Assertions

Assertions check correctness by validating conditions during test execution. GoogleTest provides both *fatal* (`ASSERT_*`) and *non-fatal* (`EXPECT_*`) assertions:

- **`ASSERT_*`**: Abort current function on failure (no further code is executed).
- **`EXPECT_*`**: Continue test execution even after failure, allowing multiple issues to surface.

Example:
```cpp
ASSERT_EQ(ptr, nullptr) << "Pointer must be null before use.";
EXPECT_EQ(x, y) << "Values should be equal.";
```

Use assertions to verify expected values, states, exceptions, or behaviors.

---

## Test Discovery and Execution

GoogleTest automatically discovers and registers tests defined with `TEST()` or `TEST_F()`. Running the `RUN_ALL_TESTS()` function executes all registered tests.

- No need for manual enumeration of tests.
- Tests are isolated; each has its own fixture instance.
- Test result: _success_ if all assertions pass; _failure_ on any crash or failed assertion.

Ensure to invoke `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` to properly parse command-line flags.

---

## Death Tests

Death tests verify that code under test terminates as expected under certain conditions, like fatal errors.

- Run the test code that is expected to cause termination.
- GoogleTest isolates death tests safely.
- Example usage:
  ```cpp
  EXPECT_DEATH(Foo(), "expected error message");
  ```

Death tests require support from the platform and are especially useful for validating error or assertion handling.

---

## Parameterized Tests

Parameterized tests run the same test logic with different input data.

- Define a test fixture derived from `testing::TestWithParam<T>`, where `T` is the parameter type.
- Use `INSTANTIATE_TEST_SUITE_P()` to define sets of parameters.
- Write tests using `TEST_P()` macro that accesses parameters via `GetParam()`.

Example:
```cpp
class MyTest : public testing::TestWithParam<int> {};

TEST_P(MyTest, IsEven) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyTest, testing::Values(2, 4, 6, 8));
```

This approach reduces duplication and improves test coverage systematically.

---

## Matchers

Matchers define constraints on function arguments or expectations within tests and mocks.

- They express conditions like equality, ranges, predicates, etc.
- Used in `EXPECT_CALL()` and `EXPECT_THAT()` to specify which values are accepted.
- Built-in matchers include `_` (wildcard), `Eq()`, `Ge()`, `Lt()`, `Not()`, and many more.

Example:
```cpp
EXPECT_CALL(mock, Foo(Ge(10)));  // Matches calls where argument is >= 10.
EXPECT_CALL(mock, Bar(_, _));     // Any arguments.
```

Matchers enable flexible and precise verification of parameters.

---

## Mock Expectations

GoogleMock uses *expectations* to specify which mock method calls, with what arguments, and how often, should occur during a test.

- Set expectations with `EXPECT_CALL()` before exercising code that uses the mock.
- Customize behavior with clauses such as `Times()`, `WillOnce()`, `WillRepeatedly()`, `InSequence()`, and `After()`.
- Violation of expectations leads to immediate test failure.

Example workflow:
```cpp
MockTurtle turtle;
EXPECT_CALL(turtle, PenDown()).Times(AtLeast(1));
... execute code under test ...
```

GoogleMock verifies expectations automatically on mock object destruction.

---

## Terminology Differences from Traditional xUnit

| Term             | GoogleTest / GoogleMock                      | Traditional xUnit Equivalent  |
|------------------|--------------------------------------------|-------------------------------|
| Test Suite       | Group of related tests (formerly Test Case) | Test Suite                    |
| Test             | Individual test case within a suite        | Test Case                    |
| Expectation      | Expected method call on mock with criteria  | N/A (specific to mocking)     |
| Mock Object      | Object with controlled behavior to simulate dependencies | N/A                          |
| Fixture          | Class providing setup/teardown for tests   | Fixture                      |

Recognizing these terms and their context helps avoid confusion.

---

For a deep dive into writing tests, mocking dependencies, and using assertions effectively, see the [GoogleTest Primer](primer.html) and [Mocking for Dummies](gmock_for_dummies.html).


---

<AccordionGroup title="Common Pitfalls and Tips">
<Accordion title="Setting Expectations Before Invocation">
Always set your `EXPECT_CALL()` expectations before invoking the code under test. Defining expectations after calls to the mock leads to undefined behavior and test failures.
</Accordion>

<Accordion title="Matching Overloaded Functions">
When mocking overloaded methods, explicitly specify the function signature using `MOCK_METHOD` syntax and consider using `Const()` helper or type casts for disambiguation.
</Accordion>

<Accordion title="Avoid Overly Strict Expectations">
Over-specifying arguments or call counts can lead to brittle tests. Specify just what matters to keep tests robust and maintainable.
</Accordion>
</AccordionGroup>

---

<Steps>
<Step title="Understand Test Fixtures">
Learn how to group related tests using a fixture class.
</Step>
<Step title="Master Assertions">
Use `ASSERT_` and `EXPECT_` macros for validating test conditions.
</Step>
<Step title="Write Parameterized Tests">
Reuse test logic with different data inputs using `TEST_P` and instantiations.
</Step>
<Step title="Set Mock Expectations">
Use `EXPECT_CALL` to define expected interactions with mock objects.
</Step>
<Step title="Use Matchers">
Refine argument matching with gMock's diverse matcher library.
</Step>
</Steps>

---

<Callout title="Best Practices" type="tip">
Design tests for clarity and maintainability by grouping tests logically, using expressive assertions, and focusing expectations on essential interactions.
</Callout>


<Callout title="Troubleshooting" type="warning">
If your tests fail due to unmet expectations or unexpected calls, ensure you have configured `EXPECT_CALL` correctly, set them before exercising the mock, and validate argument matchers do not over-constrain.
</Callout>


<Info>
For comprehensive details on mock expectations, matchers, and advanced features, consult the [Mocking Reference](reference/mocking.md) and the [gMock Cookbook](gmock_cook_book.md).
</Info>
