---
title: "Integration with Build and CI Systems"
description: "See how GoogleTest works with popular build tools (like CMake, Bazel) and fits into continuous integration workflows. This page links to examples and sample configuration files to help users start quickly."
---

# Integration with Build and CI Systems

GoogleTest is designed to seamlessly integrate with popular build tools like CMake and Bazel and to fit naturally into continuous integration (CI) workflows. This page guides you through how to set up GoogleTest in these environments, ensuring your tests build reliably and run smoothly within automated pipelines.

---

## Why Integrate GoogleTest with Build and CI Systems?

Automated testing is a critical component of modern software development. By integrating GoogleTest with your build system and CI platform, you can achieve:

- **Automated test discovery and execution:** Your tests run every time code changes, providing instant feedback.
- **Consistent and repeatable test builds:** Integration ensures all dependencies and configurations are correctly managed.
- **Rich reporting and diagnostics:** Output formats can be consumed by CI tools for analysis, dashboards, and notifications.
- **Scalability in large projects:** Efficient test builds and parallel test execution support fast development cycles.

## Integration with CMake

CMake is one of the most common build systems used with GoogleTest. Here's how to integrate GoogleTest into your project using CMake.

### Adding GoogleTest to Your Project

You can add GoogleTest as a submodule or download it directly. The recommended approach is to add the GoogleTest repository as a Git submodule and then use `FetchContent` or `add_subdirectory` in your CMakeLists.

Example using `FetchContent`:

```cmake
include(FetchContent)

FetchContent_Declare(
  googletest
  GIT_REPOSITORY https://github.com/google/googletest.git
  GIT_TAG main # or specific release tag
)

FetchContent_MakeAvailable(googletest)

# Now you can link your test target against gtest and gtest_main
add_executable(my_test my_test.cc)
target_link_libraries(my_test gtest_main)

include(GoogleTest)
gtest_discover_tests(my_test)
```

### Building and Running Tests

- Use normal CMake build steps:

```shell
mkdir build
cd build
cmake ..
make
ctest
```

- `ctest` will discover all tests registered with `gtest_discover_tests` and run them.

### Tips & Best Practices

- Use `gtest_discover_tests()` for automatic test discovery.
- Define your test executables with the appropriate link to `gtest` or `gtest_main`.
- Control verbosity and output format for CI consumption via GoogleTest flags such as `--gtest_output=xml:report.xml`.

## Integration with Bazel

Bazel is a powerful build and test tool used extensively within Google and beyond. GoogleTest integrates smoothly with Bazel's testing and build model.

### Defining Tests in Bazel

In your `BUILD` file, use the `cc_test` rule to define GoogleTest tests:

```python
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

### Running Tests with Bazel

Run your tests using:

```shell
bazel test //path/to:my_test
```

Bazel automatically handles test environment setup and isolates test runs.

### Configuring Test Flags

You can pass GoogleTest flags via Bazel's test arguments:

```shell
bazel test --test_arg=--gtest_filter=MyTest.* //path/to:my_test
```

### Benefits of Bazel Integration

- Parallel and isolated test execution.
- Fine-grained dependency management.
- Support for cross-platform builds and tests.

## Continuous Integration with GoogleTest

Integrating GoogleTest into CI systems like Jenkins, GitHub Actions, GitLab CI, or others ensures your tests run automatically on each commit or pull request.

### Output and Reporting

- GoogleTest supports generating XML and JSON test reports, which CI systems can parse.
- Use the `--gtest_output=xml:filename.xml` or `--gtest_output=json:filename.json` flags to generate reports.
- CI systems can display test result summaries and track test trends over time.

### Sample CI Workflow Snippet (Bash)

```bash
# Build
cmake -S . -B build
cmake --build build

# Run tests with XML output for CI
./build/my_test --gtest_output=xml:report.xml
```

### Best Practices

- Redirect XML/JSON output to paths known by your CI system.
- Use test filters to selectively run smaller subsets of tests during rapid feedback cycles.
- Combine `--gtest_repeat`, `--gtest_shuffle`, and `--gtest_break_on_failure` for diagnosing flaky tests.

## Sample Configuration Files and Examples

The GoogleTest repository provides sample CMakeLists and BUILD files demonstrating the integration practices mentioned above. These samples illustrate:

- How to declare and link test targets properly.
- How to use GoogleTest's custom target and helper functions.
- Running parameterized and typed tests within build environments.

Refer to the samples in:
- `googletest/samples/` directory in the repository.
- See also the `googletest/CMakeLists.txt` for build integration examples.

## Troubleshooting Integration Issues

- **Tests not discovered by CTest:** Ensure you use `gtest_discover_tests` or explicitly register tests.
- **Build failures due to missing GoogleTest:** Confirm GoogleTest is properly fetched or added as a dependency.
- **Test output not parsed by CI:** Verify the test runner command includes `--gtest_output` with a valid path.
- **Filter or repeat flags ignored:** Ensure flags are passed correctly to test executables via your build or CI system.

## Summary

Integrating GoogleTest with build and continuous integration systems empowers teams to automate and scale their testing practices effectively. Whether using CMake, Bazel, or any CI platform, GoogleTest's support for standardized outputs, test discovery, and various flags simplify this process.

---

## Additional Resources

- [GoogleTest Primer](../primer.md) — Learn basic concepts and test writing.
- [Testing Reference](../reference/testing.md) — Describes core testing APIs and macros.
- [Advanced GoogleTest Topics](../advanced.md) — Dive deeper into flags, parameterized tests, and more.
- [GoogleTest GitHub Repository](https://github.com/google/googletest) — See source, samples, and build files.
- [Build Tools Documentation](https://cmake.org/documentation/) and [Bazel Documentation](https://bazel.build/)

---