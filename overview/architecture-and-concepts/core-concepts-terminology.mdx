---
title: "Core Concepts and Terminology"
description: "Master the essential concepts—test cases, test suites, fixtures, assertions, expectations, death tests, parameterized and type-parameterized testing, mocking and cardinalities. Build fluency in the language of GoogleTest and recognize how each element supports readable, maintainable, and robust tests."
---

# Core Concepts and Terminology

Master the essential language of GoogleTest's mocking framework - covering test cases, test suites, fixtures, assertions, expectations, death tests, parameterized testing, mocking, and cardinalities. This page builds your fluency in these foundational elements so you can write readable, maintainable, and robust tests with confidence.

---

## Understanding the Building Blocks of GoogleMock

GoogleMock extends GoogleTest to enable powerful **mocking** capabilities for C++ development. It allows users to create mock objects that simulate complex dependencies by defining *expectations* for method calls — what methods should be invoked, with what arguments, how often, and in what order.

This page explains the core abstractions you’ll use frequently:

- **Test Cases and Test Suites:** Logical groupings of test methods.
- **Fixtures:** Setup and teardown scaffolding ensuring predictable test environments.
- **Assertions:** Statements verifying expected conditions during tests.
- **Expectations:** Declarations about the interactions expected with mock objects.
- **Death Tests:** Specialized tests verifying a program terminates as expected under certain conditions.
- **Parameterized Tests:** Tests that run the same logic with varying inputs.
- **Mocking:** Creating objects that verify interactions with tested code.
- **Cardinalities:** Descriptions of how many times a mocked method call is expected.

### Why These Concepts Matter

Learning the terminology unlocks the full expressive power of GoogleMock. You’ll be able to write tests that not only check outcomes but also verify *interactions* between components explicitly and elegantly. This leads to tests that are less brittle, easier to understand, and faster to diagnose.

---

## Test Cases, Suites, and Fixtures

- **Test Suite (Test Case):** A collection of related test functions. For example, `TEST(FooTest, DoesX)` groups related tests under `FooTest`.

- **Test Fixture:** A class that sets up common test environment shared by multiple tests.
  - Used via `TEST_F` for stateful tests needing setup and teardown logic.
  - Ensures each test runs with a clean, predictable state.

Example:
```cpp
class FooTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Setup code runs before each test
  }

  void TearDown() override {
    // Cleanup code runs after each test
  }

  // Common data members
};

TEST_F(FooTest, DoesAction) {
  // Test code here
}
```

---

## Mocking Fundamentals

### Mock Objects

A **mock object** implements the same interface as a real object but lets you specify, at runtime, the expected calls, argument constraints, and actions.

They are ideal for:

- Cutting dependency on real components such as databases, network, or hardware.
- Controlling hard-to-produce scenarios like failures.
- Verifying interaction order and call counts precisely.

### Defining a Mock Class

Use `MOCK_METHOD` macros inside a class inheriting the interface to create mocked methods.

Example for interface `Turtle`:
```cpp
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(void, Turn, (int degrees), (override));
  MOCK_METHOD(void, GoTo, (int x, int y), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
  MOCK_METHOD(int, GetY, (), (const, override));
};
```

### Using Mock Objects in Tests

Typical workflow:

1. Create mock object.
2. Set **expectations** with `EXPECT_CALL` (optional default behavior with `ON_CALL`).
3. Execute code under test.
4. The mock verifies expectations as calls occur.
5. At destruction, mocks verify all expectations were satisfied.

Example:
```cpp
TEST(PainterTest, DrawsCircle) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(::testing::AtLeast(1));

  Painter painter(&turtle);

  EXPECT_TRUE(painter.DrawCircle(0, 0, 10));
}
```

---

## Expectations, Assertions, and Cardinalities

### Expectations (`EXPECT_CALL`)

Declare what calls you expect on mock objects:
- Method name and argument matchers.
- Cardinality: how many times the method should be called.
- Actions: what the mock returns or does.

Example:
```cpp
EXPECT_CALL(turtle, Forward(100)).Times(2).WillRepeatedly(Return());
```
Meaning: `Forward(100)` will be called exactly twice.

### Matchers

Matchers specify argument constraints, e.g., `_` for "anything", `Eq(5)` for exact match, or more complex predicates.

### Cardinalities

How often do you expect a method to be called?
- `Times(1)`: exactly once.
- `Times(AnyNumber())`: zero or more times.
- `Times(AtLeast(n))`, `Times(AtMost(n))`, `Times(Between(m, n))` - flexible bounds.
- Default is inferred based on `WillOnce` and `WillRepeatedly` clauses.

### WillOnce and WillRepeatedly Actions

Control behavior when the mocked method is called:
- `WillOnce(action)`: action for the first call, second call, ...
- `WillRepeatedly(action)`: action for calls after the last `WillOnce`.

Example:
```cpp
EXPECT_CALL(turtle, GetX())
    .WillOnce(Return(100))
    .WillOnce(Return(200))
    .WillRepeatedly(Return(300));
```

---

## Ordering Calls and Sequences

By default, expected calls can happen in any order.

Use `InSequence` or `After` clauses to enforce order:
- `InSequence` groups expectations in order.
- `After` sets explicit pre-requisites.

Example:
```cpp
{
  ::testing::InSequence seq;
  EXPECT_CALL(turtle, PenDown());
  EXPECT_CALL(turtle, Forward(100));
  EXPECT_CALL(turtle, PenUp());
}
```

---

## Death Tests

Death tests verify that code terminates (e.g., calls `exit()`, triggers fatal failure) under certain conditions.

They must be used with caution, as they spawn subprocesses and add complexity.

Example:
```cpp
EXPECT_DEATH({ Foo(-1); }, "negative input not allowed");
```

---

## Parameterized and Type-Parameterized Tests

These allow running the same test logic on a variety of input values or types.

- Parameterized tests use different input values.
- Type-parameterized tests use different types.

They reduce redundancy and improve coverage.

---

## Mock Strictness Levels

- **NaggyMock**: Default. Warns on unexpected calls.
- **NiceMock**: Suppresses warning on uninteresting calls.
- **StrictMock**: Treats uninteresting calls as errors.

Choose based on how strictly you want mocks to enforce call expectations.

---

## Common Terminology Cheat-Sheet

| Term                | Description                                                                 |
|---------------------|-----------------------------------------------------------------------------|
| Test Case / Suite    | Grouping of related tests                                                    |
| Fixture             | A class for setting up common test environment                             |
| Mock Object          | A test double that verifies interactions                                   |
| Expectation          | Statement that a mock method will be called with certain arguments/times  |
| Matcher              | Predicate for validating method arguments                                 |
| Cardinality          | Specifies expected call frequency                                         |
| WillOnce / WillRepeatedly | Defines behavior for calls to mock method                                 |
| InSequence           | Groups expectations requiring strict call order                          |
| After                | Sets ordering constraints between expectations                            |
| Death Test           | Tests expected process termination or fatal failures                       |

---

## Practical Tips for Success

- Define expectations (*before* exercising mocks).
- Avoid over-specification to prevent brittle tests.
- Use `ON_CALL` for default behavior where call count doesn't matter.
- Use `EXPECT_CALL` for validating important interactions.
- Retire expectations after saturation to avoid upper bound errors.
- Use sequences to test ordering when required.
- Handle uninteresting calls by using NiceMock or explicit `EXPECT_CALL` with `Times(AnyNumber())`.
- Utilize matcher combinators and custom matchers to flexibly specify argument constraints.

---

## Troubleshooting Common Issues

- If GoogleMock warns "Uninteresting mock function call", you may need to add expectations or use NiceMock.
- "Unexpected mock function call" indicates an unexpected invocation — check your expectations.
- Use `--gmock_verbose=info` in your test run to see detailed traces of mock calls.
- Death tests require special care; ensure they are used conservatively.

---

## Summary Diagram

```mermaid
flowchart TD
  TestSuite -->|Contains| TestCase((Test Case / Fixture))
  TestCase -->|Setup/Teardown| Fixture["Fixture Class"]
  TestCase -->|Contains| Test["Test Methods"]
  TestMethods -->|Uses| MockObject["Mock Object"]
  MockObject -->|Has Methods| MockMethod["Mocked Methods"]
  MockMethod -->|Expectation| Expectation["EXPECT_CALL on MockMethod"]
  Expectation -->|Argument Verification| Matcher["Matchers"]
  Expectation -->|Triggers| Action["Actions (WillOnce/WillRepeatedly)"]
  Expectation -->|Order Constraints| Sequence["InSequence / After"]
  TestMethod -->|May Have| DeathTest["Death Test"]

  classDef user_fill fill:#f9f,stroke:#333,stroke-width:2px;
  TestSuite,TestCase,TestMethods,MockObject,Expectation class user_fill;
```

---

For a detailed introduction and practical examples, please consult the following complementary documentation:

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Beginner-friendly introduction to mocking in GoogleMock.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Extensive recipes on writing mocks, expectations, and actions.
- [Mocking Reference](reference/mocking.md) — Comprehensive API reference for mocking.

This Core Concepts page connects foundational terminology with deeper guides and advanced patterns.


---