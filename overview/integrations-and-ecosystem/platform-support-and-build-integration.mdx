---
title: "Platform Support and Build Integration"
description: "Summarizes supported platforms (compilers, OSes, build tools), and demonstrates typical integration flows (e.g., CMake, Bazel), including entry points for incorporating GoogleTest into automation and CI pipelines."
---

# Platform Support and Build Integration

GoogleTest supports a broad range of platforms, compilers, and build tools, following Google's [Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support). This page summarizes those supported environments and guides you through typical integration methods using popular build systems, such as CMake and Bazel. It also explains how to incorporate GoogleTest into automated builds and CI pipelines.

---

## Supported Platforms and Compilers

GoogleTest maintains compatibility with multiple operating systems, standard C++ compilers, and build tools. The officially supported combinations and versions are detailed in the [Foundational C++ Support Matrix](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).

### Operating Systems
- Linux
- Windows (including MinGW and Visual Studio environments)
- macOS
- Several BSD variants (FreeBSD, OpenBSD)
- Other Unix-like systems (AIX, Solaris, QNX, Haiku, Fuchsia)

### Compiler Support
- GCC versions meeting the policy requirements
- Clang/LLVM
- Microsoft Visual Studio (MSVC)
- Intel C++ Compiler
- Other compilers supported per the foundational policy

### Build Tools
GoogleTest integrates seamlessly with various build tools commonly used for C++ projects:

- CMake
- Bazel
- pkg-config (for flag discovery)

---

## Integration Using CMake

CMake is one of the most popular ways to build and integrate GoogleTest across platforms, thanks to its cross-platform and flexible build system generation.

### Standalone GoogleTest Build
Typical workflow for building GoogleTest as a standalone project:

```bash
# Clone the repository at a specific release/tag
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest

# Create and enter a build directory
$ mkdir build && cd build

# Generate build files
$ cmake ..

# Build GoogleTest (and GoogleMock by default)
$ make

# Optionally install GoogleTest
$ sudo make install
```

If you wish to build only GoogleTest without GoogleMock, disable the mock component:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### Incorporating GoogleTest in Existing CMake Projects

There are two main ways to include GoogleTest in your project:

1. **Use installed libraries via `find_package` or `pkg_check_modules`.**

   After installing GoogleTest, you can find it in your CMakeLists.txt:

   ```cmake
   find_package(GTest CONFIG REQUIRED)
   target_link_libraries(your_test_target GTest::gtest GTest::gtest_main)
   ```

2. **Add GoogleTest source as a subdirectory.**

   This method compiles GoogleTest as part of your project, ensuring consistent compiler and linker flags:

   ```cmake
   add_subdirectory(path/to/googletest)
   target_link_libraries(your_test_target gtest gtest_main)
   ```

This approach avoids runtime errors caused by incompatible build settings, especially on Windows, by sharing configurations.

### C++ Standard Requirement

GoogleTest requires a C++17-compliant compiler environment. Ensure your project sets the standard explicitly:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

This guarantees compatibility and avoids subtle build failures.

### Compiler and Linker Flags

GoogleTest adjusts compiler and linker settings through its CMake scripts for optimal warnings, exception handling, and threading support. For example, it:

- Enables stricter warning flags (`-Wall -Wextra` or `/W4` on MSVC)
- Controls runtime library linkage to avoid conflicts between dynamic and static CRTs
- Automatically adds pthread linkage on supported Unix-like systems

These internal tweaks help ensure GoogleTest builds cleanly across environments but can be overridden if required.

---

## Integration Using Bazel

For projects using Bazel as the build system, GoogleTest provides native BUILD rules:

- The `gtest` target builds both GoogleTest and GoogleMock.
- The `gtest_main` target provides a main() function implementation.

Typical usage in a Bazel `BUILD` file:

```python
cc_test(
    name = "your_test",
    srcs = ["your_test.cc"],
    deps = ["//:gtest_main"],
)
```

Bazel handles platform-specific compiler options and dependencies internally, including linking pthread or Windows threading primitives accordingly.

---

## Using pkg-config for Flag Discovery

GoogleTest ships with pkg-config `.pc` files to expose compilation and linking flags. These files contain:

- Include paths (`-I`)
- Macro definitions (`-D`)
- Library paths (`-L`)
- Link libraries (`-l`)

### Example: Using pkg-config in CMake

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})

enable_testing()
add_test(NAME unit_tests COMMAND testapp)
```

**Tip:** Use `target_compile_options` with `${GTEST_CFLAGS}` to ensure all necessary flags (like `-pthread` and macro definitions) are applied correctly, rather than using only include directories or definitions.

### Troubleshooting pkg-config

If pkg-config cannot find GoogleTest, you might need to set the `PKG_CONFIG_PATH` environment variable to the directory containing the `.pc` files, e.g.: 

```bash
export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
```

This ensures pkg-config queries the correct locations.

### Cross-Compilation Considerations

When cross-compiling, use `PKG_CONFIG_SYSROOT_DIR` and `PKG_CONFIG_LIBDIR` to direct pkg-config to the correct sysroot paths, preventing inappropriate default prefixes in flags.

Example environment setup for cross-compilation:

```bash
export PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=yes
export PKG_CONFIG_ALLOW_SYSTEM_LIBS=yes
export PKG_CONFIG_SYSROOT_DIR=/home/MYUSER/sysroot
export PKG_CONFIG_LIBDIR=$PKG_CONFIG_SYSROOT_DIR/usr/lib64/pkgconfig
```

This ensures correct include and library paths in the cross-compile environment.

For detailed guidance, see the tutorial by Diego Elio Petten√≤: [Cross-compiling with pkg-config](https://autotools.io/pkgconfig/cross-compiling.html).

---

## Incorporating GoogleTest into Automation and CI Pipelines

Automation workflows benefit from straightforward build and test execution. Typical integration steps include:

1. **Automate dependency setup:** Clone and build GoogleTest or ensure it is installed via package managers or internally hosted binaries.
2. **Build step:** Use CMake, Bazel, or other build automation to compile tests linking against GoogleTest.
3. **Test execution:** Run tests using the executable generated by linking against `gtest_main`, which includes a default `main` function running all tests.
4. **Result capture:** Capture and analyze GoogleTest's output, optionally outputting XML with the `--gtest_output=xml:<path>` flag for CI tools.

### Typical CI Command Example

```bash
mkdir build && cd build
cmake ..
make
./your_tests --gtest_output=xml:test_results.xml
```

This workflow helps CI/CD systems automatically run and report test results.

---

## Summary

By supporting a wide array of platforms and integrating smoothly with mainstream build tools like CMake and Bazel, GoogleTest ensures developers can easily bring robust testing into their projects. Leveraging pkg-config files further simplifies flag management. Together, these elements empower teams to confidently integrate automated testing into their continuous integration pipelines.

---

## Additional Resources

- [Foundational C++ Support Matrix](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md)
- [GoogleTest CMakeLists.txt](https://github.com/google/googletest/blob/main/CMakeLists.txt)
- [GoogleTest Bazel Build File (BUILD.bazel)](https://github.com/google/googletest/blob/main/BUILD.bazel)
- [Using GoogleTest pkg-config with CMake](./pkgconfig.md)
- [GoogleTest Primer](./primer.md) - Learn how to write your first tests
- [System Architecture Overview](./overview/foundations-and-architecture/architecture-overview.md) - Understand the internal test execution flow

---

For more detailed usage scenarios and advanced integration patterns, visit the [Integrations & Ecosystem](/overview/integrations-and-ecosystem) section of this documentation.
