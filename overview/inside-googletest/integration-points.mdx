---
title: "Integrating with Your Build & CI"
description: "Outline how to bring GoogleTest into your workflow—whether using CMake, Bazel, or other C++ build tools. Touch on platform support, test discovery, and how output integrates with CI systems and related open source tooling. Highlight typical integration strategies and point to advanced resources for further study."
---

# Integrating with Your Build & CI

GoogleTest is designed to fit seamlessly into your existing C++ development workflow. Whether you’re using CMake, Bazel, or other popular build tools, this guide outlines how to bring GoogleTest into your build process, enable automatic test discovery, and integrate test output into your continuous integration (CI) environments.

---

## Why Integration Matters

Bringing GoogleTest into your build and CI pipelines ensures your tests run automatically and reliably as part of your development cycle. Proper integration accelerates feedback loops, detects regressions early, and provides meaningful reports easily consumable by developers and systems.

## Integration Strategies

### 1. Using CMake

GoogleTest provides official support for CMake, making it easy to build and link your tests across platforms.

- **Standalone or Embedded**: You can either build GoogleTest as a standalone project or embed it into your project’s CMake build using `add_subdirectory()`.
- **Automatic Discovery**: With CMake’s `enable_testing()` and `add_test()` commands, test binaries are registered for execution.
- **Typical Workflow:**

```bash
git clone https://github.com/google/googletest.git
mkdir build && cd build
cmake ..                # Generates build scripts
make                    # Builds GoogleTest and your tests
ctest                   # Runs all registered tests with output
```

- **Linking Tests**: Link your test executables against `gtest` or `gtest_main` libraries provided by GoogleTest.

```cmake
find_package(GTest REQUIRED)
add_executable(my_test my_test.cc)
target_link_libraries(my_test GTest::gtest_main)
add_test(NAME MyTest COMMAND my_test)
```

### 2. Using Bazel

If your project uses Bazel, GoogleTest integrates well as a native testing framework.

- **Predefined Rules**: Use the [`cc_test`](https://docs.bazel.build/versions/main/be/c-cpp.html#cc_test) rule to declare your test targets.
- **Test Sources**: Just add your test `.cc` files and link `@com_google_googletest//:gtest_main` for the main function.

Example `BUILD` snippet:

```bazel
cc_test(
    name = "example_test",
    srcs = ["example_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

### 3. Other Build Systems

While CMake and Bazel are most common, you can integrate GoogleTest with Makefiles, Ninja, or IDE projects by:

- Adding GoogleTest source files and headers to your project.
- Compiling and linking test binaries with the appropriate flags.
- Automating test execution and capturing results.

Refer to the [Generic Build Instructions](https://github.com/google/googletest#generic-build-instructions) for more details.

---

## Platform Support

GoogleTest works across all major desktop platforms — Linux, Windows, and macOS — and supports various compilers.

- It requires C++17 support.
- Works with MSVC, GCC, Clang, and other common compilers.
- Supports both Debug and Release builds.

Refer to the [Prerequisites & System Requirements](../getting-started/setup-prerequisites-installation/prerequisites-system-requirements.md) page for detailed platform eligibility.

---

## Test Discovery and Execution

### Automatic Test Discovery

GoogleTest automatically discovers all tests compiled into your test executable. This eliminates the need to manually list or register tests within your build system.

- Tests are registered via the `TEST()`, `TEST_F()`, `TEST_P()`, and `TYPED_TEST()` macros.
- When your test binary is run, all discovered tests execute by default.

### Filtering and Selective Running

Control which tests run by using command-line flags:

```shell
./my_test --gtest_filter=MySuite.TestName
```

or to run all tests except some:

```shell
./my_test --gtest_filter=-MySuite.DisabledTest
```

This is invaluable during CI and local debugging.

### Output Integration with CI

GoogleTest emits output in formats that most CI systems support:

- **Standard Console Output**: Human readable summary.
- **XML Report** (`--gtest_output=xml:<path>`): Useful for Jenkins, TeamCity, CircleCI, and others.
- **JSON Report** (`--gtest_output=json:<path>`): More modern, machine-readable format.

Example:

```shell
./my_test --gtest_output="xml:build/test_results.xml"
```

Your CI system can then ingest these reports to provide detailed test status dashboards.

---

## Common Integration Patterns

### Running Tests in CI Pipelines

- Add a build step to compile tests with GoogleTest.
- Run tests during the pipeline execution phase.
- Fail the build if any test fails, leveraging `RUN_ALL_TESTS()`'s return code.
- Publish XML or JSON test reports to visualize results.

### Parallel and Sharded Testing

- Use `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` environment variables to split tests across machines or containers.
- This speeds up the suite execution with no code changes needed.

### Capturing and Redirecting Output

- GoogleTest separates its own output (stdout) from logging (stderr).
- Redirect them separately to avoid clutter and facilitate parsing.

---

## Tips for Success

- **Always respect the test naming conventions**, avoid underscores in test names to prevent conflicts and ensure proper discovery.
- **Use `RUN_ALL_TESTS()` return code in your CI scripts** to detect failures properly.
- **Leverage GoogleTest flags** for filtering, repeating, or sharding tests to optimize CI runs.
- **Generate XML or JSON reports** for richer CI integration instead of relying on plain console logs.

---

## Where to Go Next

- For hands-on setup examples with CMake and Bazel, see the [Installation & Integration](../getting-started/setup-prerequisites-installation/installation-integration.md).
- Understand how GoogleTest fits into your build system at the [System Architecture](../overview/inside-googletest/architecture-overview.md) page.
- Explore [Advanced Integration with Build Systems and CI](../guides/advanced-usage-integration/integration-build-systems.md) for deeper insights and best practices.

---

## Summary Diagram of Integration Workflow

```mermaid
flowchart TD
  A[User's Source Code + Tests] --> B[Build System (CMake/Bazel/Make)]
  B --> C[Compile and Link GoogleTest]
  C --> D[Test Binary (with embedded GoogleTest)]
  D -->|Run| E[GoogleTest Execution]
  E --> F[Test Discovery & Execution]
  F --> G[Output Report]
  G --> H[Console & CI Reports]
  subgraph CI Pipeline
    I[Build] --> J[Run Tests]
    J --> K[Analyze Output]
    K --> L[Pass/Fail Results]
  end
  B --> I
  G --> J
```

---

For complete reference and troubleshooting, visit the official [GoogleTest GitHub repository](https://github.com/google/googletest) and the [GoogleTest documentation site](https://google.github.io/googletest/).

---