---
title: "Core Concepts & Terminology"
description: "Introduces domain-specific terms (test cases, test fixtures, assertions, death tests, parameterized tests, mocking, matchers, expectations), equipping users with foundational language and mental models needed for effective onboarding."
---

# Core Concepts & Terminology

Welcome to the foundational vocabulary of GoogleTest’s mocking system—essential terms and concepts that will empower you to write effective, maintainable tests using gMock. This page introduces the key language around test cases, assertions, mocks, and more, creating a clear mental model to guide your journey.

---

## Test Cases and Test Fixtures

### What Is a Test Case?

A **test case** is the smallest executable unit in GoogleTest—a function that verifies a particular behavior of your code under test. It encapsulates the code setup, execution, and verification steps, typically implemented as a function decorated with macros like `TEST` or `TEST_F`.

### What Is a Test Fixture?

A **test fixture** organizes and shares common setup and cleanup code among multiple tests. It is a class deriving from `::testing::Test` that bundles the environment your tests run in, including resources like objects or configurations. Using fixtures helps avoid repetition and makes tests cleaner.

```cpp
class MyTestFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Code here will run before each test.
  }

  void TearDown() override {
    // Code here will run after each test.
  }

  // Shared test resources.
  Widget widget_;
};

TEST_F(MyTestFixture, HandlesEmptyData) {
  EXPECT_TRUE(widget_.DoSomething("") );
}
```

---

## Assertions

An **assertion** is a statement in a test case that checks if a condition holds true. When an assertion fails, GoogleTest reports it as a test failure. Assertions let you verify the behavior and outputs of your code.

There are two primary types of assertions:

- **Fatal assertions** (e.g., `ASSERT_EQ`) abort the current test right away on failure.
- **Non-fatal assertions** (e.g., `EXPECT_EQ`) report the failure but let the test continue.

Use assertions to check values, pointers, object states, and more.

```cpp
ASSERT_TRUE(pointer != nullptr);  // Fatal: stops test if null
EXPECT_EQ(42, foo.GetAnswer());   // Non-fatal: reports failure but continues
```

---

## GoogleMock Basics

### Mocking

**Mocking** is the practice of creating *mock objects* that simulate behavior of real objects used by your code. Mock objects let you:

- Control and verify interaction with dependencies
- Isolate the code you want to test
- Test error paths by simulating failures

### Mocks

A **mock** is a special test double implementing the same interface as a real class, but instrumented so you can specify:

- Which methods you expect to be called (`EXPECT_CALL`)
- With what arguments (via matchers)
- In which order
- How many times
- What to return or side effects

### Matchers

**Matchers** describe which arguments you expect mocked methods to receive. They can be simple (e.g., equality) or complex (e.g., range, predicates).

Common examples:

- `_` (wildcard, matches anything)
- `Eq(value)` (exact equality)
- `Ge(n)`, `Le(n)` (greater or equal, less or equal)
- `NotNull()` (non-null pointer)
- `Pointee(matcher)` (matches the value pointed to)

```cpp
EXPECT_CALL(mock, Foo(Eq(5), NotNull()));
EXPECT_CALL(mock, Get(_));
```

### Setting Expectations

Use `EXPECT_CALL(mock_object, method(matchers))` to declare expected calls. Each expectation can specify:

- The number of expected calls (`Times()`)
- The order, using sequences or `.After()`
- The actions to perform when called (`WillOnce()`, `WillRepeatedly()`)

Example:

```cpp
EXPECT_CALL(mock, Compute(Ge(10)))
    .Times(3)
    .WillOnce(Return(42))
    .WillRepeatedly(Return(0));
```

### Actions

Actions define what mocked methods do. They can:

- Return values (`Return(value)`)
- Modify output parameters (`SetArgPointee<N>(value)`)
- Throw exceptions (`Throw(exception)`)
- Invoke custom functions or lambdas (`Invoke(function)`)
- Chain multiple effects (`DoAll(action1, action2, ...)`)

---

## Specialized Testing Concepts

### Death Tests

Death tests verify that code terminates or crashes as expected when encountering fatal errors. They let you check that error handling or invariant checks work correctly in your program.

You write a death test using `ASSERT_DEATH` or `EXPECT_DEATH` macros, providing the code snippet expected to die and optionally a regex matching the error message.

### Parameterized Tests

Parameterized tests allow you to run the same test logic multiple times with different inputs, reducing duplication and improving coverage.

They work by defining test fixtures that accept parameters and using special macros like `INSTANTIATE_TEST_SUITE_P` to provide the input values.

Example:

```cpp
class MyTest : public ::testing::TestWithParam<int> {};

TEST_P(MyTest, HandlesValues) {
  int val = GetParam();
  EXPECT_GT(val, 0);
}

INSTANTIATE_TEST_SUITE_P(PositiveNumbers, MyTest, ::testing::Values(1, 2, 3));
```

---

## Common User Flows

### Writing Your First Mock

1. Define a mock class using `MOCK_METHOD` to mock virtual methods.
2. Create mock objects in your tests.
3. Set default behavior with `ON_CALL` if desired.
4. Use `EXPECT_CALL` to declare expected calls and behaviors.
5. Exercise your code, letting mocks verify interaction.
6. Let GoogleTest verify and clean up automatically (or explicitly verify).

### Understanding Call Ordering

By default, GoogleMock expects calls to occur *any order*. To enforce order use:

- `InSequence` to group multiple expectations that must happen in order.
- `.After()` to specify dependencies between expectations explicitly.

Example:

```cpp
Sequence s;
EXPECT_CALL(mock, Start()).InSequence(s);
EXPECT_CALL(mock, Process()).InSequence(s);
EXPECT_CALL(mock, Stop()).InSequence(s);
```

Or:

```cpp
auto e1 = EXPECT_CALL(mock, Start());
auto e2 = EXPECT_CALL(mock, Stop()).After(e1);
```

### Managing Uninteresting Calls

An **uninteresting call** is when a mock method without expectations is called.
- By default, this prints a warning.
- You can suppress warnings by using `NiceMock`.
- You can make these errors by using `StrictMock`.

If you expect many calls without caring about arguments:

```cpp
EXPECT_CALL(mock, Foo(_)).Times(AnyNumber());
```

---

## Glossary of Key Terms

| Term              | Description |
|-------------------|-------------|
| Test Case         | The basic, atomic test unit verifying behavior |
| Test Fixture      | A class that sets up shared resources for related test cases |
| Assertion         | A check that verifies expected conditions |
| Mock              | A test double that simulates an object and verifies interaction |
| Expectation       | A declared usage pattern expected on a mock method |
| Matcher           | A predicate describing expected method arguments |
| Action            | The behavior a mock method performs when called |
| Cardinality       | Specifies how many times a mock method should be called |
| Sequence          | An object that imposes call ordering constraints |
| Death Test        | A test verifying crash or termination behaviors |
| Parameterized Test | A test run multiple times with different parameters |

---

## Practical Tips and Best Practices

- Always define `EXPECT_CALL` *before* exercising the code under test.
- Use matchers like `_` to avoid over-specification when argument value is not important.
- Use `ON_CALL` to set default mock behavior but only use `EXPECT_CALL` when you want to verify interactions.
- Control mock strictness via `NiceMock` or `StrictMock` to tune warnings and failures from uninteresting calls.
- Prefer sequencing (`InSequence`, `.After()`) over ordering expectations manually to improve test readability.
- Delegate calls to real or fake implementations if desired to simplify complex mocks.
- Use `SaveArg` and `SaveArgPointee` actions to verify complex arguments outside of `EXPECT_CALL`.

---

## Troubleshooting Common Issues

### Mock Methods Not Being Called

- Verify that `EXPECT_CALL` is declared before code execution.
- Ensure the mock object lives long enough for the expected calls.
- Check that method signatures match exactly, including `const` and ref qualifiers.

### Unexpected Calls

- By default, calls not matching an `EXPECT_CALL` generate errors.
- Add catch-all expectations using `_` matcher and `Times(AnyNumber())` if calls are allowed.

### Compilation Issues with Mock Methods

- Use parentheses for return or argument types that contain commas.
- Confirm the method you mock is `virtual`.
- Use correct qualifiers (`const`, `override`) in `MOCK_METHOD`.

### Handling Move-Only Types

- Use lambdas to return fresh move-only objects.
- For mocking methods taking move-only arguments, use `MOCK_METHOD` normally; delegate if needed.

---

For a visual overview of these concepts and their interactions, see the [GoogleTest System Architecture](../architecture-foundations/system-architecture.md) and the [Mocking Reference](../reference/mocking.md).


<AccordionGroup title="Further Learning and References">
<Accordion title="gMock for Dummies">
This beginner-friendly guide walks through defining mocks and using them with simple, relatable examples. Highly recommended for newcomers.
</Accordion>
<Accordion title="Mocking Reference">
Comprehensive reference of gMock macros, classes, matchers, actions, and usage patterns.
</Accordion>
<Accordion title="gMock Cookbook">
Practical recipes for solving common mocking problems, tips for advanced uses, and examples.
</Accordion>
</AccordionGroup>

<Check>
Remember that mastering gMock’s core concepts is fundamental before diving into its extensive features. This page provides your essential glossary and user mental models to accelerate your onboarding.
</Check>