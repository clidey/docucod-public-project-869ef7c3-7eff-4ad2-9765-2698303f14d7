---
title: "Integrating with Projects & External Systems"
description: "Describes how GoogleTest fits into build and CI workflows, with brief notes on supported platforms, language standards (C++17+), and integration with other tools like CMake, Bazel, Abseil, and alternative test runners. Addresses ways GoogleMock complements core testing."
---

# Integrating with Projects & External Systems

## Bringing GoogleTest into Your Build and Continuous Integration Workflows

Seamlessly integrating GoogleTest into your development cycle is essential to harness its full power for effective C++ testing. This guide shows how GoogleTest fits naturally into popular build systems and continuous integration (CI) pipelines, enabling you to automate quality assurance with minimal friction.

### Supported Platforms and Language Standards

GoogleTest is designed to be highly portable, supporting Linux, Windows, and Mac operating systems. To ensure smooth compilation and consistent behavior, your environment must support at least the C++17 standard. This baseline enables the use of modern C++ features that GoogleTest leverages for robustness and efficiency.

---

## Integration with Build Systems

### CMake: The Primary Build System for GoogleTest

CMake provides a cross-platform mechanism to configure and generate native build scripts suitable for your environment. It is GoogleTest's recommended build system due to its versatility and ease of integration.

- **Standalone Build:** You can clone the GoogleTest repository and build it independently. The build includes GoogleMock by default, or can be tailored to build only GoogleTest if preferred.

- **Incorporating Into Your Project:** GoogleTest can be integrated directly into your existing CMake project:

  - Use `find_package(GTest CONFIG REQUIRED)` to locate installed GoogleTest libraries.
  - Alternatively, embed GoogleTest into your source tree or include it as a git submodule.
  - Employ `add_subdirectory()` to add the GoogleTest source code to your build, ensuring consistent compiler and linker settings.

This integration allows your test targets to link directly against `GTest::gtest` and `GTest::gmock`.

### Bazel: Alternative Build System

For teams using Bazel, GoogleTest is supported as a dependency, simplifying incorporation into Bazel-based projects and CI flows. This enables you to write and run tests without significant changes to your existing Bazel configuration.

---

## Working with GoogleMock: Enhancing Tests with Mocks

GoogleMock (gMock) is fully integrated with GoogleTest and provides a powerful mechanism to create mock objects and define their expected behaviors. It complements your core test suites by allowing you to:

- Define mocks declaratively with straightforward syntax.
- Configure mock behaviors and expectations precisely.
- Verify interactions and call order in complex workflows.

While GoogleTest focuses on test execution and assertions, GoogleMock helps you design better unit tests by simulating dependencies and isolating the code under test.

---

## Integrating Alternative Test Runners and Tools

GoogleTest can also be integrated with other testing tools and runners common in C++ workflows. While GoogleTest includes its own test runner, your CI system can orchestrate tests alongside other frameworks. Key points:

- You may invoke GoogleTest binaries directly or integrate tests as part of your broader testing strategy.
- GoogleTest supports output formats like XML, facilitating integration with CI dashboards.
- Continuous integration setups often combine GoogleTest with code coverage and static analysis tools.

---

## Practical Integration Workflow

1. **Set Up Build Configuration:** Use CMake or Bazel to include GoogleTest and GoogleMock in your project builds.
2. **Write and Compile Tests:** Develop test cases using GoogleTestâ€™s APIs and mock dependencies with GoogleMock.
3. **Run Tests Locally:** Execute tests to verify correctness before committing.
4. **Configure CI Pipeline:** Add steps in your CI system to build your project and run tests automatically when changes are pushed.
5. **Analyze Results:** Use standard reporting features to detect failures, track regressions, and improve software quality continuously.

---

## Best Practices and Tips

- **Consistent Compiler Settings:** When embedding GoogleTest sources, ensure that your compiler flags match those of the main project, especially regarding debug/release modes and runtime linkage.
- **C++ Standard Enforcement:** Explicitly request C++17 or newer in your build system to avoid subtle issues.
- **Control GoogleTest Features:** Use build-time macros (e.g., `GTEST_HAS_PTHREAD`) if your environment has unusual threading support.
- **Linking Settings on Windows:** Consider setting `gtest_force_shared_crt` in CMake to harmonize runtime linkage to prevent linker errors.

---

## Troubleshooting Common Integration Challenges

<Tip>
If your build encounters linker errors related to runtime libraries on Windows, verify that the C++ runtime linkage (dynamic vs. static) is consistent across all components, including GoogleTest and your project.
</Tip>

<Warning>
Ensure that your compiler supports C++17 or later; attempting to build with earlier standards will result in build failures or undefined behavior.
</Warning>

<Note>
When integrating GoogleMock, remember it is part of GoogleTest's codebase and subject to the same build and environment requirements.
</Note>

---

## Summary

Integrating GoogleTest and GoogleMock into your projects and CI systems guarantees robust, portable, and maintainable C++ testing. Whether through CMake, Bazel, or other integration methods, these tools fit naturally into various workflows, empowering you to verify your code with confidence.


---

## References and Further Reading

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- Detailed guide: [Integration Points](overview/architecture-foundations/integration-points)
- Setup and Installation: [Installation via CMake](getting-started/setup-and-installation/installation-via-cmake)
- Mocking with GoogleMock: [Introduction to Mocking and GoogleMock](guides/mocking-with-googlemock/introduction-to-mocking)
- Mocking Reference: [GoogleMock Reference](api-reference/mocking-apis/defining-expectations)

---

## Example: Basic CMake Integration Snippet

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/heads/main.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests GTest::gtest_main GTest::gmock)
add_test(NAME my_tests COMMAND my_tests)
```

This snippet automatically downloads GoogleTest, compiles it with dynamic runtime linkage (recommended on Windows), and sets up a test executable that runs all tests.

---

## Diagram: GoogleTest Integration Overview

```mermaid
flowchart TD
  A[Developer writes test cases] --> B[Build system (e.g., CMake or Bazel)]
  B --> C[Compile GoogleTest and GoogleMock]
  C --> D[Test executable]
  D -->|Run tests| E[GoogleTest framework Executes Tests]
  E --> F[Test Results & Reports]
  F --> G[Continuous Integration System]
  G --> H[Automated analysis and feedback]

  classDef buildfill fill:#CCF,stroke:#333,stroke-width:1px;
  class B,C buildfill;

  classDef ci fill:#CFC,stroke:#333,stroke-width:1px;
  class G,H ci;
```

This flow encapsulates the core stages from writing test cases to automated CI feedback.


---