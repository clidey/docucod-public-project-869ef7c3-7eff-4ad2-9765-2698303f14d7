---
title: "Integration and Extensibility"
description: "Learn how GoogleTest fits into modern C++ development environments, including integration with GoogleMock, supported build systems (CMake, Bazel), and interoperability with third-party tools for CI, reporting, and IDE/test runners."
---

# Integration and Extensibility

Unlock the full power of GoogleTest by understanding how it seamlessly fits into modern C++ development environments. This page guides you through integrating GoogleTest with GoogleMock for enhanced mocking capabilities, using supported build systems like CMake and Bazel, and working smoothly with third-party CI tools, reporting formats, and IDE test runners.

---

## Why Integration and Extensibility Matter

Imagine you’ve crafted a comprehensive suite of tests for your C++ project, but what good are they if they don’t integrate well within your development workflow? GoogleTest is designed to slot effortlessly into your toolchain – from build systems to test reporting and continuous integration (CI) pipelines.

### What this means for you:

- **Unified Testing Experience**: Use GoogleTest and GoogleMock together to write robust, flexible tests and mocks in one place.
- **Build Automation Friendly**: Leverage GoogleTest’s support for CMake and Bazel to automate compilation and test runs.
- **Easy CI and Reporting Integration**: Produce output compatible with common CI tools and reporting frameworks.
- **IDE Support**: Benefit from integration with popular IDEs and test runners for faster feedback.

---

## GoogleMock: Extending GoogleTest with Mocking

GoogleMock is the official mocking framework that complements GoogleTest, enabling you to create mock classes and objects with ease. Since mocking is crucial for isolating units during testing, this integration empowers you to test complex interactions and dependencies.

### How they work together:

- GoogleMock builds on GoogleTest, sharing initialization and test-running commands.
- By including `<gmock/gmock.h>`, you get full access to mocking macros and utilities while still using GoogleTest’s assertion and test organization features.

### Typical workflow:

1. Define mock classes using `MOCK_METHOD` macros.
2. Set expectations using `EXPECT_CALL` to specify how mocks behave.
3. Run tests normally with `RUN_ALL_TESTS()`. 

### Example snippet combining both frameworks:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class Foo {
 public:
  virtual int GetValue() = 0;
  virtual ~Foo() = default;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (override));
};

TEST(FooTest, UsesMock) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue()).WillOnce(testing::Return(42));
  EXPECT_EQ(mock.GetValue(), 42);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);  // Initializes both GoogleMock and GoogleTest
  return RUN_ALL_TESTS();
}
```

<Tip>
`InitGoogleMock()` initializes GoogleMock and GoogleTest flags together, so you never need to call `InitGoogleTest()` separately when working with mocks.
</Tip>

---

## Supported Build Systems: CMake and Bazel

GoogleTest integrates tightly with mainstream C++ build automation tools, ensuring hassle-free compilation, linkage, and test execution.

### CMake

- GoogleTest ships with a comprehensive `CMakeLists.txt` allowing standalone or embedded builds.
- It supports building GoogleTest as a static or shared library.
- You can add GoogleTest directly into your project with `add_subdirectory()` or find installed libraries via `find_package`.

#### Typical CMake integration snippet:

```cmake
find_package(GTest REQUIRED)

add_executable(my_tests test1.cpp test2.cpp)
target_link_libraries(my_tests GTest::gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

<Tip>
Set `gtest_force_shared_crt` option if using Visual Studio to match runtime linkage.
</Tip>

### Bazel

- Bazel users can add GoogleTest and GoogleMock rules to automatically handle dependencies.
- Extensive support for test targets simplifies CI integration.

---

## Extending Integration: Continuous Integration and Reporting

GoogleTest’s output formats and listeners enable smooth integration into automated build and testing pipelines.

### Common Supported Output Formats:

- **XML Reports**: Easily generated via the `--gtest_output=xml:<path>` flag for consumption by CI dashboards.
- **Console Output**: Colorized, succinct output for local developer feedback.

### Customizing and Extending Test Listeners

- GoogleTest exposes a rich event listener interface (`TestEventListener`) to allow users to add custom behaviors on test events.
- You can register your own listeners, for example, to log results in bespoke formats or send notifications.

### Workflow Integration Examples:

- Hook into Jenkins, GitLab CI, Travis CI, GitHub Actions using XML report formats.
- Connect with IDEs like CLion, Visual Studio, and VS Code using native test runner plugins.

---

## Getting Started with Integration

### Step 1: Initialize GoogleTest or GoogleMock in your `main()`

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv); // For basic tests
  // or
  testing::InitGoogleMock(&argc, argv); // When using mocks
  return RUN_ALL_TESTS();
}
```

### Step 2: Use your build system to link against GoogleTest

- For CMake, target `GTest::gtest_main` or `GTest::gmock_main`.
- For Bazel, add test rules with dependencies on `@com_google_googletest//:gtest_main`.

### Step 3: Enable XML output if your CI requires it

Pass `--gtest_output=xml:report.xml` when you run tests.

### Common Pitfalls

<AccordionGroup title="Troubleshooting Integration Issues">
<Accordion title="GoogleMock Initialization Errors">
Make sure to call `InitGoogleMock()` in your `main()` instead of `InitGoogleTest()` when using mocks, or your tests may fail to run properly.
</Accordion>
<Accordion title="Build System Linker Errors">
Check that your project properly links to GoogleTest/GoogleMock libraries; missing linkage often causes unresolved symbol errors.
</Accordion>
<Accordion title="Conflicts with Other Testing Frameworks">
If you use other testing frameworks in the same project, be aware that macro names may clash. Consider defining `GTEST_DONT_DEFINE_*` macros to rename conflicting macros.
</Accordion>
</AccordionGroup>

---

## Visual Overview

```mermaid
flowchart TD
  A[Developer writes C++ code] --> B[Writes unit tests with GoogleTest]
  B --> C[Adds mocks using GoogleMock]
  C --> D[Configures build system (CMake or Bazel)]
  D --> E[Test executable is built]
  E --> F[Tests run locally or in CI]
  F --> G[Output generated (console, XML)]
  G --> H[Results collected by CI or IDE]
  H --> I[Developer receives feedback and iterates]

  subgraph Build System
    D
    E
  end

  subgraph Test Execution & Reporting
    F
    G
    H
  end

  classDef integration fill:#d9f7be,stroke:#52c41a,stroke-width:2px;
  B,C,D,F,G,H class integration
```

---

## Additional Resources

- [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md) – In-depth mocking framework details.
- [Build with CMake Guide](https://github.com/google/googletest/blob/main/googletest/README.md#build-with-cmake) – Step-by-step build instructions.
- [Integration and Extensibility (this page)](/overview/architecture-core-concepts/integration-overview) – Explore more integration topics.

---

Use this page as your gateway to embedding GoogleTest and GoogleMock into a successful C++ testing workflow that fits your development ecosystem.

For detailed guides on writing and running tests, visit the [Getting Started](../getting-started/index.md) section, and for advanced mocking techniques, see [Creating and Using Mocks](../../guides/advanced-mocking-integrations/creating-and-using-mocks.md).

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googlemock/src/gmock_main.cc", "range": "1-59"}]} />
