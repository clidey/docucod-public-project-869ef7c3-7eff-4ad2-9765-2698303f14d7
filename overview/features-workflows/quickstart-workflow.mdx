---
title: "Quickstart Workflow"
description: "Walks through a high-level workflow: setting up GoogleTest, writing basic tests, using matchers and mocks, running tests, and analyzing test outcomes. Points to where quickstarts and samples can be found for hands-on learning."
---

# Quickstart Workflow

Welcome to your fast-track guide to mastering the core workflow of GoogleTest and GoogleMock. This page takes you through the essential steps to quickly set up your testing environment, write basic tests, utilize matchers and mocks effectively, run tests seamlessly, and analyze your test outcomes. Whether you are just getting started or looking for practical pointers on hands-on learning, this high-level roadmap situates you for immediate productivity.

---

## Setting Up GoogleTest and GoogleMock

Before diving into test writing, the first step is to configure your environment. GoogleMock depends on GoogleTest, and both are typically bundled together.

- Initialize GoogleMock (which initializes GoogleTest as well) correctly in your `main()` test entry point.
- If targeting embedded platforms like ESP8266, ESP32, or NRF52 with Arduino, adapt your setup and loop routines accordingly.

Here's a simplified version of the idiomatic `main()` setup function:

```cpp
#include "gmock/gmock.h"
#include "gtest/gtest.h"

int main(int argc, char** argv) {
  // Initializes GoogleMock, which also initializes GoogleTest
  testing::InitGoogleMock(&argc, argv);
  // Runs all tests and returns the outcome
  return RUN_ALL_TESTS();
}
```

This minimal main function boots up the framework and triggers test execution.

---

## Writing Basic Tests

GoogleTest organizes tests using simple macros that define test suites and individual tests.

Example of a basic test:

```cpp
#include <gtest/gtest.h>

// Defines a test suite named FactorialTest and a test named HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

Key points:

- Use the `TEST(TestSuiteName, TestName)` macro to define tests.
- Tests contain assertions like `EXPECT_EQ` (expected equality).
- Group logically related tests into suites for organization and maintainability.

If your tests require common setup and teardown code, use test fixtures:

```cpp
class MyFixture : public testing::Test {
 protected:
  void SetUp() override {
    // Initialize shared objects
  }
  void TearDown() override {
    // Cleanup
  }
};

TEST_F(MyFixture, TestOne) {
  // Test body
}
```

The `_F` variant lets tests access fixture members.

---

## Using Matchers and Mocks

### Matchers

Matchers describe the expected characteristics of arguments your mock methods receive. Use built-in matchers like `_` (wildcard), `Eq(value)`, or complex ones like `Ge(x)` (greater or equal).

Example:

```cpp
using ::testing::_;
EXPECT_CALL(mock_object, SomeMethod(Eq(5), _));
```

This expects `SomeMethod` to be called with first argument equal to 5, second argument anything.

### Defining Mock Classes

GoogleMock uses `MOCK_METHOD` macros inside classes inheriting from interfaces to define mocks succinctly.

Example mock class for interface `Foo`:

```cpp
#include <gmock/gmock.h>

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetSize, (), (const, override));
  MOCK_METHOD(std::string, Describe, (const char* name), (override));
};
```

### Setting Expectations on Mocks

Define how you expect your mock methods to be called using `EXPECT_CALL`, including number of calls, argument matchers, and return actions.

Example:

```cpp
EXPECT_CALL(mock_foo, GetSize())
    .Times(3)
    .WillRepeatedly(Return(42));
```

Explaination:
- Expect `GetSize()` to be called three times.
- Each time, return the integer `42`.

You can also set default mock behavior using `ON_CALL`, which doesnâ€™t set an expectation but defines what to do when the method is called.

---

## Running Tests

Invoke tests via the standard `RUN_ALL_TESTS()` macro inside your `main()` function. GoogleTest handles test discovery automatically; no manual listing required.

Expect the output to list test results, reporting failures with useful diagnostic details, including exact failure location and traces.

---

## Analyzing Test Outcomes

GoogleTest reports both fatal and nonfatal failures with the source file and line numbers. It informs you if:

- Test assertions fail
- Expected mock calls were not made or made out of order
- Unexpected or uninteresting mock calls occur (based on mock strictness)

You can control verbosity levels of GoogleMock with runtime flags such as `--gmock_verbose=info` to see detailed call matches and stack traces, aiding rapid diagnosis.

---

## Hands-On Learning and Examples

Practice with the provided quickstarts and sample tests in the [GoogleTest Samples](samples.md) documentation to gain proficiency faster.

Explore [gMock for Dummies](gmock_for_dummies.md) and [gMock Cookbook](gmock_cook_book.md) to deepen your understanding of mocks, matchers, and actions with extensive examples.

For an API-focused reference, consult [Mocking Reference](reference/mocking.md) and [gMock Cheat Sheet](gmock_cheat_sheet.md).

These resources will guide you through real-world use cases and advanced testing workflows.

---

## Practical Tips

- **Initialize GoogleMock once** in your `main()` and avoid calling `InitGoogleTest()` separately.
- **Write expectations before exercise** of mock objects; setting expectations after calling the mocks leads to undefined behavior.
- **Use matchers** to avoid over-specification and make tests more maintainable.
- **Group ordered expectations** in sequences using `InSequence` for strict call order verification.
- **Suppress warnings on uninteresting calls** with `NiceMock` or explicitly allow them with `EXPECT_CALL(...).Times(AnyNumber())`.
- **Test incrementally:** Start by writing simple tests and enhance with mocks and complex matchers.

---