---
title: "Integration with Build Systems & Tools"
description: "Review how GoogleTest and GoogleMock plug into your build and CI pipelines—supporting CMake, Bazel, and common test runners. This page gives actionable guidance on connecting the framework to modern C++ toolchains, IDEs, and community-powered extensions."
---

# Integration with Build Systems & Tools

## Seamlessly Plug GoogleTest and GoogleMock into Your Build and CI Pipelines

Efficiently integrating GoogleTest and GoogleMock into your modern C++ development workflow is critical for maintaining fast, reliable test automation. This page guides you through actionable strategies for connecting these frameworks to popular build and Continuous Integration (CI) systems—namely CMake, Bazel, and commonly used test runners.

Built specifically with modern C++ toolchains and developer ecosystems in mind, GoogleTest and GoogleMock offer flexible support that adapts to your environment, helping you achieve smooth test integration without losing productivity.

---

### Why This Matters for You

- **Streamlined Build Integration**: Equip your C++ projects to build with integrated unit and mock testing using familiar build systems.
- **Consistent CI Pipeline Support**: Enable automated testing across platforms, with tests triggered effortlessly during continuous integration.
- **IDE and Community Tooling Compatibility**: Leverage GoogleTest’s compatibility with popular IDEs and community-powered extensions to enhance your dev experience.

Designed to minimize the friction between test framework and build tooling, this page focuses solely on how to prepare and connect GoogleTest and GoogleMock with modern build and test infrastructures.

---

## What Is Covered on This Page

This section specifically addresses how GoogleTest and GoogleMock fit into your build and CI story. You will learn:

- How to configure **CMake** builds to include GoogleTest and GoogleMock libraries
- Guidance for integrating GoogleTest into **Bazel** build targets
- Best practices for connecting tests to **common test runners** used in C++ ecosystems
- Tips for smooth usage with modern IDEs and community tooling

If exploring general testing concepts, core framework usage, or writing tests, see other documentation sections tailored accordingly.

---

## Integrating GoogleTest and GoogleMock with CMake

CMake remains the dominant cross-platform build system for C++ projects. GoogleMock is distributed alongside GoogleTest, both offering CMake package configuration files for effortless inclusion.

### Key Steps

1. **Find Packages**

   Use `find_package()` to locate GoogleTest and GoogleMock in your CMakeLists:

   ```cmake
   find_package(GTest REQUIRED)
   find_package(GMock REQUIRED)
   ```

2. **Target Linking**

   Link your test executable with the imported targets:

   ```cmake
   add_executable(my_test my_test.cc)
   target_link_libraries(my_test PRIVATE GMock::gmock GTest::gtest_main)
   ```

3. **Thread Support Macro**

   The provided `gmock.pc.in` includes proper handling of threading support flags (e.g., pthread macros), typically hiding platform-specific variants. Modern CMake automatically applies these.

4. **CTest Integration**

   Optionally, register your tests with CTest for integration with `ctest` and CI tools:

   ```cmake
   enable_testing()
   add_test(NAME MyTest COMMAND my_test)
   ```

---

## Using GoogleTest and GoogleMock with Bazel

Bazel provides fine-grained control for large-scale C++ projects. GoogleTest and GoogleMock integrate naturally with Bazel's build and test rules.

- **gtest and gmock libraries**: Addressed as `@com_google_googletest//googletest` and `@com_google_googletest//googlemock` respectively.
- **Rule examples**:

  ```python
  cc_test(
      name = "my_test",
      srcs = ["my_test.cc"],
      deps = ["@com_google_googletest//googletest", "@com_google_googletest//googlemock"],
  )
  ```

- **Test Execution**:

  Bazel automatically manages dependencies, optimized recompilation, and parallel execution in CI pipelines.

- **Mocking**:

  Since GoogleMock is part of the GoogleTest distribution, you can easily enable mocking in your tests by linking `gmock` and using mock classes as described elsewhere.

---

## Connecting to Common Test Runners and IDEs

GoogleTest and GoogleMock are compatible with most CLI and GUI test runners:

- They produce standardized test outputs, easily consumable by CI dashboards, IDE test explorers, and third-party tools.
- Most popular IDEs (e.g., Visual Studio, CLion, VS Code with extensions) support seamless test discovery and execution.
- Tools leveraging `CTest`, Bazel test results, or GoogleTest-specific XML or JSON output formats integrate effortlessly.

---

## Practical Tips for Smooth Integration

- Remember to use the correct threading macros and compiler options—GoogleTest's internal headers detect and adapt to your platform's threading, exception, and file system support.
- Link GoogleMock **with or without** its `main()` function depending on whether your project provides its own test runner main.
- Use CMake or Bazel provided package configurations to avoid manually managing compiler and linker flags.
- Run tests with the `--gtest_output=xml:` or `--gtest_output=json:` flags to facilitate CI reporting.
- Configure your IDE to pass appropriate flags so test suites are automatically discovered.

---

## Common Pitfalls and Troubleshooting

- **Multiple main() definitions:** When linking GoogleMock in your test binaries, choose either `gmock` or `gmock_main`, but not both.
- **Threading conflicts:** Mixed or incorrect threading support flags can cause compilation or runtime failures. Rely on GoogleTest's defaults or your build system's macros.
- **Test discovery failure:** Make sure tests are linked correctly and exported in your build targets.
- **Dependency mismatch:** Keep GoogleMock and GoogleTest versions aligned to avoid ABI or compatibility issues.

---

## Summary

This page has equipped you with practical guidance for integrating GoogleTest and GoogleMock with the most widely used build systems CMake and Bazel, as well as tips for using popular test runners and IDEs. Leveraging this integration enables robust, automated testing workflows, fostering quality and confidence in your C++ projects.

For your next steps, consult [Getting Started - Basic Configuration & Project Setup](https://example.com/getting-started/overview-setup/basic-configuration) for environment setup, or dive into the [Mocking and Advanced Patterns](https://example.com/guides/mocking-and-advanced-patterns/using-mocks) to unlock the full power of GoogleMock.

---

*This documentation is part of the GoogleTest documentation suite. For a broader architectural understanding, see [System Architecture Overview](/overview/architecture_and_integration/system_overview_diagram).

---

<Source url="https://github.com/google/googletest" paths={[{"path": "googlemock/cmake/gmock.pc.in", "range": "1-9"},{"path": "googlemock/cmake/gmock_main.pc.in", "range": "1-9"}]} />
