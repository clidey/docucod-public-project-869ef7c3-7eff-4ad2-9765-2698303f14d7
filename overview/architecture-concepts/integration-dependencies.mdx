---
title: "Integration and Dependencies"
description: "Outline how to integrate GoogleTest and GoogleMock into your projects. Learn about supported build systems, essential includes, and how GoogleTest fits within larger continuous integration pipelines and cross-platform environments."
---

# Integration and Dependencies

Integrating GoogleTest and GoogleMock (gMock) into your projects is a seamless process designed to support a broad variety of build systems, continuous integration pipelines, and cross-platform environments. This page outlines how GoogleTest and gMock fit into your development workflow, the supported build configurations, essential includes, and recommendations for smooth adoption.

---

## Supported Build Systems

GoogleTest and GoogleMock are compatible with several common build systems, enabling you to incorporate them into your project regardless of your preferred tooling:

- **CMake:** The recommended build system for GoogleTest/gMock. Use the provided CMake targets such as `gtest` and `gmock` to link against the libraries easily.
- **Bazel:** GoogleTest/gMock is fully supported through Bazel with official rules, facilitating builds in large-scale codebases.
- **Other Build Systems:** Support via manual compilation or integration with GNU Make, Visual Studio projects, and others using the headers and source files.

<Tip>
When using CMake, the configuration file `gmock.pc.in` helps you link against GoogleMock with correct include and library paths, adapting automatically to your system's installation layout.
</Tip>

## Essential Includes and Linking

To use GoogleTest and GoogleMock features, ensure that your test source files include the main header:

```cpp
#include <gmock/gmock.h>
```

This inclusion provides both GoogleTest and GoogleMock APIs.

### Linking Libraries

- Link your test binaries with the `gmock` library to access mock functionality.
- The `gmock` library depends on `gtest` since GoogleMock extends GoogleTest.
- When using CMake, link targets like this:

```cmake
find_package(GTest REQUIRED)  # Finds GoogleTest and GoogleMock

add_executable(my_test test.cc)
target_link_libraries(my_test PRIVATE gmock gtest pthread)
```

- On systems without `pthread`, adjust accordingly.

<Info>
On Windows, make sure to link with the correct runtime libraries and include paths for `objbase.h` if using specialized calling conventions in mocks.
</Info>

## Integration in Continuous Integration Pipelines

GoogleTest and GoogleMock are designed for smooth integration in CI environments:

- **Automated feedback:** Expectations in mocks provide immediate failure feedback when interactions deviate, helping CI catch regressions early.
- **Cross-platform builds:** GoogleTest/gMock build and run consistently on Linux, macOS, and Windows, ensuring portability.
- **Support for parallel testing:** GoogleTest provides options for parallel test execution, which works well with mocks.

<Tip>
You can configure GoogleMock verbosity levels at runtime using flags like `--gmock_verbose=info|warning|error` to adjust logging in CI logs.
</Tip>

## Cross-Platform Considerations

- GoogleMock handles platform-specific calling conventions (e.g. `STDMETHODCALLTYPE` on Windows) through the `Calltype` specifier in mock methods.
- All supported platforms can build from source using the instructions and files provided in the GoogleTest repository.

## How GoogleMock Fits In Your Test Flow

The typical flow when using GoogleMock includes:

1. **Include headers:** Add `#include <gmock/gmock.h>` in your test files.
2. **Define mock classes:** Use `MOCK_METHOD` macros to mock interfaces or classes.
3. **Set up test fixtures:** Create test cases that instantiate mock objects and define expectations.
4. **Run tests:** Use your build system to compile and run tests, which will interact with mocks.

This page complements the user workflows described in [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) and the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html).

## Practical Tips and Best Practices

- **Use CMake for best integration:** Leverage provided targets in CMake for smooth dependency management.
- **Manage expectations early:** Set up expectations in your test initialization to catch interaction issues promptly.
- **Handle dependencies explicitly:** Avoid mocking classes you don't own; consider using interface wrappers if needed.
- **Suppress uninteresting call warnings as needed:** Use `NiceMock<T>` or adjust verbosity flags to reduce noise during integration tests.

## Troubleshooting Common Integration Issues

- **Linker errors:** Verify that your test executables link against both `gmock` and `gtest` libraries.
- **Calling convention mismatches:** On Windows, ensure use of `Calltype(STDMETHODCALLTYPE)` in mock methods to match function signatures.
- **Missing includes:** Verify that your include paths contain the GoogleTest installation's root.

If problems persist, see the [Troubleshooting Setup Issues](../../getting-started/troubleshooting-faq/troubleshooting-setup-issues.md) page.

## Next Steps

- Review the [Getting Started: Installing and Setting Up GoogleTest & GoogleMock](../getting-started/installing-and-setting-up.md) guide for detailed installation instructions.
- Explore [Mocking Basics with GoogleMock](../guides/getting-started/mocking-basics.md) to understand how to write and use mocks after integration.
- Consult the [Feature Overview](../../overview/feature-landscape/feature-overview.md) for capabilities related to testing and mocking.

---

<AccordionGroup title="Additional Resources & References">
<Accordion title="GoogleMock Cheat Sheet">
A concise reference for writing mocks, setting expectations, and using mock behaviors.
</Accordion>
<Accordion title="gMock Cookbook">
Step-by-step recipes for advanced usage, including mocking tricky cases, delegating to fakes, and custom actions.
</Accordion>
<Accordion title="Mocking APIs and Utilities (API Reference)">
Detailed API docs for `MOCK_METHOD`, `EXPECT_CALL`, and other mocking utilities.
</Accordion>
<Accordion title="GoogleTest GoogleMock GitHub Repository">
[GoogleTest GitHub](https://github.com/google/googletest) with source, examples, and build instructions.
</Accordion>
</AccordionGroup>

---