---
title: "Core Concepts & Terminology"
description: "Master the essential concepts underpinning GoogleTest and GoogleMock, including what constitutes a test, assertion, mock, expectation, matcher, and cardinality. Demystify terms, clarify mental models, and link ideas directly to their manifestation in the codebase."
---

# Core Concepts & Terminology

Master the essential concepts underpinning GoogleTest and GoogleMock, including what constitutes a test, assertion, mock, expectation, matcher, and cardinality. This guide demystifies key terms, clarifies mental models, and links these ideas directly to their manifestation in your code.

---

## Introduction

When you start working with GoogleTest and GoogleMock, encountering terms like "test", "mock", "assertion", "expectation", "matcher", and "cardinality" is inevitable. Understanding these foundational concepts is crucial to effectively designing, implementing, and maintaining robust tests.

This document unpacks these core notions, explains their meaning from the user's perspective, and provides clear examples to link them to your everyday testing code.

---

## What Is a Test?

A **test** is a piece of code that verifies whether a small unit of your program (typically a function or a class) behaves as expected under certain conditions.

- **How you create them:** By writing test functions that invoke your code and validate results using assertions.
- **Why they matter:** They detect regressions, document expected behavior, and increase confidence in your software.

Example:

```cpp
TEST(MyMathTest, AddsTwoIntegers) {
  EXPECT_EQ(Add(1, 2), 3);
}
```

Here, `TEST` defines a test fixture named `MyMathTest` with the test case `AddsTwoIntegers`. The `EXPECT_EQ` is an assertion within that test.

---

## Assertions

An **assertion** is a statement inside a test that verifies a condition or compares values.

- If an assertion fails, it indicates a problem with the code being tested (or the test itself).
- GoogleTest offers multiple assertion macros like `EXPECT_EQ`, `ASSERT_TRUE`, `EXPECT_NE`, among others.

Example:

```cpp
EXPECT_EQ(result, expected_value);
``` 

Here, the test expects `result` to equal `expected_value`. Failure reports are detailed and include the exact location.

---

## Mocks and Mock Objects

**Mock objects** are simulated versions of real objects used in tests to observe and control interactions.

- They implement the same interfaces as the real objects but enable you to specify and verify expected calls, argument values, call counts, and call order.
- Created using GoogleMock with simple macros like `MOCK_METHOD` inside mock classes.

Example:

```cpp
class MockFoo : public FooInterface {
 public:
  MOCK_METHOD(int, Bar, (int x), (override));
};
```

This defines a mock class `MockFoo` that can substitute any `FooInterface` implementation in your tests.

---

## Expectations

An **expectation** states how many times and in what manner a mock method should be called.

- Expressed with `EXPECT_CALL` on mock objects, these expectations specify details like the number of calls (`Times()`), argument matching (`Matchers`), call order (`InSequence`), and behavior (`WillOnce`, `WillRepeatedly`).
- Expectations help detect incorrect interactions in the code under test.

Example:

```cpp
EXPECT_CALL(mock_foo, Bar(5))
    .Times(2)
    .WillRepeatedly(Return(10));
```

This expects the `Bar` method on `mock_foo` to be called exactly twice with argument 5, returning 10 each time.

---

## Matchers

**Matchers** describe how to verify the values of function arguments when a mock method is called.

- They examine whether arguments meet certain criteria (e.g., equal to a value, greater than, matching a pattern).
- Common matchers include `_` (wildcard), `Eq(value)`, `Ge(value)`, and many others.

Example:

```cpp
EXPECT_CALL(mock_obj, Foo(Ge(5), _));
```

Here, the first argument must be greater than or equal to 5, and the second argument can be anything.

---

## Cardinalities

**Cardinality** defines the allowed number of times a mock method call is expected.

- Passed as an argument to `Times()` in an expectation.
- Indicates exact counts (`Exactly(n)` or simply `n`), ranges (`Between(m, n)`), or flexible bounds (`AtLeast(n)`, `AtMost(n)`, `AnyNumber()`).

Example:

```cpp
EXPECT_CALL(mock_obj, DoSomething())
    .Times(AtLeast(1));
```
This expects `DoSomething()` to be called at least once.

---

## User Flow: From Understanding to Use

1. **Define interfaces** for your dependencies.
2. **Create mock classes** deriving from those interfaces using `MOCK_METHOD`.
3. **Set expectations** for mock calls with `EXPECT_CALL` specifying matchers, cardinalities, and actions.
4. **Write tests** that exercise your code with mocks injected.
5. **Validate outcomes** through test assertions and mock verifications.

This progression helps isolate units, verify behavior, and write expressive, maintainable tests.

---

## Practical Examples

### Mocking a Class

```cpp
class Database {
 public:
  virtual bool Connect(const std::string& url) = 0;
  virtual std::string Query(const std::string& sql) = 0;
  virtual ~Database() {}
};

class MockDatabase : public Database {
 public:
  MOCK_METHOD(bool, Connect, (const std::string& url), (override));
  MOCK_METHOD(std::string, Query, (const std::string& sql), (override));
};
```

### Setting Expectations with Matchers and Actions

```cpp
using ::testing::_;  // wildcard matcher
using ::testing::Return;

TEST(MyTest, DatabaseQuery) {
  MockDatabase db;

  EXPECT_CALL(db, Connect(_))
      .WillOnce(Return(true));

  EXPECT_CALL(db, Query("SELECT * FROM users"))
      .WillOnce(Return("user_data"));

  // Code using db goes here
}
```

In this example, the `Connect` method is expected once with any argument, and the `Query` must be called with the exact string.

---

## Best Practices & Tips

- Use **meaningful matchers** in expectations to avoid nonsense or brittle tests.
- Employ **cardinalities** thoughtfully — too strict or too loose expectations harm test quality.
- Prefer **`ON_CALL`** to setup common default mock behavior and `EXPECT_CALL` only when verifying specific calls to avoid over-specification.
- When mocking overloaded methods, **use explicit typing** to avoid ambiguities.
- Use **`NiceMock`** when you want to suppress warnings about uninteresting calls and **`StrictMock`** when you want them to be errors.
- Organize expectations into **sequences** (`InSequence`) if order matters.

---

## Common Pitfalls

- Forgetting to declare destructors as `virtual` in interfaces to be mocked.
- Over-specifying expectations and matchers, making tests prone to break on refactors.
- Not setting expectations on all mock calls used in the tests.
- Misusing `EXPECT_CALL` and `ON_CALL` — remember `EXPECT_CALL` verifies calls, `ON_CALL` sets defaults without expectations.

---

## Related Documentation

- [Writing Your First Test](/getting-started/first-test-experience/writing-your-first-test) — Learn to write your initial tests using GoogleTest.
- [Mocking APIs](/api-reference/mocking-apis/mock-classes-methods) — Deep dive into mock class and method definitions.
- [Setting Expectations and Actions](/api-reference/mocking-apis/mock-expectations-actions) — Detailed guide on how to specify and control mock behavior.
- [Matchers for Arguments and Outcomes](/api-reference/matchers-actions/argument-matchers) — Comprehensive list and usage of matchers.
- [The gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Practical recipes and recommendations for advanced mocking patterns.

---

## Next Steps

Once you master these concepts, jump into writing and running your first tests, then gradually build expertise by exploring mocking techniques, advanced workflows, and integration tips.

Tap into this foundational knowledge to write more expressive, maintainable, and reliable tests with GoogleTest and GoogleMock.
