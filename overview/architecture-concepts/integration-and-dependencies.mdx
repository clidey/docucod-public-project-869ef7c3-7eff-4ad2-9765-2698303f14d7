---
title: "Integration & Dependencies"
description: "Explains how GoogleTest integrates into C++ projects, its dependencies (such as compiler minimums and prospective dependencies like Abseil), and how it interacts with build systems and continuous integration environments. Details cross-compatibility and platform support."
---

# Integration & Dependencies

## Seamless Integration of GoogleTest into Your C++ Projects

GoogleTest is designed with real-world C++ development workflows in mind. Integrating it into your project involves understanding its dependencies, build system interactions, and compatibility nuances — all key to unlocking its full potential.

### Why This Matters to You

- **Effortless setup:** Knowing how GoogleTest fits into your build system saves you time and avoids headaches.
- **Reliable compatibility:** Understanding dependency requirements ensures smooth builds across platforms.
- **Effective CI integration:** Proper setup maximizes automated testing effectiveness in continuous integration pipelines.

Whether you're adding testing to an existing C++ codebase or building new tests from scratch, this guide arms you with what you need to know to integrate GoogleTest confidently.

---

## What Is Integration & Dependencies?

Integration & Dependencies describes how GoogleTest connects with your C++ project environment. At its core, this involves:

- GoogleTest’s required compiler support and minimum C++ standard version
- External dependencies and prospective future dependencies like Abseil
- How GoogleTest works with popular build systems, particularly CMake
- Using GoogleTest alongside continuous integration (CI) systems
- The supported platforms and considerations for cross-compatibility

As a user, you want to ensure GoogleTest fits into your existing toolchain and workflow without disruption.

This page equips you to answer exactly that.

### Core Purpose

GoogleTest demands a C++17-capable compiler and standard library support, ensuring modern C++ language features underpin its implementation. It currently is a relatively self-contained library, but plans for optional dependencies such as [Abseil](https://abseil.io/) may appear in the future.

Its widespread CMake support means you can build GoogleTest standalone or embed it within your project’s CMake build for consistent compilation and linking. It also manages runtime library compatibility in environments like Visual Studio.

And it offers flexible ways to integrate into CI pipelines across platforms.

---

## Key Features and Capabilities

### 1. Compiler and C++ Standard Requirements

- GoogleTest requires an environment supporting **C++17** as a minimum.
- You can ensure this by specifying `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)` in your project's CMakeLists.txt.
- For C projects using GoogleTest, consider specifying the standard via CMake flags (like `-DCMAKE_CXX_FLAGS`).

### 2. Build System Integration

With **CMake** as the primary supported build system, GoogleTest offers several integration pathways:

- **Standalone build:** Clone the repository, create a build directory, then run `cmake ..`. The default build includes both GoogleTest and GoogleMock.
- **Selective builds:** Disable GoogleMock building via `-DBUILD_GMOCK=OFF` when only GoogleTest is needed.
- **As part of existing CMake projects:**
  - Use `find_package(GTest CONFIG REQUIRED)` to locate installed GoogleTest libraries.
  - Or include GoogleTest as a subdirectory via `add_subdirectory()`, integrating source builds for consistent compiler and linker flags.
  - Alternatively, use CMake’s `FetchContent` to download and build GoogleTest during your project’s configure step to simplify CI setups.

Example of `FetchContent` usage:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# For Windows, match linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

### 3. Visual Studio Runtime Compatibility

- By default, GoogleTest compiles with static runtimes (`MTd`), but Visual Studio projects link runtimes dynamically (`MDd`), which causes conflicts.
- Use the CMake option `gtest_force_shared_crt` to make GoogleTest link dynamically, aligning runtimes and avoiding linker errors.

### 4. Thread Safety and Multi-threaded Testing

- GoogleTest is thread-safe on platforms offering pthreads.
- The macro `GTEST_IS_THREADSAFE` reflects thread safety support.
- If pthread detection fails, force pthread usage with `-DGTEST_HAS_PTHREAD=1` or disable it with `-DGTEST_HAS_PTHREAD=0`.

### 5. Shared Library Support

- While the static library is simpler and recommended, GoogleTest can be built as a shared library (DLL on Windows).
- Enable shared library creation with `-DGTEST_CREATE_SHARED_LIBRARY=1`.
- When compiling tests to link against this shared library, add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` to the compiler flags.

### 6. Dependencies

- Presently, GoogleTest has no mandatory external dependencies besides a C++17-compliant standard library and compiler.
- Some components reference future optional dependency on Abseil for utility features, but this is not required yet.

### 7. Platform Support

- GoogleTest supports Linux, Windows (including Visual Studio), and Mac OS X (including Xcode).
- On embedded/Arduino platforms (ESP8266, ESP32, NRF52 with Arduino), special initialization routines are provided.

---

## GoogleTest Integration Workflow Example

```bash
# Clone GoogleTest repo
git clone https://github.com/google/googletest.git -b v1.17.0
d
# Build standalone
cd googletest
mkdir build && cd build
cmake ..               # Prepare build with default options
make                   # Build all tests and libs
sudo make install      # Optional - install into system or custom prefix
```

For integration within your own project:

1. Use CMake's `FetchContent` to pull GoogleTest at configure time (preferred for CI).
2. Add tests linking to `gtest_main` for a ready-made `main()` entry.
3. Match your project’s runtime settings on Windows using `gtest_force_shared_crt`.

---

## Practical Tips & Best Practices

- **Use FetchContent for CI:** Automate GoogleTest source downloads in CI builds to keep dependencies consistent and reduce manual steps.
- **Match Visual Studio runtimes:** Always set `gtest_force_shared_crt` in Windows projects to avoid common linker errors.
- **Check C++17 support:** Ensure your compiler and build environment support C++17 before integrating GoogleTest.
- **Be cautious with shared libs:** Shared library builds require extra flags; consider whether your project benefits more from static linking.
- **Pthread flag control:** If your environment misdetects pthread support, explicitly set `GTEST_HAS_PTHREAD` macro to fix build/link issues.

---

## Troubleshooting Common Integration Issues

<Tip>
If you encounter linker errors related to C runtime mismatches on Windows (e.g., LNK2038), verify your CMake options include `-Dgtest_force_shared_crt=ON`.
</Tip>

<Warning>
If the GoogleTest build fails due to the compiler lacking C++17 support, check your compiler version and update it or adjust standard settings in your CMake project.
</Warning>

<Info>
Missing pthread detection can cause link failures on POSIX platforms. Try toggling `-DGTEST_HAS_PTHREAD` to 1 or 0 explicitly and verify the relevant compiler and linker flags (e.g., `-pthread`).
</Info>

---

## How Integration Fits into Continuous Integration (CI)

GoogleTest’s ease of integration makes it well-suited for automated CI pipelines:

- Embedded FetchContent approach streamlines GoogleTest setup during CI runs.
- Cross-platform build scripts (CMake) ensure consistent tests whether running on Linux, Windows, or Mac agents.
- Built-in support for test discovery (`RUN_ALL_TESTS()`) simplifies automated pass/fail reporting.
- Integration with popular build systems reduces configuration variability.

Adopting these integration practices will help you maintain dependable, fast CI workflows that rapidly validate your C++ code.

---

## Cross-Compatibility Overview

GoogleTest has been extensively validated on:[Linux, Windows, Mac OS X] with support that includes:

- Multiple compilers such as GCC, Clang, MSVC (Visual Studio)
- C++17 standard required
- POSIX pthreads support where available
- Embedded and Arduino platforms with special initialization

This platform and compiler coverage ensures you can write portable tests that run anywhere your application runs.

---

## Summary

GoogleTest’s integration and dependencies landscape is designed for smooth adoption and broad platform compatibility. By requiring modern C++17 support and a commonly used build system (CMake), it fits flexibly into your existing development environment. Whether standalone or embedded, the library's build and runtime configurations allow you to tailor it to your project’s needs. Understanding these integration details ensures robust testing infrastructure that scales from small projects to large CI pipelines.


---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest Primer](../configuration-bootstrap/first-test-case)
- [Installation with CMake](../../getting-started/requirements-installation/installation-cmake)
- [Integration and Best Practices Guide](../../guides/real-world-testing-scenarios/integration-and-best-practices)

---

## Related Documentation Pages

- [What is GoogleTest?](../../overview/product-intro-value/what-is-googletest)
- [Core Features at a Glance](../../overview/product-intro-value/core-features-at-a-glance)
- [Setting Up and Running Your First Test](../../guides/core-testing-workflows/setting-up-and-running-your-first-test)
- [Project Integration & Best Practices](../../guides/real-world-testing-scenarios/integration-and-best-practices)