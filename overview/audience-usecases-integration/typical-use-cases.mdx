---
title: "Key Use Cases"
description: "See where GoogleTest excels—unit and integration testing, mocking for dependency isolation, testing legacy code, continuous integration pipelines, and verifying cross-platform C++ libraries."
---

# Key Use Cases

Discover the core scenarios where GoogleTest shines, empowering you to write reliable, maintainable, and fast C++ tests. This page unpacks practical examples and real-world workflows to guide you in leveraging GoogleTest for unit testing, integration testing, mocking dependencies, evolving legacy codebases, and managing tests across platforms within continuous integration environments.

---

## Unit and Integration Testing

GoogleTest is your versatile test framework supporting both unit tests—isolated checks of small code units—and integration tests that validate interactions among components.

- **Write Clear Tests:** Use simple `TEST()` and fixture-based `TEST_F()` macros to structure tests reflecting your codebase.
- **Assert Confidently:** Employ a rich suite of assertions (`EXPECT_EQ`, `ASSERT_TRUE`, `EXPECT_THAT`, etc.) that provide detailed failure messages with values.
- **Isolate & Reuse:** Leverage test fixtures to reuse setup and teardown code, maximizing efficiency and clarity.

**Example Workflow:**
```cpp
TEST(MathTest, FactorialOfZero) {
  EXPECT_EQ(Factorial(0), 1);
}

class QueueTest : public testing::Test {
 protected:
  Queue<int> q_;

  void SetUp() override {
    q_.Enqueue(42);
  }
};

TEST_F(QueueTest, DequeueReturnsElement) {
  int* n = q_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 42);
  delete n;
}
```

---

## Mocking for Dependency Isolation

GoogleTest integrates seamlessly with GoogleMock, enabling precise control and verification of interactions with dependencies, isolating system parts under test.

- **Define Mocks Quickly:** Create mock classes with `MOCK_METHOD` macros to simulate behavior.
- **Set Expectations:** Use `EXPECT_CALL()` to specify which methods must be called with which arguments, how many times, and in what order.
- **Control Behavior:** Customize responses using `WillOnce()`, `WillRepeatedly()`, and complex actions to simulate various scenarios.
- **Manage Uninteresting Calls:** Use `NiceMock` or `StrictMock` wrappers to control warnings or failures on unexpected calls.

**Example:**
```cpp
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};

TEST(DrawingTest, DrawsCircle) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(1);
  EXPECT_CALL(turtle, Forward(100)).Times(AtLeast(1));
  ... // test code exercising drawing
}
```

---

## Testing Legacy Code

GoogleTest helps you add tests to legacy C++ projects without major rewrites.

- **Use Predicate Assertions:** Improve clarity in tests by writing custom predicates with informative failure messages.
- **Skip Tests Conditionally:** Use the `GTEST_SKIP()` macro to gracefully skip tests where setup conditions aren't met.
- **Test Private Members:** Carefully test internals using friend declarations or internal headers to avoid breaking encapsulation.

**Practical Tip:**
Writing predicate assertions provides richer diagnostic information than generic `EXPECT_TRUE()`:
```cpp
testing::AssertionResult IsEven(int n) {
  if ((n % 2) == 0)
    return testing::AssertionSuccess() << n << " is even";
  else
    return testing::AssertionFailure() << n << " is odd";
}

EXPECT_TRUE(IsEven(Fib(4)));  // Clear failure message on test failure
```

---

## Integration with Continuous Integration Pipelines

GoogleTest's flexible CLI flags and output formats make it a natural fit for CI environments.

- **Selective Runs:** Run tests or subsets via `--gtest_filter` and shard tests across machines.
- **Repeat & Shuffle:** Use `--gtest_repeat` and `--gtest_shuffle` to uncover flaky tests.
- **Output Formats:** Generate XML or JSON reports (`--gtest_output=xml:filename`) compatible with CI dashboards.
- **Fail Fast:** Halt test execution immediately on failure with `--gtest_fail_fast` for faster feedback.

**Example use:**
```bash
./my_tests --gtest_filter=MySuite.* --gtest_output=xml:results.xml
```
This command runs all tests in `MySuite` and produces an XML report for CI systems.

---

## Cross-Platform C++ Library Verification

GoogleTest is designed to work consistently across platforms (Linux, Windows, Mac), helping verify cross-platform C++ libraries with confidence.

- **Portable Tests:** Write once, run anywhere without modification.
- **Parameterized & Typed Tests:** Easily test multiple data types and configurations with value-parameterized and typed tests to cover platform-specific differences.
- **Mocking Support:** Mock platform-specific dependencies to isolate platform logic.

Made to ensure your C++ libraries behave consistently, regardless of the target environment.

---

## Tips and Best Practices

- **Prefer Nonfatal Assertions When Possible:** Use `EXPECT_` variants to continue test execution and find multiple failures.
- **Use Sequences and Ordering for Interaction Checks:** Ensure calls happen in correct order when necessary using `InSequence` and `After`.
- **Keep Tests Independent and Repeatable:** Minimize shared state outside fixtures.
- **Leverage Test Fixtures for Shared Setup:** Reduce boilerplate and improve readability.
- **Use Rich Matchers for Flexible Verifications:** Use `EXPECT_THAT` with matchers for expressive checks.
- **Leverage Scoped Traces:** `SCOPED_TRACE` can add helpful context to failures inside nested calls.

---

## Summary

This page has shown where GoogleTest excels in your C++ testing workflow:

- Writing unit and integration tests with clarity and repeatability
- Using GoogleMock to isolate dependencies and verify interactions
- Approaching legacy codebases with custom predicates and graceful skipping
- Integrating tests robustly into CI pipelines with flexible filtering and reporting
- Validating cross-platform C++ libraries consistently

For deep dives, consult [GoogleTest Primer](primer.md), [Mocking Reference](reference/mocking.md), and the [Advanced GoogleTest Topics](advanced.md). Explore [GoogleTest Samples](samples.md) for practical examples.

---

### Related Documentation

- [GoogleTest Primer](primer.md) - Get started with writing tests
- [Mocking Reference](reference/mocking.md) - Use advanced mocking features
- [Advanced GoogleTest Topics](advanced.md) - Learn about advanced assertions and test management
- [GoogleTest Samples](samples.md) - Explore example test projects
- [Integration with Build & CI](overview/audience-usecases-integration/integration-points) - See how to integrate in your CI systems

---

### Next Steps

Begin writing your tests or enhancing your existing ones by exploring [GoogleTest Primer](primer.md). If mocking dependencies is part of your strategy, dive into the [Mocking Reference](reference/mocking.md) and [gMock for Dummies](gmock_for_dummies.md). Afterward, discover how to optimize and scale your tests with the [Advanced Topics](advanced.md).


