---
title: "Core Concepts & Terminology"
description: "Defines essential domain terminology such as assertions, matchers, actions, mocks, test fixtures, and death tests. Describes how these concepts fit together in practical testing workflows."
---

# Core Concepts & Terminology

## Introduction

Understanding GoogleMock’s core terminology is essential to mastering the practice of mocking in C++. This page defines the fundamental concepts—**assertions**, **matchers**, **actions**, **mocks**, **test fixtures**, and **death tests**—and explains how these key elements interrelate during practical testing workflows. By grasping this vocabulary, you’ll be able to write expressive and maintainable tests that precisely specify and verify how your code interacts with its dependencies.

---

## Essential Terminology

### Mock
A **mock** is a dynamically controllable object that simulates a real object’s interface and behavior. By creating a mock, you can specify *exactly* how it should be used by the code under test, including which methods should be called, with what arguments, how many times, and what they should return or do.

Mocks are typically generated automatically using macros like `MOCK_METHOD` within a mock class that implements the same interface as the real class. GoogleMock offers additional wrapper templates like `NiceMock`, `NaggyMock`, and `StrictMock` to control mock object behavior on *uninteresting calls* (calls without expectations):

- **NiceMock:** Suppresses warnings on uninteresting calls, allowing silent ignoring.
- **NaggyMock:** The default behavior, which prints warnings on uninteresting calls.
- **StrictMock:** Treats uninteresting calls as test failures.

Example of mock usage with modifiers:

```cpp
using ::testing::NiceMock;
using ::testing::StrictMock;

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetSize, (), (const, override));
  MOCK_METHOD(void, SetName, (const std::string&), (override));
};

NiceMock<MockFoo> nice_foo;      // Ignores uninteresting calls
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls
```

### Expectation and Assertion

An **expectation** corresponds to a statement in the test that sets requirements on how a mock should be used. These expectations are declared using the `EXPECT_CALL` macro, where you specify the mock object, the method, the expected arguments, the expected number of calls (`Times()`), and the behavior (`WillOnce()`, `WillRepeatedly()`, etc).

An **assertion** validates conditions within tests and reports failures when expectations are not met. GoogleMock integrates with GoogleTest’s assertions to verify that all expectations on mocks are satisfied exactly as specified, producing clear diagnostic messages when they are not.

Usage example:

```cpp
EXPECT_CALL(mock_foo, SetName("Alice"))
    .Times(1)
    .WillOnce(Return());

// Executes code under test...

// When mock_foo is destroyed, GoogleMock asserts this expectation was met.
```

### Matchers

Matchers allow you to specify flexible conditions on method arguments instead of strict equality. They enable your tests to express "I expect a call to method `Bar` with an argument greater than 5" rather than "I expect a call with exactly 6".

Some common matchers include:

- `_` — wildcard matcher, matches any argument.
- `Eq(value)` — matches equality with `value`.
- `Ge(value)` — argument greater than or equal to `value`.
- `NotNull()` — pointer argument is non-null.

GoogleMock supports combining matchers for precise specifications:

```cpp
EXPECT_CALL(mock, Foo(Ge(5)))
    .WillOnce(Return(true));
EXPECT_CALL(mock, Bar(_, NotNull()));
```

You can also match multiple arguments as a tuple using the `.With()` clause:

```cpp
EXPECT_CALL(mock, Update(_, _))
    .With(Lt());  // Restricts calls where first arg < second arg
```

### Actions

**Actions** describe what happens when a mock method is called. By default, mock methods of built-in return types return zero or a default-constructed value (or nothing if `void`). You customize this behavior using clauses like `.WillOnce()`, `.WillRepeatedly()`, or `ON_CALL()` for default behavior.

Examples:

```cpp
EXPECT_CALL(mock, Foo(_))
    .WillOnce(Return(42))           // Returns 42 first time called
    .WillRepeatedly(Return(0));    // Returns 0 for subsequent calls

ON_CALL(mock, Bar())
    .WillByDefault(Return(true));  // Default action if no expectation
```

You can use lambdas, functions, or predefined actions for rich behaviors, including modifying output arguments or invoking callbacks.

### Test Fixtures

A **test fixture** is a class that defines the common context for several related tests, including setup and teardown code. With GoogleMock, fixtures often hold mock objects and configure their expectations and default behaviors.

Example usage:

```cpp
class FooTest : public testing::Test {
 protected:
  MockFoo mock_foo;

  void SetUp() override {
    // Setup code here
  }
};

TEST_F(FooTest, TestBar) {
  EXPECT_CALL(mock_foo, Bar(_)).Times(1);
  // ... test logic
}
```

### Death Tests

Death tests verify that your code correctly terminates under specific conditions, such as invalid input or fatal errors. GoogleMock integrates with GoogleTest’s death test framework to allow expectations and mocks to be used safely in these scenarios.

Use death tests cautiously, as they require separate process invocations.

## How These Concepts Work Together in a Testing Workflow

1. **Define Mock Classes** using `MOCK_METHOD` macros for interfaces your code depends on.
2. **Create Mock Objects** in your test fixture or test function.
3. **Set Default Behaviors** using `ON_CALL` for general method calls.
4. **Declare Specific Expectations** with `EXPECT_CALL` specifying argument matchers, call counts, sequences, or timing.
5. **Run Code Under Test**, exercising the mocks.
6. **Validate** that all expectations are met (automatic when mocks are destructed or explicitly with `Mock::VerifyAndClearExpectations()`).

## Best Practices and Tips

- **Write Expectations Before Calls:** Always set expectations before executing the code that calls mocks.
- **Use Matchers to Avoid Over-Specification:** Match only what matters to prevent brittle tests.
- **Control Uninteresting Calls:** Use `NiceMock` to silence warnings for methods you don’t care about.
- **Manage Call Order:** Use `InSequence` or `.After()` to require specific call orders.
- **Retire Expectations on Saturation:** Use `.RetiresOnSaturation()` to automatically deactivate expectations once fulfilled.
- **Use Default Actions Wisely:** Define fallback behaviors with `ON_CALL` to enhance test resilience.
- **Verify and Clear Mocks Manually:** Consider explicit verification to catch unsatisfied expectations early.

## Troubleshooting Common Scenarios

- **Uninteresting Call Warning:** Indicates calls to methods without `EXPECT_CALL`. Use `NiceMock` or add a catch-all expectation with `.Times(AnyNumber())`.
- **Unexpected Call Failure:** Occurs if a call matches no expectation—check matchers and call order.
- **Excessive Call Failure:** Check if the method is called more times than allowed by `.Times()`.
- **Mismatch in Arguments:** Verify argument matchers and actual call parameters.
- **Saturation Errors with `WillOnce()`:** Ensure the number of `WillOnce()` actions matches expected calls or use `WillRepeatedly()`.

## Example Overview

Here’s a brief snippet illustrating the core flow:

```cpp
class MockService {
 public:
  MOCK_METHOD(int, GetValue, (int id), (override));
};

TEST(MyTest, UsesMockService) {
  NiceMock<MockService> mock;

  ON_CALL(mock, GetValue(_))
      .WillByDefault(Return(10));

  EXPECT_CALL(mock, GetValue(5))
      .Times(2)
      .WillOnce(Return(20))
      .WillOnce(Return(30));

  // Code that uses mock and calls GetValue...
}
```

This test defines specific behavior and expectations on a mock object to verify its usage precisely.

## Additional Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — A beginner-friendly tutorial.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) — Quick reference for syntax.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Detailed API documentation.
- [Core Architecture Overview](../core-architecture-concepts/architecture-overview) — How GoogleTest and GoogleMock fit together.

---

If you need to start setting up mocks quickly, refer to the "Getting Started" guides and the "Defining and Using Mocks" reference pages.


---

### Note
This page focuses specifically on defining and understanding the core terminology fundamental to working effectively with GoogleMock. For detailed examples, advanced workflows, and integration techniques, please consult other focused documentation pages.