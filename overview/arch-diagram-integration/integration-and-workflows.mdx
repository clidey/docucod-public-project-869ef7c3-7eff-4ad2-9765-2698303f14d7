---
title: "Integration & Supported Workflows"
description: "Learn how to integrate GoogleTest into diverse C++ development environments and workflows. Review supported platforms, typical use scenarios, and the basics of getting started with CMake, Bazel, and other build tools."
---

# Integration & Supported Workflows

Seamlessly integrating GoogleTest into your C++ development environment is essential for gaining the full benefits of its powerful testing and mocking capabilities. This page guides you through the process of incorporating GoogleTest into various build systems and workflows, highlights supported platforms, and offers practical insights to jumpstart your testing journey.

---

## Why Integration Matters

When introducing GoogleTest into your projects, your goal is to enable reliable, maintainable tests that fit naturally within your existing development pipeline. Whether you use CMake, Bazel, or other build tools, proper integration ensures:

- **Automated test discovery and execution** without manual intervention.
- **Smooth interaction with your IDE and CI/CD systems** for efficient development and quality assurance.
- **Configurability to suit your project's structure and coding standards**, enhancing developer productivity.

This page helps you make sense of these workflows with concrete guidance.

---

## Supported Platforms and Environments

GoogleTest is designed for portability and robust operation across a wide range of platforms. Supported environments include, but are not limited to:

- Linux, macOS, and Windows for desktop.
- Major compiler toolchains such as GCC, Clang, and MSVC.
- Various continuous integration systems commonly used in industry.

Before proceeding, ensure your development environment meets these basic requirements from the [System Requirements & Supported Platforms](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/requirements-overview.md) documentation.

---

## Integrating GoogleTest with CMake

CMake is among the most popular build systems for C++ projects. Integrating GoogleTest with CMake unlocks automatic test discovery via CTest and allows tests to run alongside your build seamlessly.

### Basic Setup

1. **Add GoogleTest as a subdirectory or external dependency:**

   ```cmake
   # Using FetchContent to pull GoogleTest at configure time
   include(FetchContent)
   FetchContent_Declare(
     googletest
     URL https://github.com/google/googletest/archive/refs/tags/release-1.12.1.zip
   )
   FetchContent_MakeAvailable(googletest)
   ```

2. **Link your test target to GoogleTest:**

   ```cmake
   add_executable(MyTests test_main.cpp my_class_test.cpp)
   target_link_libraries(MyTests gtest_main)

   # Enables CTest integration
   include(GoogleTest)
   gtest_discover_tests(MyTests)
   ```

3. **Run your tests:**

   After building, execute `ctest` in your build directory to discover and run tests.

<Tip>
When using CMake, leverage `gtest_discover_tests()` for automatic test registration which scales well as your suite grows.
</Tip>

### Best Practices

- Keep your tests in a separate folder or target for better organization.
- Use CMake `FetchContent` or `ExternalProject` to manage GoogleTest dependencies, avoiding manual downloads.
- Customize test options (verbosity, filters) via CTest where needed.

---

## Integration with Bazel

Bazel users can incorporate GoogleTest using provided `cc_test` and `cc_library` rules:

1. **Declare GoogleTest in your `WORKSPACE`**

   ```bazel
   http_archive(
     name = "com_google_googletest",
     urls = ["https://github.com/google/googletest/archive/release-1.12.1.tar.gz"],
     strip_prefix = "googletest-release-1.12.1",
     sha256 = "<checksum>",
   )
   ```

2. **Define tests in your `BUILD` files:**

   ```bazel
   cc_test(
     name = "my_lib_test",
     srcs = ["my_lib_test.cc"],
     deps = ["@com_google_googletest//:gtest_main", ":my_lib"],
   )
   ```

3. **Run tests:**

   Execute `bazel test //path/to:my_lib_test`.

<Bullet>
Bazel natively supports hermetic builds and caching, delivering fast, scalable test execution when paired with GoogleTest.
</Bullet>

---

## Other Build Systems

GoogleTest can also be integrated with other build tools such as Makefiles, SCons, and Ninja by manually including the GoogleTest source and headers into your build process and linking the necessary libraries.

You likely need to:

- **Include the GoogleTest headers**
- **Compile GoogleTest source files (`gtest.cc`, `gtest_main.cc`)**
- **Link your test binaries against GoogleTest libraries**

Refer to your build tool's documentation for specifics.

<Tip>
Check [Installing GoogleTest](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/installation-methods.md) for detailed instructions related to your build environment.
</Tip>

---

## Workflow Examples

### Typical User Flow With CMake

1. Add GoogleTest as a FetchContent module.
2. Define a test target linking to `gtest_main`.
3. Write test source files utilizing GoogleTest APIs.
4. Configure CTest for automatic discovery.
5. Build and run tests via `cmake --build .` and `ctest`.

### Typical User Flow With Bazel

1. Add GoogleTest to your `WORKSPACE`.
2. Reference GoogleTest libraries in your `BUILD` test targets.
3. Write tests using GoogleTest APIs.
4. Run tests via `bazel test`.

---

## Practical Tips for Success

- **Use modern C++ practices:** GoogleTest supports C++11 and above fully; enable your compiler accordingly.
- **Separate your production code and tests:** Avoid cross-dependencies that complicate builds.
- **Leverage `ON_CALL` and `EXPECT_CALL`:** These GoogleMock macros help you specify default and expected behaviors seamlessly.
- **Control verbosity at runtime:** Use GoogleTest and GoogleMock flags to adjust output for your needs.
- **Prevent leaks:** Use `Mock::AllowLeak()` if intentional; otherwise, ensure mocks are properly destroyed to trigger verification.

---

## Common Pitfalls

<AccordionGroup title="Common Challenges During Integration">
<Accordion title="Misplaced Mock Definitions or Includes">
Ensure mock classes and `#include <gmock/gmock.h>` are in test sources or files visible only to test targets; placing them in production code can cause bloated binaries and unexpected dependencies.
</Accordion>
<Accordion title="Ignoring Build Dependencies">
Don't forget to link your test executable against GoogleTest and GoogleMock libraries. Missing dependencies cause linker errors or runtime failures.
</Accordion>
<Accordion title="Version Mismatches">
Make sure the GoogleTest version used in your build matches the documentation and API expectations, especially important in large projects.
</Accordion>
<Accordion title="Incorrect Order of EXPECT_CALL() and Code Execution">
Set all expectations using `EXPECT_CALL` *before* exercising the code under test. Violating this sequence leads to undefined behavior and unpredictable test results.
</Accordion>
</AccordionGroup>

---

## Getting Started Preview

Once you have GoogleTest integrated with your build system:

- Explore the [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/docs/guides/getting-started/your-first-test.md) guide to create your initial test.
- Visit [Organizing and Grouping Tests](https://github.com/google/googletest/blob/main/docs/guides/getting-started/test-structure.md) for test structuring best practices.
- Dive into [Using Mocks and Expectations](https://github.com/google/googletest/blob/main/docs/guides/effective-testing-techniques/mocking-workflows.md) to leverage GoogleMock capabilities.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Core Features and Value](https://github.com/google/googletest/blob/main/docs/overview/intro-product-core/core-features-value.md)
- [Key Concepts and Terminology](https://github.com/google/googletest/blob/main/docs/overview/intro-product-core/core-concepts-terminology.md)
- [System Architecture Overview](https://github.com/google/googletest/blob/main/docs/overview/arch-diagram-integration/system-architecture.md)

---

Integrating GoogleTest effectively lays the foundation for a modern, scalable, and maintainable C++ testing practice. Follow the guidance herein to create seamless workflows and unlock the framework's full potential.
