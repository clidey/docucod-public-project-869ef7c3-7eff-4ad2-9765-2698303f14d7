---
title: "Why aren't my tests running or being discovered?"
description: "Clarifies test discovery behavior, addresses registration issues, missing test cases, and platform-specific quirks that prevent tests from being executed. Equips users to self-diagnose stalled test suites."
---

# Why Aren't My Tests Running or Being Discovered?

When working with GoogleTest, one critical early hurdle developers face is the issue of their tests not being discovered or executed despite building successfully. This page addresses common reasons why GoogleTest tests might not run or be discovered, guides you through diagnosing these issues, and helps ensure your test suites execute as expected.

---

## Understanding Test Discovery in GoogleTest

GoogleTest automatically discovers tests based on how they are defined using its test macros. Every test defined through `TEST()`, `TEST_F()`, or `TEST_P()` is implicitly registered with the framework at startup. When you run your test executable, GoogleTest enumerates all registered tests and runs them unless filtered or disabled.

Failures in the discovery or registration process lead to empty test runs, even though your test source files compile and link.

---

## Common Causes for Tests Not Being Discovered or Run

### 1. **Tests Not Properly Defined Using GoogleTest Macros**

- **Incorrect macro usage:** Only tests declared with `TEST()`, `TEST_F()`, or `TEST_P()` are recognized.
- **Missing test macro invocation:** Simply defining functions or classes is not enough; tests must use the GoogleTest test macros.

### 2. **Test Functions Are Not Linked Into the Executable**

- **Omitting test source files from build:** Ensure your test source files are included in your build system.
- **Using static libraries without forcing link:** Sometimes, object files with tests are omitted if not explicitly referenced; use linker options or `--whole-archive` equivalents.

### 3. **Tests Disabled With The `DISABLED_` Prefix**

GoogleTest treats test names starting with `DISABLED_` as disabled and won’t run them unless explicitly requested.

### 4. **Filtering Prevents Tests From Running**

- **Command-line flags:** Using `--gtest_filter` or similar flags can exclude tests.
- **Environment variables** or config files might pre-set filters that exclude your tests.

Check your test execution arguments for filters and remove or adjust them as needed.

### 5. **Improper Test Fixture Setup**

- **Incorrect inheritance:** Test fixtures must derive from `testing::Test`.
- **Misnamed or missing `SetUp()` or `TearDown()` methods:** Ensure correct spelling and capitalization.

### 6. **Testing Main Function Issues**

- **Missing or incorrect main:** GoogleTest requires a main function calling `RUN_ALL_TESTS()`.
- **Linking with `gtest_main` or `gmock_main` library:** If you rely on these libraries for main(), ensure correct linkage.

### 7. **Compiler or Platform-Specific Quirks**

- Certain compilers or build environments may require additional flags or explicit registration mechanisms.
- On embedded or unconventional platforms, standard test discovery may be constrained.

### 8. **Dynamic Test Registration Failures**

- **Static initialization order issues:** Test registration happens during static initialization, so improper linkage or compilation flags can prevent registration.

---

## Diagnosing Why Tests Are Not Discovered or Running

### Step 1: Verify Test Definitions

Look for test code patterns like:

```cpp
TEST(MyTestSuite, TestName) {
  EXPECT_EQ(1, 1);
}
```

Ensure your test cases use these macros and are not regular functions.

### Step 2: Confirm Test Files Are Included in Builds

Check your build configuration (CMakeLists.txt, Bazel BUILD files, etc.) to verify test source files are compiled and linked into the test binary.

### Step 3: Run Executable Without Filters

Execute the test binary with `--gtest_list_tests` to list all discovered tests:

```sh
./my_test_binary --gtest_list_tests
```

If this lists no tests, Go back to Step 1 or 2.

### Step 4: Look for Disabled Tests

Check if tests have the `DISABLED_` prefix in test or suite names. Such tests won't run unless explicitly requested.

### Step 5: Inspect Command-line Flags and Environment Variables

Remove or adjust any `--gtest_filter` or `--gmock_verbose` flags that might affect test execution.

### Step 6: Check for Main Function Issues

- If you wrote your own `main()`, verify it calls `RUN_ALL_TESTS()` and properly initializes GoogleTest.
- Otherwise ensure you link your tests against `gtest_main` or `gmock_main` which provides an appropriate main.

### Step 7: Increase Verbosity or Enable Logging

If the test framework initializes and then terminates silently, increase logging verbosity:

```sh
./my_test_binary --gtest_verbose=info
```

or

```sh
./my_test_binary --gmock_verbose=info
```

This can surface registration issues or test discovery problems.

---

## Platform-Specific Considerations

### Embedded or IoT Platforms

On platforms like ESP8266, ESP32, or certain microcontrollers, the test execution environment may be limited. GoogleTest may require adapting test setup and loop functions rather than using a `main()`.

### Windows Visual Studio

Ensure your project uses the correct runtime library settings and that all test configurations match. Problems with linking or static initialization can interfere with test discovery.

### Bazel or CMake Build Systems

- For Bazel, verify test targets include all source files and dependencies.
- For CMake, avoid setting `EXCLUDE_FROM_ALL` on test sources unless you explicitly build tests.

---

## Best Practices To Avoid Or Resolve Test Discovery Issues

- Always use GoogleTest macros `TEST()`, `TEST_F()`, `TEST_P()` to define tests.
- Use `gtest_main` or `gmock_main` libraries for main when possible.
- Name your tests descriptively and avoid `DISABLED_` prefixes unless intentionally disabling.
- Regularly run with `--gtest_list_tests` to confirm test discovery.
- Structure test code and fixtures carefully, ensuring proper inheritance and setup.
- Verify build system configuration includes all tests in the build.
- Be mindful of command-line filters that may hide tests.
- Leverage `--gtest_verbose=info` and `--gmock_verbose=info` for deep inspection.

---

## Troubleshooting Checklist

<Tip>
Use this checklist to systematically resolve test discovery issues:

- [ ] Verify test macros (`TEST`, `TEST_F`, `TEST_P`) are correctly used.
- [ ] Confirm all test source files are compiled and linked.
- [ ] Run tests with `--gtest_list_tests` to list discovered tests.
- [ ] Check for and remove or adjust `DISABLED_` prefixes.
- [ ] Review test runner command-line arguments for filters.
- [ ] Ensure presence of a valid `main()` calling `RUN_ALL_TESTS()`.
- [ ] Build with increased verbosity flags installed.
- [ ] Validate platform, compiler, and linker settings for compatibility.
- [ ] Review test fixture setup and inheritance correctness.
</Tip>

---

## Helpful Links and Related Documentation

- [GoogleTest Primer](primer.md) — A comprehensive beginner's guide to writing and running tests.
- [Using gMock in Tests](gmock_for_dummies.md) — Understand how mocks interact with test discovery.
- [Test Structure and Execution Reference](/api-reference/core-testing-api/test-structure) — Details on test definition and lifecycle.
- [Test Configuration and Filtering](/api-reference/core-testing-api/test-configuration) — Learn about command-line flags influencing test execution.
- [Common Issues & Troubleshooting](/getting_started/first_steps_usage/common_issues) — Tips for diagnosing test problems.
- [GoogleTest FAQ: Installation and Setup](faq/getting-started-and-common-issues/installation-and-setup-problems) — Ensure your environment supports test execution.

---

Remember, test discovery is foundational to effective test automation. Proper use of GoogleTest macros, correct build integration, and thoughtful test organization are critical to seeing your tests actually run. Use the progressive diagnostic steps above to identify and resolve issues preventing tests from executing.

If you continue encountering issues after following this guide, consider sharing minimal reproducible examples on community forums or filing an issue with the GoogleTest maintainers.

---

*This page equips developers with practical insights and systematic approaches to ensure their GoogleTest test suites are found and executed correctly.*