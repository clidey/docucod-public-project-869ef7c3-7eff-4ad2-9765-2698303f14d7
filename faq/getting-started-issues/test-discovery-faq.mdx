---
title: "How does test discovery and execution work?"
description: "Understand how GoogleTest automatically finds and runs tests without requiring manual registration. Learn how to organize tests, and leverage automatic test detection for maximum productivity and easy scaling."
---

# How Does Test Discovery and Execution Work?

GoogleTest simplifies your testing workflow by automatically discovering and executing tests without requiring any manual registration. This page will guide you through how GoogleTest finds your tests, organizes them, and runs them efficiently, empowering you to focus on writing robust test cases rather than managing cumbersome test registries.

---

## 1. Automatic Test Discovery

GoogleTest automatically locates all the tests defined in your codebase using the test macros such as `TEST()`, `TEST_F()`, and other fixture-based macros. There's no need to explicitly register or enumerate your tests; simply defining them using the supported macros is sufficient.

- **How does this help you?** You don’t need to maintain any glue code or registration listings, which scales effortlessly as your project grows.
- **Outcome:** When you run your test executable, GoogleTest traverses all compiled test cases and runs them.

### Example:
```cpp
TEST(MathTest, Factorial) {
  EXPECT_EQ(Factorial(0), 1);
  EXPECT_EQ(Factorial(3), 6);
}

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_TRUE(q0_.empty());
}
```
Here, GoogleTest discovers both `MathTest.Factorial` and `QueueTest.IsEmptyInitially` without any explicit registration.

---

## 2. Test Organization and Naming

GoogleTest structures tests into *test suites* (formerly called test cases) and *individual tests*.

- **Test Suites** group related tests under a logical umbrella (e.g., `MathTest`, `QueueTest`).
- **Tests** are the actual individual test functions inside suites.

This hierarchical organization enhances clarity and maintainability.

### Naming conventions:
- Test suite names and test names must be valid C++ identifiers.
- Test names should be descriptive and concise to express intent clearly.

### Example:
```cpp
TEST(StringUtil, HandlesEmptyString) { /*...*/ }
TEST(StringUtil, HandlesNonEmptyString) { /*...*/ }
```
---

## 3. Test Execution Flow

When you run your test executable,

1. **Initialization:** The test framework initializes, setting up flags and environment.
2. **Discovery:** It automatically collects all test suites and tests compiled into the executable.
3. **Execution:** Each test runs independently, with fresh fixture instances recreated for each test (ensures isolation).
4. **Result Aggregation:** Pass/fail statuses are recorded and reported.
5. **Exit:** The program returns a success status (0) if all tests pass, or failure (non-zero) otherwise.

This sequence guarantees test isolation and reproducibility.

### Running All Tests
Your program's `main()` typically ends with:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

The macro `RUN_ALL_TESTS()` triggers the automatic discovery and runs all detected tests.

---

## 4. Organizing Tests with Fixtures

Using test fixtures (`TEST_F`) allows you to share common setups and teardowns between related tests, without manual invocation.

### Key points:
- Each test runs with a fresh fixture instance.
- You write your setup code in the fixture's constructor or `SetUp()` method.
- Teardown code goes in the destructor or `TearDown()` method.

Example:

```cpp
class QueueTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Common setup for all tests in this fixture
    q_.Enqueue(1);
  }
  Queue<int> q_;
};

TEST_F(QueueTest, DequeueReturnsCorrectElement) {
  int* item = q_.Dequeue();
  ASSERT_NE(item, nullptr);
  EXPECT_EQ(*item, 1);
  delete item;
}
```

This pattern allows GoogleTest to discover and run tests that benefit from consistent and reusable environments.

---

## 5. Selective Test Execution

You can run subsets of your tests using command-line filters:

```shell
./mytests --gtest_filter=QueueTest.*
```

This filter runs all tests in `QueueTest`.

More complex patterns like `*Handles*` or exclusion `-` are supported.

---

## 6. Benefits of Automatic Discovery and Running

- **No manual bookkeeping:** Simply write tests using macros; GoogleTest handles the rest.
- **Scalable:** Easily add new tests without worrying about registration overhead.
- **Isolation:** Tests run independently with fresh fixtures.
- **Consistent reporting:** Compact and detailed output helps quickly identify failures.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Test Discovery and Execution">
<Accordion title="My test isn't running, what am I missing?">
Check that your test functions use the correct `TEST`, `TEST_F`, or related macros. A normal function or incorrectly named test won't be discovered.
</Accordion>
<Accordion title="Why does RUN_ALL_TESTS() return failure?">
Your tests may be failing assertions. Review test output carefully; GoogleTest reports failures with file and line info.
</Accordion>
<Accordion title="Fixture setup isn't applied?">
Verify you override `SetUp()` (capital S, capital U) and not `Setup()`; the latter is ignored.
</Accordion>
<Accordion title="My tests run but report unexpected errors?">
Try running with verbose flags, e.g., `--gtest_verbose=info`, to get detailed diagnostics on test execution.
</Accordion>
</AccordionGroup>

---

## 8. Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) – Learn basics of writing tests.
- [Writing Your First Test](../guides/getting-started/first-tests.md) – Step-by-step tutorial.
- [Testing with Fixtures](https://google.github.io/googletest/primer.html#test-fixtures) – Understand test fixtures usage.
- [Command Line Flags Reference](flags.md) – Fine tune your test runs.
- [Test Cases & Fixtures API Reference](../api-reference/core-testing-api/test-case-framework.md) – For advanced fixture management.

---

## 9. Summary

GoogleTest’s automatic test discovery and execution frees developers from manual test registration, streamlining the entire testing lifecycle. By organizing tests into suites and leveraging fixtures for uniform setup, you ensure scalability and maintainability. With flexible execution options and robust reporting, GoogleTest provides a powerful yet user-friendly testing environment.

<Tip>
Remember to always define your tests with GoogleTest macros and maintain clear naming conventions to ensure they are discovered and run correctly.
</Tip>

---

<Info>
For integrating GoogleMock features such as mocking and expectations, visit the [Mocking Reference](../docs/reference/mocking.md) and [gMock Cookbook](../guides/real-world-testing/scenarios-patterns.md).
</Info>

<Check>
Verify that your tests are being discovered by running your test executable without filters and confirm the output lists your test cases.
</Check>
