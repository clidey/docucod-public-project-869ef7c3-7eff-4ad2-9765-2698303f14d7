---
title: "How do I install and set up GoogleTest and GoogleMock?"
description: "Describes official installation methods, supported build systems (like CMake and Bazel), and common obstacles new users encounter. Offers quick-start guidance and links to in-depth setup resources, aiming to prevent typical beginner mistakes."
---

# How do I install and set up GoogleTest and GoogleMock?

## Overview
This page provides clear, step-by-step instructions to install and set up GoogleTest and GoogleMock in your C++ projects. You'll find details on official installation methods, supported build systems like CMake and Bazel, and common issues new users face during initial setup. Follow this guide to achieve a smooth, fail-proof start with these testing frameworks.

---

## Installation Methods

### Cloning the Repository
Begin by cloning the official GoogleTest repository to access the latest stable release:

```bash
# Clone GoogleTest repository with a specific release tag
git clone https://github.com/google/googletest.git -b v1.17.0
```

This repository includes both GoogleTest and GoogleMock.

---

### Building with CMake (Standalone)
GoogleTest includes CMake build scripts that work cross-platform, simplifying compilation.

<Steps>
<Step title="Create Build Directory">
Run these commands inside the repository root:

```bash
mkdir build && cd build
```
</Step>
<Step title="Generate Build System">
Invoke CMake to prepare native build files:

```bash
cmake ..
```

To build **only GoogleTest** (without GoogleMock), add the option:

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the Library">
On Unix-like systems:

```bash
make
```

On Windows with Visual Studio:

- Open the generated `gtest.sln` in Visual Studio.
- Build the solution.
</Step>
<Step title="Install (Optional)">
You may install GoogleTest system-wide (requires admin/root privileges):

```bash
sudo make install
```
This installs headers and libraries to `/usr/local/` by default.
</Step>
</Steps>

---

### Integrating GoogleTest into an Existing CMake Project

You can embed GoogleTest directly as part of your own project’s build.

**Recommended approach** uses CMake’s [`FetchContent`](https://cmake.org/cmake/help/latest/module/FetchContent.html) to automatically download GoogleTest during configuration.

#### Example `CMakeLists.txt` snippet:

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProject)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
)

# On Windows: matches runtime with your project
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests GTest::gtest_main)

enable_testing()
gtest_discover_tests(my_tests)
```

This setup:
- Fetches GoogleTest source at CMake configure time
- Builds GoogleTest alongside your tests
- Links your test executable against GoogleTest libraries
- Registers tests automatically with CTest


---

### Bazel Build System

If using Bazel, GoogleTest can be incorporated via Bazel WORKSPACE and BUILD files referencing the `googletest` external repository. For detailed Bazel support and examples, please consult the official GoogleTest [Bazel Quickstart guide](quickstart-bazel.md).

---

## Using GoogleMock

GoogleMock is shipped with GoogleTest and requires no separate installation. When building GoogleTest with CMake, GoogleMock is included by default.

To use GoogleMock:
- Include the header `<gmock/gmock.h>`
- Link your test binaries against `gmock_main` or `gmock` libraries.

Example for linking GoogleMock with your tests in CMake:

```cmake
target_link_libraries(my_mock_tests GMock::gmock_main)
```

For embedded platforms or special cases, the `gmock_main` library provides a default `main()`.

---

## Quick Start Guide

1. Clone the repository or set up FetchContent.
2. Ensure your compiler supports C++17.
3. Configure your project with CMake, ensuring GoogleTest is found or included.
4. Create test source files including `<gtest/gtest.h>` and/or `<gmock/gmock.h>`.
5. Build your test executable.
6. Run tests using the test binary or via CTest.

Example minimal `hello_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

Build and run:

```bash
cmake -S . -B build
cmake --build build
cd build
ctest
```

Expect output confirming test success.

---

## Common Obstacles and Solutions

<AccordionGroup title="Common Installation and Setup Issues">
<Accordion title="Build Fails Due to Missing C++17 Support">
Ensure your compiler supports at least C++17. For GCC, Clang, MSVC:

- GCC >= 7 recommended
- Clang >= 5 recommended
- Visual Studio 2017 or later

Use the compiler flag `-std=c++17` or equivalent.
</Accordion>
<Accordion title="Linker Errors Referencing GoogleTest Symbols">
Verify:

- Proper linking against `gtest` or `gtest_main` libraries
- Your build includes GoogleTest sources or libraries, not just headers
- Compatible runtime library settings (e.g., dynamic vs static CRT on Windows; use `gtest_force_shared_crt` option)
</Accordion>
<Accordion title="Tests Not Detected or Run">
Common causes:

- `RUN_ALL_TESTS()` not called in `main()`
- `testing::InitGoogleTest()` missing before running tests
- Tests not compiled or linked into the test binary

Ensure test binaries properly register and invoke GoogleTest.
</Accordion>
<Accordion title="GoogleMock Link Errors or Initialization Issues">

- Include `testing::InitGoogleMock()` instead of `InitGoogleTest()` if using GoogleMock
- Use `gmock_main` library to provide main(), or implement `main()` calling `InitGoogleMock()`
- See [Main Function Integration](api_reference/advanced_and_platform_features/main_function_integration.md) for platform specifics.

</Accordion>
</AccordionGroup>

---

## Additional Resources

- [GoogleTest Primer](primer.md) — Learn how to write and structure tests
- [Quickstart for CMake](docs/quickstart-cmake.md) — Step-by-step build setup
- [Samples](docs/samples.md) — Well-commented example tests
- [GoogleMock Overview](googlemock/README.md) — Introduction to mocking
- [Troubleshooting Installation](getting-started/first-steps-validation/troubleshooting-common-issues.md) — Help with common errors
- [Main Function Integration](api_reference/advanced_and_platform_features/main_function_integration.md) — How to handle `main()`

---

## Best Practices for Setup

- Always use modern C++ (C++17 or later) for best compatibility.
- Prefer linking against `gtest_main` or `gmock_main` to avoid boilerplate.
- Validate your installation early with minimal test cases.
- Take advantage of CMake FetchContent or submodules for reproducible builds.
- On Windows, ensure runtime library flags match between your project and GoogleTest.

---

By carefully following these steps, you will minimize frustration and have GoogleTest and GoogleMock up and running quickly, unleashing the full power of reliable, maintainable C++ testing.

---

## Example: Basic Manual Main Function with GoogleMock

If your platform or project needs a custom main, here's an example that initializes GoogleMock (and GoogleTest):

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This snippet ensures proper initialization before running tests.

---

## Summary
Installing GoogleTest and GoogleMock involves cloning or fetching the source, building via CMake or integrating into your build system (CMake or Bazel), and compiling test binaries that link to their libraries. The `gtest_main` and `gmock_main` libraries provide default entry points simplifying test execution. Most common issues relate to build configuration, compiler support, and linking errors, which are addressed by following the recommended best practices and troubleshooting tips outlined above.

For deeper understanding of writing tests, mocking, assertions, and advanced setup, always refer to the GoogleTest Primer, API references, and official samples.