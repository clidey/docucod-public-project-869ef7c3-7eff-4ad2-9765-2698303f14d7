---
title: "What should I do if I encounter installation or build errors?"
description: "Guides users through diagnosing and fixing the most common installation and compilation issues with GoogleTest and GoogleMock, including environment compatibility and build tool integration (CMake, Bazel). References to error messages and solutions tailored to new users."
---

# What should I do if I encounter installation or build errors?

This guide helps you diagnose and fix common installation and build issues when setting up GoogleTest and GoogleMock in your development environment. It emphasizes environment compatibility, integration with build tools like CMake and Bazel, and practical troubleshooting steps tailored especially for new users.

---

## Common Installation and Build Issues

### 1. Build Failures Due to Environment or Compiler Mismatch

GoogleTest and GoogleMock require a modern C++17-compliant compiler. Ensure your environment satisfies these minimum requirements:

- Use a compiler that supports C++17 (GCC 7+, Clang 5+, MSVC 2017 or newer).
- Confirm your platform and build tools are compatible (see Supported Platforms & Compatibility).

If using MSVC, be aware that versions prior to Visual C++ 2015 will not compile GoogleMock.

<Check>
Always verify your compiler version matches the supported list before proceeding.
</Check>

### 2. CMake Configuration Issues

GoogleTest provides CMake macros to configure builds properly. Common problems include:
  
- Incorrect or missing compiler flags.
- Improper linking to GoogleTest and GoogleMock libraries.
- Conflicts in runtime library settings, especially on Windows (e.g., /MT vs /MD).

**Recommended steps:**

- Use the official CMake integration steps described in the Build Configuration guide.
- If building Google Test and GoogleMock from source, ensure you run CMake at the top of the source tree and configure appropriately.
- Check CMake warnings for deprecated flags or mismatches.

### 3. Bazel Build Integration Problems

When using Bazel, ensure:

- You have the correct dependency targets for GoogleTest and GoogleMock.
- Your Bazel WORKSPACE and BUILD files follow the canonical setup instructions.

Refer to the Bazel integration sections in the Build Configuration and Installation guides for detailed instructions.

### 4. Linking Errors

Typical linker errors occur when libraries are missing or mismatched. Key causes:

- Not linking against `gtest`, `gtest_main`, or `gmock` libraries properly.
- Mixing static and dynamic runtime libraries incorrectly.
- Incomplete transitive dependencies.

**Solution:**

- Link your test binaries against `gtest_main` or explicitly provide your own `main()`.
- Confirm the presence of GoogleTest and GoogleMock libraries in your linker paths.
- If using shared libraries, ensure consistent CRT settings.

### 5. Compiler Warnings and Errors Specific to MSVC

You may encounter warnings such as `C4301` or `C4373` related to `const` parameters in mock methods.

**Why?**

- MSVC treats top-level `const` in parameter types differently, sometimes causing spurious warnings.

**How to fix:**

- Remove the top-level `const` from method parameters in both your interface and mock class declarations.
- Note it is safe since in C++ top-level const on parameter types does not affect the signature.

### 6. Uninteresting Mock Function Call Warnings

During build or test execution, you might see warnings:

```
Uninteresting function call encountered - default action taken..
```

This means a mock method was called without an expected call set up.

**What to do:**

- If the call is expected, add an `EXPECT_CALL()` with `Times(AnyNumber())` or a suitable matcher.
- If you want to ignore these calls, wrap your mock with `NiceMock<T>` to suppress these warnings.

### 7. Crashing or Unexpected Behavior During Tests

- Ensure all methods you intend to mock are marked as `virtual` with virtual destructors on base classes.
- Non-virtual destructors or missing virtual specifiers can cause undefined behavior and memory errors during mock object destruction.
- Use heap checkers to detect memory leaks due to mocks.

---

## Step-by-Step Troubleshooting Workflow

<Steps>
<Step title="Verify System and Compiler Requirements">
Confirm your development environment meets the C++17 and platform requirements as described in the Supported Platforms & Compatibility guide.
</Step>
<Step title="Follow Official Installation Instructions">
Follow the steps in the Installing GoogleTest guide to clone, build, and install GoogleTest and GoogleMock.
</Step>
<Step title="Configure Your Build Properly">
Use the Build Configuration guide to correctly set up CMake or Bazel integration, paying attention to compiler flags and library linking.
</Step>
<Step title="Inspect and Resolve Compiler/Linker Errors">
Carefully read error messages; link missing symbols to missing libraries, and fix accordingly.
</Step>
<Step title="Address MSVC Specific Warnings">
If compiling with MSVC, remove or avoid top-level const modifiers on mock method parameters to work around compiler warnings.
</Step>
<Step title="Use Verbose Logging for Mocks">
Run your tests with `--gmock_verbose=info` to trace mock calls and understand unexpected behavior.
</Step>
<Step title="Suppress or Fix Uninteresting Call Warnings">
Use `NiceMock` wrappers or add explicit `EXPECT_CALL`s to silence these warnings if calls are expected but not constrained.
</Step>
<Step title="Validate Mock Class Designs">
Ensure all mocked classes have virtual destructors and virtual methods; avoid trying to mock non-virtual or variadic functions directly.
</Step>
</Steps>

## Best Practices and Recommendations

- Prefer using CMake or Bazel as your build system to leverage native GoogleTest integration.
- Keep your mock classes simple and ensure constructors/destructors are properly defined (externalize them into `.cc` files when needed to speed up compilation).
- Avoid overriding const parameters directly; instead, use const reference qualifiers where applicable.
- Use the latest stable release of GoogleTest and GoogleMock.
- Use the command-line flag `--gmock_verbose=info` for detailed insights into mock call matching.
- Write expectations explicitly, use `ON_CALL` to specify default behaviors, and minimize over-specification.

## Useful Commands and Flags

```bash
# Build with CMake
mkdir build && cd build
cmake ..
make

# Run tests with gMock verbosity info
./your_test_binary --gmock_verbose=info

# Disable verbose warnings
./your_test_binary --gmock_verbose=error
```

---

## Additional Resources

- [Installing GoogleTest Guide](../getting-started/preparation-installation/installation-methods)
- [Build Configuration Guide](../getting-started/preparation-installation/build-configuration)
- [Supported Platforms & Compatibility](../overview/introduction-getting-started/supported-platforms)
- [GoogleMock Legacy FAQ](https://google.github.io/googletest/gmock_faq.html)
- [Mocking Basics Guide](../guides/mocking-and-advanced-techniques/mocking-basics)
- [GoogleTest GitHub Repository](https://github.com/google/googletest)

---

<Tip>
If you encounter persistent build issues, consider creating a minimal reproducer project to isolate problems, and consult community forums or the official GitHub issues page for help.
</Tip>

<Tip>
Remember to always verify that your mock methods are virtual and that base classes have virtual destructors to prevent subtle runtime crashes.
</Tip>

<Tip>
Adjust the verbosity using the `--gmock_verbose` flag to tune the level of diagnostic information during test execution.
</Tip>

<Warning>
Avoid trying to mock non-virtual or variadic functions directly. Instead, restructure your code with interfaces or overloads to enable effective mocking.
</Warning>