---
title: "Installation and Build Errors"
description: "Helps users diagnose and resolve typical installation and build failures, such as compiler errors, missing dependencies, or incompatible language standards. Summarizes the minimum C++ version requirements and clarifies configuration workflow."
---

# Installation and Build Errors FAQ

This FAQ is designed to guide you through diagnosing and resolving common installation and build errors encountered when setting up and building GoogleTest and GoogleMock. It includes solutions for compiler compatibility issues, dependency problems, language standard requirements, build configuration, and integration nuances.

---

## 1. What are the minimum system requirements to build GoogleTest?

GoogleTest requires an environment that supports **C++17** or later. Ensure your compiler supports the C++17 standard, and you have a compatible build system such as CMake 3.14 or later.

- Supported compilers include GCC, Clang, and MSVC versions that fully support C++17.
- Platforms include major OSes like Linux, macOS, and Windows.
- Threading support (e.g., pthread on Unix-like systems) is required for multi-threaded tests.

Refer to the [Prerequisites & System Requirements](../getting-started/setup-prerequisites-installation/prerequisites-system-requirements) page for a detailed list of compatible compilers and platforms.

---

## 2. How do I fix compiler errors related to C++ standard version?

GoogleTest mandates C++17. To avoid build errors:

- Specify the C++ standard explicitly in your CMakeLists.txt:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- Alternatively, add compiler flags manually if your project setup requires it, e.g., `-std=c++17` for GCC and Clang.

- Check your compiler version and upgrade it if it does not support C++17.

---

## 3. Why do I get runtime or link errors about pthread or threading libraries?

GoogleTest uses threading libraries for some of its features and tests.

- On Unix-like systems, you must link against pthread. When using CMake, this is generally handled automatically.
- If using custom build scripts, ensure you pass the appropriate flags (`-pthread` or `-lpthread`).
- Use the CMake configuration helper to detect pthread:

```cmake
find_package(Threads REQUIRED)
target_link_libraries(your_target Threads::Threads)
```

- If GoogleTest fails to detect pthread support, you can manually force it with compiler definitions:

```
-DGTEST_HAS_PTHREAD=1  # Enables pthread support
-DGTEST_HAS_PTHREAD=0  # Forces disabling pthread support
```

---

## 4. What causes the Visual Studio linker error related to runtime library mismatch?

You might see errors like:

```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

This happens because GoogleTest defaults to static CRT linkage while your project may be using dynamic CRT.

**Solution:**

- Use the CMake option `gtest_force_shared_crt` to ensure GoogleTest matches your project's runtime:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

- This setting forces GoogleTest to use the dynamic runtime library in Visual Studio, resolving the linker errors.

---

## 5. How do I build GoogleTest as a shared library (DLL) instead of static?

By default, GoogleTest builds as a static library.

To build as a shared library:

- Add the compile flag:

```
-DGTEST_CREATE_SHARED_LIBRARY=1
```

- Configure your linker to create a shared library (platform/linker specific).

- When compiling your tests that link against the shared GoogleTest, add:

```
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

This approach helps when you want to reduce binary size or share GoogleTest across multiple tests.

---

## 6. How do I include GoogleTest and GoogleMock in my existing CMake project?

You have two main approaches:

### a) Using Installed Libraries

- Install GoogleTest system-wide or at a known location.
- Use `find_package(GTest CONFIG REQUIRED)` to locate the installed libraries.
- Link your targets against `GTest::gtest` and `GTest::gmock`.

### b) Building GoogleTest as Part of Your Build

- Add GoogleTest source as a subdirectory:

```cmake
add_subdirectory(path/to/googletest)
```

- Link your tests against targets such as `gtest`, `gtest_main`, `gmock`, or `gmock_main`.

- Use `FetchContent` for automatic downloading and building during configure time:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip)
FetchContent_MakeAvailable(googletest)
```

Refer to the [Configuring Projects with GoogleTest](../getting-started/setup-prerequisites-installation/configuring-projects-with-googletest) guide for details and examples.

---

## 7. What common mistakes cause build failures when using the CMake build scripts?

- **Not running out-of-source builds**: Always build in a separate `build/` directory to keep source directory clean.

- **Not specifying C++17**: Ensure your project and GoogleTest build specify the C++17 standard.

- **Ignoring thread dependencies**: GoogleTest requires threading support; missing pthread or equivalent affects build.

- **Linking runtime mismatch on Windows**: Use `gtest_force_shared_crt` to avoid linker errors.

- **Incorrect target linkage**: Link tests explicitly against the correct targets (`gtest_main` or `gmock_main`) depending on main function usage.

- **Outdated CMake versions**: GoogleTest requires at least CMake 3.14 for `FetchContent_MakeAvailable()`.

---

## 8. How do I troubleshoot build errors related to missing `main()` function?

- GoogleTest provides `gtest_main` and GoogleMock offers `gmock_main` libraries that contain `main()` implementations.

- When linking your test executables, link against one of these to avoid missing `main()`:

```cmake
target_link_libraries(your_test gtest_main)
```

- Alternatively, provide your own `main()` function following GoogleTest initialization patterns:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- For GoogleMock, use `testing::InitGoogleMock()` instead of `InitGoogleTest()`.

---

## 9. What should I do if I encounter macro name clashes with GoogleTest?

GoogleTest uses many macros (e.g., `TEST`, `ASSERT_EQ`) which may clash with other libraries.

- Use macro renaming options to avoid clashes, for example:

```
-DGTEST_DONT_DEFINE_TEST=1
```

- When this flag is set, you must use `GTEST_TEST` instead of `TEST` to define tests.

- Similar flags exist for other macro names (e.g., `ASSERT_EQ` becomes `GTEST_ASSERT_EQ`).

---

## 10. How do I verify that my build and installation were successful?

- Run the provided GoogleTest self-tests or write a simple test fixture with a test case:

```cpp
#include <gtest/gtest.h>

TEST(SanityCheck, Simple) {
  EXPECT_EQ(1, 1);
}
```

- Build and run the test executable to ensure tests pass without compiler or linker errors.

- If using GoogleMock, write a small mock test and verify the expectations run successfully.

- Check that the GoogleTest headers and libraries are discoverable by your IDE or build system.

---

<Tip>
Always use an out-of-source build directory and keep your toolchain updated to the minimum recommended versions to minimize build troubleshooting.
</Tip>


---

## Troubleshooting Checklist for Installation and Build Errors

<Steps>
<Step title="Check Compiler and C++ Version">
Ensure that your compiler supports C++17 and the CMake build specifies it explicitly.
</Step>
<Step title="Verify Threading Support">
Confirm that pthread or equivalent threading libraries are available and linked.
</Step>
<Step title="Address Visual Studio Runtime Mismatch">
Set the `gtest_force_shared_crt` option to align CRT linkage.
</Step>
<Step title="Use Provided Main Functions or Define Your Own">
Link against `gtest_main`/`gmock_main` or implement your own `main()` following GoogleTest initialization idioms.
</Step>
<Step title="Confirm Correct Target Linking">
Link your test executables explicitly against GoogleTest/GoogleMock targets.
</Step>
<Step title="Use FetchContent or Add Subdirectory Correctly">
Make sure you add GoogleTest properly in your CMakeLists.txt for seamless integration.
</Step>
</Steps>

---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest) â€” Source, issues, and development
- [Configuring Projects with GoogleTest](../getting-started/setup-prerequisites-installation/configuring-projects-with-googletest) guide
- [Prerequisites & System Requirements](../getting-started/setup-prerequisites-installation/prerequisites-system-requirements)
- [Building and Running Tests](../getting-started/first-test-run-validation/building-and-running-tests)
- [Troubleshooting Common Setup Issues](../getting-started/troubleshooting-faq-support/common-setup-errors)

---

Resolve build issues step-by-step as outlined to ensure a smooth GoogleTest installation and setup experience.