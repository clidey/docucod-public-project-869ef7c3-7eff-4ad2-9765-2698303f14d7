---
title: "Getting Started & Common Issues"
description: "Covers the initial hurdles users face when installing, setting up, or running their first tests with GoogleTest and GoogleMock. Provides clear solutions to common installation, configuration, and import errors, with links to relevant quickstart guides."
---

# Getting Started & Common Issues FAQ

Welcome to the essential guide for overcoming initial challenges with GoogleTest and GoogleMock. This FAQ provides clear, actionable answers to frequent problems encountered during installation, setup, configuration, and executing your first tests. Whether you're just starting or facing import errors, linker issues, or test failure confusions, this document guides you smoothly through.

---

## 1. Installation and Setup Issues

### Q: How do I correctly install GoogleTest and GoogleMock on my system?
**A:** Ensure that your environment meets the required system prerequisites such as supported OS, compiler version, and build tools (see the [System Requirements](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/system-requirements) page). Use CMake or Bazel to build and install, following instructions on the [Installing GoogleTest](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/installation-mac-linux-windows) page. Make sure to include the proper header paths and link the built libraries to your test project.

### Q: I get linker errors related to GoogleTest or GoogleMock symbols. What should I check?
**A:** Verify that you have linked against the correct GoogleTest and GoogleMock libraries (`gtest`, `gmock`, and optionally `gtest_main` or `gmock_main`). Confirm your build system links these correctly and your include paths match those of the compiled libraries. Also, ensure consistent compiler flags across your main code and tests, especially regarding C++ ABI and exceptions. See the [Configuring Your Project](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/configuring-your-project) guide for detailed linkage and configuration advice.

### Q: My test executable fails to find GoogleTest or GoogleMock headers during compilation.
**A:** Confirm that your compiler's include directories contain the paths to `googletest/include` and `googlemock/include`. When using CMake, you can link your target to `gtest::gtest` or `gmock::gmock` which handles this automatically. For manual setups, explicitly add the include directories.

### Q: What should I do if I'm on Windows and see warnings like C4301 or C4373 when mocking const parameters?
**A:** These warnings are caused by Microsoft Visual C++ compiler quirks regarding const parameters. The `const` qualifier on parameters is ignored in overriding virtual functions. The recommended fix is to remove the `const` qualifier from parameter declarations in both your base interface and mock classes. See the [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html#msvc-warning-on-const-parameters) for detailed explanation.

### Q: GoogleMock does not recognize or runs into compatibility issues on my platform. What to check?
**A:** Review the [Supported Platforms & Compatibility](https://google.github.io/googletest/overview/integration-ecosystem/supported-platforms) page. GoogleTest requires C++17 or later and supports Windows, Linux, macOS, and embedded environments with specific compiler versions. Ensure your platform and compiler meet GoogleTest’s minimum requirements.

---

## 2. Writing Your First Test & Running It

### Q: How do I write and run my very first GoogleTest test case?
**A:** Create a source file including `<gtest/gtest.h>`. Write your test using the `TEST` macro with test suite and test case names. For example:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssert) {
  EXPECT_EQ(1 + 1, 2);
}
```

Compile with GoogleTest libraries linked, then run the resulting executable. For detailed steps, see [Writing Your First Test Case](https://google.github.io/googletest/getting-started/first-test-validation/writing-first-test-case) and [Running Tests and Interpreting Results](https://google.github.io/googletest/getting-started/first-test-validation/running-tests-and-interpreting-results).

### Q: Tests run but none are discovered or executed. Why?
**A:** Verify the following:
- Your test binary is linked against `gtest_main` or has a `main()` function that calls `InitGoogleTest(argc, argv)`.
- Your test source files contain test definitions using GoogleTest macros.
- The naming conventions and build system compile your test files correctly.
- You are using the GoogleTest runner (and not another custom runner).

If you still face issues, check the build logs for errors, and verify that tests run with default verbosity.

---

## 3. Common Mocking & gMock Issues

### Q: When I call a method on my mock, sometimes the real method gets invoked instead. What’s wrong?
**A:** The method to be mocked **must be declared `virtual`** in the base interface or class. Otherwise, gMock cannot override it properly. If you need to mock non-virtual methods, refer to advanced patterns such as high-performance dependency injection described in the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html#mocking-non-virtual-methods).

### Q: Why do I get warnings or errors about "uninteresting calls" when I run tests with mocks?
**A:** By default, any mock method call without an explicit expectation (i.e., `EXPECT_CALL`) is considered *uninteresting*. gMock prints a warning but does not fail the test. This helps detect unexpected mock method calls.

To suppress warnings for methods you do not care about, consider these options:

- Use `ON_CALL` to specify default behaviors without expecting calls.
- Use `NiceMock` wrappers to suppress warnings globally for a mock object.
- Explicitly add catch-all expectations with `EXPECT_CALL(mock, method(_)).Times(AnyNumber())` if you expect calls but do not want to verify arguments.

More on this in the [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html#uninteresting-function-call-warning) and [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#managing-uninteresting-calls).

### Q: How can I prevent unexpected calls to mock methods?
**A:** To disallow calls to a particular method, use:

```cpp
EXPECT_CALL(mock, Method(_)).Times(0);
```

This tells gMock to fail the test if `Method` is invoked at any time with any argument.

### Q: My expectations fail and the error messages repeat or are confusing. How can I debug this?
**A:** Run your test binary with the flag `--gmock_verbose=info`. This outputs detailed logs of mock matches, unmatched calls, and reasons for failed expectations, including which expectation matched each call.

For example:

```shell
./my_test --gmock_verbose=info
```

This helps pinpoint argument mismatches, order violations, or wrong call counts.

### Q: I want to customize a mock method’s behavior. How do I do that?
**A:** Use `EXPECT_CALL` with `.WillOnce()` and `.WillRepeatedly()` clauses to specify the response, or use `ON_CALL` for default behavior:

```cpp
EXPECT_CALL(mock, GetValue())
  .WillOnce(Return(42))
  .WillRepeatedly(Return(0));

ON_CALL(mock, GetValue())
  .WillByDefault(Return(-1));
```

See the detailed explanations in [Setting Expectations and Actions](https://google.github.io/googletest/api-reference/mocking-framework/expectations-actions) and the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#setting-default-actions).

---

## 4. Import & Compilation Gotchas

### Q: What is the proper way to include GoogleMock headers?
**A:** Always include the main header to bring in gMock functionality:

```cpp
#include <gmock/gmock.h>
```

This includes GoogleMock and transitively GoogleTest headers. Ensure your include paths point to the repository or installed location containing `gmock/` and `gtest/` headers.

### Q: My `MOCK_METHOD` macro usage results in errors about commas in argument lists. How to fix?
**A:** When method arguments or return types include commas (e.g., templates like `std::pair<int, int>`), wrap such types in extra parentheses or use type aliases to avoid macro parsing errors. For example:

```cpp
MOCK_METHOD((std::pair<int, int>), GetPair, ());
// or
using IntPair = std::pair<int, int>;
MOCK_METHOD(IntPair, GetPair, ());
```

Refer to [Mocking Reference - MOCK_METHOD](https://google.github.io/googletest/reference/mocking.html#MOCK_METHOD) for comprehensive guidelines.

### Q: When mocking overloaded methods, I get ambiguous calls or compilation failures. What is the best practice?
**A:** You must mock all overload variants you wish to override. Use `MOCK_METHOD` to declare the exact signatures, including `const` qualifiers. Use `using BaseClass::Method` to bring hidden overloaded methods into scope if you mock only some overloads. Also, for test-time disambiguation, use casting helpers such as `Const()` on mock objects or specify argument types using matchers.

Example:

```cpp
MOCK_METHOD(int, Add, (int x), (override));
MOCK_METHOD(int, Add, (double x), (override));
```

### Q: I'm using Visual Studio and see unusual warnings or errors when building mocks. What should I check?
**A:** Visual Studio sometimes produces warnings about overriding virtual functions differing by qualifiers. Usually, they are safe to ignore but check that all virtual methods are declared properly in base and derived classes. Use the latest compiler version and update CMake if needed to smooth integration. Also, ensure consistent use of `override` and proper qualifiers on mocked methods.

---

## 5. Common First Test Failures

### Q: My test fails with "Actual function call count doesn't match this expectation". How can I fix it?
**A:** This means a mock method was called more or fewer times than expected. Check your `Times()` clause and your test logic to match exactly how many calls you intend. Remember that multiple `WillOnce()` imply a call count equal to the number of those calls unless you add `WillRepeatedly()`. Also, unfulfilled expectations will cause test failures upon mock destruction.

### Q: I don't understand why gMock matches the wrong expectation for a call.
**A:** gMock considers expectations in reverse order: the last matching expectation that is still active is used. This implies newer expectations shadow older ones. Also, consider specifying ordering constraints via `InSequence` or `After` clauses if ordering matters.

### Q: I see warnings about leaked mock objects.
**A:** This happens when mock objects are allocated with `new` but never deleted, causing leak detection messages. Either allocate mock objects on the stack or ensure proper ownership and deletion. You can suppress such warnings by setting the `--gmock_catch_leaked_mocks=0` flag but it is better to fix ownership.

---

## 6. Helpful Tips & Links

- Use `InitGoogleMock(&argc, argv)` or link to `gmock_main` to initialize GoogleMock properly.
- Run tests with `--gmock_verbose=info` for insightful debugging output.
- Prefer defining your mock class in a single header/cc pair to speed up compilation.
- Use `NiceMock` to make mocks ignore uninteresting calls and reduce output noise.
- When mocking methods with move-only types like `std::unique_ptr`, use lambdas or proper `WillOnce` actions returning new objects.

---

## 7. Related Documentation

- [Writing Your First Test Case](https://google.github.io/googletest/getting-started/first-test-validation/writing-first-test-case)
- [Running Tests and Interpreting Results](https://google.github.io/googletest/getting-started/first-test-validation/running-tests-and-interpreting-results)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html)
- [Setting Expectations and Actions](https://google.github.io/googletest/api-reference/mocking-framework/expectations-actions)
- [System Requirements](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/system-requirements)
- [Configuring Your Project](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/configuring-your-project)

---

By following the guidance here, you’ll confidently tackle common stumbling blocks and write your first robust tests with GoogleTest and GoogleMock.

<Tip>
Always set expectations with `EXPECT_CALL` before exercising mock methods to ensure deterministic verification.
</Tip>

<Tip>
Suppress uninteresting call warnings with `NiceMock<T>` if they clutter your output and are intentional.
</Tip>

<Tip>
Use the detailed trace mode (`--gmock_verbose=info`) early in test failures to instantly identify misconfigured expectations.
</Tip>

---

## Troubleshooting Quick Reference

| Problem                                   | Suggested Action                                           |
|-------------------------------------------|------------------------------------------------------------|
| Missing symbols at link time               | Link against gtest, gmock, and gtest_main or gmock_main    |
| Compilation errors in MOCK_METHOD macro   | Wrap types with commas in extra parentheses or use type alias|
| Unexpected real method calls               | Ensure methods are virtual in base class                    |
| Tests not discovered or not run            | Link with gtest_main or provide proper main function        |
| Uninteresting call warnings                | Use `ON_CALL`, `NiceMock`, or catch-all `EXPECT_CALL`       |
| Overlapping expectations causing failures | Order expectations properly; use `InSequence` or `After`    |
| Mock leaks warnings                        | Ensure mocks are deleted, or allocate them on stack        |

---

## Example Snippet: Writing a Basic Mock and Test

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};

TEST(TurtleTest, MovesForward) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, Forward(10)).Times(1);
  // Code that uses turtle
  turtle.Forward(10);
}
```

---

This concludes your quick access FAQ for getting started and handling common issues with GoogleTest and GoogleMock.

---