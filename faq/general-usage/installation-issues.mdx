---
title: "How do I install and set up GoogleTest/GoogleMock?"
description: "Step-by-step answers addressing installation challenges across different platforms and build systems, with solutions for common errors during CMake, Bazel, or manual integration. Covers minimum C++ standard requirements and basic troubleshooting techniques."
---

# How do I install and set up GoogleTest/GoogleMock?

This FAQ page guides you through the installation and setup of GoogleTest and GoogleMock, addressing challenges on different platforms and build systems. It provides step-by-step solutions to common errors encountered during integration with CMake, Bazel, or manual setups, explains the minimum C++ standard requirement, and offers basic troubleshooting tips.

---

## 1. Installation Overview

GoogleTest (gtest) and GoogleMock (gmock) are open-source C++ testing frameworks designed to simplify writing and running tests.

### Key Points
- Both frameworks can be built together or separately.
- They support a range of platforms, compilers, and build systems.
- The minimum required C++ standard is **C++17**.
- Official builds and integration are commonly done with **CMake** or **Bazel**.

---

## 2. Supported Platforms and Prerequisites

- Compatible with Linux, Windows, and macOS.
- Requires a compiler supporting C++17.
- For multi-threaded support, the pthread library is used on POSIX-like systems.
- On Windows, Visual Studio’s dynamic vs static runtime settings can affect build outcomes.

<Tip>
Before starting, ensure your development environment has CMake (version 3.13 or higher recommended) and a modern C++17-compliant compiler installed.
</Tip>

---

## 3. Installation Using CMake

### 3.1 Standalone GoogleTest and GoogleMock Build

1. **Clone the repository:**

  ```bash
  git clone https://github.com/google/googletest.git -b v1.17.0
  cd googletest
  mkdir build
  cd build
  ```

2. **Generate build files:**

  - To build both GoogleTest and GoogleMock:

    ```bash
    cmake ..
    ```

  - To build only GoogleTest:

    ```bash
    cmake .. -DBUILD_GMOCK=OFF
    ```

3. **Build the code:**

  ```bash
  make          # On Unix-like systems
  # or
  cmake --build . --config Release  # On Windows
  ```

4. **Install (optional):**

  ```bash
  sudo make install
  ```

### 3.2 Integrating GoogleTest Into Your Existing CMake Project

- The recommended approach is using `add_subdirectory()` to include GoogleTest directly in your project's build.
- Alternatively, use `find_package(GTest CONFIG REQUIRED)` after installing GoogleTest system-wide.
- Use the official FetchContent method to download GoogleTest automatically during configure:

  ```cmake
  include(FetchContent)
  FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
  )
  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
  FetchContent_MakeAvailable(googletest)

  add_executable(example example.cpp)
  target_link_libraries(example gtest_main)
  add_test(NAME example_test COMMAND example)
  ```

> **Note:** FetchContent requires CMake 3.14 or later.

---

## 4. Bazel Integration

- GoogleTest and GoogleMock support seamless integration with Bazel.
- Modify your `WORKSPACE` and `BUILD` files to include gtest/gmock dependencies.
- Refer to the official [Integrating with Build Systems](https://github.com/google/googletest/blob/main/docs/guides/integrating_with_build_systems.md) guide for detailed instructions.

---

## 5. Minimum C++ Standard Requirement

- GoogleTest requires **C++17**.
- Ensure your compiler flags include `-std=c++17` (or equivalent) or use CMake’s:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- In mixed-language or legacy projects, explicitly set this in your build system.

---

## 6. Common Installation Challenges & Solutions

### 6.1 RuntimeLibrary Mismatch on Windows (MSVC)

**Problem:** Linker error due to mismatched runtime libraries (e.g. MTd vs MDd).

**Solution:**

- Enable the CMake option `gtest_force_shared_crt` to align runtime linkage.

  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```

- Or ensure your project and GoogleTest use the same runtime linkage mode.

### 6.2 Pthreads Not Found or Link Errors on POSIX

**Problem:** Missing pthread symbols during linking.

**Solution:**

- Verify that pthread packages and development headers are installed.
- CMake automatically detects pthread but you can enforce it:

  ```bash
  cmake .. -DGTEST_HAS_PTHREAD=1
  ```

- Manually link with pthread using your build system if needed.

### 6.3 Build Fails on Older Compilers

**Problem:** Compilation errors related to C++17 features.

**Solution:**

- Upgrade to a compiler supporting C++17 (GCC 7+, Clang 5+, MSVC 2017+).
- Update your build system flags to enable C++17 standard compliance.

### 6.4 Multiple Definitions or Linker Errors When Linking GoogleMock

**Problem:** Conflicts between GoogleMock and GoogleTest symbols.

**Solution:**

- Link against `gmock_main` if using the combined GoogleMock + main library.
- Link order matters; ensure GoogleMock libraries come before your code.

```cmake
target_link_libraries(your_test
  gmock_main
  # other libs
)
```

### 6.5 Issues in Using GoogleTest as a Shared Library

**Problem:** Errors linking when building gtest as shared.

**Solution:**

- Define `-DGTEST_CREATE_SHARED_LIBRARY=1` when building gtest shared.
- Define `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your tests.

---

## 7. Quick Setup Verification

After installation and building:

- Run your tests with:

  ```bash
  ctest  # If using CMake
  # Or directly run the compiled test executables
  ./your_test_executable
  ```

- You should see output confirming test discovery and execution.

- No runtime errors or missing symbol errors should appear.

---

## 8. Troubleshooting Tips

- Always clean your build directory if switching build configurations or compiler versions.
- Enable verbose build output to identify flags and link commands.
- Check your project’s compiler and linker flags for consistency with GoogleTest’s requirements.
- Ensure no conflicting versions of gtest/gmock libraries exist on your system.

<Tip>
If you encounter unexpected build or runtime issues, consult the [Common Issues & Solutions](https://github.com/google/googletest/blob/main/docs/guides/troubleshooting-common-issues.md) guide for detailed troubleshooting.
</Tip>

---

## 9. Next Steps

- Explore writing your [First Test and Mock](../getting-started/first-run-usage/writing-first-test) once setup completes.
- Review guides on [Integrating with Build Systems](../guides/integration-and-real-world-scenarios/integrating-with-build-systems) for smooth CI/CD pipelines.
- Learn how to [Run Tests and Interpret Results](../guides/getting-started/running-tests) effectively.

---

## 10. References and Useful Links

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest CMake Build Instructions](https://github.com/google/googletest/blob/main/README.md)
- [Troubleshooting Common Issues](../guides/integration-and-real-world-scenarios/troubleshooting-common-issues)
- [GoogleMock Getting Started](../getting-started/first-run-usage/writing-first-test)
- [Installing on Various Platforms](../getting-started/setup-prerequisites/installation-platforms)

---

This page is part of the [Getting Started](../getting-started/setup-installation) collection and aligns with topics on integration and troubleshooting for seamless adoption of GoogleTest/GoogleMock.

---