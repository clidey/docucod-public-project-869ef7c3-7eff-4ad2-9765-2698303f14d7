---
title: "Resolving Build and Configuration Issues"
description: "Guides users through solving typical problems encountered during setup, such as compiler compatibility, missing dependencies, or CMake/Bazel configuration errors. Provides actionable steps to fix errors and links to platform-specific documentation for build tools supported by GoogleTest/GoogleMock."
---

# Resolving Build and Configuration Issues

This guide helps you overcome typical problems encountered during the setup and integration of GoogleTest and GoogleMock. Whether you face compiler incompatibilities, missing dependencies, or configuration errors with CMake or Bazel, this documentation provides clear, actionable steps to resolve these issues efficiently. You will also find links to platform-specific build tool resources and best practices to ensure your testing environment is robust and ready for success.

---

## Common Build and Configuration Problems

Many users encounter challenges during initial setup due to mismatched compiler versions, incomplete dependency installations, or misconfigured build scripts. This section lays out common issues and practical resolutions.

### 1. Compiler Compatibility Issues

- **Problem**: Compilation errors or warnings due to unsupported compiler versions.
- **Cause**: GoogleTest requires a compiler supporting at least C++17. Some standard features or flags may not be recognized.
- **Solution**:
  - Ensure your compiler version meets the minimum requirement (e.g., GCC 7+, Clang 5+, MSVC 2017 Update 3 or newer).
  - If using MSVC, verify that the correct runtime libraries are used consistently (static vs dynamic linking).
  - Adjust your projectâ€™s compiler flags accordingly.

<Tip>
Always specify the C++17 standard explicitly in your build system using flags like `-std=c++17` or corresponding CMake settings (`set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)`).
</Tip>

### 2. Missing or Incorrect Dependencies

- **Problem**: Build fails due to missing headers or libraries for GoogleTest/GoogleMock or threading libraries.
- **Cause**: The build environment does not have all required dependencies installed or cannot locate them.
- **Solution**:
  - Confirm that the cloned source tree for Googletest/GoogleMock is complete.
  - Install necessary development tools and libraries (e.g. pthreads on Linux).
  - In CMake builds, ensure `find_package(Threads)` succeeds; check `GTEST_HAS_PTHREAD` macro settings.
  - If using Bazel, verify WORKSPACE and BUILD files are configured correctly.

### 3. Configuration Errors with CMake

- **Problem**: CMake configuration fails or generates incorrect build files.
- **Cause**: Improper CMake invocation or conflict with existing project settings.
- **Solution**:
  - Use out-of-source builds. Create and build in a separate `build/` directory.
  - To build only GoogleTest and omit GoogleMock, add `-DBUILD_GMOCK=OFF`.
  - For embedding GoogleTest in larger projects, use `add_subdirectory()` properly.
  - Resolve conflicting flags or definitions, especially related to runtime libraries or threading.

<Tip>
Check CMake cache variables (`CMAKE_CXX_COMPILER`, `BUILD_SHARED_LIBS`, etc.) if configuration seems off.
</Tip>

### 4. Configuration Errors with Bazel

- **Problem**: Bazel build errors such as missing rules or incorrect dependencies.
- **Cause**: Improper dependency declarations or workspace rules.
- **Solution**:
  - Verify that `WORKSPACE` includes GoogleTest/GoogleMock properly.
  - Adjust `BUILD` files to reference dependencies accurately.
  - Adapt to Bazel versions and platform-specific constraints.
  - Consult Bazel-specific documentation for integrating GoogleTest.

### 5. Linking Problems

- **Problem**: Linker errors indicating unresolved symbols.
- **Cause**: Failure to link against GoogleTest/GoogleMock libraries or runtime inconsistencies.
- **Solution**:
  - Ensure that your build system links against the compiled `gtest`, `gmock`, or `gmock_main` libraries.
  - For CMake, use targets like `GTest::gtest` or `GTest::gmock`.
  - Align runtime library linkage flags (static vs dynamic) across your project and GoogleTest.

<Tip>
Linking to `gmock_main` pulls in GoogleTest automatically; for GoogleTest only, link against `gtest_main`.
</Tip>

---

## Step-by-Step Fix Workflow

### Step 1: Verify Compiler Compatibility

1. Check your compiler's version and ensure C++17 support.
2. Add or verify compiler flags for C++17 standard.
3. On MSVC, decide on static or dynamic CRT linkage and align across builds.

### Step 2: Inspect Build Environment and Dependencies

1. Confirm the full source checkout for GoogleTest and GoogleMock.
2. Ensure all necessary libraries (e.g., pthread) are installed.
3. Use build system tools to verify dependencies are correctly discovered.

### Step 3: Configure with CMake Properly

1. Create a clean build directory.
2. Run `cmake ..` with optional flags (e.g., `-DBUILD_GMOCK=OFF`).
3. Investigate message logs for warnings or errors.

### Step 4: Build and Link

1. Build GoogleTest/GoogleMock via your build system.
2. Link your test targets against the appropriate GoogleTest or GoogleMock libraries.

### Step 5: Troubleshoot Specific Errors

- **Compiler errors**: Inspect error messages for missing features or flags.
- **Missing headers**: Confirm include directories are set.
- **Linker errors**: Validate library search paths and link commands.

---

## Platform-Specific Considerations

GoogleTest supports a wide range of platforms. However, platform-specific quirks with compilers, build tools, and environment variables can affect your build.

- **Windows**: Use Visual Studio solutions generated by CMake or build with MSBuild. Be mindful of runtime linkage (`/MD` vs `/MT`).
- **Linux/macOS**: Ensure pthread libraries are present. Use Makefiles or Ninja generated by CMake.
- **Embedded systems**: Limited or no support for pthreads or file systems might require customized ports.

For detailed platform build instructions, see the [System Requirements & Supported Platforms](../../getting-started/prerequisites-installation/system-requirements.md) and [Integration with Build Systems](../../overview/quickstart-integration/integration-options.md).

---

## Useful Tips & Best Practices

- Use **out-of-source builds** to keep your source directory clean.
- Always check the **CMake cache** for unexpected variable values.
- When building in environments mixing static and dynamic runtimes, use `gtest_force_shared_crt` CMake option to align.
- Use verbose build output (`make VERBOSE=1`) to see actual compiler and linker commands.
- For Bazel users, ensure your `WORKSPACE` and `BUILD` files are synchronized to dependencies.

---

## Troubleshooting Common Error Messages

<AccordionGroup title="Common Build Error Messages and Resolutions">
<Accordion title="Error: 'C++17 support required' or compilation fails on C++17 features">
Check your compiler version and ensure the `-std=c++17` flag is specified. Upgrade your compiler if needed.
</Accordion>
<Accordion title="Fatal error: gtest/gtest.h: No such file or directory">
Ensure the GoogleTest include path is added to your project. For CMake, link against `GTest::gtest` which includes headers.
</Accordion>
<Accordion title="Undefined reference to symbols starting with 'testing::'">
Verify linking against GoogleTest and GoogleMock libraries. Confirm the library paths.
</Accordion>
<Accordion title="Linker errors on conflicting runtime library versions">
On Windows MSVC, ensure consistent runtime linkage (static or dynamic) across all linked components. Use CMake option `gtest_force_shared_crt` if required.
</Accordion>
<Accordion title="pthread library not found or not linked">
Install pthread development package (e.g., `libpthread-dev`). Confirm `find_package(Threads)` in CMake configures correctly.
</Accordion>
</AccordionGroup>

---

## Additional Resources and Links

- [GoogleTest Official GitHub Repository](https://github.com/google/googletest)
- [Overview: Quickstart and Integration](../../overview/quickstart-integration/getting-started.md)
- [Integration with Build Systems](../../overview/quickstart-integration/integration-options.md)
- [Installation & Integration Options](../../getting-started/prerequisites-installation/install-integration-options.md)
- [Common Installation & Configuration Issues](../../getting-started/setup-troubleshooting/common-issues.md)
- [System Requirements & Supported Platforms](../../getting-started/prerequisites-installation/system-requirements.md)

You can also consult platform-specific documentation and community Q&A forums if facing unique environment complexities.

---

## Summary

This page focuses specifically on resolving issues during building and configuring GoogleTest and GoogleMock. It covers compiler compatibility, dependency management, build configuration with CMake and Bazel, and platform-specific nuances. Practical tips, step-by-step workflows, and troubleshooting of typical error messages help you quickly identify and fix setup problems, ensuring a smooth testing development experience.

---

## Example: Minimal CMake Build for GoogleTest

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProject CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add GoogleTest as a subdirectory
add_subdirectory(path/to/googletest)

add_executable(my_tests test/my_tests.cpp)

target_link_libraries(my_tests gtest_main)

include(GoogleTest)
gtest_discover_tests(my_tests)
```

Use this template as a starting point and customize paths and options for your project.

---

For any persistent or uncommon issues, consult platform-specific docs or seek help from the community and official support channels.

---