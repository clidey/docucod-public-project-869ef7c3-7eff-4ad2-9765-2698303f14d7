---
title: "Writing and Running Tests"
description: "Answers common questions about structuring test cases, using core assertions, discovering and running tests, and understanding the test output. Highlights best practices to efficiently write, organize, and execute C++ tests with GoogleTest."
---

# Writing and Running Tests

GoogleTest empowers you to write well-structured, effective C++ tests. This FAQ addresses common questions around organizing test cases, using core assertions, discovering and executing tests, and interpreting the test results. It also shares best practices to help you efficiently write, maintain, and debug your tests.

---

## Frequently Asked Questions

### How should I structure my test cases?

- **Use `TEST()` macros for simple tests.** Each `TEST(TestSuiteName, TestName)` defines an independent test.
- **Group related tests into test suites.** The first argument to `TEST` is the test suite name. Tests logically related should share the suite name.
- **Use test fixtures with `TEST_F()` when tests share data or setup.** Define a fixture class deriving from `testing::Test`, then write `TEST_F(FixtureName, TestName)` to access shared setup.

### What are the differences between `ASSERT_*` and `EXPECT_*` assertions?

- **`ASSERT_*` macros generate fatal failures and abort the current function immediately.** Use when continuing the test after failure doesn’t make sense.
- **`EXPECT_*` macros generate non-fatal failures and allow the test to continue running.** Enables detecting multiple failures in one run.
- Use `ASSERT_*` for checks that guard the test code against crashes (e.g., null pointers before dereference).

### How do I write a basic test?

Here is a simple example illustrating testing of a factorial function:

```cpp
// Function to test
int Factorial(int n); // Returns n!

// Test if factorial of zero is 1
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests for positive numbers
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### What is a test fixture and when should I use one?

A test fixture lets you reuse the same setup and teardown objects across multiple tests:

- Derive a class from `testing::Test`.
- Initialize common objects in the constructor or `SetUp()` method.
- Write tests using `TEST_F()` to access fixture members.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

### How do I run all the tests?

Use the macro `RUN_ALL_TESTS()`, which will:

- Automatically discover and run all tests defined in your program.
- Return `0` if all tests pass, or `1` if any test fails.

Typically, your `main()` function looks like:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

You should only call `RUN_ALL_TESTS()` once, and not ignore its return value.

### What if I want to customize my test main function?

If you need to perform setup before tests or custom teardown after tests, you can write your own `main()` as shown above. Always:

- Call `testing::InitGoogleTest` before tests run.
- Return the result of `RUN_ALL_TESTS()`.

If you do not require customization, link against the provided `gtest_main` library instead.

### How does GoogleTest discover tests to run?

GoogleTest automatically registers each test defined via `TEST()` or `TEST_F()`. There's no need to manually list your tests. `RUN_ALL_TESTS()` iterates through the registered tests and executes them.

### How do I interpret test output?

- Tests print detailed messages on failures including file, line number, and a description.
- `EXPECT_*` failures report errors but continue; `ASSERT_*` failures abort the current test.
- Tests are grouped by test suite in the output, giving a clear summary of passes and failures.

### How to provide custom failure messages?

You can append a message streamed with `<<` directly to any assertion. For example:

```cpp
EXPECT_EQ(x.size(), y.size()) << "Vectors differ in length";
```

This message will be included in the failure output.

### Can I run a single test or subset of tests?

Yes, you can filter tests by name using the `--gtest_filter` flag:

```
./my_test --gtest_filter=TestSuiteName.TestName
```

You can use wildcards like `*` to select multiple tests.

### How are test suites, test cases, and tests different?

GoogleTest uses the term *test suite* to group related tests. Historically, *test case* was used but is being deprecated. Each *test* corresponds to an individual test function.


## Best Practices

- **Name test suites and tests clearly** to reflect what they verify.
- **Prefer `EXPECT_*` over `ASSERT_*`** when it’s safe to continue after failure.
- **Use fixtures (`TEST_F()`) to reduce duplicate setup code.**
- **Keep tests independent and isolated.** Each test should be able to run on its own.
- **Group logically related tests within the same test suite.**
- **Use `RUN_ALL_TESTS()` once in your main function,** and do not ignore its return code.
- **Use filtering flags to run subsets of tests during development.**

## Troubleshooting Common Issues

<AccordionGroup title="Common Testing Issues">
<Accordion title="Tests Not Running">
Make sure your test functions are properly defined with `TEST()` or `TEST_F()`. Also, confirm you have invoked `RUN_ALL_TESTS()` in your main function.
</Accordion>
<Accordion title="Assertion Failures in Unexpected Places">
Check if `ASSERT_*` macros are used when a non-fatal failure (`EXPECT_*`) would be more appropriate.
</Accordion>
<Accordion title="Tests Fail to Link or Compile">
Verify your test files include the necessary GoogleTest headers and that you are linking against the correct GoogleTest libraries.
</Accordion>
<Accordion title="Test Output Is Cluttered or Hard to Read">
Consider using test filters and verbosity flags to reduce noise. You can also add custom failure messages to clarify output.
</Accordion>
</AccordionGroup>

## Additional Tips

- Use test fixtures for shared setup to avoid code duplication.
- Structure your tests to reflect the design of the code under test.
- Leverage `EXPECT_THROW` and other specialized assertions to verify error conditions.
- Regularly run your tests with different filters to isolate issues.

---

## Related Documentation

- [GoogleTest Primer](/docs/primer.md) — comprehensive introduction to writing tests.
- [Assertions Reference](/reference/assertions.md) — detailed explanation of assertions.
- [Writing the main() Function](/docs/primer.md#writing-the-main-function) — guidance on main function implementation.
- [Mocking Basics Guide](/guides/getting-started-workflows/mocking-basics) — for tests involving GoogleMock.
- [Test Runner Entrypoints and Main Functions](/api-reference/test-execution-and-integration/test-runner-entrypoint)

---