---
title: "Installation and Setup"
description: "Covers frequently encountered issues during installation and configuration of GoogleTest and GoogleMock, including supported platforms, compiler requirements, and initial project setup. Offers clear guidance and links to relevant resources for a seamless onboarding experience."
---

# Installation and Setup FAQ

This FAQ addresses common questions and challenges users face when installing and setting up GoogleTest and GoogleMock. It guides you through supported platforms, compiler requirements, project structure configuration, and key initialization steps to get your testing environment ready.

---

## Frequently Asked Questions

### 1. What platforms does GoogleTest and GoogleMock support?
GoogleTest and GoogleMock run smoothly across major platforms including Linux, Windows, and macOS. They also support embedded platforms like Arduino and specific microcontrollers (e.g., ESP8266, ESP32, NRF52).

### 2. What are the prerequisite compiler and tooling requirements?
GoogleTest requires a C++ compiler that supports C++11 or newer standards. Supported compilers include GCC, Clang, and MSVC. Make sure your build environment aligns with these requirements to ensure proper operation.

### 3. How do I incorporate GoogleMock into my project?
You should include the main mocking header in your C++ code:

```cpp
#include <gmock/gmock.h>
```

Then, define your mock classes using the `MOCK_METHOD` macros inside the public section. Your project must link against both GoogleTest and GoogleMock libraries.

### 4. How do I set up the main function for running tests with GoogleMock?
Typically, you donâ€™t need to write a custom `main()` function. Instead, link your test executable against the `gmock_main` library, which provides a suitable default implementation that initializes GoogleMock and runs all tests.

If you need custom initialization, define your own `main()` like this:

```cpp
#include <gmock/gmock.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 5. How does `InitGoogleMock()` differ from `InitGoogleTest()`?
`InitGoogleMock()` initializes both GoogleMock and GoogleTest frameworks for use, parsing command-line flags relevant to both. It is the recommended initialization function when you intend to use mocking functionalities.

### 6. What build systems are supported for integrating GoogleTest and GoogleMock?
GoogleTest and GoogleMock integrate well with popular build systems such as CMake and Bazel. They provide target configurations and `pc` files to correctly link the required libraries and include directories.

### 7. What common setup issues should I watch out for?
- Incorrect or missing inclusion of GoogleMock headers.
- Forgetting to link against GoogleMock and GoogleTest libraries.
- Using outdated compiler versions without necessary C++11 support.
- Not calling `InitGoogleMock()` before running tests.
- Attempting to run tests without proper main function or main library linkage.

### 8. How can I verify my installation of GoogleTest and GoogleMock?
After setup, build and run the provided example tests or write a minimal mock test (as shown below). Successful execution confirms the setup.

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};

TEST(MockTest, SimpleTest) {
  MockFoo foo;
  EXPECT_CALL(foo, GetValue()).WillOnce(testing::Return(42));
  EXPECT_EQ(foo.GetValue(), 42);
}
```

Compile and link this with GoogleMock and GoogleTest libraries, then run the test executable.

---

## Common Issues & Troubleshooting

### Issue: Tests fail to compile or link.
- **Root cause**: Missing library linkage or headers.
- **Solution**: Ensure `-lgmock` and `-lgtest` (or corresponding CMake targets `gmock` and `gtest`) are correctly linked in your build system. Check include paths for header visibility.

### Issue: `InitGoogleMock()` not called or called incorrectly.
- **Root cause**: Without initialization, GoogleMock and GoogleTest command-line flags are unprocessed.
- **Solution**: Call `testing::InitGoogleMock(&argc, argv);` early in your main function before `RUN_ALL_TESTS()`.

### Issue: Runtime warnings or errors about mock method calls.
- **Root cause**: Missing expectations or incorrect usage of mock objects.
- **Solution**: Define expectations using `EXPECT_CALL` before exercising mocks. Set default actions with `ON_CALL` when necessary.

---

## Best Practices for Installation & Setup

- Use the latest stable release of GoogleTest to benefit from full C++11 support and platform compatibility.
- Prefer linking against `gmock_main` when possible to avoid custom main implementation.
- Structure your project to separate production code and tests clearly; place mock classes and test code in dedicated test directories.
- Use CMake or Bazel for reliable build configuration across platforms.
- Regularly verify your setup by running simple example tests.

---

## Additional Resources & Links

- [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md)
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [Quickstart Setup Guide](https://google.github.io/googletest/guides/getting-started-workflows/quickstart-setup.html)
- [Prerequisites and System Requirements](https://google.github.io/googletest/getting-started/essentials/prerequisites-requirements.html)
- [Build System Integration](https://google.github.io/googletest/guides/integration-advanced-optimization/build-systems-and-integration.html)
- [Troubleshooting Guide](https://google.github.io/googletest/getting-started/first-run-validation/troubleshooting-common-issues.html)

---

For step-by-step project setup and comprehensive build instructions, see the Getting Started Essentials and Quickstart Setup guides.

