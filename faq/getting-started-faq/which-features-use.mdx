---
title: "Which features should I use first?"
description: "Guidance on selecting and understanding high-value features such as assertions, matchers, mock method creation, and test parameterization. Recommendations are based on typical user workflows to help beginners focus on the most impactful functionality."
---

# Which features should I use first?

This page guides beginners through the selection and understanding of the most impactful GoogleTest and GoogleMock features to start using in their testing workflow. It focuses on high-value capabilities such as assertions, matchers, mock method creation, and test parameterization, aiming for rapid progress from simple tests to more advanced and maintainable test suites.

---

## 1. Introduction

GoogleTest and GoogleMock provide a rich ecosystem for writing robust and maintainable C++ tests. However, their extensive features can overwhelm new users. This guide helps you prioritize which features to learn and apply first based on typical user workflows and common testing scenarios.

You’ll find practical recommendations, grounded in user intent, progression from basic to advanced techniques, concrete examples, and best practices — all meant to accelerate your productivity without getting lost in complexity.

---

## 2. Starting with Assertions: Verify Your Code Behavior

At the heart of any test is verifying that your code behaves as expected. GoogleTest offers a rich set of assertion macros to check values, conditions, and handle exceptions. Begin here:

- Use simple assertions such as `EXPECT_EQ`, `ASSERT_TRUE`, and `EXPECT_THROW` to validate your code step by step.
- Gradually introduce `EXPECT_THAT` with GoogleMock matchers for more expressive and flexible conditions.

### Example
```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  // Checks that Factorial(5) returns 120.
  EXPECT_EQ(Factorial(5), 120);
}
```

**Tip:** Mastering assertions first lets you get basic tests running quickly before adding mocks.

---

## 3. Using Matchers: Specify Flexible Argument Checks in Mocks

When creating mocks, you don’t want to hard-code specific argument values every time. GoogleMock matchers provide a DSL for specifying argument expectations with expressive rules. Start with:

- The wildcard matcher `_` to allow any argument when exact values don’t matter.
- Simple matchers like `Eq(value)`, `Ge(n)`, `NotNull()` to express common conditions.
- Then explore composite matchers such as `AllOf()`, `AnyOf()`, and `Not()` to refine checks.

### Example
```cpp
EXPECT_CALL(mock_turtle, GoTo(50, _));  // Any y coordinate for x=50.
```

**Best Practice:** Use matchers judiciously to avoid brittle tests that break on insignificant changes.

---

## 4. Creating Mock Methods: Leveraging MOCK_METHOD

Defining mock classes is straightforward using the `MOCK_METHOD` macro. Begin by:

- Writing mock methods for your interfaces by copying method signatures.
- Always declare mock methods in the `public:` section to allow access from tests.
- Add correct qualifiers like `const`, `override`, or `noexcept` where needed.
- Wrap your mocks with `NiceMock<T>` to suppress uninteresting call warnings initially.

### Example
```cpp
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};
```

**Tip:** Avoid over-mocking and prefer mocking narrow interfaces that you own.

---

## 5. Setting Expectations: Using EXPECT_CALL Wisely

The `EXPECT_CALL` macro sets both behavior and call expectations on mocks. Initially:

- Use `EXPECT_CALL` to specify calls you expect your code to make.
- Combine with `.Times()` to control how many times (default inferred if omitted).
- Use `.WillOnce()` and `.WillRepeatedly()` to define returned values or custom behaviors.
- Keep expectations focused and minimal to verify only what matters.

### Example
```cpp
EXPECT_CALL(mock_turtle, Forward(Ge(50)))  // At least 50 units.
    .Times(2)
    .WillOnce(Return())
    .WillRepeatedly(Return());
```

**Best Practice:** Employ `ON_CALL` for default behaviors when you don’t need to verify the call.

---

## 6. Parameterized & Typed Tests: Write Compact, Reusable Tests

Once comfortable with basic tests, accelerate test coverage with parameterized tests:

- Use `TEST_P` and `INSTANTIATE_TEST_SUITE_P` to test the same code with multiple inputs.
- Use typed tests to generalize tests across types.

### Example
```cpp
class FactorialTest : public testing::TestWithParam<int> {};

TEST_P(FactorialTest, ComputesCorrectly) {
  int n = GetParam();
  EXPECT_GT(Factorial(n), 0);
}

INSTANTIATE_TEST_SUITE_P(PositiveNumbers, FactorialTest, testing::Values(1, 2, 3, 4));
```

**Tip:** This reduces boilerplate and keeps your test suite manageable.

---

## 7. Controlling Mock Strictness: NiceMock, NaggyMock, and StrictMock

Initially, mock methods without explicit expectations produce warnings on uninteresting calls:

- Use `NiceMock<T>` to suppress these warnings and focus on expected behaviors.
- Use `StrictMock<T>` to make any unexpected call a test failure when needed.

### Example
```cpp
NiceMock<MockTurtle> turtle;
EXPECT_CALL(turtle, PenDown());
```

**Advice:** Start with `NiceMock` for cleaner output, escalate to `StrictMock` if verifying exact interactions.

---

## 8. Best Practices & Tips

- Always set expectations before exercising the code.
- Prefer `ON_CALL` for default mock behavior, add `EXPECT_CALL` only when verifying calls.
- Avoid redundant or overly detailed matchers to keep tests maintainable.
- Use sequences (`InSequence`) to enforce call order only when relevant.
- Use `RetiresOnSaturation()` to automatically retire expectations when saturated, for ordered calls or when sequencing.

---

## 9. Troubleshooting Common Pitfalls

- Unexpected calls often result from missing or incorrect expectations.
- Uninteresting call warnings can be suppressed using `NiceMock` or catch-all `EXPECT_CALL(...).Times(AnyNumber())`.
- Make sure destructors in the interface are virtual to avoid leaks and undefined behavior with mocks.
- When mocking methods with overloaded versions, specify parameters to select the correct overload or use `Const()` helper.

---

## 10. Next Steps: Deepen Your Mastery

After mastering these key features, consider exploring:

- Advanced mocking scenarios with sequences and partial ordering.
- Custom actions and matchers to extend GoogleMock capabilities.
- Integration with build systems and continuous testing workflows.
- Debugging strategies for interpreting test failures and improving test reliability.

---

## 11. Additional Resources and References

- [Mock Class Definition & Method Mocking](../api-reference/mocking-apis/mock-class-definition.md): Detailed guide on defining mocks.
- [Setting Expectations & Behaviors](../api-reference/mocking-apis/expectations-behaviors.md): Comprehensive reference on `EXPECT_CALL` and `ON_CALL` usage.
- [Matchers and Actions Reference](../api-reference/mocking-apis/matchers-actions.md): Extensive list and examples of available matchers and actions.
- [Writing & Running Your First Test](../getting-started/first-test-experience/writing-your-first-test.md): Beginner tutorial with examples.
- [Assertions & Best Practices](../guides/writing-tests/assertions-best-practices.md): How to write effective assertions.
- [Parameterized & Typed Tests](../guides/writing-tests/parameterized-tests.md): Compact and reusable test techniques.
- [gMock Cookbook](../docs/gmock_cook_book.md): Real-world recipes for mocking scenarios.


<Tip>
Start small with basic assertions and simple mocks. Gradually build your skills with matchers, expectations, and parameterized tests to maximize test effectiveness and maintainability.
</Tip>

<Note>
Always define your mock methods in the `public:` section, and use the correct qualifiers to avoid compile errors.
</Note>

<Warning>
Avoid writing overly strict expectations that make tests fragile and sensitive to implementation changes.
</Warning>

<CardGroup cols={2}>
<Card title="Getting Started with Assertions">
Use `EXPECT_EQ`, `ASSERT_TRUE`, and simple macros to validate code behavior.
</Card>
<Card title="Building Mock Classes">
Define mocks using `MOCK_METHOD` with correct declaration and qualifiers.
</Card>
<Card title="Using Matchers">
Employ `_` wildcard and simple matchers to flexibly specify call argument conditions.
</Card>
<Card title="Setting Expectations">
Declare call expectations with `EXPECT_CALL` and tune with `.Times()`, `.WillOnce()`, etc.
</Card>
<Card title="Parameterized Tests">
Leverage `TEST_P` and `INSTANTIATE_TEST_SUITE_P` for concise, repeatable test cases.
</Card>
<Card title="Mock Strictness Control">
Choose between `NiceMock`, `NaggyMock`, and `StrictMock` to manage uninteresting call behaviors.
</Card>
</CardGroup>
