---
title: "Installation and Configuration Issues"
description: "Answers to common problems users face during the installation and configuration process for GoogleTest and GoogleMock, including build system integration and compiler compatibility. Provides actionable troubleshooting advice to get started swiftly."
---

# Installation and Configuration Issues FAQ

This FAQ page addresses the most common problems users encounter during the installation and configuration phases of GoogleTest and GoogleMock. It focuses specifically on build system integration and compiler compatibility challenges, providing practical, actionable guidance to help you get up and running quickly and smoothly.

---

## Frequently Asked Questions

### 1. How do I integrate GoogleTest and GoogleMock into my C++ project build system?

Integration depends on your build system of choice:

- **CMake**: Use the official CMake support by adding GoogleMock as a subdirectory or fetching it via `FetchContent`. Then link your test targets against `gmock` or `gmock_main`. Remember to include GoogleTest headers and link their libraries as well.

- **Bazel**: Declare your dependencies on GoogleTest and GoogleMock via `MODULE.bazel` (or WORKSPACE), and add the corresponding `cc_test` rules referencing needed libraries.

- **Manual builds**: Compile and link the source files `gmock-all.cc`, `gmock_main.cc` (for main function), and relevant GoogleTest sources together.

For details, see the [Install with CMake](/getting-started/prerequisites-installation/install-cmake) and [Install with Bazel](/getting-started/prerequisites-installation/install-bazel) guides.

---

### 2. What are the typical compiler compatibility requirements?

GoogleTest and GoogleMock require:

- **C++17 minimum** standard support.
- Supported compilers include GCC (7.0+), Clang, Intel LLVM, and MSVC (Visual Studio 2015+).
- On MSVC, prefer `/utf-8` source encoding and be mindful of warning levels.
- Note that older compiler versions or incompatible flags may cause build failures.

If you receive compiler errors or warnings related to standard features or macros, verify your compiler version and flags. Check out the [System Requirements & Supported Platforms](/getting-started/prerequisites-installation/system-requirements) page for a thorough list.

---

### 3. Why am I getting linking errors when using GoogleMock?

Linker errors often arise from:

- Missing references because you did not link against `gmock` or `gmock_main` libraries.
- Mixing static and dynamic runtime libraries inconsistently, especially on MSVC.
- Omission of the required GoogleTest libraries that GoogleMock depends on.

**Solution**:

- Link your test target with `gmock_main` if you want a default `main()` function, or link with `gmock` and provide your own `main`.
- Ensure consistent runtime library flags (`/MT` vs `/MD`) across all compilation units.
- For CMake users, target link `gmock_main` or `gmock` and transitively `gtest` is handled.

---

### 4. How do I handle GoogleMock and GoogleTest flag initialization?

Call `testing::InitGoogleMock(&argc, argv)` at the start of your `main()` before running tests. This function:

- Parses and removes GoogleMock-specific command line flags.
- Initializes GoogleTest as well (no need to call `InitGoogleTest()` separately).

Check your `main()` looks like:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

For embedded or specialized platforms (like ESP8266), see platform-specific notes in the [GoogleMock main.cc](https://github.com/google/googletest/blob/main/googlemock/src/gmock_main.cc) source.

---

### 5. What are common pitfalls with compiler flags when building GoogleTest and GoogleMock?

- **Runtime library mismatch** on MSVC: GoogleTest and your test binaries must use the same runtime linkage (`/MT` or `/MD`).
- **Exception handling and RTTI**: GoogleTest expects exceptions and RTTI enabled; disabling these requires special build flags.
- Warning level strictness: CMake scripts upgrade warnings to level 4 (`/W4`) on MSVC for GoogleMock.
- Proper encoding flags to treat source files as UTF-8 (`-utf-8` on MSVC).

See the `internal_utils.cmake` file in the source for the recommended default compiler settings.

---

### 6. How do I resolve header files not found or missing symbols errors?

- Ensure that your include paths encompass both GoogleTest and GoogleMock headers.
- For CMake, the GoogleMock CMakeLists.txt sets `include_directories` automatically.
- When using source checkout, the `include` directory inside GoogleMock and GoogleTest must be referenced.

If you include `#include "gmock/gmock.h"` and get file not found, verify your project includes `${gmock_SOURCE_DIR}/include` and `${gtest_SOURCE_DIR}/include`.

---

### 7. Can I use GoogleMock and GoogleTest without specifying a `main()` function?

Yes. GoogleMock provides a `gmock_main` library which includes a ready-made `main()` that:

- Calls `InitGoogleMock()`
- Invokes `RUN_ALL_TESTS()`

Linking against `gmock_main` lets you avoid writing your own `main()`. Just focus on writing your tests.

---

### 8. Why do my tests compile but fail at runtime with mock-related errors?

Runtime mock failures can come from:

- Incorrect linking or initializationâ€”make sure you called `InitGoogleMock()`.
- Unfulfilled mock expectations or unexpected calls.
- Leakage of mock objects (not deleted), especially if you're using strictness wrappers.

Ensure your test setup matches expected call counts and arguments.

---

## Common Issues & Troubleshooting Tips

- **Build Targets Not Found**: Verify your dependency declarations and link libraries.
- **Runtime Errors on Windows**: Check for consistent runtime and exception flag settings.
- **Compiler Flag Conflicts**: Avoid mixing manually set flags with those managed by CMake or Bazel.
- **C++ Standard Version**: Use at least C++17.

---

## Example: A Minimal CMakeLists.txt for GoogleMock

```cmake
cmake_minimum_required(VERSION 3.13)
project(MyMockTests LANGUAGES CXX)

add_subdirectory(path/to/googlemock)

add_executable(my_tests my_tests.cc)

target_link_libraries(my_tests gmock_main)

set_target_properties(my_tests PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED ON)
```

---

## Tips for Smooth Installation and Configuration

- Always start by verifying your compiler version and flags.
- Prefer using `gmock_main` to reduce boilerplate main function code.
- Ensure include and link path consistency to avoid missing symbols.
- Use provided CMake helper scripts and targets as much as possible.
- Refer to detailed platform and environment guides for specific tweaks.

---

## Where to Go Next

- For detailed build instructions, see the [Installation Overview](/getting-started/prerequisites-installation/installation-overview) and related platform guides.
- For configuring test projects after installation, see [Configure Your Test Project](/getting-started/initial-setup-usage/project-configuration).
- For troubleshooting runtime mock failures, visit [Troubleshooting Installation and Configuration](/getting-started/troubleshooting-support/common-troubleshooting).

---

## Additional Resources

- [GoogleMock GitHub Repository](https://github.com/google/googletest)
- [System Requirements & Supported Platforms](/getting-started/prerequisites-installation/system-requirements)
- [Quickstart: Testing with CMake](/guides/getting-started/quickstart-cmake)
- [Quickstart: Testing with Bazel](/guides/getting-started/quickstart-bazel)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Integration Story](/overview/getting-started-and-integration/integration-story)

---

<Tip>
Starting your GoogleMock setup with the official CMake integration saves significant time and common errors. Avoid directly compiling or linking source files unless you need a custom build process.
</Tip>

<Warning>
Using an unsupported compiler or insufficient C++ standard version will cause cryptic errors during build or run time. Verify environment compliance early.
</Warning>

<Check>
Ensure you initialize GoogleMock by calling `testing::InitGoogleMock()` before running tests, or expect unexpected behaviors or failures.
</Check>

---