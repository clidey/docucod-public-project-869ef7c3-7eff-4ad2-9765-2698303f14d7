---
title: "Writing and Running Your First Test"
description: "Guides users past early friction in setting up, compiling, and running their first test cases. Covers linking, test discovery, and basic assertion usage, as well as troubleshooting test execution failures."
---

# Writing and Running Your First Test

This guide takes you through the essential steps of writing, compiling, and executing your first C++ test cases using GoogleTest. It helps you overcome common early hurdles such as linking errors, test discovery, and basic assertion usage, ensuring a smooth start with automated testing.

---

## 1. Setting Up and Writing a Simple Test

### Writing a Test Case

GoogleTest tests are organized into *test suites* and *tests*. Each test case is an independent function that includes assertions to verify your code.

Use the following pattern to define your first test:

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code here.
  EXPECT_EQ(1 + 1, 2);
}
```

- `TestSuiteName` groups related tests.
- `TestName` identifies this test uniquely in the suite.

**Note:** Test suite and test names must be valid C++ identifiers without underscores.

### Using Assertions

Assertions check if your code behaves as expected. For example:

- `EXPECT_EQ(val1, val2)` verifies equality without stopping the test on failure.
- `ASSERT_TRUE(condition)` stops the test immediately if `condition` is false.

Use `EXPECT_` assertions to continue testing after a failure and `ASSERT_` assertions when failure should abort the test.

Example:

```cpp
EXPECT_EQ(Factorial(3), 6) << "Factorial calculation error";
```

### Example: First Test

```cpp
#include <gtest/gtest.h>

// Simple test that checks integer addition
TEST(SimpleMathTest, AddsCorrectly) {
  EXPECT_EQ(2 + 3, 5);
}
```

## 2. Compiling Your Test Code

GoogleTest provides libraries you must link against:

- `gtest` or `gtest_main`
- Depending on your setup, possibly `pthread` on Linux

### Using `gtest_main`

If you link with `gtest_main`, the test binary automatically has a `main()` function that runs all registered tests.

Compile with something like:

```bash
g++ -std=c++17 your_test.cc -lgtest_main -lgtest -pthread -o your_test
```

If you prefer writing your own `main()`, link against `gtest` only and define it as:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

## 3. Running Your Tests

Run the built test binary directly:

```bash
./your_test
```

It will discover all defined tests automatically and run them.

Sample output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SimpleMathTest
[ RUN      ] SimpleMathTest.AddsCorrectly
[       OK ] SimpleMathTest.AddsCorrectly (0 ms)
[----------] 1 test from SimpleMathTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

---

## 4. Test Discovery and Registration

GoogleTest automatically registers your tests when you use the `TEST()` or `TEST_F()` macros. No manual enumeration is needed.

Your test executable will run all test suites and tests that are included in its linkage unit.

**Tip:** To run only a specific test or suite, use command-line filters:

```bash
./your_test --gtest_filter=TestSuiteName.TestName
```

Partial matches supported, e.g., `--gtest_filter=SimpleMathTest.*` to run all tests in the suite.

## 5. Writing Tests with Fixtures

Fixtures let you share setup and teardown code across multiple tests:

```cpp
class MyTestFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Initialization.
  }
  void TearDown() override {
    // Cleanup.
  }
};

TEST_F(MyTestFixture, TestOne) {
  // Test body
}
```

GoogleTest creates and destroys the fixture instance afresh for *each* test.

## 6. Troubleshooting Common Test Execution Issues

### Linker Errors Related to `main`

If you get `undefined reference to 'main'`, check:

- You linked against `gtest_main` to get the default entry point.
- Or you have defined your own `main()` with `RUN_ALL_TESTS()`.

### Tests Not Running

If your executable runs with no tests found,

- Verify your tests are compiled and linked into the binary.
- Make sure you are not disabling tests via filters or compile flags.

### Assertion Failures

Examine the output for failed assertions; enable verbose logging with `--gtest_verbose=info` if needed.

### Running Subsets of Tests Fails

Use filters correctly and remember that test and suite names must follow naming rules.

## 7. Best Practices

- Write meaningful and descriptive test suite and test names.
- Use `EXPECT_` macros for non-fatal verification, and `ASSERT_` only when the test cannot proceed.
- Group related tests using fixtures for cleaner and more maintainable code.
- Use command-line flags for filtering, enabling/disabling tests, and verbosity control.

## 8. Next Steps

After getting your first tests running:

- Explore parameterized tests for data-driven testing.
- Learn to write mocks and set expectations using GoogleMock.
- Understand how test suite setup and teardown works with fixtures and environments.
- Discover advanced assertions to improve test validation.

---

## Additional Resources

- [GoogleTest Primer](primer.md): A thorough introduction.
- [Writing Your First Test](guides/getting-started/first-test.md): Step-by-step tutorial.
- [Assertions Reference](api_reference/core_test_api/assertions_reference.md): All assertion macros.
- [Mocking Basics](guides/mocking-advanced/getting-started-mocking.md): Introduction to mocking.
- [Troubleshooting Common Test Failures](guides/real-world-integration/troubleshooting-faq.md): Debugging help.

---

<Note>
If you encounter early setup issues, consult the [Installation & Build Problems FAQ](faq/getting-started-faq/installation-troubleshooting.md) and verify your toolchain complies with the required C++17 standard.
</Note>

---