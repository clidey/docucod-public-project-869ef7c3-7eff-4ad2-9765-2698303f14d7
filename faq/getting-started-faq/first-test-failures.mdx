---
title: "Troubleshooting Your First Failing Test"
description: "Solutions for troubleshooting test failures encountered by new users, including assertion errors, basic debugging strategies, and interpretation of error messages. Empowers users to diagnose and fix issues swiftly to maintain momentum."
---

# Troubleshooting Your First Failing Test

Getting your first test to pass with GoogleTest is a rewarding experience, but sometimes failures happen that can slow you down. This page is designed to empower you to quickly understand, diagnose, and fix the common types of test failures you might encounter when starting out.

---

## 1. Recognizing Test Failures

When a test fails, GoogleTest provides detailed messages showing:

- The **name of the test suite** and the **test name**.
- The **assertion that failed** and what condition was expected.
- The **actual values** involved in the failure.
- The **file name and line number** where the failure occurred.

Example failure snippet:

```none
[ RUN      ] FactorialTest.HandlesZeroInput
path/to/test.cc:10: Failure
Expected equality of these values:
  Factorial(0)
    Which is: 0
  1
[  FAILED  ] FactorialTest.HandlesZeroInput (0 ms)
```

This message tells you exactly which test failed, where, and why.

---

## 2. Common Causes of Failures and How to Fix Them

### 2.1 Assertion Failures

Assertions check your code's expected behavior. When an assertion fails, review:

- **What is being tested?** Look at the expected vs actual values printed.
- **Check your test code**: Is the test logic correct? Do the inputs and expected outputs match your functionâ€™s intended behavior?
- **Examine the tested code** for bugs or unhandled cases.

Example: You might get `EXPECT_EQ(2, Factorial(3))` failing because `Factorial(3)` returned `6`.

**How to fix:** Adjust either the code or the test expectation to reflect the correct factorial calculation.

### 2.2 Test Crashes or Segmentation Faults

If your test causes a crash, likely due to dereferencing null or invalid pointers, or out-of-bound access:

- Look at the test output to find the location just before the crash.
- Run the test in a debugger to identify the exact cause.
- Fix uninitialized pointers or invalid memory access in your test or code.

### 2.3 Fatal Assertion Aborts

When an `ASSERT_*` fails, it aborts the current test function immediately. This is expected behavior but may cause later test checks not to run.

**Tip:** Use `EXPECT_*` assertions when you want the test to continue after failures.

### 2.4 Disabled Tests

Tests prefixed with `DISABLED_` or declaring a test suite as disabled will not run by default.

Run disabled tests explicitly by using the `--gtest_also_run_disabled_tests` flag or setting `GTEST_ALSO_RUN_DISABLED_TESTS` environment variable.

---

## 3. Debugging Strategies

### 3.1 Using Debuggers

Run your test binary in your favorite debugger to step through the code and inspect variables at failure points.

### 3.2 Add Logging

Insert `std::cout` or logging statements to show intermediate variables or states.

### 3.3 Use Scoped Traces

Use the `SCOPED_TRACE` macro to add context to failures inside helper functions:

```cpp
void Helper(int value) {
  SCOPED_TRACE(value);
  EXPECT_TRUE(value > 0);
}

TEST(MyTest, UsesHelper) {
  Helper(-1);
}
```

This will help identify which call to the helper caused the failure.

### 3.4 Check for Multiple Failures

`ASSERT_*` failures stop the current function, but `EXPECT_*` failures let the test continue, allowing multiple failures to surface in one run.

When you see many failures, fix the first few as they might cascade.

### 3.5 Verify Test and Build Environment

- Ensure GoogleTest is properly installed and linked.
- Confirm you are building with the appropriate C++ standard (C++17 is required).
- Check for compiler warnings or errors in your project.

---

## 4. Interpreting Common Error Messages

### 4.1 `Expected equality of these values:`

Means an `EXPECT_EQ` or `ASSERT_EQ` failed. Check what the expected and actual values are.

### 4.2 `Value of:` failure messages

For assertions like `EXPECT_TRUE(condition)`, GoogleTest prints the failed expression and its evaluated value. Use this to find logical errors.

### 4.3 `Null pointer dereference` or `Segmentation Fault`

Occurs when accessing invalid memory. Use a debugger to find faulty pointers.

### 4.4 `DISABLED_` Test Not Running

Indicates the test is disabled to skip execution by default.

---

## 5. Common User Mistakes and How to Avoid Them

- **Forgetting to return the value of `RUN_ALL_TESTS()` in `main()`:**

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();  // Must return this value!
}
```

- **Spelling `SetUp()` and `TearDown()` incorrectly:** Test fixtures must use exact capitalization.
- **Mixing `TEST()` and `TEST_F()` improperly:** Use `TEST_F` only with properly defined fixtures.
- **Not initializing fixtures before use:** Ensure setup code runs before tests.
- **Side effects inside tests ** that impact other tests causing flaky failures.

---

## 6. Recovering from Setup Failures

If test fixtures fail during construction or in `SetUp()`, GoogleTest reports the failure but still runs other tests independently.

**Best practice:** Keep setup quick and simple, move complex initialization outside tests or use per-test-suite setup.

---

## 7. Testing Your Tests: Using GoogleTest's Testing APIs

GoogleTest offers macros like `EXPECT_FATAL_FAILURE` and `EXPECT_NONFATAL_FAILURE` to write tests verifying the behavior of tests or code that should produce failures. These are advanced features useful when writing custom test utilities or extensions.

Example:

```cpp
EXPECT_FATAL_FAILURE(
    { ASSERT_EQ(1, 2); }, "Expected equality of these values");
```

---

## 8. Where to Go From Here

- Review [GoogleTest Primer](primer.md) to deepen your understanding of writing tests.
- Explore the [Assertions Reference](reference/assertions.md) for detailed assertion options.
- Check the [Testing Reference](reference/testing.md) for core APIs and macros.
- If you face installation issues, consult the [Installation Methods](getting-started/prerequisites-installation/installation-methods.mdx).
- Learn advanced techniques in the [Advanced GoogleTest Topics](docs/advanced.md) guide.

---

## 9. Helpful Tips

- Use `EXPECT_*` assertions for non-fatal failures to discover multiple issues per test run.
- Use `ASSERT_*` where continuing after failure does not make sense.
- Name your test suites and tests clearly and avoid underscores `_`.
- When disabling tests temporarily, clean them up as soon as possible.

<Tip>
Always remember to check the output of failing tests carefully. The location and message provided are your primary clues to diagnose problems.
</Tip>

<Tip>
Use the `--gtest_break_on_failure` flag to enable debugger breakpoints on failures, speeding debugging.
</Tip>

<Tip>
When using parameterized and typed tests, ensure proper instantiation to avoid silent no-test execution.
</Tip>