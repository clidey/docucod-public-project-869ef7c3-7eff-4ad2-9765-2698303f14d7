---
title: "Creating My First Test: What Do I Need?"
description: "Step-by-step FAQ for writing, building, and running your first test or mock with GoogleTest and GoogleMock. Addresses typical beginner hurdles and common user errors on their first attempt."
---

# Creating My First Test: What Do I Need?

Welcome to your first journey writing tests with GoogleTest and GoogleMock! This FAQ is your trusted companion to navigate the typical challenges you'll face when writing, building, and running your very first C++ test or mock. We break down the initial barriers with clear explanations, practical steps, and troubleshooting tips to get you confidently compiling and executing your tests.

---

## 1. What is the simplest way to start writing a test with GoogleTest?

Start by writing a simple test function using the `TEST` macro which defines a test inside a test suite. Here’s a minimal example:

```cpp
#include <gtest/gtest.h>

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

- The first argument `FactorialTest` is the test suite name.
- The second argument `HandlesZeroInput` is the test’s name.

Compile the test with GoogleTest linked and then run it with the test executable. `RUN_ALL_TESTS()` in your `main()` function will execute all tests.


### Practical tip:
- Avoid underscores (`_`) in test suite and test names to prevent compiler errors and unexpected behavior.


## 2. How do I write multiple tests that share setup or data?

Use a _test fixture_, which is a class derived from `testing::Test` that contains shared data and setup code.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  ASSERT_NE(q1_.Dequeue(), nullptr);
}
```

- Use `TEST_F` instead of `TEST` to use the fixture class.
- Each test gets a fresh fixture instance initialized before running.


## 3. How do I build and run my first test program?

- Include `<gtest/gtest.h>` in your source file.
- Call `testing::InitGoogleTest(&argc, argv)` at the start of `main()`.
- End `main()` with `return RUN_ALL_TESTS();`.

A simple `main` function:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build your test program linking against `gtest` and optionally `gtest_main` (which provides `main()` for you).

Running the executable will run all tests and print results to the console.


## 4. How do I write parameterized tests to run the same test with multiple inputs?

Use value-parameterized tests.

- Define a fixture derived from `testing::TestWithParam<T>` where `T` is your parameter type.
- Use `TEST_P` instead of `TEST_F`.
- Instantiate your test suite with multiple parameters using `INSTANTIATE_TEST_SUITE_P`.

Example:

```cpp
class MyParamTest : public testing::TestWithParam<int> {};

TEST_P(MyParamTest, IsEven) {
  EXPECT_EQ(GetParam() % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyParamTest, testing::Values(2, 4, 6));
```

This runs the test `IsEven` with parameters 2, 4, and 6.


## 5. How do I write typed or type-parameterized tests?

If you need to test the same logic against several types, use typed tests or type-parameterized tests.

- For typed tests, define a template fixture and associate it with a list of types using `TYPED_TEST_SUITE`.
- For type-parameterized tests, declare them with `TYPED_TEST_SUITE_P`, define tests with `TYPED_TEST_P`, register them, and instantiate with `INSTANTIATE_TYPED_TEST_SUITE_P`.

Example Typed Test:

```cpp
template <typename T>
class MyTypedTest : public testing::Test {
 protected:
  T value_{};
};

using MyTypes = testing::Types<int, float>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, IsZeroInitially) {
  EXPECT_EQ(this->value_, 0);
}
```


## 6. What are common mistakes to avoid on my first test?

- **Naming tests**: Avoid underscores in test suite and test names to prevent errors caused by compiler-generated class names.

- **Constructor usage**: Don’t put assertions in test fixture constructors or destructors—use `SetUp()` and `TearDown()` instead.

- **Ignoring return value of `RUN_ALL_TESTS()`**: Always `return RUN_ALL_TESTS();` from `main` to correctly report test success status.

- **Using `ASSERT_*` in non-void functions**: Fatal assertions must be used only in void-returning functions.

- **Disabling tests temporarily**: Use prefix `DISABLED_` in test names to disable without deleting the code.


## 7. How can I mock dependencies with GoogleMock when writing my first tests?

Start by defining mock classes using `MOCK_METHOD` macros for the interfaces you want to mock. Use `EXPECT_CALL` to set expectations and behaviors in your tests.

Example:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(int, Bar, (int x), ());
};

TEST(MyTest, FooCalledWithFive) {
  MockFoo mock;
  EXPECT_CALL(mock, Bar(5)).WillOnce(testing::Return(10));

  int result = mock.Bar(5);
  EXPECT_EQ(result, 10);
}
```

Mock classes help isolate your tests and verify interactions.


## 8. How do I troubleshoot when my first test won’t build or run?

- Make sure you’ve included the GoogleTest headers correctly.
- Verify you linked against `gtest` libraries and runtime dependencies.
- Check compiler version meets C++17 requirements.
- Ensure `main()` calls `InitGoogleTest()` and returns `RUN_ALL_TESTS()`.
- If using fixtures, verify the test fixture has a default constructor.
- If you see mangled symbols or linker errors, confirm consistent runtime and linkage options.


## 9. How do I list all tests in my test executable without running them?

Use GoogleTest’s command line flag:

```
./my_test --gtest_list_tests
```

This prints the names of all test suites and tests that would run, without executing any tests.


## 10. How do I run only a subset of tests from my test executable?

Use the `--gtest_filter` flag or the `GTEST_FILTER` environment variable.

**Syntax:**

`--gtest_filter=PositivePatterns[-NegativePatterns]`

- Positive and negative patterns are separated by `:`.
- Wildcards `*` and `?` are supported.

Example:

- Run all tests in `FooTest`:

```
./my_test --gtest_filter=FooTest.*
```

- Run all tests except those with `DeathTest` in their name:

```
./my_test --gtest_filter=-*DeathTest.*
```


## Additional Tips for Your First Tests

- Use `EXPECT_*` assertions when you want your test to continue after failure, `ASSERT_*` when it must stop immediately.
- Use `SCOPED_TRACE` when calling shared subroutines from tests to clarify failure messages.
- Use `GTEST_SKIP()` at runtime to skip tests if preconditions are not met.
- If testing private members, consider using `FRIEND_TEST` or refactor to test via public APIs.


---

## Troubleshooting Quick Guide

| Issue                                   | Solution                                           |
|-----------------------------------------|--------------------------------------------------|
| Test fails to run, linker errors         | Link against gtest and gtest_main, check includes |
| `TEST_F` error: no matching constructor  | Add default constructor to fixture class          |
| Assertions inside `SetUp` not called     | Ensure correct casing `SetUp()` vs `Setup()`      |
| Tests with `_` in names cause build issues | Remove or avoid underscores in test or suite names |
| Death tests hang or fail unexpectedly     | Verify correct naming (use `*DeathTest` suites), avoid threads before death tests |

---

## Resources and Next Steps

- GoogleTest Primer: Learn the fundamentals of writing tests.
- Writing Your First Test (guide): Progressive tutorial with examples.
- Using Assertions Effectively: Master core assertion macros.
- Getting Started with GoogleMock: Begin mocking dependencies.
- Organizing Test Suites and Fixtures: Best practices and patterns.

Start writing your first tests now and explore these guides to deepen your skills!

---

## Related Documentation Links

- [GoogleTest Primer](primer.md)
- [Writing Your First Test](guides/core_workflows/writing_first_test.md)
- [GoogleMock Quick Start](getting-started/configuration-first-run/quick-start-mocking.md)
- [Test Case and Test Suite Structure](api-reference/core-testing-api/test-case-structure.md)
- [Assertions API Reference](api-reference/core-testing-api/assertions-api.md)
- [Test Naming Conventions and FAQ](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)

---

<Note>
When starting out, build your test incrementally: write a simple `TEST`, verify it compiles and passes, then introduce fixtures, parameterized tests, and mocks step-by-step. This iterative approach prevents overwhelm.
</Note>

<Warning>
Be mindful of naming your tests and fixtures correctly to avoid obscure errors. If your test fixture has state, ensure the constructor is callable without arguments.
</Warning>

<Check>
Always return the result of `RUN_ALL_TESTS()` from your `main()` to allow proper test result reporting.
</Check>

<Steps>
<Step title="Write Your First TEST">
Create a file with a simple `TEST()` that asserts some behavior.
</Step>
<Step title="Compile and Link">
Make sure to link against GoogleTest libraries (`gtest` and/or `gtest_main`).
</Step>
<Step title="Run Your Test Binary">
Execute the test program; observe pass/fail output.
</Step>
<Step title="Expand with Fixtures">
Use `TEST_F()` with fixtures to share setup/teardown.
</Step>
<Step title="Add Parameterized or Typed Tests">
Use `TEST_P()` or `TYPED_TEST()` for thorough coverage.
</Step>
</Steps>