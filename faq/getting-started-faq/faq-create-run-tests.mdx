---
title: "How do I write and run my first test?"
description: "Steps and tips for writing your first test case, including the use of test macros, best practices for structuring your tests, and methods for running tests either individually or as a suite."
---

# How do I write and run my first test?

Welcome to your first step in writing tests with GoogleTest! This FAQ answers common questions about how to write a basic test case, structure it properly, and run your tests effectively â€” whether individually or as part of a larger test suite.

---

## 1. What is a basic test in GoogleTest?

A basic test uses the `TEST` macro to define a test function inside a named **test suite**. A test suite groups related tests that verify parts of the same functionality.

### Writing a simple test

```cpp
// Defines a test named "HandlesZeroInput" in the suite "FactorialTest".
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Assertion to check expected behavior.
}
```

- The first argument (`FactorialTest`) is the test suite name.
- The second argument (`HandlesZeroInput`) is the individual test name within that suite.
- Inside the test body, use assertions like `EXPECT_EQ` to check program behavior.

### Tips

- Both names should be valid C++ identifiers and should *not* contain underscores. 
- GoogleTest creates a fresh environment for each test to keep tests independent.

---

## 2. How do I use test fixtures for sharing setup?

If your tests share common objects or setup code, use a *test fixture*. It's a class derived from `testing::Test` where you put shared code and data members.

### Defining and using a test fixture

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Common setup for several tests
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;  // Empty queue
  Queue<int> q1_;  // One element
  Queue<int> q2_;  // Two elements
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

- Use `TEST_F` instead of `TEST` when using fixtures.
- Each test gets a fresh fixture instance, ensuring isolation.
- Put common initialization in the fixture constructor or `SetUp()` method.

### Best practices

- Use `ASSERT_*` assertions when failure should stop the test immediately.
- Use `EXPECT_*` assertions to report failures but continue test execution.

---

## 3. How do I run my tests?

Once you've written your tests, you typically run them by invoking the test executable. GoogleTest auto-discovers all tests and runs them with `RUN_ALL_TESTS()`.

### Basic main function

If you don't write your own `main()`, link with `gtest_main` which provides a suitable main. Otherwise:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` parses command-line flags for test configuration.
- `RUN_ALL_TESTS` runs all tests and returns `0` if successful, `1` if any test failed.

### Running subsets of tests

You can control which tests to run using the `--gtest_filter` flag, e.g.: 

```
./my_test --gtest_filter=FactorialTest.HandlesZeroInput
```

runs only the specified test.

### Additional execution flags

- `--gtest_repeat=N` repeats tests `N` times.
- `--gtest_shuffle` randomizes test execution order to catch ordering dependencies.
- `DISABLED_` prefix on test or suite names disables them temporarily.
- See the [Advanced Guide](advanced.md#running-test-programs-advanced-options) for more.

---

## 4. What are best practices for writing first tests?

- Keep tests simple and small; test one thing per test.
- Name test suites and tests descriptively for clarity.
- Avoid using underscores in names to prevent macro naming conflicts.
- Prefer fixtures when multiple tests share setup to avoid repetition.
- Use `EXPECT_*` for non-fatal checks and `ASSERT_*` when continuing makes no sense.
- Always check the return value of `RUN_ALL_TESTS()` in your main.

---

## 5. How do I handle test failures?

When an assertion fails, GoogleTest prints detailed information including:

- File and line number of failure
- Expected and actual values
- Custom failure messages if you streamed them

You can run a single failing test in isolation using:

```
./my_test --gtest_filter=TestSuiteName.TestName
```

For more advanced failure tracing, consider adding `SCOPED_TRACE` calls to add context to nested assertions.

---

## 6. What if I want to test parameterized or typed tests next?

Once comfortable with basic and fixture tests, explore:

- [Value-Parameterized Tests](../advanced.md#value-parameterized-tests) using `TEST_P` and `INSTANTIATE_TEST_SUITE_P` for testing various input values.
- [Typed Tests](../advanced.md#typed-tests) for verifying the same test logic against multiple types.

These help increase test coverage efficiently.

---

## Additional Resources

- [GoogleTest Primer](primer.md) for complete basics
- [Advanced GoogleTest Topics](advanced.md) for features beyond the basics
- [Test Macros and Assertions Reference](reference/testing.md) for syntax
- [Test Discovery & Execution Guide](guides/getting_started/test_discovery_execution.md) for running
- [Writing Your First Test Guide](guides/getting_started/writing_first_tests.md) for step-by-step walk-through

For detailed examples and sample tests, check out the source samples repository.

---

<Tag href="/api-reference/core-testing-interfaces/test-macros-assertions" text="Test Macros and Assertions Reference" />
<Tag href="/guides/getting_started/writing_first_tests" text="Writing Your First Test Guide" />
<Tag href="/advanced.md#running-test-programs-advanced-options" text="Advanced Test Running Options" />

<Tip>
Remember to always match your test naming conventions carefully and verify your test setup runs smoothly before expanding your test suite.
</Tip>

---