---
title: "Resolving Common Setup Issues"
description: "Addresses frequent problems users face during installation and initial builds, such as compiler errors, platform requirements, and linking problems. Offers quick debugging tips for environment mismatches and required C++ standards."
---

# Resolving Common Setup Issues

This page addresses frequent problems users face during GoogleTest and GoogleMock installation and initial build setups. It guides you through common compiler, platform, linking errors, and environment mismatches, focusing on practical solutions to achieve a smooth start with your C++ testing framework.

---

## 1. Common Installation and Build Problems

### 1.1 Compiler Errors and C++ Standard Requirements

- **Problem:** Compilation fails due to unsupported C++ standards or compiler versions.
- **Cause:** GoogleTest requires a compiler that supports **C++17** features.

**Resolution:**

- Verify your compiler version meets the minimum supported version for C++17.
- Explicitly set your build system to use C++17, for example in CMake:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- For manual builds or other build systems, ensure compiler flags include `-std=c++17` or equivalent.

- If your environment does not support C++17, upgrade your toolchain or use a compatible platform.

---

### 1.2 Platform and Compiler Compatibility

- GoogleTest and GoogleMock are **cross-platform** with support for Linux, Windows, and macOS.
- Some platforms require **special build flags**, e.g., pthread support on POSIX systems.

**Troubleshooting Tips:**

- On POSIX systems, ensure `pthreads` is available and linked. When using CMake, this is handled automatically.
- On Windows, be aware of runtime library settings (static vs dynamic). Mismatched runtimes can cause linker errors:
  - Use the CMake option `-Dgtest_force_shared_crt=ON` to align runtime linkage dynamically if your project does so.
- For embedded platforms like ESP32, GoogleTest leverages Arduino style setup/loop entry points.

---

### 1.3 Linking Errors (Undefined Symbols, Missing Libraries)

- **Common Causes:** Linking your tests without linking to the GoogleTest or GoogleMock libraries correctly.

**Best Practices:**

- Always link your test binaries with the appropriate test libraries:
  - Use `gtest_main` or `gmock_main` if you want to use the test framework’s default `main()` function.
  - If you provide your own `main()`, link with `gtest` or `gmock` libraries instead.

- In CMake:
  ```cmake
  target_link_libraries(your_test_target PRIVATE gtest_main)
  # or
  target_link_libraries(your_test_target PRIVATE gmock_main)
  ```

- Ensure that the include directories for GoogleTest and GoogleMock headers are added properly.

- Check that the build treats GoogleTest as a static or shared library consistently with your project.

---

### 1.4 Build System Configuration Issues

- Configuration errors like missing headers or source files often stem from incorrect project or include path setups.

**Solutions:**

- Follow project setup guides to correctly include GoogleTest source or installed headers.
- If using CMake, either add GoogleTest as a subdirectory in your project or find_package it correctly.
- When embedding GoogleTest source, verify that the paths match your directory layout.

---

## 2. Quick Debugging and Verification Tips

### 2.1 Validate Environment Setup

- Confirm compiler and linker versions match requirements.
- Run a simple “hello test” program, for example a minimal test using the `TEST()` macro.
- Use verbose logging or build system logs to identify missing components.

### 2.2 Common Flags and Options

- Use `-DGTEST_HAS_PTHREAD=1` or `=0` to control pthread detection if auto-detection fails.
- For Windows MSVC, consider using `-Dgtest_force_shared_crt=ON` to avoid CRT mismatches.
- Verify that no conflicting C++ standard flags are set that might supersede your intended configuration.

---

## 3. Example: Minimal CMake Configuration

```cmake
cmake_minimum_required(VERSION 3.13)
project(MyTests CXX)

# Force C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add GoogleTest as a subdirectory or find it after install
add_subdirectory(googletest)

add_executable(my_test test_main.cpp)

# Link with gtest_main or gmock_main depending on your test requirements
target_link_libraries(my_test PRIVATE gtest_main)

enable_testing()
add_test(NAME MyTest COMMAND my_test)
```

---

## 4. Troubleshooting Scenario: Linker Errors with Undefined Symbols

### Problem:

When building tests, you encounter errors such as:`undefined reference to gtest::InitGoogleTest...`

### Causes:

- GoogleTest libraries are not linked.
- Mixing static vs shared linking incorrectly.

### Resolution:

- Link with `gtest_main` or `gmock_main` if you are not supplying your own `main()`.
- If you provide your own `main()`, link with `gtest` or `gmock` only.
- Verify your build flags and include paths.

---

## 5. Common Pitfalls and How to Avoid Them

### 5.1 Forgetting to Link to GoogleMock or GoogleTest Libraries

Always link against the libraries matching your usage scenario. This ensures symbol resolution during linking.

### 5.2 Mismatched Runtime Libraries on Windows

Ensure that runtime library settings (`/MT` vs `/MD`) are consistent across your project and GoogleTest builds. Use CMake's `gtest_force_shared_crt` to align.

### 5.3 Using an Unsupported Compiler or Old Version

GoogleTest requires a modern compiler supporting C++17. Upgrade if you're seeing errors related to unsupported language features.

### 5.4 Missing pthread or Threading Support on UNIX-like Systems

Make sure your environment has pthreads installed. Use CMake to detect and link those correctly.

---

## 6. Additional Resources

- [System Requirements & Supported Platforms](/getting-started/gs-prerequisites-installation/gs-system-requirements)
- [Installing with CMake](/getting-started/gs-prerequisites-installation/gs-install-cmake)
- [Installing with Bazel](/getting-started/gs-prerequisites-installation/gs-install-bazel)
- [Setting Up and Running Your First Test](/guides/getting-started/setup-quickstart)
- [Troubleshooting Common Setup Issues](/getting-started/gs-validation-troubleshooting/gs-troubleshooting-common-issues) (this page)

<Tip>
If you encounter persistent setup or build problems, first verify your compiler and build system configuration alongside the recommended C++17 standard enforcement. Incrementally build and test minimal code snippets to isolate problems.
</Tip>

<Warning>
Avoid mixing incompatible versions of libraries or incorrect linkage types, as this often leads to brittle builds and hard-to-debug linker problems.
</Warning>

---

With these strategies and insights, you can quickly resolve common setup issues and focus on writing robust tests with GoogleTest and GoogleMock.
