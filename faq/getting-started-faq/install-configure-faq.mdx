---
title: "How do I install and configure GoogleTest and GoogleMock?"
description: "Learn about the recommended installation methods, supported platforms, and minimal setup steps necessary to get up and running with GoogleTest and GoogleMock. Provides orientation to official documentation, supported build systems, and first steps for Windows, macOS, and Linux users."
---

# How do I install and configure GoogleTest and GoogleMock?

Learn how to install and configure GoogleTest and GoogleMock on supported platforms, follow recommended build methods, and perform minimal setup to start writing and running tests with these frameworks. This guide orients you to official documentation, supported build systems, and first steps across Windows, macOS, and Linux.

---

## 1. Installation Overview

GoogleTest and GoogleMock are distributed together and support various modern C++ development environments. The most common and recommended installation method across Linux, macOS, and Windows is using **CMake**. Alternative integration options include Bazel and pkg-config (covered in the Integration Guides).

### Prerequisites
- A C++ environment supporting **C++17**
- A build system such as **CMake (3.14 or later)**
- On Linux/macOS: Make or Ninja
- On Windows: Visual Studio (2019 or later preferred)

For detailed platform and compiler requirements, see the [Supported Platforms & Build Systems documentation](overview/integration-ecosystem/supported-platforms).

### Source Code
Obtain the latest stable release from the official GitHub repository:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
googletest/
```

This repository includes both GoogleTest and GoogleMock sources.

---

## 2. Building with CMake

CMake is the recommended, flexible, and cross-platform build system.

### Standalone Build Steps

<Steps>
<Step title="Clone and Navigate">
Clone the repository and change directory:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>
<Step title="Create Build Directory">

Create a separate directory for the build files:

```bash
mkdir build && cd build
```

</Step>
<Step title="Generate Build Files with CMake">

Generate the build system files. By default this includes GoogleMock:

```bash
cmake ..
```

To build only GoogleTest (excluding GoogleMock), run:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

</Step>
<Step title="Build the Libraries">

On Unix-like systems:

```bash
make
```

On Windows, open the generated `.sln` file with Visual Studio and build.

</Step>
<Step title="Optional Install">

If you have administrative privileges, install the libraries and headers system-wide:

```bash
sudo make install
```

This installs them under `/usr/local/` by default.

</Step>
</Steps>

### Incorporating into Existing CMake Projects

You can integrate GoogleTest and GoogleMock into your projects via one of the following:

- Use `find_package(GTest REQUIRED)` if you have it installed.
- Add GoogleTest as a git submodule.
- Use CMake's [`FetchContent`](https://cmake.org/cmake/help/latest/module/FetchContent.html) to download dependencies during configuration:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/v1.17.0.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # To match MSVC runtime linkage
FetchContent_MakeAvailable(googletest)

add_executable(my_test my_test.cpp)
target_link_libraries(my_test gtest_main gmock)
add_test(NAME my_test COMMAND my_test)
```

This approach ensures consistent compiler and linker settings, avoiding common runtime mismatches especially on Windows.

---

## 3. Platform-Specific Notes

### Linux

- Ensure your compiler supports C++17.
- When building with pthread support, the CMake scripts detect and link pthread automatically.
- Use GNU Make or Ninja for building.

### macOS

- Xcode and its command-line tools provide the compiler and build tools.
- `cmake` generates Xcode projects (`.xcodeproj`) if requested.

### Windows

- Visual Studio (2019+) recommended.
- Use the CMake-generated `.sln` solution for building.
- **Important:** By default, Visual Studio uses dynamic CRT linkage, but GoogleTest links with static CRT, causing linker errors. Set the option `gtest_force_shared_crt` to `ON` to unify this linkage:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

---

## 4. Minimal Setup Example

### Writing a Basic Test

Create a file `example_test.cpp`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, AssertionTrue) {
  EXPECT_TRUE(true);
}
```

### Build and Run

Assuming you've built and installed GoogleTest, compile and link your test program:

```bash
# Using g++ example
g++ example_test.cpp -lgtest_main -lgtest -pthread -o example_test
./example_test
```

If the output shows your test passed, your installation and linking are successful.

### Using GoogleMock

Include GoogleMock headers and initialize GoogleMock:

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

If you are using the `gmock_main` library, it provides `main()` for you, so just link against it:

```bash
g++ example_test.cpp -lgmock_main -lgmock -lgtest -pthread -o example_test
./example_test
```

---

## 5. Configuration Tips

- Ensure the compiler flags specify C++17 or higher. In CMake, set:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- Confirm include directories point to GoogleTest headers.
- Link with the correct libraries: `gtest`, `gmock`, and optionally `gmock_main`.
- On Windows, ensure consistent runtime libraries between GoogleTest and your project.

---

## 6. Troubleshooting Common Installation Issues

<AccordionGroup title="Common Problems and Solutions">
<Accordion title="Linker Errors on Windows Related to Runtime Library Mismatch">

Cause: GoogleTest uses static runtime by default; project uses dynamic runtime.

Solution:
- When invoking CMake, set `-Dgtest_force_shared_crt=ON`.
- Rebuild GoogleTest and your project.

</Accordion>
<Accordion title="Cannot Find gtest or gmock Headers">

Cause: Include paths are missing or incorrect.

Solution:
- If installed system-wide, ensure `/usr/local/include` or chosen path is included.
- If using git submodules or embedded source, add the source directory to your include path.

</Accordion>
<Accordion title="Build Fails Due to Unsupported C++ Standard">

Cause: Compiler doesn't support C++17 or project is not configured to use it.

Solution:
- Upgrade compiler or set compiler flags to enable C++17 (e.g. `-std=c++17`).
- In CMake, use `set(CMAKE_CXX_STANDARD 17)`.

</Accordion>
<Accordion title="GoogleMock Not Found or Linker Cannot Find gmock Main">

Cause: GoogleMock not built or linked.

Solution:
- Ensure GoogleMock is enabled (
`cmake ..` without `-DBUILD_GMOCK=OFF`).
- Link your test executable against `gmock` and `gmock_main` libraries.

</Accordion>
</AccordionGroup>

---

## 7. Additional Resources and Next Steps

- For detailed build integration guidance, refer to [Integration with Build Systems](guides/advanced-scenarios/build-integration).
- To write your first test and learn about configuration basics, see [Your First Test: Quick Success](getting-started/core-setup/first-test).
- Visit the [Supported Platforms & Build Systems](overview/integration-ecosystem/supported-platforms) page for detailed environment matrices and compiler requirements.
- Explore the [Basic Configuration & Project Setup](getting-started/core-setup/configuration-basics) guide for linking and configuration best practices.
- For mocking capabilities setup, see [Introducing Mocking with GoogleMock](guides/getting-started/integrate-mocking).

---

**By following these installation and configuration steps, you will have a stable foundation to write, build, and run tests using GoogleTest and GoogleMock for your C++ projects efficiently across your supported platforms.**