---
title: "Installation and First Steps: Common Issues"
description: "Provides practical solutions to frequently encountered problems during installation or very first runs, such as missing dependencies, build errors, or linking failures. It directs users to primary resources and covers essential configuration tips."
---

# Installation and First Steps: Common Issues

This FAQ page addresses the practical problems you may encounter while installing GoogleTest and GoogleMock or running your very first tests. It covers missing dependencies, build errors, linking failures, and important configuration tips to ensure a smooth initial experience.

---

## Frequently Asked Questions

### 1. Why do I get build errors related to missing headers or libraries?

GoogleTest and GoogleMock rely on C++17 standard and require proper compiler support and build setup. Common causes of missing headers or unresolved symbols include:

- Not including the correct GoogleTest or GoogleMock headers in your source files.
- Failing to link with the GoogleTest and GoogleMock libraries.
- Using a compiler or standard library version older than C++17.
- Missing or misconfigured build tools like CMake or Bazel.

**How to fix:**

- Make sure you include `<gtest/gtest.h>` and `<gmock/gmock.h>` as needed.
- Confirm your build system links to `gtest` and `gmock` libraries.
- Use a C++17 compatible compiler such as GCC 7+, Clang 5+, or MSVC 2017+.
- Follow the [Installation Guide](/getting-started/setup-and-installation/installation-guide) precisely.

### 2. I experience linking errors referencing GoogleMock symbols, what should I check?

Linking errors typically indicate missing or unordered linkage of GoogleMock libraries.

**Checklist:**

- Ensure `gmock` is linked after `gtest` as `gmock` depends on `gtest`.
- If your build uses Bazel, confirm your `BUILD` files specify dependencies and `testonly` correctly.
- When using CMake, include `.cmake` files properly and link `gmock` to your test targets.
- Watch out for multiple conflicting versions of GoogleTest in your project.

Refer to the [Integrating with Your Build & CI](/overview/architecture-features-integration/integration-scenarios) guide for detailed build system integration examples.

### 3. The test framework does not discover or run any tests. What might be wrong?

GoogleTest discovers tests via static registration macros at compile time, so possible causes:

- Forgetting to call `::testing::InitGoogleTest(&argc, argv);` in your `main` function.
- Not calling `RUN_ALL_TESTS()`.
- Test source files not being compiled or linked into the test executable.
- Using build flags that disable test registration (like `GTEST_HAS_STREAM_REDIRECTION` not enabled).

Example main that works:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

See the [Running Tests](/getting-started/first-test-and-validation/running-tests) guide for more on test discovery and execution.

### 4. I get warnings about uninteresting mock function calls. How do I suppress these?

These warnings appear when a mock method is called but the test has no explicit expectations for it (`EXPECT_CALL`). By default, GoogleMock treats such calls as "uninteresting" and issues a warning.

**Solutions:**

- Use `NiceMock<YourMockType>` to silence warnings on uninteresting calls.
- Add generic expectations like `EXPECT_CALL(mock_obj, Method(_)).Times(AnyNumber());` to explicitly allow calls.
- Adjust the verbosity of GoogleMock using the `--gmock_verbose=` flag with values `info`, `warning` (default), or `error`.

Avoid suppressing warnings by blindly adding `EXPECT_CALL` statements without clear intent to keep tests maintainable and focused.

### 5. How do I stop the real method from being called when mocking a method?

To mock a method, the original method must be virtual, and your mock class must override it with `MOCK_METHOD`.

Make sure:

- The original method is declared `virtual` in the base class.
- Your mock class uses `MOCK_METHOD` macros properly. For example:

```cpp
class MockInterface : public Interface {
 public:
  MOCK_METHOD(void, DoSomething, (int param), (override));
};
```

If the original method is not virtual, GoogleMock cannot intercept calls.

### 6. I have complex types with commas in templates in my mock methods, why does `MOCK_METHOD` fail to compile?

`MOCK_METHOD` parses macro parameters and commas inside argument templates confuse it. Two solutions:

- Wrap return type or parameters containing commas in extra parentheses:

```cpp
MOCK_METHOD((std::pair<int, int>), GetPair, ());
MOCK_METHOD(bool, CheckMap, ((std::map<int, double>), bool));
```

- Use `using` typedefs to hide commas:

```cpp
using IntPair = std::pair<int, int>;
MOCK_METHOD(IntPair, GetPair, ());
```

See "Creating Mock Classes" in the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#Creating-Mock-Classes) for details.

### 7. What is the difference between `ON_CALL` and `EXPECT_CALL`?

- `ON_CALL` defines default behavior for mock methods without setting expectations on call count or order. Calls matching an `ON_CALL` will behave accordingly but are not verified.
- `EXPECT_CALL` sets expectations on how many times and with which arguments a method will be called. If expectations are violated, test failures occur.

For typical use, use `ON_CALL` to specify default behavior in test setup, and `EXPECT_CALL` to verify calls only when needed.

Read more in "Setting Expectations" section in the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#Setting-Expectations).

### 8. I want to verify and clear expectations manually. How can I do this?

Use:

- `::testing::Mock::VerifyAndClearExpectations(&mock_object);` to verify expectations without clearing defaults.
- `::testing::Mock::VerifyAndClear(&mock_object);` to verify expectations and clear all default actions.

These calls return a bool to indicate success. They are useful when mocks are heap allocated and lifetime management is unclear.

### 9. My test leaks mocks and does not verify expectations.

GoogleMock verifies expectations when mock objects are destroyed. If mocks are leaked (e.g., allocated on heap and never deleted), verification never happens.

**Tips:**

- Prefer stack allocation for mock objects.
- If heap allocation is unavoidable, ensure deletion after test or call `Mock::VerifyAndClearExpectations` manually.
- You can declare a mock to be leak-allowed by `Mock::AllowLeak(mock_object)`, but use this carefully.

---

## Common Troubleshooting Tips

### Build and Linking Problems

- Check compiler version and C++17 support.
- Make sure to link `gtest` and `gmock` libraries explicitly.
- Use correct include paths for header files.
- Avoid mixing different GoogleTest versions.

### Test Discovery Issues

- Verify that test macros `TEST`, `TEST_F`, `TEST_P` are properly visible.
- Ensure your executable calls `InitGoogleTest()` and `RUN_ALL_TESTS()`.
- Validate that source files with tests are compiled and linked.

### Mocking Behavior

- Confirm methods to be mocked are virtual.
- Use `MOCK_METHOD` in the `public` section of your mock class.
- For overloaded methods, specify distinct matchers or use `Const()` helper to disambiguate.
- Handle move-only types correctly with lambdas or actions.

### Uninteresting Calls Warnings

- Use `NiceMock` to suppress warnings.
- Define wildcard expectations with `EXPECT_CALL(mock, Func(_)).Times(AnyNumber());`
- Adjust verbosity with `--gmock_verbose` flag.

### Runtime Failures and Unexpected Calls

- Examine error messages to identify mismatched arguments.
- Run tests with `--gmock_verbose=info` to see detailed call traces and expectation matches.
- Use sequences (`InSequence`) to enforce call order if needed.

---

## Useful Links

- [GoogleTest Installation Guide](/getting-started/setup-and-installation/installation-guide)
- [gMock Cookbook â€” Creating Mock Classes and Setting Expectations](https://google.github.io/googletest/gmock_cook_book.html)
- [Mocking Basics Guide](/guides/real-world-workflows/mocking-basics)
- [Running Tests Guide](/getting-started/first-test-and-validation/running-tests)
- [Uninteresting vs Unexpected Calls Explanation](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected)
- [Common Errors FAQ](/faq/troubleshooting-and-optimization/common-errors)

---

<Note>
If you encounter persistent or unusual issues, consider reviewing your build environment, verifying compiler flags, and consulting the community resources linked in the documentation.
</Note>

---

## Summary of Best Practices

- Always specify expectations (`EXPECT_CALL`) *before* any mock function calls.
- Use `ON_CALL` to set default behavior without verification.
- Prefer `NiceMock` for general mock objects to reduce noisy warnings.
- When dealing with complex argument types, wrap template types with parentheses or use type aliases.
- For mock methods with move-only parameters, use lambdas to handle behavior.
- Make sure mock classes have virtual destructors to avoid memory issues.
- Use `Mock::VerifyAndClearExpectations()` if your mocks live beyond test scope.
- Use `--gmock_verbose=info` to debug failing expectations.

---

## Troubleshooting Example: Uninteresting Call Warning

```cpp
using ::testing::NiceMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (int), ());
};

TEST(MyTest, SuppressUninterestingCalls) {
  NiceMock<MockFoo> mock;

  // We expect DoSomething to be called with 42.
  EXPECT_CALL(mock, DoSomething(42));

  // Calling DoSomething with an argument we didn't expect results in no warning
  // because NiceMock suppresses it.
  mock.DoSomething(0);  // No warning here.
  mock.DoSomething(42); // Matches expectation.
}
```

This shows how to prevent warnings when calling mock methods not explicitly expected.

---

By following these guidelines, you'll avoid the most common pitfalls during installation and early usage of GoogleTest and GoogleMock.