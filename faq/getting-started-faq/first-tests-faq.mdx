---
title: "Writing and Running Your First Tests"
description: "Answers to early questions about structuring tests, naming conventions, and running tests using GoogleTest and GoogleMock, helping users quickly see their first test run."
---

# Writing and Running Your First Tests

This page addresses common early questions about how to effectively structure, name, and run tests with GoogleTest and GoogleMock. Its goal is to help you see your first test run successfully, guiding you through practical steps and best practices to gain confidence quickly.

---

## 1. How Do I Structure My Tests?

Writing your first test means deciding how to organize the test code so it’s clear, maintainable, and meaningful.

### Start With Simple TEST or TEST_F

- Use `TEST(TestSuiteName, TestName)` for stateless or very simple tests.
- Use `TEST_F(TestFixtureName, TestName)` when you need shared setup/teardown logic or shared objects across multiple tests.

For example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

class QueueTest : public ::testing::Test {
 protected:
  void SetUp() override {
    q_.Enqueue(1);
  }
  Queue<int> q_;
};

TEST_F(QueueTest, IsNotEmptyAfterEnqueue) {
  EXPECT_NE(q_.size(), 0);
}
```

Use test suites and fixtures to group related tests and share setup, making your tests easier to read and maintain.

### Name Tests Clearly and Consistently

- Use descriptive TestSuite and Test names that reflect the feature or behavior under test.
- Follow consistent naming conventions aligned with C++ style guides (CamelCase or PascalCase).
- Avoid underscores in test names; GoogleTest recommends using valid C++ identifiers.

This helps you and your team quickly identify what each test verifies.

---

## 2. How Should I Name My Test Cases and Tests?

Names communicate intent. Make them unambiguous and meaningful:

| Component    | Guidance |
|--------------|----------|
| Test Suites (`TestSuiteName`) | Reflect functionality, class, or module, e.g., `FactorialTest`. |
| Tests (`TestName`)             | Express specific behavior or scenario, e.g., `HandlesZeroInput`. |

Example:
```cpp
TEST(FactorialTest, HandlesNegativeInput) {
  EXPECT_EQ(Factorial(-5), 1);  // assuming factorial returns 1 for negative inputs
}
```

Using clear test names makes test reports self-explanatory.

---

## 3. How Do I Write a Basic GoogleTest?

Follow this workflow to write and run your first test:

<Steps>
<Step title="Include the GoogleTest Header">
Import `gtest/gtest.h` to access GoogleTest.
</Step>
<Step title="Define a Test">
Use the `TEST()` macro with a test suite and test name.
</Step>
<Step title="Write Assertions">
Use `EXPECT_*` or `ASSERT_*` macros to check your tested code.
</Step>
<Step title="Run Tests">
Use `RUN_ALL_TESTS()` in your main or link with `gtest_main` to run tests.
</Step>
</Steps>

Example:

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Upon running this program, you should see your test executed, and GoogleTest will report success or detailed failure.

---

## 4. How Do I Write a Basic GoogleMock?

GoogleMock allows you to create mock classes to verify interactions in your code.

### Steps to Create a Mock:

1. Include the `gmock/gmock.h` header.
2. Derive a mock class from the interface or abstract base class.
3. Use `MOCK_METHOD` macros to mock virtual methods.
4. Instantiate the mock in your test.
5. Set expectations with `EXPECT_CALL`.
6. Exercise the code under test.

Example:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class Turtle {
 public:
  virtual ~Turtle() = default;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};

TEST(PainterTest, DrawsCircle) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(1);
  EXPECT_CALL(turtle, Forward(100)).Times(AtLeast(1));

  // Painter uses the Turtle interface.
  Painter painter(&turtle);
  painter.DrawCircle(0, 0, 100);
}
```

This test verifies that `PenDown()` is called once and `Forward()` is called at least once during drawing.

---

## 5. How Do I Run My Tests?

- If you linked with `gtest_main`, you only need to call your test binary. It runs all tests.
- If not, provide your own `main()` that initializes GoogleTest and calls `RUN_ALL_TESTS()`.

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Tests discovered by their `TEST` or `TEST_F` macro registrations will run automatically.
- Use command-line flags to filter or list tests, e.g., `--gtest_filter=FactorialTest.*`.

---

## 6. What Happens When a Test Fails?

- GoogleTest reports the source file, line, and reason for failure.
- Assertions print expected and actual values to help diagnose.
- Mock verification failures show which expected call did not happen or was incorrect.

For example, a failing expectation `EXPECT_CALL(turtle, Forward(100))` that never occurs will print:

```
path/to/test.cc:42: Failure
Expected mock function call not satisfied:
    Forward(100)
... additional details ...
```

This immediate feedback guides your debugging.

---

## 7. Tips and Best Practices for Early Testing

- **Set Expectations Before Exercising Code**: Setup your mock expectations before calling code under test.
- **Use Wildcard Matcher `_` to Relax Uninteresting Arguments**: Unless a specific argument value matters, use `_` to allow any.
- **Avoid Over-specifying Tests**: Write tests that verify behavior, not implementation details.
- **Use `RetiresOnSaturation()` for Sequential Expectations**: To avoid sticky expectations blocking later ones.
- **Run Tests Frequently**: Validate incrementally.
- **Name Tests Meaningfully**: Makes your test suite easier to navigate and maintain.

---

## 8. Troubleshooting Common Issues When Running Your First Tests

<AccordionGroup title="Common Problems and Solutions">
<Accordion title="My test does not run or is not discovered">
- Make sure the test source files are compiled and linked correctly.
- Tests are registered via `TEST` or `TEST_F` macros; ensure these are not disabled by preprocessor macros.
- Call `InitGoogleTest` in `main()` before `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Mock methods call to real methods">
- Mocked method must be virtual.
- Use `MOCK_METHOD` in the `public:` section of the mock class.
- If the real method is called, check that you're calling the mock, not the real object.
</Accordion>
<Accordion title="Unexpected mock function call warnings/errors">
- Use `EXPECT_CALL` to specify expected method calls.
- To suppress warnings on uninteresting calls, use `NiceMock<MockClass>`.
- Check if the number of calls matches the expectation cardinality.
</Accordion>
<Accordion title="Compilation errors with MOCK_METHOD">
- Use parentheses around argument types containing commas (e.g., `MOCK_METHOD((std::pair<int,int>), Foo, (), (override));`).
- Ensure correct syntax and specifiers (const, override, noexcept).
</Accordion>
</AccordionGroup>

---

## 9. Where to Go Next

- After running your first tests, explore writing assertions with varying complexity in the [Writing and Using Assertions](../googletest-guides/core-workflows/writing-assertions.md) guide.
- Learn about mocking basics in detail in [Introduction to Mocking with GoogleMock](../googletest-guides/core-workflows/mocking-basics.md).
- Dive into configuring your project for robust test integration in [Configuring Your Project](../../getting-started/configuration-first-run-validation/configuration-basic-setup.md).
- For build system integration, review [Integrating with Build Systems (CMake, Bazel, Others)](../googletest-guides/integration-and-realworld/build-integration.md).
- Find answers to early common issues in the [Troubleshooting Common Setup Errors](../../getting-started/troubleshooting-common-issues/troubleshooting-setup-errors.md) page.

---

## References & Useful Links

- [GoogleTest Primer](../../docs/primer.md) — Fundamentals of test writing
- [gMock for Dummies](../../docs/gmock_for_dummies.md) — Intro to mocking
- [Mocking Reference](../../docs/reference/mocking.md) — Detailed API for mocks
- [Matchers Reference](../../api_reference/matchers_assertions/builtin_matchers.md) — Argument matchers
- [Assertion Macros](../../api_reference/matchers_assertions/assertion_macros.md) — Assertion usage
- [gMock Cookbook](../../docs/gmock_cook_book.md) — Recipes and best practices
- [Troubleshooting Setup Errors](../../getting-started/troubleshooting-common-issues/troubleshooting-setup-errors.md) — Solve common installation/setup problems

---

<Tip>
For your first test, start with a simple `TEST` macro and basic `EXPECT_EQ` assertions. Then incrementally add mocks and expectations to verify interactions as your confidence grows.
</Tip>

<Note>
Always set mock expectations before executing your code under test to avoid undefined behaviors and to ensure proper failure diagnostics.
</Note>
