---
title: "Installation & Compatibility Questions"
description: "Provides solutions to installation challenges, supported compilers and platforms, C++17 requirements, and step-by-step compatibility checks. Ensures users can confidently set up GoogleTest on their preferred systems."
---

# Installation & Compatibility Questions

This section provides clear guidance to successfully install GoogleTest, verify your environment's compatibility, and address common challenges related to compiler, platform, and C++ standard requirements. Follow these instructions to ensure your testing environment is correctly set up and ready to run GoogleTest smoothly.

---

## Frequently Asked Questions

### 1. How do I build GoogleTest using CMake?

GoogleTest provides a cross-platform CMake build script to make compilation straightforward. Here's a typical flow for building GoogleTest as a standalone project:

```bash
# Clone the repository with the desired tag/version
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build
cd build

# Generate native build files, including GoogleMock by default
cmake ..

# If you want only GoogleTest (no GoogleMock):
cmake .. -DBUILD_GMOCK=OFF

# On Unix-like systems
make

# If you have admin rights, install to default location (/usr/local/)
sudo make install
```

On Windows, after `cmake ..`, you will get a Visual Studio solution file (`gtest.sln`) to open and build in Visual Studio.

On macOS, an Xcode project file (`.xcodeproj`) will be generated.

### 2. Can I incorporate GoogleTest into my existing CMake project?

Yes, you have two flexible options:

- **Import Installed Libraries:** After installing GoogleTest system-wide, use `find_package(GTest CONFIG REQUIRED)` and link with `GTest::gtest` or `GTest::gmock`.

- **Build as a Subdirectory:** Add GoogleTest source to your project and include it using `add_subdirectory()`. This ensures synchronized compiler and linker settings, avoiding compatibility issues, especially on Windows.

Alternatively, you can download GoogleTest during your build's configuration step using CMake's `FetchContent` as shown:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Visual Studio runtime compatibility
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

**Note:** This method requires CMake 3.14 or newer.

### 3. What C++ standard do I need to build GoogleTest?

GoogleTest requires a C++17 compatible environment. Make sure your compiler supports C++17.

You can enforce this in your `CMakeLists.txt` with:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

If you are primarily working in C and cannot set this globally, pass the appropriate compiler flags manually (e.g., `-std=c++17`).

### 4. Which compilers and platforms are supported?

GoogleTest supports recent versions of major C++ compilers across popular platforms, including:

- **Platforms:** Linux, Windows (Desktop and MinGW), macOS
- **Compilers:** GCC, Clang, MSVC, Intel, SunPro, IBM Visual Age, among others

See the [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) matrix for an up-to-date list.

If you are targeting less common platforms, verify compatibility by testing GoogleTest or consult community support.

### 5. How do I check if pthread support is enabled?

GoogleTest is thread-safe where the pthread library is available. It detects pthread support automatically but you can force it via compiler flags:

```bash
-DGTEST_HAS_PTHREAD=1  # Force on
-DGTEST_HAS_PTHREAD=0  # Force off
```

If using your own build scripts, ensure you link with the pthread library to avoid link errors.

### 6. What's the difference between building GoogleTest as static vs shared libraries on Windows?

By default, GoogleTest links the C runtime statically, which can cause conflicts if your application links it dynamically. You can resolve this by setting:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

in your CMake project. This makes GoogleTest link against the dynamic runtime, matching most Visual Studio projects and preventing linker errors.

### 7. How can I resolve macro name clashes with GoogleTest?

If some GoogleTest macros conflict with other libraries, you can prefix GoogleTest macros specially via compiler flags. For example, to rename the `TEST` macro:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

After this, use `GTEST_TEST` instead of `TEST` in your code.

Supported macros that can be renamed include many assertion macros like `ASSERT_EQ`, `EXPECT_TRUE`, and test macros like `TEST`.

---

## Common Issues & Troubleshooting

### Build Errors with Visual Studio Runtime Mismatch

**Symptom:** Linker error mentioning mismatch for `RuntimeLibrary` flag.

**Cause:** GoogleTest links CRT statically but your project links it dynamically.

**Solution:** Set `gtest_force_shared_crt` to `ON` in your CMake build to align runtimes:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

Rebuild GoogleTest and your project.

### Compiler Not Supporting C++17

**Symptom:** Compiler errors referencing unknown C++17 features or version errors.

**Cause:** Compiler version too old.

**Solution:** Upgrade your compiler to a version that supports C++17. Refer to your compiler's documentation for compatibility.

### Missing pthread Library on Unix Systems

**Symptom:** Link-time errors related to pthread symbols or undefined references.

**Cause:** pthread library not linked.

**Solution:** Ensure your build system links to pthread explicitly if not using CMake.

Example for gcc/g++:

```bash
g++ ... -pthread
```

CMake usually handles this automatically with `find_package(Threads)`.

### Inability to Find GoogleTest Headers When Integrating

**Symptom:** Compiler errors `file not found` or `cannot open source file gtest/gtest.h`.

**Cause:** Include paths not correctly set.

**Solution:** Configure your project to include the GoogleTest headers and link to its libraries.

If installed system-wide, you can use `find_package(GTest REQUIRED)` in CMake and link with `GTest::gtest`.

If using source-copy or subdirectory builds, add appropriate `target_include_directories` and `target_link_libraries`.

### GoogleTest Tests Not Running or Reporting Correctly

**Symptom:** Tests do not run, or output shows zero tests run.

**Cause:** `InitGoogleTest(&argc, argv)` not called before `RUN_ALL_TESTS()`.

**Solution:** Ensure your `main()` function calls `testing::InitGoogleTest(&argc, argv);` before the test runner.

### Installation Permission Issues

**Symptom:** `make install` or equivalent fails due to permission denied.

**Solution:** Run the install command with elevated privileges, e.g., `sudo make install`, or adjust your install prefix to a user-writable directory.

### CMake Version Too Low for FetchContent Commands

**Symptom:** Errors about unknown CMake commands like `FetchContent_Declare`.

**Cause:** CMake version older than 3.14.

**Solution:** Upgrade CMake to version 3.14 or newer.

---

## Step-by-Step Compatibility Check

<Steps>
<Step title="Verify Compiler and C++17 Support">
Ensure your compiler supports C++17 by checking the version.
For GCC, use `gcc --version`; for MSVC, check Visual Studio version; for Clang, use `clang --version`.
</Step>
<Step title="Check Operating System Compatibility">
Confirm your OS is one of: Linux, Windows Desktop, macOS.
Refer to the [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) page to verify compatibility.
</Step>
<Step title="Confirm Pthread Support (on Unix-like systems)">
If running on Linux or macOS, ensure pthread library is available.
If using CMake, `find_package(Threads)` manages this for you.
</Step>
<Step title="Download and Build GoogleTest">
Clone GoogleTest and initialize a build directory.
Run CMake to generate build files.
Use `make` or build your generated project files.
</Step>
<Step title="Run Sample GoogleTest Binaries">
Execute any sample test binaries to confirm GoogleTest runs without errors.
</Step>
<Step title="Integrate into Your Project">
Use either installed GoogleTest libraries via `find_package` or incorporate sources via `add_subdirectory()`.
Make sure to link against `gtest` or `gtest_main` as needed.
</Step>
</Steps>

---

## Additional Tips and Best Practices

- Use `gtest_main` library if you do not want to write your own main function; it implements a suitable `main()` with required initialization.
- When using Visual Studio, match the C runtime linkage (dynamic/static) with GoogleTest to avoid linker errors.
- Define `GTEST_HAS_PTHREAD` explicitly only if automatic detection fails to detect pthread support correctly.
- Use compiler flags like `-DGTEST_DONT_DEFINE_TEST=1` to avoid macro clashes when integrating with other frameworks.
- Regularly update GoogleTest source in your projects to benefit from bug fixes and new features.

---

## Related Documentation

- [Building and Installing GoogleTest with CMake](https://github.com/google/googletest/blob/main/googletest/README.md#build-with-cmake)
- [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Validation and Troubleshooting Checklist](https://github.com/google/googletest/blob/main/docs/validation-troubleshooting.md)
- [Integration with CMake Projects](https://github.com/google/googletest/blob/main/docs/installation-cmake.md)

---

For persistent installation issues or platform-specific problems, consider reaching out via the official GoogleTest [GitHub repository](https://github.com/google/googletest) or community forums.


---

*This documentation ensures you have the right environment to build, install, and integrate GoogleTest confidently, empowering you to write reliable and maintainable tests across platforms.*