---
title: "Installation & Compatibility"
description: "Frequently asked questions on building and installing GoogleTest/GoogleMock, supported compilers, minimum C++ versions, and platform-specific notes. Provides targeted advice for common configuration pitfalls."
---

# Installation & Compatibility FAQ

This page addresses the most common questions and concerns users encounter when building, installing, and verifying GoogleTest and GoogleMock's compatibility with their system environments. Whether you are setting up GoogleTest in a standalone project or integrating it into an existing build system, these FAQs provide targeted guidance to ensure smooth compilation, linking, and runtime operation.

---

## 1. Supported Platforms and Compiler Requirements

### What platforms does GoogleTest support?
GoogleTest is designed to work cross-platform, supporting Linux, Windows, and macOS with a wide array of compilers that meet the minimum C++ standard.

To see the full list of supported compilers, platforms, and tool versions, consult Google’s
[Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support#c_language_standard) and the detailed
[supported platform matrix](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).

### What is the minimum C++ standard required to build GoogleTest?
Starting with release 1.17.x, GoogleTest requires **C++17** or later. Ensure your compiler supports this standard and is configured accordingly.

If you use CMake, set the C++ standard explicitly in your project with:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

For other build systems, add compiler flags such as `-std=c++17`.

### Does GoogleTest require any special system dependencies?
No mandatory dependencies are required to build GoogleTest. However, to enable multi-threaded tests and internal thread safety, GoogleTest leverages the pthread library on POSIX systems. CMake’s build scripts automatically detect pthread availability and configure appropriately.

If pthread detection fails, you can force pthread usage via compiler flags:

```bash
-DGTEST_HAS_PTHREAD=1
```

or disable it with:

```bash
-DGTEST_HAS_PTHREAD=0
```

---

## 2. Building GoogleTest

### How do I build GoogleTest using CMake as a standalone project?
Follow these steps:

<Steps>
<Step title="Clone the Repository">
Run:
```
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>
<Step title="Create a Build Directory">
```
mkdir build
cd build
```
</Step>
<Step title="Generate Build Files with CMake">
```
cmake ..
```
Note: by default, this includes GoogleMock.
If you want only GoogleTest, use:
```
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the Project">
Run:
```
make
```
(On Windows, build with Visual Studio; on macOS, use Xcode projects generated by CMake.)
</Step>
<Step title="Optional: Install GoogleTest">
If you have admin rights and want to install GoogleTest system-wide, run:
```
sudo make install
```
By default, this installs to `/usr/local/`.
</Step>
</Steps>

### How do I integrate GoogleTest into an existing CMake project?
The recommended approach is one of the following:

- Use `find_package(GTest CONFIG REQUIRED)` if GoogleTest is already installed, and link to imported targets `GTest::gtest` and `GTest::gmock`.

- Incorporate GoogleTest as a subdirectory using CMake's `add_subdirectory()` with the source code included in your project or fetched with `FetchContent`. This ensures consistent compiler and linker settings.

Example using FetchContent:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Visual Studio runtime
FetchContent_MakeAvailable(googletest)

add_executable(my_test my_test.cpp)
target_link_libraries(my_test gtest_main)
add_test(NAME my_test COMMAND my_test)
```

Note: This method requires CMake 3.14 or higher.

### How do I build and link GoogleTest as a shared library?
GoogleTest is mostly used as a static library for simplicity. But to build it as a shared library (DLL on Windows), add the compile definition:

```bash
-DGTEST_CREATE_SHARED_LIBRARY=1
```

and configure your linker to produce a shared library.

When compiling your test programs to link to the shared GoogleTest library, use:

```bash
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

This ensures proper symbol visibility.

---

## 3. Common Build and Linking Issues

### I get runtime errors or mismatches on Windows related to runtime libraries. What should I do?
GoogleTest static libraries default to linking the C runtime statically, which can cause conflicts if your project links it dynamically.

To fix this, enable the option to link the runtime dynamically by setting `gtest_force_shared_crt` in CMake:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

This aligns GoogleTest’s runtime linkage with your project.

### How do I avoid macro name clashes with GoogleTest’s assertion macros?
GoogleTest provides the ability to rename assertion macros to avoid conflicts. Pass compiler flags like:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

This renames `TEST` to `GTEST_TEST` and similarly for other macros:

- `ASSERT_EQ` → `GTEST_ASSERT_EQ`
- `EXPECT_TRUE` → `GTEST_EXPECT_TRUE`

Use the renamed macros explicitly if conflicts arise.

### What if the pthread library is missing or causing linkage errors on my system?
If pthread detection is incorrect, set the compiler flag explicitly:

- To force-enable pthread support: `-DGTEST_HAS_PTHREAD=1`
- To disable pthread support: `-DGTEST_HAS_PTHREAD=0`

Also ensure your linker includes `-lpthread` when manually compiling without CMake.

---

## 4. Configuration and Environment

### Can I tweak GoogleTest’s feature flags or behavior?
Yes, GoogleTest’s behavior can be controlled at compile time using macros defined on the compiler command line. These flags generally have the prefix `GTEST_`.

For example:

- `-DGTEST_HAS_PTHREAD=1`
- `-DGTEST_CREATE_SHARED_LIBRARY=1`
- `-DGTEST_DONT_DEFINE_TEST=1`

Refer to [gtest-port.h](https://github.com/google/googletest/blob/main/googletest/include/gtest/internal/gtest-port.h) for a full list of macros to fine-tune features.

### What build flags does GoogleTest use by default?
GoogleTest’s CMake build scripts set a range of compiler and linker flags aimed at strict warning levels, consistency, and platform compatibility. These include:

- C++17 standard requirement
- Warning levels elevated (e.g., `/W4` for MSVC)
- Exceptions enabled or disabled according to project
- Runtime linkage adjustments on Windows (static vs dynamic CRT)

While these are generally suitable for most users, you may customize flags as needed in your own build system.

---

## 5. Verifying Installation and Running Tests

### How do I verify GoogleTest is installed and working correctly?
After building and linking GoogleTest into your project, create a simple test:

```c++
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run your test executable. If it passes and reports test run successes, your setup is functional.

### What is the difference between linking with `gtest` and `gtest_main`?
- `gtest` provides the testing framework but requires you to write your own `main()` function.
- `gtest_main` provides a default implementation of `main()` that initializes GoogleTest and runs all tests.

Link with `gtest_main` to avoid writing the boilerplate main function unless you need custom test initialization.

---

## 6. Additional Notes and Best Practices

### Should I worry about thread safety or multi-threaded tests?
GoogleTest is thread-safe on systems with pthreads support. If enabled, multi-threaded tests can be safely written. On systems without pthreads (like Windows), some thread safety features may be limited.

### How do I keep my GoogleTest version up to date?
GoogleTest is actively maintained. For compatibility, always review the minimum C++ and platform requirements before upgrading. Use git tags or releases to pick stable versions.

### Where do I find authoritative documentation?
Official GoogleTest documentation is published on GitHub Pages:

https://google.github.io/googletest/

This includes tutorials, primer guides, API references, and advanced topics.

---

## 7. Troubleshooting Tips

<AccordionGroup title="Common Build and Install Issues">  
<Accordion title="Linker errors related to missing pthread symbols">
If you see undefined references to pthread functions on Linux, ensure your linker includes `-lpthread`. Using the included CMake scripts handles this automatically. If building manually, add `-pthread` to both compiler and linker flags.
</Accordion>  
<Accordion title="Compiler errors due to unsupported C++ version">
Verify your compiler supports at least C++17. Update your compiler if necessary and explicitly specify the standard flag (e.g., `-std=c++17` for GCC/Clang).
</Accordion>  
<Accordion title="Runtime mismatch errors on Windows">
Enable `gtest_force_shared_crt` in CMake to align GoogleTest runtime with your project. Avoid mixing static and dynamic runtimes.
</Accordion>  
<Accordion title="Build failures due to macro redefinitions or clashes">
Use `-DGTEST_DONT_DEFINE_<MACRO>=1` to rename conflicting macros provided by GoogleTest.
</Accordion>
</AccordionGroup>

---

## 8. Getting Help and Further Resources

- Refer to the [GoogleTest Primer](https://google.github.io/googletest/primer.html) for guided introduction to test writing.
- Review [Installation & Setup Guides](../getting-started/prerequisites-installation/installation-cmake-bazel.md) for practical instructions.
- Visit the project repository and issue tracker at https://github.com/google/googletest for community support and bug reports.
- Explore the official [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md) for extended questions beyond installation.

---

This FAQ is an essential resource to quickly get your GoogleTest environment running reliably and avoid common pitfalls across platforms and compilers.


---

# Code and Build Diagram (Simplified Build Flow)
```mermaid
flowchart TD
  A[Clone googletest repository] --> B[Create build directory]
  B --> C{Configure with CMake}
  C -->|Default (build gtest & gmock)| D[Generate build files with gtest & gmock]
  C -->|BUILD_GMOCK=OFF| E[Generate build files for gtest only]
  D & E --> F[Run Build (make/Visual Studio/Xcode)]
  F --> G[Run tests with RUN_ALL_TESTS()]
  F --> H[Optional: Install (sudo make install)]
  style A fill:#cce5ff,stroke:#004085,stroke-width:1px
  style G fill:#d4edda,stroke:#155724,stroke-width:1px
  style H fill:#fff3cd,stroke:#856404,stroke-width:1px
```

---

# Example Compiler Flag Summary for CMake Build

```cmake
cmake_minimum_required(VERSION 3.16)
project(googletest-distribution LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

option(BUILD_GMOCK "Builds the googlemock subproject" ON)
option(INSTALL_GTEST "Enable installation of googletest." ON)

# Optional: force dynamic CRT on Windows
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

if (BUILD_GMOCK)
  add_subdirectory(googlemock)
else()
  add_subdirectory(googletest)
endif()
```

---

# Frequently Used Compiler Flags to Pass Manually

- `-DGTEST_HAS_PTHREAD=1` or `0` — Force pthread usage support.
- `-DGTEST_CREATE_SHARED_LIBRARY=1` — Build GoogleTest as a shared library.
- `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` — Compile test code to link to shared GoogleTest.
- `-DGTEST_DONT_DEFINE_TEST=1` — Rename TEST macro to avoid conflicts.

---

# Useful Links

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest Documentation Home](https://google.github.io/googletest/)
- [Supported Platform Matrix (Google)](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [GoogleTest User Guide on CMake](googletest/README.md)
- [GoogleMock README](googlemock/README.md)
- [GoogleTest Issue Tracker](https://github.com/google/googletest/issues)

---

# Summary
This Installation & Compatibility FAQ empowers users to confidently install and build GoogleTest and GoogleMock across supported platforms, clarifies compiler and build system requirements, provides actionable solutions to common build and runtime issues, and offers best practices for environment configuration. The guide also links to authoritative sources for deeper understanding and community support.