---
title: "How do I write and run my first test?"
description: "Walks through creating your first test cases and test suites, using basic assertions and understanding test discovery. Guidance to help new users get up and running quickly with concrete examples."
---

# How do I write and run my first test?

This guide will walk you through the essential steps to create your first test cases and test suites in GoogleTest. It introduces the basic syntax, how to write assertions to verify behavior, and explains how tests are discovered and run. You'll find clear instructions and examples designed for new users to get started effectively.

---

## 1. Writing Your First Test

GoogleTest allows you to define tests using simple macros that group test logic clearly and concisely.

### Basic Test Syntax

Use the `TEST()` macro to create an individual test. This macro takes two arguments:

- **Test Suite Name**: A group name for logically related tests.
- **Test Name**: The name of the individual test within the test suite.

Both must be valid C++ identifiers and should **not** contain underscores (`_`) to avoid naming conflicts.

```cpp
TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);  // Check if 1 equals 1
  EXPECT_TRUE(true); // Check a boolean condition
}
```

### Naming Guidelines

- Avoid underscores in test and suite names as they are reserved for special internal use.
- Make names descriptive and reflect the tested behavior.

<Note>
Test names generate classes with concatenated names internally. Having underscores in names can cause naming collisions or conflicts with reserved identifiers.
</Note>

---

## 2. Using Assertions

Assertions are the core of tests. They check that conditions are met.

### Assertion Types

- **EXPECT_***: Non-fatal assertions that log failures but continue the test.
- **ASSERT_***: Fatal assertions that abort the current test function on failure.

Prefer `EXPECT_` unless continuing after failure is unsafe.

### Common Assertions Examples

```cpp
EXPECT_EQ(calculated_value, expected_value); // equality check
ASSERT_NE(pointer, nullptr);                // pointer is not null
EXPECT_TRUE(condition);                      // condition is true
EXPECT_FALSE(condition);                     // condition is false
```

### Best Practices

- Use `ASSERT_` when failure prevents meaningfully continuing the test (e.g., dereferencing a pointer).
- Add custom failure messages with streaming syntax `<<` to clarify errors.

```cpp
ASSERT_NE(result, nullptr) << "Result pointer should not be null";
```

---

## 3. Creating Test Fixtures for Shared Setup

When multiple tests require the same set-up, use a test fixture.

### Defining a Fixture

1. Declare a class deriving from `testing::Test`.
2. Initialize any shared objects or data in the constructor or `SetUp()`.

```cpp
class MyFixture : public testing::Test {
 protected:
  MyFixture() {
    // initialization
  }

  void SetUp() override {
    // code here runs before each test
  }

  void TearDown() override {
    // code here runs after each test
  }

  // shared test data
  int value_;
};
```

### Defining Tests Using Fixtures

Use `TEST_F()` macro instead of `TEST()`.

```cpp
TEST_F(MyFixture, TestOne) {
  value_ = 5;
  EXPECT_EQ(value_, 5);
}

TEST_F(MyFixture, TestTwo) {
  // Runs with fresh fixture (value_ initialized again)
  EXPECT_EQ(value_, 0);
}
```

<Tip>
Each test gets a fresh fixture instance, keeping tests independent.
</Tip>

---

## 4. Running Your Tests

Your test program needs to:

1. Call `testing::InitGoogleTest(&argc, argv);` to initialize GoogleTest and parse flags.
2. Call `RUN_ALL_TESTS()` which discovers and runs all tests.

### Minimal Main Function Example

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Important Notes

- Return the value of `RUN_ALL_TESTS()` from `main()`: this ensures the test program signals success or failure correctly.
- Only call `RUN_ALL_TESTS()` once.

---

## 5. Understanding Test Discovery

GoogleTest automatically registers all tests defined with `TEST` and `TEST_F` macros at compile time.
At runtime, `RUN_ALL_TESTS()` runs all registered tests in the order of registration.

### Filtering Tests

You can run subsets of tests using the `--gtest_filter` flag with patterns to include or exclude tests.

Example:

```shell
./my_test --gtest_filter=MyFixture.*
```

Runs all tests in `MyFixture` test suite.

---

## 6. Concrete First Test Example

```cpp
#include <gtest/gtest.h>

// Function under test.
int Add(int a, int b) {
  return a + b;
}

TEST(AdditionTest, Basic) {
  EXPECT_EQ(Add(1, 2), 3);
  EXPECT_EQ(Add(-1, 1), 0);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run this program, and it will execute the test and report pass/fail results.

---

## 7. Tips and Common Pitfalls

- **Avoid underscores in test and suite names** to prevent naming conflicts.
- Always **check the return value of `RUN_ALL_TESTS()`** to ensure proper test result propagation.
- Use **`TEST_F()` only with defined fixture classes** to avoid compilation errors.
- Use **`ASSERT_` macros where early exit is necessary** to prevent undefined behavior.
- When assertions fail inside subroutines, remember failure aborts only the current function. Use `HasFatalFailure()` or exceptions integration for propagation.

---

## 8. Troubleshooting Your First Test

If your tests don’t run or compile:

- Confirm your `main()` calls `InitGoogleTest()` and returns `RUN_ALL_TESTS()`.
- Verify that your test names and suite names don’t contain underscores.
- Ensure you link the tests with the GoogleTest libraries.
- Use `--gtest_list_tests` to see all registered tests.
- Use `--gtest_filter` to run specific tests when needed.

---

## 9. Next Steps

Once comfortable with writing and running your first tests, explore:

- [Writing Effective Assertions](../guides/core-testing-workflows/writing-effective-assertions.md) to deepen assertion usage.
- [Organizing and Running Test Suites](../guides/core-testing-workflows/organizing-and-running-test-suites.md) to manage larger test sets.
- [Parameterized and Typed Tests](../guides/mocking-and-advanced-usage/parameterized-and-type-parameterized-tests.md) to increase test coverage through reusability.
- [GoogleTest Primer](../docs/primer.md) for a comprehensive beginner tutorial.

<Tip>
For practical examples, examine the [Googletest Samples](../docs/samples.md) repository.
</Tip>

---

## 10. Additional Resources

- [GoogleTest Primer](../docs/primer.md) — Introduction and best practices.
- [Testing Reference](../docs/reference/testing.md) — Macro and API details.
- [GoogleTest FAQ](../docs/faq.md) — Answers to common questions and pitfalls.
- [GoogleMock (gMock) Framework Overview](../googlemock/README.md) — For mocking dependencies.

---

## Summary

Writing your first test with GoogleTest involves defining simple `TEST()` or `TEST_F()` macros with assertions, compiling with proper GoogleTest linkage, initializing the framework with `InitGoogleTest()`, and running `RUN_ALL_TESTS()` within `main()`. These steps set a strong foundation for automated C++ testing with clear diagnostic feedback.

<Check>
Always ensure your test and suite names are underscore-free and valid C++ identifiers.
</Check>

<Check>
Remember to use the correct macros `TEST()` vs `TEST_F()` depending if you have a test fixture.
</Check>