---
title: "How do I install GoogleTest and GoogleMock?"
description: "Learn the recommended ways to install GoogleTest and GoogleMock, including supported build systems, minimum C++ requirements, and caveats for different platforms. This page points you to the right starting resources and clarifies setup requirements for rapid onboarding."
---

# How do I install GoogleTest and GoogleMock?

Learn the recommended ways to install GoogleTest and GoogleMock, including supported build systems, minimum C++ requirements, and caveats for different platforms. This guide helps you quickly set up and integrate these frameworks so you can start writing effective tests without delay.

---

## Overview

GoogleTest and GoogleMock provide powerful, platform-neutral testing and mocking frameworks for C++ developers. Installing them correctly ensures seamless integration, predictable build behavior, and compatibility across diverse environments like Linux, Windows, and macOS.

This document outlines the official, recommended methods for installing these frameworks, focusing on supported build systems, C++ language requirements, and platform considerations.

---

## Supported Build Systems and Installation Methods

### Using CMake for Standalone and Integrated Builds

GoogleTest and GoogleMock come with first-class support for CMake, the cross-platform build system widely used in the C++ ecosystem.

#### Standalone Project Build

Follow these steps to build GoogleTest (which includes GoogleMock by default) as a standalone project:

```bash
# Clone the GoogleTest repository, checkout a stable release tag for compatibility
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest   # Root of the cloned repo
mkdir build     # Create a build directory
cd build
# Generate native build files (Makefile, Visual Studio solution, etc.)
cmake ..        # Includes GoogleMock by default
# If you want to build only GoogleTest without GoogleMock
# cmake .. -DBUILD_GMOCK=OFF
```

After configuration:

- On Unix-like systems (Linux, macOS), run:

  ```bash
  make
  sudo make install    # Installs to /usr/local/ by default
  ```

- On Windows, open the generated `gtest.sln` solution file in Visual Studio and build the project.

- On macOS, open the generated `.xcodeproj` for building with Xcode.

You now have GoogleTest and GoogleMock libraries installed and ready to link against.

##### Using pkg-config

GoogleTest provides `.pc` files (`gtest.pc`, `gmock_main.pc`, etc.) generated during installation to integrate easily via pkg-config with your build.

#### Integrating GoogleTest/GoogleMock into Existing Projects

If you use CMake for your application or library, the best practice is to incorporate GoogleTest as part of your build rather than relying on a separate installed version. This ensures:

- Compiler and linker settings remain consistent
- Avoids mismatched debug/release runtime errors, especially on Windows
- Simplifies continuous integration (CI) setups

One popular way is using the `FetchContent` module in your top-level CMakeLists.txt:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Visual Studio dynamic runtimes
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main gmock_main)
add_test(NAME my_tests COMMAND my_tests)
```

This automatically downloads, builds, and links GoogleTest and GoogleMock with your tests.

---

## Minimum C++ Standard Requirement

GoogleTest requires **C++17** or higher to build and function correctly.

- This applies whether building standalone or integrating.
- Ensure your compiler flags specify at least `-std=c++17` or equivalent.
- If your project is pure C, you can still use GoogleTest for validation by setting the C++ standard on the testing targets.

---

## Platform Compatibility

GoogleTest and GoogleMock support major platforms:

- Linux (GCC, Clang)
- Windows (MSVC, MinGW)
- macOS (Clang via Xcode or installed toolchains)

They can be built as:

- Static libraries (default, simplest)
- Shared libraries (DLLs on Windows, optional)

### Windows Notes

- By default, GoogleTest statically links the C Runtime (CRT), which can conflict with your application if it uses dynamic CRT. Use the `gtest_force_shared_crt` option in CMake to align runtimes.
- When building with Visual Studio, ensure architecture (x86 vs x64) and debug/release configurations match between your application and GoogleTest.

### Embedded and Special Platforms

- Build scripts include support for Arduino platforms (ESP8266, ESP32, NRF52) with different entry points.
- For less common platforms, manual build steps or custom configurations may be necessary.

---

## Linking Options and Main() Functions

### GoogleTest Libraries

- `gtest`: GoogleTest library without supplied `main()`.
- `gtest_main`: GoogleTest library with the standard `main()` implementation, simplifying test executable creation.

### GoogleMock Libraries

- `gmock`: GoogleMock core library.
- `gmock_main`: GoogleMock library including GoogleTest and a `main()` function.

### Selecting the Right Library to Link

- For most users who want an out-of-the-box test runner: link with `gtest_main` or `gmock_main`.
- If you need custom main logic or handle test initialization yourself, link with `gtest` or `gmock` and implement your own `main()`.

Example custom `main()` for GoogleTest:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Example custom `main()` for GoogleMock (which initializes GoogleTest internally):

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Quick Installation Workflow

<Steps>
<Step title="Clone and Configure">
Clone GoogleTest and generate build files via CMake.
</Step>
<Step title="Build">
Compile the libraries using your platform's build tool (make, ninja, MSVC).
</Step>
<Step title="Install">
Optional: install libraries and headers for system-wide use.
</Step>
<Step title="Link to Your Tests">
Configure your test project to link against `gtest_main` and `gmock_main`.
</Step>
<Step title="Write and Run Tests">
Begin writing tests and run your test executable.
</Step>
</Steps>

---

## Troubleshooting Installation Issues

- **Missing C++17 support**: Ensure your compiler is updated and set to the correct C++ standard.
- **Linker errors due to runtime mismatches on Windows**: Use `-Dgtest_force_shared_crt=ON` with CMake and confirm runtime settings match.
- **Thread support issues**: If pthread detection fails, force with `-DGTEST_HAS_PTHREAD=1` or `0`.
- **Header not found?** Verify include directories and that `gtest/gtest.h` is reachable.
- **Conflicting macro definitions**: Define macros like `-DGTEST_DONT_DEFINE_TEST=1` to prevent clashes.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — get a conceptual intro
- [Getting Started Guides](https://github.com/google/googletest/tree/main/docs/getting-started) — end-to-end tutorials
- [CMake Build Configurations](https://github.com/google/googletest/tree/main/googletest/cmake) — details on pkg-config files and CMake options
- [Advanced Integration](https://github.com/google/googletest/blob/main/guides/advanced_testing_patterns/combining_gtest_gmock.md) — incorporating GoogleTest and GoogleMock together

---

## Summary

Installing GoogleTest and GoogleMock is straightforward with CMake, requiring a modern C++17 environment. Choose between standalone builds or integrating into your own project with CMake `FetchContent`. Respect platform-specific notes, especially on Windows, and select the proper linking libraries based on how you want to manage the test runner `main()` function. Once installed, you can rapidly start writing and running your C++ tests.

---

## See Also

- [Prerequisites & System Requirements](../getting-started/setup-and-installation/prerequisites-system-requirements) for detailed compiler and platform requirements.
- [Writing Your First Test](../getting-started/first-tests-and-troubleshooting/writing-your-first-test) to begin test development after installation.
- [Using GoogleMock](../getting-started/first-tests-and-troubleshooting/using-googlemock) for mocking support installation and usage.
- [Troubleshooting & Common Issues](../getting-started/first-tests-and-troubleshooting/troubleshooting-setup-issues) to resolve potential installation problems.
- [Platform and Build Configuration Reference](../api-reference/extending-configuration/platform-and-build-configuration) for advanced build options and macros.


---

<Tip>
Ensure your build environment targets at least C++17 and verify compatibility with your compiler and platform before building to avoid common pitfalls.
</Tip>

<Check>
Use pre-built `gtest_main` and `gmock_main` libraries to simplify test binary creation unless you have specific custom initialization needs.
</Check>

<Warning>
On Windows, mismatched CRT linkage between GoogleTest and your application causes link errors; use `-Dgtest_force_shared_crt=ON` during build to fix.
</Warning>
