---
title: "How do I set up my first tests?"
description: "Explains the process for including GoogleTest/GoogleMock in your project, initializing test targets, and running your initial test suite. Highlights essential headers and starting guides for both frameworks."
---

# How do I set up my first tests?

This guide walks you through including GoogleTest and GoogleMock in your project, initializing your test targets, and running your first test suite. You'll learn the essential headers to include and the basic steps to define, build, and execute your initial tests using these powerful testing frameworks.

---

## 1. Including GoogleTest and GoogleMock Headers

To start writing tests, include the following headers in your test source files:

- For GoogleTest framework features:

  ```cpp
  #include <gtest/gtest.h>
  ```

- For GoogleMock features (if you plan on using mocks):

  ```cpp
  #include <gmock/gmock.h>
  ```

Including `gmock.h` also includes `gtest.h`, so you only need `gmock.h` if you are using mocking.


> <Info>
> Both frameworks integrate seamlessly, as GoogleMock depends on GoogleTest internally. Initializing GoogleMock also initializes GoogleTest.
> </Info>

---

## 2. Initializing Testing in your main() Function

In your test executable, you must initialize the testing framework before running tests. This involves calling initialization functions and then invoking all tests.

### Using GoogleTest

If you are only using GoogleTest, write your `main` function as follows:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);  // Parses flags and sets up
  return RUN_ALL_TESTS();                // Runs all tests registered
}
```

### Using GoogleMock

If you use GoogleMock, initialize it instead. GoogleMock initializes GoogleTest internally, so do not initialize GoogleTest separately.

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);  // Initializes GoogleMock and GoogleTest
  return RUN_ALL_TESTS();                 // Runs all registered tests
}
```

> <Tip>
> Prefer linking against `gtest_main` or `gmock_main` libraries, which provide a default `main()`. Write your own main only if you need customized initialization or setup.
> </Tip>

---

## 3. Defining Your First Test

You can define tests using various macros depending on your needs.

### Simple Test with TEST Macro

This macro defines a test function without a test fixture.

Example:

```cpp
TEST(MyFirstTestSuite, BasicTest) {
  EXPECT_EQ(5, 2 + 3);
}
```

This test belongs to suite `MyFirstTestSuite` and is named `BasicTest`.

### Test Using Fixtures with TEST_F Macro

If you have setup/teardown or shared objects, use a test fixture.

```cpp
class MyFixture : public testing::Test {
 protected:
  void SetUp() override {
    // Initialize test resources here
  }
  void TearDown() override {
    // Clean up resources here
  }
  int shared_value_ = 0;
};

TEST_F(MyFixture, TestUsingFixture) {
  shared_value_ = 42;
  EXPECT_EQ(shared_value_, 42);
}
```

> <Info>
> GoogleTest creates a fresh fixture object for each test, ensuring independence.
> </Info>

### Parameterized and Typed Tests

Once you're comfortable with basic tests, explore defining parameterized tests (using `TEST_P` and `INSTANTIATE_TEST_SUITE_P`) and typed tests (using `TYPED_TEST_SUITE` and `TYPED_TEST`) to increase test coverage and reuse.

---

## 4. Building and Linking Tests

Ensure your build system is configured to:

- Find GoogleTest and GoogleMock headers.
- Link against `gtest` and/or `gmock` libraries.
- For convenience, link against `gtest_main` or `gmock_main` to get a default `main()` function.

### Example CMake Snippet

```cmake
find_package(GTest REQUIRED)

add_executable(my_tests test1.cpp test2.cpp)
target_link_libraries(my_tests GTest::gtest_main GTest::gmock_main pthread)
add_test(NAME my_tests COMMAND my_tests)
```

---

## 5. Running Your Tests

Execute your compiled test binary. By default, it runs all registered tests and prints results.

Example command:

```shell
./my_tests
```

Expected output includes passed and failed tests summary.

### Using Command-Line Flags

Control test behavior using flags like:

- `--gtest_filter=*` – run all tests
- `--gtest_also_run_disabled_tests` – run disabled tests
- `--gtest_color=yes/no/auto` – enable or disable colored output
- `--gtest_repeat=N` – run tests multiple times

Run `./my_tests --help` for a full list.

---

## 6. Essential Headers Summarized

| Framework  | Essential Header         | Purpose                             |
|:----------|:-------------------------|:----------------------------------|
| GoogleTest | `#include <gtest/gtest.h>`  | Defines testing macros, fixtures, assertions, and test lifecycle APIs |
| GoogleMock | `#include <gmock/gmock.h>`  | Extends GoogleTest with mock class definitions, actions, and expectations |

---

## 7. Quick Start Example

Here is a complete minimal example to set up your first test program using GoogleTest:

```cpp
#include <gtest/gtest.h>

// Simple test
TEST(SampleTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run to verify setup.

---

## 8. Next Steps and Learning Resources

Once you have your first tests running, explore:

- Writing test fixtures with `TEST_F`
- Using assertions and expectations effectively
- Writing parameterized tests with `TEST_P` and instantiations
- Creating typed and type-parameterized tests
- Integrating mocks with GoogleMock

For detailed guidance, see [GoogleTest Primer](primer.md) and [Advanced GoogleTest Topics](advanced.md).

---

## Troubleshooting Tips

- **Linker errors on gtest symbols:** Confirm correct linking with `gtest` and `pthread` (Linux).
- **Class fixture constructor errors:** Ensure your fixture has a default constructor.
- **Tests not running or detected:** Verify proper `InitGoogleTest()` call and correct test macro usage.
- **Naming conventions:** Avoid underscores `_` in test suite and test names to prevent internal naming conflicts. See [FAQ](faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

---

### References & Further Reading

- [GoogleTest Primer](primer.md) – Learn basic test writing
- [Testing Reference](reference/testing.md) – Detailed macros and class references
- [GoogleMock Main Entry](googlemock/src/gmock_main.cc) – Example main function integrating GoogleMock
- [GoogleTest FAQ](faq.md) – Common questions and best practices
- [GoogleTest Samples](samples.md) – Sample tests for more examples

---

Harness the power of GoogleTest and GoogleMock to deliver reliable, maintainable C++ testing. Start small, grow your test suite, and scale coverage with confidence!
