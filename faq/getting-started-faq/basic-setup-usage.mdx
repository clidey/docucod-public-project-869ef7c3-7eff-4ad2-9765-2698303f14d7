---
title: "How do I install and set up GoogleTest/GoogleMock?"
description: "Guidance for downloading, integrating, and configuring GoogleTest and GoogleMock in your C++ project. Covers installation options, required C++ standards, and links to relevant starter guides or headers. Troubleshoots common issues in initial configuration."
---

# How do I install and set up GoogleTest/GoogleMock?

This guide provides clear, practical instructions to help you download, integrate, and configure GoogleTest and GoogleMock in your C++ project. You'll learn about installation options, required C++ standards, usage of main entry points, and how to troubleshoot common setup issues.

---

## Overview

GoogleTest and GoogleMock are powerful C++ testing frameworks designed to simplify unit testing and mocking. Installing and setting them up correctly ensures smooth test development and execution.

This page focuses solely on the installation and initial configuration process—not on writing tests or mocking techniques. For usage guidance and examples, refer to the starter guides and API references linked below.

---

## Installation Options

### 1. Standalone vs Integrated Installation

- **Standalone Build:** Download the source from the official [GoogleTest GitHub repository](https://github.com/google/googletest) and build it independently, typically using CMake.
- **Integrated Build:** Incorporate GoogleTest/GoogleMock directly as part of your project’s CMake build.

Standalone builds offer simplicity for isolated test projects, whereas integrated builds blend GoogleTest with your existing codebase and build pipeline.

### 2. Platform Compatibility and Compiler Requirements

- GoogleTest requires a C++17-compliant compiler.
- Supported platforms include Linux, Windows, macOS, and various embedded systems.
- Check compiler support carefully before building; insufficient C++17 support is the most common blocker.

### 3. Using Prebuilt Binaries or Package Managers

While building from source is standard, some platforms offer prebuilt packages for GoogleTest which can ease setup. Refer to your platform package manager or the GitHub releases page.

---

## Downloading and Building GoogleTest/GoogleMock

Follow these steps to obtain and build GoogleTest and GoogleMock:

<Steps>
<Step title="Clone the Repository">
Run:
```bash
git clone https://github.com/google/googletest.git
cd googletest
```
This fetches the latest code from the official repository.
</Step>
<Step title="Create a Build Directory">
```bash
mkdir build && cd build
```
Keep builds out of source to keep things clean.
</Step>
<Step title="Run CMake to Configure">
```bash
cmake ..
```
This step configures the build system.

If you need to specify options like enabling threads or exception handling, customize your `cmake` invocation accordingly.
</Step>
<Step title="Compile the Libraries">
```bash
cmake --build .
```
Builds the GoogleTest/GoogleMock libraries.
</Step>
<Step title="(Optional) Install the Libraries">
```bash
sudo cmake --install .
```
Installs the libraries and headers system-wide or to your chosen location.
</Step>
</Steps>

---

## Integrating GoogleTest/GoogleMock in Your Project

### Using CMake

For seamless integration, link your test executable against GoogleTest and GoogleMock:

```cmake
# Add googletest as a subdirectory if included in your repo
add_subdirectory(googletest)

# Create your test executable
add_executable(my_tests test1.cc test2.cc)

# Link the libraries
target_link_libraries(my_tests gtest gmock_main pthread)
```

The `gmock_main` target includes a ready-made `main()` function.

### Using gmock_main Library

If you prefer to avoid writing your own `main()` function for tests, link against `gmock_main`:

- This library provides default initialization and runs all tests.
- It's configured automatically when using CMake's Googletest subproject or installed binaries.

This approach accelerates setup and reduces boilerplate.

### Writing Your Own Main (Advanced)

If you need custom test initialization, write a `main()` function like this:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This function initializes GoogleMock (and transitively GoogleTest) and executes all registered tests.

---

## Required C++ Standards and Compiler Flags

- GoogleTest requires at least **C++17**.
- Ensure your compiler and build system are configured to compile with this standard (e.g., `-std=c++17` in GCC/Clang).
- Threading support is recommended and required for some GoogleTest features.

Refer to your platform’s compiler documentation for details on enabling C++17.

---

## Useful Headers to Include

- `<gtest/gtest.h>` — Core GoogleTest APIs
- `<gmock/gmock.h>` — GoogleMock mocking framework

For mock support, always include both headers as GoogleMock depends on GoogleTest.

---

## Common Pitfalls & Troubleshooting

<AccordionGroup title="Installation and Setup Issues">
<Accordion title="Tests Won't Link Due to Missing main()">
If you get linker errors for `main()`, you may not be linking against `gtest_main` or `gmock_main`. Linking to these libraries provides `main()` automatically.

Alternatively, write your own `main()` as shown above.
</Accordion>
<Accordion title="Compiler Errors Regarding C++ Standard">
Verify your build system uses C++17 or newer.

Check your compiler flags and update accordingly (e.g., `-std=c++17`).

Older compilers without C++17 support won't compile GoogleTest.
</Accordion>
<Accordion title="Threading Failures or Warnings">
Ensure your build links to the required threading libraries (e.g., `pthread` on Linux).

Some GoogleTest features rely on thread-safe primitives.

Review platform notes for extra dependencies.
</Accordion>
<Accordion title="Windows Runtime Library Conflicts">
On Windows, ensure you use consistent runtime library settings (e.g., static vs dynamic CRT).

Mismatch can cause build or link errors.

The official installation guide covers these Windows-specific details.
</Accordion>
<Accordion title="Unusual Platforms (Embedded, ESP8266, etc.)">
GoogleTest has special support for some embedded platforms with different main loops. See the source file `gmock_main.cc` for platform-specific entry point overrides.
</Accordion>
</AccordionGroup>

---

## Validation After Installation

- Build and run the included sample tests.

- Validate that tests run and report results as expected.

- Confirm linker includes `gmock_main` or your own `main()` is present.

See the [Quick Validation Steps](https://github.com/google/googletest/blob/main/docs/getting-started/troubleshooting-qa/validation-steps.md) guide for detailed instructions.

---

## Additional References

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Getting started writing tests
- [Installation Guide](https://github.com/google/googletest/blob/main/docs/getting-started/prereq-install/installation-guide.md) — Platform-specific build instructions
- [Configuration Basics](https://github.com/google/googletest/blob/main/docs/getting-started/prereq-install/configuration-basics.md) — Configuring test flags and build settings
- [Writing and Running Tests](https://github.com/google/googletest/blob/main/api-reference/core-apis/writing-tests.md) — Writing tests after setup
- [Mocking with GoogleMock](https://github.com/google/googletest/blob/main/guides/advanced-testing-patterns/using-googlemock.md) — Mock object usage

---

For ongoing learning and troubleshooting, consult the navigation map and use case-specific guides linked across the documentation.

---

<Tip>
Link against `gmock_main` for automatic test setup and a default `main()` unless custom initialization is required.
</Tip>

<Note>
Verify your build uses at least C++17 standard; older compilers will cause build failures.
</Note>

<Warning>
Do not call `testing::InitGoogleTest` separately if you use `testing::InitGoogleMock` — the latter initializes both.
</Warning>
