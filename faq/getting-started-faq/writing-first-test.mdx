---
title: "How do I write my first test?"
description: "Clarifies the basic steps to author and run the first test case using GoogleTest, with concise code examples and references to key macros. Useful for both unit and mock-based scenarios."
---

# How Do I Write My First Test?

This guide demystifies the process of authoring and running your first test case using GoogleTest, with clear examples and key macro explanations. Whether you aim for simple unit tests or mock-based testing, this page provides the foundational steps to get you started quickly and confidently.

---

## 1. Understanding Your Test Structure

In GoogleTest, tests are organized as functions grouped under test suites (previously called test cases). Each test exercises a specific behavior or feature.

### The TEST() Macro

The simplest way to write a test is using the `TEST()` macro:

```cpp
TEST(TestSuiteName, TestName) {
  ... test code ...
}
```

- `TestSuiteName`: A logical grouping for related tests (must be a valid C++ identifier, no underscores).
- `TestName`: The name identifier for the individual test (must be a valid C++ identifier, no underscores).

GoogleTest automatically registers these tests, discovers them at runtime, and runs them independently.

### Naming Conventions

Choose descriptive, clear names without underscores to improve test report readability. For example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

Tests in the same suite logically group related checks.

---

## 2. Writing Assertions to Verify Behavior

Assertions are the core of a test—they check that your code behaves as expected. GoogleTest provides two families:

- `ASSERT_*` — fatal; aborts the current test on failure.
- `EXPECT_*` — non-fatal; test continues after failure.

Most tests prefer `EXPECT_*` for thoroughness, while `ASSERT_*` is used when continuation makes no sense.

### Example Assertions

```cpp
ASSERT_EQ(x.size(), y.size()) << "Vectors differ in length";

for (size_t i = 0; i < x.size(); ++i) {
  EXPECT_EQ(x[i], y[i]) << "Mismatch at index " << i;
}
```

You can add custom failure messages using `<<` which helps quickly diagnose issues.

### Common Assertions

- `EXPECT_EQ(a, b)`: Checks if `a == b`
- `ASSERT_NE(ptr, nullptr)`: Ensures pointer is not null before using it
- `EXPECT_TRUE(condition)`, `EXPECT_FALSE(condition)`: Boolean conditions

See [Assertions Reference](../api-reference/core-apis/assertions.md) for a comprehensive list.

---

## 3. Basic Example: Testing a Factorial Function

```cpp
// Function under test
int Factorial(int n);

// Test suite and tests
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

This example shows straightforward usage of `TEST()`, grouping, and `EXPECT_EQ` assertions to validate the functionality.

---

## 4. Running Your Tests

After writing your tests in one or several source files, you compile and link them against GoogleTest libraries.

### Invoking All Tests

Include the header and initialize GoogleTest as follows:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` processes command line arguments.
- `RUN_ALL_TESTS()` runs all tests registered by `TEST()` macros.

Return value:
- `0` if all tests succeed.
- Non-zero if any test fails.

### Running a Single Test

You can filter tests at run time using command line options:

```
./mytests --gtest_filter=FactorialTest.HandlesZeroInput
```

Run `./mytests --help` for more options.

---

## 5. Advanced: Using Test Fixtures for Repeated Set-Up

If multiple tests need to share setup or state, use a *test fixture*:

### Defining a Fixture

```cpp
class QueueTest : public ::testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
  }

  Queue<int> q0_;
  Queue<int> q1_;
};
```

### Writing Tests with Fixture

Use the `TEST_F()` macro instead of `TEST()`. The first argument is the fixture class:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

GoogleTest creates a fresh fixture for each test, ensuring independence.

For more details, see [GoogleTest Primer on Test Fixtures](../docs/primer.md#same-data-multiple-tests).

---

## 6. Tips for Beginners

- Always make destructors virtual in classes that you mock or extend.
- Use `EXPECT_*` assertions by default; use `ASSERT_*` only when failure prevents continuation.
- Group related tests under a suite for better organization.
- Name your tests clearly; avoid underscores and use CamelCase.
- If unsure about test failures, run with `--gtest_verbose=info` to get more details.

---

## 7. Common Pitfalls

<AccordionGroup title="Pitfalls When Writing First Tests">
<Accordion title="Not Registering Tests Correctly">
Always use the `TEST()` or `TEST_F()` macros for test registration; defining functions without these will not register tests.
</Accordion>
<Accordion title="Using ASSERT_* Carelessly">
Remember: `ASSERT_*` macros abort the current function on failure, potentially skipping cleanup. Use only when necessary.
</Accordion>
<Accordion title="Ignoring RUN_ALL_TESTS() Return Value">
The return value of `RUN_ALL_TESTS()` determines success or failure. Always return this value from your `main()`.
</Accordion>
<Accordion title="Over-Specifying Tests">
Write tests that only verify necessary aspects to avoid brittleness and frequent maintenance.
</Accordion>
</AccordionGroup>

---

## 8. Where to Go Next

Once you have mastered writing simple tests:

- Learn to write **test fixtures** for shared test context.
- Explore **parameterized tests** to run the same test with multiple inputs.
- Dive into [GoogleMock](gmock_for_dummies.md) to write mocks and verify interactions.
- Study the [Assertions Reference](reference/assertions.md) for more assertion macros.
- Follow the [Primer](docs/primer.md) for detailed foundational knowledge.

---

## 9. References

- [GoogleTest Primer](docs/primer.md)
- [Writing Your First Mock with GoogleMock](guides/getting-started/first-mock.md)
- [Assertions Reference](api-reference/core-apis/assertions.md)
- [GoogleMock for Dummies](googlemock/README.md)
- [Running Tests and Filtering](docs/primer.md#invoking-the-tests)

---

<Tip>
Writing your first test is your gateway to confident, automated, and rapid verification of your C++ code. Embrace the simplicity of `TEST()` and assertions, then advance progressively to harness powerful capabilities like fixtures and mocking.
</Tip>

---