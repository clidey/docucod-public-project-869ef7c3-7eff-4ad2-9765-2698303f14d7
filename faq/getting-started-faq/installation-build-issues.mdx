---
title: "Installation and Build Issues"
description: "Answers to frequent problems encountered during installation and building with various toolchains. Covers build prerequisites, supported platforms, common compiler errors, and paths to successful first builds."
---

# Installation and Build Issues

This page addresses the most frequent challenges and questions users face during the installation and build process for GoogleTest and GoogleMock. It helps you understand necessary prerequisites, platform compatibility, common compiler and build system errors, and provides clear guidance to achieve a successful first build.

---

## 1. Prerequisites for Building GoogleTest

Before you start building GoogleTest, ensure that your environment meets the following prerequisites:

- **C++17 Support:** GoogleTest requires a compiler that supports at least the C++17 standard. Popular compilers like GCC 7+, Clang 5+, and MSVC 2017 Update 3+ satisfy this requirement.
- **Build Tools:**
  - CMake 3.14 or later is recommended for generating build scripts.
  - Make, Ninja, Visual Studio, or Xcode as build backends depending on your platform.
- **Threading Library:** 
  - POSIX threads (pthreads) are used on many platforms; ensure appropriate development files are installed.
  - On Windows, native threading primitives are used.

You can verify C++ standard support by configuring your build system to enforce C++17, for example with `set(CMAKE_CXX_STANDARD 17)` in CMake.

<Tip>
Always check your compiler and build system documentation to confirm C++17 support before proceeding.
</Tip>

---

## 2. Supported Platforms and Toolchains

GoogleTest follows the
[Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support), ensuring broad platform compatibility. Supported platforms include:

- **Operating Systems:** Linux, Mac OS X, Windows (desktop and MinGW).
- **Compilers:** GCC, Clang, MSVC as noted above.
- **Build Systems:** CMake, Bazel, and others with manual integration.

Detailed, up-to-date compatibility matrices are available [here](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).

<Note>
If your platform or compiler version is not listed, GoogleTest may fail to build or operate correctly.
</Note>

---

## 3. Common Build Scenarios and Errors

### 3.1 Using CMake to Build GoogleTest

GoogleTest provides a ready-made CMake build script. Typical steps for building standalone GoogleTest are:

```bash
# Clone GoogleTest repository at desired version
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build
cd build
cmake ..
make
sudo make install
```

To build GoogleTest without GoogleMock, use:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

**Windows:** Visual Studio projects and solutions will be generated. Open and build in Visual Studio.

**Mac OS X:** A `.xcodeproj` file will be generated for use with Xcode.

### 3.2 Incorporating GoogleTest into Existing CMake Projects

To include GoogleTest as part of your project's build:

- Use `find_package(GTest CONFIG REQUIRED)` if GoogleTest is installed.
- Or integrate GoogleTest source directly using `add_subdirectory(googletest)`.

This allows consistent compiler and linker settings and avoids runtime mismatches.

<Warning>
Mixing static and shared runtime libraries can cause linker errors. Use the `gtest_force_shared_crt` option on Windows to synchronize runtime linkage.
</Warning>

### 3.3 Visual Studio Runtime Library Mismatch Errors

Error message example:
```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' doesn't match value 'MDd_DynamicDebug' in main.obj
```

**Solution:**
Add `-Dgtest_force_shared_crt=ON` when configuring with CMake to make GoogleTest link using the dynamic runtime.

---

## 4. Troubleshooting Common Issues

### 4.1 C++ Standard Not Supported

If your compiler does not support C++17:

- Upgrade your compiler to a compatible version.
- Alternatively, set `-DCMAKE_CXX_STANDARD=17` explicitly in your build configuration.

### 4.2 Missing pthread Library on Unix-like Platforms

If you see linker errors related to pthreads (e.g., undefined references):

- Make sure the pthread development package is installed.
- For manual build systems, link with `-lpthread`.

If using CMake, this is handled automatically.

### 4.3 Macro Name Clashes

GoogleTest defines many macros like `TEST()`, `ASSERT_EQ()`. If they clash with macros from other libraries:

- Use compiler flags to disable GoogleTestâ€™s macro definitions for conflicting macros. For example:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

This renames GoogleTest macros by prefixing them with `GTEST_`. You then use `GTEST_TEST()` instead of `TEST()`.

### 4.4 Building GoogleTest as a Shared Library (DLL) on Windows

To build GoogleTest as a shared library:

- Add `-DGTEST_CREATE_SHARED_LIBRARY=1` to compiler flags.
- Add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your tests linking against the shared library.

Note: This is optional; building static libraries is simpler and preferred unless shared libraries are required.

---

## 5. Ensuring a Successful First Build

Follow this step-by-step for a frictionless experience:

<Steps>
<Step title="Clone the Repository">
Clone the GoogleTest repo with the desired version tag.
</Step>
<Step title="Create Build Directory">
Make and enter a clean build directory (`mkdir build && cd build`).
</Step>
<Step title="Configure with CMake">
Run `cmake ..` with optional flags like `-DBUILD_GMOCK=OFF`.
</Step>
<Step title="Build Project">
Run `make` (or build via Visual Studio/Xcode on appropriate platforms).
</Step>
<Step title="Install (optional)">
Run `sudo make install` to install to system locations.
</Step>
</Steps>

If any step fails, review your environment variables, compiler paths, and ensure prerequisites are met.

---

## 6. Additional Tips and Best Practices

- When using CMake, always specify the C++ standard explicitly.
- Synchronize runtime linkage settings between your tests and GoogleTest.
- Use the latest stable GoogleTest release for maximum platform compatibility.
- Check the official [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) page regularly for updated compatibility info.
- Consult the [Common Setup Issues](../getting-started/troubleshooting-support/common-setup-issues) guide for environment-specific troubleshooting.

<Check>
Keeping your compiler and build tools up to date mitigates many build-related issues.
</Check>

---

## 7. Getting Help

If problems persist:

- Review detailed build logs for error specifics.
- Check the [GoogleTest GitHub repository issues](https://github.com/google/googletest/issues) for similar problems.
- Ask for help on related community forums or mailing lists.
- Refer to the [Common Setup Issues](../getting-started/troubleshooting-support/common-setup-issues) for an extensive troubleshooting checklist.

<Tip>
Always provide your platform details, compiler version, and exact error messages when seeking support.
</Tip>

---

### Related Documentation

- [Supported Platforms](docs/platforms.md)
- [Installing with CMake](getting-started/prerequisites-installation/installation-cmake)
- [Common Setup Issues](getting-started/troubleshooting-support/common-setup-issues)
- [GoogleTest Primer](docs/primer.md)
- [gMock Cookbook](docs/gmock_cook_book.md)

For advanced build customization and debugging, consider reviewing the internal CMake utilities in the source.

---

With these guidelines, you can overcome common installation and build challenges and start leveraging the full power of GoogleTest for your C++ projects.
