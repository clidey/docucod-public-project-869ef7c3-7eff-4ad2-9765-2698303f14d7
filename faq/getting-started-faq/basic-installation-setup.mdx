---
title: "How do I install and set up GoogleTest/GoogleMock?"
description: "Step-by-step instructions and common troubleshooting for setting up GoogleTest and GoogleMock in C++ projects. Covers supported platforms, build system integration (CMake, Bazel), and initial project configuration, ensuring a smooth onboarding experience."
---

# How do I install and set up GoogleTest/GoogleMock?

Welcome to the essential guide for getting GoogleTest and GoogleMock up and running in your C++ projects. This page walks you through step-by-step instructions for installation and initial configuration, focusing on supported platforms, integrating with popular build systems like CMake and Bazel, and configuring your project to discover and run tests smoothly.

---

## 1. Supported Platforms and Requirements

GoogleTest and GoogleMock support the major operating systems and compilers aligned with Google's C++17 support policy. Before installation, ensure your development environment meets these key prerequisites:

- **C++ Standard**: Your compiler must support at least **C++17**.
- **Platforms**: Linux, Windows (Visual Studio 2015+), macOS.
- **Threading**: pthread support is required for thread-safe tests.
- **Build Systems**: Compatible with CMake and Bazel for smooth integration.

<Tip>
Always check your compiler version and platform support before attempting the installation to prevent compatibility issues.
</Tip>

## 2. Installation with CMake

CMake is the most common tool for building GoogleTest and GoogleMock. Here is a straightforward approach:

### Step-by-Step Standalone CMake Installation

<Steps>
<Step title="Clone GoogleTest Repository">
Clone the repo with the command:
```bash
git clone https://github.com/google/googletest.git -b main
d
```
</Step>
<Step title="Create Build Directory and Configure">
Inside the cloned directory:
```bash
mkdir build
cd build
cmake ..
```
By default, GoogleMock is included. To disable GoogleMock, use:
```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the Libraries">
Use your platform’s native tools:
- On Linux/macOS:
```bash
make
```
- On Windows (with Visual Studio):  Open the generated `gtest.sln` and build.
</Step>
<Step title="Install (optional)">
If you want system-wide installation (requires admin rights):
```bash
sudo make install
```
</Step>
</Steps>

### Integrating GoogleTest into Your CMake Project

You can integrate GoogleTest directly in your own project:

- Use `FetchContent` to download and include GoogleTest during your build:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Windows dynamic runtime
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main gmock_main)
add_test(NAME my_tests COMMAND my_tests)
```

<Tip>
Using `FetchContent` ensures your build always pulls the version you specify and compiles it with your project settings.
</Tip>

## 3. Installation with Bazel

Bazel users can integrate GoogleTest and GoogleMock with the following approach:

- **Prerequisites:** Ensure your Bazel workspace is setup for C++17 development.
- **Declare GoogleTest dependency** in your `WORKSPACE` file using the official repository:

```bazel
http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/main.zip",
    strip_prefix = "googletest-main",
)
```

- **Load GoogleTest in your `BUILD` files:**

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main", "@com_google_googletest//:gmock"],
)
```

- **Run tests using Bazel:**

```bash
bazel test //path/to:my_test
```

<Tip>
Consult the Bazel C++ tutorial and the GoogleTest Primer for advanced configuration and troubleshooting.
</Tip>

## 4. Initial Project Configuration and Test Discovery

Once installed, you need to configure your C++ project to recognize and run tests properly.

### Adding GoogleTest/GoogleMock to Your Build

- Include the headers from the installed path or project subdirectory (e.g., `#include <gtest/gtest.h>` or `#include <gmock/gmock.h>`).
- Link your test binaries against `gtest`, `gtest_main`, `gmock`, or `gmock_main` libraries depending on your needs.

### Configuring Compiler and Linker Paths

Make sure your build system is aware of the include and library paths.

### Test Discovery

GoogleTest automatically discovers tests defined with the `TEST()`, `TEST_F()`, and related macros within your test binaries.

### Running Tests

Call `RUN_ALL_TESTS()` in your `main()` function to execute all tests. Usually, linking with `gtest_main` or `gmock_main` provides a default `main()` so you don't have to write one.

#### Example main() function if custom code is needed:
```c++
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Tip>
If using GoogleMock, initialize with `testing::InitGoogleMock()` instead for proper mock setup.
</Tip>

## 5. Troubleshooting Common Issues

### Build/Link Errors

- Check that header and library paths are correct.
- Verify thread libraries (like pthread on Unix) are linked if needed.
- On Windows, be aware of runtime linkage mismatches; use `gtest_force_shared_crt` flag.

### Compatibility Issues

- Ensure C++17 is enabled in your compiler.
- Confirm your platform and compiler version is supported.

### Test Discovery Problems

- Verify test source files are compiled and linked properly.
- Ensure test macros are used correctly and tests are registered.

## 6. Best Practices for Setup

- Use consistent compiler and linker settings across your project and GoogleTest/GoogleMock compilation.
- Prefer integrating GoogleTest as a subdirectory or via `FetchContent` in CMake for synchronized builds.
- Set up continuous integration pipelines to build and execute tests automatically.

## 7. Next Steps

After successful installation and setup:

- Write your first test using `TEST()` or `TEST_F()` macros.
- Explore test fixtures to share setup and teardown code.
- Learn about using assertions and matchers for effective testing.

For those integrating mocks:

- Define mock classes using `MOCK_METHOD` macros.
- Specify expectations using `EXPECT_CALL` and default behaviors with `ON_CALL`.

---

## Useful Resources & Links

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Learn how to write simple tests.
- [gMock for Dummies](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md) — Guide to mock objects.
- [Installation with CMake](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/installation-cmake.md) — Detailed CMake installation.
- [Installation with Bazel](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/installation-bazel.md) — Bazel integration guide.
- [Basic Configuration](https://github.com/google/googletest/blob/main/getting-started/setup-usage-validation/basic-configuration.md) — Setting up for test discovery and execution.

---

## Summary

This page is your entrypoint for installing and setting up GoogleTest and GoogleMock in your C++ environment. Starting with platform requirements and prerequisites, it provides practical, stepwise instructions for building with CMake or Bazel and configuring your project's test discovery. It addresses common pitfalls and outlines best practices to ensure tests and mocks run reliably and integrate well into your development workflow.

<Tip>
For a smooth journey, ensure your build and test environments meet the prerequisites and verify each step before moving to the next.
</Tip>

---

<Info>
If you encounter issues during setup, consult related sections in the FAQ such as “How do I resolve common build or linking errors?” and “Why aren’t my tests or mocks working as expected?” located in the Troubleshooting & Integration Issues group.
</Info>
