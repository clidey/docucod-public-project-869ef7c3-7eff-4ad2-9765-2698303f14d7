---
title: "Understanding Strict, Nice, and Naggy Mocks"
description: "Explains the purpose and practical impact of using NiceMock, NaggyMock, and StrictMock wrappers. Provides solutions to typical problems with uninteresting or unexpected calls during tests."
---

# Understanding Strict, Nice, and Naggy Mocks

GoogleMock provides three wrapper templates—`NiceMock`, `NaggyMock`, and `StrictMock`—that modify the behavior of mock objects regarding how they treat **uninteresting calls** (calls to mock methods that have no specified `EXPECT_CALL` expectations).

This page explains:

- The purpose and practical impact of using these wrappers
- How they help manage uninteresting or unexpected calls during tests
- Solutions to common challenges when dealing with these calls

---

## What Are Uninteresting Calls?

An **uninteresting call** occurs when a mock object's method is invoked, but no `EXPECT_CALL` has been set for that method with matching arguments. By default, GoogleMock:

- Allows these calls to succeed by performing a default action (e.g., returning a default value), **and**
- Prints a warning informing you about the uninteresting call.

This behavior is sometimes **too noisy** for tests that legitimately expect some calls to be made without verification, and sometimes too **lenient** when you want to ensure strict correctness.

---

## Wrapper Types and Their Behaviors

### 1. NiceMock  
Suppresses warnings for uninteresting calls, effectively **silencing** them. This makes tests **less chatty** and focuses only on expected calls.

- All uninteresting calls are allowed and silently accepted.
- Useful when you want to ignore calls that are irrelevant to the test.
- Other behaviors, such as reporting unexpected calls, remain unchanged.

**Example:**

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, DoThis());

// Calls to other methods without expectations will not warn.
nice_mock.DoThat();  // No warning printed
```


### 2. NaggyMock  
Prints warnings on uninteresting calls but otherwise allows them to proceed. This is the **default behavior** of plain mocks (e.g., just `MockFoo`).

- Warns every time a method with no expectation is called.
- Helps identify potentially missed expectations during test development.
- Does not fail the test on uninteresting calls.

**Example:**

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_mock;
EXPECT_CALL(naggy_mock, DoThis());

naggy_mock.DoThat();  // Warning printed: Uninteresting mock function call
```

### 3. StrictMock  
Treats all uninteresting calls as **errors** and causes test failures. This enforces **strict correctness** by disallowing any calls that lack an expectation.

- Uninteresting calls fail the test immediately.
- Ensures full control and explicitness over expected interactions.
- May make tests brittle by enforcing strict interaction specifications.

**Example:**

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoThis());

strict_mock.DoThat();  // Test failure: Uninteresting mock function call
```

---

## Practical Impact and Use Cases

| Mock Type    | Behavior on Uninteresting Calls                               | Use Case / When to Use                      |
|--------------|---------------------------------------------------------------|--------------------------------------------|
| NiceMock     | Ignore silently, no warnings                                  | When calls are irrelevant to the test, 
|              |                                                               | reduce noise, improve maintainability      |
| NaggyMock    | Print warning, allow call                                     | Default during development and debugging   |
| StrictMock   | Treat as error, fail test                                    | Enforce strict control; production-level
|              |                                                               | tests or when precise interaction matters  |

---

## How to Use These Wrappers

Given a mock class `MockFoo` defined with GoogleMock, you can create wrapped mocks as follows:

```cpp
#include <gmock/gmock.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

TEST(SomeTest, Example) {
  NiceMock<MockFoo> nice_mock;
  EXPECT_CALL(nice_mock, DoThis());

  NaggyMock<MockFoo> naggy_mock;
  EXPECT_CALL(naggy_mock, DoThis());

  StrictMock<MockFoo> strict_mock;
  EXPECT_CALL(strict_mock, DoThis());

  // Use mocks accordingly
}
```

All wrappers behave as subclasses of `MockFoo` and inherit its constructors, allowing:

```cpp
NiceMock<MockFoo> nice_mock(5, "arg");  // Calls MockFoo(5, "arg")
```

Currently, plain `MockFoo` behaves like `NaggyMock<MockFoo>`, but this may change in future releases to default toward `NiceMock`.

---

## Common Problems and Solutions

### 1. Why am I still getting warnings for base-class mock methods?

- Wrappers only work properly with mock methods defined **directly** in the mock class using `MOCK_METHOD`.
- If mock methods are inherited from base classes, their strictness behavior might not be affected.
- Review mock class design; refactor to define all mock methods directly in the class you wrap.

### 2. Can I nest these wrappers? (e.g., `NiceMock<StrictMock<MockFoo>>`)

- **No.** Nesting `NiceMock`, `NaggyMock`, or `StrictMock` is not supported.
- Attempting to nest causes `static_assert` failures.

### 3. What if my mock class has a non-virtual destructor?

- Wrappers rely on virtual destructors for proper behavior.
- If your mock class has a non-virtual destructor, strictness modifiers may not function correctly.
- Always define virtual destructors in base mock classes.

### 4. How to suppress warnings for specific methods without making the mock Nice?

- Use an explicit catch-all expectation:

  ```cpp
  using ::testing::AnyNumber;
  using ::testing::_;

  EXPECT_CALL(mock, SomeMethod(_)).Times(AnyNumber());
  ```

- This tells GoogleMock you expect calls to that method with any arguments and suppresses warnings for uninteresting calls on it.

---

## Additional Best Practices

- **Start with NaggyMock or plain Mock:** It helps catch unexpected calls with warnings.
- **Use NiceMock:** When your tests involve many irrelevant calls, to reduce noise and focus on key behavior.
- **Use StrictMock:** When you want to guarantee no unexpected calls, ensuring calls are only those explicitly expected.
- Add placeholder expectations with `.Times(AnyNumber())` for methods that may be called but are not relevant to test behavior.

---

## Troubleshooting

<AccordionGroup title="Troubleshooting Common Issues">
<Accordion title="No Warning Suppression Despite Using NiceMock">
Ensure your mock methods are defined directly in the mock class, not inherited from base classes. Wrappers do not fully affect inherited mock methods due to C++ limitations.
</Accordion>
<Accordion title="Uninteresting Call Warning Despite Explicit Expectation">
Check that the catch-all expectation uses `.Times(AnyNumber())` with wildcard matcher `_` for all arguments.
</Accordion>
<Accordion title="Unexpected Calls Are Still Allowed in NiceMock">
This is expected. NiceMock suppresses warnings, but unexpected calls (calls that do not match any expectation) **still cause test failures**.
</Accordion>
<Accordion title="Nesting NiceMock, NaggyMock, or StrictMock Fails to Compile">
Nesting these wrappers is unsupported. Use exactly one wrapper per mock class instance.
</Accordion>
</AccordionGroup>

---

## See Also

- [Mocking Reference - Strictness Modes](https://google.github.io/googletest/reference/core-mocking-apis/strictness-modes.html) — detailed API usage and examples of `NiceMock`, `NaggyMock`, and `StrictMock`.
- [gMock Cheat Sheet - Nice, Naggy, and Strict Mocks](https://google.github.io/googletest/gmock_cheat_sheet.html#NiceStrictNaggy) — concise usage with examples.
- [gMock FAQ - Understanding Strict, Nice, and Naggy Mocks](https://google.github.io/googletest/gmock_faq.html#understanding-strict-nice-and-naggy-mocks) — practical questions and answers.
- [gMock Cookbook - Knowing When to Expect](https://google.github.io/googletest/gmock_cook_book.html#knowing-when-to-expect-useoncall) — recommendations for using `ON_CALL` and `EXPECT_CALL` with strictness modifiers.

---

## Summary

The `NiceMock`, `NaggyMock`, and `StrictMock` templates provide customizable controls over how mock objects treat uninteresting calls, ranging from ignoring and silencing warnings (`NiceMock`), to warning the user (`NaggyMock`, the default), to failing tests immediately (`StrictMock`). Choosing the correct wrapper helps balance between clear test feedback and manageable test maintenance. Proper use improves test clarity, robustness, and debugging ease.

---

## Example

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(void, DoThat, ());
};

using ::testing::NiceMock;
using ::testing::StrictMock;

TEST(MyTest, NiceMockExample) {
  NiceMock<MockFoo> foo;
  EXPECT_CALL(foo, DoThis());

  foo.DoThat();  // No warning or failure generated
  foo.DoThis(); // OK
}

TEST(MyTest, StrictMockExample) {
  StrictMock<MockFoo> foo;
  EXPECT_CALL(foo, DoThis());

  foo.DoThat();  // Test failure: Uninteresting mock function call
  foo.DoThis();  // OK
}
```
