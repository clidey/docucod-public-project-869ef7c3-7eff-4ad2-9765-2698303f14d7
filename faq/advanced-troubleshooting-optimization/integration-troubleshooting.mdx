---
title: "Integration Troubleshooting"
description: "Helps resolve issues when integrating GoogleTest or GoogleMock with build tools, CI environments, and other frameworks. Includes guidance on linking, configuration, and environment compatibility."
---

# Integration Troubleshooting FAQ

This FAQ page is dedicated to helping you resolve common and complex issues encountered when integrating GoogleTest and GoogleMock into your build tools, continuous integration (CI) environments, and other C++ frameworks. It focuses specifically on integration points such as linking, configuration, compatibility, and environment-specific challenges.

---

## 1. Common Integration Challenges

### Why am I getting linker errors when using GoogleTest or GoogleMock in my build?
Linker errors typically occur when your build system is not correctly linking the GoogleTest and GoogleMock libraries. Ensure that:

- The required `.a`, `.lib`, or shared libraries are included in your link commands.
- Source files for GoogleTest/GoogleMock are either compiled into your project or linked appropriately.
- You respect the build tool conventions (e.g., CMake `target_link_libraries` includes `gtest` and `gmock`).

In CMake, you can follow recommended integration steps as detailed in the [Building and Running Tests in Real Projects](https://github.com/google/googletest/tree/main/docs/guides/integration-and-optimization/build-and-run-integration.md) guide.

<Tip>
Using CMake's `FetchContent` or `ExternalProject` for GoogleTest/GoogleMock can simplify dependency management and help avoid linkage issues.
</Tip>

### How should I configure my CI environment to run tests built with GoogleTest and GoogleMock?
Your CI environment should:

- Build the project and all dependencies, including GoogleTest and GoogleMock.
- Run test binaries with the necessary flags to produce XML output for test results, typically `--gtest_output=xml:output.xml`.
- Capture and report test results appropriately.

Refer to the [Continuous Integration Setup](https://github.com/google/googletest/tree/main/docs/guides/integration-and-optimization/continuous-integration-setup.md) documentation for platform-specific instructions and best practices.

<Tip>
Always verify that the CI environment's compilers, build tools, and OS match your local setup's supported platforms to avoid unexpected failures.
</Tip>

### What are common causes of test discovery failures in CI?
- Tests not being registered correctly, possibly due to missing or incorrect initialization calls (e.g., missing `testing::InitGoogleTest(&argc, argv)` or `testing::InitGoogleMock(&argc, argv)`).
- Linker stripping test symbols if optimizations are aggressive.
- Environment variables or command-line arguments not passed in CI.

Ensure your test executable includes a proper `main()` function or links with `gtest_main` or `gmock_main` libraries.

---

## 2. Linking and Build Tool Issues

### How do I link GoogleMock with my project using CMake or Bazel?
- **CMake:** Use `find_package(GTest REQUIRED)` and link your test target with `GTest::gtest_main`, `GTest::gmock`, and `GTest::gmock_main`.

```cmake
find_package(GTest REQUIRED)
target_link_libraries(my_test PRIVATE GTest::gtest_main GTest::gmock GTest::gmock_main)
```

- **Bazel:** Use the `@com_google_googletest//:gtest` and `@com_google_googletest//:gmock` targets and add them as dependencies.

See the [Building and Running Tests](https://github.com/google/googletest/tree/main/docs/guides/integration-and-optimization/build-and-run-integration.md) guide for full examples.

### Why can't I link GoogleMock symbols even though I linked GoogleTest?
GoogleMock is a part of the GoogleTest repository but is a separate library. You must link both GoogleTest and GoogleMock libraries explicitly.

---

## 3. Configuration and Compatibility

### What compiler and platform requirements exist for GoogleTest and GoogleMock?
GoogleTest requires a minimum of C++17 standard. Supported platforms include major OSes like Linux, Windows, and macOS, with compilers such as GCC, Clang, and MSVC.

Check [Supported Platforms and Compilers](https://github.com/google/googletest/tree/main/docs/getting-started/setup-prerequisites-installation/requirements-supported-platforms.md) for detailed and up-to-date compatibility information.

### My tests fail on certain platforms or compilers â€” how do I debug?
- Verify you are meeting the minimum C++ standard.
- Check platform-specific adaptations and compiler flags.
- Review platform macros and environmental dependencies.

The [Portability and Platform Integration](https://github.com/google/googletest/tree/main/docs/concepts/advanced-behaviors/portability-and-platforms.md) guide provides insights and solutions.

<Tip>
Use the GoogleTest verbose flags (`--gtest_verbose`) and GoogleMock verbose flags (`--gmock_verbose=info`) during debugging to get detailed logs.
</Tip>

---

## 4. Environment and Runtime Issues

### Tests do not run or crash unexpectedly in CI but work locally. Why?
- Differences in runtime environment (missing dependencies, different library versions).
- Insufficient resource limits (memory, CPU) causing flaky failures.
- Incorrect test execution commands or missing flags.

Review your CI setup, ensure environment parity, and run tests with detailed logging.

### How do I suppress or manage uninteresting mock calls warnings?
By default, GoogleMock warns on uninteresting calls. To manage these warnings:

- Use `NiceMock<T>` to suppress warnings for uninteresting calls.
- Use `StrictMock<T>` to treat uninteresting calls as errors.
- Provide explicit `EXPECT_CALL` or `ON_CALL` setups to clarify expected mock calls.

Refer to [Nice, Naggy & Strict Mocks](https://github.com/google/googletest/tree/main/api-reference/googlemock-api/nice-strict-mocks.md) for details.

---

## 5. Troubleshooting Tips and Best Practices

### How to verify that GoogleTest and GoogleMock are properly installed?
Run the sample tests that come with the source or your installation. The [Quick Validation Checks](https://github.com/google/googletest/tree/main/docs/getting-started/first-run-validation/quick-validation-checks.md) guide offers step-by-step testing sequences.

### What should I do if I encounter unexpected or excessive mock calls?
- Review your `EXPECT_CALL` clauses for correctness.
- Use `.Times()` and `.RetiresOnSaturation()` to specify call counts and retirement behavior.
- Use sequences (`InSequence`) to control call ordering.

If needed, increase verbosity flags to trace calls:

```bash
--gmock_verbose=info
```

### How to handle dependency or ABI mismatches?
- Ensure consistent compiler versions and flags across build and runtime.
- Avoid mixing shared and static GoogleTest/GoogleMock builds.

---

## 6. Useful Flags and Debugging Controls

| Flag                          | Description                                  |
| ----------------------------- | -------------------------------------------- |
| `--gtest_break_on_failure`    | Break into debugger on assertion failure.  |
| `--gtest_filter`              | Run a subset of tests matching a pattern.  |
| `--gtest_output`              | Produce test output in XML format.           |
| `--gmock_verbose`             | Control GoogleMock verbosity (`info`, `warning`, `error`). |

---

## 7. Getting Additional Help

- GoogleMock Cookbook: [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) offers extensive recipes for common mocking scenarios.
- Integration and optimization guides provide insights on build system best practices.
- The GitHub repository's issue tracker for reporting specific bugs or challenges.

---

## Related Documentation

- [Building and Running Tests in Real Projects](https://github.com/google/googletest/tree/main/docs/guides/integration-and-optimization/build-and-run-integration.md)
- [Continuous Integration with GoogleTest](https://github.com/google/googletest/tree/main/docs/guides/integration-and-optimization/continuous-integration-setup.md)
- [Supported Platforms and Compiler Requirements](https://github.com/google/googletest/tree/main/docs/getting-started/setup-prerequisites-installation/requirements-supported-platforms.md)
- [Nice, Naggy & Strict Mocks](https://github.com/google/googletest/tree/main/api-reference/googlemock-api/nice-strict-mocks.md)
- [Troubleshooting Setup Issues](https://github.com/google/googletest/tree/main/docs/getting-started/first-run-validation/troubleshooting-setup-issues.md)
- [GoogleMock API Reference](https://github.com/google/googletest/tree/main/api-reference/googlemock-api/creating-and-using-mocks.md)

---

If you continue to face issues, consider creating minimal reproducible examples and seek assistance via community forums or the official GitHub project.
