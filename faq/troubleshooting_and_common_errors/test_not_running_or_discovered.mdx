---
title: "Test Not Running or Discovered?"
description: "Helps users diagnose why tests may not be executed or detected, including common misconfigurations or naming errors. Ensures users don’t get stuck when adding or modifying tests."
---

# Test Not Running or Discovered?

When you find that your GoogleTest tests are not running or being detected, this guide helps you methodically diagnose and resolve common causes. Tests that don’t execute can be blocked by naming issues, registration problems, filter or sharding configurations, or test suite setup failures. Follow this FAQ to quickly regain visibility and execution of your tests.

---

## Frequently Asked Questions

### 1. Why are my tests not discovered by the test runner?

**Cause:**
- Test macros not correctly used (e.g., missing `TEST()`, `TEST_F()`, or `TEST_P()`).
- Test names or suite names containing underscores or invalid characters.
- Test registration code not linked or omitted.

**How to Fix:**
- Confirm tests are defined using supported macros: `TEST()`, `TEST_F()`, `TEST_P()`.
- Ensure test suite names and test names are valid C++ identifiers and *do not contain underscores* (GoogleTest requires this to avoid name clashes).
- Build and link the object files containing your tests.
- Use the `--gtest_list_tests` flag to list all discovered tests and verify test programs detect your tests.


### 2. What if my parameterized tests are not running?

**Cause:**
- Defined with `TEST_P` but no corresponding `INSTANTIATE_TEST_SUITE_P` call to instantiate them.
- Missing instantiation of typed or type-parameterized tests.

**How to Fix:**
- Ensure every `TEST_P` has at least one matching `INSTANTIATE_TEST_SUITE_P` to create test instances.
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(FooTest);` if you intentionally want to allow uninstantiated tests, to suppress warnings.


### 3. My tests run but are unexpectedly skipped—why?

**Cause:**
- Test suite or fixture `SetUpTestSuite()` or global test environment `SetUp()` is calling `GTEST_SKIP()`, skipping tests programmatically.
- Test filter or sharding settings exclude your tests from current run.

**How to Fix:**
- Check for use of `GTEST_SKIP()` in global or fixture setup.
- Inspect `--gtest_filter` flag to verify your tests match the filter.
- Review environment variables `GTEST_SHARD_INDEX` and `GTEST_TOTAL_SHARDS` if using test sharding.
- Run the test with `--gtest_also_run_disabled_tests` to include disabled or skipped tests.


### 4. Why am I seeing errors about mixed test fixtures or duplicate test names?

**Cause:**
- Defining tests with the same suite name but different fixture classes.
- Mixing `TEST()` and `TEST_F()` macros in the same test suite.
- Duplicate test names within a suite.

**How to Fix:**
- Use the same fixture class for all tests in a test suite.
- Avoid mixing `TEST()` and `TEST_F()` within the same test suite.
- Rename tests to ensure uniqueness within their suites.


### 5. How do I check whether GoogleTest is correctly parsing my command-line flags affecting test execution?

- Use `--gtest_list_tests` to verify discovered tests according to filtering.
- Use `--gtest_filter=*` to run all tests.
- Check environment variables and flags for filtering, sharding, or skipping:
  - `GTEST_FILTER`
  - `GTEST_SHARD_INDEX`
  - `GTEST_TOTAL_SHARDS`
  - `GTEST_ALSO_RUN_DISABLED_TESTS`


## Common Issues & Gotchas

### Naming Restrictions

- Test suite names and test names must be valid C++ identifiers with **no underscores**.
- Underscores in names cause tests to be ignored or improperly registered.

### Test Registration

- Tests must be linked into the executable.
- If using `TEST_P`, be sure to also provide `INSTANTIATE_TEST_SUITE_P`.
- If you dynamically register tests, ensure the registration happens before `RUN_ALL_TESTS()`.

### Filtering and Sharding

- Filtering by `--gtest_filter` excludes tests not matching the pattern.
- Test sharding splits tests across machines using environment variables. Tests may be skipped if they don't belong to that shard.
- Disabled tests (prefix `DISABLED_`) won’t run unless `--gtest_also_run_disabled_tests` is set.


## Troubleshooting Steps

### Step 1: List all tests

Run your test binary with:

```sh
./your_test_binary --gtest_list_tests
```

Verify your tests appear in the output with correct names.

### Step 2: Run with verbose output

Run tests without filters and watch output:

```sh
./your_test_binary --gtest_filter=*
```

This runs all tests and reports their execution.

### Step 3: Verify test naming

Confirm all test suite and test names follow rules:
- No underscores in test suite or test names.
- Use only valid C++ identifiers (letters, digits, no spaces).

If you have underscores, rename your tests.

### Step 4: Check parameterized test instantiations

Make sure that every `TEST_P` test is paired with `INSTANTIATE_TEST_SUITE_P`. Without instantiation, tests are declared but won’t actually run.

### Step 5: Inspect sharding and filtering

Check if your environment variables and command-line flags limit test execution due to:
- Invalid filters that do not match your tests.
- Sharding environment variables excluding your tests.

Try running without sharding or filters.

### Step 6: Look for skipped setup

Check if any global setups or `SetUpTestSuite()` methods call `GTEST_SKIP()`. Such calls will skip entire test suites.

### Step 7: Avoid mixing macro types in suites

Ensure no mixing of `TEST()` and `TEST_F()` in the same test suite.

---

## Best Practices for Test Discovery

- Define tests with `TEST()` or fixtures with `TEST_F()`, ensuring valid naming.
- For parameterized tests, define with `TEST_P` and always instantiate with `INSTANTIATE_TEST_SUITE_P`.
- Maintain consistent fixture usage per test suite.
- Avoid disabling tests without clear intent; disabled tests are not run unless overridden.
- Use filters cautiously, test with `--gtest_list_tests` to verify inclusion.


## Additional Tips

- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(FooTest);` to suppress errors when an unused parameterized test suite is intentionally uninstantiated.
- Use `--gtest_also_run_disabled_tests` flag during debugging to run disabled tests.
- Remember, GoogleTest requires tests’ names to be valid identifiers without underscores to avoid registration errors.

## Related Topics

- [Basic Test Writing Guide](../guides/getting-started-workflows/first-cpp-test.md)
- [Parameterized Tests](../guides/advanced-testing-patterns/parameterized-tests.md)
- [Running and Filtering Tests](../guides/getting-started-workflows/building-and-running-tests.md)
- [Debugging Failing or Missing Tests](../faq/troubleshooting_and_common_errors/fixing_compilation_and_linking_errors.md)
- [GoogleTest Primer](../docs/primer.md)


## Troubleshooting Example

```cpp
// Incorrect: Use of underscores in test suite and test name.
TEST(My_TestSuite, My_Test) {  // Will not be discovered!
  EXPECT_TRUE(true);
}

// Correct:
TEST(MyTestSuite, MyTest) {
  EXPECT_TRUE(true);
}

// Parameterized test without instantiation (won't run):
TEST_P(FooTest, DoesSomething) {
  EXPECT_TRUE(SomeCode(GetParam()));
}

// Fix by adding: 
INSTANTIATE_TEST_SUITE_P(MyInstantiation, FooTest, testing::Values(1, 2, 3));
```

---

Remember, GoogleTest discovers and runs only those tests correctly defined and properly registered. Following the above will restore test discovery and execution efficiency.


---

*This documentation is based on official GoogleTest references and best practices for test maintenance.*
