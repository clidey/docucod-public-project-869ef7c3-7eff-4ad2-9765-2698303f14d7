---
title: "Common Installation and Integration Issues"
description: "Answers to the most frequent problems encountered during GoogleTest and GoogleMock installation or integration—including missing files, build errors, and linker problems—with actionable steps to resolve them quickly."
---

# Common Installation and Integration Issues

This page addresses the most frequent problems encountered during the installation or integration of GoogleTest and GoogleMock. It covers symptoms such as missing header files, build errors, linker problems, and runtime warnings, providing practical, clear solutions to help you get up and running quickly.

---

## Frequently Encountered Issues & How to Fix Them

### 1. Missing `gmock/gmock.h` or `gtest/gtest.h` Header Files

**Problem:** Your compiler cannot find GoogleMock or GoogleTest header files during build.

**Cause:** The include directories are not correctly set in your build system.

**Solution:**
- If you built GoogleTest/GoogleMock separately, ensure you add the include directory path (usually the repository’s `googletest/include` and `googlemock/include` directories) to your compiler's header search paths.
- When using CMake as your build system, you can incorporate GoogleTest by either:
  - Using `find_package(GTest CONFIG REQUIRED)`, then linking your target against `GTest::gtest` and/or `GTest::gmock`.
  - Embedding GoogleTest source via `add_subdirectory()` to share the build settings and include paths.
- Verify your include statements use the correct paths, e.g., `#include <gmock/gmock.h>` for GoogleMock, and `#include <gtest/gtest.h>` for GoogleTest.

<Tip>
To avoid common include path problems, prefer building GoogleTest and GoogleMock as part of your project's build via `add_subdirectory()`. This ensures consistent toolchain settings and reduces path issues, especially on Windows.
</Tip>

### 2. Build Errors Related to C++ Standard Version

**Problem:** Compiler errors arise indicating unsupported syntax or features.

**Cause:** The project or your environment does not use at least C++17, which GoogleTest requires.

**Solution:**
- Set your build to use C++17 or newer (e.g., add `-std=c++17` or equivalent) in your compiler flags.
- In CMake, specify this explicitly:
  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```
- If integrating GoogleTest as a CMake subdirectory, ensure the parent project enforces C++17.

<Check>
Always confirm your compiler supports C++17 and that these settings propagate properly to GoogleTest builds.
</Check>

### 3. Linker Errors: Unresolved External Symbols for GoogleTest or GoogleMock

**Problem:** During linking, you encounter errors such as missing symbols from `gtest` or `gmock`.

**Cause:** The test executable is not linked with the correct GoogleTest/GoogleMock libraries.

**Solution:**
- Link your test targets against `gtest`, `gtest_main`, `gmock`, or `gmock_main` libraries as needed.
- When using CMake with imported targets from find_package, do:
  ```cmake
  target_link_libraries(your_test_target PRIVATE GTest::gtest_main GTest::gmock)
  ```
- If you built GoogleTest/GoogleMock standalone, ensure you link against the installed static or shared libraries and provide the correct linker paths.
- For Windows using Visual Studio, watch for issues related to consistent runtime libraries (see Visual Studio runtimes below).

<Warning>
Failing to link with `gtest_main` or `gmock_main` can prevent your tests from having the main entry point. Ensure you link one of them or provide your own `main()`.
</Warning>

### 4. Runtime Warnings about Uninteresting or Unexpected Mock Calls

**Problem:** You see warnings such as "Uninteresting function call encountered" or test failures from unexpected mock calls.

**Cause:** Mock methods are called in unexpected ways, or no expectations are set for some calls.

**Solution:**
- Use `EXPECT_CALL` to specify expected calls explicitly.
- Use `ON_CALL` to specify default behaviors for mock methods when you are not interested in verifying call counts.
- To suppress warnings about uninteresting calls, wrap your mock object with `NiceMock<T>`.
- To fail on unexpected calls to mocks without expectations, use `StrictMock<T>`.

<Tip>
Setting `--gmock_verbose=info` when running tests lets you trace mock call matching, helping diagnose unexpected or missing expectations.
</Tip>

### 5. CMake Configuration Issues

**Problem:** GoogleTest or GoogleMock is not found or configured properly by CMake.

**Cause:** Missing or misconfigured package discovery or incorrect CMake variables.

**Solution:**
- Use `FetchContent` or add GoogleTest as a subdirectory to avoid external dependency issues.
- Specify `set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)` on Windows if you want your runtime linkage to match your project's dynamically linked CRT.
- Confirm your CMake version is at least 3.14 if you use `FetchContent_MakeAvailable()`.

<Note>
If multiple versions of GoogleTest are installed in the system, ensure your build picks up the right one by setting `CMAKE_PREFIX_PATH` or specific variables.
</Note>

### 6. Visual Studio Runtime Library Mismatches

**Problem:** Linker error like:
```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' doesn't match value 'MDd_DynamicDebug' in main.obj
```

**Cause:** GoogleTest built with static runtime, your project is built with dynamic runtime or vice versa.

**Solution:**
- When using CMake, set `gtest_force_shared_crt` option to `ON` to force GoogleTest to link dynamically the CRT and reconcile with your project.
- Alternatively, build your project with the static runtime to match GoogleTest's default.

### 7. Tests Not Running or No Tests Detected

**Problem:** When executing the test binary, it exits immediately without running any tests.

**Cause:** Possible causes include missing linkage to `gtest_main`, missing test registrations, or incorrect test suite definitions.

**Solution:**
- Ensure your test executable links with `gtest_main` or defines its own `main()`.
- Double-check your test cases are using Google's macros `TEST`, `TEST_F`, or `TEST_P`.
- Verify that tests are registered by inspecting output with `--gtest_list_tests`.

---

## Troubleshooting and Verification Steps

<Steps>
<Step title="Verify Include Paths">
Check your compiler's include paths to ensure `gtest` and `gmock` headers are reachable. Use verbose compiler output if necessary.
</Step>
<Step title="Confirm C++17 Standard">
Verify your build system enforces C++17 or later, adjusting compiler options as needed.
</Step>
<Step title="Check Linker Input">
Confirm that your test target links with the proper GoogleTest and GoogleMock libraries.
</Step>
<Step title="Test Verbosity Flags">
Use `--gmock_verbose=info` when running tests to get detailed mock call traces.
</Step>
<Step title="Visual Studio Runtime Consistency">
On Windows, match runtime library linkage between GoogleTest and your project, toggling `gtest_force_shared_crt`.
</Step>
</Steps>

---

## Best Practices to Avoid Pitfalls

- Prefer building GoogleTest and GoogleMock as part of your project using `add_subdirectory()` or `FetchContent` to maintain compiler/linker consistency.
- Use `NiceMock` to suppress spurious warnings from uninteresting calls during early test development.
- Always set expectations before exercising mocked objects to avoid undefined behavior.
- Clearly specify mock method signatures using `MOCK_METHOD` with correct qualifiers to prevent mysterious mismatches.
- Keep your build system up to date and consistent, especially when upgrading GoogleTest versions.

---

## Additional Resources & Cross-References

- [Installation Options](../../getting-started/setup-and-installation/installation-options) – Detailed build setup
- [Configuration & Verification](../../getting-started/setup-and-installation/configuration-verification) – Setup validation
- [Troubleshooting and Common Issues](../../getting-started/first-test-experience/troubleshooting-and-common-issues) – General tips
- [Mocking APIs](../../api-reference/mocking-apis/mock-classes-methods) – For mocking class definitions
- [Mock Expectations and Actions](../../api-reference/mocking-apis/mock-expectations-actions) – For setting expectations

---

If you continue to experience issues, consider seeking help through the GoogleTest GitHub [issues page](https://github.com/google/googletest/issues) or community forums.

---