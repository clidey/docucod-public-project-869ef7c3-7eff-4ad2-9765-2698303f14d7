---
title: "How do I write and run my first test?"
description: "Clarifies the essential steps for authoring simple tests, running them, and interpreting the results. Highlights tips for structuring your test code and common pitfalls that new users often face."
---

# How do I write and run my first test?

This documentation guides you through the foundational steps needed to write your first simple test using GoogleTest and GoogleMock, run it, and effectively interpret the results. It offers practical advice on structuring your test code and highlights common pitfalls that newcomers often face, helping you build confidence in getting started quickly.

---

## 1. Writing Your First Simple Test

Writing your first test with GoogleTest is straightforward and rewarding. Here’s the typical user flow:

<Steps>
<Step title="Include the GoogleTest Header">
Make sure to include `<gtest/gtest.h>` at the top of your test file. This brings in all the necessary testing macros and utilities.
</Step>
<Step title="Write a Test Using the TEST Macro">
Use the `TEST(TestSuiteName, TestName)` macro to define a test case. For example:

```cpp
#include <gtest/gtest.h>

TEST(ExampleTest, AdditionWorks) {
  EXPECT_EQ(2 + 2, 4);
}
```

This simple test verifies that the addition behaves as expected.
</Step>
</Steps>

### Quick Tips

- Choose descriptive names for your test suite and test so failures are easy to understand.
- Use the `EXPECT_` family of assertions to check results; these allow tests to continue after failures to gather multiple errors.

---

## 2. Running Your Test

Once you have created your test source file:

1. **Compile your test:** Link against GoogleTest libraries (`gtest`, `gtest_main`, `gmock`, `gmock_main` as needed).
2. **Run the test executable:** Upon execution, GoogleTest will automatically discover and run all tests.

Example console output for a successful test run looks like this:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.AdditionWorks
[       OK ] ExampleTest.AdditionWorks (0 ms)
[----------] 1 test from ExampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If tests fail, GoogleTest provides a detailed report showing the failure location, expected and actual values, and stack traces.

---

## 3. Authoring Tests with GoogleMock

To test components that depend on other classes or interfaces, GoogleMock helps you create mock objects with controllable behavior.

### Writing a Simple Mock Class

1. **Create a mock class inheriting from the interface you want to mock.**
2. Use `MOCK_METHOD` macros in the `public:` section to mock virtual methods.

For example, mocking a simple `Turtle` interface:

```cpp
#include <gmock/gmock.h>

class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};
```

### Setting Expectations and Using Mocks

```cpp
using ::testing::AtLeast;
using ::testing::_;
using ::testing::Return;

TEST(PainterTest, DrawsCircle) {
  MockTurtle mock_turtle;

  EXPECT_CALL(mock_turtle, PenDown())
      .Times(AtLeast(1));
  EXPECT_CALL(mock_turtle, Forward(_))
      .Times(AtLeast(1));

  Painter painter(&mock_turtle);
  EXPECT_TRUE(painter.DrawCircle(0, 0, 10));
}
```

- `EXPECT_CALL` sets the expectation that certain methods will be called; if these are violated, your test will fail immediately.
- Use matchers like `_` to express general expectations (here `Forward` called with any int).

---

## 4. Interpreting Test Results

- **Pass:** Your test will print `[  PASSED  ]` with timing.
- **Fail:** GoogleTest outputs:
  - The source file and line number of failure.
  - The expected condition and actual values.
  - Optionally, stack trace and user messages.

Always review failure messages carefully; they help identify why a test failed and where.

---

## 5. Common Pitfalls and How to Avoid Them

### Not Setting Up Expectations Before Calls

Expectations must be set *before* the code under test exercises the mock. Setting expectations afterward leads to undefined behavior and confusing errors.

### Misspelled Matchers and Methods

Verify method names and matcher usage. Use `--gmock_verbose=info` flag during test runs to see mock function invocation details.

### Over-Specifying Expectations

Avoid setting overly strict expectations; mock should verify key behaviors—not every detail— to reduce test brittleness.

### Forgetting to Link Required Libraries

Ensure your project correctly links `gtest`, `gmock`, and their corresponding main libraries to avoid linker errors.

---

## 6. Structuring Test Code

- Keep your test files small and focused on one component.
- Use test fixtures (`TEST_F`) for shared setup and teardown steps.
- Write clear and descriptive test names.

---

## 7. Troubleshooting Your First Test

If your tests fail or do not behave as expected:

- Run with `--gmock_verbose=info` to obtain detailed mock call traces.
- Verify that your mock methods are *virtual* and properly overridden with `MOCK_METHOD`.
- Confirm your expectations (e.g., argument matchers, call count) accurately reflect the intended behavior.
- Check that you have not missed required qualifiers like `override` or `const`.
- Consult the GoogleTest and GoogleMock [FAQs](https://google.github.io/googletest/gmock_faq.html) for known issues.

---

## 8. Next Steps

Explore the following documentation for deeper mastery:

- [GoogleTest Primer](../docs/primer.md) — Learn about test writing basics.
- [Mocking Basics with GoogleMock](../guides/core-workflows/mocking-basics.md) — Dive into mock creation and usage.
- [Advanced Assertions and Matchers](../guides/core-workflows/advanced-assertions-matchers.md) — Enhance verification with matchers.
- [Troubleshooting Common Issues](../../getting-started/troubleshooting-validation/common-issues.md) — Get help diagnosing failures.

Well-written tests are your first step toward robust, maintainable applications. Start testing confidently today!

---

## Related Documentation

- [Mocking Cookbook](../docs/gmock_cook_book.md) — Advanced mocking how-tos.
- [Legacy gMock FAQ](../docs/gmock_faq.md) — Common questions and answers.
- [Mock Method Macros Reference](../api-reference/mocking/mock-methods.md) — Understand `MOCK_METHOD` usage.
- [Setting Expectations & Cardinalities](../api-reference/mocking/expectations.md) — Control call counts and order.

---

For source and examples, see the [GoogleMock GitHub Repository](https://github.com/google/googletest/tree/main/googlemock).


