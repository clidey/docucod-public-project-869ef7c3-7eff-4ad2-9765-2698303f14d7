---
title: "How do I install and set up GoogleTest and GoogleMock?"
description: "Step-by-step answers to common installation and configuration questions, including supported platforms, build system integration, and resolving setup issues. Provides practical guidance for new users to get started with minimal friction."
---

# How do I install and set up GoogleTest and GoogleMock?

This FAQ page provides detailed, step-by-step answers to common installation and setup questions for GoogleTest and GoogleMock. Whether you're starting fresh or integrating into an existing project, the information here will help you get up and running with minimal friction.

---

## 1. What are GoogleTest and GoogleMock?

GoogleTest (gtest) is a widely-used C++ testing framework enabling reliable and maintainable test development. GoogleMock (gmock), part of the Googletest suite, is the C++ mocking framework that helps you define and use mock objects effectively for unit testing.

## 2. Which platforms and compilers are supported?

- **Platforms:** Linux, Windows, macOS
- **Compiler Versions:** GCC 7.0+, MSVC 2015+, Clang with C++17 support
- **C++ Standard:** Requires C++17 or later.

<Tip>
Ensure your build environment enables C++17 via compiler flags or build system settings (e.g., `set(CMAKE_CXX_STANDARD 17)` in CMake).
</Tip>

## 3. How do I install GoogleTest and GoogleMock?

### Option 1: Clone and Build Standalone

1. Clone the repository (replace the branch tag as needed):

```bash
  git clone https://github.com/google/googletest.git -b v1.17.0
```

2. Navigate into the cloned directory and create a build folder:

```bash
  cd googletest
  mkdir build && cd build
```

3. Generate build files with CMake:

```bash
  cmake ..  # includes GoogleMock by default
```

If you want **only GoogleTest** (without mocks), run:

```bash
  cmake .. -DBUILD_GMOCK=OFF
```

4. Build the libraries:

```bash
  make
```

5. (Optional) Install system-wide:

```bash
  sudo make install
```

 - On Windows with Visual Studio, use the generated `.sln` file to build.
 - On macOS with Xcode, open the `.xcodeproj` file.

### Option 2: Integrate Into Your Own CMake Project

- Use `find_package(GTest CONFIG REQUIRED)` if GoogleTest is already installed.
- Preferably, include GoogleTest as a subdirectory with `add_subdirectory()` for consistent compiler and linker flags:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(your_tests test_file.cpp)
target_link_libraries(your_tests gtest_main gmock_main)
add_test(NAME your_tests COMMAND your_tests)
```

<Tip>
Ensure CMake version is at least 3.14 to use `FetchContent_MakeAvailable()`.
</Tip>

## 4. What libraries do I link against?

Depending on your use case, link your test executables to the following:

- **GoogleTest only:** `gtest` or `gtest_main` (which provides a default `main`).
- **GoogleMock (GoogleTest + mocks):** `gmock` or `gmock_main` (includes mocks and default `main`).

Example linking with GoogleMock default main:

```cmake
target_link_libraries(your_test_target gmock_main)
```

If you define your own `main()`, link against `gmock` or `gtest` only.

## 5. How do I run my tests?

- The libraries like `gtest_main` and `gmock_main` provide a standard entry point `main()` that initializes GoogleTest and runs all registered tests.
- Call `testing::InitGoogleTest(&argc, argv);` in your `main()` before invoking `RUN_ALL_TESTS()`.
- The `RUN_ALL_TESTS()` returns `0` on success, or `1` on failure, which should be propagated as your program exit code.

Example custom main function:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Tip>
Most users benefit from linking to `gmock_main` or `gtest_main` so they do not have to write a main function.
</Tip>

## 6. How do I handle multi-threading and platform-specific build quirks?

- GoogleTest is thread-safe on platforms with pthread support.
- For environments where pthread detection fails, force it on/off via compiler flags:

```bash
-DGTEST_HAS_PTHREAD=1
-DGTEST_HAS_PTHREAD=0
```

- For Visual Studio projects, if you face runtime library mismatch errors (e.g., static vs dynamic CRT), enable dynamic CRT linkage in GoogleTest:

```cmake
-Dgtest_force_shared_crt=ON
```

## 7. What if GoogleTest macros conflict with other libraries?

You can push GoogleTest to rename its macros by disabling their default definition, for example:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

This means you'll need to explicitly use `GTEST_TEST()` instead of `TEST()`.

## 8. How do I troubleshoot installation or setup issues?

- Verify that include paths contain the GoogleTest and GoogleMock headers.
- Ensure the linked libraries match your project configuration (debug vs release).
- Confirm your compiler enforces C++17 or later.
- Check your build system integration guide for your build tool (e.g., CMake or Bazel).
- Consult the [Troubleshooting Common Issues](../getting-started/troubleshooting-validation/common-issues) for step-by-step guidance on frequent build or link errors.

## 9. Where can I find example projects and further help?

- The repository contains sample test code demonstrating initial test setup and mocks.
- The [GoogleTest Primer](../docs/primer.md) is an excellent next step after installation.
- Explore [Mocking for Dummies](gmock_for_dummies.md) to learn about mocking.
- Consult [Integration and Optimization](../guides/integration-and-optimization/build-system-integration) for advanced build setup with CMake and Bazel.

---

# Summary of Installation and Setup Workflow

<Steps>
<Step title="Clone or Download GoogleTest">
Fetch source code from the official repository.
</Step>
<Step title="Build using CMake or integrate">
Generate build files with CMake or add GoogleTest sources to your project.
</Step>
<Step title="Compile Libraries">
Compile gtest and gmock libraries, along with your tests.
</Step>
<Step title="Link Test Executables">
Link against `gtest_main`/`gmock_main` or provide a custom main.
</Step>
<Step title="Run Tests">
Execute your tests, verify all tests pass.
</Step>
</Steps>

<Info>
Following this structured approach ensures quick setup and smooth integration of GoogleTest and GoogleMock into your C++ projects.
</Info>

---

## Related Documentation

- [Configuring Your Project](../getting-started/configuration-first-run/configure-project) â€” Setting include paths and linking
- [Writing and Running Your First Test](../getting-started/configuration-first-run/write-first-test)
- [Common Issues and Troubleshooting](../getting-started/troubleshooting-validation/common-issues)
- [Build System Integration (CMake and Bazel)](../guides/integration-and-optimization/build-system-integration)
- [GoogleMock Introduction and Usage](googlemock/README.md)

---

## Practical Tips

- Always ensure the same compiler and standard settings are used for your tests and GoogleTest libraries to avoid ABI and linker problems.
- Taking advantage of `gmock_main` and `gtest_main` reduces boilerplate code.
- Keep your GoogleTest version up to date with your source via submodules or fetch during build to avoid incompatibilities.
- Leverage verbose logging by passing `--gtest_verbose=info` on test execution to diagnose test discovery issues.

---

This page equips you with actionable knowledge to install, configure, and successfully run GoogleTest and GoogleMock with confidence.

---