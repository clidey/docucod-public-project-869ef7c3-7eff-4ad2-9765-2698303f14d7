---
title: "Installation and Setup Questions"
description: "Covers common issues users face when installing or building GoogleTest and GoogleMock, including platform requirements, C++ version support, and typical integration hurdles. Provides quick solutions to get you up and running."
---

# Installation and Setup Questions FAQ

This FAQ addresses frequent concerns encountered while installing and building GoogleTest and GoogleMock, helping you verify system compatibility, resolve common build issues, and successfully integrate the frameworks into your environment.

---

## 1. What are the minimum system requirements for building GoogleTest and GoogleMock?

GoogleTest and GoogleMock require a modern C++ environment with **C++17 standard support**.

- Supported platforms include Linux, Windows, and macOS.
- An appropriate compiler (e.g., GCC 7+, Clang 5+, MSVC 2017+) with C++17 features enabled.
- Build tools such as CMake (version 3.13 or newer for best compatibility).
- Threading support (POSIX threads or equivalent) recommended for thread safety.

Ensure your system meets these prerequisites to avoid compilation and linking errors.

> For detailed requirements, see the [System Requirements guide](/getting-started/prerequisites-installation/system-requirements).


## 2. How do I build GoogleTest and GoogleMock using CMake?

GoogleTest provides a CMake-based build system that can be used standalone or incorporated into your existing project:

<Steps>
<Step title="Clone the GitHub repository">
Run:
```sh
git clone https://github.com/google/googletest.git -b main
downloaded_dir/googletest
```
This fetches the latest source code, including GoogleMock.
</Step>
<Step title="Create and switch to a build directory">
```sh
mkdir build
cd build
```
Keeps build files separate from source.
</Step>
<Step title="Configure with CMake">
```sh
cmake ..
```
Optionally, disable GoogleMock if not needed:
```sh
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the libraries">
On Linux/macOS:
```sh
make
```
On Windows, build using Visual Studio from generated solutions.
</Step>
<Step title="Install the libraries (optional)">
```sh
sudo make install
```
Installs to system paths by default.
</Step>
</Steps>

>The build script compiles both GoogleTest (`gtest`) and GoogleMock (`gmock`) libraries by default, and generates umbrella `gtest_main` and `gmock_main` binaries that provide `main()` functions to run tests seamlessly.

## 3. What common errors might I encounter during installation or build?

<AccordionGroup title="Common Build and Setup Issues">
<Accordion title="Missing Headers or Source Files">
- Ensure the repository is fully cloned including subdirectories `googletest` and `googlemock`.
- Running CMake from the root of a properly cloned repo avoids missing source errors.
- Using `add_subdirectory()` in your own CMakeLists.txt must correctly point to these sources.
</Accordion>
<Accordion title="Linker Errors or Undefined Symbols">
- Verify you link your tests against the correct libraries: `gtest`, `gmock`, or their `_main` variants.
- When building shared libraries, use the `-DGTEST_CREATE_SHARED_LIBRARY=1` and `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` flags.
- Make sure threading libraries are correctly linked; CMake handles this if `find_package(Threads)` is called.
</Accordion>
<Accordion title="Wrong C++ Standard Version">
- Build failures due to unsupported features hint at missing C++17 or later.
- Confirm with your build system that the standard is set, e.g., `set(CMAKE_CXX_STANDARD 17)` in CMake.
</Accordion>
</AccordionGroup>

## 4. How do I integrate GoogleTest and GoogleMock into my existing CMake project?

You can incorporate the sources as a git submodule, download externally, or embed directly and then use CMakeâ€™s `add_subdirectory()` to build GoogleTest/GoogleMock alongside your code.

In your top-level `CMakeLists.txt`:

```cmake
add_subdirectory(path/to/googletest)

add_executable(your_test test.cpp)
target_link_libraries(your_test GTest::gtest_main GMock::gmock_main)
add_test(NAME your_test COMMAND your_test)
```

This approach ensures consistent compiler and linker flags, avoiding mismatch errors especially on Windows.

## 5. Are there platform-specific considerations for building GoogleTest and GoogleMock?

- On Windows, Visual Studio projects are generated; watch out for runtime library mismatches between your project and GoogleTest usage.
- Use the `gtest_force_shared_crt` flag in CMake to align runtime library settings.
- For cross-compilation or embedded environments, some features such as threading support or exceptions may need adjustment.
- On platforms without pthreads, GoogleTest attempts to use native threading APIs if available.

Please review platform-specific guides and troubleshooting sections linked below for tailored advice.

## 6. How to verify that my installation and build were successful?

- Build the GoogleTest and GoogleMock libraries without errors.
- Compile and run the provided sample test programs or create a simple test case with `TEST()` macros.
- Running the test executable should report successful test runs, e.g.: 

```console
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[ RUN      ] ExampleTest.SimpleTest
[       OK ] ExampleTest.SimpleTest (0 ms)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

- Use `ctest` or `make test` in the build directory to run predefined tests.

---

# Troubleshooting Tips

### Problem: `fatal error: gtest/gtest.h: No such file or directory`

- This means the compiler cannot find GoogleTest headers.
- Ensure your include paths are set correctly.
- If you use CMake, link to `GTest::gtest` target to pull include dirs automatically.

### Problem: Linking error: undefined references to GoogleTest or GoogleMock symbols

- Verify the correct libraries are linked (`gtest`, `gtest_main`, `gmock`, or `gmock_main`).
- If building shared libraries, confirm runtime and compiler options match.
- For custom build systems, manually specify threading libraries.

### Problem: Test executable crashes or fails immediately

- Confirm your test's `main()` function calls `testing::InitGoogleTest(&argc, argv)` and returns `RUN_ALL_TESTS()` result.
- Link against `gtest_main` or `gmock_main` to have main() provided.

---

# Best Practices and Recommendations

- Prefer using `gtest_main` and `gmock_main` libraries to avoid writing your own `main()` unless customization is needed.
- Keep GoogleTest and GoogleMock sources in sync to prevent ABI incompatibilities.
- Use consistent compiler flags across your tests and GoogleTest libraries to avoid conflicts.
- If multithreading support is required, ensure pthread is available or explicitly enabled.
- Build GoogleTest as a static library for simpler deployment unless a shared library is necessary.

---

# Getting Further Help

If problems persist:

- Check the official [GoogleTest GitHub Repository](https://github.com/google/googletest) for issues.
- Consult the [Troubleshooting Common Setup Issues](/getting-started/troubleshooting/common-errors) guide.
- Ask in community forums or Stack Overflow with the `googletest` tag.

---

# Related Documentation

- [System Requirements](/getting-started/prerequisites-installation/system-requirements)
- [Installing with CMake](/getting-started/prerequisites-installation/install-via-cmake)
- [Troubleshooting Common Setup Issues](/getting-started/troubleshooting/common-errors)
- [Integration with Build Systems and CI](/guides/advanced-practices/integration-build-systems)
- [Writing Your First Test](/guides/getting-started/your-first-test)

---

# Example: Minimal CMakeLists.txt snippet to add GoogleTest

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTests CXX)

# Enable testing
include(CTest)

# Download and add GoogleTest
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/heads/main.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_test test.cpp)
target_link_libraries(my_test GTest::gtest_main GMock::gmock_main)

add_test(NAME my_test COMMAND my_test)
```

---

# Summary
This FAQ equips you to verify system prerequisites, perform correct installation and builds using CMake, handle common errors, and integrate GoogleTest and GoogleMock smoothly into your projects. Following the described flows ensures a solid foundation for building and maintaining reliable C++ test suites with GoogleTest.
