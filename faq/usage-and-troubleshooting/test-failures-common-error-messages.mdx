---
title: "How do I interpret common test failures and error messages?"
description: "Explains the most frequent assertion failures, mock expectation mismatches, and error messages encountered during test runs, with tips for resolving them. Helps users to quickly debug and fix problems in their unit tests."
---

# How do I interpret common test failures and error messages?

This page explains the most frequent assertion failures, mock expectation mismatches, and error messages encountered during test runs, with tips for resolving them. It is designed to help you swiftly understand test diagnostics produced by GoogleTest and GoogleMock and take effective action to fix problems in your unit tests.

---

## 1. Understanding Assertion Failures

Assertion failures are the most direct signal that a test has failed. These failures typically report what was expected, what was actually observed, and where in your code the failure occurred.

### Key Points
- **EXPECT_ vs ASSERT_**: `EXPECT_` assertions generate non-fatal failures and allow tests to continue, while `ASSERT_` assertions cause immediate test abort.
- **Custom Messages**: Assertions often include custom messages to clarify intent.
- **Common patterns**: Use common assertions like `EXPECT_EQ`, `EXPECT_TRUE`, `EXPECT_THROW`, and `EXPECT_DEATH` to validate behavior.

### Example failure message:

```text
path/to/my_test.cc:119: Failure
Actual function call count doesn't match this expectation:
  Expected: called at least once.
  Actual: never called.
Stack trace:
...
```

This indicates the test expected one or more calls to a function, but none happened.

### How to resolve:
- Review your expectation conditions.
- Ensure that the function under test is invoked correctly.
- Check that any prerequisite setup was done properly.

---

## 2. Common Mock Expectation Mismatches

Mock failures are often about expectations set on mock objects that did not occur as planned. These fall into several categories:

### Unexpected Calls
- Occur when a function is called with arguments that do not match any set expectations.

**Typical error snippet:**

```
Unexpected mock function call - returning default value.
 Function call: DoB(2)
Google Mock tried the following 1 expectation, but it didn't match:
...
```

**Troubleshooting:**
- Check that your `EXPECT_CALL` statements include the arguments you expect.
- Use argument matchers (like `_`, `Eq()`, `Ge()`) carefully.
- Run tests with `--gmock_verbose=info` to trace mock function calls.

### Unsatisfied Expectations
- Occur when an expected call does not happen or is called fewer times than specified.

**Typical error snippet:**

```
Actual function call count doesn't match EXPECT_CALL...
  Expected: to be called at least once
  Actual: never called - unsatisfied and active
```

**Troubleshooting:**
- Verify that your code exercised the mock in the expected way.
- Confirm the mock instance used is the one your code interacts with.

### Excessive Calls
- Occur when a mock method is called more times than expected.

**Typical error snippet:**

```
Mock function called more times than expected - returning default value.
 Function call: DoB(2)
 Expected: to be called once
 Actual: called twice - over-saturated and active
```

**Troubleshooting:**
- Adjust `.Times()` on `EXPECT_CALL` to allow expected call counts.
- Use `.RetiresOnSaturation()` to let expectations retire after matching expected calls.

### Mismatched Arguments
- An expected call was made but arguments didn't match exactly.

**Typical snippet:**

```
Expected arg #0: is equal to 1
Actual: 2
```

**Troubleshooting:**
- Use argument matchers that correctly express your intent.
- For complex arguments, consider combining matchers like `AllOf`, `Pointee`, or defining custom matchers.

### Unsatisfied Pre-requisites
- When ordered expectations haven’t met the prerequisite calls.

**Typical snippet:**

```
The following immediate pre-requisites are not satisfied:
  - pre-requisite #0
  - pre-requisite #1
```

**Troubleshooting:**
- Verify that calls are made in the correct order when sequences or `.After()` clauses are used.
- Trace whether prerequisite expectations were called as anticipated.

---

## 3. Uninteresting Calls and Mock Strictness Levels

By default, calls to mock methods without any `EXPECT_CALL` are "uninteresting". Google Mock handles these based on mock strictness:

| Mock Type       | Behavior on Uninteresting Calls    |
| --------------- | --------------------------------- |
| **NaggyMock** *(default)* | Warnings are printed but test continues. |
| **NiceMock**    | Suppresses warnings, calls proceed silently. |
| **StrictMock**  | Treats uninteresting calls as errors, failing the test. |

### Example warning from uninteresting call:

```
GMOCK WARNING:
Uninteresting mock function call - returning default value.
  Function call: DoB(1)
NOTE: You can safely ignore the above warning unless this call should not happen.
```

### Controlling uninteresting call behavior:
- Use `NiceMock<>` or `StrictMock<>` wrappers to alter behavior per object.
- Make catch-all `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` to explicitly allow calls.

---

## 4. Tips for Effective Debugging

### a) Enable Verbose Logging
Run your tests with `--gmock_verbose=info` to get detailed logs of expectations, mock calls, and unmatched calls including stack traces.

### b) Analyze Stack Traces
Stack traces pinpoint where expectations were set and where unexpected calls occurred, accelerating root cause identification.

### c) Use Sequences and `After()`
Enforce call order using `Sequence` objects or `.After()` clauses to catch unexpected call orders.

### d) Simplify Argument Matching
Use wildcards `_` or broad matchers when call arguments don't matter to avoid brittle expectations.

### e) Retire Expectations Explicitly
Apply `.RetiresOnSaturation()` to avoid upper-bound violated errors due to sticky expectations.

### f) Check Mock Object Lifetime
Ensure your mock objects are destructed properly to trigger automatic expectation verification or call `Mock::VerifyAndClearExpectations()` manually.

### g) Diagnose Uninteresting Call Warnings
If you see warnings about uninteresting calls you expect, consider adding explicit `EXPECT_CALL(...).Times(AnyNumber())` or use `NiceMock` to suppress them deliberately.

---

## 5. Examples of Common Error Messages and What They Mean

### Example 1: Unexpected Call
```
Unexpected mock function call - returning default value.
 Function call: Bar(2)
Google Mock tried the following 1 expectation, but it didn't match:
  Expected arg #0: is equal to 1
  Actual: 2
```
**Meaning:** Your code called `Bar(2)`, but expected `Bar(1)`.

### Example 2: Too Few Calls
```
Actual function call count doesn't match EXPECT_CALL...
  Expected: to be called twice
  Actual: called once - unsatisfied and active
```
**Meaning:** The function was expected to be called twice, but was called only once.

### Example 3: Excessive Call
```
Mock function called more times than expected - returning default value.
 Function call: GetNumber()
 Expected: to be called once
 Actual: called twice - over-saturated and active
```
**Meaning:** Function `GetNumber()` was called more times than allowed.

### Example 4: Call Order Violation
```
Unexpected mock function call
 The following immediate pre-requisites are not satisfied:
  - pre-requisite #0
```
**Meaning:** A call was made before its required prerequisite calls.

---

## 6. Troubleshooting Workflow

<Steps>
<Step title="Identify the Failure Type">
Determine whether the failure is an assertion failure, unexpected call, unsatisfied expectation, or uninteresting call warning.
</Step>
<Step title="Check Error Message Details">
Read expected versus actual values; note line numbers and stack traces.
</Step>
<Step title="Reproduce Failure with Verbose Logging">
Run tests adding `--gmock_verbose=info` to observe detailed mock call traces.
</Step>
<Step title="Review Your Mock Setup">
Check `EXPECT_CALL` and `ON_CALL` statements for correct argument matchers, cardinalities, sequences, and orderings.
</Step>
<Step title="Adjust Expectations or Mock Behavior">
Modify mock specifications to align with your real test scenarios, employing wildcard matchers, relaxing call counts, or adding default actions as needed.
</Step>
<Step title="Rebuild and Re-run Tests">
Iterate with test code and mock definitions until tests pass or produce new meaningful diagnostics.
</Step>
<Step title="Seek Further Help if Needed">
Consult detailed documentation such as the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) and [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) for uncommon issues.
</Step>
</Steps>

---

## 7. Useful Links and References

- [Assertions Reference](../docs/reference/assertions.md) — Full list of assertions and usage.
- [Mocking Reference](../docs/reference/mocking.md) — Detailed guidance on `EXPECT_CALL`, `ON_CALL`, and mock setup.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Recipes for common mocking patterns and problem-solving.
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) — Frequently encountered mocking questions and insights.
- [Understanding Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected) — Clarifies mock call behavior.

---

## 8. Summary

Interpreting GoogleTest and GoogleMock errors effectively hinges on understanding the types of failures, their typical messages, and the corresponding remedies. This page equips you to diagnose assertion failures, mock expectation mismatches, order violations, and uninteresting call warnings with confidence and resolve them efficiently.

Clear expectations on mock objects, proper invocation ordering, and judicious use of argument matchers and cardinalities prevent most errors. Leveraging verbosity and stack traces accelerates debugging. When in doubt, refer to the extensive linked resources and best practice guides to deepen your understanding.

Make sure to always define your expectations upfront, use appropriate verbosity during development, and balance your mock strictness to maintain tests that are both robust and maintainable.

---

<style>
  /* Optional styling for better readability */
  code, pre { background-color: #f5f5f5; padding: 4px; }
  blockquote { border-left: 4px solid #ddd; margin-left: 0; padding-left: 10px; color: #666; }
</style>
