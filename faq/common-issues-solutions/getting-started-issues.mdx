---
title: "Getting Started Issues"
description: "Addresses common problems encountered during initial setup, such as C++ version compatibility, include path errors, and linking failures. Guides users through quickly moving past 'won't build' and 'not recognized' messages."
---

# Getting Started Issues FAQ

This FAQ addresses common problems developers face when setting up GoogleTest and GoogleMock, including C++ version incompatibilities, include path errors, linking failures, and confusing build or runtime messages. It guides you through overcoming "won't build" and "not recognized" errors so you can start writing and running tests confidently.

---

## 1. Why doesn’t GoogleMock build on my system? It says something about C++ version or missing headers.

GoogleMock requires a C++ compiler that supports at least the C++17 standard and threading. If you see errors about missing standard headers or compatibility issues, verify that:

- Your compiler and build tools support C++17.
- You have enabled C++17 (or later) in your compiler flags (e.g., `-std=c++17` for GCC/Clang).
- Your build environment supports threading, as GoogleMock relies on it.

Updating your compiler or adjusting your build flags will resolve most compatibility errors.


## 2. Why do I get errors about missing header files like `gmock/gmock.h`?

GoogleMock lives inside the `googlemock` folder and expects your project’s include path to point there. Common causes:

- The include paths are not correctly set to the directory containing `gmock/gmock.h`.
- You might be including `<gmock/gmock.h>` without adding the proper include directories during compilation.

**How to fix:**

- Ensure your build configurator (Bazel, CMake, or manual makefile) adds the correct include path for GoogleMock.
- If using CMake, you can specify include directories with `target_include_directories()` to include GoogleMock's root.


## 3. My test executable fails to link with undefined references to GoogleMock or GoogleTest functions. What’s wrong?

This usually means the linker is missing GoogleMock or GoogleTest libraries.

**Check the following:**

- You are linking against `gmock` and `gtest` libraries (or their combined variants like `gmock_main` if you want a ready-made main function).
- Library paths are correctly set.
- The libraries are built for the same architecture and compiler version as your test executable.

If using CMake, ensure you link your test target with the appropriate imported targets, e.g., `target_link_libraries(your_test PRIVATE gmock gtest pthread)`.


## 4. What is `gmock_main` and should I link with it?

`gmock_main` is a convenience library that provides a default `main()` function which initializes GoogleMock and GoogleTest. Linking with `gmock_main` lets you avoid writing your own main function for tests.

**Use `gmock_main` if:**

- You want a quick start without writing boilerplate initialization code.

**Otherwise:**

- If you need custom test setup or initialization logic, write your own `main()` and call `testing::InitGoogleMock(&argc, argv)` before running tests.


## 5. Why are some of my mock methods calling the real implementation instead of the mock one?

GoogleMock mocks only virtual (or mocked non-virtual via advanced techniques) methods. If you get this behavior:

- The function to be mocked is not declared `virtual` in the base class.
- You may be accidentally calling the method on the base class pointer or reference that lacks the mock.

**Solution:**

- Ensure the methods you want to mock are declared `virtual`.
- Use or create a mock class that inherits the interface with `MOCK_METHOD` declarations.


## 6. What do I do if I get warnings or errors about mocking methods with `const` parameters or qualifiers on MSVC?

Microsoft Visual C++ compilers sometimes emit warnings about virtual functions differing only on `const` qualifiers on parameters. This is a compiler bug.

**Recommendations:**

- Remove top-level `const` qualifiers from parameters where possible.
- Use matching method signatures in mock classes, avoiding unnecessary `const` in parameters.

This will silence the warnings without affecting functionality.


## 7. Why do I see "Uninteresting function call encountered" warnings? How to handle them?

This warning means a mock method was called without an `EXPECT_CALL` expectation set. By default, GoogleMock lets this pass but warns you.

**Your choices:**

- **Ignore:** Confirm the call is acceptable and ignore the warning.
- **Suppress:**
  - Use `NiceMock<MockType>` to suppress such warnings globally on the mock object.
  - Add a catch-all expectation with `EXPECT_CALL(mock, MethodName(_)).Times(AnyNumber())` to explicitly allow calls.
- **Disallow:** Use `StrictMock<MockType>` to treat unexpected calls as failures.


## 8. My tests never verify expectations on mock objects, even though I set `EXPECT_CALL`. Why?

GoogleMock automatically verifies expectations when a mock object is destructed. If your mocks live on the heap and aren't deleted properly, verification never occurs.

**Tips:**

- Make sure mock objects are destroyed at the end of your test.
- Use RAII patterns or smart pointers to manage mock lifetime.
- You can manually verify expectations early with:

  ```cpp
  ::testing::Mock::VerifyAndClearExpectations(&mock_object);
  ```

- Enable heap checker in your test environment to catch leaks.


## 9. What does the message about "newer expectations override older ones" mean?

GoogleMock searches expectations in reverse order (last defined first). This means more recently declared `EXPECT_CALL`s take precedence over earlier ones.

**Implications:**

- Place general expectations earlier and more specific expectations later.
- When declaring multiple `EXPECT_CALL`s for the same method, order matters.

This design helps you set up default behaviors in fixtures or constructors and specialize them later in test bodies.


## 10. How do I get detailed information about why my expectations are failing?

Run your tests with verbose logging enabled:

```bash
--gmock_verbose=info
```

This will print detailed call traces matching expectations, argument values, and stack traces.

You can also combine with `--gtest_stack_trace_depth=0` to reduce noise.

In Emacs, clicking the file and line number highlighted by errors jumps to the relevant test source.


## 11. Why do my mock methods not allow calling `EXPECT_CALL` after the mock is passed to tested code?

Expectations **must** be set **before** calling any mock methods. If you set `EXPECT_CALL` after the mock is used, behavior is undefined.

**Remember:**

- `EXPECT_CALL` means "I expect this call in the future".
- Always set `EXPECT_CALL`s early, ideally before exercising the code under test.


## 12. What are some common pitfalls to avoid during initial setup?

- Forgetting to initialize GoogleMock using `testing::InitGoogleMock(&argc, argv);` in your `main()` function.
- Not linking test executable with the necessary libraries (`gmock`, `gtest`, and platform threading libs).
- Omitting required compiler flags for C++17 and threading support.
- Incorrect include paths causing missing header errors.

Check your build configuration carefully for these.

---

## Additional Tips for Smooth Startup

- Use the sample main function provided in `googlemock/src/gmock_main.cc` if you don’t want to write your own.
- Follow the installation and configuration guides closely, including setting proper compilation and linking flags.
- Use the GoogleTest Primer and "gMock for Dummies" guides for basic usage after resolving setup issues.

---

## Getting More Help

If you encounter issues beyond what’s covered here, consider:

- Running your tests with `--gmock_verbose=info` for detailed internal tracing.
- Consulting the official [GoogleMock FAQ](docs/gmock_faq.md) for mocking-specific questions.
- Reviewing [Mocking Best Practices](guides/mocking-best-practices/creating-mocks.md) for guidance on writing reliable mocks.
- Asking in community forums or filing issues with detailed error output and build environment information.


---

## Related Documentation

- [GoogleMock README](googlemock/README.md) — Overview and conceptual introduction
- [gMock for Dummies](docs/gmock_for_dummies.md) — Step-by-step tutorial for creating mocks
- [Mocking Reference](docs/reference/mocking.md) — Detailed guide for mocking APIs
- [Installation: CMake, Bazel, and Manual Integration](getting-started/setup-installation/installation-modes.md) — Setup instructions
- [Basic Configuration & Project Setup](getting-started/setup-installation/configuration-basics.md) — Important build and compiler settings
- [Troubleshooting & Common Setup Issues](getting-started/first-steps-usage/troubleshooting-setup.md) — Broader troubleshooting

---

Remember, resolving the initial setup obstacles will unlock the powerful testing and mocking capabilities of GoogleTest and GoogleMock, enabling you to build robust, maintainable C++ tests rapidly.

---

### Callouts

<Info>
Ensure you use a compiler version fully supporting the C++17 standard and threading; otherwise, GoogleMock will not build or behave correctly.
</Info>

<Warning>
Never set `EXPECT_CALL` after the mock method has been invoked; always set expectations before exercising code using the mock.
</Warning>

<Tip>
Leverage `NiceMock` or `StrictMock` wrappers to control the verbosity and strictness of your mock expectations during early development.
</Tip>

