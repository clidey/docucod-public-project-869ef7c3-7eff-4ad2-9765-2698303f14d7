---
title: "Value and Type-Parameterized Tests"
description: "Frequently asked questions about creating, registering, and running parameterized and type-parameterized tests. Explains benefits, common pitfalls, name registration, and interpreting test output for parameterized runs."
---

# Frequently Asked Questions: Value and Type-Parameterized Tests

This FAQ focuses on helping you understand the creation, registration, and execution of value-parameterized and type-parameterized tests in GoogleTest. These test patterns allow you to reuse test logic across multiple values or types efficiently, saving time and improving test coverage.

---

## 1. What Are Value-Parameterized and Type-Parameterized Tests?

- **Value-Parameterized Tests** let you run the same test logic with different input values. You create a fixture with a parameter type and then instantiate it with different value sequences. This helps in data-driven testing.

- **Typed Tests** allow running a test suite over multiple types chosen at compile time. You define a test fixture template and specify the types upfront.

- **Type-Parameterized Tests** are like typed tests but more flexible: you define abstract test patterns and instantiate them multiple times with different type lists, possibly in different translation units.

## 2. Why Should I Use Parameterized or Typed Tests?

Using these tests avoids redundant test code when you want to validate the same logic over various inputs or types. It helps:

- Ensure consistent coverage for many cases
- Simplify maintenance
- Scale testing effectively across type variations

## 3. How Do I Define a Value-Parameterized Test?

1. Derive a test fixture from `testing::TestWithParam<T>`, where `T` is your parameter type.
2. Use the `TEST_P` macro to write your test body, where you can get the parameter by calling `GetParam()`.
3. Instantiate the tests with `INSTANTIATE_TEST_SUITE_P`, supplying a parameter generator like `Values()`, `Range()`, or `Combine()`.

```cpp
class FooTest : public testing::TestWithParam<int> {
  // ...
};

TEST_P(FooTest, DoesBlah) {
  int param = GetParam();
  EXPECT_TRUE(SomeFunction(param));
}

INSTANTIATE_TEST_SUITE_P(MyInstances, FooTest, testing::Values(1, 2, 3));
```

## 4. How Do I Create Parameter Generators?

GoogleTest provides built-in functions under the `::testing` namespace:

- `Range(start, end [, step])`: Generates a sequence `[start, start + step, ... < end]`.
- `Values(v1, v2, ..., vN)`: Generates the explicit list of values.
- `ValuesIn(container)` or `ValuesIn(begin, end)`: Generates values from C arrays, STL containers, or iterator ranges.
- `Bool()`: Generates `{false, true}`.
- `Combine(gen1, gen2, ...)`: Generates all combinations (Cartesian product) from multiple generators.
- `ConvertGenerator<T>(gen)` or `ConvertGenerator(gen, func)`: Converts generated parameters to a custom type.

Example using `Combine` and `ConvertGenerator`:

```cpp
INSTANTIATE_TEST_SUITE_P(
    ComboTest, MyTest,
    ConvertGenerator<MyParamType>(
        Combine(Values(1, 2), Bool())));
```

## 5. How Do I Define Typed Tests?

1. Define a fixture template deriving from `testing::Test`, parameterized on a type.
2. Declare the list of types you want to test using `::testing::Types<...>`.
3. Use the `TYPED_TEST_SUITE` macro to associate your fixture with the type list.
4. Define your tests with the `TYPED_TEST` macro.
5. Within the test body, use the special identifier `TypeParam` to access the current type being tested.

```cpp
template <typename T>
class MyTypedTest : public testing::Test {
  // ...
};

using MyTypes = testing::Types<int, double, char>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, DoesWork) {
  TypeParam value{};
  EXPECT_EQ(value, TypeParam{});
}
```

## 6. How Do I Define Type-Parameterized Tests?

Type-parameterized tests let you define test patterns that can be instantiated with different type-lists later:

1. Define your fixture template (`FooTest<T>`) derived from `testing::Test`.
2. Declare the test suite as a pattern by `TYPED_TEST_SUITE_P(FooTest)`.
3. Define tests with `TYPED_TEST_P(FooTest, TestName)` (note the `_P` suffix).
4. Register all test names with `REGISTER_TYPED_TEST_SUITE_P(FooTest, Test1, Test2, ...)`.
5. Instantiate the tests with `INSTANTIATE_TYPED_TEST_SUITE_P(prefix, FooTest, Types...)`.

```cpp
template <typename T>
class FooTest : public testing::Test {};

TYPED_TEST_SUITE_P(FooTest);

TYPED_TEST_P(FooTest, TestA) {
  TypeParam val{};
  EXPECT_TRUE(SomeCheck(val));
}

REGISTER_TYPED_TEST_SUITE_P(FooTest, TestA);

using MyTypes = ::testing::Types<int, float>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyFixture, FooTest, MyTypes);
```

This allows multiple instantiations of the same abstract suite with different type lists, even across translation units.

## 7. Common Pitfalls and How to Avoid Them

- **Missing Instantiation**: Forgetting to call `INSTANTIATE_TEST_SUITE_P` (value-parameterized) or `INSTANTIATE_TYPED_TEST_SUITE_P` (type-parameterized) leads to tests that are defined but never run. Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if this is intentional.

- **Invalid Test/Type Names**: Names must be non-empty, unique, and only contain alphanumeric characters or underscores. Avoid spaces or dashes.

- **Dangling References in ConvertGenerator**: When using lambdas that accept `std::string_view` but generators hold `std::string` copies, you risk dangling references. Specify the generated type explicitly to prevent this.

- **Registration Order**: Define and register type-parameterized tests before instantiation. Adding tests after registration leads to runtime errors.

- **Accessing TypeParam and Fixture Members**: In typed and type-parameterized tests, access `TypeParam` directly for the type, use `this->` or `TestFixture::` prefixes to access fixture members.

## 8. How Does GoogleTest Name Parameterized Tests?

For **value-parameterized tests**:

- Names follow the pattern: `InstantiationName/TestSuiteName.TestName/Index`
- Test parameter suffixes can be customized with name generators (a callable taking `TestParamInfo<T>` returning `std::string`).
- Built-in `PrintToStringParamName` returns the parameter's string representation, but does not work well with strings or C-strings (due to quotes and special characters).

For **typed tests**:

- The test suite is named after the fixture, optionally appended with a suffix indicating the type name.
- Use the optional name generator argument in `TYPED_TEST_SUITE` or `INSTANTIATE_TYPED_TEST_SUITE_P` to customize type-based test suite names.

For **type-parameterized tests**, a similar naming scheme applies, with instantiation prefixes and type-name generators.

Users should pick meaningful, unique names and can use lambdas or functors to create readable names.

## 9. How Can I Share Resources or Setup Logic Across Parameterized and Typed Tests?

- Use static member variables and implement `SetUpTestSuite()` and `TearDownTestSuite()` static methods in your test fixtures to allocate and clean up shared resources.
- These methods are called once before the first test and after the last test in the suite respectively.

## 10. Can I Instantiate Parameterized Tests Multiple Times?

Yes. You can call `INSTANTIATE_TEST_SUITE_P` or `INSTANTIATE_TYPED_TEST_SUITE_P` multiple times with different prefixes and parameter sets to create multiple instances.

## 11. How to Define and Use Custom Parameter Name Generators?

You can pass the last argument to `INSTANTIATE_TEST_SUITE_P` as a function or functor that takes a `TestParamInfo<T>` and returns a string name suffix. For example:

```cpp
INSTANTIATE_TEST_SUITE_P(
  CustomNames, FooTest, testing::Values(1, 2),
  [](const testing::TestParamInfo<int>& info) {
    return "Value" + std::to_string(info.param);
  });
```

Names must be unique, non-empty, and contain only alphanumeric characters or underscores.

## 12. Are There Special Considerations for Tests with Non-Printable or Complex Parameter Types?

- For parameters that cannot be converted to strings easily, define custom `PrintToString` or `PrintTo()` overloads to teach GoogleTest how to print them.
- Use custom name generators to avoid unfriendly default suffixes.

## 13. Troubleshooting & Verification

- If tests are not running, verify that parameterized suites are instantiated.
- Confirm that test and parameter names do not contain invalid characters.
- Use GoogleTest's reflection API and flags (`--gtest_list_tests`) to see discovered tests.
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress warnings for unused suites.

---

## Practical Tips & Best Practices

- **Prefer `INSTANTIATE_TEST_SUITE_P` over deprecated `INSTANTIATE_TEST_CASE_P`.**
- Avoid underscoring test suite or test names.
- When combining multiple generators, ensure that the `Combine()` usage matches the required type.
- Use `ConvertGenerator` when parameter types are explicit or require conversion.
- Define value-parameterized tests only once in one file; instantiate in different files if needed.
- Use static shared resources carefully, always cleaning up in `TearDownTestSuite`.

---

## Example: Full Value-Parameterized Test Definition and Instantiation

```cpp
class MyValueTest : public testing::TestWithParam<int> {
  // Setup if needed
};

TEST_P(MyValueTest, IsPositive) {
  EXPECT_GT(GetParam(), 0);
}

INSTANTIATE_TEST_SUITE_P(
    PositiveIntegers, MyValueTest,
    testing::Values(1, 2, 3, 10));
```

---

## Example: Full Typed Test Definition and Instantiation

```cpp
template <typename T>
class MyTypedTest : public testing::Test {};

using MyTypes = ::testing::Types<int, float, double>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, DefaultConstruction) {
  TypeParam value{};
  EXPECT_EQ(value, TypeParam{});
}
```

---

## Example: Full Type-Parameterized Test Suite

```cpp
template <typename T>
class MyTypedTest : public testing::Test {};

TYPED_TEST_SUITE_P(MyTypedTest);

TYPED_TEST_P(MyTypedTest, TestName) {
  TypeParam val{};
  EXPECT_TRUE(val == val);
}

REGISTER_TYPED_TEST_SUITE_P(MyTypedTest, TestName);

using MyTypes = testing::Types<int, double>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyInst, MyTypedTest, MyTypes);
```

---

For comprehensive guidance on usage and examples, see the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) and [Advanced Topics - Parameterized and Typed Tests](https://github.com/google/googletest/blob/main/docs/advanced.md#value-parameterized-tests).

---

## See Also

- [Parameterized and Typed Tests Guide](../guides/writing-effective-tests/parameterized-typed-tests.md)
- [Testing Reference: TEST_P and TYPED_TEST](../docs/reference/testing.md#TEST_P)
- [Advanced GoogleTest Topics - Parameterized Tests](../docs/advanced.md#value-parameterized-tests)
- [Test Organization and Patterns](../guides/writing-effective-tests/test-patterns.md)
- [Handling Test Events and Custom Naming](../docs/advanced.md#extending-googletest-by-handling-test-events)


---

## Troubleshooting Common Errors

### Tests Not Running
- Verify that you have used `INSTANTIATE_TEST_SUITE_P` or `INSTANTIATE_TYPED_TEST_SUITE_P`.
- Ensure the instantiation prefix is unique and test names do not collide.

### Duplicate Test Registration
- Confirm each test name in a typed or type-parameterized suite is registered only once.
- Avoid defining tests after calling `REGISTER_TYPED_TEST_SUITE_P`.

### Invalid Parameter Names
- Parameter names must contain only letters, numbers, or underscores; avoid spaces or dashes.

### Parameter Type Conversion Failures
- When using `ConvertGenerator`, ensure the conversion callable matches expected types and lifetime semantics.

---

<Tip>
Using parameterized tests greatly enhances test coverage while keeping your test code concise and maintainable. Invest time mastering parameter generators and custom naming for best results.
</Tip>

<Info>
Refer to the official GoogleTest GitHub repository for sample code and live examples of parameterized and typed tests.
</Info>
