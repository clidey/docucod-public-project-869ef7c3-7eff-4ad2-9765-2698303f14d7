---
title: "Further Reading & Advanced Guides"
description: "Lists selected community and official guides for advanced topics, usage patterns, and in-depth documentation for GoogleTest and GoogleMock (including cookbooks and cheat sheets)."
---

# Further Reading & Advanced Guides

Explore a curated collection of community and official resources that deepen your mastery of GoogleTest and GoogleMock. This page serves as a gateway to comprehensive guides, practical cookbooks, and focused cheat sheets designed for advanced usage, specialized patterns, and solving common yet intricate challenges.

---

## 1. Community and Official Guides Overview

These resources provide advanced insight into testing and mocking with GoogleTest frameworks, covering techniques from basic mocking to writing complex custom matchers and actions.

### Key Resources:

- **gMock for Dummies** — A beginner-friendly start to understanding mock objects, their design principles, and practical usage.
- **gMock Cookbook** — Offers recipes and idiomatic patterns for mocks, expected calls, actions, matchers, and more, bridging from novice to expert.
- **Legacy gMock FAQ** — Addresses frequently asked questions and common pitfalls encountered while using GoogleMock, providing practical solutions and explanations.
- **Mocking Cheat Sheet** — A quick reference summarizing core macros, matchers, actions, and cardinalities.

---

## 2. Advanced Mocking Patterns

Delve deeper into the design and use of mocking for sophisticated scenarios:

- **Creating Mock Classes:** How to mock virtual methods correctly using `MOCK_METHOD`, including handling const, noexcept, calling conventions, and overloads.

- **Handling Uninteresting and Unexpected Calls:** Best practices on how to use `NiceMock`, `StrictMock`, and default behavior control to manage calls that are not part of explicit expectations.

- **Multi-call Behavior:** Guiding expectations with `WillOnce`, `WillRepeatedly`, and sequencing calls using `InSequence` and `Sequence` objects.

- **Delegating Calls:** Techniques to delegate mock behaviors to fakes, real objects, or base classes, enabling reuse of existing logic.

- **Mocking Non-virtual and Static Methods:** Workarounds and design suggestions for mocking non-virtual functions and free functions.

### Example: Mock Class Definition
```cpp
#include <gmock/gmock.h>

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(void, Turn, (int degrees), (override));
  MOCK_METHOD(void, GoTo, (int x, int y), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
  MOCK_METHOD(int, GetY, (), (const, override));
};
```

---

## 3. Matchers and Actions Advanced Usage

Understand how to employ built-in and custom matchers and actions for expressive, maintainable tests:

- **Defining Custom Matchers:** Using the `MATCHER` macros or implementing matcher classes manually to verify complex invariants.

- **Combining and Composing Matchers:** Using logical operators like `AllOf()`, `AnyOf()`, and `Not()` to form expressive criteria.

- **Using Matchers with Non-copyable Arguments:** Strategies for matching move-only or complex objects without unnecessary copies.

- **Creating Custom Actions:** How to define and use user-defined actions to simulate side effects, manipulate arguments, or implement complex mock behaviors.

### Example: Custom Matcher
```cpp
MATCHER(IsDivisibleBy7, "Checks divisibility by 7") {
  return (arg % 7) == 0;
}

EXPECT_CALL(mock_obj, SomeMethod(IsDivisibleBy7()));
```

### Example: Delegation to a Fake
```cpp
class MockFoo : public Foo {
 public:
  MOCK_METHOD(char, DoThis, (int n), (override));
  MOCK_METHOD(void, DoThat, (const char* s, int* p), (override));

  void DelegateToFake() {
    ON_CALL(*this, DoThis).WillByDefault([this](int n) {
      return fake_.DoThis(n);
    });
    ON_CALL(*this, DoThat).WillByDefault([this](const char* s, int* p) {
      fake_.DoThat(s, p);
    });
  }

 private:
  FakeFoo fake_;  
};
```

---

## 4. Troubleshooting and FAQ

The legacy gMock FAQ and other community resources address common issues including:

- Virtual methods not being mocked (must be declared `virtual`).
- Warnings from MSVC about const parameters.
- Unexpected or uninteresting calls, and how to control verbosity.
- Managing expectation conflicts and order.
- Mocking variadic functions.
- Memory and lifetime issues related to destructors and virtual inheritance.

---

## 5. Additional Tools and Integration

- **MockFunction Template:** Mock `std::function` or simple callback interfaces.
- **Threading Considerations:** Guidelines to safely use mocks in multi-threaded tests.
- **Test Suite Integration:** Using mocks and expectations within CI/CD pipelines, build systems, and IDEs.

---

## 6. Getting the Most Out of These Guides

- Always ensure that your mocks and expectations are set before exercising code that triggers them.
- Use default behaviors with `ON_CALL` for common mock functions to minimize brittle tests.
- Prefer expressive matchers and custom actions to minimize over-specification.
- Combine cardinatility and sequencing to model expected call counts and order precisely.
- Use the verbose mode flags (`--gmock_verbose`) to diagnose expectation mismatches and debug calls.

---

For a comprehensive look at advanced GoogleTest and GoogleMock usage, start with the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) and [Mocking Reference](https://google.github.io/googletest/reference/mocking.html).

---

### Related Pages

- [gMock for Dummies](gmock_for_dummies.md) - Introduction to mocks
- [Mocking Cookbook](gmock_cook_book.md) - Practical recipes and patterns
- [Mocking FAQ](gmock_faq.md) - Common questions and troubleshooting
- [Matchers Reference](reference/matchers.md) - Detailed matchers API
- [Actions Reference](reference/actions.md) - Understanding mock actions
- [Mocking APIs](reference/mocking.md) - Core GoogleMock macros and classes

---

### Tip

By leveraging these advanced guides and community wisdom, you can design more robust, maintainable, and expressive tests with GoogleTest and GoogleMock, discovering best practices and avoiding common pitfalls along the way.


---