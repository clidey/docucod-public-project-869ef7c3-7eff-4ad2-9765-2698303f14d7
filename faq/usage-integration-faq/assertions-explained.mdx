---
title: "What Assertions Are Available and How Do They Work?"
description: "Explains the range of assertions provided by GoogleTest, how to use them, and best practices for effective test writing. Also includes guidance for user-defined assertions."
---

# What Assertions Are Available and How Do They Work?

GoogleTest offers a rich set of assertion macros designed to help you verify the behavior of your C++ code. Assertions check conditions and produce detailed failure messages when expectations are not met, enabling rapid diagnosis and effective debugging. This documentation explains the variety of assertions provided, their usage patterns, and best practices for crafting your tests with confidence.

---

## Overview of Assertions

Assertions in GoogleTest come primarily in pairs:

- `EXPECT_*`: Generates *nonfatal* failures allowing the test to continue to run subsequent checks.
- `ASSERT_*`: Generates *fatal* failures that immediately abort the current test function.

All assertion macros support streaming custom failure messages using the `<<` operator, enabling you to append context-specific diagnostics to the errors.

---

## Explicit Success and Failure

Sometimes, control flow determines the test outcome more than a boolean expression. GoogleTest provides direct assertions for success and failure:

### SUCCEED()

- Records a success.
- Does *not* mark the overall test as successful if other assertions fail.
- Intended primarily for documentation or future-proofing your test logic.

Example:

```cpp
SUCCEED() << "Reached this point successfully";
```

### FAIL()

- Generates a fatal failure and aborts the current function immediately.
- Use only in `void`-returning functions due to control flow semantics.

Example:

```cpp
if (unexpected_condition) {
  FAIL() << "Should not reach this branch";
}
```

### ADD_FAILURE()

- Generates a nonfatal failure, allowing the test to continue.

Example:

```cpp
ADD_FAILURE() << "Warn user that something unexpected happened";
```

### ADD_FAILURE_AT(file, line)

- Generates a nonfatal failure reported at the specified source file and line number.

Example:

```cpp
ADD_FAILURE_AT("foo.cc", 42) << "Issue found here";
```

---

## General Boolean Conditions

Test boolean expressions for true or false:

- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`

Example:

```cpp
EXPECT_TRUE(IsSorted(vec)) << "Vector is not sorted";
ASSERT_FALSE(IsEmpty(container)) << "Container is unexpectedly empty";
```

---

## Binary Comparison Assertions

Compare two values using the standard operators (`==`, `!=`, `<`, `<=`, `>`, `>=`). Values are always evaluated once, and if printable, their contents are shown in failure messages for clarity.

| Macro           | Description                                         |
|-----------------|-----------------------------------------------------|
| `EXPECT_EQ(a, b)` / `ASSERT_EQ(a, b)` | Asserts `a == b`                           |
| `EXPECT_NE(a, b)` / `ASSERT_NE(a, b)` | Asserts `a != b`                           |
| `EXPECT_LT(a, b)` / `ASSERT_LT(a, b)` | Asserts `a < b`                            |
| `EXPECT_LE(a, b)` / `ASSERT_LE(a, b)` | Asserts `a <= b`                           |
| `EXPECT_GT(a, b)` / `ASSERT_GT(a, b)` | Asserts `a > b`                            |
| `EXPECT_GE(a, b)` / `ASSERT_GE(a, b)` | Asserts `a >= b`                           |

**Note:**
- When comparing pointers, `EXPECT_EQ` compares pointer equality (addresses), not string contents.
- For C strings, use specialized string assertions for value comparison.

Example:

```cpp
EXPECT_EQ(result.size(), expected_size) << "Unexpected container size.";
ASSERT_LT(value, threshold) << "Value exceeds threshold.";
```

---

## String Comparison Assertions

Specialized assertions exist for C strings and wide strings (`const char*`, `const wchar_t*`) to compare their contents:

- `EXPECT_STREQ(a, b)` / `ASSERT_STREQ(a, b)`: Verify strings have the same content.
- `EXPECT_STRNE(a, b)` / `ASSERT_STRNE(a, b)`: Verify strings differ in content.
- `EXPECT_STRCASEEQ(a, b)` / `ASSERT_STRCASEEQ(a, b)`: Case-insensitive equality.
- `EXPECT_STRCASENE(a, b)` / `ASSERT_STRCASENE(a, b)`: Case-insensitive inequality.

Example:

```cpp
EXPECT_STREQ(actual.c_str(), expected.c_str()) << "Strings do not match.";
ASSERT_STRNE(password, "1234") << "Password should not be default.";
```

---

## Floating-Point Comparison Assertions

Due to precision limitations, floating-point numbers should be compared approximately:

- `EXPECT_FLOAT_EQ(a, b)` / `ASSERT_FLOAT_EQ(a, b)`: Checks if two `float` values are within 4 ULPs (Units in the Last Place).
- `EXPECT_DOUBLE_EQ(a, b)` / `ASSERT_DOUBLE_EQ(a, b)`: Same as above for `double`.
- `EXPECT_NEAR(a, b, abs_error)` / `ASSERT_NEAR(a, b, abs_error)`: Checks if the absolute difference does not exceed `abs_error`.

Example:

```cpp
EXPECT_FLOAT_EQ(computed_value, expected_value);
ASSERT_NEAR(calculated_pi, 3.14159, 0.0001);
```

Best practice: Always prefer these over `EXPECT_EQ` for floating-point values.

---

## Predicates and Predicate-Formatter Assertions

When existing macros are insufficient for expressing complex conditions, GoogleTest supports assertions based on predicates and custom formatting.

### Predicate Assertions (`EXPECT_PRED*` and `ASSERT_PRED*`)

- Use an n-ary predicate function or functor returning `bool`.
- Arguments support streaming to `ostream` for detailed failure messages.
- Supports up to 5 arguments.

Example:

```cpp
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, value);
```

### Predicate-Formatter Assertions (`EXPECT_PRED_FORMAT*` and `ASSERT_PRED_FORMAT*`)

- Use predicate-formatters returning `::testing::AssertionResult`.
- Enables supply of custom messages on success and failure.
- Arguments include their expression strings and their values.

Example:

```cpp
testing::AssertionResult IsEven(const char* expr, int n) {
  if (n % 2 == 0) return testing::AssertionSuccess() << n << " is even";
  else return testing::AssertionFailure() << n << " is odd";
}

EXPECT_PRED_FORMAT1(IsEven, value);
```

Allows more expressive diagnostics compared to boolean predicates.

---

## Windows HRESULT Assertions

If you write tests involving Windows components producing `HRESULT` values, GoogleTest offers:

- `EXPECT_HRESULT_SUCCEEDED(hr_expression)` / `ASSERT_HRESULT_SUCCEEDED(hr_expression)`: Verify success HRESULT.
- `EXPECT_HRESULT_FAILED(hr_expression)` / `ASSERT_HRESULT_FAILED(hr_expression)`: Verify failure HRESULT.

Example:

```cpp
ASSERT_HRESULT_SUCCEEDED(CoCreateInstance(...));
EXPECT_HRESULT_FAILED(FailProneFunction());
```

Failure messages contain human-readable error descriptions.

---

## Death Test Assertions

Death tests verify that code causes the process to terminate as expected.

- `EXPECT_DEATH(statement, regex)` / `ASSERT_DEATH(statement, regex)`
- `EXPECT_EXIT(statement, predicate, regex)` / `ASSERT_EXIT(statement, predicate, regex)`
- Variants like `EXPECT_DEATH_IF_SUPPORTED`, `EXPECT_DEBUG_DEATH`.

The `statement` runs in a separate process to isolate termination.

Example:

```cpp
EXPECT_DEATH(AbortFunction(), "fatal error");
EXPECT_EXIT(ExitNormally(), testing::ExitedWithCode(0), "Success");
```

---

## Skipping Tests

At runtime, you may want to skip tests under certain conditions.

- Use `GTEST_SKIP()` inside test bodies or `SetUp()` methods of fixtures/environments.
- Skipping does not mark the test as failure, nor abort the test executable.
- You can stream messages with `GTEST_SKIP() << "reason";`.

Example:

```cpp
TEST(FooTest, MightSkip) {
  if (!IsDatabaseAvailable()) {
    GTEST_SKIP() << "Database not available";
  }
  ...
}
```

---

## Logging Additional Information with Properties

You can log key/value properties in tests, which are included in XML/JSON reports.

Usage:

```cpp
RecordProperty("MaxMemoryUsage", "512MB");
```

- Valid XML attribute names only.
- Reserved keys (like `name`, `status`) are disallowed.
- Can be called inside tests, `SetUpTestSuite`, or globally.

---

## Best Practices and Tips

- Use `ASSERT_*` when failing should abort the current test; otherwise use `EXPECT_*`.
- Leverage predicate-format assertions for complex conditions and better error messages.
- Use skipping to handle unmet preconditions gracefully.
- Always check floating-point values approximately using the dedicated macros.
- Structure tests with meaningful messages to enhance diagnostic clarity.

---

## Additional Resources

For a deeper understanding of assertions and usage patterns, consult:

- [Assertions Reference](../reference/assertions.md)
- [Advanced GoogleTest Topics](advanced.md)
- [GoogleTest Primer](primer.md)

Explore predicate assertions and examples at:

- [Advanced GoogleTest Topics: Predicate Assertions](advanced.md#predicate-assertions-for-better-error-messages)

---