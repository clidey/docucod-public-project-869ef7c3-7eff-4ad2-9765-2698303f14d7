---
title: "Installation, Setup, and Environment Troubleshooting"
description: "Answers common installation and environment setup questions, covering supported platforms, build tools (CMake/Bazel), and typical configuration pitfalls. Offers actionable advice for resolving the most frequent setup issues."
---

# Installation, Setup, and Environment Troubleshooting FAQ

This FAQ addresses common questions and issues users face when installing and setting up GoogleTest and GoogleMock. It covers supported platforms, build system integrations (CMake and Bazel), typical configuration pitfalls, and actionable troubleshooting tips.

---

## 1. Supported Platforms and Environments

- **Which platforms does GoogleTest and GoogleMock support?**

  GoogleTest and GoogleMock support major desktop platforms, including Linux, macOS, and Windows. Additionally, there is explicit support for embedded platforms such as ESP8266, ESP32, and NRF52 with Arduino compatibility. QuRT is also supported with some limitations.

- **Are there any platform-specific considerations?**

  - **Windows:** A known Microsoft Visual C++ (MSVC) linker issue requires using `main` instead of `_tmain`. GoogleTest accounts for this in its main entry.
  - **Embedded Platforms:** Entry points switch from `main` to Arduino-style `setup()` and `loop()` functions.
  - **QuRT:** `argc` and `argv` are unusable, so `InitGoogleTest()` is called without arguments.

---

## 2. Build Tools: CMake and Bazel

- **How do I integrate GoogleTest/GoogleMock into my CMake project?**

  Configure your CMakeLists.txt to include the GoogleTest include directories, link against `gtest` and `gmock` libraries, and ensure your project compiles with C++17 or above. Example configuration is covered in the [Configuration & Initial Setup](/getting-started/setup-basics/configuration-setup) guide.

- **Is there a main() provided?**

  Yes. GoogleTest provides `gtest_main` and GoogleMock provides `gmock_main` libraries that include a `main()` function calling `RUN_ALL_TESTS()`. Using these simplifies test runner setup.

- **How can I include GoogleMock support?**

  Include `gmock/gmock.h` in your test files, link against `gmock` and `gmock_main`, and initialize using `testing::InitGoogleMock(&argc, argv);`. See the `gmock_main.cc` source for example initialization.

---

## 3. Common Installation and Setup Issues

### Missing Headers or Linking Errors

- **Problem:** Compilation fails due to missing headers like `gmock/gmock.h` or linker errors.
- **Solution:**
  - Ensure GoogleTest and GoogleMock source or binaries are properly included and visible in your project's include and library paths.
  - When using CMake, verify that target linking is correct (`target_link_libraries(my_test PRIVATE gtest gmock_main)`).
  - If building GoogleTest yourself, perform a clean build to ensure all objects are up to date.

### C++ Standard Compatibility

- **Problem:** Compiler complains about unsupported language features or standard.
- **Solution:**
  - GoogleTest requires C++17 or above. Configure your compiler to use `-std=c++17` or equivalent.

### Test Name and Macro Issues

- **Problem:** Tests don't run or report errors related to test names.
- **Solution:**
  - Avoid using underscores or reserved keywords in test names.
  - Use the GoogleTest macros correctly (`TEST`, `TEST_F`, `TEST_P`) as documented in [Test Macros and Assertions](/api-reference/gtest-core-api/test-macros-and-assertions).

### Proper Initialization

- **Note:** When using `gmock_main` or `gtest_main`, you do not need to call `testing::InitGoogleTest()` or `testing::InitGoogleMock()` yourself unless you want custom initialization.

---

## 4. Environment Configuration Pitfalls

- **Problem:** Tests hang or fail to run.

- **Tips:**
  - Confirm that your build environment has access to threading libraries if your build or tests require them.
  - On Windows, avoid configurations that cause known linker bugs; verify your VS toolchain version.
  - For embedded platforms, confirm that you use the correct entry points (`setup()` and `loop()`) instead of `main()`.

- **Problem:** Tests produce warnings about “Uninteresting Mock Function Calls.”

- **Solution:**
  - Use `NiceMock` wrappers to suppress such warnings when calls are expected but not explicitly matched.
  - Alternatively, specify `EXPECT_CALL(...).Times(AnyNumber())` for methods you want to allow any calls.
  - Control verbosity with `--gmock_verbose=` flag (options: `info`, `warning`, `error`).

---

## 5. Practical Troubleshooting Steps

### Step-by-Step: Verifying Installation

1. Build the included sample tests with your chosen build system.
2. Run tests and observe output.
3. If tests fail to run or linking errors occur, double-check library and include paths.
4. Try running with verbose `--gmock_verbose=info` to trace mock expectations.

### Common Errors and Fixes

| Scenario                       | Description                                   | Fix                                         |
|-------------------------------|-----------------------------------------------|---------------------------------------------|
| Missing gmock header           | `gmock/gmock.h` not found                      | Add GoogleMock include directory             |
| Link errors for gmock symbols  | Undefined references to `gmock_*` functions   | Link against `gmock` and `gmock_main`        |
| Test executable does not start | Missing or improper `main()`                   | Use provided `gtest_main` or `gmock_main` libs |
| Compiler standard errors       | Language not supported or missing features     | Add C++17 standard flag in compiler          |

---

## 6. Tips for Smooth Setup

- Use the `gmock_main` and `gtest_main` libraries to avoid writing your own `main()`.
- Always link both `gmock` and `gmock_main` (or `gtest` and `gtest_main`) for tests.
- Use official CMake integration examples to configure your build system.
- Use `EXPECT_CALL` and `ON_CALL` smartly to avoid unnecessary warnings.
- Tune verbosity for clearer diagnostics: `--gmock_verbose=info` for debugging, `warning` for normal use.

---

## 7. Getting Help and Additional Resources

- Consult the [Troubleshooting Installation & Setup](/getting-started/troubleshooting-and-help/troubleshooting-installation) guide for more detailed walkthroughs.
- Join the GoogleTest community as described in [Community and Additional Resources](/getting-started/troubleshooting-and-help/community-and-additional-resources).
- Explore the official [GoogleMock documentation](https://google.github.io/googletest/gmock_intro.html) for deeper understanding.
- Refer to the [gMock Cookbook](docs/gmock_cook_book.md) for practical recipes against common mocking problems.

---

## 8. Example: Main Initialization(s)

```cpp
// Normal platforms main using GoogleMock
int main(int argc, char** argv) {
  std::cout << "Running main() from gmock_main.cc\n";
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

For Arduino-like platforms:

```cpp
void setup() {
  ::testing::InitGoogleMock();
}

void loop() {
  RUN_ALL_TESTS();
}
```

---

## 9. Common Configuration Mistakes and How to Avoid Them

- Not linking `gmock_main` and relying on your own `main()`, leading to missing initialization.
- Using non-virtual destructors in interfaces to be mocked, leading to silent leaks or resource errors.
- Ignoring C++ standard flag requirements causing cryptic compilation errors.
- Using incompatible or out-of-date compiler versions.

---

## 10. Useful Flags for Running Tests

- `--gmock_verbose=LEVEL` : Controls mock output verbosity. Levels: `info`, `warning` (default), `error`.
- `--gtest_filter=` : Run a subset of tests.
- `--gtest_stack_trace_depth=` : Control stack trace depth in failures.

---

## Related Documentation

- [Installation Instructions](/getting-started/setup-basics/installation-instructions)
- [Configuration & Initial Setup](/getting-started/setup-basics/configuration-setup)
- [Troubleshooting Installation & Setup](/getting-started/troubleshooting-and-help/troubleshooting-installation)
- [Mock Object Construction](/api-reference/gmock-api/mock-object-construction)
- [Using Expectations and Actions](/api-reference/gmock-api/defining-expectations-actions)

---

<Tip>
Remember: GoogleMock’s power lies in correct build setup and initialization. Follow setup steps closely and use the built-in `gmock_main` where possible to reduce manual errors.
</Tip>

<Warning>
Incorrect linking or improper C++ standard configuration are the most frequent and severe sources of setup issues. Ensure your environment matches GoogleTest’s requirements.
</Warning>