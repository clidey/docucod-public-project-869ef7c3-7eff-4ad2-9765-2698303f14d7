---
title: "What Are GoogleTest and GoogleMock?"
description: "Explains the relationship between GoogleTest and GoogleMock, how they work together, and when and why you should use each. Clarifies their core capabilities and distinguishes their main use cases."
---

# What Are GoogleTest and GoogleMock?

GoogleTest and GoogleMock are the foundation of robust, maintainable unit testing in C++. This page explains their relationship, how they complement each other, and when to use each to maximize test effectiveness. Understanding their core capabilities and distinct use cases will empower you to write clear, reliable tests that accelerate development.

---

## Introduction

- **GoogleTest** is the industry-standard C++ unit testing framework that lets you define and run tests with convenient assertion macros and rich test organization features.
- **GoogleMock** (often abbreviated as gMock) is an extension that enables you to create mock classes and set expectations on interactions, letting you isolate dependencies and verify how collaborators are used.

Together, they form a comprehensive solution to validate both code correctness and interaction behaviors.

---

## How GoogleTest and GoogleMock Work Together

GoogleMock is designed as a seamless extension of GoogleTest, built into the same framework and sharing its test execution flow. When you write tests:

- Use **GoogleTest** to write test cases that verify the output, state changes, or exceptions of your code.
- Use **GoogleMock** when you need to replace dependencies with controllable and verifiable mock objects, allowing you to check not just effects but expected interactions.

In practice, your test suite will typically include both GoogleTest assertions and GoogleMock expectations within test cases.

<Callout type="info">
GoogleMock is included as part of the GoogleTest distribution — no separate installation is required.
</Callout>

---

## Core Capabilities of GoogleTest

- Define **test cases** and **test suites** using intuitive macros like `TEST()` and `TEST_F()`.
- Use rich **assertions** to verify values, exceptions, and conditions (`EXPECT_EQ`, `ASSERT_TRUE`, etc).
- Organize tests with **fixtures** that set up common preconditions and teardown.
- Customize test execution with filtering, sharding, and repeat options.
- Generate detailed and human-readable test reports.

These features focus on verifying that your code produces expected outcomes.

---

## Core Capabilities of GoogleMock

- Define **mock classes** that mimic interfaces or classes using the `MOCK_METHOD` macro.
- Specify **expected interactions** using `EXPECT_CALL`, setting how many times methods should be invoked and with what arguments.
- Provide **mock behaviors** and **return values** via `WillOnce()`, `WillRepeatedly()`, or `ON_CALL`.
- Use **matchers** to assert argument properties and **actions** to specify side effects.
- Control the **strictness** of mock objects (`NiceMock`, `StrictMock`) to manage uninteresting call warnings or errors.
- Support **ordering constraints** on expected calls with sequences and partial orders.

GoogleMock is about isolating components and verifying correct usage.

---

## When to Use GoogleTest vs GoogleMock

| Use Case                                  | Recommended Framework     |
|-------------------------------------------|--------------------------|
| Verifying a pure function’s return value | GoogleTest               |
| Checking that a function throws expected exceptions | GoogleTest   |
| Verifying that an object changes state correctly | GoogleTest            |
| Isolating dependencies by replacing collaborators | GoogleMock               |
| Verifying the number, order, and arguments of calls | GoogleMock          |
| Simulating responses from external systems or slow APIs | GoogleMock         |

Most non-trivial tests combine both frameworks to get comprehensive verification.

---

## Summary of Differences

| Aspect                   | GoogleTest                                 | GoogleMock                               |
|--------------------------|-------------------------------------------|-----------------------------------------|
| Primary Focus            | Validating outputs, state, exceptions     | Validating interactions with collaborators |
| Main Constructs          | Tests, test fixtures, assertions           | Mock classes, expectations, matchers, actions |
| Setup Requirements       | Write test functions and assertions       | Define mock classes with `MOCK_METHOD` and set expectations (
EXPECT_CALL) |
| Control of Execution     | Test runners execute tests                  | Mock objects intercept and verify calls in tests |

---

## Practical User Workflow

1. **Define interfaces or abstract base classes for dependencies** that your code interacts with.
2. **Write concrete production classes** implementing those interfaces.
3. **Write mock classes** using GoogleMock’s `MOCK_METHOD` macros, generating mocked methods.
4. **In tests, create mock objects** as test doubles for dependencies.
5. **Use `ON_CALL` to define default behaviors** and `EXPECT_CALL` to set strict expectations on method invocations.
6. **Exercise your code under test**, which uses the mocks instead of real dependencies.
7. **Verify that GoogleMock reports any violated expectations** automatically at test teardown.
8. **Use GoogleTest assertions in tests** to verify outputs and side effects.

This flow lets you test complex interactions with precise control and clear verification.

---

## Example: Defining and Using a Mock Class

```cpp
#include <gmock/gmock.h>

// Interface
class Turtle {
public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
  virtual int GetX() const = 0;
};

// Mock Class
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};

// Usage in Test
TEST(PaintTest, DrawsLine) {
  MockTurtle mock_turtle;
  EXPECT_CALL(mock_turtle, PenDown()).Times(1);
  EXPECT_CALL(mock_turtle, Forward(100)).Times(1);

  // Code that drives mock_turtle goes here
  // ...
}
```

---

## Common Patterns

- Set **default behaviors** with `ON_CALL` to avoid warnings for uninteresting calls.
- Use `EXPECT_CALL` for important interactions you want to verify happened.
- Control mock verbosity and strictness via `NiceMock`, `NaggyMock` (default), and `StrictMock`
- Chain actions for different call sequences with `WillOnce()` and `WillRepeatedly()`.
- Use matchers like `_` (wildcard), `Eq()`, `Gt()` in expectations to match arguments flexibly.
- Organize expectations in **sequences** to check call order.

---

## Troubleshooting and Best Practices

- Always mock **virtual methods**; non-virtual methods require alternative techniques.
- Place `MOCK_METHOD` declarations in the **public** section of your mock classes.
- Use `EXPECT_CALL` before exercising code; setting expectations after calling mock methods results in undefined behavior.
- Avoid over-specification; only set expectations needed to verify crucial interactions.
- For uninteresting calls, prefer to suppress warnings with `NiceMock` rather than ignoring them outright.
- Ensure base classes have **virtual destructors** to avoid undefined behavior.
- Use `Mock::VerifyAndClearExpectations(&mock)` to force verification early if needed.

---

## Related Documentation

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly introduction to creating mocks.
- [Mocking Reference](../api-reference/mocking-api/mock-methods.md): Detailed reference on mock method syntax and usage.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Practical recipes for advanced mocking techniques.
- [Using Matchers](../guides/core-test-workflows/using-matchers.md): Guide on argument matching for mock expectations.
- [Project Configuration](../getting-started/configuration-and-first-use/project-configuration.md): Setup and link GoogleMock in your projects.

---

For a comprehensive understanding of GoogleTest’s foundational concepts, see the [Core Concepts and Terminology](../overview/intro-concepts/core-concepts-terminology.md).

Explore [Writing and Running Your First Test](../getting-started/configuration-and-first-use/writing-first-test.md) to kickstart your testing journey.

Ready to control your dependencies in tests? Visit [Basic Mocking with GoogleMock](../getting-started/configuration-and-first-use/using-googlemock-basics.md) for step-by-step mock usage.

---