---
title: "How do I install and set up GoogleTest and GoogleMock?"
description: "Step-by-step guidance on acquiring, building, and integrating GoogleTest/GoogleMock into your project, including references to Bazel and CMake quickstart workflows. Covers minimum C++ versions, dependencies, and common setup pitfalls."
---

# How do I install and set up GoogleTest and GoogleMock?

This guide provides clear, step-by-step instructions for acquiring, building, and integrating GoogleTest and GoogleMock into your C++ projects. It covers minimum C++ requirements, dependency management, and practical workflows for using build systems like Bazel and CMake. Alongside setup procedures, it highlights common pitfalls and tips to ensure a smooth installation experience.

---

## 1. Quick Overview

GoogleTest (sometimes called googletest) and GoogleMock (gMock) are bundled together in one source distribution and repository. Installing both allows you to take advantage of a comprehensive C++ testing framework that includes automatic test discovery, rich assertions, test fixtures, parameterized tests, and full-featured mocking.

---

## 2. Minimum Requirements and Dependencies

- **C++ Standards**: Requires a C++11-compliant compiler or newer. Most modern compilers like GCC, Clang, MSVC, and libc++ fully support required features.
- **Dependencies**: No external dependencies apart from a C++11 compatible toolchain.

---

## 3. Acquiring GoogleTest and GoogleMock

- Clone or download the repository from the official GitHub:

  ```bash
  git clone https://github.com/google/googletest.git
  ```

- The release artifacts bundle both GoogleTest and GoogleMock.

---

## 4. Installation Methods

GoogleTest/gMock supports multiple common build workflows — this includes manual builds, CMake, and Bazel. Select the method that fits best with your project environment.

### 4.1 Using CMake

GoogleTest includes built-in CMake configuration files making integration straightforward.

1. Create a build directory:

   ```bash
   mkdir build && cd build
   ```

2. Configure with CMake (optionally specify install prefix):

   ```bash
   cmake ../googletest
   ```

3. Build and optionally install:

   ```bash
   cmake --build . --target all
   cmake --install .  # Optional
   ```

4. Link your test executables against googletest and googlemock libraries:

   ```cmake
   target_link_libraries(your_test PRIVATE gtest gmock)
   ```

This process supports automatic detection of minimum C++ versions and sets appropriate compiler flags.

### 4.2 Using Bazel

GoogleTest and GoogleMock come with Bazel build files (`BUILD.bazel`) facilitating integration in Bazel projects.

- Add `@com_google_googletest//:gmock` and `@com_google_googletest//:gtest` as dependencies in your Bazel targets to use GoogleTest and GoogleMock.

- The Bazel quickstart workflow allows seamless addition of GoogleTest to your builds with minimal configuration.

### 4.3 Manual Build

For advanced use cases or custom build systems:

- Use the manual build instructions by compiling the source files directly.
- Include the header files and source files of `googletest` and `googlemock` in your build.
- Compile sample tests to validate your setup.

Refer to the [Manual Build & Validation](getting-started/installation-configuration/manual-build-validation) page for detailed instructions.

---

## 5. Setting up Your First Mock

Writing your first mock class and using GoogleMock is straightforward:

1. Import GoogleMock header:

   ```cpp
   #include <gmock/gmock.h>
   ```

2. Define your interface with virtual methods (make sure the destructor is `virtual`):

   ```cpp
   class Turtle {
    public:
     virtual ~Turtle() {}
     virtual void PenUp() = 0;
     virtual void PenDown() = 0;
     virtual void Forward(int distance) = 0;
     // ... other virtual methods ...
   };
   ```

3. Define a mock class that inherits from your interface using `MOCK_METHOD` macros:

   ```cpp
   class MockTurtle : public Turtle {
    public:
     MOCK_METHOD(void, PenUp, (), (override));
     MOCK_METHOD(void, PenDown, (), (override));
     MOCK_METHOD(void, Forward, (int distance), (override));
     // ... other mock methods ...
   };
   ```

4. Use mock objects in tests and set expectations using `EXPECT_CALL` and behaviors with `ON_CALL`.

Example:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::AtLeast;

class MockTurtle : public Turtle {
 public:
   MOCK_METHOD(void, PenDown, (), (override));
   MOCK_METHOD(void, Forward, (int distance), (override));
};

TEST(PainterTest, CanDrawCircle) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(AtLeast(1));
  EXPECT_CALL(turtle, Forward(100));

  Painter painter(&turtle);
  EXPECT_TRUE(painter.DrawCircle(0, 0, 10));
}
```

---

## 6. Common Pitfalls and Tips

- **Virtual Destructor:** Always declare a `virtual` destructor in interfaces intended for mocking to avoid resource leaks.
- **Order of Expectations:** Set `EXPECT_CALL`s before the code under test invokes mock methods. Setting expectations afterward leads to undefined behavior.
- **Overload Ambiguity:** For overloaded methods, you may need to disambiguate which overload to mock by specifying the method signature explicitly.
- **Sticky Expectations:** Expectations remain active even if saturated unless explicitly retired with `.RetiresOnSaturation()` or organized in sequences.
- **Uninteresting Calls:** Calls to mock methods without matching expectations produce warnings by default. Use `NiceMock` to suppress warnings or `StrictMock` to convert warnings to errors.
- **Actions Evaluation:** Be careful that action clauses like `Return(n++)` evaluate expressions only once when setting expectations. Use lambdas for side-effectful or dynamically evaluated actions.

---

## 7. Useful References and Next Steps

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly tutorial on mocking
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Practical recipes and advanced mocking techniques
- [Install with CMake](getting-started/installation-configuration/install-cmake): Detailed CMake-based installation guide
- [Install with Bazel](getting-started/installation-configuration/install-bazel): Bazel build integration information
- [Manual Build & Validation](getting-started/installation-configuration/manual-build-validation): Manual setup instructions
- [GoogleTest Primer](https://google.github.io/googletest/primer.html): Basics of writing and running tests
- [Mocking Reference](docs/reference/mocking.md): Full macro, API, and class reference

---

## 8. Troubleshooting Setup Issues

- If builds fail due to missing dependencies or C++ version issues, confirm your compiler supports C++11 or later.
- Incorrect linkage errors often result from forgetting to link `gmock` and `gtest` libraries.
- To verify your setup, compile and run [sample test files](getting-started/first-test/writing-basic-test).
- Use CMake’s verbose build output or Bazel logs to diagnose build or integration problems.
- Consult `--help` and GoogleTest flags for configuration options.

---

## Summary

Following these steps ensures you can quickly have GoogleTest and GoogleMock up and running, providing an effective foundation to write robust unit tests and mocks for C++ projects. This page focuses on acquisition, building, integration, and initial usage, setting you up for success in test-driven development workflows.

---

<Check>Remember: Always place your expectations before exercising code that invokes the mocks, and ensure interfaces have virtual destructors to prevent resource leaks.</Check>

---

## Example Setup Workflow Recap

<Steps>
<Step title="Clone Source">
Run `git clone https://github.com/google/googletest.git` to get the source.
</Step>
<Step title="Build with CMake">
Configure and build in a separate directory:

```bash
mkdir build && cd build
cmake ../googletest
cmake --build .
```
</Step>
<Step title="Link Your Project">
Add `gtest` and `gmock` targets as link dependencies in your CMakeLists.
</Step>
<Step title="Write Mock Classes">
Use `MOCK_METHOD` macros to define mocks based on your interfaces.
</Step>
<Step title="Set Expectations & Test">
Use `EXPECT_CALL` and `ON_CALL` to specify behavior, then run tests with `RUN_ALL_TESTS()`.
</Step>
</Steps>

---

## Additional Help & Support

- Engage with the [GoogleTest GitHub Issues](https://github.com/google/googletest/issues) for bug reports and questions.
- Explore community forums or Stack Overflow for common integration problems.
- Consult the detailed documentation tabs for Installation, Writing Tests, Mocking Patterns, and API References linked in the official docs navigation.

---

This completes the focused guidance on installing and setting up GoogleTest and GoogleMock.
