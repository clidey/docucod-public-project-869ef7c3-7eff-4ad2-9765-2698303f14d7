---
title: "Getting Started: Key Questions"
description: "Answers to essential questions about installing, building, and running tests with GoogleTest and GoogleMock—including setup, required dependencies, and first steps for both frameworks. This page helps new users get up and running with minimal friction."
---

# Getting Started: Key Questions

This page provides essential answers to questions about installing, building, and running tests using GoogleTest and GoogleMock. It covers critical first steps to help new users set up the frameworks with minimal friction.

---

## 1. What Are GoogleTest and GoogleMock?

GoogleTest is the industry-standard C++ testing framework designed to write and run C++ unit tests easily and reliably. GoogleMock (gMock) is the companion framework that lets you create mock classes and specify expectations on method calls to verify interactions between components.

Together, they empower developers to write robust, maintainable tests that ensure code correctness while enabling design improvements through mocking dependencies.

---

## 2. How Do I Get Started with GoogleTest and GoogleMock?

To begin:

1. **Install the frameworks** – GoogleTest and GoogleMock come bundled together. You can build and install them using your preferred build system such as CMake or Bazel.
2. **Include Headers** – Your test source files should include `<gtest/gtest.h>` for GoogleTest features and `<gmock/gmock.h>` to access the mocking APIs.
3. **Write Tests and Mocks**:
   - Create test cases by deriving from `::testing::Test` or using `TEST()` macros.
   - Define mock classes by inheriting interfaces and using the `MOCK_METHOD()` macro to mock virtual methods.
4. **Set Expectations and Behaviors** – Use `EXPECT_CALL()` to specify how mocks should be called and `ON_CALL()` to define default behaviors.
5. **Build and Run Tests** – Link your test binaries against the `gtest` and `gmock` libraries and run the tests using the provided test runner.

---

## 3. What Are the Typical Dependencies and Requirements?

- **C++ Standard**: Requires C++17 or newer.
- **Compiler Support**: Compatible with most modern compilers supporting C++17.
- **Build Tools**: CMake, Bazel, or your preferred build system.
- **Runtime Environment**: Supports multiple platforms including Windows, Linux, and macOS.

Make sure to verify your environment meets the prerequisites described in the [Prerequisites & System Requirements](https://google.github.io/googletest/faq/common-questions/faq-supported-platforms) documentation.

---

## 4. How Do I Install GoogleTest and GoogleMock?

### Using CMake

1. Clone the GoogleTest repository:

   ```bash
   git clone https://github.com/google/googletest.git
   cd googletest
   ```

2. Create a build directory and run CMake:

   ```bash
   mkdir build && cd build
   cmake ..
   make
   sudo make install
   ```

This builds and installs both GoogleTest and GoogleMock libraries.

### Using Bazel

1. Add GoogleTest and GoogleMock dependencies in your `MODULE.bazel` or `WORKSPACE`.
2. Reference gtest and gmock in your build targets.
3. Build and run your tests using Bazel commands.

Refer to the [Installing with Bazel](https://google.github.io/googletest/getting-started/setup-and-installation/installing-with-bazel) guide for further details.

---

## 5. How Do I Create and Use a Mock Class?

GoogleMock uses the `MOCK_METHOD` macro inside a subclass of your abstract base class or interface.

Example:

```cpp
#include <gmock/gmock.h>  // Includes gMock.

class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
  virtual int GetX() const = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};
```

### Important Best Practices

- Put all mock methods into the `public:` section so that `EXPECT_CALL` and `ON_CALL` can access them externally.
- Mock only virtual methods.
- Add the `override` qualifier to signify method overrides.

---

## 6. How Do I Set Expectations on a Mock?

Use `EXPECT_CALL(mock_object, Method(matchers))` to specify expected calls.

Example:

```cpp
TEST(PainterTest, DrawsCircle) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown())
      .Times(AtLeast(1));

  Painter painter(&turtle);

  EXPECT_TRUE(painter.DrawCircle(0, 0, 10));
}
```

This test asserts that `PenDown()` is called at least once by `Painter::DrawCircle`.

### Key Points

- Set expectations *before* exercising the code.
- Matchers allow flexible argument checking (e.g. `_` means any value).
- Cardinalities define how many times calls should occur (`Times(0)` means never called).
- Actions (e.g., `WillOnce(Return(value))`) define return values or behaviors.

---

## 7. What Is the Difference Between `EXPECT_CALL` and `ON_CALL`?

- **`EXPECT_CALL`** sets an expectation that a call *must* happen, and fails tests if not met.
- **`ON_CALL`** sets a default behavior for calls but does *not* require the call to happen.

Use `ON_CALL` to define general mock behaviors you are not interested in verifying explicitly, and `EXPECT_CALL` to verify specific calls.

---

## 8. How Do I Run My First Test?

1. Write your test source code including `#include <gtest/gtest.h>` and/or `<gmock/gmock.h>`.
2. Define tests using `TEST()` or `TEST_F()`.
3. Build your test binary linking with GoogleTest and GoogleMock libraries.
4. Run the test executable. It will run all registered tests and report results.

If you installed GoogleTest and GoogleMock from source, you can find sample tests and test runners to help.

Refer to [Writing and Running Your First Test](https://google.github.io/googletest/guides/getting-started/your-first-test) for detailed guidance.

---

## 9. What Common Issues Might I Face During Setup and How Do I Troubleshoot?

- Check your compiler supports C++17.
- Ensure your build system correctly links GoogleTest and GoogleMock.
- On Windows, consider inheritance from runtime libraries when linking.
- If tests do not run or discover tests wrongly, verify proper initialization with `testing::InitGoogleMock(&argc, argv);`.
- For issues with expectations not being verified, confirm that mock objects are destroyed or manually verify expectations.
- Use the `--gmock_verbose=info` flag to see detailed mock call traces for diagnosis.

See [Resolving Build & Integration Issues](https://google.github.io/googletest/getting-started/common-issues-and-troubleshooting/build-issues) and [Environment & Platform Issues](https://google.github.io/googletest/getting-started/common-issues-and-troubleshooting/environment-setup-problems) for detailed troubleshooting.

---

## 10. What Are Best Practices for Success with GoogleMock?

- Define mocks only for interfaces you own or control.
- Use `NiceMock` or `StrictMock` wrappers to adjust warnings for uninteresting calls.
- Set expectations before passing mocks to tested code.
- Avoid over-specifying expectations to prevent brittle tests.
- Use sequences (`InSequence`) to enforce call order when necessary.
- Leverage the rich set of matchers for flexible argument verification.
- Use `ON_CALL` for default behavior; reserve `EXPECT_CALL` for calls you want to verify.
- Use the heap checker or manual verification (`Mock::VerifyAndClearExpectations()`) if your mock object is heap-allocated.

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — Learn to write basic tests
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Step-by-step guide to mocking
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Advanced mocking recipes
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) — Quick syntax reference
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Core API specs

---

## Troubleshooting Tips

<AccordionGroup title="Common Setup and Testing Issues">
<Accordion title="Tests fail to discover or run">
Ensure you call `testing::InitGoogleMock(&argc, argv);` early in your main function. Confirm proper linking of GoogleTest and GoogleMock libraries.
</Accordion>

<Accordion title="Expectations silently not verified">
Check that mock objects get destroyed to trigger verification, or call `Mock::VerifyAndClearExpectations(&mock);` manually before test ends.
</Accordion>

<Accordion title="Warnings about uninteresting calls">
Use `NiceMock<T>` to suppress warnings or add `EXPECT_CALL(...).Times(AnyNumber())` to explicitly allow unexpected calls.
</Accordion>

<Accordion title="Compilation errors about MOCK_METHOD and commas in arguments">
Wrap complicated return or argument types (with commas) in additional parentheses or define a type alias.
</Accordion>
</AccordionGroup>

---

## Summary
This guide empowers new users to get started with GoogleTest and GoogleMock. It covers setup, installation, writing mocks, setting expectations, running tests, and troubleshooting common pitfalls to ensure a smooth onboarding experience for effective C++ unit testing and mocking.

---

<Check>
Always write `EXPECT_CALL` statements before invoking code using mocks.
Use `ON_CALL` to define default mock behaviors without enforcing call expectations.
Verify compiler support for C++17 and correct build system configuration.
Consider wrapping mocks with `NiceMock` or `StrictMock` for uninteresting call handling.
Use `--gmock_verbose=info` for detailed debugging info.
</Check>

---

### Example Starting Point

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::AtLeast;

// Real interface
class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
  virtual int GetX() const = 0;
};

// Mock class
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};

// Example test
TEST(TurtleTest, PenDownCalled) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(AtLeast(1));

  // Your code that uses turtle
  // e.g., Painter painter(&turtle);
  //       painter.DrawCircle(0, 0, 10);
}
```

---

For further details and examples, explore the many comprehensive guides and references linked throughout this documentation.
