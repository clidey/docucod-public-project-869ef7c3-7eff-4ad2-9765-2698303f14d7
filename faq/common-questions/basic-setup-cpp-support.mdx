---
title: "What are the basic setup steps and C++ requirements?"
description: "Learn what C++ standard version is required, how to set up GoogleTest and GoogleMock, and how to include and link the frameworks correctly in your project. Understand the minimum configuration needed to get started."
---

# FAQ: What are the basic setup steps and C++ requirements?

Welcome to the essential FAQ focused on getting started with GoogleTest and GoogleMock. This page guides you through the minimum C++ standard requirements, core setup steps, and how to properly include and link the testing and mocking frameworks in your project. Whether you're new to GoogleTest or looking to verify your setup, this FAQ ensures you have the foundational knowledge to confidently kick off your testing journey.

---

## 1. What C++ Standard Version Do I Need?

GoogleTest and GoogleMock require that your project is built using **at least C++17**.

This is a strict minimum. Earlier C++ standards such as C++11 or C++14 are not officially supported.

### Why C++17?
- GoogleTest and Mock utilize advanced C++ features requiring C++17, such as template deductions and standard library enhancements.
- Ensures compatibility and stable API usage across supported compilers.

### Supported Compilers
- GCC (with C++17 support)
- Clang (with C++17 support)
- Microsoft Visual C++ (MSVC) with corresponding support for C++17

Ensure your compiler and build environment are configured accordingly.

<Tip>
Always check your compiler's documentation to verify how to enable C++17 (e.g., using flags like `-std=c++17` for GCC/Clang or appropriate project properties in MSVC).
</Tip>

---

## 2. What Are the Basic Setup Steps to Use GoogleTest and GoogleMock?

The steps below are sequential and intended to establish a working GoogleTest/GoogleMock environment in your C++ project.

<Steps>
<Step title="Download or Clone the Repository">
Start by cloning or downloading the latest GoogleTest source code from the [official GitHub repository](https://github.com/google/googletest).
</Step>
<Step title="Include Headers in Your Project">
In your test source files, include GoogleTest and GoogleMock headers as follows:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>
```

For mocking specifically, `gmock.h` includes GoogleMock and GoogleTest functionality.
</Step>
<Step title="Initialize GoogleTest and GoogleMock">
Your test executable must call `InitGoogleMock` before running tests to initialize both frameworks properly:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This call prepares GoogleMock and GoogleTest, including parsing command-line flags.
</Step>
<Step title="Link Against GoogleTest and GoogleMock Libraries">
Ensure your build system links your test executable against GoogleTest and GoogleMock libraries.

- If you build GoogleTest/GoogleMock standalone, link against their compiled static or shared libraries.
- If using CMake’s `FetchContent` or other package managers, follow integration best practices.

Correct linkage is critical for avoiding runtime linking errors.
</Step>
</Steps>

<Tip>
Check the [Setup and Installation Guide](/guides/getting-started/setup-installation) and [Installation with CMake and Bazel](/getting-started/prerequisites-installation-setup/installation-cmake-bazel) for detailed instructions.
</Tip>

---

## 3. How Should I Define Mock Classes?

When mocking interfaces or abstract classes, keep in mind:

- **All virtual methods** you intend to mock **must be declared virtual in the base class**, and their destructors should be virtual as well.
- Use the `MOCK_METHOD` macro in the public section of your mock class with the **exact method signatures**.

Example:

```cpp
class Foo {
 public:
  virtual ~Foo() = default;
  virtual int Bar(int x) = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, Bar, (int x), (override));
};
```

This declaration creates a mock version of `Foo` that can be used in tests.

<Tip>
Though `MOCK_METHOD` supports mocking non-virtual methods via advanced patterns, standard usage assumes virtual methods in interfaces or base classes.
</Tip>

---

## 4. What Are the Minimum Includes and How Do I Link?

### Includes:
- In your tests, typically include:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>
```

- Including `gmock/gmock.h` covers most mocking needs as it brings in GoogleMock and GoogleTest headers.

### Linking:
You must link the compiled GoogleTest and GoogleMock libraries into your test executable.

- If you build the libraries yourself, add them to your linker input.
- If using CMake, `FetchContent` or package configuration files often handle linkage.

**Common pitfall:** Forgetting to link GoogleMock libraries can cause linker errors or runtime failures.

---

## 5. How Do I Verify My Setup Is Working?

A simple way to validate your setup is to write and run a minimal test:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

TEST(SanityCheck, BasicTest) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile, link, and run this test. If it passes and runs without errors, your basic setup is correct.

<Tip>
See [Writing and Running Your First Test](/guides/getting-started/writing-your-first-test) for an expanded walkthrough.
</Tip>

---

## 6. Common Pitfalls During Basic Setup

<AccordionGroup title="Common Setup Issues and How to Avoid Them">
<Accordion title="Compiler Error: Unsupported C++ Version">
Your compiler might not be set to C++17 or higher. Make sure your build system passes the correct flag.

For GCC/Clang: `-std=c++17`

For MSVC: Use appropriate project settings.
</Accordion>
<Accordion title="Linker Errors Related to GoogleMock">
Verify the linker command includes both GoogleTest and GoogleMock libraries. They are sometimes separate components.

Link missing `libgmock.a` or `gmock.lib` causes undefined references.
</Accordion>
<Accordion title="Missing Virtual Destructor Warning/Errors">
Ensure the base classes you mock have a virtual destructor.

Without this, deleting through a base pointer can cause undefined behavior.
</Accordion>
<Accordion title="Incorrect MOCK_METHOD Syntax">
Be careful with method signatures, especially with commas inside argument types.

Use parentheses to wrap complex types containing commas or use type aliases.
</Accordion>
</AccordionGroup>

---

## 7. How Do I Use CMake or Bazel to Build Tests with GoogleMock?

There are multiple ways to integrate GoogleTest/GoogleMock into your build using CMake or Bazel:

- The GoogleTest repository can be fetched via `FetchContent` in CMake, then linked to your target.
- Bazel users can add dependency on `@com_google_googletest//:gmock` and `@com_google_googletest//:gtest`.

Follow detailed instructions in the [Installation with CMake and Bazel guide](/getting-started/prerequisites-installation-setup/installation-cmake-bazel).

---

## 8. Additional Tips

- Always initialize GoogleMock **once** in your test executable via `testing::InitGoogleMock`.
- Organize mock classes in headers shared between your tests for reuse.
- Use GoogleMock’s verbose flag (`--gmock_verbose=info`) to diagnose issues during setup.
- Prefer `NiceMock` wrappers over raw mocks in early test development to reduce noise from uninteresting calls.

---

## Related Topics

- [System Requirements & Supported Platforms](/getting-started/prerequisites-installation-setup/system-requirements-supported-platforms): To ensure your environment is compatible.
- [Setup and Installation Guide](/guides/getting-started/setup-installation): Step-by-step instructions.
- [Writing Your First Test](/guides/getting-started/writing-your-first-test): How to create and run initial tests.
- [Mocking API Reference](/api-reference/core-apis/gmock-mocking-api): Details on mocking syntax and usage.


---

Explore Google's official [GoogleTest and GoogleMock GitHub repository](https://github.com/google/googletest) for the latest sources and examples.

# End of FAQ
