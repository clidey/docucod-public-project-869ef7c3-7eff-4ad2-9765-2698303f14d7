---
title: "What are the most common errors and how do I fix them?"
description: "Review a list of standard error messages or problems encountered while using GoogleTest/GoogleMock, including troubleshooting tips and quick fixes for integration, build, or usage mistakes."
---

# FAQ: What Are the Most Common Errors and How Do I Fix Them?

This FAQ page helps you identify and resolve frequent error messages and issues encountered when using GoogleTest and GoogleMock. It focuses on typical integration, build, and usage problems, providing practical troubleshooting tips and quick fixes to help you get your tests running smoothly.

---

## 1. Common Errors You May Encounter

### 1.1 Uninteresting Mock Function Calls Warning

**Symptom:** You see warnings like `Uninteresting mock function call` in your test output when a mock method is called without an expectation.

**Cause:** This occurs when a mock method is invoked but no `EXPECT_CALL` exists for it.

**Fix:**
- Use `NiceMock<YourMock>` instead of your mock directly to suppress warnings about uninteresting calls when you don't care about them.
- Explicitly add an `EXPECT_CALL(my_mock, MethodName).Times(AnyNumber())` for methods that might be called but aren't important to verify in your test.
- Avoid blindly adding `EXPECT_CALL` without intentions as it may lead to harder-to-maintain tests.

### 1.2 Unexpected Calls Failures

**Symptom:** The test fails with errors indicating an unexpected call to a mock method.

**Cause:** Your code called a mock method with parameters that don't match any active `EXPECT_CALL`.

**Fix:**
- Verify your expectations cover all call patterns your code might invoke.
- Add catch-all expectations with wildcard matchers like `_` and `Times(AnyNumber())` to allow unexpected calls.
- Remember that `EXPECT_CALL` statements are checked in reverse order; put specific expectations after general ones.

### 1.3 Excessive Call Errors

**Symptom:** Errors indicating the mock function was called more times than expected.

**Cause:** The mock method is invoked beyond the specified number of calls in `Times()` or inferred cardinality.

**Fix:**
- Increase the call count in `Times()` if the method legitimately can be called more often.
- Use `Times(AnyNumber())` with a catch-all expectation for calls you don't want to limit.
- If you want to allow specific calls a controlled number of times and others freely, add a specific `EXPECT_CALL` for the counted calls and a general one for the rest.

### 1.4 Incorrect `MOCK_METHOD` Usage with Commas in Types

**Symptom:** Compilation errors when mocking methods with return types or arguments containing commas (e.g., `std::pair<bool, int>`).

**Cause:** The `MOCK_METHOD` macro cannot correctly parse unprotected commas.

**Fix:**
- Wrap complex types in extra parentheses. For example:
  ```cpp
  MOCK_METHOD((std::pair<bool, int>), GetPair, ());
  ```
- Alternatively, use type aliases:
  ```cpp
  using BoolAndInt = std::pair<bool, int>;
  MOCK_METHOD(BoolAndInt, GetPair, ());
  ```

### 1.5 Mock Classes With Non-Virtual Destructors May Misbehave

**Symptom:** `NiceMock` and `StrictMock` may not work correctly, possibly leading to runtime issues.

**Cause:** These wrappers rely on virtual destructors for proper behavior.

**Fix:** Ensure that your mock classes (and the base classes they mock) have virtual destructors.

### 1.6 Using `NiceMock`, `NaggyMock`, and `StrictMock` Improperly

**Symptom:** Unexpected behavior or compilation errors when nesting or modifying mock strictness.

**Cause:** Nesting strictness modifiers (e.g., `NiceMock<StrictMock<MockFoo>>`) or applying these to mock classes with base class mock methods can cause problems.

**Fix:**
- Avoid nesting `NiceMock`, `NaggyMock`, or `StrictMock` wrappers.
- Only apply these wrappers to mock methods defined directly in the mock class using `MOCK_METHOD`.

### 1.7 Excessive or Too Few Actions in `EXPECT_CALL`

**Symptom:** Warnings indicate a mismatch between number of `WillOnce()` and specified call cardinality.

**Cause:** You may have more or fewer `WillOnce` actions than the expected calls according to your `Times()` specification.

**Fix:**
- Ensure that the number of `WillOnce()` actions balance the cardinality of `Times()`.
- Use `WillRepeatedly()` to handle calls beyond your explicit `WillOnce()` list.
- If you want an expectation to *retire* when saturated, use `.RetiresOnSaturation()` to deactivate it automatically.

### 1.8 Mock Methods Without Default Return Values Cause Exceptions or Death

**Symptom:** Calls to mock methods with non-default-constructible return types fail or throw when no action or return value is specified.

**Cause:** GoogleMock cannot provide a default return value for such method signatures.

**Fix:**
- Provide explicit actions via `ON_CALL` or `EXPECT_CALL` with `.WillByDefault(Return(...))` or a lambda.
- Implement proper default behaviors for such methods.

## 2. Troubleshooting Integration and Build Problems

### 2.1 Linking Errors Due to Missing GoogleMock Symbols

**Symptom:** Undefined symbol errors related to GoogleMock functions.

**Cause:** GoogleMock is not properly linked into the test executable.

**Fix:**
- Make sure you link against the full GoogleMock library, not just GoogleTest.
- If using CMake or Bazel, verify your build configuration includes `gmock` targets.

### 2.2 Compiler Compatibility or C++17 Requirement

**Symptom:** Compilation errors or warnings about language support.

**Cause:** GoogleTest requires a minimum of C++17 support.

**Fix:**
- Update your compiler to a supported version (e.g., GCC 7+, Clang 5+, MSVC 2017+).
- Configure your build toolchain to use C++17 or later.

### 2.3 Slow Compilation of Mock Classes

**Symptom:** Compiling mocks is slow, especially with many mocked methods.

**Cause:** Mock method constructor and destructor implementations are generated in headers repeatedly.

**Fix:**
- Move mock class constructor and destructor definitions into a `.cc` file.
- Include only declarations and mock method definitions in headers.

## 3. Helpful Tips & Best Practices

- Define all mock classes and mock methods in a clear and consistent manner using `MOCK_METHOD`.
- Use `NiceMock` to suppress uninteresting call warnings where appropriate.
- Use `StrictMock` only when you want uninteresting calls to cause test failures for maximum strictness.
- Use sequences (`InSequence`) to enforce call order, but avoid over-constraining unless necessary.
- Manage expectations carefully to avoid sticky expectations pitfalls. Use `.RetiresOnSaturation()` to retire expectations after completion.
- Set clear default behaviors using `ON_CALL` to reduce brittleness in your tests.

## 4. Troubleshooting Common Issues Quick Reference

<AccordionGroup title="Common Error Troubleshooting">
<Accordion title="Uninteresting Call Warning">
If you see "Uninteresting mock function call", use `NiceMock` for your mocks or add broad `EXPECT_CALL`s with `Times(AnyNumber())`.
</Accordion>
<Accordion title="Unexpected Call Failure">
Check all calls have matching `EXPECT_CALL` with appropriate matchers. Use wildcards `_` or catch-all expectations as needed.
</Accordion>
<Accordion title="Excessive Call Error">
Verify that the function isn't called more times than the `Times()` clause allows. Use `Times(AnyNumber())` for flexible counts.
</Accordion>
<Accordion title="Compilation Error with MOCK_METHOD Macros">
Wrap types with commas in additional parentheses or define type aliases to avoid macro parsing issues.
</Accordion>
<Accordion title="Mock Methods Without Default Returns">
Provide explicit actions for non-default-constructible return types to avoid runtime exceptions.
</Accordion>
</AccordionGroup>

## 5. Additional Resources

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Recipes and usage patterns.
- [Mocking Reference](reference/mocking.md): Complete reference for mock-related macros and classes.
- [gMock Cheat Sheet](docs/gmock_cheat_sheet.md): Quick summary of mocking syntax.
- [Mock Strictness Control](api-reference/core-apis/gmock-nice-strict-api.mdx): Detailed info on NiceMock, NaggyMock, and StrictMock.

---

For detailed instructions on defining mocks, setting expectations, and understanding uninteresting and unexpected calls, please refer to the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) and the [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md).


---

<Check>
Ensure that all mock classes have virtual destructors to support NiceMock and StrictMock.
</Check>

<Check>
Review your `EXPECT_CALL` order carefully. Later expectations override earlier ones.
</Check>

<Warning>
Avoid nesting mock strictness modifiers (e.g., `NiceMock<StrictMock<MockFoo>>`) - this is unsupported and will cause issues.
</Warning>

<Tip>
Use `--gmock_verbose` flag with levels `info`, `warning`, or `error` to control logging detail and help diagnose uninteresting call warnings.
</Tip>


---

### Example: Suppressing Uninteresting Call Warnings Using NiceMock
```cpp
using ::testing::NiceMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(int, DoThat, (bool), ());
};

TEST(MyTest, Example) {
  NiceMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis();  // No warning for uninteresting calls
  mock_foo.DoThat(true);  // No warning
}
```

### Example: Using Times(AnyNumber()) to Allow Flexible Calls
```cpp
EXPECT_CALL(mock, SomeMethod(_))
    .Times(testing::AnyNumber());
```

### Example: Fixing Comma Parsing in MOCK_METHOD
```cpp
using BoolAndInt = std::pair<bool, int>;
MOCK_METHOD(BoolAndInt, GetPair, ());

// or
MOCK_METHOD((std::pair<bool, int>), GetPair, ());
```

---

If you encounter other errors, consult the [Troubleshooting Common Issues](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-debugging/troubleshooting-common-issues.md) page, or seek help from the community.


---

## Contact and Support

For further assistance, visit the official [GoogleTest GitHub repository](https://github.com/google/googletest) to report issues or engage with the community.


---

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/gmock_cook_book.md"},{"path": "docs/reference/mocking.md"},{"path": "docs/gmock_cheat_sheet.md"},{"path": "googlemock/include/gmock/gmock-nice-strict.h"}]} />
