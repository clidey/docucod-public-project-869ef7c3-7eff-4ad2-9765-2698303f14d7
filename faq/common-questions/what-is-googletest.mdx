---
title: "What is GoogleTest and GoogleMock?"
description: "An overview of GoogleTest's core purpose, how it relates to GoogleMock, and the primary value it brings to C++ test development. Clarifies the consolidation of both libraries and the benefits for developers seeking structured and powerful testing tools."
---

# What is GoogleTest and GoogleMock?

## Overview

GoogleTest and GoogleMock are Google’s open-source C++ libraries designed to empower developers with powerful, structured, and reusable tools for writing reliable and maintainable tests. While GoogleTest is a comprehensive testing framework focused on writing and running unit tests, GoogleMock complements it by providing facilities for creating and managing mock objects to isolate dependencies and flexibly verify interactions.

This page introduces the core purpose of GoogleTest, explains its relationship with GoogleMock, and highlights the key benefits they bring when used together in C++ test development.

---

## What is GoogleTest?

GoogleTest is a portable and fully-featured C++ testing framework that enables developers to write automated, repeatable, and organized tests for C++ codebases. It follows the widely-adopted xUnit architecture familiar to users of JUnit and similar frameworks.

### Core Purpose

- To provide a simple yet powerful system for defining and running tests that validate correctness.
- To help ensure tests are independent, repeatable, and fast, facilitating efficient debugging and higher code quality.
- To organize tests into suites and fixtures, improving maintainability.
- To give detailed failure reports, supporting both fatal and non-fatal assertions.
- To abstract away tedious bookkeeping tasks from test authors.

GoogleTest supports cross-platform usage, running on Linux, Windows, and macOS with a consistent developer experience.

### Key Features

- **Test Suites and Fixtures:** Group related tests and share setup/teardown code.
- **Rich Assertions:** Over 30 assertion macros for various checking needs with customizable messages.
- **Test Discovery and Execution:** Automatically registers tests and runs all tests in an executable with `RUN_ALL_TESTS()`.
- **Typed, Parameterized, and Value-Parameterized Tests:** Test multiple types and data inputs with minimal code repetition.
- **Thread Safety:** Thread-safe on systems with pthreads available.

### How GoogleTest Works - At a Glance

When you write tests using GoogleTest, you:

1. Define tests with the `TEST()` macro or `TEST_F()` for fixtures.
2. Use assertions like `EXPECT_EQ()` and `ASSERT_TRUE()` to verify code behavior.
3. Compile these tests into a binary linked against GoogleTest libraries.
4. Run the tests, typically via a simple main function or by linking with the provided `gtest_main` library.

This allows you to uncover issues early and systematically.

#### Example: A Simple Test

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Tests
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## What is GoogleMock?

GoogleMock (or gMock) is a complementary C++ library dedicated to creating and managing mock objects within your tests.

### Purpose and Benefits

- Allows precise and declarative specification of mocked classes and methods with `MOCK_METHOD` macros.
- Provides a rich language for setting *expectations* on mocked method calls, including argument matching, call order, call counts, and return behaviors.
- Supports flexible behavior control using actions and sequences.
- Integrates seamlessly with GoogleTest’s assertion mechanisms and test execution flows.

### Why Use GoogleMock?

- To isolate your code under test by mocking out dependencies (e.g., interfaces, external systems).
- To validate interactions and ensure code behaves correctly under various scenarios.
- To simulate error conditions and rare cases that are difficult to produce with real objects.

### Example: Defining and Using a Mock

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class FooInterface {
public:
  virtual ~FooInterface() = default;
  virtual int GetValue(int x) = 0;
};

class MockFoo : public FooInterface {
public:
  MOCK_METHOD(int, GetValue, (int x), (override));
};

TEST(FooTest, ReturnsExpectedValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue(5))
      .WillOnce(testing::Return(10));

  EXPECT_EQ(mock.GetValue(5), 10);
}
```

This declarative approach makes your tests clearer and easier to maintain.

---

## How GoogleTest and GoogleMock Relate

- GoogleMock *builds upon* GoogleTest and depends on its core functionality.
- GoogleMock initialization also initializes GoogleTest internally, so there is no need to call `InitGoogleTest()` separately when using mocks.
- Both libraries are distributed together and built as a single unified project, simplifying installation and usage.
- Tests can simultaneously contain regular GoogleTest unit tests and GoogleMock mock-based tests.

---

## Benefits of Using GoogleTest and GoogleMock Together

- **Comprehensive Testing Environment:** From simple unit tests to complex interaction and behavior testing.
- **Reduced Boilerplate:** The libraries handle the tedious mechanics of test registration, mock verifications, and result reporting.
- **Powerful Assertions and Expectations:** Meaningful failure messages and flexible expectation definitions improve diagnosis and reliability.
- **Cross-Platform and Toolchain Support:** Support for all major platforms and compilers with modern C++ standards (C++17 required).

---

## Getting Started with GoogleTest and GoogleMock

1. **Install and Build:** GoogleTest provides a straightforward CMake build system. You can build both libraries together or selectively build just GoogleTest.

```bash
git clone https://github.com/google/googletest.git
cd googletest
mkdir build && cd build
cmake .. # Builds both GoogleTest and GoogleMock by default
make
sudo make install
```

To build only GoogleTest:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

2. **Integrate:** Add GoogleTest/GoogleMock to your existing CMake project via `find_package` or as a subdirectory.
3. **Write Tests:** Use `#include <gtest/gtest.h>` for basic tests and `#include <gmock/gmock.h>` when mocking.
4. **Run Tests:** Link with `gtest_main` or `gmock_main` for default `main()` implementations.

---

## Summary of Key Points

| Feature                      | GoogleTest                                 | GoogleMock                           |
|------------------------------|-------------------------------------------|-------------------------------------|
| Focus                        | Writing and running tests                   | Defining and verifying mock objects  |
| Main API                     | `TEST()`, `TEST_F()`, assertions           | `MOCK_METHOD()`, `EXPECT_CALL()`    |
| Setup                       | `InitGoogleTest()` and `RUN_ALL_TESTS()`   | `InitGoogleMock()` (includes InitGoogleTest) |
| Use in `main()`             | Link with `gtest_main` or provide your own | Link with `gmock_main` (includes main) |
| Cross-platform support       | Linux, Windows, Mac, Embedded Platforms    | Same                               |

---

## Additional Resources

- [GoogleTest Primer](primer.md): Learn how to write basic tests.
- [GoogleMock for Dummies](gmock_for_dummies.md): Step-by-step guide to mocking.
- [Mocking Reference](api_reference/mocking_api/mock_object_basics.md): API documentation for mocks.
- [Installation Instructions](getting-started/prerequisites-installation/installation-instructions.md): Platform-specific setup.
- [Feature Overview](overview/architecture-features-integration/feature-overview.md): Complete functional summary.

---

## Troubleshooting & Common Questions

<AccordionGroup title="FAQ - What is GoogleTest and GoogleMock?">
<Accordion title="Can I use GoogleTest without GoogleMock?">
Yes. GoogleTest can be used independently as a full-featured unit testing framework without any dependency on GoogleMock. GoogleMock is optional and only required if you need mocking capabilities.
</Accordion>
<Accordion title="Is GoogleMock included when I build GoogleTest?">
By default, building GoogleTest via CMake includes GoogleMock as well. You can disable it with the option `-DBUILD_GMOCK=OFF` if you want only the core testing library.
</Accordion>
<Accordion title="Do I have to write my own main() function to run tests?">
Generally no. Linking with the provided `gtest_main` (for GoogleTest) or `gmock_main` (for GoogleMock) libraries includes appropriate main functions that initialize and run all tests.
</Accordion>
<Accordion title="What C++ standard do I need to use?">
GoogleTest and GoogleMock require a compiler supporting at least C++17.
</Accordion>
<Accordion title="How do GoogleTest and GoogleMock handle thread safety?">
GoogleTest is thread-safe on systems where pthread is available. GoogleMock is also designed with thread safety in mind but some operations like setting expectations concurrently may not be safe.
</Accordion>
</AccordionGroup>

---

<Info>
For comprehensive guidance, always start with the GoogleTest Primer for foundational concepts and then move to the Mocking for Dummies guide to incorporate mocks. Refer to API references for more detailed usage insights.
</Info>
