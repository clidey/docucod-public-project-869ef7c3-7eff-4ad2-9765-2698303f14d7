---
title: "Running and Managing Tests"
description: "Helps users troubleshoot and understand best practices related to compiling, running, and managing test execution, as well as interpreting test results and common output. Clarifies how to discover, filter, or repeat tests and the available command-line options."
---

# Running and Managing Tests

This page helps you efficiently troubleshoot and master best practices related to compiling, running, and managing test execution using GoogleTest. You'll gain clear guidance on how to discover, filter, repeat, and interpret tests and understand the command-line options available for controlling test behaviors.

---

## 1. Listing Available Tests

Before running tests, you may want to discover which tests are available in your binary. GoogleTest provides a powerful option to list all registered tests without actually running them.

### How to List Tests

Run your test executable with the flag `--gtest_list_tests`:

```bash
$ ./my_tests --gtest_list_tests
```

This outputs all test suites and their corresponding tests in this format:

```
TestSuite1.
  TestName1
  TestName2
TestSuite2.
  TestName
```

Disabled tests (those whose names or test suite names start with `DISABLED_`) are also listed but marked accordingly.

### Where Are These Tests Defined?

Tests are grouped by *test suites*, which align with your use of `TEST()`, `TEST_F()`, `TEST_P()` macros or dynamic registrations. The suite and test names shown correspond exactly to those used when they were registered.

### When Would You Use This?

- To confirm which tests match your intended filters.
- To verify that tests compiled and registered correctly.
- For automation or tooling that introspects available tests.

---

## 2. Running Tests

Running tests is typically done with the `RUN_ALL_TESTS()` function invoked after initializing GoogleTest with `InitGoogleTest()`. However, GoogleTest offers rich controls on which and how tests execute.

### Running All Tests

By default, your test program runs all linked tests:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This will execute every test that is not disabled or filtered out.

### Running a Subset of Tests: Filtering

You can select subsets of tests by applying a filter pattern using the `--gtest_filter` flag or the `GTEST_FILTER` environment variable.

**Filter Syntax:**

- Format: `PositivePatterns[-NegativePatterns]`
- Multiple positive or negative patterns separated by `:`
- `?` matches any single character, `*` matches any substring

Example usages:

- Run tests in suite FooTest:
  ```bash
  ./my_tests --gtest_filter=FooTest.*
  ```

- Run tests with names containing "Null" or "Constructor":
  ```bash
  ./my_tests --gtest_filter=*Null*:*Constructor*
  ```

- Run everything except DeathTests:
  ```bash
  ./my_tests --gtest_filter=-*DeathTest.*
  ```

- Run FooTest except Bar:
  ```bash
  ./my_tests --gtest_filter=FooTest.*-FooTest.Bar
  ```

### Running Disabled Tests

Tests prefixed with `DISABLED_` are skipped by default.

To run disabled tests as well, use:

```bash
./my_tests --gtest_also_run_disabled_tests
```

or set the environment variable `GTEST_ALSO_RUN_DISABLED_TESTS=1`.

### Stop on First Failure

Specify `--gtest_fail_fast` to abort running tests immediately upon a failure. Useful for quick debug iterations:

```bash
./my_tests --gtest_fail_fast
```

### Repeat Tests

The `--gtest_repeat=N` flag runs the tests N times. To repeat indefinitely, use a negative value:

```bash
./my_tests --gtest_repeat=1000
./my_tests --gtest_repeat=-1
```

You can combine this with filters and fail-fast.

> Tip: Use `--gtest_recreate_environments_when_repeating` to control whether global test environments are recreated each iteration or just set up once.

### Randomizing Test Order

Use `--gtest_shuffle` to execute tests in a random order to detect inter-test dependencies:

```bash
./my_tests --gtest_shuffle
```

Specify the random seed (for reproducibility) with:

```bash
./my_tests --gtest_random_seed=12345
```

### Test Sharding (Parallel Execution Across Machines)

GoogleTest supports distributing tests across multiple machines or processes (shards). Set the environment:

- `GTEST_TOTAL_SHARDS`: total shards
- `GTEST_SHARD_INDEX`: zero-based index

GoogleTest will partition tests such that each shard gets a disjoint subset.

Example on shard #1 of 3 shards:

```bash
export GTEST_TOTAL_SHARDS=3
export GTEST_SHARD_INDEX=1
./my_tests
```

> Note: If these variables are set inconsistently (e.g., `GTEST_SHARD_INDEX` out of range), GoogleTest will exit with an error.

---

## 3. Understanding Test Output

GoogleTest provides rich and readable output showing test progress and results.

### Output Phases

- `[==========]` indicates overall program progress.
- `[----------]` groups tests or environments setup/teardown.
- `[ RUN      ]` is printed when a test starts.
- `[       OK ]` after a passing test.
- `[  FAILED  ]` after a failing test.
- `[  SKIPPED ]` for skipped tests.

### Detailed Failure Messages

When a test assertion fails, GoogleTest prints:

- The source file and line number.
- The assertion expression, expected vs actual.
- An optional stack trace (if enabled).

Example:

```
my_test.cc:42: Failure
Expected equality of these values:
  foo
  bar
Stack trace:
  ...
```

### Counting Tests

Summary lines include counts of executed, passed, failed, skipped, and disabled tests.

### Color Output

Default output uses colors to highlight status (`green` for pass, `red` for fail, `yellow` for warnings).

Disable colors via flag `--gtest_color=no` or environment variable `GTEST_COLOR=no` if your output medium does not support it.

### Output Formats: XML and JSON

To generate machine-readable reports, use the `--gtest_output` flag.

Formats supported: `xml` and `json`.

Examples:

```bash
./my_tests --gtest_output=xml             # Outputs to default XML file.
./my_tests --gtest_output=xml:my_output/  # Outputs XML files inside my_output directory.
./my_tests --gtest_output=json:results.json
```

Reports include test durations, failures, stack traces, and other metadata for CI systems and test result aggregators.

---

## 4. Interpreting Test Results and Status

### Test Result Statuses

- **Passed**: No assertion failures.
- **Failed**: At least one fatal or non-fatal failure.
- **Skipped**: Test was skipped explicitly with `GTEST_SKIP()`.
- **Disabled**: Test has `DISABLED_` prefix and is not run unless overridden.

### Analyzing Failures

Failure messages include file locations and failure description. Use stack traces and contextual messages (from `SCOPED_TRACE` or streamed messages) to understand failures.

### Common Output Patterns

- Multiple failures in one test are printed sequentially.
- Flaky tests can be identified by `--gtest_repeat` failures.

---

## 5. Discovering and Filtering Tests Programmatically

### Programmatic Test Enumeration

You can list available test names from code by accessing the `UnitTest` singleton:

```cpp
const testing::UnitTest* unit_test = testing::UnitTest::GetInstance();
for (int i = 0; i < unit_test->total_test_suite_count(); ++i) {
  const testing::TestSuite* suite = unit_test->GetTestSuite(i);
  for (int j = 0; j < suite->total_test_count(); ++j) {
    const testing::TestInfo* test_info = suite->GetTestInfo(j);
    std::cout << suite->name() << "." << test_info->name() << "\n";
  }
}
```

This can help you build custom runners or reporters.

### Filtering Principle

Filters work by matching full test names consisting of `TestSuiteName.TestName`. Both positive and negative filters can be combined.

---

## 6. Command-Line Flags Overview

| Flag                                | Description                                       | Default     |
|------------------------------------|-------------------------------------------------|-------------|
| `--gtest_list_tests`                | List all tests without running                    | `false`     |
| `--gtest_filter=pattern`            | Run tests matching positive patterns excluding negatives | `*` (all) |
| `--gtest_also_run_disabled_tests`  | Run disabled tests too                            | `false`     |
| `--gtest_fail_fast`                 | Abort on first failure                            | `false`     |
| `--gtest_repeat=N`                  | Run tests N times (negative values mean forever) | `1`         |
| `--gtest_shuffle`                   | Randomize test order                              | `false`     |
| `--gtest_random_seed=seed`          | Specify random seed                               | `0` (time-based) |
| `--gtest_recreate_environments_when_repeating` | Recreate environments on each repeat cycle       | `false`     |
| `--gtest_color={yes|no|auto}`       | Control colored output                            | `auto`      |
| `--gtest_brief=1`                   | Only print test failures                          | `false`     |
| `--gtest_print_time=0`              | Disable elapsed time printing                     | `true`      |
| `--gtest_output={xml|json}[:path]` | Generate XML or JSON report to specified path    | (none)      |

Run your test executable with `--help` to see the full list and usage.

---

## 7. Best Practices and Troubleshooting Tips

### Best Practices

- Use filtering to speed up runs during development.
- Name death tests suites ending with `DeathTest` to ensure they run first.
- Use `DISABLED_` prefix sparingly, as GoogleTest warns about disabled tests.
- For repeated fragile tests, leverage `--gtest_repeat` with `--gtest_fail_fast`.
- Use `RUN_ALL_TESTS()` only after `InitGoogleTest()`.
- For tests requiring multiple iterations, consider using `--gtest_recreate_environments_when_repeating` depending on resource setup costs.

### Common Pitfalls

- Forgetting to call `InitGoogleTest()` before `RUN_ALL_TESTS()` results in invalid behavior.
- Mixing `TEST` and `TEST_F` macros in the same test suite causes runtime errors: tests in one suite must share the same fixture.
- Uninstantiated parameterized tests (`TEST_P` without `INSTANTIATE_TEST_SUITE_P`) cause failing synthetic tests unless suppressed with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.
- The `GTEST_FILTER` syntax must be carefully validated to avoid skipping all tests.
- Running tests without any linked test causes warnings or errors if `--gtest_fail_if_no_test_linked` or `--gtest_fail_if_no_test_selected` are used.

### Troubleshooting Failures

- Check test filters to ensure your test is included.
- Confirm test suite and test names are correctly spelled and appropriately parameterized.
- Use `--gtest_list_tests` to verify tests are registered.
- If using sharding, validate environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX`.
- Examine failure messages with stack traces for root cause.

---

## 8. Examples

### List All Tests

```bash
./my_tests --gtest_list_tests
```

### Run Only Tests in FooSuite

```bash
./my_tests --gtest_filter=FooSuite.*
```

### Run All but Disabled Tests

```bash
./my_tests --gtest_filter=-*DISABLED_*  # or just omit disabled tests
```

### Run Disabled Tests Only

```bash
./my_tests --gtest_filter=* --gtest_also_run_disabled_tests
```

### Repeat FooTest Five Times

```bash
./my_tests --gtest_filter=FooTest.* --gtest_repeat=5
```

### Generate XML Report

```bash
./my_tests --gtest_output=xml:results/
```

---

## 9. Summary

Mastering running and managing tests with GoogleTest includes understanding how to list, filter, repeat, and interpret your test executions. Effective use of command-line flags and environment variables enables precise control of test execution flows, improves development productivity, and supports robust CI pipelines.

---

## Related Documentation

- [Writing and Running Tests](../guides/core-workflows/writing-tests.md)
- [Using Assertions Effectively](../guides/core-workflows/using-assertions.md)
- [Test Registration and Structure](../api-reference/core-testing-apis/test-registration-and-structure.md)
- [Value and Type Parameterized Testing](../api-reference/core-testing-apis/value-and-type-parameterized-testing.md)
- [Advanced GoogleTest Topics](../docs/advanced.md)
- [GoogleTest Primer](../primer.md)

---

## Further Resources

- [Official GoogleTest GitHub Repository](https://github.com/google/googletest)
- Running tests with `--help` shows all flags and options.
- Explore XML/JSON output integration for CI systems.

---

## Tips

<Tip>
Use `--gtest_list_tests` to always verify what tests are included before running your suites.
</Tip>

<Tip>
When filtering tests, remember that the pattern applies to full test names in the form `TestSuite.TestName`.
</Tip>

<Warning>
Avoid mixing `TEST` and `TEST_F` in the same test suite — this will cause runtime failures.
</Warning>

<Check>
If you encounter unexpected empty test runs, verify your filter syntax and sharding environment variables.
</Check>