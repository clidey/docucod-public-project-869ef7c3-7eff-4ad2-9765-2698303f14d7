---
title: "How do I set up and run GoogleTest in my project?"
description: "Guides users through the essential steps to get started: installation, inclusion, and basic configuration of GoogleTest in typical development workflows. Addresses initial setup hurdles for new users."
---

# How do I set up and run GoogleTest in my project?

This guide walks you through the essential steps to install, include, and configure GoogleTest in your C++ development workflow. Whether you are starting a new project or integrating GoogleTest into an existing build system, this documentation ensures you can get your first tests running quickly and reliably.

---

## 1. Installation Overview

GoogleTest supports multiple installation methods tailored to your environment and build system preferences.

### A. Standalone Build with CMake

1. Clone the GoogleTest repository:

    ```bash
    git clone https://github.com/google/googletest.git -b v1.17.0
    cd googletest
    mkdir build
    cd build
    ```

2. Generate build files with CMake:

    ```bash
    cmake ..
    ```

    - To build only GoogleTest (without GoogleMock), use:

      ```bash
      cmake .. -DBUILD_GMOCK=OFF
      ```

3. Build the libraries:

    ```bash
    make
    ```

4. (Optional) Install to your system paths:

    ```bash
    sudo make install
    ```

> **Note:** On Windows, Visual Studio project files (`.sln`, `.vcproj`) are generated by CMake. On macOS, `.xcodeproj` files are generated.

### B. Integration into an Existing CMake Project

For smoother integration and to avoid issues with mismatched compiler and linker flags:

- Use `find_package(GTest REQUIRED)` if it's installed system-wide.
- Or add GoogleTest directly as a subdirectory in your project:

    ```cmake
    include(FetchContent)
    FetchContent_Declare(
      googletest
      URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
    )
    set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For dynamic CRT on Windows
    FetchContent_MakeAvailable(googletest)

    add_executable(example example.cpp)
    target_link_libraries(example gtest_main)
    add_test(NAME example_test COMMAND example)
    ```

> **Requirement:** CMake >= 3.14 needed for `FetchContent_MakeAvailable`.

### C. Other Build Systems

- GoogleTest also supports Bazel integration and manual compilation.
- Consult the [Integration with Build Systems](overview/integrations/integration-with-build-systems) guide for detailed instructions.

---

## 2. Project Setup

After installing or fetching GoogleTest, configure your project to include its headers and link against its libraries.

### A. Include Paths

Make sure your compiler can find GoogleTest headers, typically:

```cpp
#include <gtest/gtest.h>
```

Depending on your project layout, set your include paths accordingly, usually to `googletest/include/` or the installed system include directory.

### B. Linking Libraries

Link your test executable against `gtest` and `gtest_main` (the latter provides a default `main()` function). For example:

```cmake
target_link_libraries(your_test_target gtest_main)
```

If you want to add GoogleMock capabilities, link against `gmock` and `gmock_main` instead.

### C. Writing a Custom `main()` (Optional)

By default, linking with `gtest_main` provides a `main()` function for you. If you require custom setup or argument handling:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

> **Tip:** Always call `InitGoogleTest()` before `RUN_ALL_TESTS()` to parse flags and prepare the test environment.

---

## 3. Running Your First Test

After setup, create a sample test file, for example, `example_test.cpp`:

```cpp
#include <gtest/gtest.h>

// A simple test suite and test case
TEST(ExampleTest, SimpleAssert) {
  EXPECT_EQ(1 + 1, 2);
}
```

Build your test binary and run it. You should see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.SimpleAssert
[       OK ] ExampleTest.SimpleAssert (0 ms)
[----------] 1 test from ExampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

Success means GoogleTest is properly set up and running.

---

## 4. Common Setup Hurdles and Tips

### 4.1 C++ Standard Requirement

- GoogleTest requires a compiler supporting C++17.
- Ensure your build system passes this setting, e.g., in CMake:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### 4.2 Thread Safety and pthread

- GoogleTest is thread-safe on systems with `pthread`.
- If your environment doesn't detect `pthread`, you can force it:

```
-DGTEST_HAS_PTHREAD=1
```

- Ensure your linker includes `-lpthread` if needed.

### 4.3 Visual Studio and Runtime Library Compatibility

- On Windows, mismatches between static and dynamic runtimes cause linker errors.
- Set the CMake option `gtest_force_shared_crt` to `ON` to align the runtimes.

### 4.4 Avoiding Macro Conflicts

- GoogleTest defines many macros (e.g., `TEST()`, `ASSERT_EQ()`).
- If conflicting with other libraries, define control macros like `-DGTEST_DONT_DEFINE_TEST=1` to rename GoogleTest macros (e.g., `GTEST_TEST`).

### 4.5 Build and Link Errors

- Verify include paths and linked libraries.
- Use verbose compiler and linker outputs to identify missing paths or flags.

---

## 5. Best Practices and Next Steps

- Prefer linking with `gtest_main` or `gmock_main` to avoid writing your own `main()`.
- Use `TEST()` and `TEST_F()` macros for simple and fixture-based tests respectively.
- Split complex test setup into fixtures for reuse.
- Use continuous integration to run your tests frequently.

Explore these related guides for deeper mastery:

- [Writing and Running Your First Test](getting-started/first-steps-validation/writing-first-test)
- [Setting Up Your Test Environment](guides/getting-started/environment-setup)
- [Integration with Build Systems](overview/integrations/integration-with-build-systems)
- [Troubleshooting Common Setup Issues](getting-started/first-steps-validation/common-setup-issues)


---

## 6. Troubleshooting Checklist

<AccordionGroup title="Common Problems During Setup">
<Accordion title="Tests Are Not Discovered or Executed">
- Check that test files are linked into the test binary.
- Ensure `InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
- Verify test macros (`TEST`, `TEST_F`) are used properly.
- Use the command line flag `--gtest_list_tests` to list all discovered tests.
</Accordion>

<Accordion title="Linker Errors on Missing Symbols">
- Confirm GoogleTest libraries are linked (e.g., `-lgtest_main`).
- Check for ABI or runtime library mismatches.
- On Windows, enable `gtest_force_shared_crt` to avoid runtime conflicts.
</Accordion>

<Accordion title="Compiler Errors Related to C++ Standard">
- Set your compiler to use C++17 or later.
- Adjust build scripts or IDE settings accordingly.
</Accordion>

<Accordion title="Build Failures with Multiple Definitions">
- Avoid linking both `gtest` and `gmock` libraries incorrectly.
- Use either `gtest_main`, or `gmock_main` but not both simultaneously.
</Accordion>
</AccordionGroup>

---

## 7. Additional Resources

- Official GoogleTest GitHub: [https://github.com/google/googletest](https://github.com/google/googletest)
- GoogleTest Primer: [docs/primer.md](docs/primer.md)
- Installation Guide: [getting-started/setup-overview/installation-guide](getting-started/setup-overview/installation-guide)
- Writing and Running Your First Test: [getting-started/first-steps-validation/writing-first-test](getting-started/first-steps-validation/writing-first-test)
- Integration with Build Systems: [overview/integrations/integration-with-build-systems](overview/integrations/integration-with-build-systems)

---

By following this guide, you will equip your project with Google's robust, portable, and efficient C++ testing framework, paving the way for writing high-quality, maintainable tests.


---