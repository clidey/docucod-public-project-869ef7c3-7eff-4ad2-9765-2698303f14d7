---
title: "How should I organize my tests?"
description: "Best practices for structuring your codebase, naming conventions, and placing test files when using GoogleTest and GoogleMock. Aids users in kickstarting a maintainable test suite."
---

# How Should I Organize My Tests?

Structuring your test codebase effectively is essential to build a maintainable, scalable, and easy-to-navigate test suite using GoogleTest and GoogleMock. This guide provides best practices for organizing test files, naming conventions, and where to place your tests within your project. Whether you're kickstarting your first tests or expanding an existing suite, these recommendations will help you achieve clarity and long-term maintainability.

---

## 1. Where Should I Put My Test Files?

The placement of your test files should follow the logical organization of your production code. Common strategies include:

- **Parallel Directory Structure:** Mirror your source folders in a separate test directory. For example:
  
  ```
  /src/my_component/
  /tests/my_component/
  ```
  This makes it straightforward to locate tests related to specific source files.

- **Inline Tests:** Place test files next to the implementation files they cover. This is often practical for smaller codebases or early-stage projects but can become cluttered as the project grows.

- **Dedicated Test Directories:** Group tests by feature, module, or layer under a centralized `tests/` or `test/` directory. This can simplify build system configuration and running tests.

Choose the structure that best fits your project size and team preferences. Most large projects benefit from parallel directory structures to keep source and test clearly separated but logically connected.

---

## 2. Naming Conventions for Test Files

Consistent naming makes your test suite intuitive and helps automatic test discovery. Here are recommended naming guidelines:

- **Suffix Test Files with `_test.cc` or `_unittest.cc`:** For example, if your source file is `calculator.cc`, the test file should be named `calculator_test.cc`.

- **Use Descriptive Names for Test Suites:** If your tests cover a distinct module or feature, prefix test files accordingly, e.g., `string_utils_test.cc`.

- **Avoid Ambiguous Names:** Ensure test files clearly indicate what they are testing to help developers locate relevant tests quickly.

- **Follow Your Build System’s Naming Expectations:** Some build tools or CI configurations expect certain suffix patterns to identify test binaries.

---

## 3. Organizing Test Suites and Cases

Within your test files, organize tests to reflect your code structure and testing goals:

- **Use `TEST()` and `TEST_F()` Macros Thoughtfully:**
  - Use `TEST()` for simple, standalone test cases.
  - Use `TEST_F()` for tests requiring shared fixtures or setup/teardown logic.

- **Group Related Tests into Suites:** Test suites should reflect logical units such as classes, modules, or functionalities.

- **Use Descriptive Test Case Names:** Naming is critical for readability and debugging. For example:
  ```cpp
  TEST(Calculator, AddsTwoNumbersCorrectly) {
    // ...
  }

  TEST_F(DatabaseTest, ConnectsSuccessfully) {
    // ...
  }
  ```

- **Parameterize Tests When Appropriate:** For repeated tests with varying inputs, consider using parameterized tests (`TEST_P()`) to avoid redundant code.

---

## 4. Structuring Tests When Using GoogleMock

When your tests involve mocks, organize your code to separate production code, test helpers, and mocks:

- **Put Mock Classes in Separate Headers and Sources:**
  - Place mock class definitions logically close to related tests.
  - Name mocks with clear `Mock` prefixes, e.g., `MockDatabase`.

- **Place Mock-Related Setup in the Same Test File When Simple:**
  For small test suites, defining mocks within a test source file works well.

- **Use Fixtures to Encapsulate Common Mock Setup:**
  This reduces boilerplate for tests sharing mock configuration.

- **Adopt Clear Naming for Mock Methods:** Use the `MOCK_METHOD` macro consistently; method names should match those of the interfaces they mock.

---

## 5. Establishing a Test Entry Point

Running tests requires a `main()` function that initializes GoogleTest and GoogleMock and executes the test runner:

- **Prefer Using `gtest_main` or `gmock_main` Libraries:**
  These provide a default `main()` implementation that calls `RUN_ALL_TESTS()` and sets up GoogleMock if needed.

- **Avoid Defining Multiple `main()` Functions:**
  Having duplicate `main()` functions can cause linker errors.

- **Customize `main()` Only When Necessary:**
  If you need to perform special setup or teardown, write your own `main()` and initialize GoogleTest/GoogleMock with `testing::InitGoogleMock(&argc, argv);`.

Example of a custom main function:

```cpp
#include "gmock/gmock.h"

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 6. Best Practices for Maintainable Test Suites

- **Keep Tests Small and Focused:** Each test should verify one behavior to simplify diagnosis.

- **Avoid Test Interdependencies:** Tests should run independently to prevent hidden failures.

- **Name Tests Clearly and Consistently:** This aids in reading logs and reports.

- **Organize Helpers and Utilities Separately:** Reuse helper functions and mock setups placed in dedicated files.

- **Leverage Build System Features:** Use CMake or your project's build tool to automatically detect and compile tests, linking against `gtest`, `gmock`, or the appropriate main libraries.

- **Document Test Structure in Project README or Docs:** Help new contributors onboard quickly by clearly explaining how tests are organized.

---

## 7. Sample Directory Structure Example

```
project_root/
├── src/
│   ├── calculator.cc
│   └── calculator.h
├── tests/
│   ├── calculator_test.cc
│   ├── mocks/
│   │   └── mock_database.h
│   └── fixtures/
│       └── calculator_fixture.h
├── CMakeLists.txt
└── README.md
```

This organization clearly separates production code from tests, with mocks and fixtures logically grouped.

---

## 8. Troubleshooting Common Test Organization Issues

<AccordionGroup title="Common Setup and Organization Issues">
<Accordion title="Linker Errors Due to Multiple main() Functions">

If you link with both `gtest_main` and `gmock_main` or define your own `main()`, you may get multiple main-defined errors.

**Solution:** Link with only one main library (`gtest_main` or `gmock_main`) or provide a single, custom `main()`.

</Accordion>
<Accordion title="Tests Not Being Discovered or Run">

Ensure your test files follow naming conventions the build system expects (e.g., suffix `_test.cc`). Also, confirm your test binaries link with GoogleTest libraries correctly.

</Accordion>
<Accordion title="Mixing Mock and Non-Mock Tests"
>
To keep test suites understandable, separate mocking concerns into distinct test files or fixtures.

Use `gmock_main` to initialize GoogleMock correctly in tests needing mocks.

</Accordion>
</AccordionGroup>

---

## 9. Additional Tips

<Tip>
Use your build system to automate test discovery and execution. For example, CMake's `add_test()` integrates GoogleTest binaries into your CI pipeline seamlessly.
</Tip>

<Tip>
Keep test files close in structure and naming to the source code they verify — this improves trackability as your codebase evolves.
</Tip>

<Tip>
Adopt parameterized tests to avoid redundancy and simplify complex testing scenarios.
</Tip>

---

## 10. Related Documentation

- [Writing Your First Test](/guides/core_testing_workflows/writing_first_test) — Learn how to define and write your initial tests.
- [Using GoogleMock](/guides/core_testing_workflows/using_googlemock) — Guidance on mock creation and expectations.
- [Integrating With Build Systems](/guides/integration_real_world_use/build_system_integration) — Set up CMake or Bazel for test builds.
- [Test Discovery and Execution](/guides/core_testing_workflows/test_discovery_execution) — Understand how tests are found and run.
- [Troubleshooting Common Issues](/getting-started/troubleshooting-validation/common-issues) — Diagnose common problems.

---

By adhering to these structuring and naming strategies, you will establish a robust and maintainable test suite that grows alongside your project and supports smooth development workflows.