---
title: "Resolving Common Errors"
description: "Explains solutions for classic errors such as missing tests, linker errors, assertion failures, or unexpected framework behaviors. Helps users identify the source of their problem and take direct steps to resolve it."
---

# Resolving Common Errors

This page guides you through practical solutions for classic errors encountered when using GoogleTest. Whether you face missing tests, linker errors, assertion failures, or unexpected framework behaviors, this documentation helps you trace the underlying cause and apply direct fixes to get your tests running smoothly.

---

## 1. Missing Tests: Why Are My Tests Not Running?

If your test executable runs but no tests seem to execute, consider these common causes and solutions:

- **Check Test Discovery**: GoogleTest automatically discovers tests defined by `TEST()`, `TEST_F()`, `TEST_P()`, and registered via `RegisterTest()`. If your tests are not linked or registered correctly, they won't run.

- **Linkage Issues**: Make sure your test source files are compiled and linked into the test binary. Static or dynamic linking quirks may cause some tests not to be included.

- **DISABLED Prefix**: Tests or test suites with names starting with `DISABLED_` are skipped by default.

- **Filter Settings**: Confirm that the `--gtest_filter` flag or the `GTEST_FILTER` environment variable isn’t excluding your tests unintentionally.

- **Sharding Configurations**: If using test sharding (`GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` environment variables), ensure shards are configured correctly and that the test IDs assigned to your tests fall within the shard you're running.

**Tips for Diagnosis:**

- Run your test executable with `--gtest_list_tests` to see which tests GoogleTest recognizes.
- Avoid underscores in test and suite names that are not intended to disable tests.
- If using parameterized tests (`TEST_P`), verify they are instantiated using `INSTANTIATE_TEST_SUITE_P`.

---

## 2. Linker Errors: Missing Symbols Related to Tests or Fixtures

Common linker errors often relate to missing definitions for test fixtures or improperly registered tests.

- **Ensure Definitions for Static Members**: If your test fixture defines static members (especially for shared resources via `SetUpTestSuite()`), ensure they are defined outside the class in a source file.

- **Verify Registration of Parameterized and Typed Tests**: Parameterized tests need to be instantiated, and typed tests need macro registration (`TYPED_TEST_SUITE`). Omitting these will cause missing symbol errors.

- **Avoid Mixing TEST and TEST_F in Same Suite**: GoogleTest requires consistency in fixture usage within a test suite. Mixing can cause compilation or linkage errors.

- **Consistent Fixture Classes Across Tests**: Tests within the same suite must use the same fixture class. Different fixture classes with identical names in separate namespaces can cause linkage confusion.


---

## 3. Assertion Failures: Diagnosing Unexpected Results

Assertion failures often indicate logic errors in your code or misuse of assertions.

- **Use the Right Macro for String Comparisons**: For comparing C strings (`const char*`), use `EXPECT_STREQ` or `ASSERT_STREQ` instead of `EXPECT_EQ`.

- **Floating-Point Comparisons**: Avoid `EXPECT_EQ` with floating-point values; use `EXPECT_FLOAT_EQ`, `EXPECT_DOUBLE_EQ`, or `EXPECT_NEAR` with a proper tolerance.

- **Predicate Assertions**: To get detailed diagnostics with complex conditions, use predicate assertions like `EXPECT_PRED*` or `EXPECT_PRED_FORMAT*` with custom messages or `AssertionResult`-returning predicates.

- **Custom Failure Messages**: Stream additional information with `<<` to assertion macros to clarify failures.

- **Check for Multiple Evaluations and Side Effects**: Assertion macro arguments are evaluated exactly once, but argument order is unspecified. Avoid side effects in arguments.

- **Propagating Fatal Failures**: Remember that `ASSERT_*` macros abort only the current function, so fatal failures in subroutines will not stop the entire test unless you check `HasFatalFailure()` or use exception-based approaches.


---

## 4. Unexpected Framework Behavior

Sometimes, GoogleTest behaviors might surprise you due to configuration or design choices.

- **Test Order and Shuffling**: By default, tests run in a deterministic order, matching source registration order. Using the `--gtest_shuffle` flag randomizes test execution order to detect inter-test dependencies.

- **Handling Disabled Tests**: The flag `--gtest_also_run_disabled_tests` includes disabled tests in runs. By default, they are excluded but counted.

- **Fail Fast Mode**: The flag `--gtest_fail_fast` stops test execution after the first failure, which may lead to fewer tests running.

- **Death Test Style**: The flag `--gtest_death_test_style` controls how death tests run (`fast` vs `threadsafe`). Choose carefully based on your multi-threading needs.

- **Exception Handling**: By default, GoogleTest catches C++ exceptions, reporting them as failures. Disable this via `--gtest_catch_exceptions=0` to let debuggers catch exceptions.


---

## 5. Practical Troubleshooting Steps

### When Tests Are Not Being Detected or Run:

<Steps>
<Step title="List Recognized Tests">
Run your executable with `--gtest_list_tests` to see all detected tests.
</Step>
<Step title="Validate Test Naming">
Ensure your tests and test suites do not have unintended `DISABLED_` prefixes.
</Step>
<Step title="Check Linkage">
Make sure all test source files are included in the build and linked correctly.
</Step>
<Step title="Verify Parameterized Tests Instantiation">
Ensure `TEST_P` tests have matching `INSTANTIATE_TEST_SUITE_P` statements.
</Step>
<Step title="Review Filter and Sharding Settings">
- Verify `--gtest_filter` values.
- Confirm shard environment variables (`GTEST_TOTAL_SHARDS`, `GTEST_SHARD_INDEX`).
</Step>
</Steps>

### When Facing Linker Errors:

<Steps>
<Step title="Define Static Members">
Ensure `static` members in test fixtures are defined in a .cc file.
</Step>
<Step title="Register Tests Properly">
For typed and parameterized tests, register and instantiate properly.
</Step>
<Step title="Check for Fixture Conflicts">
Do not mix `TEST` and `TEST_F` within the same test suite.
</Step>
</Steps>

### When Assertion Failures Occur:

<Steps>
<Step title="Check Assertion Usage">
Confirm correct assertion macros are used, especially for strings and floats.
</Step>
<Step title="Add Contextual Messages">
Use streaming messages to clarify assertion failures.
</Step>
<Step title="Use Predicate Assertions">
For complex conditions, use predicate or predicate-format assertions for clearer diagnostics.
</Step>
<Step title="Use SCOPED_TRACE for Better Diagnostics">
Add `SCOPED_TRACE` around subroutine calls to track which invocation failed.
</Step>
</Steps>

---

## 6. Example: Catching a Fatal Failure in a Subroutine

Sometimes an assertion failure in a subroutine leaves the test continuing in an invalid state. Here is a recommended pattern to catch and correctly handle a fatal failure:

```cpp
void Subroutine() {
  ASSERT_EQ(1, 2);  // This triggers a fatal failure, returning from Subroutine.
}

TEST(FooTest, Bar) {
  Subroutine();
  if (testing::Test::HasFatalFailure()) return;  // Abort test early if fatal failure occurred
  // Continue only if no fatal failure
  ...
}
```

Alternatively, users can install a listener that throws exceptions on fatal failures to abort the entire test.

---

## 7. Special Macros for Testing GoogleTest Assertions

GoogleTest provides macros to test that your code produces the expected test failures:

- `EXPECT_FATAL_FAILURE(statement, substring)` ensures the statement causes exactly one fatal failure containing the substring.
- `EXPECT_NONFATAL_FAILURE(statement, substring)` similarly expects one non-fatal failure.

Use these to verify testing utilities or custom assertions when building frameworks.

---

## 8. Helpful Tips & Best Practices

- Always call `InitGoogleTest()` before running tests to initialize framework flags.
- Use `RecordProperty()` to log custom key/value pairs for richer XML or JSON reports.
- Avoid side effects in assertion macro arguments.
- Use consistent naming without underscores to prevent disabling tests unintentionally.
- Use death test styles (`fast` or `threadsafe`) according to your environment.

---

## 9. Where to Get More Help

- Review the official [Assertions Reference](../reference/assertions.md) for detailed info on assertion macros.
- Consult the [Advanced Guide](../advanced.md) for explanations on advanced topics like predicate assertions, death tests, and assertion placement strategies.
- Explore the [Testing Reference](../reference/testing.md) sections on test registration and parameterized/typed tests.
- Engage with the community via GoogleTest’s GitHub repository and issue tracker.

---

For more detailed navigation and thematic context, see the [Getting Started](https://github.com/google/googletest) and [Core Testing API](https://github.com/google/googletest/tree/main/googletest/include/gtest) documentation.


---

_Last updated: GoogleTest main branch_



