---
title: "Getting Started with GoogleTest & GoogleMock"
description: "Answers to the most frequent questions from new users, including how to install, basic setup steps, and first test creation. This page helps users overcome first-use obstacles and accelerates their onboarding."
---

# Getting Started with GoogleTest & GoogleMock FAQ

This FAQ addresses the most frequent questions new users have about GoogleTest and GoogleMock on their first encounter. It covers installation essentials, initial setup steps, and guidance on writing and running your first test, helping you overcome initial obstacles and accelerate your onboarding journey.

---

## 1. Installation and Setup

### How do I install GoogleTest and GoogleMock?

GoogleTest and GoogleMock are bundled together and can be built using CMake or other build systems. The simplest way to install them is:

1. Clone the repository:

   ```bash
   git clone https://github.com/google/googletest.git -b v1.17.0
   cd googletest
   mkdir build
   cd build
   cmake ..
   make
   sudo make install  # optional, to install globally
   ```

2. This process builds both GoogleTest and GoogleMock. If you want only GoogleTest, disable gMock with:

   ```bash
   cmake .. -DBUILD_GMOCK=OFF
   ```

3. On Windows, build via Visual Studio solution files generated by CMake.


### What are the prerequisites for building GoogleTest?

- Your compiler must support at least C++17.
- Supported platforms include Linux, Windows, and macOS.
- GoogleTest requires threading support (pthreads or equivalent).
- You may need build tools like CMake installed.

### How do I include GoogleTest and GoogleMock in my project?

- Include headers with `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>`.
- Link against the compiled libraries `gtest`, `gmock`, or `gtest_main` and `gmock_main` for simplified main functions.
- Use CMake's `find_package(GTest CONFIG REQUIRED)` or add googletest as a subdirectory.

For detailed integration guidelines, refer to [Configuring Your Project](../getting-started/installation-configuration/project-setup).


## 2. Writing Your First Test

### How do I write a simple test using GoogleTest?

1. Use the `TEST` macro to define a test case:

   ```cpp
   TEST(TestSuiteName, TestName) {
     EXPECT_EQ(1 + 1, 2);
   }
   ```

2. Build your test binary with the proper includes and linking.
3. Run the tests using your executable which invokes `RUN_ALL_TESTS()`.

GoogleTest groups tests logically by test suites, helping you organize tests that verify related behaviors.

### How do I write tests that share common setup?

Use test fixtures by deriving a class from `testing::Test`:

```cpp
class MyTestFixture : public testing::Test {
 protected:
   void SetUp() override { /* setup code */ }
   void TearDown() override { /* cleanup code */ }
   // Shared member variables
};

TEST_F(MyTestFixture, TestName) {
  // test body
}
```

This allows multiple tests to share setup and teardown logic.

### Do I need to write my own `main()` function to run tests?

Usually not. GoogleTest provides `gtest_main` and GoogleMock provides `gmock_main`, which define `main()` functions that call `RUN_ALL_TESTS()`. Link against these libraries to avoid writing your own main.

If you need custom setup or teardown logic, you can write your own `main()`:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Always call `testing::InitGoogleTest()` before running tests.


## 3. Creating and Using Mocks with GoogleMock

### How do I create a mock class?

Define a mock class that inherits from an interface or abstract class you want to mock. Use the `MOCK_METHOD` macro to mock virtual methods.

Example:

```cpp
class Foo {
 public:
   virtual ~Foo() {}
   virtual int GetValue() const = 0;
};

class MockFoo : public Foo {
 public:
   MOCK_METHOD(int, GetValue, (), (const, override));
};
```

Place all `MOCK_METHOD`s in the `public:` section of your mock class, regardless of access level in the base class.

### What is the typical workflow for using mocks in tests?

1. Include GoogleMock headers and `using ::testing::*;` namespaces.
2. Create mock object instances.
3. Set expectations on mock methods using `EXPECT_CALL()` and optionally default behaviors with `ON_CALL()`.
4. Exercise your code which interacts with mocks.
5. GoogleMock automatically verifies expectations when mocks are destroyed.

Example:

```cpp
using ::testing::Return;

TEST(MyTest, MockExample) {
  MockFoo foo;
  EXPECT_CALL(foo, GetValue())
      .WillOnce(Return(42));

  ASSERT_EQ(foo.GetValue(), 42);
}
```

### How do I handle methods with overloaded or templated signatures?

- Mock each overload explicitly using `MOCK_METHOD`, specifying const or override qualifiers as necessary.
- For class templates, define templated mock classes similarly.

Example for overloads:

```cpp
MOCK_METHOD(int, Func, (int), (override));
MOCK_METHOD(int, Func, (double), (override));
```


### What are NiceMock, NaggyMock, and StrictMock?

They are helper wrappers controlling how uninteresting calls (calls without explicit expectations) are handled:

- **NiceMock**: Suppresses warnings on uninteresting calls (quiet).
- **NaggyMock**: Prints warnings on uninteresting calls (default behavior).
- **StrictMock**: Treats uninteresting calls as errors (fails test).

Use them as:

```cpp
NiceMock<MockFoo> nice_mock;
StrictMock<MockFoo> strict_mock;
```

Choose based on how strict you want your mock behavior to be.


## 4. Running and Validating Tests

### How do I run my tests?

Run your compiled test binary. By default, it executes all registered tests and returns 0 for success and non-zero for failure.

Example:

```bash
./my_test_binary
```

You can pass command-line flags to control filtering, output formats, and verbosity. For detailed options, see the GoogleTest Primer and Running and Validating Tests guides.

### What does the test output mean?

- **OK** or **PASSED** tests succeeded.
- Failures show the source file and line number, the failed assertion, and a description.
- GoogleMock failures indicate unmet expectations, unexpected calls, or argument mismatches.

### How do I verify that mocks were used as expected?

GoogleMock automatically verifies expectations when mock objects are destroyed. If a mock is leaked or destroyed late, verification can be forced manually via:

```cpp
Mock::VerifyAndClearExpectations(&mock_object);
```

Use this in tests where mock destruction timing is uncertain.


## 5. Common Pitfalls and Troubleshooting

### What should I do if I see "uninteresting mock function call" warnings?

- These indicate that a mock method was called without an explicit expectation.
- Use `NiceMock` to suppress such warnings if you accept the calls.
- Alternatively, add an expectation with `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` to allow all calls.
- Avoid suppressing warnings by adding expectations without intent.

### I am getting linker errors related to GoogleMock or GoogleTest. What do I check?

- Ensure you link against all required libraries (`gtest`, `gmock`, `gtest_main`, `gmock_main` as appropriate).
- Confirm consistent build configurations (Debug vs Release, Dynamic vs Static runtimes) between your project and GoogleTest.
- On Windows, consider setting `gtest_force_shared_crt` in CMake to match runtime linkage.

### How do I debug failing mock expectations?

- Run your tests with `--gmock_verbose=info` to see detailed expectations and call matching.
- Check test logs for which expectation failed and the arguments involved.
- Verify that expectations are set before exercising the mocks.

### How can I write tests for functions using move-only types?

- GoogleMock supports mocking methods with move-only arguments and return types.
- Use lambdas or custom actions in `WillOnce` and `WillRepeatedly` to create or consume move-only objects.

Example:

```cpp
EXPECT_CALL(mock, MakeBuzz(_))
    .WillRepeatedly([](StringPiece) {
      return std::make_unique<Buzz>(AccessLevel::kInternal);
    });
```

---

## 6. Best Practices for Smooth Onboarding

- **Start simple:** Write your first non-mock tests using `TEST()`, then progress to fixtures and mocks.
- **Set expectations early:** All `EXPECT_CALL` statements must be set before the mocks are used.
- **Use sequences when order matters:** Group related expectations inside `InSequence` blocks.
- **Control strictness:** Use `NiceMock` during development to reduce noise, and tighten with `StrictMock` as tests mature.
- **Consult Cheat Sheets and Guides:** Use the [gMock Cheat Sheet](gmock_cheat_sheet.md) for quick syntax reference, and the [gMock Cookbook](gmock_cook_book.md) for recipes.
- **Run tests frequently:** Validate your setup early and run tests regularly during development.

---

## Related Documentation

- [GoogleTest Primer](primer.md) - Fundamentals of writing tests
- [gMock for Dummies](gmock_for_dummies.md) - An introduction to mocks
- [gMock Cookbook](gmock_cook_book.md) - Recipes for advanced use cases
- [Mocking Reference](reference/mocking.md) - API details for mocking
- [Build and Integration Guide](getting-started/installation-configuration/project-setup.md) - How to configure your project
- [Running Tests Guide](getting-started/first-test-run-validation/run-tests.md)

---

## Additional Resources

- Official Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- GoogleMock Tutorial: [gmock_for_dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- GoogleMock API Reference: [Mocking Reference](../api-reference/mocking-framework/defining-mocks.md)


<Tip>
For beginners, focus first on writing simple tests with GoogleTest, then gradually adopt mocks with GoogleMock as your test complexity grows. Remember to set your expectations before exercising the mocks, to prevent undefined behavior and confusing errors.
</Tip>

<Warning>
Do not alter the lifetime of mocks without verifying expectations, to avoid silent test failures. Always verify that all expected calls have been made and in the right order if applicable.
</Warning>