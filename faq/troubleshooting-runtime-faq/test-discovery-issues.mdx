---
title: "Why are some of my tests not being discovered or run?"
description: "Explains common pitfalls with test registration, disabled or misnamed tests, and linker or build system quirks. Offers diagnostic steps and recommended solutions for ensuring all tests are recognized and executed."
---

# Why are some of my tests not being discovered or run?

GoogleTest automatically discovers and runs tests defined in your code. However, there are several common pitfalls that might cause some tests to be overlooked or skipped during execution. This page walks you through these scenarios, why they occur, and how to fix them to ensure all your tests are properly recognized and run.

---

## Common Reasons Tests Are Not Discovered or Run

### 1. Tests Are Disabled

GoogleTest ignores tests or test suites prefixed with `DISABLED_`. This mechanism is intended for temporarily suppressing broken or incomplete tests while keeping them compiled.

**How to spot:**
- Your test or test suite name starts with `DISABLED_`.
- The console output shows a banner indicating disabled tests.

**Solution:**
- Remove the `DISABLED_` prefix from the test or test suite.
- To run disabled tests without renaming, use the flag:

  ```sh
  --gtest_also_run_disabled_tests
  ```

  or set the environment variable:

  ```sh
  GTEST_ALSO_RUN_DISABLED_TESTS=1
  ```


### 2. Tests Are Not Properly Registered or Declared

Tests must be defined using the correct GoogleTest macros:

- `TEST` for simple tests
- `TEST_F` for tests using fixtures
- `TEST_P` for value-parameterized tests
- `TYPED_TEST` or `TYPED_TEST_P` for typed and type-parameterized tests

If tests are registered dynamically (e.g., using `RegisterTest`), registration must happen before `RUN_ALL_TESTS()` is called.

**Common errors:**
- Defining `TEST_P` without instantiating it via `INSTANTIATE_TEST_SUITE_P`.
- Mixing `TEST` and `TEST_F` inside the same test suite.

**Diagnostic cues:**
- GoogleTest will report errors during execution like:

  ```none
  Parameterized test suite FooTest is defined via TEST_P, but never instantiated.
  ```

- Warnings about mixing test fixture classes in the same test suite:

  ```none
  All tests in the same test suite must use the same test fixture class.
  ```

**Solutions:**
- Use `INSTANTIATE_TEST_SUITE_P` to instantiate parameterized tests.
- For abstract test patterns, ensure `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(MyTestSuite);` is set if uninstantiated.
- Avoid mixing `TEST` and `TEST_F` in the same suite; keep fixture usage consistent.


### 3. Test Name Does Not Match the Filtering Criteria

GoogleTest allows filtering which tests to run via the `--gtest_filter` flag or `GTEST_FILTER` environment variable. Tests not matching the filter will be skipped.

**Symptoms:**
- The test shows in listing with `--gtest_list_tests` but doesn't run.
- Console output shows fewer tests than expected.

**Solution:**
- Adjust or remove the `--gtest_filter` flag to include the test.
- Use wildcard patterns appropriately.

Example:
```sh
./my_test --gtest_filter=MySuite.*
```


### 4. Test Is Filtered Out Due to Sharding

When using test shard environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX`, only a subset of tests is run on each shard.

**Symptoms:**
- Tests exist but are skipped silently.

**Solution:**
- Verify the shard environment variables.
- Make sure sharding covers your entire test set.


### 5. Test Fixture or Suite Setup Fails Skipping Tests

If your test suite's `SetUpTestSuite()` or global environment `SetUp()` signals failure or calls `GTEST_SKIP()`, the tests will be skipped.

**Symptoms:**
- Console shows tests as `[  SKIPPED ]`.
- Setup failure messages in output.

**Solution:**
- Ensure setup code succeeds or handles skips appropriately.
- For unconditional skipping in certain conditions, `GTEST_SKIP()` can be used.


### 6. Linker or Build System Issues Resulting in Missing Test Objects

If your test object files or libraries are not properly linked into the test binary, those tests won't be discovered or run.

**Symptoms:**
- Build or linking warnings.
- GoogleTest reports no tests linked.

**Solutions:**
- Check build system dependencies and inclusion of test source files.
- Use `--gtest_fail_if_no_test_linked` to enforce failure if no tests are discovered.


---

## Diagnostic Steps

Follow this workflow to identify why some tests are not discovered or run:

1. **List tests in the binary:**

   Run

   ```sh
   ./my_test --gtest_list_tests
   ```

   to see if your tests are listed. If not, they might not be compiled or registered.

2. **Check for disabled tests:**

   See if the test or suite name includes the `DISABLED_` prefix.

3. **Verify filters:**

   Make sure `--gtest_filter` or `GTEST_FILTER` includes your tests.

4. **Review parameterized test instantiations:**

   Ensure parameterized tests have corresponding `INSTANTIATE_TEST_SUITE_P`.

5. **Inspect build and linker status:**

   Confirm all test files are linked.

6. **Check setup failures:**

   Look at console logs for skipped tests or setup failures triggering skips.


---

## Recommended Best Practices

- **Use consistent test fixture usage:** Avoid mixing `TEST`, `TEST_F` and `TEST_P` in the same suite.
- **Name tests following conventions:** Use alphabetic names without underscores for `TestSuiteName` and `TestName`.
- **Instantiate parameterized tests properly:** Use `INSTANTIATE_TEST_SUITE_P` and provide meaningful parameter names.
- **Limit use of `DISABLED_` prefix:** Only use it temporarily, resolve issues promptly.
- **Employ flags to control test runs:** Use `--gtest_also_run_disabled_tests` or filtering flags wisely.
- **Validate your build system:** Make sure all test files are compiled and linked correctly.
- **Regularly run `--gtest_list_tests` for verification:** To make sure all expected tests are discovered.


---

## Example Scenario: Fixing Undiscovered Parameterized Tests

Imagine you have a parameterized test defined as follows:

```cpp
class MyParamTest : public ::testing::TestWithParam<int> {
  // ...
};

TEST_P(MyParamTest, DoesSomething) {
  EXPECT_GT(GetParam(), 0);
}
```

If you forget to instantiate it with `INSTANTIATE_TEST_SUITE_P`, none of these tests will run.

To fix this, add an instantiation:

```cpp
INSTANTIATE_TEST_SUITE_P(
    PositiveNumbers, MyParamTest, ::testing::Values(1, 2, 3));
```

If you want to suppress the error for uninstantiated tests (e.g., when tests are defined but instantiated elsewhere), add:

```cpp
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(MyParamTest);
```


---

## Troubleshooting Common Test Discovery Errors

### Error: "Parameterized test suite X is defined via TEST_P, but never instantiated."

- You forgot `INSTANTIATE_TEST_SUITE_P` for that test suite.
- Solution: Instantiate the test suite or mark it as allowed uninstantiated.

### Error: "All tests in the same test suite must use the same test fixture class."

- You mixed `TEST` and `TEST_F` or used different fixtures in the same suite.
- Solution: Use a consistent fixture or separate tests into different suites.

### Tests Do Not Run Despite Being Declared

- Your test executable may not link in the test object files.
- Solution: Check your build and linking commands, ensure all source files are included.

### Tests Skipped Due to Setup Failures

- `SetUpTestSuite()`, `SetUp()`, or global environment `SetUp()` called `GTEST_SKIP()` or caused failure.
- Solution: Check setup functions for skipping logic and errors.


---

## Summary

Test discovery and execution issues often stem from disabled tests, missing instantiations of parameterized tests, filter mismatches, or build/linker misconfigurations. GoogleTest provides informative error messages and flags to help diagnose and resolve these issues efficiently. Following consistent naming, registration, and fixture usage conventions ensures smooth test detection and execution.


---

## Related Documentation

- [Testing Reference - Parameterized & Typed Tests](../reference/testing.md#TEST_P)
- [Advanced GoogleTest Topics - Value-Parameterized Tests](../docs/advanced.md#value-parameterized-tests)
- [Writing Your First Test](../getting-started/first-test-usage/write-first-test.md)
- [Troubleshooting & Common Pitfalls](../getting-started/first-test-usage/troubleshooting-setup.md)
- [Test Discovery and Execution Lifecycle](../concepts/core-architecture/test-lifecycle.md)
- [Using Death Tests Effectively](../guides/mocking-and-advanced-usage/using-death-tests.md)


---

For deeper insights, explore the [Parameterized and Typed Tests Guide](../guides/mocking-and-advanced-usage/parameterized-and-type-parameterized-tests.md) and the [Testing Reference](../reference/testing.md).

---

_Tip: If tests disappear unexpectedly, first verify your filters and instantiations before digging into build system or source-level issues._