---
title: "Why won't GoogleTest build on my system?"
description: "Troubleshoots typical build and integration errors. Covers issues such as incompatible compilers, missing dependencies, and frequent misconfigurations on all major platforms."
---

# Why Won't GoogleTest Build on My System?

GoogleTest ensures reliable and portable test execution across platforms, but building it successfully requires attention to system compatibility, dependencies, compilers, and configurations. This FAQ addresses common build and integration issues on all major platforms, including Linux, Windows, and macOS.

---

## 1. Common Build and Integration Issues

### 1.1 Compiler Incompatibility

- **Problem**: Your compiler version or settings do not meet GoogleTest's minimum requirements (C++17 standard) or specific compiler quirks.
- **Solution**: 
  - Verify your compiler supports C++17 or later.
  - Use compilers fully supported by GoogleTest (e.g., GCC 7+, Clang 5+, MSVC 2017+).
  - Check for known incompatibilities and update your compiler accordingly.

### 1.2 Missing or Incompatible Dependencies

- **Problem**: Required libraries or headers needed to build GoogleTest are missing or incompatible.
- **Solution:**
  - Ensure your platform has basic standard C++ libraries compatible with c++17.
  - GoogleTest has minimal external dependencies but compiling with GoogleMock or integrating with Bazel or CMake may require additional tools.
  - Check that your build environment includes essential development tools (build tools, C++ standard library headers).

### 1.3 Misconfigured Build Systems (CMake, Bazel, etc.)

- **Problem**: Incorrect or missing configuration in the build files leads to failed builds or linking errors.
- **Solution:**
  - Follow GoogleTest supported build instructions carefully.
  - Use the official `CMakeLists.txt` provided by GoogleTest when using CMake.
  - Run `cmake` from a clean build directory.
  - Link your test targets properly to GoogleTest and GoogleMock libraries.
  - Avoid mixing static and dynamic linking improperly.

### 1.4 Platform-Specific Challenges

- **Linux/macOS:**
  - Check you have the latest development tools installed (e.g., Xcode Command Line Tools, build-essential).
  - Make sure you don’t mix incompatible runtime libraries.

- **Windows:**
  - For Visual Studio, ensure you use the same runtime (e.g., MT vs MD) consistently across your projects and GoogleTest.
  - Watch out for mismatches between debug and release builds.

### 1.5 Threading and Runtime Options

- GoogleTest relies on threading libraries (pthreads on Unix-like OSes).
- Verify that POSIX threads or Windows threading support is correctly configured.

---

## 2. Best Practices for Successful Build

- Use GoogleTest’s recommended minimal C++17 toolchain.
- Follow installation instructions for your platform carefully, especially regarding dependencies and build system integration.
- When calling `InitGoogleTest()`, ensure your project links against the correct GoogleTest libraries (`gtest` or `gtest_main`).
- Prefer using `gtest_main` library to avoid writing your own main unless you have specific reasons.
- Keep your test suites independent by avoiding mixing legacy `TestCase` and modern `TestSuite` APIs.

---

## 3. Practical Example: Building With CMake

1. **Clone the repository:**

    ```bash
    git clone https://github.com/google/googletest.git
    cd googletest
    mkdir build && cd build
    ```

2. **Configure your build with CMake:**

    ```bash
    cmake ..
    ```

3. **Build the libraries:**

    ```bash
    cmake --build .
    ```

4. **Link your test executable:**

    Make sure to link with `gtest` and possibly `gtest_main`. Example CMake target:

    ```cmake
    add_executable(my_tests test_file.cc)
    target_link_libraries(my_tests gtest gtest_main pthread)
    ```

  Replace `pthread` with `Threads::Threads` or appropriate threading libs on your platform.

<Tip>
Always start with a fresh build directory to avoid stale cache or configuration issues.
</Tip>

---

## 4. Troubleshooting Common Errors

### 4.1 Error: ‘nullptr’ was not declared in this scope

- You are likely not compiling with C++11 or newer.
- **Fix:** Enable C++17 standard in your compile flags, for example: `-std=c++17`.

### 4.2 Linking errors involving pthread or threading symbols

- You may need to explicitly link pthread library (on Unix systems).
- In CMake, use:

    ```cmake
    find_package(Threads REQUIRED)
    target_link_libraries(your_target Threads::Threads)
    ```

### 4.3 ‘RunAllTests’ returns 1, but no clear errors shown

- Check that GoogleTest tests are actually being registered and run.
- Misconfiguration can prevent test registration, causing no tests to run, resulting in failure.
- Verify the usage of `TEST()`, `TEST_F()`, and proper linking.

### 4.4 Visual Studio Runtime DLL conflicts

- GoogleTest and your tests must use the same CRT linkage (e.g. `/MD` vs `/MT`).
- Compile GoogleTest and your test code with matching runtime library settings.

---

## 5. Additional Tips & Resources

- Consult the [GoogleTest Primer](https://google.github.io/googletest/primer.html) for setup and usage.
- Follow the [Getting Started Guide](https://google.github.io/googletest/quickstart-cmake.html) for detailed CMake instructions.
- Use provided tests (in the `googletest/test` folder) as examples of how to structure and build tests.
- For platform-specific build quirks, refer to [Supported Platforms and Integration](https://google.github.io/googletest/overview/architecture-concepts/integration-and-platforms.html).
- Check [Troubleshooting & Common Pitfalls](https://google.github.io/googletest/getting-started/first-test-usage/troubleshooting-setup.html) for detailed problem-solving.

---

## 6. Where to Go Next

- Explore the [Primer](https://google.github.io/googletest/primer.html) to learn how to write tests once your build issues are resolved.
- Review the [Advanced Topics](https://google.github.io/googletest/advanced.html) for more sophisticated test features.
- Dive into [Mocking with GoogleMock](https://google.github.io/googletest/gmock_for_dummies.html) to extend your testing capabilities.
- Stay updated on latest GoogleTest releases at the [GitHub repository](https://github.com/google/googletest).


---

## References

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [Building and Running Your First Test](https://google.github.io/googletest/getting-started/first-test-usage/build-and-run-first-test.html)
- [Troubleshooting & Common Pitfalls](https://google.github.io/googletest/getting-started/first-test-usage/troubleshooting-setup.html)
- [Supported Platforms & Integration](https://google.github.io/googletest/overview/architecture-concepts/integration-and-platforms.html)
- [GoogleTest GitHub Repository](https://github.com/google/googletest)

---