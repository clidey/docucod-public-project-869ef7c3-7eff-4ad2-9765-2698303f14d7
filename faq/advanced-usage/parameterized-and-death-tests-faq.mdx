---
title: "Parameterized & Death Tests: FAQ"
description: "Common problems and solutions when writing value-parameterized or type-parameterized tests and using death tests, including typical failure modes and debugging strategies."
---

# Parameterized & Death Tests: FAQ

This page addresses common problems and solutions specifically related to writing value-parameterized or type-parameterized tests and using death tests in GoogleTest. It highlights typical failure points and provides debugging strategies to help you write robust parameterized and death tests effectively.

---

## Frequently Asked Questions

### 1. Why do some parameterized tests not instantiate or run any tests?

Often, this happens because no parameters are provided or the parameter generator produces an empty sequence. GoogleTest requires at least one parameter value for each instantiation to generate tests.

**Solution:**
- Ensure your parameter generator (e.g., `Values()`, `Range()`, `Combine()`) is not empty.
- Use `INSTANTIATE_TEST_SUITE_P` with a valid non-empty generator.
- If a test suite is intentionally not instantiated, suppress failure by using `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.

### 2. How do I write parameterized tests with custom parameter types?

1. Derive your fixture class from `::testing::TestWithParam<YourParamType>`.
2. Use `TEST_P` macro to define tests.
3. Instantiate the test suite with `INSTANTIATE_TEST_SUITE_P` supplying a parameter generator.

If your parameter type is not directly constructible from generated types, use `ConvertGenerator<T>()` with a conversion function for custom conversions.

### 3. What are parameter generators and how do I choose one?

GoogleTest offers several built-in parameter generators:

| Generator              | Description                                                   |
|------------------------|---------------------------------------------------------------|
| `Range(begin, end[, step])` | Generates a sequence from `begin` (inclusive) to `end` (exclusive) with optional step.
| `Values(v1, v2, ..., vN)`   | Generates a sequence of specified explicit values.
| `ValuesIn(container)`        | Uses values from a container or iterator range.
| `Bool()`                    | Generates `{false, true}`.
| `Combine(g1, g2, ..., gN)`   | Cartesian product of multiple generators combined into tuples.

Choose the generator that best fits your testing scenario, e.g., `Combine()` for testing multiple parameter combinations.

### 4. How can I customize parameterized test names?

By default, GoogleTest names each instantiation by appending an index suffix (e.g., `/0`, `/1`). You can specify a custom name generator function or functor in the last argument to `INSTANTIATE_TEST_SUITE_P` that takes a `TestParamInfo<ParamType>` and returns a unique string consisting only of alphanumeric characters and underscores.

Example:

```cpp
INSTANTIATE_TEST_SUITE_P(
    MyInstantiation, MyTestSuite,
    testing::Values(1, 2, 3),
    [](const testing::TestParamInfo<MyTestSuite::ParamType>& info) {
      return "Param" + std::to_string(info.index);
    });
```

**Note:** Avoid spaces, dashes, or special characters in generated names to prevent instantiation errors.

### 5. What does the error about duplicate parameterized test names mean?

GoogleTest requires each parameterized test instance name to be unique within the same test suite and instantiation. Providing parameter names that are the same or invalid will cause test registration to fail.

**How to fix:**
- Ensure your name generator provides unique names.
- Avoid repeating parameter values or suffixes that could produce the same test name.
- Use indices or unique traits of parameters to distinguish names.

### 6. Can I instantiate a parameterized test suite multiple times?

Yes. You can call `INSTANTIATE_TEST_SUITE_P` more than once with different instantiation names and parameter generators. Each call adds a new set of parameterized test instances.

Example:

```cpp
INSTANTIATE_TEST_SUITE_P(Sequence1, MyTestSuite, Values(1, 2));
INSTANTIATE_TEST_SUITE_P(Sequence2, MyTestSuite, Range(3, 5));
```

The test output names will have the instantiation name as a prefix, e.g., `Sequence1/MyTestSuite.TestName/0`.

### 7. What should I do if my parameterized test fixture cannot be default constructed?

The fixture class used with `TEST_P` must have a default constructor. GoogleTest creates a new fixture per parameter with `new Fixture()`. If your fixture requires custom construction:

- Use conversion in `INSTANTIATE_TEST_SUITE_P` to adapt the parameter to your fixture needs.
- Alternatively, design the fixture to hold a parameter accessible via `GetParam()` which your tests can use directly.

### 8. How do death tests (`ASSERT_DEATH`, `EXPECT_DEATH`) work with parameters?

You can write death tests with `TEST_P` and instantiate them with parameter generators. Each instantiation is run as a separate test case that expects the tested code to crash or terminate.

**Tips:**
- Name your death test suite with the suffix `DeathTest` to follow convention.
- Use the `--gtest_death_test_style` flag to configure the death test execution mode (`fast` or `threadsafe`) depending on your environment.
- Avoid side effects in death tests that can interfere with other tests.

Example:

```cpp
class ParamDeathTest : public ::testing::TestWithParam<int> {};

TEST_P(ParamDeathTest, DiesWhenZero) {
  int param = GetParam();
  EXPECT_DEATH_IF_SUPPORTED(
      { if (param == 0) abort(); },
      "abort");
}

INSTANTIATE_TEST_SUITE_P(RangeZeroToFive, ParamDeathTest, Range(0, 5));
```

### 9. What common pitfalls cause parameterized death tests to fail?

- Death test style incompatible with your environment.
- Test code running before `InitGoogleTest()` causing parameter generators to evaluate incorrectly.
- Naming conventions not followed resulting in detection or execution errors.
- Overlapping or shared static/global state that leads to flakiness.

**Troubleshooting:**
- Use `--gtest_death_test_style=threadsafe` if you experience concurrency issues.
- Confirm your parameter generators produce expected values at `InitGoogleTest()` time.
- Isolate death tests to avoid interference.

### 10. What does `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` do?

By default, if you define value-parameterized tests with `TEST_P` but do not instantiate them with `INSTANTIATE_TEST_SUITE_P`, GoogleTest reports a failure in a special verification test suite.

Using `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(MyTestSuite)` suppresses this verification failure for test suites that are intended not to be instantiated.

---

## Common Issues & Gotchas

### Invalid Parameterized Test Names

- Test parameter names for instantiated tests must only contain alphanumeric characters and underscores.
- Parameter names containing spaces, dashes, or other special characters cause registration failure.
- Using the provided `PrintToStringParamName` generator does not work correctly for string parameters since it includes quotes.

**Fixes:** Use custom name generators that sanitize or replace invalid characters.

### Duplicate Parameter Names in Instantiations

- Multiple parameters producing the same test name suffix will cause duplicate test instantiation errors.
- Make sure your name generator produces unique names across all parameters in the same instantiation.

### Test Parameters Evaluated Too Early or Late

- Parameter generators are evaluated during `InitGoogleTest()`, not at the call site of `INSTANTIATE_TEST_SUITE_P` or `RUN_ALL_TESTS()`.
- Side effects or dynamically changing parameter values must be designed with this in mind.

### Empty Parameter Sequences

- Empty parameter generators result in no parameterized tests and a fallback synthetic test case.
- Confirm your generators produce the expected number of parameters.

### Death Tests Interference

- Death tests spawn separate processes; non-isolated side effects can cause unexpected test outcomes.
- Use death test styles appropriate for your platform.

---

## Troubleshooting Procedures

### Verifying Parameter Generators

- Use unit tests to validate that your parameter generators produce expected sequences.
- Example: Use iteration over generator and compare against expected values.

### Debugging Name Generation

- Insert logging inside custom name generators to verify output.
- Check that no forbidden characters are produced.

### Handling Death Test Failures

- Check `--gtest_death_test_style` flag and try `fast` vs `threadsafe` modes.
- Ensure tested code correctly terminates or crashes as expected.
- Avoid test program-global state that can cause indeterminate behavior.

### Handling Instantiation Failures

- Confirm that each `TEST_P` has a corresponding `INSTANTIATE_TEST_SUITE_P` with valid parameters.
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if needed.

---

## Practical Tips & Best Practices

- Define parameterized test fixtures deriving from `::testing::TestWithParam<T>`.
- Always instantiate parameterized tests with non-empty generators.
- Use `Combine()` to test multiple parameter combinations systematically.
- Use `ConvertGenerator()` to adjust parameter types or perform explicit conversions.
- Keep custom name generator functions stateless or carefully manage state to avoid inconsistent names.
- For tests involving strings or complex types, implement `PrintTo()` overloads or provide appropriate parameter name generators.
- Follow naming conventions for death tests (`*DeathTest`) to avoid configuration issues.
- Use `SCOPED_TRACE` within parameterized tests to provide context on failures relative to parameter values.
- Regularly check with `--gtest_list_tests` output to verify parameterized test instantiations.

---

## Additional Resources

- [Testing Reference: Parameterized Tests](../../docs/reference/testing.md#TEST_P)
- [Guides: Parameterized and Typed Tests](../../guides/advanced-testing-patterns/parameterized-and-typed-tests.md)
- [API Reference: Parameterized Test API](../../api-reference/gtest-api/parameterized-and-typed-tests.md)
- [Death Tests Guide](../../guides/scenarios-and-best-practices/death-tests-outcomes.md)
- [Assertions Reference](../../api-reference/gtest-api/assertions-and-failures.md)

---

### Example: Simple Parameterized Test
```cpp
class MyTest : public ::testing::TestWithParam<int> {};

TEST_P(MyTest, IsEven) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyTest, ::testing::Values(2, 4, 6));
```

### Example: Custom Parameter Name Generator
```cpp
std::string ParamName(const testing::TestParamInfo<int>& info) {
  return "Val" + std::to_string(info.param);
}

INSTANTIATE_TEST_SUITE_P(
    NamedTests, MyTest, ::testing::Values(10, 20, 30), ParamName);
```

### Example: Parameterized Death Test
```cpp
class DeathParamTest : public ::testing::TestWithParam<int> {};
TEST_P(DeathParamTest, DiesOnZero) {
  int p = GetParam();
  EXPECT_DEATH_IF_SUPPORTED({ if (p == 0) abort(); }, ".*");
}
INSTANTIATE_TEST_SUITE_P(Params, DeathParamTest, ::testing::Values(0, 1));
```

---