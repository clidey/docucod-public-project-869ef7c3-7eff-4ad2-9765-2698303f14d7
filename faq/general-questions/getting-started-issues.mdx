---
title: "Getting Started and Installation Issues"
description: "Guidance on resolving typical setup and installation challenges, including choosing appropriate build systems (CMake, Bazel), compiler requirements, and linking dependencies. Offers clear steps to verify and troubleshoot initial configuration problems."
---

# Getting Started and Installation Issues

This guide provides clear and practical solutions for common setup and installation challenges when integrating GoogleTest and GoogleMock in your C++ projects. It covers choosing the appropriate build systems, setting up compiler environments, and linking dependencies to ensure a smooth start.

---

## Common Setup and Installation Challenges

When starting with GoogleTest and GoogleMock, users often face issues related to:

- Verifying system compiler compatibility with the C++17 requirement.
- Selecting and configuring a build system such as CMake or Bazel correctly.
- Handling linking errors arising from missing or incompatible GoogleTest/GoogleMock libraries.
- Managing platform-specific dependencies and threading support.

This section addresses these core areas to help you overcome initial setup hurdles.

### Verifying System Compatibility

Before installation, ensure your build environment meets these requirements:

- **C++17 Compiler**: GoogleTest requires a compiler supporting at least C++17. Popular compilers like GCC, Clang, and MSVC recent versions meet this.
- **Supported Operating Systems**: Linux, Windows, and macOS platforms are supported with platform abstraction handled internally.
- **Threading Support**: Systems with pthread support provide thread safety for tests.

Run your compiler with appropriate flags to check C++17 support. For example:

```bash
# GCC or Clang
$ g++ --version
$ g++ -std=c++17 -c test.cpp

# MSVC
> cl /std:c++17 test.cpp
```

### Selecting and Configuring the Build System

GoogleTest and GoogleMock can be built and integrated using several options:

#### Using CMake

CMake is the recommended and most flexible build system:

1. Clone GoogleTest repository:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
dcd googletest
mkdir build
cd build
```

2. Configure and generate build files:

```bash
cmake .. # By default, builds GoogleTest and GoogleMock
```

To build only GoogleTest (excluding GoogleMock), use:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

3. Build and install:

```bash
make
sudo make install
```

Integration into existing projects can be done by using `find_package(GTest)` or by adding GoogleTest sources via `add_subdirectory()`.

üìù **Tip:** Set your C++ standard explicitly in your project‚Äôs top-level `CMakeLists.txt` with:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

#### Using Bazel

GoogleTest supports Bazel build system through dedicated rules:

- Configure your WORKSPACE to include GoogleTest as a dependency.
- Use `cc_test` Bazel rules to define test targets.

Refer to the [Installing with Bazel](https://github.com/google/googletest/tree/main/docs/getting-started/prerequisites-installation/installation-bazel.md) guide for step-by-step instructions.

### Resolving Linking and Dependency Issues

Linking errors generally stem from missing or incorrectly linked GoogleTest or GoogleMock libraries. To prevent these:

- Link your test executables with the appropriate libraries (`gtest`, `gtest_main`, `gmock`, `gmock_main`).
- When using CMake, link with targets such as `GTest::gtest`, `GTest::gtest_main`, `GMock::gmock`, and `GMock::gmock_main`.

Example:

```cmake
add_executable(my_tests test_main.cpp ...)
target_link_libraries(my_tests GTest::gtest_main GMock::gmock_main pthread)
add_test(NAME my_tests COMMAND my_tests)
```

- Ensure the correct runtime linkage, especially on Windows, by aligning your project‚Äôs runtime settings with GoogleTest‚Äôs.

üëâ **Visual Studio Note:** For Visual Studio, use `-DGTEST_FORCE_SHARED_CRT=ON` during configuration to avoid runtime mismatches.

### Platform-Specific Considerations

GoogleTest handles platform abstractions automatically but you should be aware of:

- **Thread support** varies ‚Äî verify pthread availability or relevant platform macros.
- **Compiler flags** affecting exceptions, RTTI, or macro conflicts may require adjustment.
- Use platform detection macros or consult the [Platform Portability & Compatibility](https://github.com/google/googletest/blob/main/docs/concepts/integration-and-portability/platform-portability.md) documentation if encountering OS or architecture issues.

---

## Troubleshooting Common Issues

### Issue: Tests Won't Compile Due to Missing Headers or Libraries

**Cause:** Build system has not been configured correctly, or GoogleTest is not properly referenced.

**Solution:**

- Confirm the include directories and library path are correctly set.
- For CMake, add GoogleTest using `find_package(GTest REQUIRED)` or `add_subdirectory()`.
- Verify `-I` and `-L` flags in manual build systems.

### Issue: Linking Errors for GoogleTest Symbols

**Cause:** GoogleTest libraries not linked or linked incorrectly.

**Solution:**

- Link against `gtest` and `gtest_main` for basic GoogleTest support.
- For mocks, link `gmock` and `gmock_main` as well.
- Check linkage order if using manual linker commands.

### Issue: Runtime Errors with Unexpected Calls to Mock Methods

**Cause:** Mock methods called without expectations or default actions set.

**Solution:**

- Add `ON_CALL()` to define default mock behavior or use `NiceMock` to suppress warnings.
- Add explicit `EXPECT_CALL()` for expected calls.
- Refer to the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for handling uninteresting calls and mock valification.

### Issue: Slow Compilation of Mock Classes

**Cause:** Mock methods generate complex constructor/destructor code inline.

**Solution:**

- Move mock class constructors/destructors to implementation (`.cc`) files instead of header files to speed up compilation.

### Issue: Running Tests in Custom Environments

- Use `testing::InitGoogleTest(&argc, argv);` or `testing::InitGoogleMock(&argc, argv);` at test program entry points.
- For embedded or limited platforms, special entry points like `setup()` and `loop()` may apply (see `gmock_main.cc`).

---

## Step-by-Step Guide to Validate Setup

<Steps>
<Step title="Check Compiler Support">
Verify your compiler supports C++17 by running an empty compile with the C++17 flag.
</Step>
<Step title="Build GoogleTest with CMake">
Clone the repository, configure with CMake, and build. Ensure no errors are reported.
</Step>
<Step title="Link Your Tests Properly">
Link test binaries with `gtest_main` or `gmock_main` and ensure all dependent libraries (e.g., pthread) are included.
</Step>
<Step title="Run Sample Tests">
Run provided GoogleTest sample tests to confirm correct installation and linkage.
</Step>
<Step title="Use Verbose Flags for Debugging">
If issues arise, run tests with `--gmock_verbose=info` to get detailed call traces.
</Step>
</Steps>

---

## Best Practices and Tips

- Always prefer CMake integration for easier dependency management.
- Avoid mixing static and dynamic runtimes on Windows to prevent linker errors.
- Use `NiceMock` to suppress warnings from uninteresting calls during early test development.
- Carefully separate `ON_CALL` (default behavior) and `EXPECT_CALL` (call expectations) to keep tests maintainable.
- Regularly consult the [System Requirements & Prerequisites](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/system-requirements.md) for environment validation.

---

## Related Documentation

- [Installing with CMake](../getting-started/prerequisites-installation/installation-cmake.md) for detailed build instructions.
- [Installing with Bazel](../getting-started/prerequisites-installation/installation-bazel.md) for Bazel users.
- [Common Setup Issues](../getting-started/first-test-validation/common-issues.md) for troubleshooting
- [Mocking Overview](../docs/gmock_cook_book.md) for mock setup and advanced tips.

---

For further reading and mastery, explore guides and API references linked below.
