---
title: "Why are my tests not being discovered or run?"
description: "Explains common reasons why tests might not appear or execute, including issues with test macro usage, test naming conventions, and linker settings. Guides users through verifying and correcting test registration problems."
---

# Why are my tests not being discovered or run?

When GoogleTest tests fail to appear or execute as expected, it can be due to several common causes related to test registration, macro usage, naming conventions, or build settings. This FAQ page guides you to verify and correct issues that prevent tests from being discovered and run.

---

## Common Causes of Tests Not Appearing or Executing

### 1. Incorrect Use of Test Macros

GoogleTest defines various macros to declare tests and fixtures. Each has particular requirements:

- `TEST(TestSuiteName, TestName)`: Defines a test without needing a fixture class.
- `TEST_F(TestFixtureName, TestName)`: Defines a test using a test fixture class.
- `TEST_P(TestFixtureName, TestName)`: Defines a value-parameterized test.

**Pitfalls:**
- Using `TEST_F` requires the fixture class to be defined and to have a default constructor.
- Misuse or mixing of macros within the same test suite can lead to tests not registering properly.

Make sure you have correctly used the macros appropriate to your test design.

### 2. Naming Conventions and Underscores

GoogleTest forbids underscores (`_`) in `TestSuiteName` and `TestName` because underscores are reserved for internal purposes, like indicating disabled tests (`DISABLED_`).

Avoid underscores in suite or test names to prevent conflicts that may cause tests to not register or run properly.

Example of correct naming:

```cpp
TEST(FooTest, DoesSomething) { ... }
```

### 3. Mixing Test Fixtures and Test Macros Improperly

All tests within the same test suite must use the same test fixture class:

- Avoid mixing `TEST()` and `TEST_F()` macros within the same test suite.
- If you mix them, GoogleTest will emit errors, and some tests may fail to run.

Example:

```cpp
TEST_F(MyFixture, Test1) { ... }
TEST(MyFixture, Test2) { ... }  // Illegal mixing!
```

Best practice is to either use fixtures consistently or separate test suites.

### 4. Missing Default Constructors for Fixture Classes

GoogleTest needs fixtures with accessible default constructors to instantiate test objects. If your test fixture has only non-default constructors, tests using `TEST_F` will fail compilation or registration.

Solution:
- Provide a default or explicit constructor without parameters.

### 5. Test Filtering and Disabled Tests

GoogleTest allows running a subset of tests via the `--gtest_filter` flag. If your filter excludes all tests, none will appear or run.

Also, tests prefixed with `DISABLED_` are skipped by default.

Verify:
- Your filter matches intended tests.
- Disabled tests prefix is not inadvertently hiding tests.

Example:

```bash
./my_tests --gtest_filter=MyTestSuite.*
```

### 6. Programmatic Test Registration Issues

If tests are registered dynamically using `::testing::RegisterTest()`, ensure:
- Registration happens before `RUN_ALL_TESTS()` is called.
- All tests in a test suite use the same fixture class.
- The factory callable correctly creates test instances.

Failing to do so can result in tests never running.

### 7. Linker or Build Issues

Sometimes tests may not appear if:
- The test files are not linked into the executable.
- Static data or test registrars are discarded by the linker.
- Compiler or build settings omit necessary object files.

Verify:
- All test source files are included in build.
- Linker settings preserve test registration.
- No symbol stripping removes test metadata.

### 8. Parameterized and Typed Tests Not Instantiated

For value-parameterized (`TEST_P`) and type-parameterized (`TYPED_TEST`) tests:

- Use `INSTANTIATE_TEST_SUITE_P()` to instantiate value-parameterized tests.
- Use `REGISTER_TYPED_TEST_SUITE_P()` and `INSTANTIATE_TYPED_TEST_SUITE_P()` for typed tests.

If tests are defined but not instantiated, GoogleTest will not run any test cases within them.

GoogleTest emits warnings or errors recommending users to call `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST()` if intentional.

### 9. Death Test Related Naming

When using death tests (`EXPECT_DEATH`, `ASSERT_DEATH`), name the test suite with suffix `DeathTest` to ensure proper ordering and execution.

Example:

```cpp
TEST(FooDeathTest, DiesOnInvalidInput) { ... }
```

Failure to do so can lead to death tests being run out of order or improperly.

---

## Steps to Verify and Correct Test Registration Problems

### Step 1: Check Test Macro Usage
- Confirm you have used the correct GoogleTest macros corresponding to your test type.

### Step 2: Validate Test and Suite Naming
- Avoid underscores (`_`) in test suite and test names.
- Do not start or end names with underscores.

### Step 3: Confirm Fixture Classes
- Provide default constructors for all fixture classes used in `TEST_F`.
- Avoid mixing test macros within a suite.

### Step 4: Verify Test Instantiation for Parameterized Tests
- For `TEST_P`, call `INSTANTIATE_TEST_SUITE_P` with parameters.
- For typed tests, register and instantiate as required.

### Step 5: Examine Test Filters
- Run the test binary with `--gtest_list_tests` to see which tests are discovered.
- Remove or adjust `--gtest_filter` flags to include more tests.
- Use the `--gtest_also_run_disabled_tests` flag to include disabled tests.

### Step 6: Review Build and Link Settings
- Confirm all test source files are compiled and linked.
- Check for linker optimization settings that may exclude test code.

### Step 7: Use Programmatic Registration Carefully
- When using `RegisterTest()`, ensure proper fixture and naming.
- Confirm registration code runs before tests execute.

### Step 8: Observe Death Test Naming Conventions
- Add `DeathTest` suffix to test suite names containing death tests.

---

## Practical Tips and Best Practices

- Explicitly call `::testing::InitGoogleTest(&argc, argv);` in `main()` before `RUN_ALL_TESTS();`.
- Prefer using `nullptr` instead of `NULL` in assertions to avoid type confusion.
- To disable problematic tests temporarily, prefix test or test suite names with `DISABLED_`.
- Use `SCOPED_TRACE` to add context if your test registration depends on runtime data.
- Always check your test output or list of tests via the `--gtest_list_tests` flag as a quick way to verify registration.

---

## Troubleshooting Example

If your test named `MyTest` inside suite `MySuite` does not run:

```bash
./my_test_binary --gtest_list_tests
```

- Is `MySuite.MyTest` listed?
  - If not, check macro usage and naming.
- Does the filter `--gtest_filter` include this test?
- If using parameterized tests, make sure `INSTANTIATE_TEST_SUITE_P` was called.
- Check for link errors or missing object files.

---

## References and Additional Resources

- [GoogleTest Primer](primer.md) for getting started
- [Test Macros and Lifecycles](reference/testing.md#test-macros-and-lifecycle)
- [Advanced GoogleTest Topics](docs/advanced.md) for deep dives including parameterized and typed tests
- [FAQ - Why should test suite names and test names not contain underscore?](docs/faq.md#Why-should-test-suite-names-and-test-names-not-contain-underscore)
- Troubleshooting: [Common Installation Issues](getting-started/troubleshooting-support/common-issues-and-fixes)
- Debugging test registration: use `--gtest_list_tests` to verify

---

If after following these steps your tests still do not register or run, consider reaching out for community support or opening an issue with a minimal reproducible example.

---

*This page focuses exclusively on common reasons for tests not being discovered or executed in GoogleTest and how to resolve such registration and execution problems.*