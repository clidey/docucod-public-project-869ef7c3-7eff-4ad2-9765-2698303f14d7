---
title: "What is GoogleTest & GoogleMock and how do I use them?"
description: "Introduction to GoogleTest and GoogleMock, outlining their main purpose as C++ test frameworks, high-level benefits, how they integrate, and a summary of the user journey from installation to basic test execution. Orients new users and sets context for further exploration."
---

# What is GoogleTest & GoogleMock and how do I use them?

GoogleTest and GoogleMock are complementary C++ testing frameworks designed to help you write robust, maintainable, and expressive tests for your C++ projects. This page introduces both frameworks, their core purpose, benefits, and how they integrate, providing a high-level understanding to orient new users before diving deeper into detailed tutorials and references.

---

## Introduction to GoogleTest and GoogleMock

### What is GoogleTest?

GoogleTest, often abbreviated as GTest, is Google's C++ testing framework. It allows you to write tests that verify the correctness of your code with:

- **Isolated and portable tests**: Write tests that are independent and easily portable across platforms like Linux, Windows, and macOS.
- **Well-organized test suites**: Group related tests logically and reuse setup code through fixtures.
- **Automated test discovery & execution**: Easily write and manage tests without manual registration.
- **Rich assertion macros**: Verify conditions with expressive, informative assertions that improve your test diagnostics.

GoogleTest is designed with a focus on the user's workflow — enabling rapid test writing, consistent test execution, and effective debugging.

### What is GoogleMock?

GoogleMock (GMock) extends GoogleTest by enabling you to create **mock objects** — stand-ins for complex or external components your code interacts with. This allows you to:

- Define **mock classes** that simulate interfaces.
- Specify **expectations** on how these mocks are used (calls made, arguments passed, call order).
- Control **mock behavior**, such as what values to return or side effects.
- Verify **interactions** between your code and its dependencies precisely.

GoogleMock empowers you to isolate the unit under test by replacing real dependencies with mocks, making your tests faster, more reliable, and focused.

---

## Why Use GoogleTest and GoogleMock Together?

Combining GoogleTest’s powerful assertions and test organization with GoogleMock’s flexible mocking capabilities creates a comprehensive testing environment. Together, they allow:

- Writing **unit tests** that are fast and deterministic.
- Testing **interactions** and **collaborations** between components.
- Achieving **better code design** by encouraging interface-driven development.
- Handling **complex scenarios** like failure behaviors and edge cases with mocks.

This suite is suitable for small projects to large-scale applications and integrates with popular build systems like CMake and Bazel.

---

## How Do I Use GoogleTest and GoogleMock?

The typical user journey involves the following steps:

### 1. Installation and Setup

- **Clone or download** the GoogleTest repository, which includes GoogleMock.
- **Build using CMake or your preferred system**. GoogleMock is included by default in the build.

Example to build standalone with GoogleMock:

```bash
mkdir build
cd build
cmake ..       # Includes GoogleMock by default
make
sudo make install  # If system-wide install is needed
```

- Integrate GoogleTest/GoogleMock in your own project build using simple import methods or by embedding the sources. Using CMake’s `FetchContent` is a popular approach.

### 2. Writing Your First Test

- Add `#include <gtest/gtest.h>` for GoogleTest and `#include <gmock/gmock.h>` for GoogleMock in your test files.
- Define tests using `TEST()` or test fixtures with `TEST_F()`.
- Use assertions like `EXPECT_EQ`, `ASSERT_TRUE`, or more expressive matchers.

Example GoogleTest test:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### 3. Creating Mock Classes

- Define mock classes that inherit from interfaces your code depends on.
- Use `MOCK_METHOD` macros to specify mocked methods.

Example mock class for an interface `Turtle`:

```cpp
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};
```

### 4. Setting Expectations and Behaviors on Mocks

- Use `EXPECT_CALL(mockObject, Method(args))` to specify how mocks are expected to be called.
- Control behavior using `WillOnce()`, `WillRepeatedly()`, or specify return values.

Example:

```cpp
EXPECT_CALL(mockTurtle, Forward(100))
    .Times(AtLeast(1));
```

### 5. Running Tests

- Initialize GoogleTest in your `main()` with `testing::InitGoogleTest(&argc, argv);`.
- Call `RUN_ALL_TESTS();` to execute all defined tests.
- Analyze test results for successes and failures.

### 6. Exploring Advanced Features

- Use parameterized tests, typed tests, and death tests for complex scenarios.
- Customize test output and hooks.
- Extend mocks by writing actions and custom matchers.

Details and examples are available in the comprehensive guides and the API references.

---

## Practical Tips & Best Practices

- **Start simple**: Begin with simple `TEST`s to validate your code and build confidence.
- **Use fixtures for shared setup** to keep tests DRY (Don't Repeat Yourself).
- **Minimize expectations** to only what the test truly verifies — avoid brittle, over-specified tests.
- **Use NiceMock** if you want to suppress warnings on uninteresting calls.
- **Use sequences and `InSequence`** to enforce call order when needed.
- **Define mocks for interfaces you own or control**, or create adaptors to improve maintainability.
- **Write clear assertions** that describe intent (see the Assertions Reference for detailed guidance).
- **Integrate early with your build system** (CMake/Bazel) for smooth continuous integration.

---

## Common User Questions

<AccordionGroup title="Common Questions">
<Accordion title="What are the primary use cases for GoogleTest and GoogleMock?">
GoogleTest is used for writing unit and integration tests to verify code correctness directly. GoogleMock complements by allowing you to test interactions with dependencies through mocks, enabling thorough behavior verification and isolation.
</Accordion>
<Accordion title="Do I need to use GoogleMock for all tests?">
No, use GoogleMock when you need to isolate your code from external dependencies or want to verify interactions. For simple value-based testing without interactions, GoogleTest alone may suffice.
</Accordion>
<Accordion title="How do GoogleTest and GoogleMock integrate with my build system?">
Both frameworks work well with modern build systems like CMake and Bazel. GoogleTest includes CMake scripts that build both components together. You can link GoogleTest/GoogleMock libraries into your test executables seamlessly.
</Accordion>
<Accordion title="Is GoogleMock included as part of GoogleTest?">
Yes, GoogleMock sources are bundled with GoogleTest and automatically included when you build GoogleTest unless disabled explicitly.
</Accordion>
<Accordion title="Can I mock non-virtual methods or free functions?">
gMock mocks virtual methods. For non-virtual methods or free functions, design interfaces or adapters to enable mocking, or use dependency injection techniques.
</Accordion>
<Accordion title="How do I write a simple mock method?">
Use the `MOCK_METHOD(return_type, MethodName, (args...), (qualifiers))` macro inside your mock class to define mock methods.
</Accordion>
</AccordionGroup>

---

## Next Steps & Further Exploration

- Begin with the **[GoogleTest Primer](./primer.md)** to master the basics of writing and running tests.
- Explore mocks in detail with the **[Mocking for Dummies](./gmock_for_dummies.md)** guide.
- Dive into advanced features like parameterized tests, death tests, and custom matchers in corresponding guides.
- For API specifics, consult **[Assertions Reference](./reference/assertions.md)** and **[Mocking Reference](./reference/mocking.md)**.


---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock Cookbook](./gmock_cook_book.md) for recipes on mocking advanced use cases
- Integration details for CMake/Bazel and platforms: See [Integration Entry Points](../overview/architecture-features/integration-entrypoints)

---

By mastering GoogleTest and GoogleMock, you empower your C++ projects with rigorous testing capabilities that scale from simple tests to complex interaction verification with confidence and clarity.
