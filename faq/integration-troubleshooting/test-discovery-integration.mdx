---
title: "How do I integrate with my preferred test runner or CI system?"
description: "Provides answers on connecting GoogleTest/GoogleMock to external runners, popular IDE extensions, and continuous integration frameworks, ensuring smooth automation and reporting."
---

# FAQ: How do I integrate with my preferred test runner or CI system?

This page answers essential questions on integrating GoogleTest and GoogleMock with external test runners, IDE extensions, and continuous integration (CI) systems to enable seamless automated testing and result reporting.

---

## 1. What is the recommended way to run GoogleTest/GoogleMock with an external test runner?

GoogleTest and GoogleMock provide an executable test binary that can be run independently or invoked by an external test runner or CI system. The key is to rely on the standard `main()` function, provided in the libraries `gtest_main` or `gmock_main`, which initializes and runs all tests listed in your binary.

- **Use `gtest_main` or `gmock_main`** libraries when linking your test binary. These provide a ready-made `main()` function that calls `testing::InitGoogleTest()` or `testing::InitGoogleMock()`, parses command-line arguments, runs all registered tests, and returns an appropriate exit code.
- When you prefer custom behavior, implement your own `main()` by calling `testing::InitGoogleTest(&argc, argv)` or `testing::InitGoogleMock(&argc, argv)` and then `RUN_ALL_TESTS()`.

This design ensures your test executable can be recognized and managed by popular test runners or CI tools by:

- Exiting with a status code that indicates success or failure.
- Supporting command-line flags for filtering tests, controlling output, and enabling debug options.

### Example: Minimal `main()` with GoogleTest
```c++
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Example: Minimal `main()` with GoogleMock
```c++
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

If your platform or environment requires a custom entry point (for instance, embedded or Arduino-like platforms), the framework supports alternative lifecycle hooks (like `setup()` and `loop()`). See provided source files `gtest_main.cc` and `gmock_main.cc` for platform adaptations.


---

## 2. How do I integrate GoogleTest/GoogleMock with popular IDEs and their test runners?

GoogleTest's test executable can be integrated into many popular IDE-based test runners through these approaches:

- **Visual Studio**: Use the [Google Test Adapter extension](https://marketplace.visualstudio.com/items?itemName=GoogleTestAdapter.vstest.testadapter) or the built-in Test Explorer support for GoogleTest. Configure the adapter with your test binary path.
- **JetBrains CLion**: Recognizes GoogleTest binaries automatically if you use CMake. Run/debug configurations for your test targets can be created in the IDE.
- **VS Code**: Extensions such as `CTest Test Explorer` or `GoogleTest Adapter` can detect and run GoogleTest executables.

In all cases, the test binary must support the standard GoogleTest interface:

- Accept command-line flags like `--gtest_filter`, `--gtest_output`, etc.
- Return an exit code indicating test suite pass/failure.

Ensure you build your test binaries linking against `gtest_main` or `gmock_main` so the executable is runnable and discoverable by these extensions.


---

## 3. How can I integrate GoogleTest/GoogleMock into continuous integration (CI) pipelines?

GoogleTest is designed to adapt seamlessly into CI workflows with robust support for automation and reporting. Follow these core steps:

### 3.1 Build Integration

- Build your tests using your preferred build system (CMake, Bazel, Make, Ninja, etc.).
- Link with `gtest_main` or `gmock_main` for automatic executable test entry points.

### 3.2 Automated Test Execution

- Run your test binaries in your CI jobs using shell or batch scripts.
- Pass flags to control which tests run or how results are output:
  - Use `--gtest_filter=Pattern` to select specific tests.
  - Use `--gtest_output=xml:PATH` to export results in XML format compatible with CI tools (e.g., Jenkins, GitHub Actions).

### 3.3 Result Reporting

- Use GoogleTest’s XML output reports to visualize pass/fail status.
- Many CI systems can parse these XML reports directly to show detailed test result dashboards.

### 3.4 Popular CI Examples

- **Jenkins**: Use the JUnit plugin to consume XML result files produced by GoogleTest.
- **GitHub Actions**: Upload the test XML as an artifact or use specialized test-reporting actions.
- **GitLab CI**: Use `artifacts:reports:junit` with XML output for test reports.


---

## 4. Advanced Integration Tips and Best Practices

### 4.1 Link Once with `gtest_main` or `gmock_main`

Avoid defining multiple `main()` functions in your project. Link either against `gtest`, `gmock`, or their corresponding `_main` variants to avoid link errors and to keep your entry points consistent.

### 4.2 Pass Command-Line Arguments for Flexibility

Your test executables support a rich suite of command-line arguments that control:

- Which tests to run (`--gtest_filter`)
- Output verbosity (`--gtest_verbose`)
- Output formats (`--gtest_output`)
- Sharding tests for parallel execution

Make use of these in CI pipelines and runners to precisely control test execution.

### 4.3 Use Custom Event Listeners for Detailed Reporting

GoogleTest supports custom `TestEventListener` APIs that allow you to extend or modify how test events are reported, enabling you to integrate with proprietary test dashboards or logging systems.


---

## 5. Common Issues & Troubleshooting

### Test Runner Does Not Discover Tests

- Ensure the test executable is built with `gtest_main` or includes a proper `main()` initializing GoogleTest.
- Verify no conflicting `main()` functions are defined.
- Confirm the test binary responds correctly to `--gtest_list_tests` option.

### Test Binary Does Not Exit Properly

- GoogleTest returns `0` on success, non-zero on failure. Make sure your CI does not ignore the exit code.

### Problems with Custom `main()`

- Always call `testing::InitGoogleTest()` or `testing::InitGoogleMock()` before `RUN_ALL_TESTS()`.
- Pass command-line arguments to `Init` to enable flag parsing.

### IDE Extensions Fail to Recognize Test Executable

- Verify your test runner or IDE plugin supports GoogleTest binaries.
- Make sure the test executable supports command-line flag interfaces.


---

## 6. Related Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Basics of GoogleTest including test writing and running.
- [Integration & Ecosystem](https://github.com/google/googletest/blob/main/overview/feature-highlights-integration/integration-ecosystem.mdx) — Overview of integrations with IDEs, build systems, and reporting formats.
- [Installing with CMake](https://github.com/google/googletest/blob/main/getting-started/installation-and-configuration/install-cmake.mdx) — For setting up GoogleTest in your build environment.
- [FAQs on Build and Linker Issues](https://github.com/google/googletest/blob/main/faq/integration-troubleshooting/build-link-errors.mdx) — Common build problems and fixes.

---

## Summary
GoogleTest and GoogleMock offer straightforward integration with external test runners and CI environments primarily via standard executable test binaries that support universal command-line interfaces and exit codes. Leveraging provided `gtest_main` or `gmock_main` libraries enables automatic test discovery and running, easing connection with popular IDE extensions and build pipeline tools. Exporting test results in XML format further streamlines CI reporting and diagnostics.

Below is a concise example to illustrate a minimal custom `main()` entry point:

```c++
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);  // or InitGoogleTest()
  return RUN_ALL_TESTS();
}
```

For detailed instructions and advanced usage, refer to the linked guides and documentation sections.