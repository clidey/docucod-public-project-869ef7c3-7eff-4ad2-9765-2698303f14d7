---
title: "Platform or Language Compatibility Issues"
description: "Describes how to troubleshoot issues that arise from compiler, platform, or C++ standard incompatibilities and guides users to supported environments and workaround strategies."
---

# Platform or Language Compatibility Issues

This page helps you identify and resolve issues related to incompatibilities between GoogleTest (and GoogleMock) and your compiler, platform, or C++ standard environment. These compatibility considerations are crucial to successfully build and run tests using GoogleTest.

---

## Understanding Supported Platforms and Compilers

GoogleTest officially supports platforms that comply with Google's [Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support). Supported platforms include major operating systems such as Windows, Linux, and macOS, and work with a range of modern compilers.

### Key Compiler Requirements:
- **Minimum C++ Standard**: C++17 or later is required for building GoogleTest and GoogleMock.
- **Supported Compilers**:
  - GCC 7.1 and higher
  - Clang 5.0 and higher
  - MSVC 2017 and higher (Visual C++ 2015 is the earliest version for GoogleMock)

### Supported Operating Systems:
- Windows (including Windows Desktop, MinGW)
- Linux
- macOS

### Important Platform Notes:
- Embedded platforms such as ESP8266, ESP32, NRF52, and others are less commonly supported and may encounter limitations.
- Certain features like death tests or pthread support depend on platform capabilities.

Refer to the [Supported Platforms](docs/platforms.md) document for the most up-to-date and detailed list of supported combinations.

---

## Common Compatibility Issues and How to Resolve Them

### 1. Compiler Fails Due to Missing or Unsupported C++ Features

**Problem:** Compiler errors occur because features required by GoogleTest (like C++17 support) are missing or disabled.

**Solution:**
- Ensure your compiler version meets minimum requirements.
- Add compiler flags to enable C++17, for example:

```bash
# For g++ or clang++
-std=c++17

# For MSVC
/std:c++17
```
- Confirm your build system (CMake, Bazel, Makefiles) properly sets these standard flags.

---

### 2. Unexpected Macro or Declaration Conflicts

**Problem:** Macro names from GoogleTest clash with existing macros in your project.

**Solution:**
- Use `-DGTEST_DONT_DEFINE_TEST=1` or similar flags for specific macros (e.g., `ASSERT_EQ`, `TEST`) to rename GoogleTest macros and avoid conflicts.
- This requires writing fully-qualified macro names like `GTEST_TEST`, `GTEST_ASSERT_EQ` instead.

Example:

```bash
cmake .. -DGTEST_DONT_DEFINE_TEST=1
```

---

### 3. Linking Errors Related to Multithreading or Runtime Libraries

**Problem:** Errors occur during build or link phase when using pthreads or mismatched C runtime libraries.

**Solution:**
- On platforms supporting pthreads, ensure the linker flags include `-lpthread`.
- For Windows with Visual Studio, address runtime library mismatches by setting `gtest_force_shared_crt` CMake option:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```
- This aligns GoogleTest runtime linkage with the main project.

---

### 4. Missing File System or Stream Redirection Support

**Problem:** Certain features (e.g., death tests, output capture) fail on platforms without file system or stream redirection capabilities.

**Solution:**
- Check and understand platform feature macros like `GTEST_HAS_FILE_SYSTEM` and `GTEST_HAS_STREAM_REDIRECTION`.
- For embedded or specialized platforms lacking these features, some test capabilities are limited.

---

### 5. Exceptions, RTTI, and Other Language Feature Incompatibilities

GoogleTest needs to work in diverse configurations, including with or without exceptions and RTTI.

- **Exceptions:** GoogleTest detects if exceptions are enabled. If your environment disables exceptions, GoogleTest adapts accordingly.
- **RTTI:** Run-time type information may or may not be available depending on compiler settings. GoogleTest auto-detects and works around its availability.

If you run into issues, verify your compiler flags (e.g., `-fno-exceptions`, `-fno-rtti`) and adjust accordingly to match your testing needs.

---

## Diagnosing Platform and Language Issues

### Step-by-Step Troubleshooting Workflow

<Steps>
<Step title="Verify Compiler Version and C++ Support">
Check that your compiler version supports C++17 or higher. Run:<br/>
```bash
<compiler> --version
```
and confirm C++17 support using:<br/>
```bash
<compiler> -std=c++17 -dumpversion
```

Update or switch compilers if needed.
</Step>
<Step title="Inspect Build Flags">
Look at your build system (CMakeLists.txt, Bazel BUILD files, or Makefiles) and ensure appropriate flags for standard, threading, and sharing are set.
</Step>
<Step title="Review Platform Macros in gtest-port.h">
GoogleTest's internal `gtest-port.h` detects platform and environment features.
Check these macros to confirm your environment is detected correctly:
- `GTEST_HAS_PTHREAD`
- `GTEST_HAS_EXCEPTIONS`
- `GTEST_HAS_RTTI`
- `GTEST_HAS_FILE_SYSTEM`

Incorrect detection can be overridden by user-defined macros.
</Step>
<Step title="Check Linking and Runtime Errors">
If you get linking errors, verify pthread libraries (for pthread-enabled systems), and runtime linkage compatibility (especially on Windows).
</Step>
<Step title="Consult GoogleTest Logs and Compile Warnings">
Inspect build logs to find warnings or errors about unsupported features or missing dependencies.
Use verbose build modes if needed.
</Step>
</Steps>

---

## Practical Tips and Best Practices

- Always specify the C++ standard (`-std=c++17`) explicitly in your project build to avoid ambiguity.
- Use the GoogleTest CMake options like `gtest_force_shared_crt` to align runtime libraries on Windows.
- For embedded or uncommon platforms, read the platform support documentation carefully to understand feature limitations.
- When integrating GoogleTest into larger projects, encapsulate GoogleTest dependencies and flags to avoid affecting other parts.
- Consult the [Prerequisites and System Requirements](/getting-started/setup-introduction/prerequisites-requirements) page for detailed environment guidance.

---

## When to Seek Further Help

If issues persist despite following platform and language compatibility guidance:

- Consult the [Troubleshooting Common Setup Issues](/getting-started/first-experience/common-setup-issues) page.
- Review the [Resolving Build and Link Errors](/faq/build-integration/build-and-link-errors) FAQ for common scenarios.
- Engage with the community or report issues as described in [Where to Get Help and Report Issues](/faq/community-help/where-to-get-help).

---

## Related Documentation and Resources

- [Prerequisites and System Requirements](/getting-started/setup-introduction/prerequisites-requirements)
- [Installation (CMake, Bazel, Manual)](/getting-started/setup-introduction/installation-options)
- [Common Setup Issues](/getting-started/first-experience/common-setup-issues)
- [Supported Platforms](docs/platforms.md)
- [Build and Link Errors FAQ](/faq/build-integration/build-and-link-errors)
- [GoogleTest Primer](docs/primer.md)

Explore these resources to deepen your understanding of GoogleTest compatibility requirements and troubleshooting measures.

---