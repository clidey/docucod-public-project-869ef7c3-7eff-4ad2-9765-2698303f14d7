---
title: "Troubleshooting CI and IDE Integration"
description: "Advice on resolving integration problems with continuous integration systems and popular editors/IDEs, including dealing with color output, XML/JSON reports, and plugin configurations."
---

# Troubleshooting CI and IDE Integration

This FAQ guides users through addressing common integration issues when using GoogleTest and GoogleMock within Continuous Integration (CI) systems and popular editors or Integrated Development Environments (IDEs). It focuses on resolving problems related to color-coded output, handling XML/JSON test reports, and configuring plugins for seamless operation.

---

## 1. Enhancing Test Output Visibility in CI Environments

### Problem
CI environments often have limited or different terminal capabilities compared to local shells, leading to issues with colored output from test runs. The expected test status coloring (green/red) may not appear, resulting in logs that are harder to parse visually.

### Solution
- **Use flags to control color output:**
  GoogleTest and GoogleMock provide the `--gtest_color` flag which controls coloring behavior.

#### Common flag values:
- `auto` (default): Attempts to detect if coloring should be enabled.
- `yes`: Forces color output regardless of terminal detection.
- `no`: Disables color output.

**Example:**
```shell
./my_tests --gtest_color=yes
```

- **Tip:** If your CI system supports ANSI color codes, forcing colors on enhances readability.

- **Disable if unsupported:** If the CI system log viewer does not handle ANSI escape sequences well, disable colors with `--gtest_color=no`.


## 2. Generating XML and JSON Reports

### Problem
CI systems rely on machine-readable test output formats such as XML or JSON to show detailed test results, statistics, and support dashboards.

### Solution
GoogleTest natively supports XML output via the `--gtest_output` flag. JSON output support is also available in more recent versions.

#### Using XML output
Use:
```shell
./my_tests --gtest_output=xml:report.xml
```

- This produces `report.xml` with full test run details.

- CI tools like Jenkins, GitLab, and CircleCI can ingest this XML directly for rich reporting.

#### Using JSON output
Use:
```shell
./my_tests --gtest_output=json:report.json
```

- Produces JSON formatted reports.

- Useful if your CI plugins or parsers prefer JSON.


## 3. Configuring IDE and Editor Plugins

### Common editors/IDEs
- **Visual Studio**
- **CLion**
- **Eclipse CDT**
- **Emacs**
- **VS Code**

### Common Problems
- Tests not running or discovered
- Test output not correctly captured
- Error highlighting not working

### Advice
- **Initialization**: Ensure GoogleTest initialization functions are called (e.g., `InitGoogleTest` or `InitGoogleMock`) in the main test executable before running tests.

- **Use compatible plugin or integration**:
  - For Visual Studio, use the built-in test explorer with the GoogleTest Adapter extension.
  - For CLion, tests integrate automatically when CMake is configured.
  - For Emacs, use `google-compile` to build and run tests with error navigation.

- **Paths and Working Directory**:
  - Set the working directory properly so relative paths in test execution and test data work correctly.
  - For Windows, be aware of path length limits and ensure UTF-8 output compatibility.

- **Suppress or configure gMock and GoogleTest verbosity**:
  - Customize verbosity flags such as `--gmock_verbose` and `--gtest_list_tests` to either reduce output clutter or assist with test discovery in IDE plugins.


## 4. Controlling and Understanding gMock Verbosity

### gMock Verbosity Levels
Use the flag `--gmock_verbose=LEVEL` to adjust output verbosity:

- `info`: Verbose output; reports expected calls, uninteresting calls with detailed stack traces. Useful when debugging mocks.
- `warning` (default): Prints warnings and errors without stack traces on uninteresting calls.
- `error`: Prints only errors (least verbose).

**Adjusting verbosity in tests:**
```cpp
::testing::FLAGS_gmock_verbose = "error";
```

### Use Cases
- **Debugging test failures:** Use `info` for detailed trace.
- **Reducing log noise:** Use `warning` or `error` in CI or when tests are stable.


## 5. Handling Leaked Mock Object Warnings in CI Logs

### Problem
Tests running in CI can sometimes leak mocks, leading GoogleMock to print error messages about leaked mock objects, which may fail the entire CI run.

### Solution
- Ensure mock objects are properly destroyed after tests.
- If intentional, suppress leaks with:
```cpp
testing::Mock::AllowLeak(mock_ptr);
```
- Prefer using smart pointers or stack allocation to manage mock lifetimes automatically.


## 6. Managing Compatibility with CI Environments

- **Binary output**: Avoid creating test binaries with interactive or platform-specific requirements.
- **Test discovery**: Use `--gtest_list_tests` to debug test discovery in CI.
- **Filtering tests**: Use `--gtest_filter` to run subsets of tests for faster CI cycles.


## 7. Troubleshooting Workflow

<AccordionGroup title="Troubleshooting Workflow">
<Accordion title="No Color Output in CI Logs">
- Verify `--gtest_color` flag settings.
- Test forcing color with `yes`.
- Check CI log viewer compatibility with ANSI codes.
</Accordion>
<Accordion title="XML or JSON Report Not Generated">
- Confirm `--gtest_output=xml:filename.xml` or `json:filename.json` is passed.
- Ensure write permissions to output directory.
- Check test binary produces output outside of crash or early death.
</Accordion>
<Accordion title="IDEs Not Discovering or Running Tests">
- Confirm test discovery flags and initialization.
- Verify correct working directory setup.
- Check plugin versions and support for GoogleTest/GoogleMock.
- Use command line flags `--gtest_list_tests` to verify discovery.
</Accordion>
<Accordion title="Verbose Mock Output Overwhelming Logs">
- Adjust `--gmock_verbose` to `warning` or `error`.
- Use `Mock::AllowLeak()` to reduce spurious warnings.
- Use `ON_CALL` and `EXPECT_CALL` judiciously.
</Accordion>
</AccordionGroup>

## 8. Best Practices for CI and IDE Integration

- Always call **InitGoogleTest** or **InitGoogleMock** before running tests.
- Use **XML report generation** for CI to enable detailed test reporting.
- Adjust verbosity levels for cleaner logs or richer debugging information.
- Utilize **test filtering** and **test sharding** as optimization strategies.
- Keep mocks and expectations clear to avoid noisy warnings.
- Consider **mock lifetimes** carefully to avoid leaks and false negatives.

## 9. Additional Resources

- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) - For advanced mocking techniques
- [FAQ on test-discovery and filters](../faq/troubleshooting/test-not-discovered) - For help with test execution in CI
- [GoogleTest Primer](https://google.github.io/googletest/primer.html) - For basics and common usage
- CI vendor-specific plugins and guides for GoogleTest integration

---

## Summary
This page offers actionable advice and troubleshooting tips tailored for integrating GoogleTest and GoogleMock into continuous integration systems and popular development environments. Users will learn how to manage output coloring, generate compatible reports, configure IDE plugins, and control mock verbosity to enhance their testing workflows.

---

<Tip>
Properly configuring your test runs with flags like `--gtest_color`, `--gtest_output`, and `--gmock_verbose` significantly improves your CI and IDE experience by balancing information richness and log cleanliness.
</Tip>

<Warning>
Ignoring mock object lifecycle can cause false test passes in CI due to undetected unmet expectations. Use smart management or `Mock::AllowLeak()` responsibly.
</Warning>

---

## Related Documentation

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Test Results and Reporting](../../api-reference/core-testing/test-results-and-reporting.md)
- [Setting Expectations with gMock](../../api-reference/mocking-framework/setting-expectations.md)
- [Configuring Build Systems for CI](../../getting-started/troubleshooting/configuring-build-systems.md)


## Example Commands for CI

```bash
# Run tests with color output forced on
./test_binary --gtest_color=yes

# Generate XML output for CI
./test_binary --gtest_output=xml:reports/results.xml

# Set mock verbose logging to warning level
./test_binary --gmock_verbose=warning
```


## Troubleshooting Example: Unrecognized Colors

If your CI logs are full of escape characters instead of colors, try disabling color:

```bash
./test_binary --gtest_color=no
```

Or adjust your CI tool to support ANSI colors if possible.


## Emacs Users

When using Emacs with GoogleTest, use `M-x google-compile` to build and run tests with integrated error navigation.

Add key bindings to your `.emacs` file:

```emacs-lisp
(global-set-key "\M-m" 'google-compile)
(global-set-key [M-down] 'next-error)
(global-set-key [M-up] '(lambda () (interactive) (next-error -1)))
```

---