---
title: "How do I resolve build or linker errors?"
description: "Diagnostic tips and step-by-step troubleshooting guidance for the most typical build and linker errors users face when integrating GoogleTest or GoogleMock, including missing symbols and header not found scenarios."
---

# How Do I Resolve Build or Linker Errors?

When integrating GoogleTest or GoogleMock into your C++ projects, build and linker errors can often arise due to missing symbols, header files not found, or misconfigured compiler and linker flags. This guide provides clear, actionable steps to diagnose and resolve the most common problems so that you can get your tests building and running smoothly.

---

## Understanding Common Causes of Build and Linker Errors

1. **Missing Header Files:** Usually indicates include paths are not set correctly.
2. **Undefined Symbols or Missing Library References:** The linker cannot find implementations.
3. **Runtime Library Mismatches (especially on Windows):** Linking static versus dynamic CRT runtimes inconsistently.
4. **Incorrect Compiler Flags or C++ Standard Version:** GoogleTest requires C++17 compatibility.
5. **Threading Support Problems:** Missing pthreads or incorrect threading flags can cause link failures.

---

## Step-by-Step Troubleshooting and Resolution Workflow

<Steps>
<Step title="Verify Include Paths">
Ensure your build system knows where to find the GoogleTest and GoogleMock headers.

- For CMake projects, verify you have `include_directories()` or target include paths set to point to the GoogleTest and GoogleMock "include" folders.
- When using installed libraries, confirm your `CMAKE_INSTALL_PREFIX` or system include dirs include GoogleTest headers.
- If using source inclusion, ensure the GoogleTest source `googletest/include` and `googlemock/include` directories are included.

Check for compiler errors like "file not found" referencing `<gtest/gtest.h>` or `<gmock/gmock.h>`.
</Step>
<Step title="Check Linking Libraries">
Make sure your test executable links against the correct GoogleTest and GoogleMock libraries.

- Use `target_link_libraries()` in CMake to link with `gtest`, `gtest_main`, `gmock`, or `gmock_main` as appropriate.
- For pkg-config systems, verify `.pc` files and `pkg-config` commands reference the correct paths.
- If building GoogleTest/GoogleMock from source, confirm the libraries are compiled and available.

Look out for errors like "undefined reference to ..." or missing symbols during linking.
</Step>
<Step title="Match Runtime Library Settings on Windows">
On Windows, ensure that your project and GoogleTest libraries use compatible runtime linkage.

- GoogleTest defaults to static CRT linkage. If your project uses dynamic CRT, you will encounter linker errors.
- Use the CMake option `-Dgtest_force_shared_crt=ON` to build GoogleTest with dynamic CRT.
- Rebuild GoogleTest and your tests with consistent runtime flags.

Typical errors include LNK2038 mismatch involving `RuntimeLibrary` values.
</Step>
<Step title="Confirm C++17 or Higher Standard Support">
GoogleTest requires a compiler supporting C++17.

- Confirm your compiler version supports C++17 (for example: GCC 7.1+, Clang 5.0+, MSVC 2017 Update 3+).
- Specify `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)` in your top-level CMakeLists.txt.
- For manual builds, add appropriate flags like `-std=c++17` to your compiler flags.

Lack of C++17 support often leads to errors about unknown language features or incompatible standard library features.
</Step>
<Step title="Verify Threading Support and Flags">
Multi-threaded tests require proper threading support.

- Verify if your environment has pthreads installed and that GoogleTest correctly detects it.
- For CMake, the threading libraries are typically linked automatically.
- If build errors mention missing pthread symbols, pass `-DGTEST_HAS_PTHREAD=1` or `=0` to force enable/disable.

Incorrect threading support can cause link errors related to thread primitives.
</Step>
<Step title="Check for Macro Clashes and Custom Definitions">
Ensure that macro name clashes are resolved if you are including multiple libraries with conflicting macros.

- You can disable GoogleTest defining certain macros on your own by defining `-DGTEST_DONT_DEFINE_[MACRO]=1`.
- This prevents conflicts and linker errors from multiple macro definitions.

Review your compiler flags for such macro redirection options.
</Step>
</Steps>

---

## Common Error Scenarios and How to Fix Them

<AccordionGroup title="Build and Linker Error Scenarios">
<Accordion title="Header File Not Found">
**Symptom:** Compiler error "fatal error: gtest/gtest.h: No such file or directory".

**Cause:** Include paths are not configured correctly.

**Solution:**
- Add the GoogleTest include directory to your compiler's include path.
- In CMake, add `include_directories(path_to_googletest/include)` or use target-specific includes.
- If installed system-wide, verify that pkg-config reports the correct paths.
</Accordion>
<Accordion title="Undefined Reference to GoogleTest Symbols">
**Symptom:** Linker error "undefined reference to testing::InitGoogleTest()" or other GoogleTest functions.

**Cause:** Missing linking of GoogleTest or GoogleMock libraries.

**Solution:**
- Link your test program with `gtest` or `gmock` libraries.
- Use `target_link_libraries(your_test PRIVATE gtest_main)` if linking with gtest's default main.
- Check that the built GoogleTest libraries are properly built and installed.
</Accordion>
<Accordion title="RuntimeLibrary Mismatch on Windows (LNK2038)">
**Symptom:** Linker error with mismatch in runtime library flags (MT vs MD).

**Cause:** Your project and GoogleTest link against different CRT runtimes.

**Solution:**
- Build GoogleTest with `-Dgtest_force_shared_crt=ON` to match dynamic runtimes.
- Or adjust your project to use static runtimes if building GoogleTest statically.
- Confirm Visual Studio project settings under C/C++ > Code Generation > Runtime Library.
</Accordion>
<Accordion title="Threading Related Link Errors">
**Symptom:** Linker fails on pthread symbols.

**Cause:** Missing pthread library during linking or wrong flags.

**Solution:**
- Add `-lpthread` in linker flags manually if using own build scripts.
- For CMake, ensure `find_package(Threads)` is called and `target_link_libraries(your_test Threads::Threads)` is applied.
- Force enable/disable pthread detection with `-DGTEST_HAS_PTHREAD=1` or `=0` if autodetection fails.
</Accordion>
</AccordionGroup>

---

## Practical Tips and Best Practices

- **Use CMake Integration:** Prefer using GoogleTest's official CMake scripts (`add_subdirectory`) to manage include paths, compile flags, and linking automatically.
- **Link with `gtest_main` if you don't want custom main():** It provides a default `main()` and reduces setup errors.
- **Check for Compiler and Linker Warnings Early:** Address warnings as they often hint at potential build config problems.
- **Keep GoogleTest up to date:** Newer versions improve C++ standard compatibility and build scripts.
- **Consult GoogleTest's README:** The README contains detailed build instructions and advanced options.

---

## Example: Building GoogleTest via CMake

1. Clone the repository:

```bash
 git clone https://github.com/google/googletest.git -b v1.17.0
 cd googletest
 mkdir build && cd build
 cmake ..
 make
 sudo make install
```

2. In your CMake project, add:

```cmake
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})
add_executable(my_test test.cpp)
target_link_libraries(my_test ${GTEST_LIBRARIES} pthread)
```

This ensures proper includes and libraries.

---

## Where to Go Next

- Review the [System Requirements & Supported Platforms](/getting-started/requirements-installation/system-requirements) to verify environment compatibility.
- Visit the [Installing on Your Platform](/getting-started/requirements-installation/install-on-linux) guide for step-by-step platform-specific instructions.
- See the [Configuring Your Project](/getting-started/initial-setup-usage/project-configuration) for integration details.
- If interested in mocking, see the GoogleMock [Introduction](/guides/mocking-techniques-integration/introduction-to-googlemock).


---

<Tip>
If you continue to encounter build or linker errors, enabling verbose build output with your build system (e.g., `make VERBOSE=1` or CMake's `--trace`) can help reveal missing paths or misconfigurations more clearly.
</Tip>

<Note>
The build and linker errors are often a symptom of an inconsistent or incomplete integration setup; addressing these foundational configuration steps eliminates most common issues.
</Note>
