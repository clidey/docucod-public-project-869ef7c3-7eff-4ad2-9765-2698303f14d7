---
title: "Why aren’t my tests running or being discovered?"
description: "Explores reasons why tests might not be executed, such as incorrect macros, file naming issues, or build misconfigurations. Provides practical diagnostic steps and tips on using test filters or command-line options to isolate issues."
---

# Why aren’t my tests running or being discovered?

When working with GoogleTest, it's common to encounter situations where your tests don't run or aren't recognized during test execution. This page helps you understand the possible reasons behind this and guides you with practical steps to diagnose and resolve these issues.

---

### Common Causes and How to Diagnose

#### 1. Incorrect or Missing Test Macros

- **Use `TEST()` or `TEST_F()` macros properly:** Ensure your test code uses the correct GoogleTest macros to define tests.
  - `TEST(SuiteName, TestName)` is for simple tests.
  - `TEST_F(FixtureName, TestName)` is for tests using fixtures.

- **Avoid typos:** Macros like `TEST` or `TEST_F` must be capitalized exactly and not altered.

- **No underscores in names:** Test suite and test names should not contain underscores (`_`), as these are disallowed by GoogleTest naming conventions and may cause tests to be silently ignored.

```cpp
// Correct usage
TEST(MathTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

// Incorrect (underscore in test name)
TEST(MathTest, Addition_Test) {
  // This test will NOT be discovered.
}
```

#### 2. File Naming and Compilation Issues

- **Source file recognition:** Depending on your build system, test files need to be included or compiled explicitly.
  - Ensure your test source files are part of the build.
  - Check build system configurations, such as CMakeLists.txt or BUILD files, to confirm test files are added.

- **Linked to the test executable:** Make sure object files containing tests are linked into your test binary.

- **Compilation errors:** Sometimes, compilation errors might prevent test registration silently. Check build logs carefully.

#### 3. Disabled or Filtered Tests

- **Are the tests disabled?**
  - Test suite or test names prefixed with `DISABLED_` are ignored during test runs by default.
  - Use the flag `--gtest_also_run_disabled_tests` or set `GTEST_ALSO_RUN_DISABLED_TESTS` environment variable to run them.

- **Filters excluding tests:**
  - The `--gtest_filter` flag or `GTEST_FILTER` environment variable can restrict tests to a subset.
  - Ensure your test names match the filter patterns.
  - To verify which tests are discoverable, run the binary with `--gtest_list_tests` to list all recognized tests.

#### 4. Sharding or Environment Configuration Issues

- If you use test sharding (split tests across machines or processes), environment variables like `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` determine which tests run on this shard. Tests may appear missing because they are scheduled for other shards.

- Check that your sharding configuration is correct and consistent.

---

### Practical Diagnostic Steps

#### Step 1: List Tests

Run your test executable with:

```bash
./your_test_binary --gtest_list_tests
```

This will print all tests GoogleTest discovered according to the current filter and build.

- If your tests appear here, but are not running, the issue is likely with filters or execution flags.
- If your tests do not appear, there might be a registration issue.

#### Step 2: Check Test Names and Macros

- Verify your test suites and test names are valid C++ identifiers and do **not** contain underscores.
- Use the correct macros to define tests: `TEST()`, `TEST_F()`, `TEST_P()`, etc.

#### Step 3: Validate Build Setup

- Confirm test source files are compiled and linked into the test executable.
- Review your build definitions for test inclusion.

#### Step 4: Verify Flags and Environment Variables

- Check if any `--gtest_filter` or `GTEST_FILTER` is restricting tests.
- If disabled tests exist (`DISABLED_` prefix), run with `--gtest_also_run_disabled_tests` if you want them executed.
- If you use sharding, verify `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set properly.

#### Step 5: Ensure Initialization and Entry Point

- Confirm you call `::testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS();` in your `main()` function.
- Not calling initialization will cause no tests to be registered and run.

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

### Tips and Best Practices

- **Avoid underscores in test suite and test names.** GoogleTest disallows them to avoid confusion.
- **Use `DISABLED_` prefix sparingly, and only for temporary disabling.**
- **Keep your test definitions in source files included and linked by your test build.**
- **Use descriptive test suite and test names without special characters or spaces.**
- **When using parameterized tests, ensure `INSTANTIATE_TEST_SUITE_P` is called to instantiate your tests; otherwise they won’t run.**
- **Use `--gtest_list_tests` frequently while developing tests to verify discovery.**

---

### Troubleshooting Common Scenarios

<AccordionGroup title="Common Issues & How to Solve">
<Accordion title="My tests are defined but don’t appear in the test list">
Check that you are using the correct test macros. Rename test suites and test names to remove underscores and special characters. Verify your build is linking test source files to your test binary.
</Accordion>
<Accordion title="Tests are listed but none are run">
Ensure that your test filter (flag `--gtest_filter` or environment variable `GTEST_FILTER`) matches the tests. Run without filter or with `--gtest_filter=*` to include all. Check if disabled tests are active.
</Accordion>
<Accordion title="Disabled tests don’t run">
Disabled tests (prefixed with `DISABLED_`) won’t run unless you specify `--gtest_also_run_disabled_tests` flag.
</Accordion>
<Accordion title="Tests skipped due to sharding">
If using sharding, tests are split among shards based on environment variables. Verify if your test was assigned to this shard or another.
</Accordion>
<Accordion title="No tests run, and I don’t see any errors">
Make sure you call `InitGoogleTest` before `RUN_ALL_TESTS`. Confirm test registration happens before tests are run.
</Accordion>
<Accordion title="My parameterized tests aren’t running">
Verify you have `INSTANTIATE_TEST_SUITE_P` calls for every `TEST_P` suite. Without instantiation, tests won’t be registered or run.
</Accordion>
</AccordionGroup>

---

### Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — Great for getting started writing tests correctly.
- [Test Macros and Structure](https://google.github.io/googletest/reference/testing.html#TEST) — Definitive reference for macros like `TEST`, `TEST_F`, etc.
- [Running Tests and Understanding Results](https://google.github.io/googletest/advanced.html#running-tests) — Explains test filtering and flags.
- [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md) — For solving common issues.

---

### Summary

Tests not running or being detected generally fall into issues about:

- Improper use of test macros or naming conventions (especially avoiding underscores in test names);
- Failure to call GoogleTest initialization functions;
- Not building or linking test files correctly;
- Disabled tests being excluded;
- Test filtering and sharding settings excluding tests.

Following the diagnostic flow of listing tests, verifying naming and macros, checking build setup, validating filters and environment variables, and confirming proper test initialization will resolve most issues.

---

### Example of a Typical `main()` for Proper Test Discovery

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

This guide ensures you can efficiently troubleshoot and fix issues when your GoogleTest tests are not running or being discovered as expected.