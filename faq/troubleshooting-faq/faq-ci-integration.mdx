---
title: "How do I integrate GoogleTest with CI systems?"
description: "Guidance on integrating GoogleTest-based projects with common continuous integration systems, tips for XML/JSON outputs, and reference to internal and external CI support recommendations."
---

# How do I integrate GoogleTest with CI systems?

GoogleTest is designed to seamlessly integrate with continuous integration (CI) environments, enabling automated test execution and reliable test reporting. This page provides guidance on incorporating GoogleTest-based projects into common CI systems, configuring output formats compatible with CI tools, and practical recommendations for efficient and clear integration.

---

## Why Integrate GoogleTest with CI?

Integrating GoogleTest into CI workflows accelerates feedback loops by automatically running tests on code changes, ensuring code quality, and catching regressions early. A well-configured integration allows your CI system to easily parse and display test results, helping your team maintain stable and reliable software.

## Key Integration Points

### 1. Running Your Test Executable in CI

- **Build your GoogleTest suite** as part of your CI pipeline using your preferred build system (e.g., CMake, Bazel).
- **Run the compiled test binary** during CI job execution.
- Ensure you invoke the test binary with **command-line flags** and environment variables as needed to tailor test execution.

### 2. Producing Machine-Readable Test Reports

Modern CI tools typically ingest test reports in XML or JSON formats. GoogleTest supports outputting both formats that conform to widely accepted schemas:

- Use the `GTEST_OUTPUT` environment variable or the `--gtest_output` flag to generate test reports.

#### Examples:

```bash
# Generate an XML report saved to a specific file
./my_test_binary --gtest_output="xml:/path/to/output/results.xml"

# Generate a JSON report saved to a specific file
./my_test_binary --gtest_output="json:/path/to/output/results.json"
```

- If no path is specified, the output files `test_detail.xml` or `test_detail.json` are saved in the current directory by default.

- If the specified output file already exists, GoogleTest automatically adds suffixes (e.g., `_1`) to avoid overwriting previous reports.

### 3. Configuring Test Discovery and Execution Pattern

CI environments may require running specific subsets of tests or tests across multiple shards (parallelized test runners). GoogleTest supports:

- **Filtering tests** using `--gtest_filter` or the `GTEST_FILTER` environment variable to select particular tests or suites.

- **Test sharding** support to run distributed subsets across multiple CI agents using `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` environment variables.

### 4. Using GoogleTest Flags to Optimize CI Runs

Common flags to tailor test behavior within CI environments include:

- `--gtest_fail_fast`: Halt test execution upon the first failure to speed up feedback.
- `--gtest_repeat`: Repeat tests multiple times to catch flaky tests.
- `--gtest_shuffle` and `--gtest_random_seed`: Run tests in random order to detect test interdependencies.

For a complete list, run your test binary with `--help`.

### 5. Output Integration with Popular CI Tools

Many CI platforms recognize GoogleTest XML or JSON report formats and offer native support:

- **Jenkins, TeamCity, GitLab CI, Azure DevOps, CircleCI, Travis CI** can parse GoogleTest XML to display test summaries.
- JSON outputs can be consumed by custom scripts or CI tools that support JSON test report ingestion.

### 6. Customization with Event Listeners and Test Environments

For advanced use cases, GoogleTest allows:

- **Custom event listeners** to implement bespoke reporting or logging tailored for your CI needs.
- **Global test environments** to manage setup and teardown steps within the test lifecycle.

Example of adding a custom event listener:

```cpp
class MyCIListener : public testing::EmptyTestEventListener {
 public:
  void OnTestEnd(const testing::TestInfo& test_info) override {
    if (test_info.result()->Failed()) {
      // Send failure notification or log details for the CI.
    }
  }
};

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  auto& listeners = testing::UnitTest::GetInstance()->listeners();
  delete listeners.Release(listeners.default_result_printer());  // Disable default output
  listeners.Append(new MyCIListener());  // Add custom listener
  return RUN_ALL_TESTS();
}
```

---

## Step-by-Step Integration Workflow

<Steps>
<Step title="Build Your Test Suite">
Compile your tests using your build system (e.g., CMake) as part of the CI build step.
</Step>
<Step title="Run Tests with Output Flags">
Execute the GoogleTest binary with the `--gtest_output` flag to generate XML or JSON reports.
</Step>
<Step title="Configure CI to Ingest Reports">
Set up your CI system to detect the generated test reports and display the results in its interface.
</Step>
<Step title="Optional: Configure Filtering and Sharding">
Use flags/environment variables like `--gtest_filter`, `GTEST_TOTAL_SHARDS`, and `GTEST_SHARD_INDEX` for targeted or parallel test execution.
</Step>
</Steps>

---

## Tips and Best Practices for CI Integration

- **Always return the result of `RUN_ALL_TESTS()`** from your main function. This return value lets the CI know if the tests passed or failed.

- **Use absolute paths** for output files in CI to ensure report files are generated where expected.

- **Clean previous test outputs** as needed in CI jobs to avoid confusion from stale reports.

- **Enable colors only if supported**: Use `--gtest_color=auto` to allow colorized output on compatible terminals.

- **Leverage flaky test detection**: Use `--gtest_repeat` combined with `--gtest_break_on_failure` for easier debugging of intermittent failures.

- **Monitor skipped or disabled tests** by enabling `--gtest_also_run_disabled_tests` if you want to include them temporarily in CI.

---

## Troubleshooting and Common Issues

### Test Reports Not Found by CI

- Verify the test output path matches the CI server's expectation.
- Ensure the test binary is executed with the appropriate `--gtest_output` option.

### Tests Not Running as Expected

- Check filtering with `--gtest_filter` if only some tests are executing.
- Review sharding environment variables if tests are running distributed.

### CI Shows Tests as Passed but Failures Exist

- Confirm your `main()` returns the value from `RUN_ALL_TESTS()`.
- Avoid ignoring the return code from the test binary in CI scripts.

### Issues with XML/JSON Report Format

- Use built-in GoogleTest output formats; avoid custom modifications to XML/JSON.
- Verify CI tool compatibility with the report format version.

---

## Useful References

- [Test Output and Flags](../advanced.md#controlling-test-output)
- [Running a Subset of the Tests](../advanced.md#running-a-subset-of-the-tests)
- [Test Sharding](../advanced.md#distributing-test-functions-to-multiple-machines)
- [Custom Event Listeners](../advanced.md#extending-google-test-by-handling-test-events)
- [GoogleTest Primer](../primer.md) for basics on writing and executing tests

---

## Summary

Integrating GoogleTest with CI systems involves compiling and executing your test binaries within the CI environment while generating standardized XML or JSON test reports. By passing the appropriate `--gtest_output` flags and configuring test filtering and sharding options, you enable scalable, informative, and automated testing within your CI pipelines. Advanced customization with event listeners allows tailoring output to specialized CI needs.
