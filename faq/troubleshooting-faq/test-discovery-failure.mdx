---
title: "Why are my tests not being discovered or run?"
description: "Strategies for troubleshooting situations where tests fail to appear or execute, including build misconfigurations, naming conventions, and test macros that must be used. Includes platform-specific pitfalls as well."
---

# Why Are My Tests Not Being Discovered or Run?

When working with GoogleTest, a common frustration is when tests you expect to run either don't appear in the test output or are silently skipped during execution. This guide walks you through the most frequent causes of such issues and offers actionable solutions to help you get your tests discovered and executed correctly.

---

## 1. Common Causes of Test Discovery and Execution Failures

### 1.1 Missing or Incorrect `TEST` Macros

- **Problem**: Your test functions may not be properly registered because they do not use GoogleTest's test macros.
- **Explanation**: GoogleTest discovers tests through its macros like `TEST()`, `TEST_F()`, `TEST_P()`, or `TYPED_TEST()`. If you write test functions without these macros, GoogleTest won't recognize or run them.
- **Solution**: Ensure all your tests are declared using the appropriate GoogleTest macros. For example:

```cpp
TEST(MyTestSuite, MyTestName) {
  EXPECT_TRUE(SomeCondition());
}
```

### 1.2 Naming Restrictions and Conventions

- **Problem**: Test suite or test names containing underscores or invalid characters may cause GoogleTest to skip or not discover tests.
- **Explanation**: Test suite names and test names must be valid C++ identifiers and should avoid underscores (`_`). Underscores sometimes cause issues in certain versions or test runners.
- **Solution**: Use alphanumeric characters without underscores in test names. For example, use `MyTestSuite` instead of `My_Test_Suite`.

### 1.3 Disabled Tests

- **Problem**: Tests prefixed with `DISABLED_` do not run by default.
- **Explanation**: GoogleTest uses the `DISABLED_` prefix to mark tests as temporarily disabled.
- **Solution**: Remove the `DISABLED_` prefix to enable the test. Alternatively, use the flag `--gtest_also_run_disabled_tests` to run disabled tests.

### 1.4 Tests Excluded by Filters

- **Problem**: Use of `--gtest_filter` or `GTEST_FILTER` environment variable prevents some tests from running.
- **Explanation**: Filters restrict test execution to matching test names or suites. Misconfigured filters may exclude all your tests.
- **Solution**: Review your filter value or clear it to run all tests. For example, run your test binary without `--gtest_filter` or specify `--gtest_filter=*`.

### 1.5 Multiple Test Fixtures with the Same Name

- **Problem**: Defining tests with duplicate test fixtures or mixing different fixture types within the same suite causes test registration failures, leading to missing tests.
- **Explanation**: GoogleTest requires that all tests within a test suite use the same test fixture class.
- **Solution**: Carefully review your test suite definitions to ensure consistent fixture usage. Rename conflicting classes or reorganize tests into different suites.

### 1.6 Linker Issues or Test Registration Failures

- **Problem**: Tests are compiled but not linked properly.
- **Explanation**: GoogleTest relies on static registration of tests. If the linker removes translation units containing tests (due to lack of symbol references), those tests won't be discovered.
- **Solution**: 
  - Make sure source files with tests are included in the build.
  - Avoid build system optimizations that discard unreferenced object files.
  - Explicitly reference test symbols or use `--whole-archive` flags if necessary.

### 1.7 Improper Initialization of GoogleTest

- **Problem**: Failure to call `testing::InitGoogleTest()` correctly.
- **Explanation**: The test registry is initialized during this call. If omitted or called incorrectly, tests won't be discovered.
- **Solution**: Initialize GoogleTest in `main()` before calling `RUN_ALL_TESTS()`:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 1.8 Skipping or Early Test Abort

- **Problem**: Tests might be skipped intentionally using `GTEST_SKIP()`, or aborted in `SetUp()` / `SetUpTestSuite()`.
- **Explanation**: `GTEST_SKIP()` prevents the test from running without marking it as failed. Fatal failures in setup functions abort tests.
- **Solution**: Review `SetUp()`, `SetUpTestSuite()`, or other setup code for skips or failures.

---

## 2. Platform-Specific and Advanced Considerations

### 2.1 Windows Linking and Runtime Library Mismatches

- Incorrect runtime libraries can cause tests to not link or run as expected.
- Refer to platform-specific build guides for correct MSVC runtime flag settings.

### 2.2 CMake and Build Configuration

- Make sure you link against the GoogleTest libraries properly.
- When building GoogleTest as a separate library, link your test executables against `gtest` and `gtest_main` or provide your own `main()`.

### 2.3 Using Value-Parameterized and Typed Tests

- Tests defined with `TEST_P` or `TYPED_TEST` require proper instantiation using `INSTANTIATE_TEST_SUITE_P` or `TYPED_TEST_SUITE` macros.
- Failure to instantiate will cause tests to be skipped or reported in the `GoogleTestVerification` suite as uninstantiated.

### 2.4 Test Sharding

- When using sharding (parallel test runs with environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX`), tests might not run if they belong to another shard.
- Ensure environment variables are correctly set for your shard.

---

## 3. Verifying Test Discovery

Use the following techniques to verify which tests are discovered:

### 3.1 List Available Tests

Run your test binary with `--gtest_list_tests`:

```bash
./my_tests --gtest_list_tests
```

This lists all tests discovered without running them. If your expected tests don't appear here, they are not registered correctly.

### 3.2 Use Test Filtering

Run the test with a filter to check that the tests run:

```bash
./my_tests --gtest_filter=MyTestSuite.*
```

### 3.3 Check for Disabled Tests

Run disabled tests explicitly:

```bash
./my_tests --gtest_also_run_disabled_tests
```

### 3.4 Enable Verbose Output

Use `--gtest_brief=0` to see all test outcomes including passes, and `--gtest_print_time=1` to view execution times.

---

## 4. Best Practices to Avoid Discovery Issues

- Always use GoogleTest macros (`TEST`, `TEST_F`, `TEST_P`, `TYPED_TEST`, etc.) to declare tests.
- Keep test suite and test names simple and free of underscores or unusual characters.
- Avoid mixing fixture classes within the same test suite.
- Properly instantiate parameterized and typed tests.
- Confirm your build system includes all test source files and links them correctly.
- Always call `InitGoogleTest()` in your `main()` before running tests.
- Use test filters and disabled test flags cautiously.

---

## 5. Troubleshooting Checklist

<AccordionGroup title="Troubleshooting Steps">
<Accordion title="Tests Not Listed with --gtest_list_tests">
- Confirm you used `TEST` macros for your tests.
- Check for naming violations (no underscores, valid C++ identifiers).
- Ensure test source files are compiled and linked.
- Verify `InitGoogleTest()` is called in `main()`.
</Accordion>
<Accordion title="Tests Listed but Not Running">
- Check if tests are disabled (`DISABLED_` prefix).
- Verify filters are not excluding your tests.
- Confirm parameterized tests are instantiated with `INSTANTIATE_TEST_SUITE_P`.
- Check if tests are skipped or aborted in fixtures.
</Accordion>
<Accordion title="Parameterized or Typed Tests Not Running">
- Use `INSTANTIATE_TEST_SUITE_P` for value-parameterized tests.
- Use `TYPED_TEST_SUITE` and `REGISTER_TYPED_TEST_SUITE_P` appropriately.
- Suppress uninstantiated test warnings with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if intentional.
</Accordion>
<Accordion title="Linker-Related Issues">
- Include all relevant source files.
- Avoid linker optimizations that remove unreferenced symbols.
- Use linking options like `--whole-archive` as needed.
</Accordion>
</AccordionGroup>

---

## 6. References and Further Reading

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for writing tests.
- [Assertions Reference](docs/reference/assertions.md) to understand test assertions.
- [Advanced Testing Topics](docs/advanced.md) for parameterized and typed test details.
- [Running Tests and Validation](getting-started/initial-setup-usage/command-line-and-validation.md) for test invocation guidance.
- [Troubleshooting Installation and Build Issues](getting-started/troubleshooting-faq/common-install-issues.md) for build-related problems.

---

## 7. Example: Correct Test Declaration and Execution

```cpp
#include <gtest/gtest.h>

// Simple test declaration with TEST macro.
TEST(MathTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run the compiled binary. If the test is listed with `--gtest_list_tests` but doesn't run, check that no filters or disabled prefixes are applied.

---

## 8. Quick Troubleshooting Flow

1. Use `--gtest_list_tests` to verify whether tests are discovered.
2. Ensure all test source files participate in the build and linking.
3. Confirm test definitions use proper GoogleTest macros.
4. Remove or adjust any `DISABLED_` prefixes.
5. Confirm `InitGoogleTest()` is correctly called before `RUN_ALL_TESTS()`.
6. Check for filtering flags or environment variables excluding tests.
7. If using parameterized or typed tests, ensure proper instantiation.
8. Consult platform-specific build and linker configuration if linking is suspect.

<Tip>
If tests are not discovered due to missing macro usage or build issues, no results will be shown. Always ensure your tests are declared with the official macros and that your build system includes and links those sources.
</Tip>

<Warning>
Avoid defining your tests outside the proper macros or in unnamed namespaces where the linker might discard them. Also, mixing test fixtures inside a test suite incorrectly can cause silent reasons for tests not running.
</Warning>

---

By following this guide, you should be able to identify why your tests are not being discovered or executed and take the appropriate corrective steps.

---

# Related Documentation

- [GoogleTest Test Declaration API](api-reference/core-testing-apis/test-declarations.md)
- [GoogleTest Assertions Reference](reference/assertions.md)
- [GoogleTest Advanced Topics](docs/advanced.md)
- [GoogleTest Getting Started Guides](guides/getting-started-with-googletest)
- [GoogleTest Troubleshooting Guide](getting-started/troubleshooting-faq/common-install-issues.md)
- [GoogleTest FAQ - Build Integration Issues](faq/troubleshooting-faq/build-integration-issues.md)
