---
title: "Why aren't my tests being discovered or executed?"
description: "Explains common causes for missing or unexecuted tests, such as improper test macro usage, incorrect source file naming, or issues with automatic test registration. Provides practical steps for verifying test setup."
---

# Why Aren't My Tests Being Discovered or Executed?

This page helps you diagnose and resolve common reasons why GoogleTest tests might be missing from test runs or not executed as expected. Understanding these causes ensures you maximize test coverage and avoid silent failures in your C++ test suites.

---

## Common Causes of Missing or Unexecuted Tests

### 1. Improper Test Macro Usage
- **Using `TEST()` and `TEST_F()` Consistently:**
  - All tests in the same test suite must use the *same* fixture class.
  - Mixing `TEST()` and `TEST_F()` macros within one test suite is illegal and will cause tests to be skipped or fail registration.
  - If you define your fixture class, ensure tests use `TEST_F()` with that fixture.
- **Correct `SetUp()` Spelling:**
  - The setup function *must* be spelled `SetUp()` (not `Setup()`), else it will not be called and may cause tests to behave unexpectedly.

### 2. Incorrect Source File Naming or Project Linking
- **Test Source Files Not Linked:**
  - If your test source files are not linked into your test binary (e.g., missing in build system), tests defined there won't be discovered.
  - Ensure your build system includes all test sources.
- **Static Data Members Defined Properly:**
  - If your test fixture has static const members, they must be defined outside the class in exactly one source file to avoid linker errors that silently omit tests.

### 3. Issues With Automatic Test Registration
- **Tests Must Be Registered Before `RUN_ALL_TESTS()`:**
  - Using the `TEST()` and related macros declares tests and registers them automatically.
  - If you dynamically register tests via `testing::RegisterTest()`, make sure registration happens before `RUN_ALL_TESTS()`.
- **Parameterized Tests Not Instantiated:**
  - Using `TEST_P()` defines parameterized tests, but forgetting to instantiate them with `INSTANTIATE_TEST_SUITE_P()` causes tests to be unregistered.
  - GoogleTest reports a failing test suite named `GoogleTestVerification` for uninstantiated parameterized tests unless suppressed explicitly.
  - Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(TestSuiteName);` to suppress if intentional.

### 4. Test Names and Suite Names Restrictions
- **Avoid Underscores in Names:**
  - Test suite and test names must not contain underscores (`_`) because GoogleTest uses `_` internally to construct unique class names.
  - Underscores at start or end can conflict with reserved identifiers leading to undefined or skipped tests.
- **Unique Test Names:**
  - Tests in the same suite must have unique names for proper discovery.

### 5. Disabled Tests
- **`DISABLED_` Prefix:**
  - Tests and test suites prefixed with `DISABLED_` will be compiled but excluded from test runs.
  - To run disabled tests, use the flag `--gtest_also_run_disabled_tests` or environment variable `GTEST_ALSO_RUN_DISABLED_TESTS=1`.

### 6. Filtering and Sharding Effects
- **Filters Exclude Tests:**
  - The `--gtest_filter` flag or `GTEST_FILTER` environment variable can exclude tests unintentionally if the filter patterns don't match the test names.
  - Make sure your filters include the tests you want to run.
- **Test Sharding Settings:**
  - Environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` divide tests across shards.
  - Tests not assigned to the current shard will be marked and skipped.

---

## Practical Steps to Verify and Fix Your Test Setup

### Step 1: Confirm Test Macros and Fixture Usage
- Check that all tests in a test suite use the same fixture class with `TEST_F()` or are simple tests with `TEST()`.
- Verify that `SetUp()` and `TearDown()` overrides are spelled correctly.

### Step 2: Ensure All Test Files are Linked
- Verify with your build system that all test source files containing tests are included.
- Confirm any static members in fixtures are correctly defined to prevent linker errors.

### Step 3: Validate Parameterized Test Instantiation
- If using value-parameterized tests (`TEST_P()`), confirm that `INSTANTIATE_TEST_SUITE_P()` is called with appropriate parameters.
- To suppress uninstantiated test warnings intentionally, add:

  ```cpp
  GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(YourTestSuiteName);
  ```

### Step 4: Check Test Naming Rules
- Rename any test suite or test containing underscores `_` to valid names without underscores.
- Avoid leading or trailing underscores in names.

### Step 5: Review Disabled State and Filters
- Remove or adjust the `DISABLED_` prefix if you want tests to run.
- Run your tests with `--gtest_list_tests` to see all tests recognized by the framework.
- Check your filters (`--gtest_filter`) to ensure your tests aren't being excluded.

### Step 6: Inspect Test Sharding
- Verify environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set correctly if used.
- Set them aside temporarily to run all tests locally.

---

## Troubleshooting Examples

### Example: No Tests Found After Adding Test Files
```bash
$ ./my_test
[==========] 0 tests from 0 test suites ran.
[  PASSED  ] 0 tests.
```

**Resolution:** Add the new test sources to your build system and rebuild the test binary.

### Example: Parameterized Tests Not Running
```cpp
// test.cc
class MyTest : public testing::TestWithParam<int> {};
TEST_P(MyTest, Works) { EXPECT_GT(GetParam(), 0); }

// Oops, forgot to instantiate!
```

**Resolution:** Add instantiation:

```cpp
INSTANTIATE_TEST_SUITE_P(PositiveNumbers, MyTest, testing::Values(1, 2, 3));
```

### Example: Mixing `TEST()` and `TEST_F()` in Same Suite
```cpp
TEST(MySuite, Test1) {}

class MyFixture : public testing::Test {};
TEST_F(MyFixture, Test2) {}
```

**Resolution:** Use same fixture for all tests in `MySuite` or use separate test suites.

---

## Useful Commands

- **List all recognized tests:**
  ```bash
  ./my_test --gtest_list_tests
  ```
- **Run tests with verbose info:**
  ```bash
  ./my_test --gtest_print_time=1
  ```
- **Run disabled tests:**
  ```bash
  ./my_test --gtest_also_run_disabled_tests
  ```
- **Run tests matching filter:**
  ```bash
  ./my_test --gtest_filter=MySuite.TestName
  ```

---

## Related Documentation & Resources

- [GoogleTest Primer](overview/getting-started/product-overview) – Fundamentals of writing tests, naming, and structure.
- [Testing Reference: Macros and Registration](docs/reference/testing.md#registertest) – Details of test macros and dynamic test registration
- [FAQ: Why Am I Having Build or Integration Issues?](faq/troubleshooting-faq/build-integration-issues) – Connection to linking problems
- [FAQ: Why Should Test Suite Names and Test Names Not Contain Underscore?](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) – Naming guidelines
- [Guides: Writing Your First Test](guides/getting-started/first-cpp-test) – Step-by-step test writing

---

## Summary
When your tests aren't discovered or executed, the cause is often related to:
- Using inconsistent test macros or misspelling setup functions
- Test sources not linked properly
- Parameterized tests not instantiated
- Invalid underscores in test or suite names
- Disabled tests or unintended test filtering and sharding

Systematic verification using `--gtest_list_tests`, reviewing build setup, and careful test naming will restore complete test coverage and reliable execution.

---