---
title: "Resolving Build and Linker Errors"
description: "Addresses typical errors encountered during compilation and linking, such as unresolved symbols or incorrect test discovery. Offers actionable steps and checklist items to correct common build issues."
---

# Resolving Build and Linker Errors

This page focuses on troubleshooting common errors encountered during the compilation and linking phases when working with GoogleTest and GoogleMock. If you face issues such as unresolved symbols or problems with test discovery, this guide provides actionable steps and checklists to resolve these challenges quickly, ensuring a smooth build and test execution experience.

---

## 1. Common Build and Linker Error Scenarios

### 1.1 Unresolved Symbol Errors
When the linker reports unresolved symbols related to GoogleTest or GoogleMock, it often means the required static or shared library is missing or mismatched.

**Typical symptoms:**

- Errors referencing functions like `testing::InitGoogleTest` or `testing::RunAllTests`.
- Undefined references to GoogleMock symbols when mocking features are used.

### 1.2 Test Discovery Fails
If your test executable builds but reports no tests found, this indicates a static registration issue or the test linkage is incomplete.

**Typical symptoms:**

- Test runner runs with zero tests found.
- No output from `RUN_ALL_TESTS()` or only partial suite loading.

### 1.3 Duplicate Symbols or Link Conflicts
Occur when multiple versions of GoogleTest or GoogleMock are linked together or static/shared library incompatibilities exist.


## 2. Step-by-Step Resolution Guide

<Steps>
<Step title="Confirm Proper Linking of GoogleTest or GoogleMock Libraries">
Ensure your build system links against the correct GoogleTest and GoogleMock libraries.

- Link to `gtest_main` or `gtest` for pure testing functionality.
- If using mocking features, link additionally with `gmock` or `gmock_main`.
- Verify library paths match the built versions.
- For CMake, use targets like `GTest::gtest` and `GTest::gmock_main` if installed system-wide.

Example linking for gMock in CMake:
```cmake
target_link_libraries(your_test_target PRIVATE gmock_main)
```

Success Criteria: No linker errors related to GoogleTest/GoogleMock symbols.
</Step>

<Step title="Check Compiler and Linker Flags">
- Confirm the compiler uses at least C++17 standard (`-std=c++17` or equivalent).
- When building on platforms needing pthread, ensure `-pthread` is passed to both compiler and linker.
- Verify that the threaded build macros (`DGTEST_HAS_PTHREAD=1`) are correctly defined if necessary.

Success Criteria: Compiler and linker flags match GoogleTest/GoogleMock build requirements.
</Step>

<Step title="Ensure Single Version of GoogleTest and GoogleMock">
Multiple versions of GoogleTest/GoogleMock in your include or lib path cause symbol duplicates or mismatches.

- Search for conflicting includes and libs in your project dependencies.
- Remove or unify all usages to one consistent version.

Success Criteria: Build completes without duplicate or conflicting symbol errors.
</Step>

<Step title="Validate Test Macro Usage and Registration">
- Confirm you use `TEST()`, `TEST_F()`, or `TEST_P()` macros correctly to register tests.
- Ensure all test suites are linked into the final executable to allow static registration.
- For parameterized or typed tests, ensure proper instantiation macros are called.

Success Criteria: Tests appear and run when invoking the test binary.
</Step>

<Step title="Check for Missing or Incorrect main() Implementation">
- Use the `gtest_main` or `gmock_main` libraries to get a standard `main()` 
- If a custom `main()` is used, verify that it calls `::testing::InitGoogleTest()` with `argc` and `argv`, then returns `RUN_ALL_TESTS()`.

Example:
```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Success Criteria: Test executable launches and executes tests as expected.
</Step>

<Step title="Configure Test Discovery Flags">
- Use `--gtest_filter` to confirm filtering is not excluding tests unintentionally.
- Check environment variables or build settings are not interfering.

Success Criteria: Tests are discovered and run as intended.
</Step>

</Steps>


## 3. Quick Checklist for Troubleshooting

- [ ] Are you linking against the right combination of libraries (`gtest`, `gtest_main`, `gmock`, `gmock_main`)?
- [ ] Are compiler and linker flags including necessary standards and pthread support?
- [ ] Have you avoided linking multiple versions of the framework?
- [ ] Are your test cases defined with proper macros and instantiated correctly?
- [ ] Does your `main()` function initialize GoogleTest properly?
- [ ] Is your test filter configuration allowing tests to run?


## 4. Platform-Specific Tips

### Linux/macOS:
- Ensure `-pthread` is included for multi-threaded tests to avoid linker errors.
- Use CMake's `find_package(GTest REQUIRED)` and link targets for consistency.

### Windows:
- Match runtime libraries (dynamic or static CRT) between GoogleTest and your project to prevent `LNK2038` runtime library mismatches.
- Use Visual Studio solutions or CMake targets carefully to avoid conflicts.


## 5. Common Error Messages Explained

### "undefined reference to `testing::InitGoogleTest...`"
Means linker cannot find GoogleTest symbols: check linking step.

### "no tests found" or "0 tests run"
Indicates test registration missing or static linking issues; verify test macro usage and linkage.

### "duplicate symbol" or "multiple definitions"
Caused by multiple library versions or incorrect static/shared library mixing.


## 6. Practical Examples

### CMake Example for GoogleTest + GoogleMock
```cmake
find_package(GTest REQUIRED)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests PRIVATE GTest::gtest_main GTest::gmock)

include(GoogleTest)
gtest_discover_tests(my_tests)
```
This configuration ensures both GoogleTest and GoogleMock are linked appropriately, and tests are auto-discovered.

### Manual `main()` for Custom Initialization
```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  // Custom setup here
  return RUN_ALL_TESTS();
}
```
Make sure this is included if not linking against `gtest_main` or `gmock_main`.


## 7. Troubleshooting Tips

- **Build Verbosity:** Increase build verbosity to check actual linker commands and libraries.
- **Clean Builds:** Remove all cached build artifacts when changing library linkage to avoid stale object files.
- **Symbol Inspection:** Use `nm` or `dumpbin` to verify symbols in your built libraries.
- **Version Consistency:** Confirm the include directory headers and linked library versions come from the same GoogleTest release.


## 8. When to Get Further Help

If after verifying the above you still face build or linkage errors:

- Review the [GoogleTest Primer](primer.md) for setup basics.
- Consult the [Generic Build Instructions](googletest/README.md) for build environment setup.
- Explore related [Troubleshooting & Common Issues](faq/troubleshooting-faq/faq-link-build-issues) FAQs.
- Reach out on community forums linked in [Community-Created Documentation](community_created_documentation.md).


---

## Related Topics & Links

- [GoogleTest Primer](primer.md) — Getting started with writing tests
- [Installing GoogleTest](getting-started/setup-overview/installation.md) — Setup and installation guides
- [Integration & Ecosystem](overview/features-integration/integration-ecosystem.md) — How to integrate GoogleTest into your build system
- [Mocking Reference](reference/mocking.md) — Details on GoogleMock mock creation and usage
- [Building Custom `main()` Functions](primer.md#writing-the-main-function) — Guide on writing your own test runner
- [Common Setup Issues & Solutions](getting-started/troubleshooting-and-validation/common-issues.md) — Broader troubleshooting advice

---

By following these focused steps and tips, you will resolve typical build and linker errors with GoogleTest and GoogleMock, enabling efficient test development and execution.