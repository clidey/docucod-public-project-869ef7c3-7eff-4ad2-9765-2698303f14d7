---
title: "What Are GoogleTest and GoogleMock?"
description: "Explains the purpose, key features, and differences between GoogleTest and GoogleMock. Clarifies when and why you would use each, and how they work together to enable robust C++ testing."
---

# What Are GoogleTest and GoogleMock?

GoogleTest and GoogleMock are essential components of a powerful C++ testing ecosystem designed to help developers write robust, maintainable unit tests. This page explains their purposes, key features, differences, and how they work together to enable thorough testing of C++ applications.

---

## Understanding GoogleTest

GoogleTest is Google's C++ testing framework built on the xUnit architecture. It provides the foundation for writing, organizing, and running tests for C++ code with rich assertion capabilities and automated test discovery.

### Key Features of GoogleTest

- Organizes tests into test cases and test suites.
- Provides a wide range of assertions (e.g., equality, exceptions, floating-point comparisons).
- Supports fixtures for shared setup and teardown.
- Enables parameterized and typed tests to cover multiple scenarios efficiently.
- Automatically discovers and runs tests without explicit registration.
- Integrates with GoogleMock for seamless mocking capabilities.

GoogleTest focuses on verifying the *state* of your code after execution, validating the behavior by asserting expected results.

## What Is GoogleMock?

GoogleMock is an extension of GoogleTest that brings mocking capabilities to C++ testing. It allows you to create mock objects — substitutes that mimic the behavior of real objects with configurable expectations — to precisely control and verify interactions between components.

### Key Features of GoogleMock

- Provides a declarative syntax (`MOCK_METHOD`, `EXPECT_CALL`) for generating mock classes and setting expectations.
- Supports mocking of virtual and non-virtual methods (the latter for high-performance dependency injection).
- Enables verification of calls: how many times a method was called, with what arguments, and in what order.
- Rich set of argument matchers and actions to express complex test behavior.
- Supports controlling mock strictness with `NiceMock`, `NaggyMock`, and `StrictMock` wrappers.
- Allows specifying call order and cardinalities using `Sequence`, `.InSequence()`, `.After()`, and `.Times()` clauses.
- Supports default behaviors with `ON_CALL()` and detailed control over mock method responses.
- Compatible with move-only types (`std::unique_ptr`), overloaded methods, and template classes.

GoogleMock shifts the testing focus toward *interaction-based testing*, ensuring that your code interacts with its dependencies as expected.

## How GoogleTest and GoogleMock Work Together

GoogleMock integrates seamlessly with GoogleTest, leveraging its powerful test framework and assertion libraries. You use GoogleMock to create mock classes and set expectations on method calls, and GoogleTest runs your tests and reports results. This combination allows you to write precise, maintainable tests that check both *state* and *behavior*.

For example, in a GoogleTest test:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::Return;

class MockFoo {
 public:
  MOCK_METHOD(int, GetData, (), ());
};

TEST(FooTest, ReturnsExpectedData) {
  MockFoo mock;
  EXPECT_CALL(mock, GetData()).WillOnce(Return(42));

  int result = mock.GetData();
  EXPECT_EQ(result, 42);
}
```

This test harnesses GoogleMock’s ability to mock method `GetData()` and GoogleTest’s assertion `EXPECT_EQ` for result validation.

## Differences Between GoogleTest and GoogleMock

| Aspect                     | GoogleTest                             | GoogleMock                              |
|----------------------------|--------------------------------------|----------------------------------------|
| Primary Focus              | State verification through assertions| Interaction verification through mocks |
| Usage                     | Write tests using assertions          | Create mock objects and set expectations |
| Main Components            | Assertions, test fixtures, test runners | Mock classes, matchers, actions, expectations |
| Method Mocking             | Not applicable                       | Enables mocking virtual/non-virtual methods |
| Behavioral Control         | Limited behavioral control on mocks  | Full control on mock method behaviors  |

## Why Use Each?

- **GoogleTest** is your go-to framework for writing test cases that validate the correctness of your code through assertions on expected outputs, values, and side effects.
- **GoogleMock** complements this by allowing you to isolate the unit under test and verify its interaction patterns with collaborators, useful when the actual behavior depends on other components or external systems.

Together, they ensure comprehensive testing: GoogleTest verifies outcomes, and GoogleMock verifies interactions.

## How They Work Together in Practice

1. **Define Interfaces or Classes to Mock:** Define abstract interfaces or concrete classes with virtual methods.
2. **Create Mock Classes:** Use `MOCK_METHOD` macros in derived mock classes to declare mock methods.
3. **Set Default Behaviors:** Use `ON_CALL()` to specify default mock method behaviors.
4. **Set Expectations:** Use `EXPECT_CALL()` to set expectations on the number, order, and arguments of method invocations.
5. **Exercise the Code:** Run your system or unit code under test which uses the mocks.
6. **Verification:** GoogleMock automatically verifies that all expectations are met when mock objects go out of scope or when explicitly verified.
7. **Use GoogleTest Assertions:** Assert results from your unit under test alongside interactions.

## Practical Tips

- Use GoogleTest to check correct return values or state changes.
- Use GoogleMock to verify that collaborators received the expected calls.
- Prefer `ON_CALL` for setting defaults and `EXPECT_CALL` for strict expectations.
- Use argument matchers to flexibly specify argument constraints.
- Employ `Sequence`, `.InSequence()`, and `.After()` for controlling call orders.
- Use `NiceMock`, `NaggyMock`, or `StrictMock` classes to adjust the strictness of warnings and failures on uninteresting calls.

## Common Usage Scenario

Imagine testing a `Database` interface. You:

- Mock the `Database` interface with `MockDatabase`.
- `EXPECT_CALL(mock_db, Connect()).Times(1).WillOnce(Return(true));`
- Call code-under-test that uses `Database*` pointing to `mock_db`.
- Upon test completion, GoogleMock verifies that `Connect()` was called exactly once.

## Summary

GoogleTest and GoogleMock form a comprehensive testing duo:

- GoogleTest provides a robust framework for writing and running unit tests.
- GoogleMock extends this framework with powerful mocking capabilities for interaction-based tests.
- Use GoogleTest to validate state, output, and side effects.
- Use GoogleMock to validate the interactions and collaborations of your components.

Together, they unlock the full potential for effective, maintainable, and scalable testing in C++ projects.

---

## Further Reading and Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly introduction to GoogleMock.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Detailed API and usage.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html): Quick syntax reference.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Practical recipes.
- [Nice, Naggy, and Strict Mocks](https://google.github.io/googletest/api/gmock_nice_strict.html): Controlling mock strictness.
- [Understanding Expectation and Cardinality](https://google.github.io/googletest/reference/mocking-framework/expectations-and-cardinality.html): Deep dive on call count and order.

---

## Related Documentation Sections

- [Mock Methods Reference](reference/mocking-framework/mock-methods.md)
- [Expectations and Cardinality](reference/mocking-framework/expectations-and-cardinality.md)
- [Nice, Naggy, and Strict Mocks](reference/mocking-framework/nice-strict-mocks.md)
- [Defining and Using Mock Classes Guide](guides/mocking-techniques/defining-mocks.md)

<Info>
Use GoogleTest and GoogleMock together to achieve comprehensive C++ testing.
GoogleTest validates test outcomes; GoogleMock enables detailed interaction verification through mocks.
Explore the Guides and References for practical implementation recipes.
</Info>

---

## Troubleshooting Tips

- Ensure methods to mock are `virtual` for GoogleMock to work as expected.
- Use `ON_CALL` for common default behaviors and `EXPECT_CALL` to enforce call order, count, and argument expectations.
- Adjust mock strictness with `NiceMock`, `NaggyMock`, or `StrictMock` wrappers as needed.
- Use the flag `--gmock_verbose=info` to obtain detailed logs of mock function calls and their matching expectations.
- When mocking move-only types, prefer lambdas or custom actions for returns.
- Confirm base class destructors are virtual to avoid heap check errors when deleting mocks.

<Tip>
Always place `MOCK_METHOD` declarations in the `public` section of your mock class, even if mocking protected or private methods, to ensure accessibility from test code.
</Tip>

---