---
title: "Troubleshooting Failed and Skipped Tests"
description: "Provides guidance on interpreting test failures, resolving common mistakes, and understanding why tests may be skipped. Offers actionable steps to debug and successfully run your first tests."
---

# Troubleshooting Failed and Skipped Tests

This guide helps you diagnose, understand, and resolve issues when your GoogleTest or GoogleMock tests fail or are skipped. It walks you through common reasons for test failures, actionable steps to interpret error messages, and practical tips to get your first tests running successfully.

---

## 1. Understanding Why Tests Fail

When you run your tests with GoogleTest and GoogleMock and see test failures, it's vital to understand the cause quickly to fix the problem efficiently. Here are the main reasons your tests might fail:

- **Assertion Failures:** Your test code contains assertions (`EXPECT_*` or `ASSERT_*`) that did not hold true.
- **Mock Expectation Violations:** Calls on mock objects did not match the expected calls set with `EXPECT_CALL`.
- **Setup or Initialization Errors:** Problems in the test environment or fixture setup.
- **Exception or Crash:** The test crashed due to runtime errors, invalid memory access, or uncaught exceptions.

### How to Interpret Failure Messages

GoogleTest prints detailed error messages when assertions or mock expectations fail. A typical failure report includes:

- The file and line number where the failure happened.
- The expression or expectation that failed.
- Actual versus expected values or call counts.
- A stack trace if enabled.

For example, a mock expectation failure might look like:

```text
path/to/my_test.cc:119: Failure
Actual function call count doesn't match this expectation:
  Actually: never called;
  Expected: called at least once.
``` 

This means your code never invoked the mock method that your test expected to be called at least once.

### Debugging Tips

- Ensure `EXPECT_CALL` statements appear **before** the code exercising the mocks.
- Run tests with the flag `--gmock_verbose=info` to see detailed traces of mock calls and their matches.
- Use breakpoints or print statements around failing tests to understand the flow.
- Confirm that your mock objects are destroyed properly to trigger verification.

<Info>
Running tests with `--gmock_verbose=info` amplifies messages for expectations and actual calls, giving you X-ray vision into mock behavior and easing diagnosis.
</Info>

---

## 2. Why Are Tests Being Skipped?

GoogleTest may skip tests for several reasons. Common scenarios include:

- Disabled Tests: Tests marked with `TEST(DISABLED_TestName, ...)` or `GTEST_SKIP()` in their body.
- Missing Prerequisites: Tests requiring features or dependencies not present in the test environment.
- Filter or Command-Line Flags: Tests excluded by the `--gtest_filter` flag.

To resolve skipped tests:

- Remove or rename disabled tests by dropping the `DISABLED_` prefix.
- Verify environment setup matches test prerequisites.
- Check your test filters and run without filters to see all tests.

---

## 3. Common Failure Scenarios and Resolutions

<AccordionGroup title="Common Failure Scenarios and Resolutions">
<Accordion title="Mock Expectations Not Met">
When mock method calls do not meet the expectations:
- Ensure all expected calls are made.
- Calls must match specified argument matchers.
- Calls must respect cardinalities (`Times()`, `AtLeast()`, etc.).

**Example:**

```cpp
EXPECT_CALL(turtle, PenDown()).Times(1);
// PenDown() must be called exactly once.
```

If the call is missing or called more times, a failure occurs.

**Troubleshooting:**
- Confirm the order of `EXPECT_CALL`s.
- Run with `--gmock_verbose=info` to see call matching details.
- Check if mock objects are leaked or persist longer than expected, delaying verification.
</Accordion>
<Accordion title="Uninteresting Mock Function Calls (Warnings)">
When mock methods are called with no matching `EXPECT_CALL`, gMock prints:

```text
Uninteresting mock function call encountered - default action taken...
```

- This is a warning, not a failure.
- To suppress, use `NiceMock<MockClass>` for that mock.
- Alternatively, add `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` to explicitly allow all calls on that method.

**Note:** This helps you catch missing expectations but can be noisy during development.
</Accordion>
<Accordion title="Unexpected Calls to Mocks">
An unexpected call is when a method with expectations set is called with unmatched arguments.

**Example:**

```cpp
EXPECT_CALL(mock, Foo(5));
mock.Foo(7);  // Unexpected call triggers failure.
```

- Ensure your argument matchers accurately reflect allowed values.
- Add a catch-all `EXPECT_CALL` with `Times(AnyNumber())` if other arguments should be allowed.
</Accordion>
<Accordion title="Tests Crashing or Ordering Issues">
- If tests crash unexpectedly, check for null pointer dereferences or invalid memory usage within the test or mocks.
- If using sequences (`InSequence`) or ordering constraints (`After()`), verify calls happen in the required order.
- For flaky tests, consider isolating side effects or increasing verbosity to understand timing issues.
</Accordion>
</AccordionGroup>

---

## 4. Step-by-Step Guidance to Debug Your First Test

<Steps>
<Step title="Check Test Definition and Setup">
Confirm test uses `TEST` or `TEST_F` macros correctly and fixture setup does not throw or leak.
</Step>
<Step title="Verify Proper Mock Setup">
Make sure mocks are constructed, and all `EXPECT_CALL`s occur before code under test runs.
</Step>
<Step title="Run With Verbose Logging">
Execute your test binary with `--gmock_verbose=info` to see detailed information on mock invocation and expectation matches.
</Step>
<Step title="Analyze Failure Output">
Read error messages carefully; identify missing calls or incorrect arguments.
</Step>
<Step title="Add Catch-All Expectations or Use NiceMock">
If you get unwanted warnings about uninteresting calls, add catch-all expectations or switch to `NiceMock`.
</Step>
<Step title="Confirm Mock Object Lifetime">
Ensure that mocks are destructed at the end of the test to trigger automatic expectation verification.
</Step>
<Step title="Iterate and Refine">
Adjust expectations or test logic as necessary, rerun, and verify until tests pass reliably.
</Step>
</Steps>

---

## 5. Best Practices for Avoiding Test Failures

- **Set expectations before exercising mocks.** Calling mocks before `EXPECT_CALL` leads to undefined behavior.
- **Use matchers appropriately.** Overly strict matchers cause brittle tests; avoid matching arguments you don't care about.
- **Leverage `NiceMock` or `StrictMock` wisely.** Use `NiceMock` to suppress uninteresting call warnings during development, `StrictMock` when you want strict call discipline.
- **Utilize sequences and ordering constraints only when necessary.** Over-constraining calls can cause flaky tests.
- **Verify mock lifetimes.** Avoid leaks by deallocating mocks properly or explicitly verify before test completion with `Mock::VerifyAndClearExpectations()`.
- **Suppress warnings with catch-all expectations if intentional.** For example:

```cpp
EXPECT_CALL(mock, SomeMethod(_)).Times(AnyNumber());
```

- **Use verbose flags** during test development to understand mock behavior fully.

---

## 6. Troubleshooting Checklist

<AccordionGroup title="Troubleshooting Checklist for Failed and Skipped Tests">
<Accordion title="Basic Checks">
- Are your mock objects created and destroyed properly?
- Did you put `EXPECT_CALL` before the code that invokes mock methods?
- Is your test framework initialized correctly with `InitGoogleMock` or `InitGoogleTest`?
- Are your tests filtered or disabled unintentionally?
</Accordion>
<Accordion title="Mock Expectation Failures">
- Do call arguments match expectation matchers?
- Have you saturated call counts (`Times`)?
- Are calls ordered if sequences or `InSequence` are used?
- Are multiple overlapping expectations interfering?
</Accordion>
<Accordion title="Handling Uninteresting and Unexpected Calls">
- Use `NiceMock` to suppress uninteresting call warnings.
- Add catch-all expectations with `Times(AnyNumber())` where appropriate.
- For strict checking, use `StrictMock`.
- Run with `--gmock_verbose=info` to get detailed diagnostics.
</Accordion>
<Accordion title="Skipped Tests">
- Remove `DISABLED_` prefix from test names.
- Check for calls to `GTEST_SKIP()` in test bodies.
- Verify environment and dependencies are available.
- Adjust `--gtest_filter` flags.
</Accordion>
</AccordionGroup>

---

## 7. Where to Go Next

- Consult the [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for a comprehensive introduction to mocking with GoogleMock.
- Read the [Getting Started: Writing and Running Your First Test](getting-started/quickstart-validation/hello-test) to validate your setup and test workflow.
- Review the [Structure and Usage of Assertions](guides/getting-started/common-assertions) to write effective verification checks.
- Explore the [gMock Cookbook](docs/gmock_cook_book.md) for detailed recipes on mocking techniques and troubleshooting.
- Check out the [Mocking Reference](docs/reference/mocking.md) to understand macros like `EXPECT_CALL` and `MOCK_METHOD` in detail.
- Visit the [Troubleshooting Setup Problems](getting-started/troubleshooting-faq/setup-troubleshooting) guide for build and environment issues.

---

<Tip>
Testing is an iterative process. Use detailed verbose output and systematic troubleshooting to quickly isolate and fix the causes of test failures or skipped tests, unlocking the full power of GoogleTest and GoogleMock.
</Tip>

---

###### Additional Resources

- [GoogleTest Primer](docs/primer.md)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [Nice, Naggy, and Strict Mocks](api-reference/mocking-framework/nice-strict-mocks.md)
- [gmock_main.cc](googlemock/src/gmock_main.cc) â€” The main test entry implementation

---

_This documentation is part of the GoogleTest suite by Google and maintained in the [googletest GitHub repository](https://github.com/google/googletest)._

