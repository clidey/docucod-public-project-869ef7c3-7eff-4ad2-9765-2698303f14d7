---
title: "My Tests Won’t Run or Are Not Discovered"
description: "Troubleshooting steps when tests do not run or are not detected, covering common errors like incorrect macros, naming conventions, or misconfigurations. Includes tips on test filtering and discovery."
---

# FAQ: My Tests Won’t Run or Are Not Discovered

When you encounter issues where your GoogleTest tests do not run or are not detected by the test runner, this guide walks you through common causes, troubleshooting steps, and practical advice to get your tests executing as expected.

---

## 1. Common Reasons Tests Are Not Discovered or Run

### a. Incorrect Macro Usage

GoogleTest uses specific macros to define tests. Misusing the wrong macro or incorrect syntax can cause tests to be undetectable.

- **TEST and TEST_F macros:**
  - Use `TEST(TestSuiteName, TestName)` for basic tests.
  - Use `TEST_F(TestFixtureName, TestName)` for tests that rely on fixtures.
  - Both `TestSuiteName` and `TestName` must be valid C++ identifiers **without underscores (`_`)**.
  - Underscores in test or test suite names can break test discovery (see next section).

**Example:**
```cpp
TEST(MathTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

class QueueTest : public testing::Test {
protected:
  void SetUp() override { /* setup code */ }
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_TRUE(queue_.empty());
}
```

### b. Test and Test Suite Naming Conventions

GoogleTest reserves underscores (`_`) for internal naming patterns. Tests or suites containing underscores in their names are not supported and may cause tests to be ignored.

- Avoid underscores in test suite and test names.
- Names should start with a letter and contain only alphanumeric characters.

See [GoogleTest FAQ - Why should test suite names and test names not contain underscore?](https://github.com/google/googletest/blob/main/docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for in-depth reasoning.

### c. Disabled Tests

Tests prefixed with `DISABLED_` in either the test suite or test name will **not** run by default.

- To run disabled tests, launch your test binary with `--gtest_also_run_disabled_tests` flag.

### d. Improper Fixture Setup

- When using `TEST_F`, the fixture class must be properly defined.
- The fixture must have a default constructor accessible to GoogleTest.
- Misspelling `SetUp()` as `Setup()` will result in test fixtures not initializing correctly, hindering tests.

### e. Missing Test Instantiation for Parameterized Tests

- `TEST_P` tests must be paired with `INSTANTIATE_TEST_SUITE_P`.
- Without instantiation, tests are declared but not run.
- If intentional, suppress warning with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(FixtureName);`

### f. Build and Link Issues

- Ensure the test source files are compiled and linked into your test binary.
- GoogleTest discovers tests **only** in linked binaries.
- Run `--gtest_list_tests` to verify what tests are discovered.

---

## 2. Troubleshooting Steps

### Step 1: Verify Test Macros and Naming

- Check all test definitions use `TEST`, `TEST_F`, or `TEST_P` macros correctly.
- Remove underscores from test suite and test names.

### Step 2: Run Test Binary with Listing Flag

Run this command:

```bash
./your_test_binary --gtest_list_tests
```

- This lists all detected tests.
- If your tests are missing, double-check compilation and linking.

### Step 3: Check for Disabled Tests

- Confirm tests don’t have `DISABLED_` prefix.
- Run with:

```bash
./your_test_binary --gtest_also_run_disabled_tests
```

### Step 4: Ensure Parameterized Tests are Instantiated

For parameterized tests declared with `TEST_P`:

- Confirm matching `INSTANTIATE_TEST_SUITE_P` macro is present for the suite.
- Example:

```cpp
INSTANTIATE_TEST_SUITE_P(ExampleInstantiation, MyParamSuite, testing::Values(1, 2, 3));
```

### Step 5: Check Fixture Implementations

- Confirm `SetUp()` and `TearDown()` are correctly spelled.
- Confirm default constructor exists.
- Fix any compilation errors preventing fixture construction.

### Step 6: Confirm Test Binary Build

- Rebuild your test target ensuring the source files containing your test definitions are included.
- Use verbose build commands to confirm.

---

## 3. Additional Tips and Best Practices

- Use descriptive but simple test and suite names without underscores.
- Utilize `--gtest_filter` to run specific tests, e.g. `--gtest_filter=MySuite.MyTest`
- Use `GTEST_SKIP()` within tests to skip tests at runtime with a clear message.
- Prefer `EXPECT_` macros over `ASSERT_` when you want multiple assertions in a test to execute, aiding failure discovery.
- Use `SCOPED_TRACE()` to add trace context in shared test logic helping identify which invocation caused failure.

---

## 4. Common Failure Scenarios

### Tests Not Found in Listing

- Causes: Build missed test files, misspelled test macros, underscores in names.
- Fix: Correct naming, verify build system includes the source files.

### Tests Not Running Despite Being Listed

- Causes: Disabled prefix, filtering excludes them, parameterized tests not instantiated.
- Fix: Remove `DISABLED_`, activate `--gtest_also_run_disabled_tests`, add `INSTANTIATE_TEST_SUITE_P`.

### Test Fixture Errors

- Ensure fixture classes have accessible default constructors.
- Correct spelling errors in lifecycle functions (`SetUp`, `TearDown`).

### Test Filtering Unexpectedly Excludes Tests

- Validate your filter syntax. Filters match full test names: `TestSuiteName.TestName`.
- Negative patterns (after `-`) exclude tests.

---

## 5. Example: Correct Parameterized Test Setup

```cpp
class MyParamTest : public testing::TestWithParam<int> {};

TEST_P(MyParamTest, HandlesValues) {
  int param = GetParam();
  EXPECT_GT(param, 0);
}

INSTANTIATE_TEST_SUITE_P(MyParams, MyParamTest, testing::Values(1, 2, 3));
```

Without the `INSTANTIATE_TEST_SUITE_P` line, the test suite will be declared but effectively ignored at runtime.

---

## 6. Summary Checklist Before Running Tests

- [ ] Test macros (`TEST`, `TEST_F`, `TEST_P`) used correctly?
- [ ] No underscores in test names?
- [ ] Disabled tests are intended or should be enabled?
- [ ] Parameterized tests instantiated?
- [ ] Test source files built and linked?
- [ ] Actual test binary run with listing or filtering flags?

---

## 7. Where to Get More Help

- Check the GoogleTest FAQ: [My Tests Won’t Run or Are Not Discovered](https://github.com/google/googletest/blob/main/docs/faq.md#my-tests-wont-run-or-are-not-discovered)
- Review the [Testing Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md) for correct macro usage.
- Consult the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for test basics.
- Use the `--help` flag on your test binaries to explore available runtime options.

<Tip>
Consistently using the correct test macros and following naming conventions is critical to smooth test discovery. Leveraging the `--gtest_list_tests` flag early in diagnosis reveals exactly which tests your binary exposes.
</Tip>

<Tip>
Parameterizing tests is powerful, but be sure your parameterized test suites are instantiated, or your test framework will silently skip them.
</Tip>

---

For detailed usage, examples, and deeper understanding, see:

- [GoogleTest Primer](../primer.md)
- [Testing Reference (Macros and API)](../reference/testing.md)
- [FAQ - Naming Conventions and Test Discovery](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Advanced Topics - Parameterized Tests](../advanced.md#value-parameterized-tests)

---

*Documentation generated based on official GoogleTest sources and FAQs.*
