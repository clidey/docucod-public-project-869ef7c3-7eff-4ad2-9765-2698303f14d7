---
title: "Writing and Running Tests"
description: "Answers to common questions about authoring, organizing, and executing unit tests with GoogleTest and GoogleMock. Includes troubleshooting failed or unrecognized tests, test discovery, and managing test output."
---

# Writing and Running Tests FAQ

This FAQ addresses common questions and issues faced when authoring, organizing, and executing unit tests using GoogleTest and GoogleMock. It covers test creation, test suite management, running tests, troubleshooting test recognition and failures, test discovery, and handling test output.

---

## 1. Writing Tests: Authoring and Organizing

### How do I define a simple unit test?
Use the `TEST` macro to define a basic test:

```cpp
TEST(MyTestSuite, SimpleTest) {
  EXPECT_EQ(1, 1);
}
```
The first argument is the test suite name grouping related tests; the second is the test name.

### How do I write tests sharing the same setup?
Create a test fixture by deriving from `testing::Test`, then use `TEST_F` macro:

```cpp
class MyFixture : public testing::Test {
 protected:
  void SetUp() override {
    // Initialization
  }
  void TearDown() override {
    // Cleanup
  }
};

TEST_F(MyFixture, Test1) {
  // Use common setup
}
```
Each test runs with a fresh fixture instance, ensuring isolation.

### What are value-parameterized tests and how do I use them?
Value-parameterized tests allow running the same test logic over multiple inputs. Define the fixture inheriting from `testing::TestWithParam<T>`, use `TEST_P`, then instantiate with `INSTANTIATE_TEST_SUITE_P`:

```cpp
class MyParamTest : public testing::TestWithParam<int> {};

TEST_P(MyParamTest, HandlesVariousInputs) {
  int param = GetParam();
  EXPECT_GT(param, 0);
}

INSTANTIATE_TEST_SUITE_P(RangeTests, MyParamTest, testing::Values(1, 2, 3));
```

### How about type-parameterized tests?
Use `TYPED_TEST_SUITE` with a list of types and define typed tests with `TYPED_TEST`:

```cpp
template <typename T>
class MyTypedTest : public testing::Test {};

using MyTypes = testing::Types<int, double>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, TypeDependentTest) {
  TypeParam value{};
  EXPECT_TRUE(std::is_default_constructible<TypeParam>::value);
}
```

## 2. Running Tests: Execution and Discovery

### How do I run all my tests?
Call `RUN_ALL_TESTS()` in your `main` after initializing GoogleTest flags:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```
This runs all registered tests. The return code is 0 if all tests pass, 1 otherwise.

### How does GoogleTest discover tests?
Tests are automatically registered when you use `TEST`, `TEST_F`, `TEST_P`, and typed test macros. You do not need to manually list them.

### Can I run specific tests only?
Yes, use the `--gtest_filter` flag:

```
./my_test_binary --gtest_filter=MyTestSuite.TestName
```
You can use wildcards and negative filters.

### How to run disabled tests?
By default, disabled tests (named with the prefix `DISABLED_`) do not run. To run them, add the flag:

```
--gtest_also_run_disabled_tests
```

### How do I get test output in XML?
Use the flag:

```
--gtest_output=xml[:path/to/file.xml]
```
GoogleTest generates an XML report that can be integrated with CI systems.

## 3. Troubleshooting Tests

### Why are my tests not recognized or run?
Check the following:
- You must include `#include <gtest/gtest.h>`.
- Use supported macros (`TEST`, `TEST_F`, `TEST_P`, etc.) to define tests.
- Ensure your test names and suite names are valid C++ identifiers without underscores.
- Verify your test source files are compiled and linked into the test binary.
- Confirm that you have called `InitGoogleTest()` before `RUN_ALL_TESTS()`.

### What causes test failures not showing detailed messages?
Ensure you are streaming failure messages in assertions with `<<` for context:

```cpp
EXPECT_EQ(x, y) << "Expected equal values but got different ones.";
```

### How can I debug flaky or failing tests?
- Use `--gtest_repeat=N` to rerun tests multiple times.
- Use `--gtest_break_on_failure` to trigger debugger on failure.
- Use `SCOPED_TRACE()` to add context traces to failures.

### How do I handle test failures in setup or teardown?
Failures in `SetUp()`, `TearDown()`, `SetUpTestSuite()`, or `TearDownTestSuite()` cause the individual test or the entire test suite to skip or fail accordingly. Use `GTEST_SKIP()` to skip tests explicitly.

### How to skip tests programmatically?
Call `GTEST_SKIP()` inside tests or fixtures to skip at runtime:

```cpp
TEST(MySuite, SkipTestExample) {
  if (some_condition) {
    GTEST_SKIP() << "Skip because condition met.";
  }
  // test code
}
```

### What if an assertion causes the test to abort?
`ASSERT_*` macros generate fatal failures which abort the current test function immediately. Use `EXPECT_*` for nonfatal checks that continue the test.

### I'm using parameterized tests but get failures about uninstantiated testsâ€”what's wrong?
You must instantiate all parameterized test suites with `INSTANTIATE_TEST_SUITE_P`. Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to disable failure on uninstantiated tests in some cases.

## 4. Managing Test Output

### How to customize test names for parameterized tests?
Provide a custom name generator when calling `INSTANTIATE_TEST_SUITE_P`:

```cpp
INSTANTIATE_TEST_SUITE_P(
  MyInstantiation, MyTestSuite, testing::Values(...),
  [](const testing::TestParamInfo<MyTestSuite::ParamType>& info) {
    return "TestName_" + std::to_string(info.index);
  });
```

### How to interpret test results?
GoogleTest output groups tests by suite, showing successes, failures, and skipped tests. Detailed failure messages include file names and line numbers.

### Can I modify test output format?
Use event listeners via the `testing::UnitTest` interface or customize output by writing your own listener deriving from `TestEventListener`.

## 5. Best Practices & Tips

- **Isolate tests**: Write tests that do not depend on order or shared state.
- **Use fixtures for shared data** to avoid duplication.
- **Name tests clearly** to reflect the behavior under test.
- **Provide meaningful failure messages** by streaming into assertions.
- **Run tests frequently and independently** for quick feedback.
- Enable XML output for CI integration.

## 6. Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) - Getting started guide
- [Testing Reference](reference/testing.md) - Detailed API of test macros
- [Assertions Reference](reference/assertions.md) - Testing assertion macros
- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) - For mocking related tests
- [Writing Your First C++ Test Guide](guides/core-testing-workflows/writing-basic-tests)
- [Parameterized and Typed Tests](api-reference/googletest-core-api/parameterized-and-typed-tests.md) - Advanced test techniques

---

For more examples, see the [GoogleTest Samples directory](https://github.com/google/googletest/tree/main/googletest/samples), which illustrates many use cases from basic tests to advanced features such as parameterized and type-parameterized tests, and test listeners.

---

### Troubleshooting Quick Reference

<AccordionGroup title="Common Issues & Solutions">
<Accordion title="Test Not Found or Run">
Ensure:
- Test macros used correctly (`TEST`, `TEST_F`, etc.)
- Tests included in build and linked
- `InitGoogleTest` is called before `RUN_ALL_TESTS`
- Test names are valid identifiers without underscores
</Accordion>
<Accordion title="Test Failures Without Details">
- Add custom failure messages by streaming `<<` to assertions
- Use `SCOPED_TRACE()` to add context
- Run with `--gtest_break_on_failure` to debug
</Accordion>
<Accordion title="Uninstantiated Parameterized Tests">
- Confirm use of `INSTANTIATE_TEST_SUITE_P`
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress failures if needed
</Accordion>
<Accordion title="Skipping Tests Programmatically">
- Use `GTEST_SKIP()` inside tests or fixtures
</Accordion>
</AccordionGroup>

---

### Sample Test Run Command

```bash
./my_tests --gtest_filter=MySuite.* --gtest_output=xml:report.xml
```

This runs all tests in "MySuite" and saves results in XML.

---

### Contact and Support

- Community forums and GitHub issues on [GoogleTest repo](https://github.com/google/googletest/issues)
- Refer to [Getting Help and Reporting Issues FAQ](faq/support-community-resources/getting-help-and-reporting-issues.md)

---

For full mastery, follow the workflow from writing simple tests, leveraging fixtures and parameterization, to utilizing GoogleMock for mocking. Consult advanced guides for optimal test suite scaling and CI integration.
