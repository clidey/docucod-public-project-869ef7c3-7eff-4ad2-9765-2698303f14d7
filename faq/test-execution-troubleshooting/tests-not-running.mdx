---
title: "Tests Not Running or Being Discovered"
description: "Explains why tests may not be picked up or run by the framework, including misnaming, missing registration, or faulty configurations. Offers step-by-step checks and recovery strategies, tailored to the GoogleTest discovery and runner logic."
---

# Tests Not Running or Being Discovered

GoogleTest automatically discovers and runs tests defined in your code. However, there are several reasons why some tests might not be recognized or executed as you expect. This FAQ helps you understand common causes and how to systematically diagnose and fix these problems.

---

## Common Reasons Tests Are Not Picked Up or Run

1. **Misnamed Test Suites or Test Cases**
   - GoogleTest requires test suite and test names to be valid C++ identifiers that **do not contain underscores (`_`)**. Tests with invalid names will not be registered correctly.
   - Both the test suite name and the test name must follow this rule.

2. **Missing Test Registration**
   - If you register tests programmatically, ensure that registration happens before `RUN_ALL_TESTS()` is called.
   - For `TEST` and `TEST_F` macros, registration is automatic, but the test binaries must link all the relevant test object files.

3. **Disabled Tests**
   - Tests prefixed with `DISABLED_` in their names are compiled but excluded from execution by default.
   - To include disabled tests, use the `--gtest_also_run_disabled_tests` flag.

4. **Incorrect Use of Test Macros**
   - Using `TEST_F()` requires a valid fixture class.
   - Typographical errors such as misspelling `SetUp()` (e.g., as `Setup()`), or mistyping macro arguments can prevent test execution.

5. **Test Filtering and Sharding Flags**
   - Using `--gtest_filter` flags can restrict which tests are run.
   - Sharding environment variables (`GTEST_TOTAL_SHARDS`, `GTEST_SHARD_INDEX`) control distribution of tests across machines.
   - Filters or shards that exclude certain tests will cause them not to run.

6. **Linker and Build Issues**
   - If test object files are missing from the final binary (e.g., source files with tests are not compiled or linked), those tests won’t be discovered.

7. **Test Fixture Default Constructor Missing**
   - For `TEST_F()`, the fixture class must have a default constructor accessible by GoogleTest.
   - Missing or deleted default constructors result in errors or tests not running.

---

## Step-by-Step Diagnostic Checklist

Follow these steps to diagnose why tests are not running:

### 1. Verify Test Naming

- Confirm that test suite and test names are valid C++ identifiers with no underscores (`_`).
- Make sure test suite and test names do not start or end with underscores.

> **Example:**
> ```cpp
> TEST(MySuite, MyTest) { ... }
> ```

### 2. Check Disabled Tests

- Determine if tests are disabled via a `DISABLED_` prefix.
- To run disabled tests, add the flag `--gtest_also_run_disabled_tests` when executing.

```bash
./my_test_binary --gtest_also_run_disabled_tests
```

### 3. Confirm Test Macro Usage

- Ensure `TEST` is used for simple tests.
- Use `TEST_F` only with a defined fixture class.
- For parameterized or typed tests, ensure proper macros `TEST_P` or `TYPED_TEST` are used.

### 4. Inspect Fixture Classes Used in TEST_F

- Confirm the fixture class has a default constructor.
- Make sure fixture constructors and destructors do not cause compilation or runtime errors.
- Verify `SetUp()` and `TearDown()` methods are correctly spelled and declared.

### 5. Validate Build and Linkage

- Confirm all source files containing tests are compiled and linked into the test executable.
- Use build system tooling to verify object files are part of the binary.

### 6. Review Command Line Filters and Shards

- Check if `--gtest_filter` is limiting the executed tests.
- Verify sharding environment variables, if set, are correct.
- Use `--gtest_list_tests` flag to see which tests GoogleTest finds at runtime.

```bash
./my_test_binary --gtest_list_tests
```

This displays all registered tests, so you can confirm if your test is registered.

### 7. Programmatic Registration

- If using `::testing::RegisterTest` to register tests dynamically, confirm the calls happen before `RUN_ALL_TESTS()`.

### 8. Check for Runtime Errors or Crashes

- Errors in test fixture setup or static initialization can cause tests not to run.
- Use debugger or diagnostic logs to confirm tests start executing.

---

## Additional Troubleshooting Tips

- **Spelling matters:** `SetUp()` and `TearDown()` are case-sensitive; `Setup()` or `Teardown()` will not be called.
- **Macros do not tolerate underscores:** Avoid underscores in test names to prevent internal naming conflicts.
- **Linker warnings or errors:** Can hint at missing definitions or incorrect linkage.
- **Use `--gtest_list_tests` early:** This quickly shows tests registered before attempting to run them.
- **Check test suite and test name collisions:** Tests in the same suite must conform to fixture rules.
- **For parameterized tests:** Ensure corresponding `INSTANTIATE_TEST_SUITE_P` calls exist.

---

## Example: Diagnosing Missing Test

Suppose your test `TEST(FooTest, DoesBar)` is not running:

<Steps>
  <Step title="Run with --gtest_list_tests">
  Confirm GoogleTest sees your test.

  ```bash
  ./my_test --gtest_list_tests
  ```
  If `FooTest.DoesBar` is not listed, proceed.
  </Step>

  <Step title="Check for underscores">
  Verify the test suite name `FooTest` and test name `DoesBar` contain no underscores.
  </Step>

  <Step title="Check build linkage">
  Ensure that the source file containing `FooTest` is compiled and linked.
  </Step>

  <Step title="Review fixture class">
  For `TEST_F(FooTest, DoesBar)`, confirm `FooTest` has a public default constructor.
  </Step>

  <Step title="Check disabled flag">
  Ensure the test is not named with `DISABLED_` prefix.
  </Step>

  <Step title="Check command line filters">
  Run without restrictive filters or with `--gtest_filter=*`.
  </Step>
</Steps>

---

## Common Pitfalls

| Problem | Description | Solution |
| -------- | ----------- | -------- |
| Underscores in test or suite name | Underscores cause internal naming conflicts | Rename to remove underscores |
| Misspelled `SetUp()` or `TearDown()` | Fixture setup/teardown not called | Correct spelling and use override |
| Missing fixture default ctor | Tests using `TEST_F` fail to instantiate fixture | Add a public default constructor |
| Disabled tests | Tests prefixed with `DISABLED_` won't run by default | Use `--gtest_also_run_disabled_tests` flag |
| Filtering | `--gtest_filter` may exclude tests unintentionally | Check filter values, run with `--gtest_filter=*` |
| Object files missing | Build system misses test source files | Fix build configuration to include all test files |

---

## Summary

To ensure your tests are discovered and executed:

- Use proper test naming (no underscores).
- Correctly define fixtures with required constructors.
- Avoid disabling tests unintentionally.
- Verify your build and linkage.
- Use GoogleTest flags like `--gtest_list_tests` and `--gtest_filter` to inspect test registration.
- Register tests programmatically before test execution.

Following these rules will keep your tests running reliably and visible to GoogleTest's execution engine.

---

## Related Documentation

- [GoogleTest Primer](primer.md) — Learn the basics of writing tests.
- [Running Your Tests](getting-started/first-test-run/run-tests.md) — How to run and filter tests.
- [GoogleTest FAQ](faq.md) — General questions on test writing and macros.
- [Test Macros and Fixtures Reference](api-reference/core-testing-api/test-macros-and-fixtures.md) — Technical reference for test macros.
- [Parameterized and Typed Tests](api-reference/core-testing-api/parameterized-and-typed-tests.md) — Details on complex test patterns.
- [Global Set-Up and Tear-Down](advanced.md#global-set-up-and-tear-down) — For environment setup.

---

For further assistance, consult the Troubleshooting Common Setup Issues guide or seek help on the GoogleTest community forums.
