---
title: "Installation & Setup Errors"
description: "Provides solutions for problems users may encounter while installing or initializing GoogleTest and GoogleMock, such as missing dependencies, compiler errors, or version conflicts. Includes key troubleshooting steps for CMake and Bazel workflows."
---

# Installation & Setup Errors

This page provides focused solutions for common problems you may encounter during the installation or initialization phases of GoogleTest and GoogleMock. It addresses issues such as missing dependencies, compiler errors, or version conflicts, guiding you smoothly through both CMake and Bazel workflows.

---

## 1. Overview of Installation and Setup Challenges

GoogleTest and GoogleMock require a compatible environment and correct setup to work as expected. Common issues often arise from incompatible compiler versions, missing or incorrectly configured dependencies, and misconfigured build workflows. This guide helps you anticipate, diagnose, and resolve these errors efficiently.

### Why Installation Errors Occur

- **Missing Dependencies:** GoogleTest depends on a C++17-compliant compiler and standard libraries. Build systems need to provide proper linkage, especially for threading primitives.
- **Compiler or Environment Mismatches:** GoogleTest supports multiple platforms and compilers, but your environment must meet minimum requirements and support C++17.
- **Build System Misconfiguration:** Incorrect CMake or Bazel build scripts, missing include paths, or linker errors can prevent successful build or test execution.

---

## 2. Common Setup and Installation Errors

### 2.1 Compiler Version or C++17 Support Issues

**Problem:** Compiler does not support C++17 or is incompatible.

**Cause:** GoogleTest requires a compiler with full C++17 support. Without it, compilation fails.

**Solution:**
- Verify your compiler version supports C++17 (e.g., GCC >= 7, Clang >= 5, MSVC >= 2017 Update 3).
- Configure your build system to explicitly use C++17. For CMake, use:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- For Bazel builds, ensure your `.bazelrc` or build targets enable C++17.

---

### 2.2 Missing pthread or Threading Support

**Problem:** Linking or runtime errors about missing pthread or threading primitives.

**Cause:** GoogleTest requires pthread or platform-specific threading support. Some platforms or build environments disable or misconfigure threading.

**Solution:**
- For CMake, ensure Threads package is found and linked:

```cmake
find_package(Threads REQUIRED)
target_link_libraries(your_target Threads::Threads)
```

- If you're on Windows with MinGW, pthread support is known problematic; GoogleTest uses native Windows threading instead.
- You can force enabling/disabling pthread detection using compiler flags:

```
-DGTEST_HAS_PTHREAD=1 // enable
-DGTEST_HAS_PTHREAD=0 // disable
```

- Confirm your build is passing the appropriate flags.

---

### 2.3 Linker Errors (Undefined References)

**Problem:** Linker fails with undefined symbols for GoogleTest or GoogleMock symbols.

**Cause:** Your test target is not linking properly against the GoogleTest or GoogleMock libraries.

**Solution:**
- Ensure that test executables link to the correct libraries (`gtest`, `gtest_main`, `gmock`, `gmock_main`), e.g., in CMake:

```cmake
target_link_libraries(your_test_target gtest_main gmock)
```

- When building only GoogleTest, do not forget to link its dependencies properly.
- Confirm that GoogleTest and GoogleMock were successfully built beforehand.
- For Bazel, verify your `BUILD` files include appropriate `deps` entries.

---

### 2.4 Version or Symbol Conflicts

**Problem:** Runtime errors, inconsistent behavior, or compilation breaks due to version mismatches.

**Cause:** Combining mismatched versions of GoogleTest, GoogleMock, or incompatible third-party components.

**Solution:**
- Use coherent versions of GoogleTest and GoogleMock that come together in the GitHub repository.
- Avoid mixing installed system-wide libraries with locally built versions.
- Ensure submodules or dependencies are updated.

---

### 2.5 Problems with GoogleMock Initialization and Flags

**Problem:** Issues parsing GoogleMock-specific command-line flags or GoogleMock fails to initialize.

**Cause:** Command-line arguments may contain GoogleMock flags not properly parsed, or you call initialization routines incorrectly.

**Solution:**
- Use `testing::InitGoogleMock(&argc, argv);` to initialize both GoogleMock and GoogleTest. This replaces separate calls.
- When handling command-line arguments, GoogleMock strips its flags transparently—ensure your code accounts for the changed argc/argv.
- Example initialization in `main()`:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Avoid calling `testing::InitGoogleTest()` separately when using GoogleMock.

---

## 3. Installation Troubleshooting Workflow

Follow this systematic approach to identify and fix installation or setup errors:

<Steps>
<Step title="Verify System Requirements">
Check that your build environment meets C++17 and compiler requirements as per [System Requirements](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/system-requirements.md).
</Step>
<Step title="Clean and Rebuild GoogleTest and GoogleMock">
Remove previous build artifacts, then rebuild ensuring the proper build configuration and flags are set.
</Step>
<Step title="Confirm Threading Support">
Verify that threading is enabled and linked properly.
Use build system options or compiler flags to enable pthread support if applicable.
</Step>
<Step title="Check Linking Flags">
Make sure your test and application targets link against the appropriate GoogleTest/GoogleMock libraries.
</Step>
<Step title="Use Verbose Outputs and Logs">
Enable verbose output in your build system (e.g., CMake’s `VERBOSE=1`) to catch detailed compiler and linker messages.
</Step>
<Step title="Try a Minimal Setup">
Create a simple test file with a canonical test case to isolate whether the problem is in your environment or your project configuration. Refer to [Verifying Your Installation](https://github.com/google/googletest/blob/main/getting-started/first-test-validation/installation-verification.md).
</Step>
</Steps>

---

## 4. Specific Notes on CMake and Bazel Workflows

### 4.1 CMake Troubleshooting Tips

- **Build GoogleTest and GoogleMock Together:** In the source directory, prefer building with the default configuration which includes GoogleMock:

```bash
cmake ..
make
```

- Explicitly disable GoogleMock if you only want GoogleTest:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

- Use target aliases and modern CMake: link to `GTest::gtest` and `GTest::gtest_main` to avoid manual include and link errors.
- If you see errors related to Visual Studio runtime mismatches, consider enabling the shared CRT with:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

- Verify your installed CMake version supports all features used (3.14+ recommended for FetchContent).

### 4.2 Bazel Troubleshooting Tips

- Check your `BUILD` files to ensure `googletest` and `googlemock` dependencies are properly declared.
- Make sure your Bazel workspace uses compatible versions of GoogleTest and GoogleMock.
- Run Bazel with verbose output for troubleshooting:

```
bazel build --verbose_failures //your/test:target
```

- Read Bazel-specific instructions in the [Setup and Configuration Guide](https://github.com/google/googletest/blob/main/guides/getting-started/setup-and-configuration.md).

---

## 5. Frequently Encountered Error Patterns and Solutions

<AccordionGroup title="Common Errors and Their Fixes">
<Accordion title="Missing pthread symbols during linking">
This occurs when pthreads are unavailable or not linked.

**Fix:** Link with threading libraries; for CMake, use `find_package(Threads REQUIRED)` and link with `Threads::Threads`.
Also ensure `-pthread` flag is enabled on GCC/Clang.
</Accordion>
<Accordion title="Undefined reference to 'testing::InitGoogleTest' or 'RUN_ALL_TESTS'">
Indicates GoogleTest libraries are not linked properly.

**Fix:** Ensure your test executable is linked against `gtest` or `gtest_main`.
</Accordion>
<Accordion title="Compiler errors about unsupported C++17 features">
Compiler is outdated or misconfigured.

**Fix:** Upgrade compiler.
Explicitly add `-std=c++17` or equivalent, and configure CMake to require C++17.
</Accordion>
<Accordion title="GoogleMock flag parsing fails or unknown flags remain in argv">
GoogleMock initialization was not called correctly.

**Fix:** Always call `testing::InitGoogleMock(&argc, argv);` instead of only `InitGoogleTest`.
</Accordion>
</AccordionGroup>

---

## 6. Practical Tips and Best Practices

- **Use Provided Main Functions:** To avoid entry point errors, link against `gtest_main` or `gmock_main` libraries that supply a proper `main()`.

- **Flag Handling:** GoogleMock flags (e.g., `--gmock_verbose`) are stripped during initialization; make sure your code upstream expects that altered `argc/argv`.

- **Keep GoogleTest and GoogleMock Together:** Build and link GoogleMock alongside GoogleTest to prevent version or symbol mismatches.

- **Enable Verbose Logging:** For build or runtime diagnostics, increase verbosity with GoogleMock’s `--gmock_verbose` flag for detailed runtime info.

- **Validate Installation with a Canonical Test:** Use minimal example tests as verification sanity checks after installation.

---

## 7. Where to Find More Help

- Review the [System Requirements](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/system-requirements.md) to ensure your environment complies.
- Consult the [Setup and Configuration](https://github.com/google/googletest/blob/main/guides/getting-started/setup-and-configuration.md) guide for in-depth CMake and Bazel instructions.
- Review the [Troubleshooting Common Setup Issues](https://github.com/google/googletest/blob/main/getting-started/configuration-troubleshooting/common-issues-troubleshooting.md) documentation for additional error cases.
- Visit the [GoogleTest GitHub repository](https://github.com/google/googletest) to file issues or find community support.

---