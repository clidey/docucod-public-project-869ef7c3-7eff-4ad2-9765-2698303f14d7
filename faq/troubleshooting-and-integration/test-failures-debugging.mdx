---
title: "Why are my tests failing or not running?"
description: "Presents common root causes of failing or missing tests—misnamed macros, fixture errors, linking problems, and more. Provides actionable debugging steps and pointers to error reporting mechanisms."
---

# Why Are My Tests Failing or Not Running?

This page addresses common reasons why your GoogleTest tests might fail to run or unexpectedly fail. It presents typical root causes such as misnamed test macros, fixture setup errors, linking problems, disabled tests, filtering misconfigurations, and issues with death tests. You will find actionable debugging steps and recommendations on how to interpret test failures and fix common pitfalls effectively.

---

## Understanding Test Failures and Non-Execution

### 1. Test Not Running Because of Naming or Macro Issues

- **Misnamed Test Macros**: Ensure your tests use GoogleTest macros correctly. Use `TEST`, `TEST_F`, `TEST_P`, or `TYPED_TEST` as appropriate for your test cases.
- **Test Fixture Class Mismatch**: All tests within the same test suite must share the same fixture class. Mixing `TEST` and `TEST_F` or differing fixture classes with the same suite name causes tests to be ignored or fail to run.
- **Disabled Tests**: Tests or test suites prefixed with `DISABLED_` will be compiled but skipped during execution. To run them, use the `--gtest_also_run_disabled_tests` flag.
  
### 2. Fixture Setup and Teardown Errors

- **Fatal Failures in Fixture Constructor**: Fatal assertions (e.g., `ASSERT_*`, `FAIL()`) inside test fixture constructors are illegal because they can't abort the constructor properly. Place such assertions in `SetUp()` methods instead.
- **Non-Fatal Failures in Setup or Teardown**: Failures in `SetUp()`, `TearDown()`, or fixture constructors/destructors may cause test failures or abnormal behavior.
- **Skipping Tests in Setup**: Using `GTEST_SKIP()` in `SetUp()` will prevent the test from running and report it as skipped.

### 3. Linking Problems and Build Integration Issues

- **Linker Errors**: Missing GoogleTest libraries, multiple main functions, or conflicting versions cause tests not to run. Refer to the [Build Integration FAQ](https://github.com/google/googletest/tree/main/faq/troubleshooting-and-integration/build-integration-faq.md) for guidance.
- **Not Linking Tests into Executable**: If your tests are in separate static libraries, ensure the linker includes them properly.

### 4. Test Filtering and Sharding Issues

- **Unintended Filters**: If using `--gtest_filter`, verify your patterns. An empty filter or overly restrictive pattern will cause all tests to be skipped.
- **Sharding Environment Variables**: GoogleTest supports running tests in shards. Misconfigured `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` can result in some tests not running on a shard.

### 5. Parameterized and Typed Test Instantiation

- **Uninstantiated Parameterized Tests**: `TEST_P` tests must be instantiated via `INSTANTIATE_TEST_SUITE_P`. Otherwise, no test cases will run, and GoogleTest prints an error.
- **Uninstantiated Typed Tests**: Similar rules apply for typed and type-parameterized tests. They must be instantiated using `TYPED_TEST_SUITE` and `INSTANTIATE_TYPED_TEST_SUITE_P`.

### 6. Death Test Failures

- **Death Test Style and Setup**: Death tests require special handling (forking processes or re-execution). Use `EXPECT_DEATH` and `ASSERT_DEATH` correctly with matching failure output patterns.
- **Return Statements in Death Tests**: Returning from a death test body causes the test to fail.
- **Death Tests with Mocks**: If using mocks in death tests, allow leaks appropriately (`Mock::AllowLeak`) to avoid false failures.

---

## Step-by-Step Debugging Workflow

### Step 1: Verify Test Discovery

- Run your test binary with `--gtest_list_tests` to check that your tests are registered and visible.
- Confirm test names and suites are exactly as expected.

### Step 2: Check Naming and Macro Usage

- Confirm all test functions use the proper macros (`TEST`, `TEST_F`, `TEST_P`, etc.)
- Make sure test suite names don't mix fixture usage.

### Step 3: Validate Fixture Setup

- Avoid fatal assertions in constructors; move to `SetUp()`.
- Check for `GTEST_SKIP()` usage that may prevent test execution.

### Step 4: Review Run-Time Flags and Filters

- Clear or correct the `--gtest_filter` patterns.
- If using sharding, verify shard environment variable settings.

### Step 5: Confirm Parameterized Test Instantiations

- Look for uninstantiated `TEST_P` or typed tests; add proper `INSTANTIATE_*` macros or suppress warnings.

### Step 6: Analyze Failure Output

- Review failure messages and stack traces included in test output.
- Use assertion macros correctly, providing informative messages.
    
### Step 7: Test Death Tests Carefully

- Use `EXPECT_DEATH`/`ASSERT_DEATH` with expected failure regex.
- Avoid illegal returns or exceptions in death test bodies.
- Check death test style flags if failures occur unexpectedly.

---

## Practical Tips and Best Practices

- **Use Streaming Messages**: Append detailed messages to assertions for easier debugging.
  ```cpp
  EXPECT_EQ(42, actual_value) << "Unexpected value during processing.";
  ```

- **Use `SCOPED_TRACE` for Context**: When calling helpers that assert, add trace messages to identify failure origins.
  ```cpp
  SCOPED_TRACE("Checking foo with param " << param);
  HelperFunction(param);
  ```

- **Avoid Mixing Test Types**: Do not define both `TEST` and `TEST_F` with the same test suite name.

- **Check Disabled Tests**: Remove or temporarily enable tests prefixed with `DISABLED_` during debugging.

- **Ensure Proper Instantiation**: Always instantiate parameterized/typed tests to avoid silent zero test runs.

- **Handle Death Tests Properly**: Understand death test environment and restrictions—set death test style appropriately.

---

## Common Error Scenarios and Solutions

<AccordionGroup title="Common Failure Reasons and How to Fix Them">
<Accordion title="Tests Not Discovered or Running">
Ensure GoogleTest initialization via `InitGoogleTest(&argc, argv);` is called before running tests.
Verify your tests are not filtered out by `--gtest_filter` or disabled unintentionally.
Check that compiled test suites are linked into the executable.
</Accordion>
<Accordion title="Failed Tests Due to Fixture Misuse">
Avoid mixing `TEST` and `TEST_F` in the same suite.
Confirm that all tests in a suite use the same fixture class.
</Accordion>
<Accordion title="Parameterization Issues">
Add `INSTANTIATE_TEST_SUITE_P` for every `TEST_P`.
For typed tests, register test suite and instantiate with `TYPED_TEST_SUITE`.
Suppress warnings for uninstantiated tests when intentional.
</Accordion>
<Accordion title="Death Test Failures">
Verify death test body triggers process termination correctly.
Match expected stderr output regex carefully.
Set `GTEST_FLAG_SET(death_test_style, "fast")` or `"threadsafe"` suitably.
Use `Mock::AllowLeak` if mocks leak in death tests.

Avoid illegal returns inside death test bodies.
</Accordion>
<Accordion title="Assertion Failures">
Use appropriate assertion macros; recall `ASSERT_*` aborts current function, `EXPECT_*` continues.
Fatal assertions inside constructors cause compilation errors or test instability.
Add custom failure messages to clarify assertion reports.
</Accordion>
<Accordion title="Build and Linking Problems">
Check linkage of GoogleTest libraries; follow [Build Integration FAQ](https://github.com/google/googletest/tree/main/faq/troubleshooting-and-integration/build-integration-faq.md).
Avoid multiple definitions of main function.
Fulfill C++17 requirements for compiler and standard library.
</Accordion>
</AccordionGroup>

---

## Error Reporting and Debugging Recommendations

- Carefully read the failure output to identify the line and message linked to the error.
- Use `--gtest_break_on_failure` flag to drop into debugger automatically on failure.
- Run with `--gtest_repeat=N` to expose flaky or intermittent failures.
- Use `--gtest_shuffle` to randomize test order and catch inter-test dependencies.
- Generate XML or JSON reports with `--gtest_output=xml:<file>` for detailed failure inspection.

---

## When to Get Help

If the issue persists after following the above steps, consult:

- The main [GoogleTest Primer and API References](https://github.com/google/googletest/tree/main/docs)
- [Common Setup and Integration Issues](https://github.com/google/googletest/tree/main/getting-started/troubleshooting-help/common-errors.md)
- [Build Integration FAQ](https://github.com/google/googletest/tree/main/faq/troubleshooting-and-integration/build-integration-faq.md)
- Community forums and mailing lists for GoogleTest.

---

## Additional Resources

- [GoogleTest Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [Writing Your First Test Guide](https://github.com/google/googletest/tree/main/guides/getting-started-testing/writing-your-first-test.md)
- [Death Test Guide](https://github.com/google/googletest/blob/main/docs/advanced.md#death-tests)
- [Parameterized Tests Guide](https://github.com/google/googletest/blob/main/guides/core-testing-workflows/parameterized-tests.md)

---

By following these diagnostics, best practices, and using GoogleTest-specific flags, you will quickly isolate the causes for failing or missing tests and improve your test reliability and execution clarity.
