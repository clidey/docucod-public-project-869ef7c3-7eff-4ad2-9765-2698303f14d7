---
title: "Why are my tests not being discovered or executed?"
description: "Practical advice for diagnosing issues where test cases are not recognized or executed by GoogleTest. Highlights registration requirements, naming conventions, test filtering/selection options, and possible build-time pitfalls, ensuring users' test coverage is complete and visible."
---

# Why are my tests not being discovered or executed?

When your GoogleTest tests are not discovered or executed, it can be frustrating and slow down your development workflow. This guide provides practical advice to diagnose and resolve common causes of such issues, ensuring your tests are registered correctly and run as expected.

---

## Understanding Test Discovery in GoogleTest

GoogleTest automatically discovers and runs tests by leveraging static registration mechanisms in the test binaries. For this to work smoothly, certain conditions around test declaration, linkage, and build configuration must be met.

### Key Points for Test Registration

- **Use Provided Macros:** Define tests using `TEST`, `TEST_F`, `TEST_P`, or `TYPED_TEST`. These macros not only declare test code but also register tests with GoogleTest's internal registry.

- **Include the Main Function:** Your test binary must incorporate a `main()` function that calls `RUN_ALL_TESTS()`. This is typically provided by linking against `gtest_main` or defining your own.

- **Link All Test Object Files:** Make sure all your object files that contain test definitions are linked into the final executable. Missing object files means tests won't be registered.

- **Static Initialization:** Test cases are registered during dynamic/static initialization time before main runs. Linking or build issues that break this can prevent registration.


## Common Reasons for Tests Not Being Discovered

### 1. Improper Test Definition or Declaration

- Forgetting to use the GoogleTest `TEST` macros.
- Defining tests in a library that is not linked into the final test binary.

### 2. Missing or Incorrect `main()`

- Not linking with `gtest_main` or missing a custom test runner main function.
- Writing a `main()` that does not call `RUN_ALL_TESTS()` properly.

### 3. Build System / Linker Issues

- Some build systems or linkers omit object files with no references (dead code elimination). Ensure tests or their containing files are referenced or force inclusion.
- Using wrong compilation units or not rebuilding after test additions.

### 4. Incorrect Naming or Access

- Test files or functions are compiled but not named using proper GoogleTest conventions.
- Using static or anonymous namespaces improperly, which might prevent linking or registration.

### 5. Filtering Tests Out Explicitly

- Using `--gtest_filter` or related flags that exclude your tests.
- Running with test environment variables or options that disable tests.

### 6. Runtime Errors During Registration

- Initializer crashes before tests register.
- Failing static assertions preventing tests from being registered.

---

## Diagnosing Unregistered Tests

### Step 1: Verify Test Macros Usage

Ensure your tests are defined with the `TEST`, `TEST_F`, `TEST_P`, or related macros. For example:

```cpp
TEST(MyTestSuite, MyTestCase) {
  EXPECT_TRUE(SomeFunction());
}
```

### Step 2: Confirm Linking of Test Object Files

Check your build system’s linkage output or configuration to confirm that the files containing tests are included in the final executable.

*Tip:* Add a dummy reference or symbol in the test file if your linker removes unused files.

### Step 3: Include or Link `gtest_main` or Define Custom Main

If you don’t have a custom main function, link against `gtest_main` which provides one:

```cmake
# For CMake
find_package(GTest REQUIRED)
target_link_libraries(mytests gtest_main)
```

Alternatively, implement explicitly:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Step 4: Run with Verbose Output

Use the `--gtest_list_tests` flag to list all discovered tests:

```bash
./my_test_binary --gtest_list_tests
```

If your test does not appear here, it was not registered.

### Step 5: Check Test Filtering Flags

Verify you are not excluding tests unintentionally. For example:

- `--gtest_filter` may exclude tests.
- Other flags like `--gtest_also_run_disabled_tests` might hide disabled tests.

### Step 6: Review for Build or Runtime Errors

Look for compiler/linker warnings or errors that might prevent tests from being included and registration from happening.

---

## Special Considerations

### Static vs Dynamic Libraries

GoogleTest's static initialization requires that test registrations happen early. When tests are in static libraries, make sure static initialization is triggered by linking those libraries explicitly and avoid linker garbage collection on them.

### Multiple Main Functions

If multiple test binaries or libraries include different `main()`s, linking conflicts can cause unexpected test runs or missing tests.

### Test Fixture Visibility

Make sure your test fixtures are accessible: avoid putting test class declarations in anonymous namespaces or marking them `static`.

---

## Example: Minimal Setup

```cpp
#include <gtest/gtest.h>

// A simple test.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, factorial(0));
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build using:

```bash
g++ -std=c++17 -isystem /path/to/gtest/include -pthread my_test.cc /path/to/libgtest.a -o my_test
```

Then run:

```bash
./my_test
```

If no tests are discovered, verify the above checklist.

---

## Troubleshooting Checklist

<AccordionGroup title="Troubleshooting Checklist">
<Accordion title="No output or zero tests run">
- Confirm test macros are used.
- Check main() includes `RUN_ALL_TESTS()`.
- Confirm test files are linked into executable.
</Accordion>
<Accordion title="Tests do not appear in --gtest_list_tests">
- Rebuild to pick up new tests.
- Ensure no build/link errors are masked.
- Avoid static anonymous namespaces for test fixtures.
</Accordion>
<Accordion title="Tests excluded from running">
- Check `--gtest_filter` usage and adjust.
- Use `--gtest_also_run_disabled_tests` to include disabled tests.
</Accordion>
<Accordion title="Linker errors or warnings">
- Make sure GoogleTest static or shared libs are linked properly.
- Use verbose linker output to confirm linking.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — foundational introduction
- [Writing and Running Tests Guide](../../guides/writing-and-running-tests/getting-started.md)
- [Troubleshooting Common Setup Issues](../../getting-started/first-tests-validation/troubleshooting.md)
- [Mocking Reference](../api-reference/mocking-matchers-actions/expectations-api.md) — for using mocks effectively
- [GoogleTest GitHub Issues](https://github.com/google/googletest/issues) — to check if your issue is known

---

<Note>
Ensure your build environment supports C++17 and matches GoogleTest’s supported platforms for consistent success.
</Note>

<Tip>
Using the `--gtest_list_tests` flag is the fastest way to verify if your tests are registered.
</Tip>

<Tip>
In complex build systems, sometimes a clean rebuild helps resolve test discovery issues caused by stale artifacts.
</Tip>

---

## Summary

GoogleTest’s test discovery relies on correct test macro usage, proper linking of test objects, and inclusion of the `RUN_ALL_TESTS()` invocation within `main()`. Common failures in any of these areas prevent tests from being discovered and executed. Verifying test registration with `--gtest_list_tests` and ensuring no test filtering exclude your tests promotes robust test execution.


---