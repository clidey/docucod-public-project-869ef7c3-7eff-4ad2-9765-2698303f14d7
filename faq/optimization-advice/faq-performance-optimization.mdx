---
title: "How can I speed up my test suite?"
description: "Tips for improving test performance, including usage of parallel test runners, disabling slow tests, using value- and type-parameterized tests efficiently, and avoiding common bottlenecks in GoogleTest usage."
---

# How can I speed up my test suite?

GoogleTest empowers you to write robust C++ tests, but as your codebase grows, the overall test suite runtime can become a bottleneck. This page provides actionable tips and best practices to improve the performance of your test suite, helping you run tests faster and more efficiently.

---

## 1. Use Parallel Test Execution

Running tests in parallel can drastically reduce total execution time. GoogleTest supports parallelization strategies that can be integrated seamlessly into your workflow.

### Test Sharding

GoogleTest allows *test sharding*, a technique to split the test suite across multiple test runners or machines. Each shard runs a subset of tests, speeding up overall test execution.

- **How to enable:** Use the environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` to divide and assign shards.

- **Example:** To run tests on 4 parallel machines,
  - Set `GTEST_TOTAL_SHARDS=4` on all runners
  - Set `GTEST_SHARD_INDEX` to 0, 1, 2, or 3 respectively.

Tests will be distributed so each shard runs roughly one quarter of the suite.

<Tip>
Leverage your CI system to configure multiple nodes running shards simultaneously to accelerate the feedback cycle.
</Tip>

### Parallel Test Runners

Many users integrate GoogleTest with test runners that support parallel execution (e.g., Bazel, CTest, or custom scripts). GoogleTest is thread-safe and built to support concurrent invocations, but individual tests should be independent (no shared mutable global state).

<Tip>
Ensure your tests avoid shared state or use proper synchronization to prevent flaky behavior when run in parallel.
</Tip>

---

## 2. Disable or Skip Slow Tests During Regular Runs

Some tests are inherently slow (integration, end-to-end, database access). These can be **disabled** or conditionally **skipped** to keep your fast feedback loop lean.

- Prefix test names with `DISABLED_` to exclude them from runs by default.
- Use the runtime `GTEST_FILTER` flag to run only subsets of tests.
- Call `GTEST_SKIP()` inside tests or fixtures to dynamically skip slow tests based on conditions (e.g., environment variables, platform).

```cpp
TEST(DatabaseTest, DISABLED_LongRunningQuery) {
  // This test will be ignored during normal runs.
}

TEST_F(MyFixture, SlowTest) {
  if (should_skip_slow_tests) {
    GTEST_SKIP() << "Skipping slow test for nightly build.";
  }
  // The actual test...
}
```

<Tip>
Use dynamic skipping when tests are sometimes needed (nightly, release validation) but can be omitted in daily development cycles.
</Tip>

---

## 3. Optimize Parameterized Tests

GoogleTestâ€™s value- and type-parameterized tests allow broad coverage with concise test code. For performance:

- Organize tests to **avoid duplication** of expensive setup in each parameter instantiation.
- Use **efficient parameter generators** like `Range()` instead of manually enumerated values for large value spaces.
- Avoid overly large Cartesian products via `Combine()` that explode the number of test cases unintentionally.

```cpp
INSTANTIATE_TEST_SUITE_P(
    SmallRange, MyTestSuite, testing::Range(0, 100));  // 100 test instances
```

<Tip>
Profile parameterized tests. If you notice slowdowns, reduce parameter space or consolidate tests when appropriate.
</Tip>

---

## 4. Use Shared Fixtures Wisely

Expensive setup and teardown can slow down your test suite significantly. GoogleTest supports *per-test-suite setup* via `SetUpTestSuite()` and `TearDownTestSuite()` static methods to share expensive resources across tests in a suite.

```cpp
class ExpensiveFixture : public ::testing::Test {
 protected:
  static void SetUpTestSuite() {
    // Open database connection, allocate large buffers, etc.
  }

  static void TearDownTestSuite() {
    // Cleanup resources
  }
};
```

This avoids repeating setup/teardown on every test, but ensure tests remain independent.

<Tip>
Avoid introducing hidden dependencies between tests when sharing fixture state.
</Tip>

---

## 5. Avoid Common Bottlenecks

### a. Minimize Test Dependencies

- Tests that depend on large or slow-to-initialize global state may drag down suite performance.
- Use mocks and stubs (`GoogleMock`) to replace costly dependencies.

### b. Avoid Long-Running External Calls

- Network, disk, or database interactions add latency.
- Replace with in-memory or mock equivalents where possible.

### c. Reuse Test Data and Avoid Duplications

- Large repeated data setups waste time.
- Load test data once in static members or fixtures.

---

## 6. Profile and Measure

Identifying bottlenecks requires measurement.

- Use GoogleTest's internal timing reports (e.g., verbose output with `--gtest_print_time` flag).
- Capture and analyze timings per test suite and test.

<Tip>
Prioritize optimizing the slowest tests or the suites with the largest cumulative runtime.
</Tip>

---

## 7. Summary: Easy Wins

| Technique                           | Impact                      |
|-----------------------------------|-----------------------------|
| Parallel test runners / sharding  | Highest speedup             |
| Disable or skip slow tests         | Reduces unnecessary load    |
| Share fixtures wisely              | Reduces repetitive setup    |
| Optimize parameterized tests      | Controls test explosion     |
| Use mocks/tags to reduce dependencies | Removes expensive calls    |

---

## Additional Resources

- [Test Discovery and Execution Patterns](/guides/getting_started/test_discovery_execution)
- [Performance and Scaling Test Suites](/guides/practical_tips_and_patterns/performance_and_scaling)
- [Value- and Type-Parameterized Tests](/guides/advanced_testing_patterns/parameterized_tests)
- [Mocking Basics and Advanced Strategies](https://google.github.io/googletest/gmock_for_dummies.html)

---

This page complements foundational and advanced testing guides by focusing on actionable ways to accelerate your test suite, ensuring quick feedback and efficient development cycles.


<AccordionGroup title="Frequently Asked Questions">
<Accordion title="Can GoogleTest run tests in parallel?">
Yes. Use test sharding with the `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` environment variables to split tests across parallel runners. Many CI systems support distributing tests this way.
</Accordion>
<Accordion title="How do I temporarily disable slow tests?">
Prefix the test or suite name with `DISABLED_`, or call `GTEST_SKIP()` with a reason inside the test for dynamic skipping.
</Accordion>
<Accordion title="Should I be worried about tests sharing Fixture state?">
Tests should remain independent. Use shared fixtures for expensive setup only if tests do not interfere or depend on each other's mutable state.
</Accordion>
<Accordion title="How can parameterized tests slow down my suite?">
Combining many parameters can lead to exponential increases in test cases. Profile and reduce the parameter space or test granularity as needed.
</Accordion>
<Accordion title="What are common causes of slow tests?">
Expensive setup/teardown, unnecessary external calls, large test data, and complex parameter combinations are frequent causes.
</Accordion>
</AccordionGroup>

<Check>
Best Practice: Incorporate performance considerations as part of your test design to maintain a fast, maintainable test suite.
</Check>