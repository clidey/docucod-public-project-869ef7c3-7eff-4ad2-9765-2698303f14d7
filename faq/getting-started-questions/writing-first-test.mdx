---
title: "How do I write and run my first test?"
description: "Guides users through the essential workflow of writing their first unit test with GoogleTest, covering best practices, discovering test cases, and running tests on different platforms or build systems."
---

# How Do I Write and Run My First Test?

Welcome to the first step in mastering GoogleTest! This guide takes you through the essential workflow of writing your very first unit test using GoogleTest, following best practices, understanding assertions, and running your tests on different platforms or build systems with confidence.

---

## 1. Understanding the Basics of GoogleTest Tests

### What is a Test in GoogleTest?

A test in GoogleTest is an isolated function that verifies a specific behavior or property of your code. It contains one or more **assertions** which check expected outcomes.

- **Test Suite**: A named group of related tests.
- **Test**: An individual verification within a test suite.

### Writing a Simple Test

Use the `TEST()` macro to define your test:

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code and assertions go here.
}
```

The first argument is the test suite name, grouping related tests. The second argument is your individual test's name within that suite.

For example, testing a factorial function:

```cpp
// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

Each assertion (`EXPECT_EQ`) compares the actual result with the expected value and reports any mismatches.

---

## 2. Using Assertions to Verify Behavior

Assertions are the core of your tests. They check whether conditions are true, values are equal, or exceptions are thrown.

### Key Assertion Types:

- **Basic Boolean Assertions:**
  - `EXPECT_TRUE(condition)` validates that *condition* is true.
  - `EXPECT_FALSE(condition)` validates that *condition* is false.

- **Equality Assertions:**
  - `EXPECT_EQ(val1, val2)` succeeds if `val1 == val2`.
  - `EXPECT_NE(val1, val2)`, `EXPECT_LT(val1, val2)`, etc. for other comparisons.

- **String Comparisons:**
  - Use `EXPECT_STREQ(str1, str2)` for C-string content comparison.

- **Floating-Point Assertions:**
  - `EXPECT_FLOAT_EQ(val1, val2)` for approximate equality.

- **Exception Assertions:**
  - `EXPECT_THROW(statement, ExceptionType)` verifies exceptions are thrown.

- **Death Tests:**
  - `EXPECT_DEATH(statement, regex)` checks that code causes process termination.

### Example: Simple Assertions

```cpp
TEST(ExampleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
  EXPECT_TRUE(2 > 1);
  EXPECT_NE("hello", "world");
  EXPECT_STREQ("abc", "abc");
}
```

Detailed information on all assertion types is available in the [Assertions Reference](https://google.github.io/googletest/reference/assertions.html).

---

## 3. Writing Tests with Fixtures for Shared Setup

When multiple tests share common setup or resources, use test fixtures.

### Creating a Fixture

1. Derive a class from `testing::Test`.
2. Define member variables and `SetUp()` and `TearDown()` methods.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  void SetUp() override {
    // Initialize the queue before each test
    queue_.Clear();
  }

  Queue<int> queue_;
};
```

### Using the Fixture

Use `TEST_F()` (note the `_F`) and specify the fixture class:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(queue_.size(), 0);
}

TEST_F(QueueTest, EnqueueAndDequeue) {
  queue_.Enqueue(42);
  EXPECT_EQ(queue_.Dequeue(), 42);
  EXPECT_EQ(queue_.size(), 0);
}
```

Each test runs in its own fresh fixture instance to ensure isolation.

---

## 4. Running Your Tests

### 4.1 Basic Test Program Structure

You usually need a `main()` function to initialize and run all tests:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

The `RUN_ALL_TESTS()` macro runs all tests registered and returns 0 if all pass, 1 otherwise.

### 4.2 Linking with gtest_main

Alternatively, link your test executable with the `gtest_main` library to get a default `main()` implementation automatically.

---

## 5. Understanding Test Output and Result Interpretation

When you run your test binary, GoogleTest provides a clear, readable output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[  FAILED  ] FactorialTest.HandlesPositiveInput (3 ms)
...
[==========] 2 tests from 1 test suite ran. (3 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput

 1 FAILED TEST
```

- Tests marked `[RUN]` are executing.
- `[OK]` marks success.
- `[FAILED]` marks failure.

### Using Filters to Run Specific Tests

You can target which tests to run using the `--gtest_filter` flag:

```
./my_test_binary --gtest_filter=FactorialTest.HandlesPositiveInput
```

### Test Output in XML or JSON

For automation or CI integration, generate machine-readable output:

- XML: `--gtest_output=xml:output.xml`
- JSON: `--gtest_output=json:output.json`

---

## 6. Best Practices and Troubleshooting Tips

### Best Practices

- **Isolate Tests:** Write independent tests that can run in any order.
- **Use Fixtures:** Share resource setup/teardown using fixtures.
- **Keep Assertions Focused:** Verify a single behavior per test.
- **Be Sparing with `ASSERT_*`:** Use `ASSERT_*` to abort on failure only when continuing doesn't make sense; prefer `EXPECT_*` otherwise.

### Common Pitfalls

- Forgetting to call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()`.
- Using `TEST()` with fixture members instead of `TEST_F()`.
- Writing fatal assertions (`ASSERT_*`) in constructors or destructors (not allowed).
- Not linking the `gtest_main` or defining main, resulting in linker errors.

### Troubleshooting

- **No Tests Run:** Ensure your `TEST()` or `TEST_F()` macros are correctly used and source files are included in build.
- **Assertion Macro Errors:** Confirm macros are used correctly and avoid placing assertions in non-void functions if fatal.
- **Linker Issues:** Refer to [Common Setup Issues](https://github.com/google/googletest/blob/main/docs/reference/installation-issues.md) for detailed build and linker troubleshooting.

---

## 7. Further Steps

After mastering your first tests, proceed to:

- Writing **mock objects** for dependency testing with GoogleMock.
- Using **parameterized tests** to run tests with varying inputs.
- Leveraging advanced GoogleTest features such as **death tests**, **custom assertions**, and **test event listeners**.

Explore these next in the following guides:

- [Writing Your First Test](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-experience/writing-your-first-test.md)
- [Running and Understanding Test Output](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-experience/running-and-understanding-tests.md)
- [Mocking Basics](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md)

---

## 8. Example: Complete Minimal Test Program

```cpp
#include <gtest/gtest.h>

// Function to test
int Add(int a, int b) { return a + b; }

// Test suite named AddTest
TEST(AddTest, SimpleAddition) {
  EXPECT_EQ(Add(1, 2), 3);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run this after building and observe the output. A green `[ OK ]` message means success.

---

## References and Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [Mocking for Dummies](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md)
- [Running and Understanding Tests](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-experience/running-and-understanding-tests.md)
- [Common Setup Issues](https://github.com/google/googletest/blob/main/docs/getting-started/setup-troubleshooting/common-setup-issues.md)

<Tip>
This page focuses on writing and running your first test only. For advanced test organization, mocking, and performance techniques, consult the other guides and API references in the documentation.
</Tip>
