---
title: "How do I install and configure GoogleTest/GoogleMock?"
description: "Outlines the typical installation methods, supported platforms, and initial configuration steps for various build systems. Guides new users through environment setup, dependency requirements, and links to quickstart resources."
---

# How do I install and configure GoogleTest/GoogleMock?

This page guides you through the typical installation methods, supported platforms, and configuration steps required to get GoogleTest and GoogleMock up and running. Whether you are starting fresh or integrating into an existing build system, you will find practical instructions on environment setup, dependencies, build systems, and references to quickstart resources.

---

## 1. Installation Methods

GoogleTest and GoogleMock provide flexible installation options tailored to diverse development workflows and platforms.

### Standalone Build with CMake

CMake is the recommended and widely supported build system for GoogleTest and GoogleMock.

**Typical Workflow:**

```bash
# Clone the repository (replace version if needed)
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest

# Create a separate build directory
mkdir build && cd build

# Generate native build scripts including GoogleMock (default)
cmake ..

# Or build only GoogleTest by disabling GoogleMock
cmake .. -DBUILD_GMOCK=OFF

# Build the project
make

# Optional: Install with system privileges
sudo make install
```

- On Windows, Visual Studio solution and project files are generated by CMake.
- On macOS, an `.xcodeproj` project file is created.

### Integrating into Existing CMake Projects

You can include GoogleTest/GoogleMock as part of your CMake build, ensuring matching compiler and linker settings:

- Add GoogleTest source as a subdirectory using `add_subdirectory(path/to/googletest)`.
- Add it as a git submodule or download it during configuration using CMake's `FetchContent` module.

Example snippet:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

- Requires CMake 3.14 or later.
- Enables smooth version management and build consistency.

### Other Build Systems

- Bazel users should consult separate Bazel integration guides (not covered here).
- Manual integration using traditional makefiles or other systems is possible but requires specifying include directories, library paths, and linking manually.

---

## 2. Supported Platforms and System Requirements

GoogleTest and GoogleMock support a wide range of platforms, provided your compiler supports C++17.

- **C++ Standard:** C++17 or higher is required. You must ensure your build environment uses `-std=c++17` or equivalent.
- **Compilers:** Compatible with most modern compilers including GCC (â‰¥7), Clang, MSVC, Intel LLVM, and others.
- **Threading:** Multi-threaded tests are supported if pthread or compatible threading libraries are available. GoogleTest detects pthread support automatically when using CMake.

<Tip>
Ensure your platform has C++17 support enabled before building. If using older compilers, you may need to upgrade or configure flags manually.
</Tip>

---

## 3. Configuration Basics

After installation, configure your projects and build systems to integrate GoogleTest/GoogleMock correctly.

### Linking Libraries

- Link your test executable with `gtest` or `gtest_main` (for GoogleTest), and `gmock` or `gmock_main` (for GoogleMock).

Example CMake snippet:

```cmake
target_link_libraries(your_test_target gtest_main gmock_main)
```

- Use `gmock_main` if you want GoogleMock's integrated main function.
- Use `gtest_main` if you only need GoogleTest.

### Include Paths

- Add the `include` directories of GoogleTest/GoogleMock to your compiler search paths.

Example:

```cmake
target_include_directories(your_target PRIVATE ${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)
```

- When using `find_package(GTest CONFIG REQUIRED)`, these are handled automatically.

### Compiler Flags and Macros

- GoogleTest overrides some compiler settings to enforce strict warnings.
- For Visual Studio compatibility, consider enabling `gtest_force_shared_crt` to avoid runtime library conflicts.

- When building shared libraries (DLLs), define `-DGTEST_CREATE_SHARED_LIBRARY=1` and link tests with `-DGTEST_LINKED_AS_SHARED_LIBRARY=1`.

- If you experience pthread detection issues, explicitly define `-DGTEST_HAS_PTHREAD=1` or `=0` as needed.

<Tip>
Consistently apply C++17 flags across your project and GoogleTest/GoogleMock builds to avoid incompatibilities.
</Tip>

### Customization via Macros

- You can customize GoogleTest/GoogleMock behaviors by defining macros during compilation, e.g., for logging, threading, or stack trace handling.
- See customization points in `gtest-port.h` and `gmock-port.h`.

---

## 4. Verifying Your Installation

After building, ensure that GoogleTest and GoogleMock are correctly installed and working.

### Quick Validation Steps

1. Compile and run the included sample tests:

```bash
ctest  # Runs GoogleMock/GoogleTest own tests if built
```

2. Create a minimal test source file:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, Truth) {
  ASSERT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

3. Compile and link it with `gtest_main`/`gmock_main` and run the executable.

### Troubleshooting Common Issues

- If encountering linker errors, check that linking paths and target libraries are correct.
- Verify that your compiler flags are consistent across your test and GoogleTest.
- For Windows, confirm runtime linkage strategies match between your app and GoogleTest (`gtest_force_shared_crt` option).

Refer to the [Troubleshooting Common Setup Issues](../getting-started/first-test-experience/troubleshooting-common-issues) page for detailed fixes.

---

## 5. Additional Resources and Next Steps

- Detailed platform-specific installation instructions: [Installation on Standard Platforms](../getting-started/setup-installation/installing-standard-platforms)
- Configuration details: [Configuration Basics](../getting-started/setup-installation/configuration-basics)
- Writing your first test: [Writing and Running Your First Test](../getting-started/first-test-experience/writing-first-test)
- Exploring mocks: [Getting Started with Mocking](../../guides/getting-started/mocking-basics)

For source code, community support, and the latest updates, visit the [GoogleTest GitHub repository](https://github.com/google/googletest).

<Tip>
Building GoogleTest and GoogleMock yourself ensures you can customize compilation parameters and debug effectively before integrating into your projects.
</Tip>

---

### Summary Diagram of Typical Installation Flow

```mermaid
flowchart TD
  A[Clone GoogleTest Repository] --> B{Choose Build System}
  B -->|CMake| C[Create Build Directory]
  C --> D[Run cmake .. (with options)]
  D --> E[Compile using make or IDE]
  E --> F[Run Tests or Install]
  B -->|Other| G[Manual Integration or Alternative Build]
  G --> H[Configure includes/linker manually]
  H --> F

  F --> I[Configure Your Project to Link gtest & gmock]
  I --> J[Write Tests and Run]

  click A "https://github.com/google/googletest"
  click D "/getting-started/setup-installation/installing-standard-platforms"
  click I "/getting-started/setup-installation/configuration-basics"
  click J "/getting-started/first-test-experience/writing-first-test"
```

---

## Troubleshooting Tips

- Always verify your compiler supports at least C++17.
- When switching between static and shared library builds on MSVC, sync runtime linkage flags.
- If test executables fail linking to pthread on MinGW, consider disabling pthread support.
- Use verbose output (`make VERBOSE=1` or `cmake --build . --verbose`) to inspect compiler and linker commands.

---

## Summary

This page walks you step-by-step through installing GoogleTest and GoogleMock, covering the most common methods using CMake, basic configuration, supported platforms, and how to verify your setup. Follow the outlined workflows to build as standalone libraries or integrate seamlessly into existing CMake projects. Refer to linked pages for detailed platform instructions, configurations, and first test writing to maximize your testing efficiency.

---

<Note>
This documentation belongs to the Getting Started & Setup series and should be used as your first stop after understanding what GoogleTest and GoogleMock are. For advanced customization or integration techniques, consult the guides on build system integration and mocking features.
</Note>

---

### Additional Links

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [Installation on Standard Platforms](../getting-started/setup-installation/installing-standard-platforms)
- [Configuration Basics](../getting-started/setup-installation/configuration-basics)
- [Writing and Running Your First Test](../getting-started/first-test-experience/writing-first-test)
- [Troubleshooting Common Setup Issues](../getting-started/first-test-experience/troubleshooting-common-issues)
- [GoogleMock Overview and README](../../googlemock/README.md)

---

## Practical Tips for Successful Setup

- Start by cloning the exact repository version to maintain consistency.
- Use isolated build directories to keep source and build files separate.
- When integrating in an existing CMake project, fetch GoogleTest during configuration rather than copying headers yourself.
- Validate your installation by compiling and running simple test cases before moving to complex mocks.
- Consistently use the provided CMake build variables like `gtest_force_shared_crt` on Windows to avoid linkage pitfalls.

<Tip>
Keep your GoogleTest and GoogleMock versions synchronized to avoid compatibility issues.
</Tip>

---

By following this comprehensive installation and configuration guide, you will achieve a robust, maintainable test environment leveraging GoogleTest's and GoogleMock's full potential.
