---
title: "What are the most common user issues and how are they resolved?"
description: "Frequently occurring questions encountered by users when starting out, including linker errors, missing headers, or basic usage confusion, with actionable answers and relevant documentation references for swift resolution."
---

# Frequently Asked Questions: Common User Issues and Resolutions

This page addresses frequent challenges users encounter when starting out with GoogleTest and GoogleMock, especially those related to mock setup, linker errors, unexpected behaviors, and usage confusion. Each question is paired with practical, actionable advice enabling you to quickly diagnose issues and move forward.

---

## 1. My mock method calls the real method implementation unexpectedly. Why?

**Problem:** When calling a mock method, the code executes the real method instead of the mock.

**Cause:** The method you are trying to mock is not declared `virtual`. GoogleMock can only mock virtual methods unless you adopt advanced techniques.

**Solution:**

- Ensure the base class declares the method as `virtual`.
- If you are mocking a non-virtual method, see [Mocking Non-virtual Methods](gmock_cook_book.md#MockingNonVirtualMethods) for alternative approaches.

<Check>
Always provide a virtual destructor in your interfaces to avoid subtle bugs when mocks are deleted.
</Check>

## 2. Can I mock variadic functions (functions with `...`) directly?

**Answer:**

It is not possible to mock variadic functions directly because GoogleMock cannot infer how many arguments are passed or their types.

**Workaround:** Refactor the interface by:

- Providing overloaded non-variadic methods.
- Abstracting variadic calls behind a virtual method with a well-defined signature.

See [Legacy gMock FAQ - Can I mock a variadic function?](docs/gmock_faq.md#) for details.

## 3. I get warnings about uninteresting calls or unexpected calls during tests. Should I be concerned?

**Explanation:**

- **Uninteresting Calls:** Calls to mock methods for which no expectations (`EXPECT_CALL`) are set. By default, GoogleMock prints warnings but allows them.
- **Unexpected Calls:** Calls that do not match any existing expectation and are always test failures.

**What to do:**

- If uninteresting calls are expected and shouldn't cause warnings, use `NiceMock` to suppress messages.
- To disallow unexpected calls, explicitly specify `EXPECT_CALL(...).Times(0)`.
- For methods with both allowed and disallowed calls, set a catch-all `EXPECT_CALL` with `AnyNumber()` and specific expectations before it.

<Tip>
Use `--gmock_verbose=info` to get detailed tracing of mock calls and understand which expectations match which calls.
</Tip>

## 4. How do I specify that a mock method should never be called?

Use the `Times(0)` cardinality in an expectation:

```cpp
EXPECT_CALL(mock_obj, SomeMethod(_))
    .Times(0);
```

Any call to `SomeMethod` will then cause a test failure.

## 5. I see "Too few actions specified" or "Actions ran out" warnings. What does this mean?

This usually happens when you specify fewer `.WillOnce()` actions than the number of expected calls.

**What happens:**
- When all `.WillOnce()` actions are used up, GoogleMock performs the default action (if any).
- If no default action is specified, it uses the built-in default.

**How to avoid:**
- Ensure the number of `.WillOnce()` matches or is fewer than your expected number of calls.
- Use `.WillRepeatedly()` with an appropriate action to cover calls beyond the `.WillOnce()` chain.

## 6. My test fails because the mock function was called more times than expected. What can I do?

**Symptoms:** Test output shows "Mock function called more times than expected".

**Cause:** Your `EXPECT_CALL` has a strict `.Times()` or inferred cardinality that has been exceeded.

**Solutions:**

- Adjust `.Times()` to allow the expected number of calls.
- Use flexible cardinalities like `AtLeast(n)`, `AnyNumber()`, or `Between(m,n)`.
- Add `.RetiresOnSaturation()` to allow expectations to retire after saturation, letting other expectations catch later calls.

## 7. How can I verify that all EXPECT_CALL expectations were met if my mock object is never destructed?

GoogleMock automatically verifies expectations upon mock object destruction.

**When mock is leaked:**
- Verification never occurs, potentially hiding failures.

**Best practices:**

- Delete mock objects properly after test.
- If using heap-allocated mocks managed outside test code, call:

```cpp
testing::Mock::VerifyAndClearExpectations(&mock_obj);
```

- Enable heap-checking tools or use RAII wrappers to ensure proper lifetimes.

## 8. What do "Uninteresting mock function call - returning default value" warnings mean?

These are informational messages when a mock method was called without an expectation and no custom default action is set.

**When to worry:**
- Only if such calls are unexpected or indicate incomplete test setup.

**How to suppress:**
- Use `NiceMock` on your mock class to suppress these messages.
- Explicitly add a catch-all `EXPECT_CALL(...).Times(AnyNumber())` if these calls are valid.

## 9. How to control the order of mock method calls?

GoogleMock does not require calls to match expectations in the order they are written by default.

**To enforce order:**

- Use the `InSequence` helper:

```cpp
{
  ::testing::InSequence s;
  EXPECT_CALL(mock, FirstCall());
  EXPECT_CALL(mock, SecondCall());
}
```

- Use the `After` clause to specify that one call must happen after another.

See [Mocking Reference - Defining Expectation Order](reference/mocking.md#EXPECT_CALL.InSequence).

## 10. How can I silence warnings about uninteresting calls on specific mock methods?

Write a catch-all expectation with flexible times for the specific method:

```cpp
EXPECT_CALL(mock, Method(_))
    .Times(::testing::AnyNumber());
```

Or use `NiceMock<>` to suppress all warnings.

## 11. I want detailed logs of every mock call for debugging. How do I enable that?

Run your tests with the flag:

```sh
--gmock_verbose=info
```

This prints every expectation and call with arguments and stack traces, facilitating precise diagnosis.

## 12. When should I use `ON_CALL` vs `EXPECT_CALL`?

- `ON_CALL`: Sets default behavior for a mock method but does not expect a call.
- `EXPECT_CALL`: Sets both behavior and call expectations.

**Best practice:**

- Use `ON_CALL` for common default stubbed behaviors in test setup.
- Use `EXPECT_CALL` only when the test needs to verify that the call was made.

This approach leads to more maintainable tests and fewer brittle failures.

## Additional Resources and References

- [gMock for Dummies](docs/gmock_for_dummies.md) — Beginner-friendly introduction to mock basics.
- [Legacy gMock FAQ](docs/gmock_faq.md) — Troubleshooting common conceptual issues.
- [gMock Cookbook](docs/gmock_cook_book.md) — Recipes and advanced usage techniques.
- [Mocking Reference](docs/reference/mocking.md) — Detailed API descriptions and usage.
- [gMock Cheat Sheet](docs/gmock_cheat_sheet.md) — Quick syntax guide.

---

## Troubleshooting Tips

- **Verify method signatures:** Mock methods must match the base class method signatures exactly, including qualifiers like `const` and `override`.

- **Use matchers wisely:** Avoid over-specifying argument expectations; prefer `_` where argument values are irrelevant.

- **Sequence carefulness:** Only use `InSequence` or ordering constraints when necessary.

- **Manage strictness:** Switch between `NiceMock`, `NaggyMock`, and `StrictMock` for warning and failure behavior on uninteresting calls.

- **Check for leaks:** Use `Mock::AllowLeak` if intentional, but prefer owning mocks safely.

- **Enable verbose logs:** Use `--gmock_verbose=info` for deep inspection of mock interactions.

<Tip>
When stuck, enabling verbose logging and carefully reviewing the test output stack traces leads to faster root cause identification.
</Tip>

---