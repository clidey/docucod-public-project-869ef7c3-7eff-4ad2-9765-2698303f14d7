---
title: "Which features should I start with?"
description: "Introduces users to the most commonly used features such as test discovery, assertions, matchers, and mocking. Recommends an initial path for learning how to create tests and use basic mocking in real projects."
---

# Which features should I start with?

Welcome to GoogleTest and GoogleMock! This page guides you through the most essential features you should focus on initially to write effective unit tests and use basic mocking in your C++ projects. Starting here ensures you get a practical, hands-on understanding of the framework's core capabilities that unlock reliable and maintainable testing.

---

## 1. Test Discovery and Writing Simple Tests

GoogleTest automatically discovers tests you define using the `TEST()` macro. Tests are grouped into test suites and run with no additional registration.

### Key Points:
- Use the `TEST()` macro to create a test with a suite name and test name.
- Each test is an independent function that contains assertions to verify behavior.
- Tests run isolated from one another, ensuring repeatability.

### Example:
```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

### Best Practices:
- Group related tests into test suites using common prefixes.
- Use `EXPECT_*` assertions for non-fatal checks allowing multiple failures.
- Use `ASSERT_*` assertions to abort a test early when necessary.

---

## 2. Using Assertions Effectively

Assertions check that your code behaves as expected. GoogleTest provides many assertion macros:

### Categories:
- Equality and relational assertions: `EXPECT_EQ`, `ASSERT_NE`, etc.
- Boolean assertions: `EXPECT_TRUE`, `ASSERT_FALSE`.
- String comparisons.
- Exception assertions.
- Predicate assertions and more.

### Tips:
- Stream human-readable messages into assertions with `<<` to clarify failures.
- Prefer non-fatal `EXPECT_*` to see multiple failures in one run.
- Use `SCOPED_TRACE` to add context to assertions in helper code.

### Example:
```cpp
ASSERT_EQ(vec.size(), expected_size) << "Vector size mismatch";
EXPECT_LT(result, threshold) << "Result is too high";
```

---

## 3. Introduction to Matchers

GoogleMock uses matchers to specify expectations on function arguments in mocks.

### Essentials:
- Matchers describe expected argument values with powerful conditions, e.g., `Eq(5)`, `NotNull()`, `_` (wildcard).
- Combine matchers like `AllOf()`, `AnyOf()`, `Not()` for complex logic.

### Simple Usage:
```cpp
EXPECT_CALL(mock, Foo(Eq(5), _));  // Expects Foo called with first arg == 5, second ignored
```

### Best Practices:
- Use `_` when you don't care about an argument.
- Compose matchers for precise argument validation.

---

## 4. Creating and Using Mock Classes

Mocking allows you to simulate dependencies and control their behavior.

### Defining a Mock Class:
- Inherit from the interface or base class.
- Use `MOCK_METHOD` macros to define mock methods.

### Example:
```cpp
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, Bar, (int x), (override));
};
```

### Common Workflow:
1. Create a mock object.
2. Set up default behaviors with `ON_CALL`.
3. Define explicit expectations with `EXPECT_CALL`.
4. Exercise the code under test.
5. Automatic verification occurs on mock destruction.

### Example:
```cpp
MockFoo mock;
ON_CALL(mock, Bar).WillByDefault(Return(1));
EXPECT_CALL(mock, Bar(5)).WillOnce(Return(10));
int val = mock.Bar(5);  // val == 10
```

### Tips:
- Put `MOCK_METHOD`s in `public:` section even if base methods are protected/private.
- Use `NiceMock<YourMock>` to suppress warnings on uninteresting calls.
- Prefer `ON_CALL` for default behavior and `EXPECT_CALL` when you want to verify calls.

---

## 5. Understanding Expectation Clauses

`EXPECT_CALL` lets you precisely control mock call behaviors and validations.

### Useful Clauses:
- `.Times(n)` — specify how many times call is expected.
- `.WillOnce(action)`, `.WillRepeatedly(action)` — specify call actions.
- `.InSequence(sequence)` — enforce call order.
- `.After(otherExpectations)` — enforce partial call ordering.
- `.RetiresOnSaturation()` — retire expectation when saturated.

### Example:
```cpp
Sequence s;
EXPECT_CALL(mock, Foo()).InSequence(s);
EXPECT_CALL(mock, Bar()).InSequence(s);
```

---

## 6. Setting Default Behavior with ON_CALL

Use `ON_CALL` to specify what a mock method should do when called without a specific `EXPECT_CALL`.

### Example:
```cpp
ON_CALL(mock, Foo(_))
    .WillByDefault(Return(false));
```

### Difference Between `ON_CALL` and `EXPECT_CALL`:
- `ON_CALL` only defines behavior.
- `EXPECT_CALL` defines behavior and sets an expectation that the call occurs.

### Best Practice:
- Set broad default behavior with `ON_CALL` in test setup or fixture.
- Use `EXPECT_CALL` only when you want to verify a call.

---

## 7. Controlling Mock Strictness

GoogleMock provides wrappers to manage warnings/errors for unexpected/uninteresting call:

### Wrappers:
- `NiceMock<T>`: suppresses uninteresting call warnings.
- `NaggyMock<T>`: default behavior, warns on uninteresting calls.
- `StrictMock<T>`: treats uninteresting calls as errors.

### Example:
```cpp
NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, Bar());  // No warnings if other methods called.
```

### Guidance:
- Default is NaggyMock.
- Use `NiceMock` for less verbose output.
- Use `StrictMock` when you want strict verification.

---

## 8. Practical Tips for Getting Started

- Start by writing simple `TEST()`s with clear assertions.
- Use mocks to isolate dependencies and control behavior.
- Find balance between too strict and too loose expectations.
- Use the gMock syntax carefully to avoid common pitfalls (like unprotected commas in `MOCK_METHOD`).
- Practice incrementally adding complexity: start with `ON_CALL` default behaviors, then add critical `EXPECT_CALL`s.

---

## 9. Where to Go Next

- Read the **[GoogleTest Primer](primer.md)** for basics on writing tests.
- Explore **[Mocking for Dummies](gmock_for_dummies.md)** to master mocking step-by-step.
- Use **[Mocking Reference](reference/mocking.md)** for detailed API documentation.
- When ready, advance to **[Advanced Matching Techniques](guides/writing-effective-tests/advanced-matchers.mdx)**.

---

## Additional Resources

- [gMock Cookbook](gmock_cook_book.md): Recipes for common mocking patterns.
- [gMock Cheat Sheet](gmock_cheat_sheet.md): Concise quick-reference for macros and features.


<Tip>
Start simple with writing tests and gradually incorporate mocks as your design grows. Practice using `EXPECT_CALL` and `ON_CALL` to get comfortable controlling behavior and verifying interactions.
</Tip>

<Check>
Always place `MOCK_METHOD` declarations in the `public` section of your mock classes to avoid access-related errors.
</Check>

<Warning>
Avoid overly constraining tests by using too many expectations. Tests should verify behavior, not implementation details.
</Warning>