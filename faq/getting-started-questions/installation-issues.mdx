---
title: "How do I install and set up GoogleTest/GoogleMock?"
description: "Answers common setup questions, including supported installation methods (e.g., CMake, Bazel), configuration tips for integrating GoogleTest/GoogleMock into your project, and resolving platform-specific installation difficulties."
---

# How do I install and set up GoogleTest/GoogleMock?

This guide addresses common questions about installing and setting up GoogleTest and GoogleMock. It covers supported installation methods, configuration tips, integration practices, and troubleshooting platform-specific challenges.

---

## Supported Installation Methods

GoogleTest and GoogleMock provide flexible installation options to fit different build environments and developer preferences.

### 1. Installing with CMake

GoogleTest comes with built-in CMake scripts that simplify the build and installation process across platforms.

**Getting Started:**

- Clone the repository:

  ```bash
  git clone https://github.com/google/googletest.git -b v1.17.0
  cd googletest
  mkdir build && cd build
  ```

- Generate build files and compile (including GoogleMock):

  ```bash
  cmake ..
  make
  sudo make install  # Optional: installs to /usr/local/ by default
  ```

- To build only GoogleTest without GoogleMock, run:

  ```bash
  cmake .. -DBUILD_GMOCK=OFF
  ```

**Platform Support:**

- Linux/Unix: Uses `Makefile` generated by CMake.
- Windows: Generates Visual Studio solution (*.sln) and project files.
- Mac OS X: Generates Xcode project.

**Advanced Integration:**

- You may embed GoogleTest as a subdirectory in your existing CMake projects using `add_subdirectory()`.
- Alternatively, install GoogleTest and link to it using `find_package(GTest CONFIG REQUIRED)`.

### 2. Installing with Bazel

Bazel users can integrate GoogleTest/GoogleMock by:

- Setting up your Bazel workspace with the appropriate `MODULE.bazel` or workspace files.
- Using `cc_test` rules in your targets for test executables.
- Ensuring compiler settings support C++17 and GoogleTest dependencies are correctly declared.

> For detailed Bazel instructions, refer to the [Installing with Bazel](./install-bazel) guide.

### 3. Other Build Systems

GoogleTest is highly portable and can be incorporated into various build environments by:

- Including its headers and source files directly.
- Linking against its libraries compiled via CMake or manually.
- Using provided CMake macros or configuring your build files to locate GoogleTest and GoogleMock libraries and headers.


---

## Configuration Tips

### C++ Standard Version

GoogleTest requires the C++17 standard or higher:

- In CMake, specify:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- Ensure your compiler supports C++17, e.g., GCC 7+ or MSVC 2017+.

### Multithreading Support

- GoogleTest is thread-safe when pthread or an equivalent threading library is available.
- You can enforce pthread usage:

  ```bash
  -DGTEST_HAS_PTHREAD=1
  ```

- Add pthread linking flags as needed for your platform.

### Dynamic vs Static Runtime (Windows)

- Microsoft Visual Studio defaults to dynamic runtimes, but GoogleTest links statically by default.
- To avoid incompatibility errors, define:

  ```cmake
  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
  ```

in your CMakeLists.

---

## Integrating GoogleTest and GoogleMock into Your Projects

### Linking

- Link against `gtest`, `gtest_main`, `gmock`, and optionally `gmock_main` libraries depending on your use case.
- Your test executable should include `<gtest/gtest.h>` and `<gmock/gmock.h>` to use the APIs.

### Initialization

- Initialize GoogleMock and GoogleTest in `main()` using:

  ```cpp
  testing::InitGoogleMock(&argc, argv);
  ```

  When using the `gmock_main` library, this initialization is already provided.

### Writing Tests

- Define your test classes and test cases using `TEST()` and `TEST_F()` macros.
- Use the mocking facilities per the [gMock Cookbook](./gmock_cook_book).

---

## Common Platform-Specific Installation Issues

### Linker Errors

- Ensure you link with all necessary GoogleTest and GoogleMock libraries.
- Verify that your build system commands include paths to GoogleTest headers and libraries.
- Address runtime library mismatches (e.g., static vs dynamic CRT on Windows).

### Compiler Compatibility

- Use a compatible compiler version supporting C++17.
- On MSVC, watch out for warnings related to const qualifiers and fix them by aligning method declarations.

### Header Conflicts

- If macro naming conflicts arise, define macros to rename conflicting GoogleTest macros (e.g., `-DGTEST_DONT_DEFINE_TEST=1`).

### Build Time and Memory

- Compiling large mock classes can consume excessive memory. Splitting constructors/destructors into `.cc` files can reduce compilation overhead.

---

## Troubleshooting Setup

- Run simple example tests after installation to validate your environment.
- Use verbose build and linker outputs to trace configuration problems.
- Consult platform-specific build and configuration guides.

---

## Where to Get Help

- Official Documentation:
  - [gMock Cookbook](./gmock_cook_book.md)
  - [Mocking Reference](./mocking.md)
  - [gMock FAQ](./gmock_faq.md)
- Community forums like Stack Overflow.
- GitHub Issues on the [GoogleTest repository](https://github.com/google/googletest).

---

## Summary

This guide provided answers to frequently asked questions about installing and setting up GoogleTest and GoogleMock, described supported build methods like CMake and Bazel, gave configuration tips particularly about C++ standards and threading, advised on integration practices, and covered common platform-specific issues with their solutions.

For deeper understanding, refer to the following topics:

- Writing and running your first tests
- Mocking basics and best practices
- Integration with build systems and CI
- Troubleshooting common setup problems


---

### Additional Resources

- [Installing with CMake](./install-cmake.md)
- [Installing with Bazel](./install-bazel.md)
- [Common Setup Issues](../getting-started/setup-troubleshooting/common-setup-issues.md)
- [Mocking Reference](./mocking.md)
- [gMock Cookbook](./gmock_cook_book.md)
- [Legacy gMock FAQ](./gmock_faq.md)


---

#### Example: Basic Standalone Build Steps with CMake

```bash
# Clone source
git clone https://github.com/google/googletest.git -b v1.17.0
directory=googletest
git checkout v1.17.0

# Build
mkdir build && cd build
cmake ..
make
sudo make install
```

---

#### Example: Minimal Main Function for Test Binary

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example demonstrates the standard initialization for GoogleTest and GoogleMock.

---

<Check>
Ensure your build setup specifies these basic configurations and paths.
Verify C++17 support and proper linking to avoid common installation pitfalls.
</Check>
