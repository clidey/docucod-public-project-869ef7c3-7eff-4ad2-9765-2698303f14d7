---
title: "Troubleshooting Build and Runtime Issues"
description: "Solutions for frequent build errors, linking problems, crashes, platform incompatibilities, and issues with test execution. Offers recommendations for common stack traces, environment settings, and misconfiguration fixes."
---

# Troubleshooting Build and Runtime Issues

This page provides targeted solutions and guidance for common problems encountered during building, linking, and running GoogleTest. It covers frequent errors such as build failures, linking problems, crashes, platform incompatibilities, and issues with test execution flow. You'll also find recommendations on environment configuration, interpreting error messages, and fixing common misconfigurations.

---

## 1. Common Build and Linking Errors

### Issue: Undefined references to GoogleTest symbols

- **Cause:** This typically occurs when your test binary does not properly link against the GoogleTest libraries.
- **Solution:**
  1. Make sure you have linked your test program with the `gtest` or `gtest_main` libraries.
  2. For users using CMake, verify that you have properly included `gtest` in your `target_link_libraries`.
  3. If you use `TEST_F` or `TEST_P`, ensure that all required GoogleTest headers are included and your fixture classes have default constructors.

### Issue: Linker errors for static const members

- **Cause:** Static const class members are declared but not defined.
- **Solution:**
  1. Define static const members out of line in a source file without an initializer.

```cpp
// In header
class Foo {
  static const int kValue = 5;
};

// In source file
const int Foo::kValue;
```

- Alternatively, use `constexpr` static members which are implicitly inline.

### Issue: Compiler errors when using macros like `EXPECT_EQ` with some functions

- **Cause:** Macros such as `EXPECT_EQ` internally use `sizeof` on their arguments. Some platform-specific functions (e.g., `htonl()`) may be defined as macros, causing compiler issues.
- **Solution:**
  1. Replace problematic macro functions with equivalent function calls.
  2. Or avoid using such expressions directly inside assertions.

---

## 2. Runtime Issues and Failures

### Issue: Tests silently fail or do not run

- **Cause:** Test filtering excludes them, or tests are disabled.
- **Solution:**
  1. Verify `--gtest_filter` flag and environment variable are not hiding tests.
  2. If using the `DISABLED_` prefix, remember these tests won't run unless `--gtest_also_run_disabled_tests` is set.
  3. Check that typed and parameterized tests are properly instantiated.
  4. If using parameterized tests (`TEST_P`), ensure `INSTANTIATE_TEST_SUITE_P` is called; otherwise, GoogleTest will insert failing synthetic tests to warn you.

### Issue: Death test failures or hangs

- **Cause:** Death tests run in a subprocess and can fail if threads exist before the test.
- **Solution:**
  1. Restrict thread creation outside death test statements.
  2. Use the `death_test_style` flag set to `threadsafe` for increased safety.
  3. Make sure the tested code can run cleanly multiple times as death test subprocesses re-execute binaries.

### Issue: Failures caused by mixing different test fixture types within a test suite

- **Error Message Example:**
  > All tests in the same test suite must use the same test fixture class.

- **Cause:** Some tests in a test suite use `TEST`, others `TEST_F`, or fixture classes differ.
- **Solution:**
  1. Ensure all tests in the same test suite share the same fixture class.
  2. Avoid mixing `TEST` and `TEST_F` in one suite.
  3. Use separate suites if fixtures differ.

---

## 3. Understanding Test Execution and Output

### Interpreting Stack Traces and Failure Messages

- GoogleTest prints assertion failures with file name, line number, and a stack trace (if enabled).
- If a failure message is cryptic, consider adding custom messages using `<<` streaming to assertions.
- Enable or disable stack traces via the `--gtest_stack_trace_depth` flag.

### Common Failure Patterns

- **Mixin Fixture Classes:** Triggers failures if tests in one suite have differing fixtures.
- **Uninstantiated Parameterized Tests:** Generated synthetic failing tests notify you to either instantiate your parameterized test or use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress the warning.
- **Premature Exit Detection:** If your test terminates unexpectedly, set `TEST_PREMATURE_EXIT_FILE` environment variable and check the presence of the related file.

---

## 4. Environment and Platform Specific Issues

### Windows

- Use wide string versions of `InitGoogleTest` when building with `UNICODE`.
- To avoid pop-up dialogs on assertion failures, use `--gtest_break_on_failure` or configure your environment accordingly.
- Disable crashing pop-ups during death tests.
- Use the Microsoft-specific memory leak detection guidance as GoogleTest singleton allocations may appear as leaks.

### Linux and macOS

- Standard POSIX support for forking and signal handling.
- Make sure to link with pthreads if using multithreading and GoogleTest.

### Embedded and Cross-Platform

- Use the flag versions of `InitGoogleTest()` that suit your platform.
- Be aware that some features (e.g., file system, XML output) may require enabling build options.

---

## 5. Best Practices to Avoid Issues

- Always call `InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`.
- Use `RUN_ALL_TESTS()` as the return value of your `main()` function.
- Avoid naming test suites and test names with underscores (`_`), as these are reserved for special macros.
- Use `TEST_F` only with fixtures that have default constructors.
- Avoid mixing test suite names and test fixture classes.
- For value-parameterized tests (`TEST_P`), always use `INSTANTIATE_TEST_SUITE_P` unless explicitly allowing uninstantiated suites.
- Configure your environment variables and test flags carefully to avoid unexpected test filtering.

---

## 6. Troubleshooting Steps

<Steps>
<Step title="Check Build and Link Settings">
Verify you have included and linked against GoogleTest libraries correctly.
</Step>
<Step title="Validate Test Definitions">
Confirm that all test and fixture classes have correct declarations and constructors.
</Step>
<Step title="Review Test Filter and Flags">
Ensure your flags and environment variables (`GTEST_FILTER`, `GTEST_ALSO_RUN_DISABLED_TESTS`) are set as intended.
</Step>
<Step title="Run Tests Verbosely">
Use `--gtest_list_tests` and `--gtest_repeat` to observe test registration and running behavior.
</Step>
<Step title="Investigate Failures">
Look at the failure messages and stack trace details for clues.
</Step>
<Step title="Check for Parameterized Test Instantiations">
Make sure all `TEST_P` use have corresponding `INSTANTIATE_TEST_SUITE_P` macros unless allowed.
</Step>
<Step title="Isolation for Death Tests">
Run death tests isolated and verify no conflicting threads or resources exist.
</Step>
</Steps>

---

## 7. Useful Environment Variables and Flags

| Name                              | Purpose                                                    |
|----------------------------------|------------------------------------------------------------|
| `GTEST_FILTER`                   | Filter tests to run by name pattern.                       |
| `GTEST_ALSO_RUN_DISABLED_TESTS` | Include disabled tests in run.                             |
| `GTEST_FAIL_FAST`                | Stop running on first test failure.                        |
| `GTEST_REPEAT`                   | Number of test repetitions.                               |
| `GTEST_SHUFFLE`                 | Randomize test execution order.                            |
| `GTEST_OUTPUT`                  | Specifies output format (xml/json) and file.              |
| `TEST_PREMATURE_EXIT_FILE`      | File to detect premature test exits (for test runners).   |

### Common Command Line Flags

Flags generally have the form `--gtest_flagname=value`.

Example: `--gtest_filter=MySuite.*` runs only tests from "MySuite".

---

## 8. When to Contact Support

If you've carefully reviewed the above and still face persistent problems:

- Check for known issues or raise a question in the GoogleTest community.
- Provide detailed reproduction steps and logs.
- Use the `--gtest_help` flag to verify your flag usage.

---

## References and Next Steps

- [GoogleTest Primer](../docs/primer.md): Get started with basics of writing tests.
- [Running and Interpreting Test Results](../getting-started/first-test-and-validation/running-and-interpreting-test-results.md): Learn how test output corresponds to test runs.
- [Installation and Setup FAQ](../faq/common-usage-questions/installation-and-setup.md): Troubleshoot installation and linker problems.
- [Death Tests Guide](../docs/advanced.md#death-tests): Advanced guidance on stable death test practices.
- [Parameterized Tests Guide](../guides/parameterized-and-typed-tests/writing-parameterized-tests.md): Help with parameterized test instantiation.

For specific error messages, check exact GoogleTest code locations in the test output.

---

<Note>
Tip: Use the GoogleTest flag `--gtest_list_tests` to verify that your tests are registered correctly and visible to the runner. This aids troubleshooting test discovery and run issues.
</Note>

<Warning>
Avoid mixing `TEST()` and `TEST_F()` in the same test suite, or using different fixture classes under the same test suite nameâ€”it causes runtime errors and prevents tests from running.
</Warning>

<Info>
To debug assertion failures, consider using `SCOPED_TRACE()` to add context to failures within subroutines.
</Info>

