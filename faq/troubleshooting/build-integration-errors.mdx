---
title: "How do I fix build or integration errors?"
description: "Covers the most frequent build or linking errors when setting up GoogleTest or GoogleMock, with practical advice on resolving issues related to compiler flags, dependencies, platform quirks, and integration into larger projects."
---

# How do I fix build or integration errors?

Integrating GoogleTest or GoogleMock into your C++ project can occasionally present challenges such as build failures, linking errors, or unexpected runtime issues. This FAQ addresses the most common build and linking problems encountered during setup and provides practical, actionable advice to resolve them effectively. Whether you are using CMake, Bazel, or a custom build system, these tips and diagnostics will help you align your environment and project with GoogleTest’s requirements for smooth testing workflows.

---

## Common Build and Linking Issues

### 1. Missing or Incorrect Compiler Flags

**Problem:** Compilers fail to find GoogleTest/GoogleMock headers or produce unresolved symbols during linking.

**Cause:**
- The `-I` include path for the GoogleTest/GoogleMock headers is not set or incorrect.
- The GoogleTest libraries are not linked properly (missing or wrong library paths).
- Compiler flags incompatible with your platform or not supporting required C++ standards.

**Solution:**
- Ensure your build system adds the include directory for GoogleTest, typically `googletest/include`.
- Link your test executable against the GoogleTest and GoogleMock libraries explicitly; in CMake, use `target_link_libraries(your_test_target gtest gmock)`.
- Verify that compiler flags like `-std=c++17` (or as required) are set since GoogleTest requires at least C++17.
- Confirm platform-specific compiler flags are consistent; for example, MSVC requires different flag formats than GCC or Clang.

### 2. Linking Against Incorrect or Multiple Library Versions

**Problem:** Linker errors occur due to symbol collisions or undefined references.

**Cause:**
- Multiple versions of GoogleTest or GoogleMock libraries exist in different locations.
- Static vs dynamic linking inconsistency.

**Solution:**
- Check your linker search paths to ensure only one version of each library is found and linked.
- Prefer linking consistently: either always static or always shared libraries.
- Clean your build directory and perform a full rebuild to remove stale object files.

### 3. Platform-Specific Quirks

**Problem:** Builds succeed on one OS but fail on another.

**Cause:**
- Incompatible system includes or missing dependencies.
- GoogleTest uses platform detection internally but requires compatible environment setups.

**Solution:**
- Consult the GoogleTest supported platforms and system requirements to verify compiler and OS compatibility.
- Use provided CMake or Bazel build configurations which handle most platform-specific details automatically.
- On Windows, ensure the correct Unicode and runtime settings.
- On Linux/macOS, verify that you have required development tools and permissions.

### 4. Incorrect Integration with Larger Projects

**Problem:** GoogleTest tests compile, but linking or runtime issues arise when integrated into larger systems.

**Cause:**
- Missing dependencies on test-only libraries.
- Conflicts with other parts of the system on symbols or runtime initialization.
- Incorrect registration of tests or missing entry points.

**Solution:**
- Use a dedicated test target or binary linked explicitly against GoogleTest and GoogleMock.
- Make sure `InitGoogleTest()` is called before `RUN_ALL_TESTS()` in your `main()`.
- Avoid mixing build configurations (e.g., debug and release) for GoogleTest and your code.
- Follow best practices for test organization and main function setup as shown in the [Getting Started guide](https://github.com/google/googletest/blob/main/docs/getting-started/configuration-first-run/your-first-test.md).

### 5. Dependency Issues with GoogleMock

**Problem:** Linking errors referencing GoogleMock’s symbols.

**Cause:**
- GoogleMock is not built or linked properly alongside GoogleTest.

**Solution:**
- Ensure you build and link both `gtest` and `gmock` libraries.
- When using CMake, link your tests with `gmock_main` if you want to link against the provided main() function.
- Verify that your include paths cover both GoogleTest and GoogleMock headers.

---

## Practical Tips

- **Validate Build Environment Early:** Before adding GoogleTest to your project, confirm your compiler supports C++17 or higher and that your build system can handle external dependencies.

- **Use Official Build Methods:** Where possible, use the official CMake integration or Bazel rules for GoogleTest to minimize manual configuration errors.

- **Keep Test Code Separate:** Isolate your test code and dependencies in dedicated targets to avoid polluting production builds.

- **Check for Conflicting Macros or Defines:** Sometimes build issues arise from macro conflicts or compiler definitions. Avoid globally defining macros that may conflict with GoogleTest.

- **Clean Build on Configuration Changes:** Always perform a clean build after changing GoogleTest versions or adjusting integration settings.

- **Consult the Official Samples:** GoogleTest repository provides samples showing integration strategies. Use them as a model.

---

## Troubleshooting Workflow

### Step 1: Confirm Include Paths

- Verify that `gtest/gtest.h` can be found by the compiler.
- Use verbose compiler output to check include directories.

### Step 2: Verify Library Linking

- Check that GoogleTest and GoogleMock libraries appear in linker command.
- Use tools like `ldd`, `nm` or equivalent to inspect linked libraries.

### Step 3: Simplify Your Build

- Temporarily strip your build to a minimal test executable to isolate the problem.
- Confirm that sample tests from the GoogleTest repository build and run.

### Step 4: Review Compiler Flags

- Ensure the recommended flags like `-std=c++17` are present.
- Check for incompatible language settings.

### Step 5: Look for Platform or Toolchain Issues

- On Windows, check for Unicode settings and runtime library conflicts.
- On Linux/macOS, validate symlinks and permissions.

### Step 6: Reach Out to the Community or Support

- After exhausting above steps, seek help using GoogleTest community forums or GitHub issues with detailed logs.

---

## Useful References

- [GoogleTest Installation Methods](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/installation-methods.md)
- [Getting Started: Configuration & First Steps](https://github.com/google/googletest/blob/main/docs/getting-started/configuration-first-run/configuration-setup.md)
- [Running and Configuring Tests](https://github.com/google/googletest/blob/main/docs/api-reference/core-testing-api/running-and-configuring-tests.md)
- [Troubleshooting Common Setup Issues](https://github.com/google/googletest/blob/main/docs/getting-started/validation-troubleshooting/common-issues.md)
- [Build System & Platform Integration](https://github.com/google/googletest/blob/main/docs/concepts/integration-patterns-advanced/build-system-and-platform-integration.md)

---

> For persistent build or integration difficulties, verify your environment matches supported platforms and compiler versions listed in [System Requirements](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/system-requirements.md) before proceeding.

---

## Summary of Best Practices

| Issue                          | Best Practice Summary                              |
|-------------------------------|---------------------------------------------------|
| Include Paths                  | Add correct `-I` flags for both GoogleTest/Mock   |
| Linking                       | Link explicitly with `gtest` and `gmock` libraries|
| Compiler Compatibility         | Use C++17 compatible compilers, proper flags      |
| Platform Specific Setup        | Use CMake/Bazel official integration tools        |
| Multiple library versions      | Avoid multiple versions and conflicting libraries  |
| Test Entry Point              | Call `InitGoogleTest()` before `RUN_ALL_TESTS()`  |
| Clean Builds                  | Clean rebuild after configuration changes         |

---