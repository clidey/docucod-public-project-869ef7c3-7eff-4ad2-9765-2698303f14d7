---
title: "Build & Compilation Errors"
description: "Provides solutions and orients users on how to resolve build failures, including missing dependencies, C++ standard mismatches, improper configurations, and platform-specific quirks. Highlights the most common error messages and their fixes."
---

# Build & Compilation Errors FAQ

This FAQ provides practical solutions and guidance to resolve common build failures encountered when compiling GoogleTest and GoogleMock. It focuses specifically on errors related to missing dependencies, C++ standard mismatches, improper configurations, and platform-specific issues, helping you restore your build environment quickly and confidently.

---

## 1. Common Build Failures and Their Solutions

### Missing Dependencies or Headers
- **Problem:** The build fails due to missing header files or libraries, e.g., `gmock/gmock.h` or GoogleTest libraries.
- **Solution:**
  - Verify that you have properly cloned the entire GoogleTest repository including GoogleMock.
  - Ensure include paths are correctly set to point to the `googletest/include` and `googlemock/include` directories.
  - When using CMake, refer to the [Installing with CMake](https://github.com/google/googletest/tree/main/docs/installing_with_cmake.md) guide to correctly add and link `gtest` and `gmock` libraries.
  - Double-check that you link with the correct targets (`gtest`, `gmock`, `gmock_main`, `gtest_main`) depending on your usage.

### C++ Standard Compatibility Errors
- **Problem:** Compile errors related to the used C++ standard, such as unsupported syntax or missing language features.
- **Solution:**
  - GoogleTest and GoogleMock require **C++17 or newer**. Ensure your compiler is configured to compile with at least `-std=c++17`.
  - Confirm that your compiler version meets minimum requirements (e.g., MSVC 2015 or later, GCC 7 or later, Clang 5 or later).
  - If using CMake, verify that the `cxx_std_17` feature is enabled and enforced by the project.
  - For example, the internal build scripts enforce this via compiler flags such as `-std=c++17`.

### Build Configuration and Flag Issues
- **Problem:** Compilation errors or warnings arise from improper flags or mismatches in exception handling or runtime settings.
- **Solution:**
  - When using MSVC, disable conflicting compiler flags like `/MD` if building static libraries; alternatively, follow internal_utils.cmake recommendations to use `/MT` for static runtime linkage.
  - Avoid incompatible flag combinations that disable exceptions or RTTI unless explicitly supported.
  - If you encounter warnings such as C4301 or C4373 when mocking methods with `const` parameters, understand this is an MSVC compiler quirk related to parameter const qualifiers—remove top-level `const` in parameter declarations for mock methods.
  - Check your CMake or build system configuration against the official GoogleTest CMake helpers that set flags correctly for your compiler.

### Platform-Specific Quirks
- **Windows:**
  - Beware of macro redefinitions interfering with method names. GoogleMock handles this (e.g., `Method` macro redefinition tests).
  - Ensure you have Unicode (`-D_UNICODE`) and strict Windows definitions enabled if building on Windows.

- **Unix-like Systems:**
  - Confirm that pthreads are available and enabled if required.
  - The build system disables pthreads on MinGW; for other platforms, pthreads are automatically enabled.

### Linking Errors
- **Problem:** Linker errors indicating missing symbols for GoogleTest or GoogleMock functions.
- **Solution:**
  - Link against `gtest` and `gmock` libraries explicitly.
  - When using test runners (`gtest_main` or `gmock_main`), link accordingly.
  - Check that build order includes dependency libraries.

---

## 2. Most Common Error Messages and Fixes

<AccordionGroup title="Error Messages & Their Fixes">
<Accordion title="‘No member named MOCK_METHOD’ or similar macro errors">

This generally occurs if GoogleMock headers are not properly included or the macro is not defined.

- Make sure to include `<gmock/gmock.h>` before using mock macros.
- Confirm your include paths are correctly set for GoogleMock.

</Accordion>
<Accordion title="Compiler warning C4301 or C4373 on const parameters with MSVC">

- The root cause is MSVC incorrectly handling const qualifier on parameters.
- Remove top-level `const` from parameters in mock method declarations.
- This warning is benign but cleaning it helps keep build output clean.

</Accordion>
<Accordion title="Linker errors: undefined references to gtest or gmock symbols">

- Verify that `gtest`, `gmock`, and their respective main libraries are linked.
- If using CMake, confirm the usage of `target_link_libraries` with these libraries.
- Ensure binaries are built successfully before linking.

</Accordion>
<Accordion title="C++ standard related errors (e.g., auto, std::unique_ptr, no matching function)">

- These errors almost always denote that C++17 or later is not enabled.
- Add appropriate compiler flags such as `-std=c++17`.
- Upgrade your compiler if it doesn’t support C++17.

</Accordion>
<Accordion title="Build fails during GoogleMock test compilation due to macro name conflicts">

- Confirm you are not including conflicting platform headers before GoogleMock.
- GoogleMock internally tests macro redefinition issues; your build must follow order of includes correctly.

</Accordion>
</AccordionGroup>

---

## 3. Best Practices to Avoid Build Failures

- Always lock your compiler and standard versions to supported levels.
- Use the official CMake build scripts or recommended build system integration to manage flags and dependencies.
- Define mock methods with `MOCK_METHOD` in `public:` sections and avoid adding const to parameters unless necessary.
- Use `ON_CALL` and `EXPECT_CALL` correctly; setting expectations before invocation prevents unexpected runtime behaviors.
- For complex mocks and large test suites, move mock class constructors and destructors out of header to `.cc` files to reduce compile times.
- On Windows, avoid `/clr` flag when compiling mocks to prevent compiler resource exhaustion.

---

## 4. Troubleshooting Workflow

<Steps>
<Step title="Step 1: Review Compiler and Standard Setup">
Make sure your compiler supports C++17 and you have enabled it with your build system.
</Step>
<Step title="Step 2: Verify Include and Link Paths">
Check that GoogleTest and GoogleMock include directories are added.
Ensure your targets/linker include `gtest` and `gmock` libraries.
</Step>
<Step title="Step 3: Inspect Error Messages Carefully">
Look for macro-related errors, missing symbols, or incompatibilities.
Cross-reference them with known issues such as MSVC const warnings or missing mocks.
</Step>
<Step title="Step 4: Use Verbose Build Output">
Enable verbose or debug flags in your build system.
On test runtime, use `--gmock_verbose=info` to gain insights on expectation matching.
</Step>
<Step title="Step 5: Consult Platform-Specific Notes">
Adjust build flags or defines according to your OS.
On Windows, verify runtime linkage and threading flags.
On Unix, confirm pthread availability.
</Step>
</Steps>

---

## 5. Helpful Tips

- Use the supplied CMake macros and functions when available to ensure proper configuration.
- Always place `MOCK_METHOD` declarations in the `public:` section to avoid access problems.
- Use `RetiresOnSaturation()` on expectations when you want them to become inactive after being matched.
- Remember that `EXPECT_CALL` expectations are sticky by default unless opted out.
- For uninteresting calls that cause warnings, consider making your mock a `NiceMock` to suppress noise.
- Leverage `Mock::VerifyAndClearExpectations()` if you need to enforce expectation verification earlier.

---

## 6. Additional Resources

- [Installing with CMake](https://github.com/google/googletest/blob/main/docs/installing_with_cmake.md): Step-by-step installation guide.
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly tutorial covering mock basics.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Detailed API reference for mock methods.
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html): Additional troubleshooting guidance.
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md): Core test writing and running guide.

---

_For platform-specific or integration issues not resolved by this FAQ, refer also to the Environment & Platform Issues FAQ and the Installation and Setup guides._

---

# Summary

This FAQ addresses build and compilation errors within the GoogleTest and GoogleMock frameworks, focusing on missing dependencies, compiler C++ standard mismatches, configuration errors, and platform-specific quirks. Key sections include common build failure fixes, typical error message explanations, best practices for configuration, a stepwise troubleshooting workflow, and useful tips to maintain a clean development environment. 

Important links are provided to related setup, mocking, and advanced usage documentation for comprehensive user assistance. Users are encouraged to review project configuration and installation sections to prevent build problems proactively.

# Key Sections
- Common build failures and solutions
- Common error messages and fixes
- Best practices to avoid build issues
- Troubleshooting workflow
- Helpful build and configuration tips
- Additional reference materials

# Important Links
- [Installing with CMake](https://github.com/google/googletest/blob/main/docs/installing_with_cmake.md)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html)

# Cross-References
- Setup and Installation Guides
- Environment & Platform Issues Troubleshooting
- Mocking Basics and Core API References

# Action Items
- Verify compiler and build toolchain settings adhere to C++17
- Ensure proper linking of GoogleTest and GoogleMock libraries
- Use CMake helper scripts for consistent compiler flags
- Address MSVC-specific warnings by adjusting mock parameter declarations
- Employ debugging flags like `--gmock_verbose=info` during test runs

---