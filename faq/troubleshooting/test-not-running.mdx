---
title: "Why are my tests not running or being discovered?"
description: "Addresses typical causes for tests not being executed, such as misconfigured test macros, missing main functions, or build and linking problems, with links to helpful configuration and entry point files."
---

# Why Are My Tests Not Running or Being Discovered?

This page helps you understand common reasons why your tests might not be executed or detected by GoogleTest and GoogleMock. It highlights typical causes such as misconfigured test macros, missing `main()` functions, or build and linking issues. Clear guidance and links to related configuration and entry point documentation are provided to get your tests running smoothly.

---

## Common Reasons for Tests Not Running or Being Discovered

### 1. Missing or Incorrect Test Macros

GoogleTest detects tests through special macros such as `TEST()`, `TEST_F()`, and `TYPED_TEST()`. If these macros are not used correctly, or if test definitions are missing:

- The test runner will not recognize or register your tests.
- Test cases or test suites may silently be skipped.

**How to fix:**
- Ensure that each test is declared with the correct macros.
- Confirm that the test source files are compiled and linked into your test binary.

### 2. Absence of a Proper `main()` Function

Your test binary must have an entry point to initialize and run tests. GoogleTest and GoogleMock provide default mains via:

- Linking with `gtest_main` or `gmock_main` libraries, which supply a default `main()` function that initializes GoogleMock and runs all tests.
- Writing a custom `main()` with appropriate initialization calls.

If your binary lacks a `main()`:

- The executable may build but will not run any tests.
- You might encounter linker errors or a silent exit.

**How to fix:**
- Link to the provided main libraries (`gtest_main` or `gmock_main`) if you want the default test runner.
- Alternatively, implement your own `main()` and call:
  ```cpp
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
  ```

For more detailed instructions, see the [Main Entry Points & Initialization](https://google.github.io/googletest/api_reference/platform_integration_and_utilities/main_entry_points.html) page.

### 3. Build and Linking Configuration Issues

Test discovery depends on properly compiled and linked object files containing tests. Important considerations:

- Test source files must be included in your build system.
- Test object files must be linked together in the final test executable.
- Linking against GoogleTest and GoogleMock libraries is required.
- Misconfiguration can cause tests not to register.

**How to fix:**
- Verify your build system includes all test files.
- Confirm linkage to GoogleTest and GoogleMock.
- Review the [Setting Up and Building Tests](https://google.github.io/googletest/guides/getting-started/setup-build-integration.html) guide for configuring your build environment.

### 4. Incorrect Test Filter or Command-Line Flags

Sometimes tests are discovered but appear to not run because of filtering:

- The `--gtest_filter` or other test selection flags may exclude all tests.
- Verbose output flags may hide test execution details.

**How to fix:**
- Check that no restrictive filters are applied.
- Run your test binary without filters to see all tests.

### 5. Test Fixtures or Mocks Not Properly Defined

When using GoogleMock, improper mock class or fixture definitions could cause tests not to run or fail silently.

- Ensure mocks use `MOCK_METHOD` macros properly.
- Verify that mock expectations (`EXPECT_CALL`) are correctly set.
- Confirm you are exercising the mocks in your test.

See the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) and [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for thorough mock creation and usage guidance.

---

## Step-by-Step Verification and Troubleshooting

<Steps>
<Step title="Verify Test Macros">
Ensure all your test functions are marked with valid macros like `TEST`, `TEST_F`, `TYPED_TEST`, or `TYPED_TEST_P` and that these are not conditionally compiled out.
</Step>
<Step title="Check for `main()` Function">
Confirm you have an entry point:
- Either link against `gtest_main` or `gmock_main` which provide a default `main()`.
- Or implement your own `main()` calling `InitGoogleMock()` and `RUN_ALL_TESTS()`.
See the main entry points reference documentation.
</Step>
<Step title="Validate Build Configuration">
Make sure your test source files are included and linked correctly with the required GoogleTest and GoogleMock libraries.
</Step>
<Step title="Run Without Filters">
Run your test executable without test filtering flags like `--gtest_filter=...` to ensure all tests can be discovered.
</Step>
<Step title="Enable Verbose Output for Debugging">
Use the flag `--gmock_verbose=info` to get detailed logs from GoogleMock about test discovery and execution for debugging purposes.
</Step>
</Steps>

---

## Common Pitfalls

- **Defining mock methods outside `public:`**: `MOCK_METHOD` must be placed in the `public:` section of the mock class regardless of the base class access level.
- **Using mismatched macros for mocks**: With newer gMock versions, prefer `MOCK_METHOD` with its arguments correctly provided. Avoid legacy `MOCK_METHODn` macros unless specifically required.
- **Forgetting to initialize GoogleMock in custom `main()`**: Always call `::testing::InitGoogleMock(&argc, argv);` before running tests.
- **Omitting linkage against `gmock_main` or `gtest_main`**: This omission results in missing `main()` errors.
- **Not compiling test files at all**: Source files without tests or containing only mocks but never instantiated won't contribute tests.

---

## Helpful Links

- [Writing Your First Unit Test](https://google.github.io/googletest/guides/getting-started/writing-your-first-tests.html) — A beginner-friendly guide on creating tests with GoogleTest and GoogleMock.
- [Setting Up and Building Tests](https://google.github.io/googletest/guides/getting-started/setup-build-integration.html) — How to properly configure your build environment.
- [Main Entry Points & Initialization](https://google.github.io/googletest/api_reference/platform_integration_and_utilities/main_entry_points.html) — Details on linking and implementing the test binary entry point.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Learn how to define and use mock classes and methods.
- [Troubleshooting & Common Setup Issues](https://google.github.io/googletest/getting-started/first-steps-validation/troubleshooting.html) — Common issues and fixes related to test setup.

---

## Summary

To ensure your tests run as expected, verify that all tests are declared using the proper GoogleTest macros, confirm your test binary has a valid `main()` function (either via linking or custom implementation), and that all test files are compiled and linked correctly. Watch for build or linkage errors and avoid common pitfalls like incorrect mock method visibility. Finally, leverage command-line flags and verbose logging to diagnose hidden test discovery problems.


<Tip>
**Tip:** If tests are not discovered, enable verbose logging with `--gmock_verbose=info` to trace test registration and verify whether macros are correctly processed and linked.
</Tip>

<Note>
Remember that `EXPECT_CALL` and `ON_CALL` settings in your mocks must be done before the tested code exercises the mock. Failing to do so can cause tests to be silently skipped or behave unexpectedly.
</Note>

---

## Troubleshooting Checklist

<AccordionGroup title="Troubleshooting Common Causes for Tests Not Running">
<Accordion title="I don't see any tests listed in the output.">
- Confirm your test source files contain `TEST` macros and are built into the test executable.
- Check for compilation errors or excluded files.
- Verify no test filters are hiding your tests.
</Accordion>
<Accordion title="Linker errors about missing main function.">
- Link against `gtest_main` or `gmock_main` to provide the default `main()`.
- If custom `main()` is used, ensure it calls `::testing::InitGoogleMock()` and `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Tests appear but none run or they run zero tests.">
- Check for disabling macros (e.g., `GTEST_SKIP()` or conditional compilation).
- Verify mock expectations are set before mock usage.
- Confirm no runtime filters are preventing execution.
</Accordion>
<Accordion title="Tests are discovered but fail silently or panic unexpectedly.">
- Check mock class definitions for correct `MOCK_METHOD` usage.
- Verify virtual destructors exist on interfaces being mocked.
- Use `--gmock_verbose=info` for detailed run-time logs.
</Accordion>
</AccordionGroup>