---
title: "Tests are not running or being discovered—what should I check?"
description: "Explains causes and remedies for tests not appearing or running in output, such as macro misplacement, test registration nuances, and naming conventions."
---

# Tests Are Not Running or Being Discovered—What Should I Check?

When writing tests with GoogleTest, encountering situations where tests do not appear in the output or fail to run is a common frustration. This guide walks you through the most frequent causes of this issue and offers actionable remedies to ensure your tests are correctly discovered and executed.

---

## 1. Common Causes of Tests Not Running

### 1.1. Incorrect Use or Placement of Test Macros

GoogleTest relies on specific macros to define and register tests. If these macros are not used correctly, tests won't be discovered or run.

- **Use the Macros at Global or Namespace Scope:**
  Test definitions like `TEST()`, `TEST_F()`, and `TEST_P()` must appear at the global or namespace scope, not inside functions or other blocks.

- **Avoid Defining Tests Inside Classes or Functions:**
  If you define tests inside a class or function, GoogleTest will not detect them.

- **No Underscores in Suite or Test Names:**
  Ensure `TestSuiteName` and `TestName` do not contain underscore characters (`_`). GoogleTest reserves underscore for special purposes, and including them can cause test registration to fail silently or emit errors.

- **Example of Correct Declaration:**

  ```cpp
  // Correct: At global scope
  TEST(FooTest, DoesSomething) {
    EXPECT_TRUE(condition);
  }

  // Correct: Using test fixture
  class MyFixture : public testing::Test {};

  TEST_F(MyFixture, HandlesCase) {
    ...
  }
  ```

- **Incorrect (Won't Register):**

  ```cpp
  void Foo() {
    TEST(FooTest, Won'tRegister) {  // Test inside a function
      EXPECT_TRUE(false);
    }
  }
  ```

### 1.2. Mixing Test Fixture Classes in Same Test Suite

GoogleTest requires all tests within the same test suite to use the same fixture class. Violating this causes runtime errors or missing tests.

- **Symptoms:**
  You might see runtime failures mentioning that tests in the same suite use different fixtures.

- **How to Fix:**
  Ensure all tests in a suite share the same fixture type. If you must use different fixtures, use different test suite names.

- **Example Mistake:**

  ```cpp
  TEST_F(FixtureA, Test1) { ... }
  TEST_F(FixtureB, Test2) { ... }  // Both in the same test suite name
  ```

- **Resolution:**

  Use different test suite names or carefully design your fixture inheritance hierarchy.

### 1.3. Missing Default Constructor in Fixture Class

GoogleTest creates a new instance of your test fixture for each test. If your fixture lacks a public default constructor, tests won't compile or run.

- **Symptoms:**
  Compiler error: "no matching function for call to `FooTest::FooTest()`"

- **Fix:**
  Define either a public default constructor or ensure the compiler-generated one is available.

- **Example:**

  ```cpp
  class MyTest : public testing::Test {
   public:
    MyTest() = default;  // Ensure default ctor is accessible
  };
  ```

### 1.4. Test Suites or Tests Disabled by Name

GoogleTest uses the prefix `DISABLED_` to disable tests or test suites.

- **Check if Your Tests Are Disabled:**
  Tests starting with `DISABLED_` in their suite or test names won't run.

- **How to Re-enable:**
  Remove the `DISABLED_` prefix or run tests with the command line flag `--gtest_also_run_disabled_tests` to include them temporarily.

### 1.5. Using `TEST_P` Without Instantiation

Tests defined with `TEST_P` (value-parameterized) require instantiations to execute. If you define a parameterized test but never call `INSTANTIATE_TEST_SUITE_P` for it, GoogleTest will report the suite as uninstantiated and not run any tests.

- **Symptoms:**
  Tests do not appear, or errors/warnings indicate a missing test instantiation.

- **Fix:**
  Add instantiations with `INSTANTIATE_TEST_SUITE_P`.

- **Example:**

  ```cpp
  class FooTest : public testing::TestWithParam<int> {};

  TEST_P(FooTest, DoesSomething) { ... }

  INSTANTIATE_TEST_SUITE_P(InstantiationName, FooTest, testing::Values(1, 2, 3));
  ```

- **Suppression:**
  If a parameterized test suite is deliberately left without instantiation (e.g., in a library), suppress errors with:

  ```cpp
  GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(FooTest);
  ```

### 1.6. File and Line Mismatch or Skipped Test Conditions

- Ensure your test files are compiled and linked properly.
- Verify no `GTEST_SKIP()` calls skip your tests silently.
- Confirm that your test names and suite names match the expected pattern for filtering.

## 2. Verification and Debugging Steps

To determine why tests are not running, use the following systematic approach:

### 2.1. List Tests

Run your test executable with the flag:

```shell
./your_test_binary --gtest_list_tests
```

This command will output all registered tests. If your tests are not listed here, they are not being registered correctly.

### 2.2. Confirm Naming and Macro Usage

Check your source code for:

- Correct use of `TEST()`, `TEST_F()`, or `TEST_P()` macros at global scope.
- No underscores in test suite or test names.
- Fixture classes have default constructors.
- Parameterized tests have corresponding instantiations.

### 2.3. Check Filtering and Disabled Tests

The `--gtest_filter` flag can inadvertently exclude tests. Run tests without filters or use:

```shell
./your_test_binary --gtest_filter=*
```

To include disabled tests, add:

```shell
./your_test_binary --gtest_also_run_disabled_tests
```

### 2.4. Build and Link Verification

- Confirm test source files are compiled and linked into the test binary.
- Watch for linker errors or warnings that may prevent test symbols from appearing.

### 2.5. Diagnose Fixture Conflicts

- If two fixtures share the same name but are in different namespaces or translation units, rename them.
- Mixing `TEST` and `TEST_F` in the same suite causes failure.

## 3. Best Practices to Ensure Tests Run

- Define tests (using `TEST`, `TEST_F`, `TEST_P`) at global or namespace scope.
- Avoid underscores (`_`) in suite and test names to prevent registration conflicts.
- Ensure your test fixture class has a default constructor accessible by GoogleTest.
- Always instantiate parameterized tests if you define `TEST_P` tests.
- Use unique test suite names to avoid conflicts, especially when using fixtures across namespaces.

## 4. Working with Disabled Tests

Temporarily disable a test by prefixing its name with `DISABLED_`:

```cpp
TEST(FooTest, DISABLED_BrokenTest) { ... }
```

To run disabled tests:

```shell
./your_test_binary --gtest_also_run_disabled_tests
```

Disabled tests are compiled but skipped at runtime to avoid silent failures.

## 5. Example of a Minimal Correct Test

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Running this program should discover and run the `SampleTest.Addition` test.

---

## 6. Additional Resources

- [GoogleTest Primer](primer.md)
- [Value-Parameterized Tests Guide](advanced.md#value-parameterized-tests)
- [FAQ: Why tests don't run?](faq.md#tests-are-not-running-or-being-discovered)
- [Test Definition & Execution](api-reference/core-testing-api/test-definition-execution.md)
- [Common Setup Issues](getting-started/first-steps-validation/common-setup-issues.md)

---

## Troubleshooting Checklist

- Are your test macros (`TEST`, `TEST_F`, `TEST_P`) declared at global or namespace scope?
- Do your test suites and test names avoid underscores `_`?
- Does your fixture class have a public default constructor?
- Have you instantiated your parameterized tests with `INSTANTIATE_TEST_SUITE_P`?
- Are any tests disabled unintentionally (look for `DISABLED_` prefixes)?
- Is your test binary built and linked including all test source files?
- Are you filtering tests on the command line? Have you tried running with `--gtest_filter=*`?

<Callout title="Note">
Following these guidelines ensures your tests are discoverable and runnable by GoogleTest, resulting in reliable and predictable test execution.
</Callout>
