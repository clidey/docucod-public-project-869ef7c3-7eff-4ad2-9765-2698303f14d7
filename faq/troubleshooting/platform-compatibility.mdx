---
title: "Platform & Compiler Compatibility Issues"
description: "Details solutions for problems relating to supported platforms, C++ standard requirements, and compiler idiosyncrasies, ensuring smooth operation across varied environments."
---

# Platform & Compiler Compatibility Issues

This document addresses common challenges and solutions related to platform and compiler compatibility when building and using GoogleTest and GoogleMock. It guides you through understanding supported platforms, ensuring compliance with the required C++ standard, handling compiler-specific quirks, and configuring your environment for a smooth testing experience across diverse systems.

---

## Table of Contents

- [Supported Platforms](#supported-platforms)
- [Minimum C++ Standard Requirement](#minimum-c-standard-requirement)
- [Platform Detection and Feature Macros](#platform-detection-and-feature-macros)
- [Common Compiler Issues and Solutions](#common-compiler-issues-and-solutions)
- [Thread Safety and Multi-threading Support](#thread-safety-and-multi-threading-support)
- [Building as Shared or Static Libraries](#building-as-shared-or-static-libraries)
- [Avoiding Macro Name Clashes](#avoiding-macro-name-clashes)
- [Tips for Troubleshooting Compatibility Issues](#tips-for-troubleshooting-compatibility-issues)

---

## Supported Platforms

GoogleTest and GoogleMock support a wide range of operating systems and platforms, including but not limited to:

- Linux distributions (including Android)
- Windows Desktop (including MinGW)
- macOS and iOS
- FreeBSD, OpenBSD, NetBSD
- Solaris, AIX, HP-UX
- Embedded platforms with some limitations

Automatic detection of the platform is performed internally via macros such as `GTEST_OS_LINUX`, `GTEST_OS_WINDOWS`, and `GTEST_OS_MAC`. These macros inform GoogleTest of platform-specific capabilities to enable or disable features accordingly.

For detailed platform support and compatibility, see the official [Supported Platforms](../platforms.md) documentation.

---

## Minimum C++ Standard Requirement

GoogleTest requires a minimum of C++17 support from your compiler to build and run successfully. This is enforced at compile time and ensures that all necessary language features are available.

### Ensuring Compliance

- Verify your compiler supports C++17 or later, e.g., GCC 7+, Clang 5+, MSVC 19.11+.
- In CMake builds, specify the standard explicitly:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- For manual build systems, add the appropriate compiler flags (e.g., `-std=c++17` for GCC/Clang).

### Failure Symptoms

Failing to meet the standard results in compilation errors or preprocessor failures due to missing features. If you encounter errors related to language support, verify your compiler version and flags.

---

## Platform Detection and Feature Macros

GoogleTest defines a set of macros that communicate details about the platform and feature availability:

- **Platform Macros** (auto-detected, never to be manually defined):
  - `GTEST_OS_LINUX`, `GTEST_OS_WINDOWS`, `GTEST_OS_MAC`, among others.

- **Feature Macros** (usually auto-detected but overrideable):
  - `GTEST_HAS_PTHREAD` – Indicates if pthread threads are available.
  - `GTEST_HAS_EXCEPTIONS` – Indicates if C++ exceptions are enabled.
  - `GTEST_HAS_RTTI` – Indicates if Run-Time Type Information is enabled.
  - `GTEST_HAS_STD_WSTRING` – Indicates if wide strings (`std::wstring`) are supported.
  - `GTEST_HAS_CLONE` – Indicates if the `clone` system call is available on the platform.
  - `GTEST_HAS_FILE_SYSTEM` – Indicates if file system APIs are available.
  - `GTEST_HAS_STREAM_REDIRECTION` – For capturing stdout/stderr streams.
  - `GTEST_HAS_DEATH_TEST` – Indicates if death tests are supported.

These macros influence which internal GoogleTest features are enabled or disabled at compile time.

### Overriding Macros

If the automated detection does not work for your build environment, you can define these macros manually in your compiler flags (e.g., `-DGTEST_HAS_PTHREAD=0`) to enable or disable specific features.

Avoid defining platform macros yourself, as they are set automatically.

---

## Common Compiler Issues and Solutions

### 1. Compiler Version Too Old

- Issue: If your compiler does not support C++17 or newer, GoogleTest will fail to compile.
- Solution: Upgrade to a recent version of your compiler that supports at least C++17.

### 2. RTTI (Run-Time Type Information) Disabled

- Issue: Some builds disable RTTI for performance or binary size reasons.
- Consequence: GoogleTest requires RTTI for features such as safe downcasting and dynamic type checks.
- Solution: Enable RTTI in your compiler settings or define `-DGTEST_HAS_RTTI=0` if your environment does not support it, but be aware this may limit GoogleTest's capabilities.

### 3. Exceptions Disabled

- Issue: Exception handling might be disabled.
- Impact: GoogleTest will detect this and disable exception-using features.
- Solution: Enable exceptions or verify that GoogleTest is compiled with the appropriate settings.

### 4. Linking and Runtime Library Mismatches (Windows)

- Issue: Linking errors due to mismatched runtime libraries (static vs dynamic CRT) on MSVC.
- Symptoms: Link-time errors or runtime crashes.
- Solution:
  - Use the `gtest_force_shared_crt` CMake option when building GoogleTest as a shared library to match the runtime linkage.
  - Build and link your tests with consistent CRT settings.

### 5. Macro Conflicts

- Issue: Macro names like `TEST` or `ASSERT_*` clash with other libraries.
- Solution: Use GoogleTest's renaming macros, e.g., define `-DGTEST_DONT_DEFINE_TEST=1` to avoid conflicts and use the prefixed names like `GTEST_TEST`.

### 6. Missing pthreads

- Issue: On some platforms, pthreads may not be available or detected incorrectly.
- Solution: Add `-DGTEST_HAS_PTHREAD=0` or set the appropriate CMake flags to disable pthreads support if unavailable.

---

## Thread Safety and Multi-threading Support

GoogleTest is thread-safe on platforms where pthreads or equivalent threading libraries are available.

- `GTEST_IS_THREADSAFE` macro indicates if thread safety is enabled.
- It is important to link with the pthread library on Unix-like systems.
- On Windows, GoogleTest uses native threading primitives.

If GoogleTest does not detect pthreads automatically in your environment, manually force detection by adding `-DGTEST_HAS_PTHREAD=1` to your compiler flags and link with pthread.

Note: Using GoogleTest assert macros concurrently from multiple threads may be unsafe if thread safety is not enabled.

---

## Building as Shared or Static Libraries

### Building GoogleTest as a Shared Library (Windows DLL)

- Define `-DGTEST_CREATE_SHARED_LIBRARY=1` when building GoogleTest itself.
- Define `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when building tests that link to the shared GoogleTest library.
- This avoids symbol visibility issues and ensures correct linkage.

### Static Libraries

- By default, GoogleTest is built as a static library.
- Static linking is simpler and recommended unless your environment requires dynamic linking.

### Notes

- On Windows, static and shared builds require consistent C runtime settings to prevent conflicts.

---

## Avoiding Macro Name Clashes

Because GoogleTest uses macros like `TEST` and `ASSERT_EQ` in the global namespace, they may conflict with other libraries or your own code.

### To Avoid Conflicts:

- Define macros like `-DGTEST_DONT_DEFINE_TEST=1` in your compile flags.
- Use the prefixed names like `GTEST_TEST` instead.

This mechanism reduces collision and allows coexistence with other frameworks or legacy code.

---

## Tips for Troubleshooting Compatibility Issues

- Always verify compiler version and C++ standard compliance before integrating GoogleTest.
- Use the official [Supported Platforms](../platforms.md) reference to ensure your OS/compiler combo is supported.
- When facing build errors, review compiler flags for macros related to threading, RTTI, and exceptions.
- Use CMake’s `BUILD_SHARED_LIBS` and `gtest_force_shared_crt` options to manage library type and CRT linkage.
- Inspect linker flags especially when building on Windows to prevent runtime mismatches.
- Carefully read error messages related to missing headers or functions to identify missing platform features.
- Consult the [Getting Started](../../getting-started/setup-prerequisites-installation/prerequisites-system-requirements.md) and [Troubleshooting Build Errors](../../faq/troubleshooting/build-errors.md) pages for detailed step-by-step help.

---

## Additional Resources and References

- [Supported Platforms](../platforms.md)
- [Prerequisites & System Requirements](../../getting-started/setup-prerequisites-installation/prerequisites-system-requirements.md)
- [Basic Setup and Installation](../../faq/common-questions/basic-setup.md)
- [Troubleshooting Common Setup Issues](../../getting-started/first-test-and-validation/troubleshooting-common-issues.md)
- [GoogleTest Generic Build Instructions](../../googletest/README.md)

---

> Ensuring your C++ compiler and platform environment are correctly configured is crucial to leveraging GoogleTest’s full capabilities without build or runtime failures. Follow these guidelines and recommended practices to achieve a robust, cross-platform testing setup.
