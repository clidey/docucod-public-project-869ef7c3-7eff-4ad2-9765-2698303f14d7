---
title: "Build, Integration, and Compatibility Issues"
description: "Guides users through resolving build problems, linking issues, compiler compatibility, and typical pitfalls when integrating with CMake or Bazel. Includes advice on upgrading C++ standards and troubleshooting platform-specific errors."
---

# Build, Integration, and Compatibility Issues FAQ

This FAQ helps you troubleshoot and resolve common build problems, linking errors, compiler compatibility challenges, and platform-specific pitfalls encountered when integrating GoogleTest and GoogleMock into your C++ projects using build tools like CMake or Bazel. It also provides guidance on upgrading C++ standards and navigating typical errors across platforms.

---

## 1. Common Build and Linking Issues

### Why do I get linker errors when building my tests?
Linker errors usually indicate that GoogleTest or GoogleMock libraries are not correctly linked or missing.

- **Solution**: Ensure that your build system explicitly links against `gtest`, `gtest_main`, `gmock`, and/or `gmock_main`. For example, in CMake, link these libraries in your target:

  ```cmake
  target_link_libraries(my_test PRIVATE gtest gtest_main gmock gmock_main pthread)
  ```

- On Windows, check that you link against the proper runtime and resolve any MSVC-specific linking issues, such as using the `gtest_force_shared_crt` CMake option.

- Make sure that your build includes the source files of GoogleTest and GoogleMock or finds their pre-built libraries.

### I see errors related to missing pthreads or threading support on my platform.
GoogleTest requires pthread support on POSIX systems.

- **Solution**: Verify that your platform and compiler support pthreads. On Linux/macOS, ensure that linking includes `-lpthread`.

- On Windows, pthreads are not used; ensure you are using a compatible build configuration for Windows.

- Consult the Supported Platforms & Requirements guide to verify pthread availability.

### C++ Standard Compatibility Issues
I get compilation errors related to C++17 support or macros like `noexcept`.

- GoogleTest and GoogleMock require a C++17-compliant compiler.

- Make sure your compiler flags include `-std=c++17` or equivalent.

- Upgrade older compilers to meet the minimum version requirements detailed in the Supported Platforms & Requirements documentation.

### Why am I getting warnings or errors about overriding methods with const or volatile qualifiers?

- This is commonly a Microsoft Visual C++ compiler issue where parameters declared as `const` in the method signature cause warnings.

- **Fix**: Remove top-level `const` from parameter declarations in both base and mock classes, as C++ ignores it in method parameters.

- Retain `const`ness on pointers or references as appropriate.

---

## 2. Integration with CMake or Bazel

### How should I integrate GoogleTest and GoogleMock into my CMake-based project?

- Add GoogleTest/GoogleMock either as a submodule or install system-wide.

- Link your test targets explicitly against the `gtest`, `gtest_main`, `gmock`, and/or `gmock_main` targets.

- Use the `find_package(GTest REQUIRED)` command for installed GoogleTest.

- Refer to the installation & project setup guide for concrete examples.

### How do I use `gmock_main` instead of `gtest_main`?

- `gmock_main` includes `main()` that initializes both GoogleTest and GoogleMock.

- Link your test target against `gmock_main` to use it as your entry point.

- If you provide your own `main()`, you may not need these libraries linked.

---

## 3. Typical Pitfalls and Errors

### Why does my EXPECT_CALL not work as expected?

- Expectations must be set *before* code exercising the mock is run.

- `EXPECT_CALL` statements should never follow calls to the mocked functions.

- Unique expectations may override older ones; order your expectations from general to specific.

- Use `--gmock_verbose=info` to trace expectations and understand why calls fail.

### I get a "Uninteresting function call" warning at runtime. What does it mean?

- The mock method was called but no `EXPECT_CALL` matched it.

- If it’s intentional, use `NiceMock` to suppress these warnings.

- Alternatively, add an `EXPECT_CALL(...).Times(AnyNumber())` to indicate allowed calls.

### Build or runtime errors related to mock destructor or mock strictness wrappers

- Mock classes must have virtual destructors to avoid memory issues.

- Using `NiceMock`, `NaggyMock`, and `StrictMock` wrappers can affect warning and failure behavior for uninteresting calls. Use these wrappers carefully per documented best practices.

---

## 4. Platform-Specific Errors

### Windows-Specific Notes

- Use `Calltype(STDMETHODCALLTYPE)` inside `MOCK_METHOD` for COM or Windows calling conventions.

- Link against the proper CRT runtime. Use CMake’s `gtest_force_shared_crt` option if necessary.

- Address ABI compatibility issues when mixing 32-bit and 64-bit builds.

### macOS and Linux Notes

- Ensure pthread support is available.

- Use recommended compiler flags (`-std=c++17`) with GCC or Clang.

### Embedded and Special Platforms

- GoogleTest supports embedded targets like ESP8266, ESP32.

- Follow the device-specific initialization routines.

---

## 5. Upgrading Considerations

### I need to upgrade my project to use the latest GoogleTest/GoogleMock version.

- Check the release notes and breaking changes documentation.

- Verify that your build system and compiler still meet minimum requirements.

- Revisit mock classes to update deprecated macros or behaviors.

- Use the migration and upgrade guides for smooth transitions.

---

## 6. Troubleshooting Checklist

<Steps>
<Step title="Verify Compiler and Platform Support">
Ensure your compiler supports C++17 and your platform supports required libraries (e.g., pthread).
</Step>
<Step title="Check Build Configuration">
Confirm your target links to correct GoogleTest/GoogleMock libraries.
</Step>
<Step title="Validate Mock Classes">
Check that mocked interfaces have virtual destructors and that `MOCK_METHOD` macros use correct syntax.
</Step>
<Step title="Set All Expectations Before Running Code">
Place all `EXPECT_CALL` statements before exercising mock objects.
</Step>
<Step title="Use Diagnostic Flags">
Run tests with `--gmock_verbose=info` to get detailed logs of mock interactions.
</Step>
<Step title="Consult Platform-Specific Tips">
Apply platform-specific fixes, such as calling conventions on Windows or pthread linkage on Linux.
</Step>
</Steps>

---

## 7. Getting More Help

- Refer to [Installation & Project Setup](https://github.com/google/googletest/tree/main/docs/guides/get-started/setup-installation.mdx) for comprehensive setup guidance.

- Use [Troubleshooting Setup Issues](https://github.com/google/googletest/tree/main/docs/guides/get-started/first-test-validation/troubleshooting-setup.mdx) for diagnosis of common problems.

- Engage with the [Community Support FAQ](https://github.com/google/googletest/tree/main/docs/faq/community-support/support-resources-faq.mdx) for additional channels.

- Visit the official repo: [https://github.com/google/googletest](https://github.com/google/googletest)

---

## References

- [GoogleTest Supported Platforms & Requirements](getting-started/prerequisites-installation/supported-platforms-requirements.md)
- [Integration and Compatibility Overview](overview/audience-use-cases-and-integration/integration-and-compatibility.md)
- [GoogleMock README](googlemock/README.md)
- [Setup Installation Guide](guides/get-started/setup-installation.md)
- [Troubleshooting Setup Issues](getting-started/first-test-validation/troubleshooting-setup.md)
- [Build and Integration FAQ](faq/troubleshooting/build-integration-faq.md)

---

This guide empowers you to effectively resolve and avoid build and integration issues to enable smooth adoption of GoogleTest and GoogleMock in your C++ projects.