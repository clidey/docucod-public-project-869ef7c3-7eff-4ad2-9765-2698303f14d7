---
title: "Why aren’t my tests being discovered or executed?"
description: "Troubleshoots situations where tests do not show up or run as expected. Covers possible causes like incorrect test macros, registration issues, and entry point problems in both GoogleTest and GoogleMock."
---

# Why Aren't My Tests Being Discovered or Executed?

When working with GoogleTest or GoogleMock, it can be frustrating when your tests don't appear as expected in test runs or seem to be silently skipped. This guide walks you through the common causes and actionable solutions to ensure your tests are properly discovered and executed.

---

## 1. Common Causes and How to Address Them

### a) Incorrect Use of Test Macros

GoogleTest provides different macros to define tests, such as `TEST()`, `TEST_F()`, `TEST_P()`, and others. Using the wrong macro or mixing them improperly can cause tests not to register.

- **Mismatched Fixture Usage**: When using a test fixture, ensure you use `TEST_F()` (not `TEST()`). Mixing `TEST()` and `TEST_F()` in the same test suite can cause runtime errors and prevent proper test registration.

- **Missing Default Constructor**: If your fixture class lacks a public default constructor, GoogleTest cannot create an instance and will fail to run the test. Define or default a public default constructor.

- **Macro Arguments Naming**: Avoid underscores (`_`) in test suite or test names. GoogleTest reserves underscores for special use, and using them can cause naming conflicts or silent registration failures. Only use simple C++ identifiers without underscores.

### b) Failure to Link Tests Correctly

Your build system must link all translation units containing tests properly.

- **Ensuring All Test Object Files Are Linked**: Verify that all `.cc` or `.cpp` files containing tests are included in your build targets.

- **Avoiding Duplicate Linkage or Conflicts**: Be cautious about mixing multiple versions of GoogleTest or GoogleMock libraries.

### c) Improper Initialization or Entry Point Issues

- **Calling InitGoogleTest()**: Be sure to call `testing::InitGoogleTest(&argc, argv);` early in your `main()` before `RUN_ALL_TESTS()`.

- **Using the Default Main**: If you link to `gtest_main` or `gmock_main`, you don't need to define a `main()`. Otherwise, provide one correctly; otherwise tests may not run.

- **Filtering and Environment Variables**: Check for environment variables like `GTEST_FILTER` or flags like `--gtest_filter` that might exclude tests unintentionally.

- **Test Sharding Variables**: If using sharding, ensure that the environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set properly.

### d) Disabled or Skipped Tests

- **Tests Prefixed With `DISABLED_` Are Not Run**: To temporarily disable a test, prefix its name with `DISABLED_`. Ensure you haven't accidentally disabled your tests.

- **Using `GTEST_SKIP()`**: Tests or fixtures that call `GTEST_SKIP()` during setup will not run the test.

- **Tagging for `ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`**: Parameterized tests without instantiation show up as no-tests-run errors. Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress these errors if intentional.

### e) Parameterized and Typed Test Instantiation

- **Missing or Incorrect Instantiation**: Parameterized tests (`TEST_P`, `TYPED_TEST`, etc.) must be explicitly instantiated with `INSTANTIATE_TEST_SUITE_P()` or `INSTANTIATE_TYPED_TEST_SUITE_P()`.

- **Incorrect Scope for Instantiation**: Ensure instantiation macros are placed at global or namespace scope, not inside functions.

- **Naming Collisions**: Provide unique instantiation names to avoid conflicts.

### f) Test Fixture Accessibility and Namespace Matching

- **Friend Declarations for Private Members**: If accessing private members in tests, declare your test fixture as a friend in the tested class.

- **Namespace Consistency**: Fixtures and tests must be declared in the same namespace to maintain friendship and avoid linkage issues.

---

## 2. Step-by-Step Diagnostic Checklist

Follow this workflow to diagnose test discovery issues:

<Steps>
<Step title="Verify Test Macro Usage">
Confirm you're using `TEST()` for simple tests and `TEST_F()` when using fixtures.
</Step>
<Step title="Check for Default Constructor in Fixtures">
Make sure your fixture class has a public default constructor.
</Step>
<Step title="Confirm Build and Linking">
Verify that all your test source files are compiled and linked into the test executable.
</Step>
<Step title="Inspect Command Line Flags and Environment Variables">
Check `--gtest_filter`, `GTEST_FILTER`, `GTEST_SHARD_INDEX`, `GTEST_TOTAL_SHARDS`, and `DISABLED_` prefixes.
</Step>
<Step title="Instantiate Parameterized Tests">
Ensure all `TEST_P` and `TYPED_TEST` tests have corresponding `INSTANTIATE_TEST_SUITE_P` or equivalents.
</Step>
<Step title="Look for Disabled Tests or Explicit Skips">
Search your code for `DISABLED_` prefixes or `GTEST_SKIP()` usages that might exclude tests.
</Step>
<Step title="Verify Namespace and Accessibility">
Make sure fixture and test code reside in the same namespace, especially when testing private members.
</Step>
</Steps>

---

## 3. Best Practices to Prevent Registration and Execution Issues

- **Follow Naming Conventions**: Avoid underscores in test suite and test names; use alphanumeric characters only.

- **Consistent Fixture Usage**: Use a single fixture type per test suite and don't mix `TEST` and `TEST_F` macros in the same suite.

- **Link all Test Code**: Double check build configurations to ensure test files are not excluded.

- **Use the Provided Main Function if Possible**: Link with `gtest_main` or `gmock_main` unless you need custom behavior.

- **Explicitly Instantiate Parameterized Tests**: Don’t forget instantiation macros for parameterized or typed tests.

- **Avoid Silent Disabling**: Be cautious with `DISABLED_` and `GTEST_SKIP()` so you don’t unknowingly drop tests.

- **Leverage GoogleTest’s Filtering Feature**: Use filters explicitly and cautiously to avoid excluding tests unintentionally.

- **Document Test Names and Fixture Classes**: Keep fixture classes and test suites clearly defined and avoid duplicate test suite names across namespaces.

---

## 4. Troubleshooting Examples

### Example 1: No Tests Found Error for Parameterized Tests

```cpp
// Parameterized test definition
class MyTestSuite : public testing::TestWithParam<int> {};

TEST_P(MyTestSuite, Example) {
  EXPECT_GT(GetParam(), 0);
}

// Missing instantiation will cause no tests to run
// Fix by adding:
INSTANTIATE_TEST_SUITE_P(
    PositiveIntegers, MyTestSuite, testing::Values(1, 2, 3));
```

### Example 2: Tests Not Running Because of Incorrect Macro Usage

```cpp
class FixtureTest : public testing::Test {
 // ...
};

// Wrong: Using TEST instead of TEST_F
TEST(FixtureTest, ShouldFailToRun) {
  SUCCEED();
}

// Correct macros to use
TEST_F(FixtureTest, ShouldRun) {
  SUCCEED();
}
```

### Example 3: Disabled Tests

```cpp
TEST(MySuite, DISABLED_SlowTest) {
  // This test will not be run unless explicitly enabled
}

// To run disabled tests:
// ./my_test --gtest_also_run_disabled_tests
```

### Example 4: Mixing Test Fixtures in the Same Suite

```cpp
class BaseTest : public testing::Test {};
class DerivedTest : public testing::Test {};

// Runtime error: Tests in the same suite must use the same fixture
TEST_F(BaseTest, TestOne) { SUCCEED(); }
TEST_F(DerivedTest, TestOne) { SUCCEED(); }
```

Avoid this by keeping one fixture per test suite.

---

## 5. Additional Resources

- GoogleTest Primer: [primer.md](primer.md)
- FAQ on Test Naming Conventions and Macro Usage: [faq.md](faq.md)
- Advanced Test Patterns and Parameterized Tests: [advanced.md](advanced.md)
- Troubleshooting Build and Linker Issues: [build-errors](faq/troubleshooting/build-errors.md)

---

## 6. Summary

Proper test discovery and execution depends on correct macro use, fixture design, build/link setup, and handling of test filters and flags. Read and follow the guidelines and examples here to ensure effective test registration and proper runs in GoogleTest and GoogleMock.


<Tip>
Always verify your test binaries with `--gtest_list_tests` to confirm that the tests are registered and visible.
</Tip>
<Note>
If you continue to experience test discovery issues, consult your build system logs for omitted source files or linking errors, and use verbose flags in GoogleTest to get diagnostic output.
</Note>