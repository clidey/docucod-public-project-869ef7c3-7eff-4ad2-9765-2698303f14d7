---
title: "Platform and Compiler Compatibility"
description: "Answers typical questions about supported platforms, minimum compiler versions, and how to resolve errors specific to certain operating systems or toolchains. Includes information on platform abstraction and portability utilities."
---

# Platform and Compiler Compatibility FAQ

This FAQ provides clear, actionable answers to common questions about platform support, compiler requirements, feature macros, and troubleshooting related to GoogleTest and GoogleMock compatibility. Whether you are setting up your environment, encountering platform-specific errors, or configuring threading and feature flags, this guide helps you understand what is supported, what to expect, and how to resolve common issues.

---

## 1. Supported Platforms and Compiler Requirements

### What platforms does GoogleTest support?
GoogleTest follows Google's [Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support), ensuring broad compatibility across major OSes. Supported platforms include:
- Linux (including flavors like Ubuntu and Fedora)
- Windows (Desktop, MinGW, Mobile variants)
- Mac OS X & iOS
- BSD variants (FreeBSD, OpenBSD, NetBSD, DragonFlyBSD)
- Solaris, AIX, HP-UX
- Android, Fuchsia

You can see the current compatibility matrix [here](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).

### Which compilers and minimum compiler versions are supported?
GoogleTest requires a compiler that supports C++17 or later. Specific minimum versions include:
- GCC 7 or newer
- Clang 5 or newer
- MSVC 2017 Update 3 (version 19.11) or newer

Compilers older than these will fail to compile GoogleTest due to C++17 language features requirements.

### Is C++17 required?
Yes. GoogleTest requires an environment with C++17 support enabled (`-std=c++17` or equivalent compiler flag).

If your build system does not specify this, expect compilation errors. You should configure your build environment accordingly.

---

## 2. Platform and Feature Detection Macros

### How does GoogleTest detect the platform and features available?
GoogleTest internally defines macros such as `GTEST_OS_LINUX`, `GTEST_OS_WINDOWS`, `GTEST_HAS_PTHREAD`, and more to conditionally enable platform-specific code paths.

These macros are always defined to 1 or 0 after including `gtest-port.h`. They enable GoogleTest to adapt features such as threading support, regular expression implementation, and file system access automatically.

### Can I override these macros?
Generally, users should not override these macros manually. GoogleTest detects environment features automatically.

If auto-detection fails or if you need to force a feature configuration (e.g., disable threading), you can define these macros in your build system:
- Example: `-DGTEST_HAS_PTHREAD=1` to enable pthread support forcibly.
- Example: `-DGTEST_HAS_EXCEPTIONS=0` to disable exceptions if your compiler is configured this way.

Refer to the macros listed in `googletest/include/gtest/internal/gtest-port.h` for full options.

---

## 3. Threading and Synchronization Support

### Is GoogleTest thread-safe?
GoogleTest is thread-safe on platforms where threading primitives such as `pthread` or Windows mutexes are available and detected (`GTEST_IS_THREADSAFE == 1`).

If your platform or configuration disables threading, GoogleTest will provide dummy synchronization primitives.

### How do I enable or disable pthread support?
GoogleTest will detect pthread availability on POSIX systems. However, if detection fails or if you want to disable it, add the following to your compiler options:

- To enable: `-DGTEST_HAS_PTHREAD=1`
- To disable: `-DGTEST_HAS_PTHREAD=0`

If you enable pthread support, ensure your linker includes the pthread library (e.g., `-lpthread`).

---

## 4. Regular Expression Implementations

### What regex implementations does GoogleTest support?
GoogleTest supports three regular expression backends:

1. **RE2 library**: Used if Abseil and RE2 are linked (`GTEST_HAS_ABSL` defined).
2. **POSIX Extended Regex**: Enabled on UNIX-like platforms.
3. **Simple Regex**: A fallback simple regex used on platforms without POSIX regex support.

The choice is automatic based on platform and dependencies but can be customized by configuring dependencies.

---

## 5. Compiler and Language Feature Support

### Does GoogleTest require RTTI and exceptions?
- RTTI Support: Detected automatically, controlled by `GTEST_HAS_RTTI`. Required for dynamic cast features.
- Exceptions: Detected and controlled by `GTEST_HAS_EXCEPTIONS`. GoogleTest uses exceptions only where available, but does not require them for normal operation.

You can override these macros if needed.

### Unicode and Wide String Support
GoogleTest detects whether `std::wstring` works in your environment (`GTEST_HAS_STD_WSTRING`). Platforms like Cygwin, Solaris, and some embedded targets may lack wide string support.

### How does GoogleTest handle stream redirection?
GoogleTest enables stream redirection on platforms supporting file system and required system calls (`dup()`, `dup2()`). This is controlled by `GTEST_HAS_STREAM_REDIRECTION`.

Mobile and embedded platforms often disable this by default.

---

## 6. Build Configuration and Usage Tips

### How should I build GoogleTest on unsupported or embedded platforms?
You may need to tweak macros to disable unsupported features:
- Use `-DGTEST_HAS_EXCEPTIONS=0` if exceptions are not supported.
- Use `-DGTEST_HAS_PTHREAD=0` if pthread is unavailable.
- Use `-DGTEST_HAS_STD_WSTRING=0` if wide string support is broken.

Refer to `include/gtest/internal/gtest-port.h` for all macros you can override.

### How to build GoogleTest as a shared library?
- Compile GoogleTest with `-DGTEST_CREATE_SHARED_LIBRARY=1`.
- Compile your test code with `-DGTEST_LINKED_AS_SHARED_LIBRARY=1`.

This allows dynamic linking on platforms that support it, such as Windows.

---

## 7. Common Platform and Toolchain Issues

### Why do I see a C++17 version error?
GoogleTest denies compilation if the compiler does not support C++17 or later. Set your compiler flags for C++17.

Example for GCC and Clang:
```bash
-std=c++17
```

For MSVC use:
```
/std:c++17
```

### What if GoogleTest doesn't detect my platform properly?
File issues or patches to the GoogleTest team, or manually override platform macros in your build system (not recommended).

### Linking errors related to pthread?
Make sure your linker flags include `-lpthread` on POSIX systems if `GTEST_HAS_PTHREAD=1` is set.

### What if I get stream redirection or file system-related failures?
Check if the platform supports required system calls and file system features. For embedded systems, these might be missing or limited.

---

## 8. Further Resources

- [Supported Platforms & Requirements](https://github.com/google/googletest/blob/main/docs/platforms.md)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Build & Integration Troubleshooting FAQ](../faq/troubleshooting/build-integration-issues.md)
- [Platform Support Guide](../../guides/integration-and-troubleshooting/platform-support.mdx)

---

## Summary
This page focuses on answering typical user questions related to platform compatibility and compiler requirements for GoogleTest and GoogleMock. It clarifies supported platforms, minimum compiler versions, feature detection macros, threading support, regex backends, and build configuration advice, with practical guidance for troubleshooting common platform-specific issues.

<Check>
Always verify your environment meets the C++17 standard support and platform prerequisites before building.
</Check>

<Info>
For advanced customizations, investigate the macros exposed in `gtest-port.h` and consider defining them in your build script to tailor GoogleTest's behavior.
</Info>

<Warning>
Avoid altering the platform detection macros manually unless absolutely necessary, as improper overrides can cause unpredictable behavior.
</Warning>
