---
title: "Why aren’t my tests running or behaving as expected?"
description: "Troubleshooting for tests that do not execute, fail to discover, or behave inconsistently. Addresses issues like naming conventions, fixture setup, parameterization mistakes, and test environment isolation."
---

# Why Aren’t My Tests Running or Behaving as Expected?

Sometimes, after setting up your GoogleTest suite, you may notice that tests do not run, are mysteriously skipped, or behave inconsistently across runs. This FAQ guide addresses these common pain points by illuminating typical causes and practical solutions so you can regain confidence and control over your testing workflow.

---

## Common Reasons Tests May Not Run or Behave Unexpectedly

### 1. Test Naming and Discovery Issues

GoogleTest discovers and runs tests based on strict naming conventions and registration mechanisms.

- **Missing or incorrect TEST()/TEST_F() macros**: Tests must be declared using the GoogleTest macros like `TEST()` or `TEST_F()`; plain functions or unregistered tests won't run.
- **Underscores in test or suite names**: Avoid underscores in test suite and test names. For example, `TEST(MySuite, TestName)` is correct but `TEST(My_Suite, Test_Name)` can cause issues with filtering and reporting.
- **Test Suite and Fixture Consistency**: All tests within the same test suite must use the same fixture class. Mixing `TEST()` with `TEST_F()` in the same test suite leads to silent failures or strange run behavior.

```cpp
// Incorrect – mixing TEST and TEST_F in the same suite
TEST(MyTest, Foo) { ... }
TEST_F(MyTest, Bar) { ... }  // Will cause test registration conflicts
```

### 2. Disabled or Filtered Tests

- Tests or test suites prefixed with `DISABLED_` are **compiled but skipped** by default. Be sure you are not unintentionally disabling tests.
- The `--gtest_filter` flag or `GTEST_FILTER` environment variable limits which tests run. Filters are applied to full test names `TestSuite.TestName`. Example:

```sh
# Runs only tests from TestSuite named 'FooTest'
./mytest --gtest_filter=FooTest.*
```

- The flag `--gtest_also_run_disabled_tests` runs disabled tests but is off by default.

### 3. Test Fixture Setup and Teardown

Improper use of test fixtures can cause tests to behave inconsistently or fail silently.

- **Spelling errors in fixture methods**: Ensure `SetUp()` and `TearDown()` methods are spelled with upper-case `U` and `D`. Mistyping as `Setup()` or `Teardown()` will cause them to be ignored silently.

```cpp
class MyTest : public testing::Test {
 protected:
  void SetUp() override { /* Correct */ }
  void TearDown() override { /* Correct */ }
};
```

- **Avoid fatal assertions in constructors and destructors**. Use `SetUp()` and `TearDown()` instead, as fatal assertions in constructors or destructors do not abort the test properly and leave objects in unstable states.

- **Per-Test vs Per-TestSuite Setup/Teardown**: Use static `SetUpTestSuite()` and `TearDownTestSuite()` for expensive shared resources. Mismanagement here can cause flaky tests.

### 4. Parameterized and Typed Tests Misconfiguration

- Value-parameterized tests (`TEST_P`) require corresponding instantiations via `INSTANTIATE_TEST_SUITE_P`. Failure to instantiate causes tests to be skipped and triggers verification failures.

- Similarly, type-parameterized tests (`TYPED_TEST_SUITE_P`) must be registered (`REGISTER_TYPED_TEST_SUITE_P`) and instantiated for tests to run.

- Custom parameter name generators must produce valid and unique test names (without underscores).

### 5. Environment and Global Setup Interference

- If using `testing::Environment` for global setup/teardown, ensure `SetUp()` and `TearDown()` methods are well-defined and do not `GTEST_SKIP()` unintentionally.

- Use `AddGlobalTestEnvironment()` carefully; multiple environments are run in registration order and tear down in reverse. Failures here can cause tests to be skipped.

- Environment setup failures or fatal failures in global setup phase prevent tests from running.

### 6. Test Execution Order and Shuffling

- Using `--gtest_shuffle` flag randomizes test order. Tests that rely on certain ordering may fail or behave differently.

- Test sharding via environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` runs only a subset of tests on a shard. Misconfiguration here may cause a test never to run on some shards.

### 7. Fatal Failures Inside Subroutines

- Fatal assertion macros (e.g., `ASSERT_*`) only abort the current function, not the test itself. This may cause tests to continue after a critical failure leading to forked failures or crashes.

- Use `HasFatalFailure()` to check if a fatal failure has occurred and return early.

```cpp
void Subroutine() {
  ASSERT_TRUE(condition);
  // This function returns early if condition is false
}

TEST(MyTest, Foo) {
  Subroutine();
  if (HasFatalFailure()) return;  // Prevent crash or undefined behavior
  ...
}
```

### 8. Failure to Initialize GoogleTest Properly

- You **must** call `::testing::InitGoogleTest(&argc, argv);` prior to `RUN_ALL_TESTS();` in `main()`. Omitting this prevents flags and test registrations from being applied correctly.

- The return value of `RUN_ALL_TESTS()` must be returned from `main()` for proper test status reporting.

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 9. Test Binary Linkage and Build Issues

- If your test executable reports no tests linked, verify the linking includes your test object files or libraries.

- Disabling tests via `#if` or conditional compilation may result in no tests.

- Using the macros incorrectly or missing necessary includes (`#include <gtest/gtest.h>`) can cause silent failures.

---

## Practical Tips to Diagnose and Fix Unexpected Test Behavior

- **List All Tests**: Run your test binary with `--gtest_list_tests` to verify which tests are discovered.

```sh
./mytest --gtest_list_tests
```

- **Check Filters**: Use `--gtest_filter=*` to force running all tests. If a test still doesn't run, it might be disabled or incorrectly registered.

- **Avoid Prefix `DISABLED_`**: Remove this prefix when you want a test to run.

- **Use SCOPED_TRACE**: For failures inside subroutines, add scoped trace points to clarify the call context.

- **Beware of `ASSERT_*` in Non-void Functions**: They can cause confusing compiler errors or unexpected behavior.

- **Verify Fixture Setup**: Confirm fixture `SetUp()` and `TearDown()` are properly spelled and utilized.

- **Validate Parameterized Test Instantiations**: If using `TEST_P`, ensure corresponding `INSTANTIATE_TEST_SUITE_P` exists.

- **Run Tests Without Sharding**: Temporarily unset shard environment variables to verify test coverage.

- **Check for Fatal Failures After Subroutine Calls**: Use `HasFatalFailure()` to ensure test aborts correctly.

- **Inspect Global Test Environment Side Effects**: Environment objects with failing `SetUp()` can cause all tests to be skipped.

- **Rebuild and Clean**: Sometimes linker or build system glitches cause tests not to be linked.

---

## Example: Diagnosing a Test That Never Runs

Suppose you have:

```cpp
class FooTest : public testing::Test {};

TEST(FooTest, DISABLED_Bar) { EXPECT_TRUE(false); }
```

- Running without flags:

```sh
./mytest
```

Shows test skipped silently.

- List tests:

```sh
./mytest --gtest_list_tests
```

Shows `FooTest.DISABLED_Bar` listed.

- To run disabled tests:

```sh
./mytest --gtest_also_run_disabled_tests
```

Now the test executes.

- To avoid this, rename or remove `DISABLED_` prefix.

---

## Summary

Unexpected test execution often stems from issues in test registration, naming, filtering, fixture lifecycle management, and environment setup. Carefully reviewing test definitions, command line flags, build linkage, and test fixture methods will eliminate most cases.

Always start debugging with the test listing (`--gtest_list_tests`) and verifying your `main()` function properly sets up and runs GoogleTest.

---

## Additional Resources

- **GoogleTest Primer**: [docs/primer.md](docs/primer.md) — Learn the basics of writing and running tests.
- **Assertions Reference**: [docs/reference/assertions.md](docs/reference/assertions.md) — Explains assertions and failure modes.
- **Advanced Topics**: [docs/advanced.md](docs/advanced.md) — Deep dive into fixtures, parameterized tests, and death tests.
- **Testing Reference**: [docs/reference/testing.md](docs/reference/testing.md) — Detailed API reference for tests and registration.
- **Troubleshooting Common Setup Issues**: [getting-started/validation-troubleshooting/common-issues](getting-started/validation-troubleshooting/common-issues) — Address integration and test execution issues.

---

## Related FAQ Entries

- [How do I build and run tests with GoogleTest/GoogleMock?](faq/getting-started-common-questions/how-do-i-build-and-run-tests)
- [How do I interpret assertion failures and test output?](faq/troubleshooting/assertion-failure-diagnostics)
- [How do I write custom assertions or matchers?](faq/advanced-usage-and-performance/custom-assertions-and-matchers)

---

## Troubleshooting Checklist

| Problem                    | Action Steps                                              |
|----------------------------|-----------------------------------------------------------|
| Tests not discovered       | Verify correct use of `TEST()`, `TEST_F()`, no underscores in suite & test names |
| Disabled tests not running | Remove `DISABLED_` prefix or use `--gtest_also_run_disabled_tests` flag |
| Test filtered out          | Check `--gtest_filter` environment variable or flag; use `*` to run all |
| Fixture setup ignored      | Correctly spell `SetUp()` / `TearDown()`; avoid fatal asserts in constructors |
| Parameterized tests missing | Ensure `INSTANTIATE_TEST_SUITE_P` matches your `TEST_P` declarations |
| Tests skipped at global setup | Check Environment objects, `SetUp()` methods, and skip conditions |
| Tests executing out of order or flaky | Disable `--gtest_shuffle` or ensure no state dependencies |
| Tests not linked           | Verify build system includes test objects; clean and rebuild |
| Fatal failure in subroutine not aborting test | Use `HasFatalFailure()` to detect and return early |

---