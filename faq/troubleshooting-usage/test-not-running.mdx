---
title: "Why are my tests not running or being discovered?"
description: "Explains possible reasons why tests may not show up or execute, including issues with test registration, macros, and environment setup. Offers checklists and actionable debugging tips."
---

# Why are my tests not running or being discovered?

This page helps you understand common reasons why test cases might not appear in test runs or why tests do not execute as expected. It focuses on issues related to test registration, macro usage, environment setup, and how to debug and fix them.

---

## Common Reasons Tests Are Not Running

Tests written for GoogleTest and GoogleMock rely heavily on test registration macros and proper build and environment setup. Issues in these areas can prevent tests from being discovered or executed.

### 1. Missing or Incorrect Test Macro Usage

GoogleTest registers tests at static initialization time using macros such as `TEST()`, `TEST_F()`, `TEST_P()`, and others. If these macros are not used correctly, or if you forget to use them, your tests will not be discovered.

- Always define tests within `TEST()` or related macros. Plain functions or methods without these macros will be ignored by the framework.
- For tests using fixture classes, use `TEST_F()` instead of `TEST()` to access fixture members and setup.
- Ensure that test suite and test names are valid C++ identifiers without underscores (per Google style) to avoid unexpected behavior.

Example of correct test syntax:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // setup code
  }
};

TEST_F(MyFixture, TestExample) {
  EXPECT_TRUE(...);
}
```

### 2. Incorrect or Missing `main()` Function Setup

- Make sure your test executable calls `::testing::InitGoogleTest(&argc, argv);` before running `RUN_ALL_TESTS();`
- If linking with `gtest_main` or `gmock_main` libraries, you do not need to define your own `main()`. Missing this can cause no tests to run.

Example main function:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 3. Build System or Linking Problems

- Ensure that test source files are included and compiled in the build system.
- Link against the GoogleTest and GoogleMock libraries correctly.
- When tests are split across multiple files, make sure all are linked in the test executable.

### 4. Disabled Test Filters or Naming Issues

- Tests can be disabled unintentionally via command-line flags such as `--gtest_filter`.
- Check that your test names and suites do not start with `DISABLED_` or end with `_DISABLED`, which disables them.

Example:

```shell
./my_tests --gtest_filter=-MySuite.MyTest
```

will disable `MySuite.MyTest`.

### 5. Macro or Header Problems

- If your test code includes headers that redefine or shadow GoogleTest/GMock macros, your EXPECT_CALL or TEST macro invocations may fail silently or be skipped.
- For example, on Windows, system headers may define common method names via macros. Use `#undef` carefully and verify macro expansions.

---

## Debugging Checklist

Follow this checklist to diagnose why tests may not show up or execute:

<Steps>
<Step title="Confirm Macro Usage">
Verify all tests are defined using `TEST()`, `TEST_F()`, or other GoogleTest macros.
</Step>
<Step title="Validate main() Setup">
Check that your test executable initializes and runs GoogleTest properly.
</Step>
<Step title="Inspect Build and Link Settings">
Make sure all test source files are compiled and linked with GoogleTest and GoogleMock.
</Step>
<Step title="Check for Disabled Tests or Filters">
Ensure test names are not disabled (`DISABLED_` prefix) and command-line filters are not excluding tests.
</Step>
<Step title="Review Macro Conflicts">
Look for conflicting macro definitions that might interfere with test macros.
</Step>
</Steps>

<Note>
Run your test executable with `--gtest_list_tests` to list reachable tests. If your tests do not appear, the problem lies in registration or linking.
</Note>

---

## Practical Debugging Tips

- **Use verbose mock output**: Run tests with `--gmock_verbose=info` to see detailed trace of mock calls; this can reveal if mocks are being called or skipped.
- **Test registration visibility**: Add a trivial `TEST()` in the same file to verify if tests are registered.
- **Check for static initialization issues**: Tests register at static initialization; certain linkers or build setups may strip unused static objects.
- **Ensure virtual destructors in interfaces**: Without virtual destructors in base classes of mocks, calls may bypass mocks, causing tests not to run as expected.
- **Use GoogleTest’s built-in sample tests** for sanity: Run known working tests from the framework to verify environment correctness.

---

## Common Failure Scenarios & Solutions

| Symptom | Cause | Solution |
| -------- | ------ | -------- |
| Tests do not appear in output | Test macro missing or incorrect | Use proper `TEST()` or `TEST_F()` macros to define tests. |
| Tests appear but do not run | `main()` missing or misconfigured | Provide or link against a `main()` that calls `InitGoogleTest` and `RUN_ALL_TESTS()`. |
| Mock method calls invoke real method instead | Mocked method is not virtual | Make sure the method is virtual or use high-perf dependency injection techniques.
|
| No expectations verified on mocks | Mock objects never destroyed (leaked) | Ensure mock objects are deleted or go out of scope, or use `Mock::AllowLeak()` explicitly if intentional. |
| GoogleTest complains about uninteresting calls or warnings | No `EXPECT_CALL` for mock methods called | Use `EXPECT_CALL` or switch to `NiceMock` to suppress warning. |

---

## How Test Discovery Works

GoogleTest discovers tests through static objects created by the `TEST()` and related macros at program startup. This means:

- Test files must be linked into the test binary.
- The static initializers must run before `RUN_ALL_TESTS()`.

If static initialization is skipped or linking strips test code, tests won't be found.

---

## References and Related Documentation

- [GoogleTest Primer](docs/primer.md) – Introduction to writing tests
- [gMock for Dummies](docs/gmock_for_dummies.md) – Getting started with mocks
- [Mock Class Definition](api-reference/mocking-framework/mock-class-definition.md) – Defining mocks correctly
- [Setting Expectations: EXPECT_CALL and ON_CALL](api-reference/mocking-framework/setting-expectations.md) – How to set up mock behaviors
- [Strict, Naggy, and Nice Mocks](api-reference/mocking-framework/strict-naggy-nice-mocks.md) – Controlling warnings for uninteresting calls
- [Troubleshooting Common Errors](faq/troubleshooting-usage/common-errors.md) – Build and runtime issues

---

For more detailed troubleshooting on tests not running, consult the GoogleTest and GoogleMock official FAQ pages and user guides listed above.

---

<Tip>
Always check the build logs and test executable startup logs; GoogleTest will report parsing errors if test registration macros are incorrectly used.
</Tip>

<Info>
Use the command line flag `--gtest_list_tests` to verify which tests are registered and visible to the test runner.
</Info>