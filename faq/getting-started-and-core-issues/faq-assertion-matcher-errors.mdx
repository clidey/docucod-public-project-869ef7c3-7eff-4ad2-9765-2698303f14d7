---
title: "Assertion & Matcher Errors"
description: "Covers the most common causes of assertion and matcher failures, diagnosing confusing output, and clarifying behavior for new users. Provides tips for debugging cryptic errors and fixing unexpected assertion results."
---

# Assertion & Matcher Errors FAQ

This page helps you diagnose and understand common assertion and matcher errors encountered while using GoogleTest and GoogleMock. Whether you are seeing unexpected assertion failures, confusing matcher messages, or cryptic errors during test runs, this FAQ equips you with best practices, concrete explanations, and actionable tips to resolve them efficiently.

---

## 1. What is the difference between EXPECT_ and ASSERT_ macros?

- `EXPECT_` macros generate **nonfatal failures**, allowing the test to continue running.
- `ASSERT_` macros generate **fatal failures**, aborting the current function immediately.

Use `EXPECT_` when you want the test to record a failure but proceed, and `ASSERT_` when failure should halt execution immediately.


## 2. Why does my test fail with a matcher failure message?

Matchers articulate the conditions that mock method arguments or assertion values must satisfy. A matcher failure indicates the actual value did not meet the expected criteria.

Example:

```cpp
EXPECT_THAT(value, StartsWith("Hello"));
```

If `value` is "Hi world!", the failure message will describe the mismatch clearly:

```
Value of: value
  Actual: "Hi world!"
Expected: starts with "Hello"
```

To debug:

- Confirm the matcher matches your intent.
- Inspect actual argument values printed by GoogleTest.
- Use more granular matchers or custom predicates for precise checks.


## 3. What does "Unexpected mock function call" mean?

This error arises when a mock method is called with arguments that do not match any existing `EXPECT_CALL` expectations. It means your test expected certain calls, but the code under test made a call that isn't allowed by the expectations.

For example:

```cpp
EXPECT_CALL(mock, DoSomething(42));
mock.DoSomething(17);  // Unexpected call
```

GoogleMock will print a detailed message showing all expectations it tried and why the call didn't match, including argument mismatches and whether call counts were exceeded.


## 4. Why do I get "Uninteresting mock function call" warnings?

These warnings occur when a mock method **without any `EXPECT_CALL` set** is invoked. GoogleMock calls this an *uninteresting call* because there was no explicit expectation or behavior defined.

![Uninteresting Calls Warning](https://github.com/google/googletest/blob/main/docs/images/uninteresting_call_warning.png)

**Tips to resolve:**

- Define `EXPECT_CALL` if you want to explicitly verify the call.
- Define `ON_CALL` to specify default behavior without setting expectations.
- Use `NiceMock` to suppress such warnings if these calls are legitimate but uninteresting.


## 5. How can I interpret "Excessive call" errors?

If your mock method is called more times than expected (e.g., `EXPECT_CALL(...).Times(1)` but invoked twice), it triggers an "excessive call" failure.

Example:

```cpp
EXPECT_CALL(mock, Foo()).Times(1);
mock.Foo();
mock.Foo();  // Excessive call
```

GoogleMock will print the call details and indicate the call count exceeded the expected number.


## 6. Why do I see messages about "Retired Expectation"?

Expectations can be marked as *retired* via `.RetiresOnSaturation()`. A retired expectation no longer matches calls once it has been saturated (i.e., fulfilled its expected number of calls).

If a call matches only retired expectations, GoogleMock explains this in a failure message, helping you understand why calls did not match expectations.

Example:

```cpp
EXPECT_CALL(mock, Bar(7)).Times(2).RetiresOnSaturation();
// After two calls with 7, this expectation retires.
```


## 7. What do I do if "Actions ran out in EXPECT_CALL" warning appears?

This warning means you have specified fewer `WillOnce()` actions than the number of calls expected. Once the actions run out, GoogleMock will perform the default action (often returning a default value).

How to fix:

- Add more `WillOnce()` clauses to cover all expected calls.
- Add `WillRepeatedly()` to define behavior after `WillOnce()`s are exhausted.
- Adjust the `Times()` cardinality accordingly.

Example:

```cpp
EXPECT_CALL(mock, Foo())
    .Times(3)
    .WillOnce(Return(1))
    .WillOnce(Return(2)); // Warning: only 2 actions for 3 calls
```


## 8. How to write custom matchers that give clear failure messages?

- Use the `MATCHER` and `MATCHER_P` macros to create readable, descriptive matchers.
- Provide informative `DescribeTo` and `DescribeNegationTo` methods.
- Stream additional explanation in `MatchAndExplain` to aid debugging.

Example:

```cpp
MATCHER(IsDivisibleBy7, "") {
  if ((arg % 7) != 0) {
    *result_listener << "the remainder is " << (arg % 7);
    return false;
  }
  return true;
}
```

When this matcher fails, the error will show the remainder, guiding you to the cause.


## 9. What does GoogleMock output look like with verbose flags?

GoogleMock can be configured to print detailed information during mock execution with `--gmock_verbose` command line flag:

- `info`: Prints all messages, including stack traces for uninteresting calls.
- `warning` (default): Prints warnings and errors without stack traces for uninteresting calls.
- `error`: Prints only errors.

Use `--gmock_verbose=info` to gain insights into expectation matching and mock call flow during debugging.


## 10. How to deal with "Uninteresting call" warnings during object destruction?

Sometimes mocks log warnings for uninteresting calls triggered during their destructors. These warnings can often be ignored if expected. Alternatively:

- Use `Mock::AllowLeak()` for that mock if it is deliberately leaked (do not delete).
- Use `NiceMock` to suppress warnings globally.


## Troubleshooting Tips

- Always match argument types and expectations accurately.
- Use matchers to allow flexible argument matching (e.g., `_`, `Ge()`, `Lt()`).
- Use `InSequence` or `.After()` to enforce call ordering.
- Use `WillOnce` and `WillRepeatedly` smartly to specify behaviors.
- If facing cryptic errors, enable verbose output and read detailed messages.


## Related Documentation

- [Mocking Reference](../reference/mocking.md): Comprehensive API docs for mocking facilities.
- [gMock Cookbook](../../gmock_cook_book.md): Practical recipes on creating and using mocks.
- [Assertions Reference](../reference/assertions.md): Detailed assertion macros and usage.
- [Strictness Wrappers](../mocking-apis/strictness-wrappers.md): Explanation of `NiceMock`, `NaggyMock`, and `StrictMock`.
- [Matchers Reference](../matchers-and-customization/builtin-matchers.md): Built-in matchers and usage patterns.
- [Debugging Test Failures Guide](../../guides/troubleshooting-and-patterns/debugging-test-failures.md): Strategies for understanding failing tests.

---

## Summary

This FAQ covers the most common causes of assertion and matcher failures in GoogleTest and GoogleMock, explains error message meanings, and provides tips for effective debugging. It clarifies the nuances between uninteresting and unexpected calls, proper usage of matchers and expectations, and how to leverage verbose output to diagnose problems.

---

## Additional Practical Advice

- To suppress unexpected call warnings due to legitimate but unfeatured method usage, consider using `NiceMock<YourMockClass>`.

- To enforce stricter verification that no unexpected or uninteresting calls occur, use `StrictMock`.

- Always verify and clear expectations explicitly where appropriate via `Mock::VerifyAndClearExpectations()`.

- Read error messages carefully; they often include file locations, argument details, and expectation states for easy diagnosis.

- For complex argument checks, consider writing custom matchers or predicates with informative failure reporting.


## Example Error Message and Diagnosis

```
Unexpected mock function call - returning default value.
    Function call: Foo(42)
Google Mock tried the following 1 expectation, but it didn't match:

FILE: mytest.cc:123: EXPECT_CALL(mock, Foo(7))...
  Expected arg #0: is equal to 7
           Actual: 42
         Expected: to be called once
           Actual: never called - unsatisfied and active
```

**Interpretation:** Your test expected a call to `Foo` with argument 7, but it was called with 42. The expectation remains unsatisfied, indicating a test failure.

**Solution:** Check your test or code under test calls to ensure they align.


---

For any further assistance or clarification, please consult the [GoogleTest GitHub repository](https://github.com/google/googletest) and community forums, or file an issue if you believe you encountered a bug.