---
title: "What are common build and runtime errors?"
description: "List and explain frequent compilation and linking errors, runtime failures, and their standard resolutions. Empowers users to self-diagnose and fix issues such as missing symbols, failed assertions, or misconfigured dependencies."
---

# What Are Common Build and Runtime Errors?

This page helps you quickly identify and resolve frequent build-time and runtime errors encountered when using GoogleTest and GoogleMock. It empowers you to self-diagnose issues such as compilation and linking failures, assertion errors during tests, and misconfigured mocks or dependencies.

---

## 1. Compilation and Linking Errors

### Missing Symbols or Linker Errors
- **Problem:** The linker cannot find symbols for GoogleTest or GoogleMock functions and classes.
- **Cause:** Typically occurs if your build system does not link against the GoogleTest and/or GoogleMock libraries properly.
- **Solution:**
  - Ensure you link with `gtest`, `gmock`, and their dependencies as needed.
  - Confirm that library paths and names are correctly specified in your build files (e.g., CMakeLists.txt or Bazel BUILD).
  - When compiling mock classes, confirm you include `gmock/gmock.h` and link to `gmock`. Also, all mock method definitions are generated by macros; ensure your sources are compiled correctly.

### Template or Macro Expansion Failures
- **Problem:** Compilation fails during mock class definition with errors related to `MOCK_METHOD` macro usage or template parsing.
- **Cause:** Unprotected commas in complex types or macro misuse.
- **Solution:**
  - Wrap complex return or argument types containing commas in extra parentheses, e.g., `MOCK_METHOD((std::pair<int, int>), GetPair, ());`
  - Alternatively, define type aliases for complex types to simplify usage.
  - Always place `MOCK_METHOD` declarations in the `public:` section of your mock class, regardless of original access level.

### Virtual Destructor Warnings or Errors
- **Problem:** Heap checkers report leaks or tests crash during destruction, or visual C++ shows warnings about overriding virtual methods.
- **Cause:** Base classes lacking virtual destructors cause incomplete destruction of derived mock objects.
- **Solution:**
  - Always declare destructors in base classes (interfaces) as **virtual**.
  - Check for warnings such as MSVC C4301 or C4373 and remove top-level `const` from parameters, as it is ignored and may trigger compiler bugs.

---

## 2. Runtime Failures and Assertion Errors

### Uninteresting Mock Function Calls
- **Symptom:** Warning messages like `Uninteresting mock function call - default action taken` appear at runtime.
- **Cause:** Mock methods are called without any corresponding `EXPECT_CALL` expectation.
- **Guidance:**
  - This is a warning, not an error.
  - Use `EXPECT_CALL(...).Times(AnyNumber())` if such calls are valid and you want to suppress warnings.
  - Use `NiceMock` wrapper to suppress all such warnings globally for a mock object.
  - If unexpected, verify that you have not forgotten to specify the expected calls.

### Unexpected Mock Calls
- **Symptom:** Tests fail because a method was called with arguments or in an order not covered by any active `EXPECT_CALL`.
- **Cause:** The mock function received an unexpected call.
- **Resolution:**
  - Add or correct `EXPECT_CALL`s that match the actual call.
  - Review the call order constraints, especially if using `InSequence` or `After` clauses.
  - Enable verbose output with `--gmock_verbose=info` to see detailed matching logs.

### Excess Mock Calls
- **Symptom:** Tests report calls occurred more frequently than specified.
- **Cause:** The number of calls exceeded the cardinality specified by `Times()` or inferred by `EXPECT_CALL`.
- **Solution:**
  - Adjust cardinality in your test to allow more calls (e.g., `Times(AtLeast(n))`, `AnyNumber()`).
  - Use `.RetiresOnSaturation()` if a call is allowed a limited number of times and should be ignored afterward.

### Mock Actions Run Out
- **Symptom:** Actions specified with `WillOnce()` run out and default actions are used instead.
- **Warning:** GoogleMock emits warnings when the count of `WillOnce` actions is less than the number of times the method is called.
- **Solution:**
  - Provide a `WillRepeatedly()` action to specify behavior for calls after the `WillOnce()` actions are exhausted.
  - Ensure the number of `WillOnce()` calls matches the expected number of calls.

---

## 3. Mock Object Expectations and Verification

### Expectations Not Verified at Destruction
- **Problem:** Tests pass but probably shouldn’t, as expected calls were never made.
- **Cause:** Mock objects are leaked or not destroyed, so destructors don’t run to verify expectations.
- **Recommendation:**
  - Avoid leaking mock objects; manage their lifetimes so destructors run appropriately.
  - Use `Mock::AllowLeak(&mock_object)` if you intentionally allow leaks, but be cautious.
  - Force early verification using `Mock::VerifyAndClearExpectations(&mock_object)`.

### Difficulty Diagnosing Failed Expectations
- **Advice:**
  - Use the flag `--gmock_verbose=info` to see which expectations are set, which are matched, and mismatches.
  - Analyze reported differences in argument values and call order.
  - Consider simplifying expectations or breaking down complex verifies into smaller, focused tests.

---

## 4. Best Practices to Avoid Common Pitfalls

- Always call `EXPECT_CALL` **before** exercising code that triggers mock calls.
- Use `NiceMock` to suppress warnings if uninteresting calls are expected and safe.
- Combine `WillOnce()` and `WillRepeatedly()` clauses properly to specify mock method behaviors.
- Use `.RetiresOnSaturation()` to prevent saturated expectations from causing errors on additional calls.
- Declare mock class destructors virtually to avoid memory leaks and ensure correct behavior.
- Wrap complex return or argument types with parentheses or use type aliases to avoid macro parsing errors.
- Regularly verify and clear mock expectations when testing complex scenarios or multiple test phases.

---

## 5. Troubleshooting Tips

<AccordionGroup title="Troubleshooting Build and Runtime Issues">
<Accordion title="Linker cannot find GoogleTest or GoogleMock symbols">
Verify your build system links against the required GoogleTest and GoogleMock libraries (`-lgtest`, `-lgmock`) and includes correct library paths.
</Accordion>
<Accordion title="MOCK_METHOD macro fails to parse complex types">
Wrap types containing commas in extra parentheses or use type aliases to assist the macro parsing.
</Accordion>
<Accordion title="Heap checker reports leaks or unexpected behavior at object destruction">
Ensure base classes have virtual destructors. Use `Mock::AllowLeak()` cautiously if leak is intentional.
</Accordion>
<Accordion title="Tests emit warnings about uninteresting calls">
Use `NiceMock` or explicitly add `EXPECT_CALL(...)` with `Times(AnyNumber())` to suppress warnings.
</Accordion>
<Accordion title="Unexpected mock function call errors during testing">
Use `--gmock_verbose=info` to log calls and expectations; verify the expectations and their order.
</Accordion>
</AccordionGroup>

---

## 6. Useful Links and References

- [Mock Object Definition](../api-reference/mocking-apis/mock-object-definition) — How to define and use mocks.
- [Setting Expectations & Call Strictness](../api-reference/mocking-apis/expectations-and-strictness) — How to specify expected calls and control mock behavior.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Comprehensive recipes to effectively use GoogleMock.
- [Troubleshooting Common Test Issues](../guides/advanced-and-integrations/troubleshooting-common-issues) — Help with flaky tests, linking clues, and expectation errors.
- [Writing and Running Your First Test](../guides/getting-started/writing-your-first-test) — Step-by-step starter guide.

---

For further assistance, consider running tests with verbose flags to capture detailed diagnostics and consulting the GoogleTest and GoogleMock user communities.

---

*This documentation is crafted to guide you from errors encountered during builds and runtime, towards actionable resolutions, ensuring a smooth testing experience with GoogleTest and GoogleMock.*
