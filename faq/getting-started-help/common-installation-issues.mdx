---
title: "Common Installation Issues"
description: "Detailed answers and fixes for the most widespread installation and build problems encountered when setting up GoogleTest and GoogleMock across various platforms and build systems. Includes tips on resolving dependency and environment issues."
---

# Common Installation Issues

This FAQ addresses the most common installation and build problems users encounter when setting up GoogleTest and GoogleMock in various development environments. By focusing on practical solutions and clear guidance, this page helps you overcome hurdles related to dependencies, platform-specific quirks, and build configurations to get your tests running smoothly.

---

## 1. Build Errors and Dependency Issues

### Why am I seeing missing header or library errors during build?

These errors usually indicate that your build system cannot locate GoogleTest or GoogleMock headers or libraries.

- **Solution:**
  - Ensure you have correctly included the GoogleTest and GoogleMock directories in your compiler's include path.
  - Verify that your linker settings include the appropriate `gtest` and `gmock` libraries.
  - If you are using CMake, confirm that `add_subdirectory()` or `find_package(GTest)` is properly configured.
  - For manual builds, double-check that the compiled static or shared libraries are built and available.

### How do I fix unresolved symbols or linker errors when linking GoogleTest/GoogleMock?

Unresolved symbol errors often happen because the test binary is not linked with `gtest`, `gmock`, or their `main` variants.

- **Steps:**
  1. Link your test executable with `gtest` and/or `gmock` libraries.
  2. If you want to avoid writing your own `main()`, also link `gtest_main` or `gmock_main`.
  3. On Windows, pay attention to runtime library mismatches like dynamic vs static CRT linkage. Use the CMake option `gtest_force_shared_crt` if necessary.

### Why does my build fail when using Visual Studio with C++17?

GoogleTest requires a minimum of C++17 support. Visual Studio versions prior to 2017 might not fully support this.

- **Recommendation:**
  - Use Visual Studio 2017 or later with C++17 enabled.
  - Ensure your project configuration matches the GoogleTest libraries (release/debug, static/dynamic CRT).

## 2. Environment and Platform Considerations

### How do I build GoogleTest on different platforms?

GoogleTest is designed to be portable and supports Linux, Windows, and Mac OS X.

- **Key tips:**
  - Use CMake to configure the build for your platform. It generates native build files for your environment.
  - On Windows, Visual Studio project files are created automatically by CMake.
  - For Unix-like systems, makefiles are generated by default.
  - Make sure you have Git, CMake (3.13 or later), and a suitable compiler installed.

### I am using older or embedded platforms, and GoogleTest does not build or run correctly. What can I do?

GoogleTest needs some threading primitives and C++17 support. If your platform lacks them:

- You may need to disable tests that require threading or exceptions.
- Consider downgrading your expectations for features or building only core parts.
- Check platform-specific macros and configurations in `gtest-port.h` for customization.

## 3. Build Configuration and Setup Issues

### What is the correct way to enable or disable building GoogleMock?

By default, building GoogleTest includes GoogleMock.

- To build only GoogleTest, add `-DBUILD_GMOCK=OFF` when running `cmake`.
- If you want GoogleMock tests as well, ensure `gmock_build_tests` option is enabled.

### Why do I get warnings or errors related to threading or `pthreads`?

GoogleTest is thread-safe if compiled with `pthreads` support.

- **Solution:**
  - On Linux/macOS, make sure to link with `-pthread`.
  - Set the macro `GTEST_HAS_PTHREAD` explicitly if detection fails.
  - When using CMake, this is usually handled automatically.

### I receive linker errors about repeated `main()` definitions.

This happens if you link both `gtest_main` and provide your own `main()`.

- **Fix:**
  - Either use `gtest_main` or define your own `main()` that calls `RUN_ALL_TESTS()`, but *not both*.
  - If you use `gmock_main`, it internally calls `InitGoogleMock` and runs tests.

## 4. Common Pitfalls During Installation

### I run tests but see many warnings about "uninteresting function calls".

These warnings indicate that mock methods are called without explicit expectations.

- To suppress these warnings:
  - Set default behaviors using `ON_CALL()`.
  - Use `EXPECT_CALL()` with `WillRepeatedly()` for expected uninteresting calls.
  - Adjust verbosity with the command-line flag `--gmock_verbose` (e.g., `--gmock_verbose=error`).

### I get errors or warnings from MSVC related to const parameters in mock methods.

MSVC sometimes warns about differences in const qualifications of parameters when mocking.

- **Recommendation:**
  - Avoid declaring top-level `const` on parameters in both interface and mock declarations.
  - Remember pointer or reference `const` qualifiers are meaningful and should be kept.

### Why won’t my mock methods override the base class’s methods correctly?

The mocked methods must be marked as `virtual` in the base class.

- Without virtual methods, gMock cannot mock them.
- Variadic functions (`...`) are also not mockable directly by gMock.

## 5. Troubleshooting Build with CMake

### How do I integrate GoogleTest/GoogleMock into my CMake project?

- Use `add_subdirectory()` to add GoogleTest sources to your build.
- Link your test targets against `gtest`, `gmock`, `gtest_main`, or `gmock_main` accordingly.
- Example snippet:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip)
FetchContent_MakeAvailable(googletest)

add_executable(my_test test.cpp)
target_link_libraries(my_test gtest_main gmock_main)
add_test(NAME my_test COMMAND my_test)
```

### What if I want to build GoogleTest as a shared library?

- Add `-DGTEST_CREATE_SHARED_LIBRARY=1` to compiler flags.
- Link your tests with `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` to avoid symbol errors.

## 6. Verification and Running Tests

### How do I verify GoogleTest and GoogleMock are correctly installed?

- Compile and run a simple test case.
- Use `RUN_ALL_TESTS()` in your `main()`.

Example test:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

If this runs and passes, your installation is working.

### How do I initialize GoogleMock?

- Use `testing::InitGoogleMock(&argc, argv);` instead of `InitGoogleTest` if using GoogleMock features.
- If linking against `gmock_main`, initialization and invocation of `RUN_ALL_TESTS()` is handled internally.

## 7. Additional Tips and Best Practices

- Always check that your compiler supports C++17 or later.
- Avoid mixing runtime libraries (static vs dynamic) between GoogleTest/GoogleMock and your project.
- Prefer CMake integration for easier cross-platform builds.
- Use `--gmock_verbose=info` to get detailed logs when expectations fail.
- Leverage the `gtest_force_shared_crt` CMake flag on Windows to solve runtime mismatches.

---

## Related Documentation

- [Installation Methods](/getting-started/setup-basics/installation-methods)
- [Prerequisites & System Requirements](/getting-started/setup-basics/prerequisites-system-requirements)
- [Configuration & Initial Integration](/getting-started/setup-basics/configuration-setup)
- [Running Tests & Validating Setup](/getting-started/first-test-experience/running-tests-and-validating-setup)
- [GoogleMock Quickstart](/guides/getting_started/googlemock-quickstart)

## External Resources

- Official GitHub repository: https://github.com/google/googletest
- GoogleTest Primer: https://github.com/google/googletest/blob/main/docs/primer.md
- gMock Cookbook: https://google.github.io/googletest/gmock_cook_book.html

---

<Tip>
Following structured integration practices and carefully matching build configurations ensures smooth GoogleTest and GoogleMock setup across platforms. Use CMake for the most reliable cross-environment build and linking experience.
</Tip>

<Warning>
Ignoring version, build environment, or runtime mismatches often results in subtle linking errors or runtime crashes. Address these proactively.
</Warning>