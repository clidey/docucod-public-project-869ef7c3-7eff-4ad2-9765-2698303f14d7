---
title: "Common Errors and How to Fix Them"
description: "Quick solutions to frequent error messages, build failures, or test execution problems, including linker errors, assertion failures, and misconfigured mocks."
---

# Common Errors and How to Fix Them

GoogleTest and GoogleMock provide robust tools for C++ testing, yet users may encounter a range of common errorsâ€”ranging from build/linker failures to unexpected test assertion errors and mock configuration issues. This guide addresses these frequent problems with actionable solutions, helping you quickly diagnose and resolve issues to keep your test suite running smoothly.

---

## 1. Common Build and Linker Errors

### Cause
- Missing GoogleTest or GoogleMock libraries during linking.
- Conflicting macros or symbols from system headers.
- Using unsupported C++ standards or compilers.

### Solutions
- Ensure that both GoogleTest (`gtest`) and GoogleMock (`gmock`) libraries are properly linked.
- Define `GTEST_HAS_TR1_TUPLE=0` if encountering tuple-related conflicts.
- Prefer C++17 or newer for compilation as GoogleTest requires it.
- Avoid including Windows headers defining macros like `min` and `max` before GoogleTest headers or wrap `#define NOMINMAX` before including Windows headers.
- Use provided CMake targets or Bazel rules for consistent setup.

<Tip>
It is critical to initialize GoogleTest properly with `InitGoogleTest()` in `main()` before running tests.
</Tip>

---

## 2. Unexpected Assertion Failures

### Scenario
Tests fail unexpectedly with messages indicating inequality or predicate failures.

### What Went Wrong
- Incorrect assumptions about test output.
- Predicate matchers failing due to incorrect parameters or unexpected input.
- Floating-point comparisons using `EXPECT_EQ` instead of `EXPECT_FLOAT_EQ` or `EXPECT_DOUBLE_EQ`.

### How to Fix
- Use GoogleTest assertion macros appropriate to the data:
  - Use `EXPECT_FLOAT_EQ()` or `EXPECT_DOUBLE_EQ()` for floating-point comparisons.
  - Use `EXPECT_THAT()` with matchers for expressive and informative checks.
- When writing custom predicate assertions, use `AssertionResult` to provide clear failure messages.
- Use `SCOPED_TRACE` to add context to assertions in complex control flows.
- Check the printed expected and actual values to understand test failures better.

<Example>
```cpp
// Use EXPECT_THAT to get expressive failure messages
EXPECT_THAT(result, Eq(expected_value));

// For floating-point values
EXPECT_FLOAT_EQ(computed_value, expected_value);

// Adding trace
SCOPED_TRACE("Checking the output of ComplexComputation");
EXPECT_TRUE(ValidateOutput(output));
```
</Example>

---

## 3. Mock Configuration and Call Issues

### 3.1 Uninteresting Calls Warning

#### Description
When your mock object receives calls to methods without associated `EXPECT_CALL`, you may see warnings such as:

```
GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: SomeMethod(0)
NOTE: You can safely ignore the above warning unless this call should not happen.
```

#### Why It Happens
- You declared expectations on some methods but not on others that get called.
- By default, gMock considers calls without expectations as "uninteresting" and warns.

#### Solutions
- Add an `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` to silence warnings for calls you do not care about.
- Use `NiceMock<MockClass>` to suppress warnings for uninteresting calls globally.
- Use `StrictMock<MockClass>` to treat uninteresting calls as errors if you want stricter verification.

<Tip>
Avoid adding `EXPECT_CALL` blindly unless you want to enforce calls. Piecemeal using `NiceMock` and selective expectations is best.
</Tip>

---

### 3.2 Unexpected Calls and Match Failures

#### Symptoms
Test fails with errors showing an unexpected call, often listing expected arguments and actual values.

#### Examples
- Arguments don't match any `EXPECT_CALL` matcher.
- Call order violated due to sequencing constraints.
- Calls exceed the number expected.

#### What To Do
- Verify argument matchers are correct and cover all expected calls.
- If enforcing call order, check `InSequence` or `After` clauses for correct ordering.
- For overloaded mocks, make sure to disambiguate with `Const()` or explicit `Matcher<T>()` casts.
- For each `EXPECT_CALL`, ensure that the number of calls and argument constraints match your test logic.

---

### 3.3 Too Many or Too Few WillOnce Actions

#### Problem
You set expectations with specific `.WillOnce()` actions but the number of calls is outside the expected range, causing warnings or errors about running out of actions.

#### How It Happens
- `EXPECT_CALL` with `.Times(n)` but only fewer `.WillOnce()` actions.
- More calls made than specified.

#### Fix
- Ensure the number of `.WillOnce()` actions matches or exceeds calls.
- Use `.WillRepeatedly()` for behavior after exhaust `.WillOnce()`.
- Example:

```cpp
EXPECT_CALL(mock, Foo())
    .WillOnce(Return(1))
    .WillOnce(Return(2))
    .WillRepeatedly(Return(3));  // For any calls after 2
```

- Use `Times(AnyNumber())` if you do not wish to enforce call count but want controlled responses.

---

## 4. Test Execution Issues

### Test Premature Exit or No Tests Run

- Check if tests are properly registered.
- Use `--gtest_list_tests` to confirm tests are visible.
- Verify that `InitGoogleTest()` is called in `main()` before `RUN_ALL_TESTS()`.
- Consult output for filtering issues (`--gtest_filter`).
- Review sharding environment variables if using test sharding (`GTEST_TOTAL_SHARDS`, `GTEST_SHARD_INDEX`).

---

## 5. Helpful Debugging Tips

- Use `--gmock_verbose=info` to get detailed matching and call logs.
- Use `SCOPED_TRACE` to trace where in your test an assertion failure occurs.
- Use `Mock::VerifyAndClearExpectations(&mock)` to check all expectations early.
- For unprintable types, implement `PrintTo()` to aid in readable test output.

---

## 6. Summary of Key Error Messages and What They Mean

| Error Message                         | Meaning & Cause                                         | Solution                                         |
|-------------------------------------|--------------------------------------------------------|-------------------------------------------------|
| `Uninteresting mock function call`  | No matching `EXPECT_CALL` for method call              | Add `EXPECT_CALL` or use `NiceMock`              |
| `Unexpected mock function call`     | Call arguments do not match any `EXPECT_CALL`          | Fix argument matchers, check call order          |
| `Mock function called more times than expected` | More calls than `Times()` allows                   | Adjust `.Times()`, add `.WillRepeatedly()`, or fix test logic |
| `Too many actions specified...`     | Number of `WillOnce()` exceeds `Times()` upper bound  | Align `.WillOnce()` count with `.Times()`        |
| `Too few actions specified...`      | Fewer `WillOnce()` than lower bound of `.Times()`       | Add more `.WillOnce()`, or use `.WillRepeatedly()`|

---

## 7. Resources for Further Troubleshooting

- [GoogleTest FAQ - Installation and Setup Issues](https://github.com/google/googletest/blob/main/docs/faq/getting-started-faq/installation-setup-issues.md)
- [GoogleMock Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)
- [GoogleTest Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md)
- [Advanced GoogleTest Topics](https://github.com/google/googletest/blob/main/docs/advanced.md)

---

If your error is not covered here, enabling verbose output and reading debug logs (`--gmock_verbose=info`) often reveals call matching and ordering issues.

<Tip>
When in doubt, simplify your test case to isolate the failing interaction and incrementally add expectations.
</Tip>
