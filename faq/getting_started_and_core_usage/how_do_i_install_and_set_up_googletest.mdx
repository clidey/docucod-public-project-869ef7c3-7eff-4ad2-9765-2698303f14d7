---
title: "How do I install and set up GoogleTest?"
description: "Covers common installation questions, supported platforms, and quickstart advice for various build systems. Guides users through the practical choices and steps for integrating GoogleTest into a new or existing C++ project."
---

# How do I install and set up GoogleTest?

GoogleTest is a robust C++ testing framework that supports a wide range of platforms and build systems. This guide helps you navigate common installation questions, understand platform compatibility, and quickly get started integrating GoogleTest into your projects using different build tools.

---

## Supported Platforms and Prerequisites

Before installation, ensure your development environment meets the following key requirements:

- **Operating Systems**: Linux, Windows, macOS, and other Unix-like systems are supported.
- **Compiler Compatibility**: A C++ compiler with at least C++17 support is required.
- **Threading Support**: pthreads or native threading support ensures thread safety.

For detailed platform-specific considerations and compiler versions, see the [Prerequisites & System Requirements](../getting-started/setup-installation/system-requirements) documentation.

---

## Installation Methods

### Using CMake

CMake is the recommended tool for building and integrating GoogleTest in most environments.

#### Standalone Build

If you want GoogleTest built as an independent project:

1. Clone GoogleTest repository:

   ```bash
   git clone https://github.com/google/googletest.git -b v1.17.0
   cd googletest
   ```

2. Create a build directory and run CMake (to include GoogleMock by default):

   ```bash
   mkdir build && cd build
   cmake ..
   ```

   If you only want to build GoogleTest (without GoogleMock), add `-DBUILD_GMOCK=OFF`:

   ```bash
   cmake .. -DBUILD_GMOCK=OFF
   ```

3. Build using your native build system (e.g., Make, MSBuild):

   ```bash
   make
   ```

4. (Optional) Install the libraries on your system (requires admin privileges):

   ```bash
   sudo make install
   ```

#### Integration into Existing CMake Projects

You can integrate GoogleTest into your project by embedding the source or using `FetchContent`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# For Windows: Prevents overriding parent project’s compiler/linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

This approach ensures consistent compiler and linker flags across your project and GoogleTest.

> **Tip:** Ensure your CMake version is 3.14 or above to use `FetchContent_MakeAvailable()`.

---

### Using Bazel

If Bazel is your preferred build system, GoogleTest integration follows a slightly different path:

1. Create a Bazel workspace directory.

2. Define a `MODULE.bazel` file to declare GoogleTest dependency:

```python
bazel_dep(name = "googletest", version = "1.17.0")
```

3. Create your test source and `BUILD` file referencing GoogleTest dependencies.

Example `BUILD` rule:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

4. Build and run your tests with Bazel commands:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

More details and a complete quickstart walkthrough are in [Quickstart: Building with Bazel](../docs/quickstart-bazel.md).

---

## Writing a Main Function and Running Tests

Most users do not need to write their own `main()` function, as GoogleTest provides a default main in the `gtest_main` library.

If custom setup is needed before running tests, your `main()` should:

1. Call `testing::InitGoogleTest(&argc, argv);` to initialize flags and settings.
2. Call `RUN_ALL_TESTS()` to execute all registered tests.

Example:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Otherwise, link your tests with `gtest_main` to avoid re-implementing this boilerplate.

For embedded or Arduino-like platforms, where `argc` and `argv` may be unavailable, GoogleTest provides an overload of `InitGoogleTest()` without arguments.

---

## Using GoogleTest in Your Project

After installation, include the main header:

```cpp
#include <gtest/gtest.h>
```

Start by writing tests using the `TEST()` macro, which defines individual tests.

Example:

```cpp
TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
}
```

Build and run your tests using your chosen build system (e.g., CMake or Bazel).

---

## Popular Build Issues and Tips

- **Linking Errors with Runtime Libraries on Windows:**

  Visual Studio sometimes mismatches runtimes between your project and GoogleTest. Use the `gtest_force_shared_crt` CMake option to align run-times:

  ```cmake
  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
  ```

- **Compiler Flags:**

  Always ensure your project and GoogleTest are compiled with the same C++ standard (minimum C++17).

- **Thread Support:**

  On POSIX platforms, ensure that the pthread library is linked when using GoogleTest’s threading features.

- **Disable Tests Temporarily:**

  Prefix a test or test suite name with `DISABLED_` to exclude from execution without removing the code.

- **Re-run tests quickly:**

  Use `RUN_ALL_TESTS()` once; it handles test initialization and teardown correctly.

For more detailed troubleshooting, consult the [Troubleshooting Common Setup Issues](../getting-started/first-steps-validation/troubleshooting-setup).

---

## Next Steps

- Follow the [Primer](../docs/primer.md) to learn how to write effective tests.
- Explore [Sample Tests](../docs/samples.md) for practical examples.
- Advance with guides on [Building and Running Tests](../guides/getting-started-workflows/building-and-running-tests).

---

## Additional Resources

- [Installation (CMake & Bazel)](../getting-started/setup-installation/installation-methods) - Detailed instructions on setup.
- [Supported Platforms](../getting-started/setup-installation/system-requirements) - Platform compatibility.
- [Integration with Build Tools](../overview/architecture-key-concepts/integration-with-build-and-tools) - Practical integration tips.

---

By following these steps, you'll ensure a smooth installation and integration experience, enabling you to write, build, and run C++ tests with GoogleTest effectively.