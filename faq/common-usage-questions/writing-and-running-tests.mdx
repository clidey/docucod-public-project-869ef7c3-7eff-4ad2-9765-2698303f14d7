---
title: "Writing and Running Tests"
description: "Provides answers to frequently asked questions about test definition, test discovery, running tests, and managing test outputs. Guides users through typical workflows for authoring and executing tests, and helps troubleshoot issues in test detection or execution."
---

# Writing and Running Tests FAQ

This FAQ addresses common questions and practical guidance on writing, discovering, running, and managing tests with GoogleTest. It focuses on empowering you to author effective tests, understand test execution flow, handle outputs, and troubleshoot typical issues encountered in test development and execution.

---

## 1. Writing Tests: Basics and Best Practices

### What is a simple test in GoogleTest and how do I write one?

A simple test is created using the `TEST()` macro with two arguments: a test suite name and a test name. Both must be valid C++ identifiers without underscores. The test body contains your test logic and assertions. For example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

This test verifies that `Factorial(0)` returns 1.

### When should I use test fixtures?

Use **test fixtures** when multiple tests require the same setup or data configuration. Define a fixture class deriving from `testing::Test` and initialize members in the constructor or `SetUp()` method. Then write tests using `TEST_F()` which lets each test access the fixture's members. This increases reuse, clarity, and isolation.

Example fixture usage:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
  }
  Queue<int> q0_, q1_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

### How do I run all my tests?

Call `RUN_ALL_TESTS()` after initializing GoogleTest in your `main()` function:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Avoid calling `RUN_ALL_TESTS()` more than once. Its return value should be returned from `main` to signal success or failure to test runners.

### Can I customize the main function?

Yes. If you need to perform custom setup before running tests, implement your own `main()`. Just make sure to call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()`.

---

## 2. Test Discovery and Execution

### How are tests discovered and registered?

GoogleTest automatically registers all tests written with `TEST()`, `TEST_F()`, `TEST_P()`, and typed test macros as they are compiled and linked. No manual enumeration is required. Tests are executed in suites; each test runs in a fresh fixture instance.

### What happens when I run `RUN_ALL_TESTS()`?

It runs each registered test in sequence by:

1. Creating a new fixture instance.
2. Calling `SetUp()`.
3. Running the test body.
4. Calling `TearDown()`.
5. Deleting the fixture instance.

If a fatal assertion occurs, execution of the current test is stopped early.

### How do I run only specific tests?

Use the `--gtest_filter` flag or `GTEST_FILTER` environment variable to specify patterns matching the full test names (test_suite.test_name).

Examples:

- `--gtest_filter=FactorialTest.*` runs all tests in `FactorialTest`.
- `--gtest_filter=*HandlesZeroInput` runs all tests named `HandlesZeroInput`.
- Use wildcards `*` and `?` for flexible matching.

### How does GoogleTest handle disabled tests?

Tests or test suites prefixed with `DISABLED_` are compiled but excluded from runs. To run them, use `--gtest_also_run_disabled_tests` flag.

---

## 3. Parameterized and Typed Tests

### What are parameterized tests, and why use them?

Parameterized tests let you write a test template with different input parameters, avoiding duplicate code. Define a fixture derived from `testing::TestWithParam<T>`, write tests with `TEST_P()`, and instantiate them with `INSTANTIATE_TEST_SUITE_P()` using parameter generators.

Example:

```cpp
class FooTest : public testing::TestWithParam<int> {};

TEST_P(FooTest, DoesBlah) {
  EXPECT_TRUE(DoSomething(GetParam()));
}

INSTANTIATE_TEST_SUITE_P(MyGroup, FooTest, testing::Values(1, 2, 3));
```

### What are typed and type-parameterized tests?

- **Typed tests** run the same test logic for a fixed list of types known when the test suite is defined. Use `TYPED_TEST_SUITE()` and `TYPED_TEST()` macros.

- **Type-parameterized tests** are similar but allow defining tests first, then instantiating with different type lists later using `TYPED_TEST_SUITE_P()`, `TYPED_TEST_P()`, and `INSTANTIATE_TYPED_TEST_SUITE_P()`.

They are useful for testing templates or generic code against multiple types.

---

## 4. Test Outputs and Results

### How do I interpret test pass and failure?

- If **all assertions** in a test pass, the test **succeeds**.
- If any assertion fails (fatal or non-fatal) or the test crashes, it **fails**.

### What is the difference between `EXPECT_` and `ASSERT_` assertions?

- `EXPECT_*` assertions record failures but let the test continue.
- `ASSERT_*` assertions abort the current function immediately on failure.

Use `EXPECT_*` to collect multiple issues, and `ASSERT_*` when continuing does not make sense.

### How does GoogleTest report test results?

GoogleTest prints concise console output by default, showing running tests and their pass/fail states. It can also generate detailed XML or JSON reports with the `--gtest_output=xml:path` or `--gtest_output=json:path` flags.

### How to include additional info in test output?

Use `RecordProperty("key", value)` inside your tests to add custom properties that appear in XML/JSON reports.

---

## 5. Troubleshooting Common Issues

### Why does GoogleTest require test fixture classes to have a default constructor?

GoogleTest creates a fresh instance of the fixture for each test. If you define non-default constructors, you must explicitly provide a default constructor or the framework cannot instantiate tests.

### Why do some `ASSERT_*` macros cause compilation errors in constructors or destructors?

`ASSERT_*` and `FAIL()` macros generate code that returns from the current function, but constructors and destructors are not `void` functions, which leads to compilation errors. Use `SetUp()` or `TearDown()` instead.

### My death test hangs or crashes; what should I do?

Death tests run in child processes, and can be fragile with threads or resources. To fix:

- Minimize thread creation outside `EXPECT_DEATH`.
- Try enabling the thread-safe death test style (`GTEST_FLAG_SET(death_test_style, "threadsafe")`).
- Avoid shared mutable state or side effects that the parent process relies on.

### How do I run tests multiple times for flaky test detection?

Use the `--gtest_repeat=N` flag to repeat tests `N` times.

### How do I stop running tests on the first failure?

Use the `--gtest_fail_fast` flag.

### How do I list all tests without running them?

Use the `--gtest_list_tests` flag.

---

## 6. Additional Tips and Best Practices

- Avoid underscores `_` in test suite and test names to prevent name clashes and confusing errors.
- Use fixtures and parameterized tests to reduce duplication and improve maintenance.
- Always check and return the value of `RUN_ALL_TESTS()` in `main()`.
- Use `SCOPED_TRACE` to add meaningful trace messages when calling helper functions in tests.
- Use `EXPECT_NO_FATAL_FAILURE(statement)` to assert when a statement does not produce fatal failures in subroutines.
- When testing non-public class members, consider using `FRIEND_TEST` or restructuring code for better testability.

---

## 7. Related Documentation and Resources

- [GoogleTest Primer](primer.md) – Introduction and foundational testing concepts.
- [Testing Reference](reference/testing.md) – Detailed macros and API for writing tests.
- [Assertions Reference](reference/assertions.md) – Comprehensive assertion macros documentation.
- [Advanced GoogleTest Topics](advanced.md) – Extended techniques and best practices.
- [Parameterized and Typed Tests](advanced.md#value-parameterized-tests), (advanced.md#typed-tests) – Detailed use of test parameterization and typing.
- [Death Tests](advanced.md#death-tests) and [Death Test API](reference/assertions.md#death) – How to write and troubleshoot death tests.
- [FAQ](faq.md) – Additional answers to common user questions.

---

For more examples and practical code samples, visit the [googletest/samples](https://github.com/google/googletest/tree/main/googletest/samples) directory in the project repository.

