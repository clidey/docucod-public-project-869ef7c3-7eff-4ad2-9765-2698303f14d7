---
title: "Installation and Setup"
description: "Addresses common questions and issues related to installing and configuring GoogleTest and GoogleMock, covering supported platforms, C++ standards, build systems like CMake and Bazel, and initial integration steps. Designed to help users get up and running quickly across diverse environments."
---

# Installation and Setup FAQ

This page addresses common questions and issues related to installing and configuring GoogleTest and GoogleMock, helping you get the frameworks up and running smoothly across various platforms and build environments.

---

## 1. What platforms does GoogleTest support?

GoogleTest is designed to be cross-platform and supports the major operating systems:

- **Linux**
- **Windows**
- **macOS**

It also supports embedded systems like ESP8266, ESP32, and NRF52 with Arduino, though some platform-specific limitations exist.

<Tip>
Ensure your development environment meets the platform-specific requirements and dependencies before proceeding to installation.
</Tip>

## 2. What are the compiler and C++ standard requirements?

GoogleTest requires a compiler with support for at least **C++17**. This standard ensures compatibility with GoogleTest's internal features and modern C++ conveniences.

For CMake projects, you can enforce this by setting:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

If your build system doesn’t allow this directly, pass the required compiler flags manually.

<Note>
Make sure all parts of your project (including dependencies) are compiled with the same C++ standard to avoid compatibility issues.
</Note>

## 3. How do I build GoogleTest using CMake?

GoogleTest includes a convenient CMake build script for cross-platform builds.

### Standalone Build

1. Clone the GoogleTest repository:

```
git clone https://github.com/google/googletest.git -b v1.17.0
git checkout main
```

2. Create and enter a build directory:

```
cd googletest
mkdir build
cd build
```

3. Generate build files:

- To build **GoogleTest and GoogleMock** together (default):

  ```
  cmake ..
  ```

- To build **GoogleTest only** (without GoogleMock):

  ```
  cmake .. -DBUILD_GMOCK=OFF
  ```

4. Build the project:

- On Unix-like systems (Linux/macOS), run:

  ```
  make
  sudo make install  # Optional, requires admin rights
  ```

- On Windows, open the generated solution file (`gtest.sln`) in Visual Studio and build it.

- On macOS with Xcode, use the generated `.xcodeproj` for building.

### Incorporating in Existing CMake Projects

You can add GoogleTest as a subdirectory in your own CMake project:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Visual Studio runtime consistency
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME MyTests COMMAND my_tests)
```

This ensures seamless integration and consistent build settings.

## 4. What are the differences between static and shared builds?

- By default, GoogleTest is built as a **static library** for simplicity and portability.
- If needed, you can build it as a **shared library (DLL on Windows)** by adding the compiler flag:

  ```
  -DGTEST_CREATE_SHARED_LIBRARY=1
  ```

- Your tests using the shared library should be compiled with:

  ```
  -DGTEST_LINKED_AS_SHARED_LIBRARY=1
  ```

<Note>
Static builds are recommended unless you have explicit reasons to use shared libraries.
</Note>

## 5. How do I build and link GoogleMock?

GoogleMock is included in the GoogleTest repository and built alongside it by default.

To build GoogleMock with the main program entry point (`main()` function), use the `gmock_main` target.

- Link your test executable against `gmock_main` to get the default `main()`:

  ```cmake
target_link_libraries(my_tests gmock_main)
  ```

- If you want to provide your own `main()`, link only to `gmock` and `gtest`.

## 6. What about building on embedded or special platforms?

GoogleTest supports platforms like ESP8266, ESP32, and NRF52 with Arduino. On these platforms:

- Entry points are typically `setup()` and `loop()` instead of `main()`.
- The GoogleTest and GoogleMock source provide implementations that hook into this model transparently.

Example snippet from the platform-specific main file:

```cpp
void setup() {
  testing::InitGoogleTest();
}

void loop() {
  RUN_ALL_TESTS();
}
```

## 7. How do I integrate GoogleTest with Bazel or other build systems?

While this document focuses on CMake, GoogleTest and GoogleMock provide BUILD files for Bazel. For Bazel:

- Clone or add GoogleTest as an external repository.
- Use Bazel build rules `cc_test` and `cc_library` to build and run tests.

Refer to the official [googletest Bazel README](https://github.com/google/googletest/blob/main/googletest/README.md) and community resources for detailed instructions.

## 8. How do I configure GoogleTest flags during test initialization?

GoogleTest parses and removes its own flags from the command line during initialization:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Be sure to call `InitGoogleTest()` before `RUN_ALL_TESTS()`. GoogleMock provides a similar initializer `InitGoogleMock()` that also initializes GoogleTest.

## 9. What are some common build or setup issues and how to fix them?

### Issue: Runtime library mismatch on Visual Studio

- Error similar to `mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' doesn't match value 'MDd_DynamicDebug'`

  **Solution:** Use the CMake option:

  ```cmake
  -Dgtest_force_shared_crt=ON
  ```

  which makes GoogleTest link against the dynamic runtime to match your project.

### Issue: Undefined references to GoogleTest symbols

- Ensure you link the necessary libraries (e.g., `gtest`, `gtest_main`, `gmock`, or `gmock_main`).
- Verify include directories and library paths are set correctly.

### Issue: Multiple definitions of `main()` symbol

- Occurs if you link `gtest_main`/`gmock_main` and provide your own `main()`.
- Link either your own `main()` or the provided main library, but not both.

## 10. What are best practices for installing and integrating GoogleTest?

- Use the latest stable release or a specific version tag for reproducible builds.
- Prefer embedding GoogleTest via CMake FetchContent or as a git submodule for best integration.
- Align your project's compiler and linker flags with those used for building GoogleTest.
- Use `gtest_main` or `gmock_main` for default test program entry points to simplify setup.
- Regularly update your GoogleTest submodule or dependency to receive bug fixes and improvements.


---

## Additional Resources

- [GoogleTest Primer](primer.md) – Learn how to write basic tests.
- [googletest/README.md](googletest/README.md) – Generic build instructions and guidance.
- [Getting Started: Installation on Linux, macOS, Windows](getting-started/setup-and-installation/installation-on-linux-macos-windows.md) – Detailed installation steps.
- [Configuring Your Project](getting-started/setup-and-installation/configuring-your-project.md) – Integrating GoogleTest into C++ projects with CMake.
- [Troubleshooting Common Setup Issues](getting-started/first-test-and-validation/troubleshooting-common-setup-issues.md) – Solutions to frequent problems.
- Official GitHub: <https://github.com/google/googletest>

<Tip>
When upgrading GoogleTest or GoogleMock versions, always verify your build configurations and re-run your tests to catch incompatibilities early.
</Tip>