---
title: "Basic Test Writing & Best Practices"
description: "Find practical tips and answers about defining test cases, using assertions, and effective structuring of tests with GoogleTest. This page also introduces key testing conventions and how to transition between writing basic unit tests and parameterized tests."
---

# Basic Test Writing & Best Practices

This page guides you through practical tips and concise guidance on writing effective unit tests using GoogleTest. You'll learn how to define test cases clearly, structure assertions for reliability and readability, and adopt best practices for maintainable and robust testing with GoogleTest.

---

## 1. Writing Test Cases

Writing your first tests with GoogleTest involves defining test cases that encapsulate individual, verifiable behaviors of your code.

### Defining Test Cases and Test Suites

Use the `TEST` macro to define a test case within a test suite:

```cpp
TEST(TestSuiteName, TestCaseName) {
  ... // test logic
}
```

- **Test Suites** group related tests, improving organization.
- **Test Cases** are individual tests focused on verifying one specific behavior.

Example:

```cpp
TEST(MathUtils, HandlesPositiveNumbers) {
  EXPECT_EQ(Square(5), 25);
}
```

### Test Fixture Classes

For tests sharing common setup or teardown code, use test fixtures with `TEST_F`:

```cpp
class MyTestFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Code here runs before each test
  }
  void TearDown() override {
    // Code here runs after each test
  }
  // Shared data members
};

TEST_F(MyTestFixture, TestBehavior1) {
  // Access fixture members
}
```

### Names Matter

Name your test suites and test cases clearly to reflect their intent. Clear names improve readability and help pinpoint test failures quickly.

<Tip>
Use descriptive and concise names for both suites and tests. For instance, `FileReaderTests` for a suite testing file reading, and `ReadsEmptyFileCorrectly` for a specific test case.
</Tip>

## 2. Using Assertions Effectively

Assertions validate expected behaviors and state in your code. GoogleTest offers a rich set of assertion macros.

### Basic Assertions

- `EXPECT_EQ(val1, val2)`: Checks equality; continues test if false.
- `ASSERT_EQ(val1, val2)`: Checks equality; aborts current test if false.
- `EXPECT_TRUE(condition)`, `ASSERT_TRUE(condition)`
- `EXPECT_FALSE(condition)`, `ASSERT_FALSE(condition)`

Example:

```cpp
EXPECT_EQ(Add(1, 2), 3);
ASSERT_TRUE(IsValid(input));
```

**Use `ASSERT_*` macros when failing means continuing is pointless, and `EXPECT_*` when you want to gather multiple failures before exiting.**

### Rich Assertions

GoogleTest supports advanced assertions like `EXPECT_THROW`, `EXPECT_NO_THROW`, and floating-point comparisons.

Example:

```cpp
EXPECT_THROW(FunctionThatThrows(), std::runtime_error);
EXPECT_NEAR(CalculatePi(), 3.14159, 0.0001);
```

### TEST vs TEST_F Assertions

Both support all assertion macros. Use the fixture tests (`TEST_F`) when setup/teardown or shared data are involved.

### Using `EXPECT_THAT` with Matchers

For complex conditions, use `EXPECT_THAT` with matchers:

```cpp
EXPECT_THAT(value, ::testing::Gt(5));
EXPECT_THAT(container, ::testing::ElementsAre(1, 2, 3));
```

Learn more about [Matchers Here](../api-reference/gmock-mocking-framework/matchers-and-cardinalities).

## 3. Organizing Tests to Maximize Clarity and Maintenance

### One Behavior per Test

Limit each test to verifying a single behavior or outcome. This improves failure diagnosis and test clarity.

### Keep Tests Independent

Tests should not depend on each other or on specific execution orders. Avoid sharing global/static state unless carefully isolated.

### Use Test Fixtures Where Appropriate

If multiple tests share setup/teardown logic, group them in a fixture class.

### Parameterized Tests

When testing the same logic over varying inputs, use parameterized tests (`TEST_P` and `INSTANTIATE_TEST_SUITE_P`) to avoid repetitive code.

Example snippet:

```cpp
class MyParamTest : public ::testing::TestWithParam<int> {};

TEST_P(MyParamTest, HandlesValues) {
  int param = GetParam();
  EXPECT_GT(param, 0);
}

INSTANTIATE_TEST_SUITE_P(PositiveTests, MyParamTest, ::testing::Values(1, 2, 3));
```

Explore parameterized tests further in the [Parameterized & Type-Parameterized Tests](../api-reference/core-testing-api/parameterized-and-type-parameterized-tests) page.

## 4. Best Practices and Tips

### Prefer `EXPECT_` Over `ASSERT_` When Possible

Use `EXPECT_*` assertions unless the test cannot proceed meaningfully on failure.

### Avoid Over-Specifying

Restrict expectations to what truly matters for the behavior under test to reduce brittle tests.

### Use Helper Functions and Macros

For repetitive or complex assertions, encapsulate them in helpers to enhance readability.

### Clean Up Test Data

Ensure tests leave shared resources in a clean state and avoid side effects that may affect other tests.

### Leverage GoogleTest Extras

Use features like death tests, value-parameterized tests, and custom matchers to improve test coverage and diagnostics.

## 5. Transitioning from Basic to Parameterized Tests

When your logic is the same except for different inputs or expected outputs, parameterized tests prevent repetition and improve test clarity.

### How to Start

- Define a parameterized test fixture inheriting from `::testing::TestWithParam<T>`.
- Use `TEST_P` instead of `TEST`.
- Instantiate tests with input values using `INSTANTIATE_TEST_SUITE_P`.

### Success Criteria

Inputs and corresponding expected outputs are cleanly separated.

### Example

```cpp
class FactorialTest : public ::testing::TestWithParam<std::pair<int, int>> {};

TEST_P(FactorialTest, ComputesCorrectly) {
  auto param = GetParam();
  EXPECT_EQ(Factorial(param.first), param.second);
}

INSTANTIATE_TEST_SUITE_P(
    ValidInputs, FactorialTest,
    ::testing::Values(
        std::make_pair(0, 1),
        std::make_pair(1, 1),
        std::make_pair(5, 120)
    )
);
```

## 6. Common Pitfalls to Avoid

- Calling `EXPECT_CALL` after the mock function has already been invoked leads to undefined behavior.
- Overly strict expectations cause brittle tests; prefer minimal sufficient verification.
- Ignoring the effect of default-return actions can lead to unnoticed incorrect tests.
- Using `ASSERT_*` extensively where tests could continue reduces failure aggregation.

## 7. Further Learning and Resources

- [Writing Your First Test](../guides/getting-started/writing-first-test)
- [Mastering Assertions](../guides/core-workflows/rich-assertions)
- [Using Parameterized Tests](../guides/core-workflows/parameterized-tests)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Mocking Fundamentals](../faq/common-usage-questions/mocking-fundamentals-faq)

<Tip>
Start simple: Write basic tests first, master assertions, then progressively incorporate fixtures, parameterized tests, and mocks for a robust test suite.
</Tip>

---

## Appendix: Quick Mock Example Demonstration

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

// Production interface.
class Calculator {
 public:
  virtual ~Calculator() = default;
  virtual int Add(int a, int b) = 0;
};

// Mock class.
class MockCalculator : public Calculator {
 public:
  MOCK_METHOD(int, Add, (int a, int b), (override));
};

TEST(CalculatorTest, AddsTwoNumbers) {
  MockCalculator mock_calc;
  EXPECT_CALL(mock_calc, Add(2, 3))
      .Times(1)
      .WillOnce(::testing::Return(5));

  int result = mock_calc.Add(2, 3);
  EXPECT_EQ(result, 5);
}
```

This example showcases defining a mock, setting an expectation, and asserting the outcome.

---

## Summary

Writing tests with GoogleTest requires well-structured test cases, effective use of assertions, proper organization using fixtures and parameterized tests, and applying best practices to produce stable and maintainable tests.

Use the provided examples and best practice guidelines to build a strong foundation before moving on to more advanced testing techniques and mocks.


<Check>Be sure to explore the linked guides and references for deeper mastery.</Check>
