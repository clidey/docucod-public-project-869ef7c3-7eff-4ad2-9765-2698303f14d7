---
title: "Test Discovery & Execution Problems"
description: "Guidance for users whose tests are not being discovered or executed. Explains ways to structure tests for successful recognition, manage test naming, and debug issues related to skipped or ignored testsâ€”ensuring reliable test runs across different build systems."
---

# Test Discovery & Execution Problems

GoogleTest and GoogleMock rely on well-structured test code and appropriate naming conventions to successfully discover and execute your tests during builds. If your tests are not running as expected, this page guides you through understanding how to structure tests for successful recognition, manage naming conventions, and debug issues related to skipped or ignored tests.

---

## Why Tests May Not Be Discovered or Executed

Imagine you wrote a suite of tests, but after building, your test runner shows zero tests executed. This can be frustrating. The most common reasons tests are not discovered or executed include:

- Incorrect naming patterns of test suites or test cases
- Misconfiguration in build systems affecting test registrations
- Tests being skipped, disabled, or ignored due to macros or flags
- Linking or initialization problems causing tests not to register

Understanding the flow of test registration and execution is crucial to resolving these pitfalls.

---

## Structuring Tests for Proper Recognition

GoogleTest expects tests to follow certain conventions to automatically discover and run them:

- **Use the `TEST()` or `TEST_F()` macros:** Your test functions must be declared with these macros, which register tests with the framework.

- **Valid naming conventions:** Both the test suite and test names should be valid C++ identifiers without underscores or special characters.

- **Test suite and fixture structure:** For tests that share setup/teardown, inherit from `testing::Test` and use `TEST_F()` to define individual tests.

- **Avoid disabling tests accidentally:** By default, GoogleTest will discover all tests unless marked disabled (e.g., `TEST(DISABLED_MySuite, TestName)`).

### Example

```cpp
#include <gtest/gtest.h>

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

class QueueTest : public testing::Test {
 protected:
  Queue<int> q_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q_.size(), 0);
}
```

Proper use of these macros ensures that tests are eligible for discovery and execution.

---

## Managing Test Naming and Skipped Tests

### Naming Requirements
- Test suite and test names must be valid C++ identifiers.
- Avoid underscores (`_`) as they may interfere with certain test discovery in some environments.
- Disabled tests are prefixed with `DISABLED_` and will not be run unless explicitly specified.

### Recognizing Disabled Tests
If a test is not running, check if it is purposely disabled:

```cpp
TEST(DISABLED_MySuite, TestName) { ... }  // Ignored by default
```

To run disabled tests, add the flag `--gtest_also_run_disabled_tests` when running your test binary.

### Ignored or Skipped Tests in Build Systems
Your build system or continuous integration might have options or filters that exclude certain tests based on tags or names. Verify that these filters are not preventing your tests from running.

---

## Debugging Test Execution Issues

If tests are not discovered or executed despite following naming and structuring guidelines, follow this decision workflow:

<Steps>
<Step title="Verify Test Registration">
Ensure that the test source files are compiled and linked in your test target. Missing files lead to no test discovery.
</Step>
<Step title="Check `main()` Initialization">
GoogleTest requires initialization via `testing::InitGoogleTest()`. Confirm `main()` calls this before `RUN_ALL_TESTS()`.
</Step>
<Step title="Check for Disabled Tests">
Look for tests prefixed with `DISABLED_`. Use the flag `--gtest_also_run_disabled_tests` to run them if needed.
</Step>
<Step title="Inspect Build System Filters">
If using CMake or Bazel, verify test filtering parameters do not exclude your tests.
</Step>
<Step title="Run With Verbose Logging">
Add `--gtest_list_tests` to list all discovered tests. This helps confirm if tests are registered.
</Step>
</Steps>

---

## Common Pitfalls and Tips

- **Ensure virtual destructors:** For mocks and test fixtures, missing virtual destructors can cause subtle runtime behavior.
- **Macros & Namespaces:** Defining tests inside unusual macros or namespaces might interfere with test discovery.
- **Compile & Link Flags:** Confirm that the proper flags link `gtest` and `gmock` libraries and ensure all dependencies are included.
- **Avoid duplicated tests:** Duplicates can confuse some test runners.

---

## Verifying Test Discovery

Use these commands to validate your test discovery:

- List all tests without running them:

```bash
your_test_binary --gtest_list_tests
```

- Run all discovered tests with detailed output:

```bash
your_test_binary --gtest_verbose=info
```

If tests do not appear in the list, revisit your source and build configuration to confirm correct registration.

---

## Handling Skipped, Ignored, or Filtered Tests

- Use GoogleTest flags to include or exclude tests:

  - `--gtest_filter=`: Run only matching tests.
  - `--gtest_also_run_disabled_tests`: Run disabled tests.

- Confirm CI pipelines do not selectively exclude tests.

---

## Integration with Build Systems

When building with CMake or Bazel:

- Include test sources in your test target.
- Link against `gtest_main` or provide your own `main()` calling `InitGoogleTest()`.
- Confirm test-related flags are propagated properly.

If tests are silently skipped, ensure the testing framework is fully initialized and executed in the correct environment.

---

## Summary

Ensuring reliable test discovery and execution involves proper test structuring, naming, build integration, and configuration. Always:

- Write tests using `TEST()` or `TEST_F()` with valid identifiers.
- Verify your test binary links and initializes GoogleTest properly.
- Use `--gtest_list_tests` to diagnose discovery issues.
- Be mindful of disabled tests and build filters.

Following these guidelines guarantees that your tests will be reliably found and executed across different build systems.

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) - Learn how to write and run simple tests.
- [GoogleTest FAQ](https://google.github.io/googletest/faq.html#test-discovery) - Troubleshooting common test discovery problems.
- [Building and Running Tests](https://google.github.io/googletest/advanced.html#building-and-running-tests) - Integration tips with build tools.
- [Test Lifecycle and Main API](https://google.github.io/googletest/api-reference/core-concepts.html#test-lifecycle-and-main-entry-points)

---

For broader understanding, review how mocks integrate with GoogleTest and the initialization lifecycle in the [GoogleMock README](https://google.github.io/googletest/gmock_for_dummies.html) and core API docs.

---