---
title: "Installation and Setup Issues"
description: "Find solutions to common installation roadblocks, such as compiler errors, missing dependencies, or configuration problems in CMake, Bazel, and manual integration workflows. Ideal for users who are setting up GoogleTest and GoogleMock for the first time or encountering initial hurdles."
---

# Installation and Setup Issues

GoogleTest and GoogleMock offer powerful frameworks for writing and automating C++ tests, yet users often encounter installation obstacles when setting up their development environment. This guide addresses the most common installation roadblocks—including compiler errors, missing dependencies, and configuration challenges—focused specifically on builds using **CMake**, **Bazel**, or **manual integration** methods.

Whether you're installing GoogleTest and GoogleMock for the first time or facing issues during early setup, this FAQ-style guide aims to help you identify, understand, and resolve the key problems hindering your build process.

---

## Frequently Asked Questions

### 1. What compiler requirements must I meet to build GoogleTest?
GoogleTest requires a **C++17-compliant compiler**. Common supported compilers include GCC 7+, Clang 5+, MSVC 2017+, and Intel's compilers with C++17 support enabled. Ensure your build environment explicitly specifies `-std=c++17` or equivalent flags.

<Tip>
Explicitly setting the C++17 standard in your top-level `CMakeLists.txt` using `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)` ensures consistent standards compliance.
</Tip>

### 2. How do I resolve compiler or linker errors related to pthreads on Linux when using CMake?
If your build fails with missing pthread symbols, it's usually because the pthread library isn't properly linked.

- When using the GoogleTest CMake scripts, the pthread dependency is automatically detected and linked correctly.
- If you use a custom build, ensure linking against pthread is included (e.g., by adding `target_link_libraries(your_target pthread)`).

<Tip>
If building manually, pass `-pthread` to both compiler and linker flags to avoid undefined references.
</Tip>

### 3. What should I do if I see MSVC runtime mismatch errors on Windows?
GoogleTest defaults to static linking of the C runtime (`/MT` flag), but Visual Studio projects often default to dynamic runtime (`/MD`). This mismatch causes linker errors like:

```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

To fix this:

- Set the CMake option `gtest_force_shared_crt` to `ON` to align GoogleTest runtime linking with your project.
- For example: `cmake .. -Dgtest_force_shared_crt=ON`

This option ensures consistent runtime linkage.

### 4. How do I disable building GoogleMock if I only want GoogleTest?
When running CMake to generate build files, disable GoogleMock explicitly:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

This builds only GoogleTest, reducing build time and dependencies.

### 5. Where should I install GoogleTest and GoogleMock header files and libraries?
By default, GoogleTest installs headers in `/usr/local/include` and libraries in `/usr/local/lib`.

With CMake, use the following commands after building:

```bash
make
sudo make install
```

Ensure your system includes those paths when compiling and linking your own projects.

<Tip>
For flexible integration, consider embedding GoogleTest as a subdirectory in your project via `add_subdirectory()`, which helps to align compiler settings.
</Tip>

### 6. Why am I facing build failures on platforms like Windows Mobile or unusual platforms?
Certain platforms have specific compiler or linking idiosyncrasies. For example, Windows Mobile requires `_tmain` support, but GoogleTest uses `main()` due to known MSVC issues.

Refer to platform compatibility notes or consider overriding entry points. Reviewing platform-related CMake configuration and defining platform macros can help.

### 7. How do I link my tests correctly to GoogleTest and GoogleMock libraries?
Link your test executable to either `gtest` or `gtest_main` libraries:

- Use `gtest_main` if you want a pre-defined `main()` function that initializes and runs all tests.
- Use `gtest` if you prefer to supply your own `main()`.

For example, in CMake:

```cmake
target_link_libraries(your_test_target GTest::gtest_main)
```

Or for GoogleMock:

```cmake
target_link_libraries(your_test_target GMock::gmock_main)
```

### 8. How can I customize compiler flags if my environment requires it?
GoogleTest's CMake scripts provide mechanisms to adjust compiler and linker flags to suit your environment through macro hooks documented in internal CMake scripts.

You can pass custom flags via CMake command-line variables or override specific CMake variables (e.g., `CMAKE_CXX_FLAGS`). Avoid modifying internal scripts unless necessary.

### 9. Are there troubleshooting tips for integrating GoogleTest with Bazel or manual workflows?
GoogleTest supports Bazel with native build rules (`cc_test`, `cc_library`). Ensure dependencies and includes are correctly declared.

For manual builds:

- Make sure you include all `*.cc` files from GoogleTest.
- Link against `pthread` on POSIX platforms.
- Ensure proper compiler flags (e.g., `-std=c++17`).

Refer to the **Installation & Integration** guide for detailed examples.

---

## Common Issues & Solutions

| Issue                                      | Cause                                                      | Solution                                                                                   |
|--------------------------------------------|------------------------------------------------------------|--------------------------------------------------------------------------------------------|
| Compiler doesn't support C++17             | Outdated compiler or missing compiler flags                 | Update compiler or add `-std=c++17` flag                                                  |
| Link errors related to pthread              | Missing thread library linkage                              | Link `pthread` explicitly or use CMake FindThreads                                          |
| Runtime library mismatch on Windows (MSVC) | Mismatched `/MT` and `/MD` flags                            | Use `-Dgtest_force_shared_crt=ON` in CMake                                                |
| Undefined symbols for GoogleMock functions | GoogleMock not built or linked                              | Build and link against `gmock` and `gmock_main`                                           |
| Missing tests or no tests run after build   | Improper test registration or linking                       | Link with `gtest_main` or define your own `main()` calling `RUN_ALL_TESTS()`                |
| Build fails with error around `/EHsc` flag | Warning suppression or exception handling mismatch          | Use provided CMake macros to adjust flags; avoid mixing exception / no-exception builds     |

---

## Troubleshooting Steps

1. **Verify compiler version and standard**
   - Run `g++ --version` or `cl.exe` to confirm support of C++17.
   - Confirm `-std=c++17` is set in your build commands.

2. **Confirm pthread linkage** (Linux/Mac)
   - Ensure `-pthread` is included in both compile and link.
   - For CMake, check `FindThreads` is found and `Threads::Threads` is linked.

3. **Check runtime library settings on Windows**
   - Use the CMake flag `-Dgtest_force_shared_crt=ON` to align runtimes.

4. **Inspect build and link logs for undefined symbols**
   - Missing GoogleMock symbols? Add `gmock` libraries.
   - Missing GoogleTest symbols? Check linking errors and library paths.

5. **Ensure correct linking to libraries with and without main()**
   - Use `gtest_main` or `gmock_main` if you want default test executables.
   - If using custom main(), be sure to link only `gtest` or `gmock`.

6. **Use verbose CMake or build output** to diagnose flag issues:
   - `cmake --trace-expand` or pass `-DCMAKE_VERBOSE_MAKEFILE=ON`

<Tip>
If errors persist, try performing a clean build after fully deleting `build/` artifacts.
</Tip>

---

## Best Practices

- **Use CMake to manage dependencies and flags** since it handles platform-specific quirks automatically.
- **Embed GoogleTest as a subdirectory** in your project for consistent settings and simpler integration.
- **Link tests to `gtest_main` or `gmock_main`** unless you have custom initialization needs.
- **Explicitly enable C++17** in your project-wide build settings.
- **Confirm runtime library consistency on Windows** to avoid linker conflicts.
- **Leverage community resources** and official docs for platform-specific issues, especially on unusual OSes or toolchains.

---

## Where to Get Help

- Review the [Installation & Integration guide](/getting-started/environment-installation/installation-integration) for detailed setup walkthroughs.
- Check [Troubleshooting Common Setup Issues](/getting-started/troubleshooting/common-setup-issues) for frequently encountered build problems.
- Explore community forums, issue trackers, and support channels as referenced in the [Community & Further Help](/getting-started/troubleshooting/community-resources) page.

---

With this knowledge, you can anticipate and resolve nearly all common installation and setup problems, ensuring a smooth start with GoogleTest and GoogleMock.