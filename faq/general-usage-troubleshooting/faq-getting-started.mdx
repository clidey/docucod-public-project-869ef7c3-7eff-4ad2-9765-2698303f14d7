---
title: "Getting Started & Setup Issues"
description: "Step-by-step solutions for installation, build integration, and linking errors. Covers the minimum C++ requirements, common build system configurations (CMake, Bazel), and what to check if GoogleTest or GoogleMock fails to run, ensuring fast ramp-up and a smooth initial journey."
---

# FAQ: Getting Started & Setup Issues

Welcome to the essential FAQ for overcoming common hurdles encountered during the initial phases of using GoogleTest and GoogleMock. This guide provides targeted solutions to installation pitfalls, build system configurations, linking errors, and runtime issues, empowering you to set up your testing environment swiftly and reliably.

---

## 1. What are the minimum C++ requirements for using GoogleTest?

GoogleTest and GoogleMock require a compiler that supports at least the C++17 standard. Make sure your build environment complies with this requirement to ensure successful compilation and operation.

> **Tip:** Check your compiler version and compiler flags to confirm C++17 support before proceeding with installation.

## 2. How do I correctly integrate GoogleTest into my CMake or Bazel build system?

### CMake
- Use the provided CMake integration options detailed in the [Installation Methods](https://google.github.io/googletest/quickstart-cmake.html).
- Link your test targets to GoogleTest and GoogleMock libraries as necessary.
- Remember to add `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>` in your test source files.

### Bazel
- Follow the Bazel setup instructions to include GoogleTest in your `WORKSPACE` and the appropriate `BUILD` files.
- Define test rules that depend on GoogleTest and GoogleMock targets following best practices from the [Integration & Ecosystem Compatibility](https://google.github.io/googletest/integration.html) documentation.

> **Tip:** Always verify your build dependencies and link libraries carefully to prevent unresolved symbols.

## 3. What should I do if my tests fail to run due to linking errors?

- Confirm that GoogleTest and GoogleMock libraries are properly linked.
- Verify that the test main function is correctly defined, usually by calling `::testing::InitGoogleMock()` or `::testing::InitGoogleTest()` followed by `RUN_ALL_TESTS()`.
- Ensure no mismatches in debug/release configurations or runtime libraries between your test code and GoogleTest binaries.

**Sample Main Function Skeleton:**

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

## 4. How do I verify that my mock methods are properly defined?

- Mock methods must be declared using the `MOCK_METHOD` macro in the public section of your mock class.
- For methods with complex argument types (e.g., types involving commas), wrap the types in extra parentheses or define type aliases to prevent parsing errors.

Example:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (int x, const std::string& y), (override));
  MOCK_METHOD((std::pair<int, int>), GetPair, (), (override));  // Wrapped in parentheses
};
```

- Remember to add the `override` specifier when mocking virtual methods to maintain correctness.

## 5. What are uninteresting calls and how do I handle them?

Uninteresting calls occur when a mock method is called without an explicit `EXPECT_CALL` set for it.

- By default, GoogleMock treats these calls as naggy: it issues a warning but the test does not fail.
- Use the following wrappers to change this behavior:
  - `NiceMock<T>`: suppresses warnings on uninteresting calls.
  - `StrictMock<T>`: treats uninteresting calls as test failures.

Example:

```cpp
NiceMock<MockFoo> nice_mock;  // Ignores uninteresting calls without warnings
StrictMock<MockFoo> strict_mock;  // Fails test on uninteresting calls
```

> **Best Practice:** Use `ON_CALL` to specify default behaviors for mock methods without setting strict expectations, reducing accidental warnings.

## 6. How do I set default behaviors for mock methods?

Use `ON_CALL` to define what a mock method should do when invoked without an `EXPECT_CALL` expectation.

Example:

```cpp
ON_CALL(mock_object, Foo(_)).WillByDefault(Return(42));
```

This sets the default return value of `42` for any arguments passed to `Foo`. If an `EXPECT_CALL` matches, it overrides this default.

## 7. What is the difference between `EXPECT_CALL` and `ON_CALL`?

| Feature           | `EXPECT_CALL`                         | `ON_CALL`                                      |
|-------------------|-------------------------------------|-----------------------------------------------|
| Sets expectations  | Yes                                 | No                                            |
| Verifies calls    | Must be called the specified number | Does not check call count                       |
| Default behavior  | Defines behavior when called         | Defines fallback behavior                       |

Use `EXPECT_CALL` when you want to verify calls and `ON_CALL` for default actions.

## 8. How do I correctly order multiple expectations?

- By default, expectations can be fulfilled in any order.
- To require a specific order or partial order:
  - Use `InSequence` and display expectations within its scope.

Example:

```cpp
{
  InSequence s;
  EXPECT_CALL(mock, Step1());
  EXPECT_CALL(mock, Step2());
}
```

- For partial orders, use `Sequence` objects with `.InSequence()` clauses on expectations.

## 9. What if I want to specify the number of times a mock method is called?

Use the `.Times()` modifier with integers or cardinalities:

- `Times(0)`: expects the method never called.
- `Times(1)`: expects exactly one call.
- `AtLeast(n)`, `AtMost(n)`, `Between(m, n)`: specify ranges.
- `AnyNumber()`: no restriction on call count.

If omitted, GoogleMock infers the count based on `.WillOnce()` or `.WillRepeatedly()` clauses.

## 10. How do I handle move-only types in mock methods?

GoogleMock natively supports move-only types such as `std::unique_ptr` in mock methods.

- Declare using `MOCK_METHOD` as usual.
- Use lambdas or custom actions to manage actions involving move-only types.

Example:

```cpp
class MockBuzzer {
public:
  MOCK_METHOD(std::unique_ptr<Buzz>, MakeBuzz, (std::string text), (override));
};

EXPECT_CALL(mock_buzzer, MakeBuzz("hello"))
    .WillOnce([](std::string) { return std::make_unique<Buzz>(); });
```

## 11. What are some common pitfalls during initial setup?

- Forgetting to mark destructors in interfaces as `virtual`, which can lead to leaks or undefined behavior.
- Defining `EXPECT_CALL` statements after the mock method has already been called. Always set expectations before exercising your code.
- Over-specifying tests with unnecessarily strict expectations, leading to brittle tests.
- Not linking to GoogleMock (`-lgmock`) or linking incompatible versions.

## 12. How can I verify that all expectations on a mock object have been satisfied before destruction?

Use:

```cpp
::testing::Mock::VerifyAndClearExpectations(&mock_object);
```

This confirms that all specified expectations have been met and clears them for reuse.

## 13. What should I do if I see warnings about uninteresting calls but am confident they are expected?

- Consider switching your mock from default naggy behavior to a `NiceMock` to suppress these warnings.
- Explicitly add a catch-all `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` to state that uninteresting calls are intended.
- Adjust `--gmock_verbose` flag to control verbosity (`info`, `warning`, or `error`).

## 14. How do I handle linking failures related to GoogleTest and GoogleMock?

- Ensure you link against both `-lgtest` and `-lgmock` libraries.
- Confirm that your build configuration matches the libraries in terms of debug/release and runtime environment.
- Confirm that your test entrypoint is included (e.g., a `main` function invoking `::testing::InitGoogleMock`).

## 15. Where do I find further detailed help on advanced usage?

Refer to these key resources:

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Matchers Reference](https://google.github.io/googletest/reference/matchers.html)
- [Actions Reference](https://google.github.io/googletest/reference/actions.html)

---

## Troubleshooting Checklist

- Verify C++17 compiler support
- Confirm build system integration and linking
- Add explicit `EXPECT_CALL` for all critical interactions
- Use `ON_CALL` to define default mock behavior
- Consider using `NiceMock` or `StrictMock` to manage uninteresting calls
- Check for virtual destructors in interfaces

## Common Errors and What They Mean

| Error                                 | Cause                                                | Resolution                                                        |
|-------------------------------------|-----------------------------------------------------|------------------------------------------------------------------|
| Uninteresting function call warning | Method called without an `EXPECT_CALL`              | Add `EXPECT_CALL` or use `NiceMock` to suppress warning          |
| Unexpected mock function call       | Called with arguments not matching any `EXPECT_CALL`| Verify argument matchers and call expectations                   |
| Mock function called too many times | Exceeded `.Times()` limit                             | Use `.RetiresOnSaturation()` or adjust call count expectations   |
| Linking errors                      | Missing or incorrect linking to GoogleTest/GoogleMock| Check linker flags and dependencies                               |

## Final Tips for Smooth Setup

- Always set expectations before running the code under test.
- Define mock methods in the public section with `MOCK_METHOD`.
- Wrap complex argument types in parentheses or use type aliases.
- Use `ON_CALL` for default behaviors to minimize warnings.
- Utilize sequences (`InSequence`, `Sequence`) to control call order precisely.
- Consider verbosity flags to get detailed diagnostic information.

---

For more detailed guidance, refer to related documentation pages on installation methods, supported platforms, and first test execution found in the official GoogleTest docs.

---

[Back to FAQ Overview](../../faq/overview.md)

[GoogleMock gMock Cheat Sheet](../gmock_cheat_sheet.md)

[GoogleMock Cookbook](../gmock_cook_book.md)

[Matchers Reference](../matchers.md)

[Actions Reference](../actions.md)