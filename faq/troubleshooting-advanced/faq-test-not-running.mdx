---
title: "Why Are My Tests Not Running?"
description: "Explore common reasons why tests may not be discovered, executed, or reported, including namespace conflicts, improper macro usage, test filtering, and CMake/Bazel misconfigurations, empowering users to reliably diagnose these frustrating issues."
---

# Why Are My Tests Not Running?

GoogleTest is a powerful framework that automates C++ test discovery and execution. However, sometimes users encounter situations where tests are unexpectedly not executed, or results are not reported as anticipated. This document helps you identify common causes for these frustrations and walk you through practical steps to resolve them, enabling reliable test runs.

---

## 1. Common Causes for Tests Not Running

Understanding why your tests are not running requires looking at some common patterns that cause GoogleTest to skip or ignore tests.

### 1.1 Namespace and Test Suite Name Conflicts

- **Issue:** Tests are defined inside namespaces, but the registration macros (`TEST`, `TEST_F`, etc.) use unqualified names or different namespaces.
- **Why it matters:** GoogleTest registers tests by suite and test names as string literals. If namespace qualifiers are inconsistent, either no tests appear or unexpected tests are registered.

**Tip:** Always define tests and fixtures in the **same** namespace, especially when using `FRIEND_TEST` to access private members.

```cpp
namespace my_namespace {

class MyFixture : public testing::Test {};

TEST_F(MyFixture, MyTest) {
  // Test code
}

}  // namespace my_namespace
```

### 1.2 Mixing TEST and TEST_F in the Same Test Suite

- **Issue:** Mixing the use of `TEST` (which uses the default `::testing::Test` fixture) and `TEST_F` with different fixtures in the **same** test suite name.
- **Result:** GoogleTest requires **all** tests in a given test suite to use the same fixture class.

**GoogleTest will report:**
> "All tests in the same test suite must use the same test fixture class..."

**Resolution:**
- Change `TEST` to `TEST_F` with the proper fixture, or
- Use separate suites for `TEST` and `TEST_F`.

### 1.3 Using Disabled Tests Without the Also-Run Flag

- **Issue:** Tests or test suites prefixed with `DISABLED_` are not run by default.

**Solution:** Use the flag `--gtest_also_run_disabled_tests` if you want to include disabled tests in your run.

### 1.4 Parameterized Tests Without Instantiations

- **Issue:** You define parameterized tests using `TEST_P` but forget to instantiate them using `INSTANTIATE_TEST_SUITE_P`.

**Effect:** Tests defined with `TEST_P` will not be run until instantiated.

**GoogleTest will report:**
> "Parameterized test suite XXX is defined via TEST_P, but never instantiated..."

**Solution:**
- Always pair your `TEST_P` definitions with corresponding `INSTANTIATE_TEST_SUITE_P` calls.
- If your suite is intended to be uninstantiated, suppress errors with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(YourTestSuite)`.

### 1.5 Test Filtering Using `--gtest_filter`

- **Issue:** Using the wrong or overly restrictive filter string prevents tests from running.

**Tip:**
- Verify your filter covers the desired tests.
- Wildcards (`*`, `?`) and exclusions can be combined; malformed patterns can lead to zero tests.

Example to run all tests:

```bash
--gtest_filter=*
```

Example to exclude DeathTests:

```bash
--gtest_filter=-*DeathTest.*
```

### 1.6 Using Sharding Environment Variables Incorrectly

- **Issue:** Environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set incorrectly.

**Effect:** Tests may be skipped if shard indices don't correspond properly.

**Resolution:**
- Ensure shard index and total shards values are valid and consistent.
- `GTEST_SHARD_INDEX` should be in `[0, GTEST_TOTAL_SHARDS - 1]`.

### 1.7 Misconfigured Test Registration in Custom or Dynamic Tests

- Forgetting to call `RUN_ALL_TESTS()` in `main()`.
- Registering tests after `RUN_ALL_TESTS()`.

**Effect:** Tests are never executed.

**Solution:**
- Call `::testing::InitGoogleTest(&argc, argv);` before invoking `RUN_ALL_TESTS();`
- Register tests before calling `RUN_ALL_TESTS();`

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 1.8 Issues in CMake or Bazel Setup

- **Symptom:** Tests are not linked or found.
- **Cause:** Missing source files in build targets or incorrect test discovery setup.

**Tips:**
- Verify your CMakeLists.txt or Bazel `cc_test` includes all test sources.
- Check your build logs for linking errors related to test files.
- Use verbose build outputs to trace test registration.

---

## 2. Diagnosing and Fixing Common Problems

### 2.1 Verify Tests Are Registered

Run your test binary with `--gtest_list_tests`:

```bash
./my_test_binary --gtest_list_tests
```

This lists all recognized tests. If your tests do not appear here, they are not registered and will not run.

### 2.2 Confirm Macro Usage Matches Test Definitions

- Use `TEST` for simple tests.
- Use `TEST_F` for test with fixtures.

Mixing these in the same suite causes test execution issues.

### 2.3 Check Namespaces

- Confirm tests and fixtures are in the right namespace for friendship and discovery.

### 2.4 Check Filters and Disabled Tests

- Review your filter settings.
- Disabled tests prefixed with `DISABLED_` won't run unless overridden.

```bash
./my_test_binary --gtest_also_run_disabled_tests
```

### 2.5 Debug Sharding Settings

Print environment variables to verify:

```bash
echo $GTEST_TOTAL_SHARDS
echo $GTEST_SHARD_INDEX
```

Ensure shard indices are valid and consistent.

### 2.6 Confirm Proper Build and Linking

- Inspect build configuration to ensure test files are compiled and linked.
- For CMake:
  - Ensure `add_executable` or `add_test` includes your test source files.
- For Bazel:
  - Confirm `cc_test` targets include all necessary test sources.

### 2.7 Enforce Correct Main Function

- Avoid multiple `RUN_ALL_TESTS()` calls.
- Always return its result in `main()`.

### 2.8 Use Logging and Debugging Facilities

- Use `SCOPED_TRACE` to add context to assertions when calling subroutines.
- Insert `GTEST_SKIP()` to test conditional skip behaviors.

---

## 3. Additional Tips and Best Practices

- **Name Tests Correctly:** Avoid underscores in test suite and test names. Prefer camel case or Pascal case.
- **Use Fixtures Wisely:** Use `TEST_F` to share setup and teardown code.
- **Check for Duplicate Tests:** Two tests with same suite and test names (even if in different files) can cause confusion.
- **Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`** if your value-parameterized tests are not instantiated in a given binary.
- **Run with `--gtest_list_tests` early** to confirm test discovery before execution.
- **Check for Fatal vs Nonfatal Failures:** Nonfatal failures (`EXPECT_*`) don’t abort test flow but can prevent tests from passing.

---

## 4. Summary

Tests not running can almost always be traced to one or more of these areas: incorrect macro usage, namespace discrepancies, uninstantiated parameterized tests, inappropriate filters, disabled tests, sharding misconfiguration, or build/link setup errors. Use GoogleTest’s tools and flags to diagnose and confirm correct registration and execution flow.

By carefully aligning test definitions, suite organization, and execution flags, you ensure the tests run consistently and produce reliable results.

---

## 5. Troubleshooting Checklist

- [x] Use `--gtest_list_tests` to confirm test detection.
- [x] Avoid mixing `TEST` and `TEST_F` in the same test suite.
- [x] Ensure parameterized tests are instantiated.
- [x] Review `DISABLED_` prefixes and `--gtest_also_run_disabled_tests` flag.
- [x] Validate your use of test filters (`--gtest_filter`).
- [x] Check environment variables for test sharding.
- [x] Confirm proper build and linking of test binaries.
- [x] Verify `InitGoogleTest` and `RUN_ALL_TESTS` usage in `main()`.

---

## 6. References

- [GoogleTest Primer - Simple Tests](primer.md#simple-tests)
- [GoogleTest Primer - Using Fixtures](primer.md#same-data-multiple-tests)
- [GoogleTest Reference - TEST_P and INSTANTIATE_TEST_SUITE_P](reference/testing.md#TEST_P)
- [GoogleTest Reference - Parameterized and Typed Tests](api-reference/core-testing-apis/parameterized-and-typed-tests.mdx)
- [GoogleTest Advanced - Using Assertions in Sub-routines](advanced.md#using-assertions-in-sub-routines)
- [GoogleTest FAQ - First Test Questions](faq/getting-started-issues/faq-first-test-questions.mdx)
- [Troubleshooting Common Setup Issues](getting-started/troubleshooting-resources/troubleshooting-common-issues.mdx)
- [Integrating with Build Systems](guides/integration-advanced/build-system-integration)

---

## 7. Example: Correct Test Fixture and Test Suite Usage

```cpp
#include <gtest/gtest.h>

namespace myproject {

// Test fixture class.
class WidgetTest : public ::testing::Test {
 protected:
  void SetUp() override {
    widget.Init();
  }

  void TearDown() override {
    widget.Cleanup();
  }

  Widget widget;
};

// Using TEST_F to define tests with the fixture.
TEST_F(WidgetTest, IsInitialized) {
  EXPECT_TRUE(widget.IsInitialized());
}

TEST_F(WidgetTest, ProcessesData) {
  widget.SetData(42);
  EXPECT_EQ(widget.Process(), 42);
}

}  // namespace myproject
```

Ensure you link the source file and call GoogleTest's init and run functions in `main`:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 8. How to Generate Detailed Test Discovery Output

Use the verbose flags to gain insights:

```bash
./your_test_binary --gtest_list_tests
./your_test_binary --gtest_filter=*
```

Check for unexpected absence or filtering of tests.

---

## 9. Using `SCOPED_TRACE` for Failure Context

When your test calls subroutines with assertions, failure messages may be less clear. You can add scoped traces:

```cpp
void Helper(int x) {
  EXPECT_EQ(x, 42);
}

TEST(MyTestSuite, MyTest) {
  for (int i = 0; i < 3; ++i) {
    SCOPED_TRACE("Iteration " + std::to_string(i));
    Helper(i);
  }
}
```

This outputs the iteration causing failure.

---