---
title: "Common Errors & Solutions"
description: "A guide to resolving frequent assertion errors, linking/runtime issues, unexpected test outcomes, and environment configuration problems. Offers step-by-step advice for quickly recovering from common blockers."
---

# Common Errors & Solutions

A practical guide to resolving frequent assertion errors, linking/runtime issues, unexpected test outcomes, and environment configuration problems encountered while using GoogleTest. This guide provides clear, step-by-step advice to help you quickly identify and recover from common blockers, ensuring smooth testing workflows.

---

## 1. Frequently Encountered Assertion Failures

Assertion failures are your primary feedback when tests fail. Understanding common causes can speed up debugging.

### a. Mismatched EXPECT_EQ or ASSERT_EQ Failures

- **Symptom:** Failure messages like:

  ```
  Expected equality of these values:
    val1_expression
      Which is: actual_val1
    val2_expression
      Which is: actual_val2
  ```

- **Solutions:**
  - Check that the expected and actual values being compared are correct.
  - Remember that `EXPECT_EQ` compares pointer addresses for C strings; to compare the content of strings use `EXPECT_STREQ`.
  - Verify that floating-point comparisons use `EXPECT_FLOAT_EQ` or `EXPECT_DOUBLE_EQ` if precision is an issue.

### b. Fatal Failures in Helper Functions Do Not Abort Entire Test

- **Symptom:** A helper subroutine uses `ASSERT_*` and fails, but the test continues to run and may crash elsewhere.

- **Root Cause:** `ASSERT_*` aborts only the current function.

- **Solutions:**
  - Use `HasFatalFailure()` immediately after a helper call and return early if a fatal failure happened.
  - Use `ASSERT_NO_FATAL_FAILURE(statement)` or `EXPECT_NO_FATAL_FAILURE(statement)` macros to verify no fatal failures happened inside subroutines.
  - Consider enabling exceptions catching with a listener to convert assertion failures to exceptions.

### c. Predicate Assertions and Complex Conditions

- When using `EXPECT_TRUE(complex_condition)`, failure messages might lack detail.
- For better messages, use:
  - Predicate assertions `EXPECT_PRED*` for predicates returning `bool`.
  - Predicate-format assertions `EXPECT_PRED_FORMAT*` for full control over failure formatting.
  - Functions returning `AssertionResult` to provide rich failure messages.

### d. Disabled Tests Are Not Executed

- Tests or test suites prefixed with `DISABLED_` are skipped.
- To run them, use the command line flag `--gtest_also_run_disabled_tests` or set the corresponding environment variable.

### e. Parameterized Tests Not Instantiated

- `TEST_P` without corresponding `INSTANTIATE_TEST_SUITE_P` results in warning or errors.
- To silence this, use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(TestSuiteName);`

---

## 2. Common Linking and Runtime Issues

### a. No Tests Linked into Test Binary

- **Symptom:** When running tests, output indicates no tests are found.
- **Cause:** No test cases are linked due to build system or configuration issues.
- **Fix:** Make sure source files containing tests are included and linked correctly. If linking tests via a library, confirm the library is linked with `--whole-archive` (or equivalent) flags if necessary.
- Use `--gtest_fail_if_no_test_linked` flag to force a failure if no test is linked.

### b. No Tests Selected to Run

- **Symptom:** The test binary runs but no tests execute due to filters.
- **Cause:** Either test names or suites are wrongly filtered out.
- **Fix:** Check the `--gtest_filter` flag or the `GTEST_FILTER` environment variable to ensure your intended tests match the filter. Remove or adjust the negative patterns.
- Use the `--gtest_list_tests` flag to list all available tests and their suites.
- Use `--gtest_fail_if_no_test_selected` to catch when no tests are selected.

### c. Assertion Macros Referencing nullptr or NULL

- Use `nullptr` instead of `NULL` to avoid ambiguous comparisons.
- When comparing pointers to null, write `EXPECT_EQ(ptr, nullptr)`.

### d. Conflicting Definitions Mixing TEST and TEST_F

- All tests in the same suite must use the same fixture class.
- Mixing `TEST()` and `TEST_F()` with the same suite name causes errors.
- Fix by renaming or moving tests.

### e. Duplicate Test Names

- Defining two tests with the same suite and test name causes errors.
- Rename to ensure unique names.

---

## 3. Environment and Configuration Problems

### a. GoogleTest Flags Not Recognized or Not Worked

- Use `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` to parse flags.
- Flags not recognized by GoogleTest remain in `argv` as positional arguments.
- Flag parsing can be verified with `--help` or `--gtest_list_tests` to print recognized flags.

### b. Color Output Issues

- Controlled via `--gtest_color` flag and `GTEST_COLOR` environment variable.
- Values: `yes`, `no`, `auto`.
- `auto` enables colors only if output is a terminal and on supported TERM types.

### c. XML or JSON Output Problems

- Use `--gtest_output=xml[:file_path|directory]` or `--gtest_output=json[:file_path|directory]`.
- Output files default to `test_detail.xml` or `test_detail.json` if no path.
- Directories must end in a path separator.
- Ensure filesystem permissions allow output file creation.

### d. Sharding Setup Errors

- GoogleTest supports test sharding via environment variables:
  - `GTEST_TOTAL_SHARDS` (number of shards)
  - `GTEST_SHARD_INDEX` (index of this shard)
- Both must be set and consistent.
- Errors or mismatches abort execution with error message.

---

## 4. Step-by-Step Troubleshooting Workflow

Here’s a logical flow you can follow when tests fail or do not run:

<Steps>
<Step title="Check Tests Are Linked">
Confirm that the code containing tests is linked into your test binary, especially when using libraries.
</Step>
<Step title="Verify Tests Are Discovered">
Run the test binary with `--gtest_list_tests` to list all tests GoogleTest detects. If none appear, revisit linking.
</Step>
<Step title="Confirm Filters Allow Tests to Run">
Ensure your `--gtest_filter` does not exclude tests unintentionally. Remove the filter or set to `*` to run all.
</Step>
<Step title="Enable Disabled Tests If Needed">
If tests are disabled, use `--gtest_also_run_disabled_tests` to include them.
</Step>
<Step title="Review Assertion Failure Messages">
Focus on failure messages from assertions to debug test logic or fix expectations.
</Step>
<Step title="Re-run with Verbose Flags">
Use `--gtest_print_time=1` and/or `--gtest_brief=0` to get detailed info about test execution.
</Step>
<Step title="Check Environmental Variables">
Make sure no environment variables, like sharding settings, conflict or disable tests.
</Step>
</Steps>

---

## 5. Troubleshooting Specific Error Messages

### "This test program does NOT link in any test case."

- Means no tests are linked.
- Fix linking or add `--gtest_fail_if_no_test_linked` to get program failure.

### "No tests were selected to run."

- No tests match filter or they are disabled and `--gtest_also_run_disabled_tests` is not set.

### "All tests in the same test suite must use the same test fixture class."

- Mixing `TEST()` and `TEST_F()` with the same suite.
- Fix by unifying fixture use or test suites.

### "Parameterized test suite X is defined via TEST_P, but never instantiated."

- `TEST_P` declared but no `INSTANTIATE_TEST_SUITE_P`.
- Add instantiation or suppress warning with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(X);`

### "Invalid environment variables: we require 0 <= GTEST_SHARD_INDEX < GTEST_TOTAL_SHARDS"

- Fix environment variable settings for test sharding.

---

## 6. Best Practices and Prevention Tips

- Group related tests into suites, keeping fixture use consistent.
- Use `EXPECT_*` when you want a test to continue after failure; use `ASSERT_*` when continuing doesn’t make sense.
- Use `EXPECT_STREQ` / `ASSERT_STREQ` for C string comparisons.
- Use parameterized tests and typed tests judiciously, ensuring proper instantiation.
- Use `SCOPED_TRACE` to add helpful contextual information to failure messages.
- Run tests with shuffling enabled to detect hidden test dependencies.
- Use `--gtest_fail_fast` to stop on first failure during debugging.

---

## 7. Where to Get Additional Help

- Use the official [GoogleTest FAQ & Common Issues](../../getting-started/troubleshooting-help/faq-common-issues.md) for curated quick fixes.
- Consult the [GoogleTest Primer](../../docs/primer.md) to solidify foundational understanding.
- Browse the [Assertions Reference](../../docs/reference/assertions.md) for detailed info on assertion macros.
- If integration or build issues arise, review the [Build Integration Guide](../../guides/integration-and-best-practices/build-integration.md).
- Community and official support channels can be found at [Community & Help Channels](../../faq/community-support-resources/community-help-channels.md).

---