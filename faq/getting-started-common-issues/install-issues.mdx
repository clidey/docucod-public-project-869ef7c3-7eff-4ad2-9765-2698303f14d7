---
title: "Installation and Build Problems"
description: "Addresses the most frequent issues encountered during installation and compiling, such as compiler requirements, C++ standard support, linking errors, and platform-specific build questions. Helps users resolve blockers so they can start testing quickly."
---

# Installation and Build Problems FAQ

This FAQ addresses the most frequent issues users encounter during the installation and compilation of GoogleTest and GoogleMock. It covers common blockers like unsupported compiler versions, C++ standard requirements, linking errors, and platform-specific build questions to help you quickly resolve problems and start testing.

---

## 1. What are the minimum compiler and C++ standard requirements for building GoogleTest and GoogleMock?

GoogleTest and GoogleMock require a C++ compiler that fully supports at least the C++17 standard. Supported compilers include recent versions of GCC, Clang, MSVC, and Intel compilers that conform to this requirement.

<Check>
Always verify your compiler’s version and ensure that C++17 support is enabled, as the build system enforces this standard.
</Check>

## 2. Why do I get errors related to missing or incorrect C++ standard flags during build?

This issue typically occurs when your build system or environment does not specify `-std=c++17` (or equivalent) explicitly, or when an outdated compiler defaults to a lower C++ standard.

<Steps>
<Step title="Verify Compiler Support and Version">
Check your compiler version with `gcc --version`, `clang --version`, or `cl.exe` version on MSVC.
</Step>
<Step title="Enable C++17 Standard">
Make sure your build configuration passes the correct flag (`-std=c++17` for GCC/Clang, `/std:c++17` for MSVC).
</Step>
<Step title="Use Supported Build Scripts">
Prefer the official CMake build scripts which automatically handle these flags.
</Step>
</Steps>

## 3. I encounter linking errors such as "undefined reference to `pthread_create'" or missing threading primitives. How do I fix this?

GoogleTest optionally uses pthreads on Unix-like systems for thread support. Linking errors occur if the pthread library is not linked properly.

<Tip>
When using CMake, ensure that the `Threads` package is found and linked by your project. GoogleTest’s build tries to detect and link pthreads automatically.
</Tip>

<Steps>
<Step title="Link Against pthread">
Add `-pthread` or link with `-lpthread` explicitly if your build script does not handle it.
</Step>
<Step title="Check Platform Support">
On MinGW or Windows, pthreads support is not present by default; GoogleTest falls back to Windows threading primitives.
</Step>
</Steps>

## 4. How should I link GoogleMock and GoogleTest in my project to avoid linker errors?

GoogleMock depends on GoogleTest. Use the provided pre-built libraries appropriately:

- `gmock` library: GoogleMock's core, requires linking to GoogleTest.
- `gmock_main` library: GoogleMock plus a default `main()` function.

<Check>
If you want to use GoogleMock and provide your own main function, link only with `gmock` and `gtest`. If you want the default main, link with `gmock_main`.
</Check>

<Tip>
When using CMake, your `target_link_libraries` should include:
```cmake
target_link_libraries(your_test_target gmock_main)
```
for a default main, or
```cmake
target_link_libraries(your_test_target gmock gtest)
```
if you provide your own main.
</Tip>

## 5. What are common CMake-related issues during build, and how do I resolve them?

- **Incorrect path to GoogleTest sources:** Ensure your `add_subdirectory()` or `FetchContent` points to the right GoogleTest folder.
- **Missing compiler flag configuration:** Use the provided CMake files as-is to benefit from automatic compiler flag management.
- **Shared vs. static library conflicts:** Avoid mixing shared and static builds in a single project unless properly configured.

<Warning>
Google Mock’s CMake support is community-maintained. Refer to the root directory README and issues if you encounter build problems.
</Warning>

## 6. Are there platform-specific build considerations I should know?

Yes. For example:

- **Windows:** Use MSVC with appropriate runtime libraries. The build system forces `/MT` or `/MD` as needed.
- **MinGW:** No pthreads support; GoogleTest adapts to Windows threading.
- **Embedded platforms (ESP8266, ESP32, NRF52):** Initialization is handled through `setup()` and `loop()`, not a standard `main()`.

<Note>
Platform detection is managed internally, but you might need to override flags manually in some unusual environments.
</Note>

## 7. I'm receiving warnings or errors related to unrecognized flags or conflicting options. What should I check?

GoogleMock and GoogleTest parse and handle their specific flags (e.g., `--gmock_verbose`) during initialization by `InitGoogleMock()`. Unrecognized flags are left untouched.

<Steps>
<Step title="Ensure `InitGoogleMock()` or `InitGoogleTest()` is called early">
Always initialize GoogleTest / GoogleMock properly in your `main()` before running tests.
</Step>
<Step title="Command-Line Flags">
Pass flags recognized by GoogleMock early, and avoid mixing incompatible flags.
</Step>
<Step title="Check for conflicting custom macros or libraries">
Conflicting macros defined manually may cause incompatibilities.
</Step>
</Steps>

## 8. How do I compile and run the GoogleMock and GoogleTest self-tests to verify my build?

The GoogleMock repository includes its own comprehensive tests.

<Steps>
<Step title="Enable building tests">
Configure the build with the flag `-Dgmock_build_tests=ON`.
</Step>
<Step title="Build tests">
Use your build tool (`make`, `ninja`, `msbuild`, etc.) to build the tests.
</Step>
<Step title="Run tests">
Invoke `ctest` or directly run the resulting executables to verify.
</Step>
</Steps>

<Info>
Passing these tests ensures the build and environment are correctly configured.
</Info>

## Troubleshooting Tips

<AccordionGroup title="Common Installation and Build Issues">
<Accordion title="Compiler too old or missing C++17 support">
Upgrade your compiler to a version supporting C++17. Check compiler documentation.
</Accordion>
<Accordion title="Linking errors involving pthread or threading">
Ensure your build links pthreads on Unix or relies on appropriate Windows threading.
</Accordion>
<Accordion title="Multiple main() functions defined when linking with both gtest_main and gmock_main">
Use only one main library: either `gtest_main` or `gmock_main`. If you supply your own main(), avoid linking these.
</Accordion>
<Accordion title="Build fails due to incompatible compiler flags or macro conflicts">
Verify no conflicting flags or macros are manually set in your project; prefer official build scripts.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- [System Requirements](https://google.github.io/googletest/getting-started/requirements-installation/system-requirements)
- [Installation with CMake](https://google.github.io/googletest/getting-started/requirements-installation/installation-cmake)
- [Installation with Bazel](https://google.github.io/googletest/getting-started/requirements-installation/installation-bazel)
- [Project Configuration](https://google.github.io/googletest/getting-started/configuration-bootstrap/project-setup)
- [Writing and Running Your First Test](https://google.github.io/googletest/getting-started/configuration-bootstrap/first-test-case)
- [Troubleshooting Common Issues](https://google.github.io/googletest/getting-started/validation-troubleshooting/common-issues)

For community support and issue reporting, visit the [GoogleTest GitHub repository](https://github.com/google/googletest).

---

## Example: Basic CMake Integration Snippet to Avoid Linking Issues

```cmake
# Add GoogleTest and GoogleMock to the build
add_subdirectory(googletest)
add_subdirectory(googlemock)

# Define your test executable
add_executable(my_tests test_main.cpp)

# Link to gmock_main to pull in GoogleMock, GoogleTest, and the default main()
target_link_libraries(my_tests gmock_main)

# Enable testing and register the test with CTest
enable_testing()
add_test(NAME my_tests COMMAND my_tests)
```

This setup ensures proper compilation and linkage without common build issues.

---

## Summary

This page equips you with solutions and preventive practices to resolve the most frequent installation and build roadblocks in GoogleTest and GoogleMock. Adhering to compiler standards, linking rules, and platform-specific guidelines will fast-track your setup and accelerate your testing workflow.

<Tip>
If you encounter issues outside the scope of this document, consult the [GoogleTest GitHub Issues](https://github.com/google/googletest/issues) and community forums for expert help.
</Tip>
