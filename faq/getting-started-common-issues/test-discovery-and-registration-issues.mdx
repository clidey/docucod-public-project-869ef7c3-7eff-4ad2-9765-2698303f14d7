---
title: "Why aren't my tests being discovered or run?"
description: "Explains the test discovery process, tips on ensuring tests are properly registered, and practical fixes when tests are skipped or missing. Covers naming conventions, linker errors, and the role of the test main entry point."
---

# FAQ: Why aren't my tests being discovered or run?

GoogleTest automatically discovers and runs tests defined in your code without requiring manual enumeration. However, there are common pitfalls and subtle requirements that, if overlooked, cause your tests to be skipped, not discovered, or seemingly disappear. This FAQ explains how test discovery works, common reasons why tests might not run, and practical steps to ensure your tests are properly registered and executed.

---

## 1. Understanding the Test Discovery Process

GoogleTest registers tests at program initialization by static objects generated by `TEST`, `TEST_F`, `TEST_P`, and related macros. When `RUN_ALL_TESTS()` is called, GoogleTest executes all registered tests that pass filtering and are not disabled or excluded.

### Key points:
- Test registration happens before `main()` begins.
- Tests are grouped into *test suites* identified by suite names.
- GoogleTest uses the test suite and test names as unique identifiers.
- Tests with `DISABLED_` prefix or those excluded by filters are skipped.

If your tests are not discovered, it usually means they were never registered or were filtered out before execution.

---

## 2. Common Reasons Tests Are Not Discovered or Run

### 2.1 Naming Conventions for Tests

GoogleTest requires both the test suite names and test names to be valid C++ identifiers without underscores (`_`). Underscores are reserved for GoogleTest's internal prefixing and can cause name collisions or silent test registration failures.


**Why avoid underscores?**
- The macro `TEST(TestSuiteName, TestName)` creates unique class names based on these identifiers.
- If either name contains underscores, it may lead to invalid or conflicting class names.


**Practical tip:**

```cpp
// Avoid underscores in TestSuiteName and TestName
TEST(TimeFlies, LikeAnArrow) { ... }

// Avoid these
TEST(Time_Flies, Like_An_Arrow) { ... }
```


### 2.2 Missing or Incorrect Test Fixture Setup

If you use `TEST_F` or `TEST_P` but do not define the corresponding test fixture class correctly, tests will not get registered or will cause compilation errors.

Common mistakes:
- The test fixture class is not defined or visible.
- No default constructor available: GoogleTest needs a default constructor to instantiate test fixtures.

**Example:**

```cpp
class MyFixture : public ::testing::Test {
 protected:
  MyFixture() = default;  // Ensure default constructor exists
};

TEST_F(MyFixture, Works) {
  EXPECT_TRUE(true);
}
```

### 2.3 Linker Not Including Test Code

If the object file or source file where your tests reside is not linked into the final test binary, the static registration will never execute, making GoogleTest unaware of your tests.

**Checklist:**
- Ensure all test files are compiled and linked.
- In static library scenarios, ensure libraries containing tests are marked "always link" or referenced explicitly.

### 2.4 Using Macros or Constructs That Prevent Linking

Dynamic test registration relies on static objects. Inline functions or templates that are never referenced may be discarded by the linker.

**Workaround:**
- Place your `TEST` or `TEST_F` macros in source files, not header-only templates.
- Avoid guards or macros that exclude test registration.

### 2.5 Filters Excluding Tests

GoogleTest supports test selection filtering using the `--gtest_filter` flag or the `GTEST_FILTER` environment variable.

If your tests don't match the filter patterns, they will be skipped silently.

**Example:**

```bash
./my_tests --gtest_filter=MySuite.*
```

If `MySuite` does not match your test suite names exactly (case-sensitive), tests won't run.

### 2.6 Disabled Tests

Tests or test suites with names prefixed with `DISABLED_` are compiled but skipped unless the `--gtest_also_run_disabled_tests` flag is used.

**Example:**
```cpp
TEST(DISABLED_FooTest, Bar) { ... }
```

Run with:

```bash
./my_tests --gtest_also_run_disabled_tests
```

### 2.7 Test Main Entry Point Issues

GoogleTest requires `RUN_ALL_TESTS()` to execute all registered tests. If your `main()`:

- Does not call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`, flags won't parse and tests might not register properly.
- Fails to return the result of `RUN_ALL_TESTS()`, which causes the test runner to misinterpret the test outcome.

**Proper `main()` example:**

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Incorrect usage may cause tests to appear skipped or not run.

### 2.8 Parameterized Tests Without Instantiation

Tests defined via `TEST_P` require `INSTANTIATE_TEST_SUITE_P` calls to instantiate tests with parameters. Failing to instantiate causes tests not to be registered or run.

```cpp
TEST_P(MyParamTest, DoesThing) { ... }

// Missing the following causes tests to not run:
INSTANTIATE_TEST_SUITE_P(MyInst, MyParamTest, Values(1, 2, 3));
```

If you intentionally want to suppress instantiation warnings, you can add:

```cpp
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(MyParamTest);
```

---

## 3. Practical Fixes and Tips

### 3.1 Check Test Names

- Avoid underscores in `TestSuiteName` and `TestName`.
- Make sure test names are unique per test suite.

### 3.2 Verify Fixture Class

- Confirm the fixture class exists and is visible.
- Ensure a default constructor is defined.
- Use `TEST_F` only after defining the fixture class.

### 3.3 Confirm Linking

- Ensure all test source files are compiled and linked.
- For static library setups, verify linker options include test objects.

### 3.4 Check for Filters and Disabled Tests

- Review `--gtest_filter` and environment variables.
- Use `--gtest_also_run_disabled_tests` if you want to run disabled tests.

### 3.5 Verify `main()` Function

- Call `InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`.
- Return the result of `RUN_ALL_TESTS()`.

Example:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 3.6 For Parameterized Tests

- Always instantiate your parameterized tests.
- If you get warnings about uninstantiated tests, use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress them deliberately.

### 3.7 Debug Test Enumeration

You can list discovered tests without running them using:

```bash
./my_tests --gtest_list_tests
```

This helps verify whether the test binary sees your tests.

---

## 4. Additional Notes and Pitfalls

### 4.1 Underscores and Test Registration

GoogleTest reserves underscores in test suite and test names for internal use. Violating this may not show immediate issues but risks breaking your tests with compiler or GoogleTest updates.

### 4.2 Multiple Tests with Same Names in Different Namespaces

You can define tests with the same test and suite names in different C++ namespaces but ensure the fixture class is consistent within a suite. GoogleTest will error if tests with the same suite name use different fixtures.

### 4.3 SetUp() Not Called

Spelling mistakes like `Setup()` instead of `SetUp()` in fixtures will cause setup code not to run, leading to confusing test behavior.

### 4.4 Tests with Fatal Failures in Constructors

GoogleTest creates fresh fixtures per test. Fatal failures in constructors or destructors can cause unexpected test skips or errors; prefer using `SetUp()` and `TearDown()` methods.

---

## 5. Troubleshooting Checklist

- [ ] Are your test suite and test names free of underscores?
- [ ] Is your test fixture class correctly defined with a default constructor?
- [ ] Are all test source files compiled and linked into your test binary?
- [ ] Does your `main()` initialize GoogleTest and return `RUN_ALL_TESTS()`?
- [ ] Are any tests or suites disabled accidentally (`DISABLED_` prefix)?
- [ ] Does the `--gtest_filter` flag or `GTEST_FILTER` environment variable exclude your tests?
- [ ] Did you instantiate all parameterized tests (`TEST_P` / `INSTANTIATE_TEST_SUITE_P`)?
- [ ] Use `--gtest_list_tests` to verify test discovery.

---

## 6. Summary

GoogleTest discovers and runs tests by static registration during program startup. Naming conventions, linking configurations, filter flags, and use of correct fixture definitions are critical to ensuring tests are found and run. When your tests aren't discovered or run, systematically checking names, fixture definitions, linking, filters, and instantiation of parameterized tests will resolve most issues.

For complex scenarios, verbose test listing and diagnostic output can help identify missing or misconfigured tests.

---

## 7. Additional Resources

- [GoogleTest Primer](../primer.md) — Core concepts on defining and running tests.
- [GoogleTest Advanced Topics](../advanced.md) — Covers parameterized tests, fixtures, and advanced usage.
- [Testing Reference](../reference/testing.md) — Comprehensive macro and API reference on tests.
- [Common Setup Issues FAQ](../getting-started/support/common-setup-issues.md) — For build and linking problems.
- [Writing Your First Test](../guides/essential-workflows/write-and-run-basic-tests.md) — Practical getting started guide.
- [Test Discovery and Running Strategies](../guides/essential-workflows/test-discovery.md) — Insights into filtering and running tests.

Use these to deepen your understanding and troubleshoot test registration and discovery challenges.

---

## 8. Example: Correct Test Definition and Running

```cpp
#include <gtest/gtest.h>

// Define a simple test suite and test name without underscores
TEST(MathFunctions, HandlesZeroInput) {
  EXPECT_EQ(0, 0);
}

class MyFixture : public ::testing::Test {
 protected:
  MyFixture() = default;
};

// Using TEST_F with fixture
TEST_F(MyFixture, CanDoSomething) {
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run with:

```bash
./my_test --gtest_list_tests
./my_test
```

The first command lists your tests, helping verify detection.

---

### Callout

<Warning>
Make sure you never ignore the return value of `RUN_ALL_TESTS()` in your `main()`. This return value indicates if any tests failed and is critical for test automation.
</Warning>

---