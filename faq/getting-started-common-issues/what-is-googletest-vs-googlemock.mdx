---
title: "What is the difference between GoogleTest and GoogleMock?"
description: "Clarifies the distinction and relationship between GoogleTest and GoogleMock, how they are packaged together, and when you should use each. Helps users understand which components they need for their test projects."
---

# What is the difference between GoogleTest and GoogleMock?

GoogleTest and GoogleMock serve complementary but distinct roles in C++ testing:

- **GoogleTest** is a robust C++ testing framework focused on writing and running unit tests. It provides:
  - Test organization with *test suites* and *test fixtures*.
  - Comprehensive assertion macros (e.g., `EXPECT_EQ`, `ASSERT_TRUE`) for verifying conditions.
  - Facilities for parameterized and typed tests.
  - Death test support and detailed test reporting.

- **GoogleMock**, often called *gMock*, is a framework built on top of GoogleTest that enables:
  - Creation of **mock objects** that simulate complex or external dependencies.
  - Setting **expectations** on method calls, their arguments, call count, and ordering.
  - Defining **behaviors** for mock methods including return values and side effects.
  - Use of rich **matchers** for argument validation in expectations.


## Packaging and Integration

GoogleMock is tightly integrated with GoogleTest, and both are often packaged together:

- GoogleMock depends on GoogleTest for test execution and reporting.
- When you install GoogleMock, you also get GoogleTest.
- Tests using mocks usually use GoogleTest macros alongside GoogleMock features.


## When to Use Each

Consider what you need to achieve in your tests:

### Use GoogleTest alone when:

- You want to write straightforward tests that verify expected outcomes of your classes or functions.
- Your test code does not require faking or simulating the behavior of external dependencies.
- You want to focus on *black-box* testing via observable outputs and state.


### Use GoogleMock when:

- You need to isolate your code under test by replacing collaborators with mocks.
- You want to specify and verify **interactions**:
  - Which methods are called,
  - With what parameters,
  - How often,
  - And in what order the calls occur.
- You want to simulate failures or complex behaviors from dependencies.
- You need to write tests that depend on observing method calls rather than just results.


## Relationship and Workflow

GoogleMock works as an extension to GoogleTest, providing additional capabilities:

1. Define mock classes (usually by inheriting from interfaces) using GoogleMock macros like `MOCK_METHOD`.
2. Use `EXPECT_CALL` to set up *expectations* on mock methods.
3. Run tests using GoogleTestâ€™s framework (TEST, TEST_F) which exercise code interacting with mocks.
4. GoogleMock verifies expectations automatically when mocks are destroyed or when explicitly requested.


## Example

Suppose you have an interface `Database` and a class `UserManager` that depends on it:

```cpp
// Interface
class Database {
 public:
  virtual ~Database() {}
  virtual bool Connect(const std::string& url) = 0;
  virtual int GetUserCount() const = 0;
};

// Class under test
class UserManager {
 public:
  UserManager(Database* db) : db_(db) {}
  bool Initialize(const std::string& url) {
    return db_->Connect(url);
  }
  int UserCount() const {
    return db_->GetUserCount();
  }
 private:
  Database* db_;
};
```

Using GoogleMock:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class MockDatabase : public Database {
 public:
  MOCK_METHOD(bool, Connect, (const std::string& url), (override));
  MOCK_METHOD(int, GetUserCount, (), (const, override));
};

TEST(UserManagerTest, InitializationSucceeds) {
  MockDatabase mock_db;
  EXPECT_CALL(mock_db, Connect("db_url")).WillOnce(::testing::Return(true));
  EXPECT_CALL(mock_db, GetUserCount()).WillRepeatedly(::testing::Return(42));

  UserManager manager(&mock_db);
  EXPECT_TRUE(manager.Initialize("db_url"));
  EXPECT_EQ(manager.UserCount(), 42);
}
```

This test uses GoogleTest to define the test structure, assertions, and running; it uses GoogleMock to create a mock `Database`, set expectations on method calls, and define return values.


## Summary

| Aspect            | GoogleTest                         | GoogleMock                      |
|-------------------|----------------------------------|--------------------------------|
| Purpose           | Writing and running unit tests    | Creating and using mock objects |
| Usage             | Define tests, assertions, fixtures | Define mock classes with mocked methods, set expectations and behaviors |
| Focus             | Outcome verification              | Interaction verification        |
| Dependency        | Standalone                       | Depends on GoogleTest           |


## Related Documentation

- [GoogleTest Primer](primer.md): Learn the basics of GoogleTest.
- [Assertions Reference](reference/assertions.md): All available assertion macros.
- [gMock for Dummies](gmock_for_dummies.md): Beginner-friendly guide to GoogleMock.
- [Mocking Reference](reference/mocking.md): Detailed API for mocks.
- [Setting Expectations and Sequencing](api-reference/gmock-api-core/expectations-and-sequencing.md): How to use `EXPECT_CALL` effectively.
- [Creating and Using Mock Classes](api-reference/gmock-api-core/creating-and-using-mocks.mdx): Comprehensive mock creation guide.
- [GoogleTest FAQ](faq.md#What-is-the-difference-between-GoogleTest-and-GoogleMock?): Further clarifications.


## Best Practices

- **Use GoogleTest** for straightforward validation tests where external dependencies do not impact the test's reliability or scope.
- **Add GoogleMock** when you need precise control over collaboration points in your testing.
- Keep mock expectations lean to avoid brittle tests.
- Use mock delegation patterns (to fakes or real objects) when appropriate.
- Understand the difference between `EXPECT_CALL` (which sets expectations) and `ON_CALL` (which sets default behavior).


---

This page helps you decide which framework components you need based on your testing goals and shows how GoogleTest and GoogleMock complement each other in creating robust, maintainable tests.