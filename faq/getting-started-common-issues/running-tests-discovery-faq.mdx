---
title: "Running Tests & Test Discovery"
description: "Provides answers to common questions about running tests, understanding test output, and ensuring that test cases are auto-discovered. Covers command-line approaches, environment variables, and integration with CI tools."
---

# Running Tests & Test Discovery FAQ

This page provides comprehensive answers to common questions about running GoogleTest tests, interpreting test outputs, and ensuring that your test cases are correctly auto-discovered. It covers usage of command-line flags, environment variables, integration with CI tools, and best practices to run your tests effectively.

---

## 1. How do I run all the tests in my GoogleTest binary?

To run all tests, simply build and execute your test program with no filtering flags. Before calling `RUN_ALL_TESTS()`, make sure your program calls `testing::InitGoogleTest(&argc, argv)` to parse flags properly. The call to `RUN_ALL_TESTS()` will execute all registered test suites and cases.

```bash
./my_test_binary
```

This runs every test discovered in your compiled binary.


## 2. How do I list all tests without running them?

You can use the `--gtest_list_tests` flag to list all tests available in the binary. This prints test suite and test names without executing any tests.

```bash
./my_test_binary --gtest_list_tests
```

Example output:

```
MyTestSuite1.
  TestA
  TestB
MyTestSuite2.
  TestC
```

This helps you know exactly which tests can be run or filtered on.


## 3. How can I run a subset of tests?

Use the `--gtest_filter` flag or set the `GTEST_FILTER` environment variable to specify which tests to run. The filter uses a colon (`:`) separated list of wildcard patterns, optionally including negative patterns (prefixed with `-`).

```bash
./my_test_binary --gtest_filter=MyTestSuite1.*
```

This runs all tests in `MyTestSuite1`.

```bash
./my_test_binary --gtest_filter=MyTestSuite1.TestA:MyTestSuite2.TestC
```

This runs only `TestA` in `MyTestSuite1` and `TestC` in `MyTestSuite2`.

To exclude tests:

```bash
./my_test_binary --gtest_filter=-*DISABLED_*
```

This runs all tests except those with names starting with `DISABLED_`.


## 4. How do I skip test execution after a certain condition at runtime?

GoogleTest supports runtime skipping of tests with the `GTEST_SKIP()` macro. It can be used inside tests or in fixture setup functions (`SetUp()`), effectively skipping the current test or all tests in the test fixture.

Example:

```cpp
TEST(MyTestSuite, FlexibleTest) {
  if (!IsFeatureSupported()) {
    GTEST_SKIP() << "Feature not supported, skipping test.";
  }
  // Normal test code here...
}
```

If placed in `SetUp()`, all tests in that fixture will be skipped.


## 5. What environment variables can I use to control test runs?

| Variable               | Purpose                                               |
|------------------------|-------------------------------------------------------|
| GTEST_FILTER           | Runs only tests matching this glob pattern           |
| GTEST_SHUFFLE          | Set to 1 to shuffle test execution order             |
| GTEST_RANDOM_SEED      | Set a seed for randomized test order                  |
| GTEST_REPEAT           | Number of times to repeat the tests (use -1 to repeat forever) |
| GTEST_FAIL_FAST        | Set to 1 to stop tests on first failure               |
| GTEST_ALSO_RUN_DISABLED_TESTS | Set to non-zero to include disabled tests in execution |

Flags take precedence over these environment variables.


## 6. How do I stop test execution upon the first failure?

Use the `--gtest_fail_fast` flag or set `GTEST_FAIL_FAST` to a non-zero value. When enabled, GoogleTest aborts further test execution as soon as a test fails, speeding up iterative debugging.


## 7. How does GoogleTest auto-discover tests?

Test cases defined with `TEST()`, `TEST_F()`, `TEST_P()`, and typed test macros are automatically registered with GoogleTest when linked into the test binary. There is no need for manual listing.

Your tests are discovered by name and registration occurs before `RUN_ALL_TESTS()`.

If you create tests programmatically, use `testing::RegisterTest()` before invoking `RUN_ALL_TESTS()`.


## 8. Can I run disabled tests?

Yes. Tests or suites prefixed with `DISABLED_` are ignored in normal runs but still compiled.

To run them:

```bash
./my_test_binary --gtest_also_run_disabled_tests
```

Combine with filtering to run specific disabled tests.


## 9. How do I repeat tests multiple times to identify flaky tests?

Use the `--gtest_repeat=N` flag or set `GTEST_REPEAT` to run tests multiple times in a row. A negative number repeats tests indefinitely.

```bash
./my_test_binary --gtest_repeat=100
```

To stop on first failure during repeats, combine with `--gtest_break_on_failure`.


## 10. How does test sharding work?

Sharding lets you run tests in parallel across multiple machines or processes.

Set the following env vars:

| Variable          | Purpose                                     |
|-------------------|---------------------------------------------|
| GTEST_TOTAL_SHARDS | Total number of shards (machines/runners)  |
| GTEST_SHARD_INDEX  | The shard index for this instance (0-based) |

GoogleTest runs a portion of tests on each shard, ensuring each test runs once across all shards.


## 11. How do I generate XML or JSON test reports?

Use `--gtest_output=xml:<path>` or `--gtest_output=json:<path>` to produce detailed reports for CI tools or dashboards.

If `<path>` omits the filename (ends with a slash or backslash), the output file will be named after the test binary.

Example:

```bash
./my_test_binary --gtest_output=xml:reports/report.xml
```


## 12. How can I customize the test output?

GoogleTest supports colored output which can be set via the `--gtest_color` flag (`yes`, `no`, or `auto`).

Verbose or minimal test outputs can be controlled with options like:

- `--gtest_brief=1`: Prints only failures.
- `--gtest_print_time=0`: Suppresses test duration printing.

For advanced customization, implement an event listener using the TestEventListener API.


## 13. What are common troubleshooting tips?

- Ensure `testing::InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
- Verify your test binaries link with GoogleTest and tests are compiled.
- Use `--gtest_list_tests` to confirm tests are registered.
- Check `--gtest_filter` for correct syntax.
- When debugging, use `--gtest_break_on_failure` to trigger debugger on failures.
- Confirm flags and environment variables are not conflicting.


## 14. How do I get the name of the currently running test?

Inside your test code, use:

```cpp
const testing::TestInfo* const test_info =
  testing::UnitTest::GetInstance()->current_test_info();
if (test_info != nullptr) {
  std::cout << "Running test: " << test_info->test_suite_name() << "." << test_info->name() << std::endl;
}
```

This is useful for dynamic test behaviors or logging.


## 15. How do I programmatically register tests?

Use `testing::RegisterTest()` when you need to add tests dynamically at runtime. Call this before `RUN_ALL_TESTS()`.

Example:

```cpp
void RegisterMyTests(const std::vector<int>& params) {
  for (int v : params) {
    testing::RegisterTest(
        "MyFixture", ("Test" + std::to_string(v)).c_str(), nullptr,
        std::to_string(v).c_str(), __FILE__, __LINE__,
        [=]() -> MyFixture* { return new MyTest(v); });
  }
}
```

See [Registering tests programmatically](../advanced.md#registering-tests-programmatically) for more details.


## Additional Resources

- [GoogleTest Primer](../primer.md) — Learn the basics of writing and running tests.
- [Advanced GoogleTest Topics](../advanced.md#running-test-programs-advanced-options) — Flags and advanced execution controls.
- [CI Integration & Troubleshooting FAQ](../faq/performance-integration-support/integration-ci-troubleshooting-faq) — Best practices for CI environments.
- [Test Registration and Execution API Reference](../api-reference/core-testing-apis/test-registration-and-execution) — API details for test lifecycle.

---

<Tip>
Use filtering and listing features together to efficiently identify and run the tests you need, especially in large projects.
</Tip>

<Warning>
Avoid ignoring the result of `RUN_ALL_TESTS()`. Always return its value from your `main()` function to convey test run success or failure correctly.
</Warning>

<Note>
If you're integrating GoogleTest with CI tools, use XML or JSON reports for richer integrations.
</Note>

---

## Summary

This page focuses exclusively on running tests and discovering test cases in GoogleTest. It guides users through filtering, listing, skipping, repeat runs, output options, and test registration—all oriented toward practical test program execution.

---