---
title: "Platform & Compiler-Specific FAQ"
description: "Responds to frequent platform and compiler questions, such as supported compilers, platform limitations, portability issues, and flags or macros for adapting to various environments."
---

# Platform & Compiler-Specific FAQ

This FAQ addresses common questions and concerns specifically related to platform compatibility, compiler support, portability, and environment flags in GoogleTest and GoogleMock. It provides actionable insights to help users understand how the framework adapts to diverse operating systems and compilers, how to handle platform-specific limitations, and how to use macros and flags to fine-tune behavior across environments.

---

## 1. Supported Platforms and OS Detection

### Which platforms does GoogleTest support?
GoogleTest supports a wide range of platforms including Windows (Desktop, Mobile, MinGW), Linux (including Android), macOS, FreeBSD, NetBSD, OpenBSD, Solaris, AIX, QNX, Haiku, and several embedded environments such as ESP8266 and ESP32. It detects the platform during compilation and adapts its internal macros to ensure portability.

### How does GoogleTest detect the operating system?
The framework uses compile-time macros to detect the target OS. For example:

- `GTEST_OS_WINDOWS` detects Windows (with sub-macros like `GTEST_OS_WINDOWS_DESKTOP` or `GTEST_OS_WINDOWS_MINGW`).
- `GTEST_OS_LINUX` detects Linux systems (and `GTEST_OS_LINUX_ANDROID` for Android).
- `GTEST_OS_MAC` distinguishes macOS, further detecting iOS through `GTEST_OS_IOS`.

These macros are defined in internal headers such as `gtest-port-arch.h` at compile time based on predefined compiler macros.

### Can I override platform detection if it is incorrect?
While GoogleTest tries to detect platforms automatically, users may override detection through build scripts or by defining specific macros prior to compilation. This should be done cautiously and typically only to accommodate highly specialized or unsupported environments.

---

## 2. Supported Compilers and Requirements

### What are the minimum compiler requirements for GoogleTest and GoogleMock?
GoogleTest requires at least a C++17-capable compiler. Google Mock builds on top of Google Test and demands the same or higher level of compiler support.

For example, Microsoft Visual Studio 2015 or later is supported, and GCC and Clang versions must support C++17 features.

### Are there compiler-specific flags or behaviors I should be aware of?
Yes, GoogleTest includes handling for various compiler-specific quirks and compiler flags internally:

- On MSVC, certain functions like `vsnprintf` are mapped to compatible alternatives.
- Compiler warnings related to unreachable code or deprecated features are selectively suppressed.
- Exception handling and structured exception handling (SEH) are handled depending on compiler capabilities.

Users usually do not need to manage these details but should ensure compliant compiler versions.

---

## 3. Platform Limitations and Portability Issues

### What limitations should I consider when running GoogleTest on embedded or less common platforms?
Some platforms lack features that GoogleTest uses by default, such as exceptions, file systems, or thread-local storage.

Examples:

- On embedded platforms like ESP8266 or Xtensa, features like environment variables and file system support may be missing.
- Structured exception handling (SEH) is mainly available on Windows compilers.

GoogleTest adapts via internal macros like `GTEST_HAS_EXCEPTIONS` and `GTEST_HAS_FILE_SYSTEM`. Users should verify that the platform and compiler fulfill these prerequisites or be prepared to customize and build the framework accordingly.

### How does GoogleTest handle wide string support and Unicode across platforms?
Support for `std::wstring` varies by platform. For Windows and some platforms, UTF-16 is assumed for wide strings, while others use UTF-32. GoogleTest has macros like `GTEST_HAS_STD_WSTRING` to detect availability and handles conversions internally to ensure consistent output.

---

## 4. Flags and Macros for Environment Adaptation

### Which macros indicate the current OS platform?
The primary macros include but are not limited to:

- `GTEST_OS_WINDOWS`
- `GTEST_OS_WINDOWS_DESKTOP`
- `GTEST_OS_WINDOWS_MINGW`
- `GTEST_OS_LINUX`
- `GTEST_OS_LINUX_ANDROID`
- `GTEST_OS_MAC`
- `GTEST_OS_IOS`
- `GTEST_OS_FREEBSD`
- `GTEST_OS_SOLARIS`
- `GTEST_OS_ZOS`
- `GTEST_OS_QNX`
- `GTEST_OS_ESP8266`
- `GTEST_OS_ESP32`

These macros can be used in test code or build scripts to conditionally compile platform-specific logic.

### How can I control GoogleTest's runtime behavior through flags?
GoogleTest provides several command-line flags and environment variables to adjust runtime behavior:

- `--gtest_filter` controls which tests to run.
- `--gtest_repeat` controls repetitions.
- `--gtest_shuffle` randomizes test order.
- `--gtest_break_on_failure` triggers debugger breakpoints on failures.
- `--gtest_catch_exceptions` enables or disables exception catching.
- `--gtest_output` generates XML or JSON test reports.

Refer to the detailed [GoogleTest Flag Documentation](https://github.com/google/googletest/blob/main/docs/advanced.md) for the full list.

### Are there Google Mock-specific flags?
Yes, GoogleMock defines its own flags such as `gmock_verbose` and `gmock_default_mock_behavior`. These are managed internally pursuant to GoogleMock's porting utilities and can be referenced or modified using macros like `GMOCK_FLAG_GET()` and `GMOCK_FLAG_SET()`.

---

## 5. Handling Platform-Specific Errors and Debugging

### How does GoogleTest handle platform-specific errors like SEH exceptions on Windows?
On Windows platforms supporting Structured Exception Handling (SEH), GoogleTest catches SEH exceptions except for critical exceptions like `EXCEPTION_BREAKPOINT` or `EXCEPTION_STACK_OVERFLOW`. When caught, GoogleTest reports a detailed message and stack trace, allowing developers to locate the fault.

### What if my tests fail to run due to platform or compiler discrepancies?
Ensure that:

- The compiler meets the minimum standards (at least C++17 support).
- All necessary platform macros are correctly defined by the compiler or overridden.
- Required runtime features such as exceptions, file system, and threading are enabled.
- Flags and environment variables do not inadvertently filter out tests.

Use diagnostic tools like `--gtest_list_tests` to check test discovery.

If issues persist, consult the Platform Abstractions and System Requirements documentation.

---

## 6. Best Practices and Recommendations

- Always initialize GoogleTest or GoogleMock via `InitGoogleTest()` or `InitGoogleMock()` to ensure flags and environment variables are parsed correctly.
- Use platform macros only when necessary to maintain cross-platform portability.
- Prefer portable assertions and avoid platform-dependent code where possible.
- When targeting embedded or specialized platforms, review the macros in `gtest-port-arch.h` and related headers for customization points.
- Monitor and set flag values explicitly in automated build environments to ensure consistent behavior.

---

## 7. Troubleshooting Common Platform and Compiler Issues

### I see linking errors related to thread libraries. What should I do?
Make sure your build system links against the correct threading libraries your platform requires. For example, on Linux with pthreads, link with `-lpthread`. Check integration guides for your build system.

### Some tests are not running, even though they are defined?
Check if test filters (`--gtest_filter`) or shards (`GTEST_SHARD_INDEX`, `GTEST_TOTAL_SHARDS`) are excluding those tests.

### I get errors about missing exception handling support.
Verify that exceptions are enabled in your compiler settings. GoogleTest requires exception support unless explicitly disabled with the macros, which may limit some features.

---

## 8. Additional Resources

- [GoogleTest System Requirements](https://github.com/google/googletest/blob/main/docs/requirements.md)
- [Platform Abstractions Documentation](api-reference/infrastructure-and-internals/platform-abstractions.md)
- [GoogleMock Internal Porting Utilities](https://github.com/google/googletest/blob/main/googlemock/include/gmock/internal/gmock-port.h)
- [GoogleTest Flags Reference](https://github.com/google/googletest/blob/main/docs/advanced.md#running-the-tests)

For detailed platform-specific behavior and compiler notes, refer to the internal headers:

- `gtest/internal/gtest-port-arch.h`
- `gtest/internal/gtest-port.h`
- `gmock/internal/gmock-port.h`

---

###### Example: Using OS-Specific Macros

```cpp
#ifdef GTEST_OS_WINDOWS
  // Windows-specific code here
#elif defined(GTEST_OS_LINUX)
  // Linux-specific code here
#else
  // Default fallback
#endif
```

###### Example: Checking for Exception Support

```cpp
#if GTEST_HAS_EXCEPTIONS
  try {
    // Your test or mock code
  } catch(...) {
    // Exception handling
  }
#else
  // Code when exceptions are not supported
#endif
```

---

By understanding and leveraging GoogleTestâ€™s platform and compiler-specific macros and flags, you will ensure your tests run reliably and consistently across environments.


