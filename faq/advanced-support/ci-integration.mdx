---
title: "How do I integrate GoogleTest with my continuous integration pipeline?"
description: "Explains approaches for running GoogleTest as part of CI/CD workflows, understanding exit codes, integrating with test runners, and customizing output for various platforms and services."
---

# How do I integrate GoogleTest with my continuous integration pipeline?

Integrating GoogleTest seamlessly into your continuous integration (CI) pipeline is essential for maintaining code quality and automating test verification. This guide walks you through the practical steps, best practices, and considerations to run GoogleTest tests effectively as part of your CI/CD workflows.

---

## 1. Running GoogleTest Tests in CI

GoogleTest test programs are standard executables containing your tests. To integrate them within CI pipelines, you typically:

- Build the test binaries
- Execute the tests
- Collect results
- Report outcomes

Most CI systems expect a test runner or script that:

- Calls the test executable
- Returns proper exit codes
- Provides readable or machine-parsable test results

### 1.1 Exit Codes

GoogleTest returns an exit code of `0` if all tests pass successfully, and a non-zero exit code if any test fails or there is a test failure. This behavior makes it easy for CI systems to determine pass or fail states.

Ensure your CI pipeline interprets the test executable's exit code as the test outcome.

### 1.2 Running Tests

Execute your test binary directly in CI jobs as:

```sh
./my_test_binary
```

or with `ctest` if using CMake:

```sh
ctest --output-on-failure
```

The `--output-on-failure` flag ensures that failed test details are printed, which aids debugging.

<Tip>
Use `--gtest_brief=1` or `--gtest_color=yes` flags to tailor console output formatting for easier parsing or readability in CI logs.
</Tip>

---

## 2. Integrating GoogleTest with CI Test Runners

Many CI systems—such as Jenkins, GitLab CI, Azure Pipelines, and GitHub Actions—support native or plugin-driven test result parsing for popular formats.

### 2.1 Generating XML or JSON Test Reports

GoogleTest can produce detailed test reports in XML or JSON formats compatible with standard CI test result parsers.

To generate an XML report:

```sh
./my_test_binary --gtest_output=xml:report.xml
```

For JSON reports:

```sh
./my_test_binary --gtest_output=json:report.json
```

Place the generated report file in a known location for the CI system to pick up.

### 2.2 Configuring CI to Collect Reports

Configure your CI pipeline to locate these files and mark the test step accordingly. For example:

- **Jenkins**: Use the JUnit plugin to ingest XML reports.
- **GitLab CI**: Use `artifacts:reports:junit` to specify XML file locations.
- **Azure Pipelines**: Use the `PublishTestResults` task.
- **GitHub Actions**: Use actions like `junit-report-merger` or native annotations.

This enables detailed test status insights, failure linkages, and historical trends.

---

## 3. Customizing Test Runs for CI

### 3.1 Filtering Tests

To run only subsets of tests, use the `--gtest_filter` flag to include or exclude specific test suites or cases:

```sh
./my_test_binary --gtest_filter=MySuite.*-MySuite.FlakyTest
```

This is useful for isolating failing tests or partitioning tests across CI shards.

### 3.2 Running Tests in Parallel

For large test suites, consider parallelizing test runs using:

- `gtest-parallel` (an external test runner that runs tests concurrently)
- CI-native parallel job strategies with test partitioning using `--gtest_filter`

Parallelization speeds up CI feedback but requires managing resource usage carefully.

### 3.3 Handling Disabled or Flaky Tests

Disabled tests (prefixed with `DISABLED_`) are skipped by default. To include them in CI runs:

```sh
./my_test_binary --gtest_also_run_disabled_tests
```

Focus on fixing flaky tests since CI stability depends on consistent test success.

---

## 4. Troubleshooting Common CI Integration Issues

### 4.1 Test Execution Fails Without Output

- Ensure the executable has the right permissions.
- Confirm dependencies are available on the CI agent.
- Check environment variables affecting GoogleTest flags.

### 4.2 Tests Not Discovered or Run

- Verify registration of tests is correct (no missing `TEST` or `TEST_F` macro calls).
- Check if parameterized tests are properly instantiated (`INSTANTIATE_TEST_SUITE_P`).
- Ensure filters don’t exclude all tests unintentionally.

### 4.3 XML or JSON Report Files Not Generated

- Make sure the `--gtest_output` flag is passed correctly.
- Confirm working directory where reports are generated is accessible.
- Validate report files are collected as CI artifacts.

### 4.4 Exit Code Indicates Failure but No Failing Tests

- Check for runtime errors, initialization failures, or environment problems.
- Verify no global setup/tear-down failures causing premature termination.

---

## 5. Best Practices for CI Integration

- **Always check the exit code** of your test run step to fail builds early.
- **Generate and upload XML/JSON reports** for comprehensive test insights.
- **Use filtering and sharding** to manage large test suites efficiently.
- **Automate retry or quarantine of flaky tests** separately from main CI runs.
- **Use verbose flags** like `--gtest_print_time` and `--gtest_color` for readable and useful logs.
- **Integrate GoogleMock** output if using mocks within CI.

---

## 6. Example CI Job Snippet (GitLab CI)

```yaml
stages:
  - test

unit_tests:
  stage: test
  script:
    - mkdir -p build
    - cd build
    - cmake ..
    - cmake --build .
    - ctest --output-on-failure
  artifacts:
    when: always
    reports:
      junit: build/test-results/*.xml
    paths:
      - build/test-results/
```

This example builds and runs tests, captures XML reports, and archives them.

---

## 7. Additional Resources

- [GoogleTest Primer](primer.md) - Basics of writing tests and test suites.
- [Framework Initialization and Main Entry Points](api-reference/advanced-configuration-integration/framework-initialization.md) - How to properly set up `main()` and environment.
- [Test Structure & Registration](api-reference/core-testing-api/test-structure-and-registration.md) - Ensuring tests are discoverable.
- [Test Performance and Maintainability](guides/integration-examples-and-best-practices/test-performance-and-maintainability.md) - Advanced strategies for large suites.
- [CI Integration Guide (GoogleTest FAQ)](/faq/advanced-support/ci-integration.md) - Broader continuous integration tips.

<Tip>
Check your CI platform documentation for specific test result support and optimizations.
</Tip>

---

By following this guide, you will integrate GoogleTest into your CI pipeline effectively, enabling automated, consistent, and insightful testing that accelerates your development lifecycle and maintains high code quality.