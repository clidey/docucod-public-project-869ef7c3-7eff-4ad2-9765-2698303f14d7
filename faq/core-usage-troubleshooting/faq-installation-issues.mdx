---
title: "Installation and Build Issues"
description: "Answers to common questions about installing and building GoogleTest/GoogleMock using different platforms and build systems (e.g., CMake, Bazel). Covers error messages, configuration pitfalls, and platform compatibility details to help users get up and running without frustration."
---

# Installation and Build Issues FAQ

This FAQ page addresses the most common questions and problems related to installing and building GoogleTest and GoogleMock, especially in the context of different platforms and build systems like CMake and Bazel. Whether you are setting up from scratch or troubleshooting build errors, this resource guides you through the essential steps, error interpretations, and best practices to get your tests up and running smoothly.

---

## 1. Frequently Asked Questions

### Why are test suite names and test names not allowed to contain underscores (`_`)?
GoogleTest forbids underscores in test suite and test names because underscores are reserved for special keywords internally, and improper use can lead to invalid or conflicting class names in generated code. Using underscores can cause hard-to-diagnose issues or break in future compiler or GoogleTest versions. Use only alphanumeric characters without leading or trailing underscores to avoid conflicts.

### How do I correctly write parameterized tests and instantiate them?
To write value-parameterized tests, define a fixture derived from `testing::TestWithParam<T>`, use the `TEST_P` macro for your tests, and instantiate them using `INSTANTIATE_TEST_SUITE_P`, passing a name, the fixture class, and a parameter generator like `testing::Values()` or `testing::Range()`. Always ensure you instantiate every `TEST_P` suite to avoid runtime errors or use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` to suppress missing instantiation warnings.

### What C++ standard and compiler versions are required?
GoogleTest requires at least C++17 support in your compiler. Confirm your compiler version supports this standard. On some platforms, configuring your build environment to use `-std=c++17` or equivalent is necessary.

### How do I build and link GoogleTest with my project using CMake?
You can build GoogleTest standalone or incorporate it into your project’s CMake build:

- Clone the repository: `git clone https://github.com/google/googletest.git`
- Create a build directory and run: `cmake ..` (or `cmake .. -DBUILD_GMOCK=OFF` if you want only GoogleTest)
- Run `make` or build with your platform's build system.
- Link your tests against `gtest_main` or `gmock_main` as needed.

Alternatively, use CMake’s `FetchContent` to fetch and build GoogleTest seamlessly inside your project.

### How to resolve linker errors about undefined references to static const members?
If your code defines static const data members (e.g. `static const int kValue = 42;`), you must provide an out-of-class definition (e.g. `const int ClassName::kValue;`) unless marked `constexpr`, which is implicitly inline. This is required for GoogleTest assertions that use them.

### Why do I get warnings in MSVC about const parameters in virtual functions?
MSVC has known warnings when virtual functions declare parameters as `const` because top-level const on parameters is ignored in C++. The recommendation is to remove the const qualifier on the parameter declarations to avoid these spurious warnings.

### I see "Uninteresting function call encountered - default action taken.." warnings when running tests. What does it mean?
This is an informational warning indicating that a mock function was called without an expectation set on it. If this is expected, you can ignore it; otherwise, add `EXPECT_CALL()` with the appropriate behavior or `Times(0)` to disallow calls.

### How do I correctly use the main() function in tests?
Most users should link against `gtest_main` or `gmock_main` libraries which provide a default main(). If you need a custom main(), call `testing::InitGoogleTest(&argc, argv);` or `testing::InitGoogleMock(&argc, argv);` before `RUN_ALL_TESTS()`, and return the result of `RUN_ALL_TESTS()` from main.

### How to handle multi-threaded tests or configure threading support?
GoogleTest is thread-safe on platforms supporting pthreads. If your platform support is incomplete or errors arise, set macros like `GTEST_HAS_PTHREAD=1` or `GTEST_HAS_PTHREAD=0` manually during compilation.

### How do I suppress or customize output coloring and verbosity?
You can set the `GTEST_COLOR` environment variable or `--gtest_color` flag with `yes`, `no`, or `auto`. Other flags control verbosity and output style, all parsed by `InitGoogleTest()`.

### How can I generate XML or JSON test reports?
Use the `--gtest_output=xml:path` or `--gtest_output=json:path` flags to specify report generation. If only `xml` or `json` is given, default-filename reports generate in the current directory.

### How do I debug why my tests do not run or recognized?
Check the following:
- Are your tests properly registered? Use TEST/TEST_F/TEST_P macros.
- Do test and test suite names avoid underscores?
- Have you called `InitGoogleTest()` before `RUN_ALL_TESTS()`?
- Verify that your build links the GoogleTest libraries correctly.

### What do I do if I have tests failing unexpectedly due to mixing TEST and TEST_F types?
GoogleTest requires all tests in the same test suite to use the same fixture class (`USE TEST_F` or `TEST`). Mixing these within a test suite causes runtime errors. Ensure consistent usage to fix this.

### Why might my death tests hang or fail intermittently?
Death tests run test code in separate processes, and multi-threading or static initialization can cause instability. Try reducing threads started before death tests or switch to threadsafe death test style by setting `GTEST_FLAG_SET(death_test_style, "threadsafe")`.

---

## 2. Common Issues & Solutions

### Linking Issues
- Confirm that your linker paths include GoogleTest built libraries.
- On Windows, beware of runtime library mismatches. Use `gtest_force_shared_crt` option in CMake if necessary.
- If building shared/static GoogleTest libraries, set appropriate compiler flags (`DGTEST_CREATE_SHARED_LIBRARY=1`, `DGTEST_LINKED_AS_SHARED_LIBRARY=1`).

### Compiler Errors
- Make sure you include `<gtest/gtest.h>` before using GoogleTest macros.
- Confirm that your compiler supports C++17.
- Provide out-of-class definitions for static const members as required.

### Build System Tips
- Using CMake `FetchContent` integration ensures consistent compiler flags.
- Use `add_subdirectory()` with GoogleTest sources for consistent builds as part of your project.

### Runtime Issues
- Enable verbose logging by passing `--gmock_verbose=info` or `--gtest_verbose=info` to diagnose mock unexpected behaviors.
- Verify that your test names avoid underscores to prevent internal naming collisions.

---

## 3. Troubleshooting Error Messages

### Error: "All tests in the same test suite must use the same test fixture class"
Occurs if you mix `TEST()` and `TEST_F()` in the same test suite or use different fixture classes with the same test suite name in different namespaces or translation units. Solve by renaming or separating test suites.

### Warning: "The mock function has no default action set..."
Add an appropriate default action using `ON_CALL()` or specify expected calls with `EXPECT_CALL()`.

### Fatal Failure in Constructor or Destructor
GoogleTest cannot handle fatal assertions in test fixture constructors/destructors due to C++ exceptions limitations. Use `SetUp()` and `TearDown()` instead for assertions that might fail.

### "Parameterized test suite is defined but not instantiated" failure
Ensure every parameterized test suite defined with `TEST_P` is instantiated with `INSTANTIATE_TEST_SUITE_P`, or suppress the failure with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.

---

## 4. Best Practices & Tips

- Always call `testing::InitGoogleTest(&argc, argv);` or `testing::InitGoogleMock(&argc, argv);` before `RUN_ALL_TESTS()`.
- Use `gtest_main` or `gmock_main` libraries to avoid writing your own main unless custom logic is needed.
- Avoid underscores in test suite and test names.
- Use `TEST_F` with properly defined fixture classes to share setup for multiple tests.
- For multi-thread safe tests, verify environment and build system supports pthreads.
- Use verbose flags for mock debugging: `--gmock_verbose=info`.
- Keep parameterized test suites always instantiated to avoid unexpected test skips or failures.
- Generate XML or JSON reports for CI integration.

---

## 5. Getting Support and Further Information

- Consult the [GoogleTest Primer](docs/primer.md) for basic concepts and getting started.
- Refer to [Advanced Topics](docs/advanced.md) for deeper insights on typed tests, fixtures, assertions, and death tests.
- Review [Troubleshooting Common Setup Issues](getting-started/configuration-validation/troubleshooting-common-issues) for environment-specific help.
- For build-specific guidance, see [GoogleTest README](googletest/README.md) for CMake instructions.
- Use the official GitHub [repository](https://github.com/google/googletest) for latest sources and issues.

---

## Related Documentation

- [GoogleTest Primer](docs/primer.md)
- [GoogleTest FAQ](docs/faq.md)
- [GoogleMock FAQ](docs/gmock_faq.md)
- [Advanced Features](docs/advanced.md)
- [CMake Integration Guide](guides/real_world_patterns/integration-patterns)

---

_For detailed macro definitions, parameterized test patterns, and event listener usage, refer to the Testing Reference and API documentation within GoogleTest._

---

Paging back and forth, this page focuses exclusively on installation and build issues without going into test writing or mocking usage concepts. For broader understanding, combine this with other starter guides and references listed above.
