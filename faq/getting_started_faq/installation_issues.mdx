---
title: "Installation and Setup Issues"
description: "Guidance on the most common installation and configuration problems, including supported compilers and platforms, minimum C++ standards, and resolving build errors."
---

# Installation and Setup Issues

This page guides you through resolving the most common installation and configuration problems encountered when setting up GoogleTest and GoogleMock. It covers supported compilers and platforms, minimum required C++ standards, and strategies for diagnosing and fixing build errors, helping you get your testing environment up and running smoothly.

---

## 1. Supported Platforms and Compilers

GoogleTest and GoogleMock are designed to be portable across major platforms and popular C++ compilers. Ensuring your environment meets the following requirements will prevent most compatibility issues during setup.

### Supported Operating Systems
- **Linux** (various distributions)
- **Windows** (including MSVC toolchains)
- **macOS**
- Some limited support for embedded platforms (ESP8266, ESP32, NRF52 with Arduino)

### Supported C++ Compilers
- **GCC 7 or later**
- **Clang 5 or later**
- **MSVC 2017 or later**

### Minimum C++ Standard
GoogleTest requires a **C++17**-compliant environment. Make sure your build system enforces this standard, for example by using:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

or passing the proper flags to the compiler.

> <Note>
> You can also set the minimum C++ standard via compiler flags if your project is not CMake-based.
> </Note>

### Multi-threading Support
- GoogleTest is thread-safe on platforms where the pthread library is available.
- On Windows, thread safety for assertions is limited; avoid concurrent assertion calls from multiple threads.
- If your environment isn't correctly detecting pthread support, control it manually with:

```bash
-DGTEST_HAS_PTHREAD=1
# or
-DGTEST_HAS_PTHREAD=0
```

---

## 2. Installation Overview

GoogleTest provides a straightforward installation process, primarily through CMake-based builds. It can be built standalone or integrated into existing projects as a subdirectory or external dependency.

### Standalone Build Steps (Typical Linux / macOS)

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
dcd googletest
mkdir build
cd build
cmake ..        # or cmake .. -DBUILD_GMOCK=OFF to disable GoogleMock
make
sudo make install  # Optional, requires admin rights
```

### Building on Windows
- Generate Visual Studio solutions via CMake.
- Build using Visual Studio IDE or command line.
- Handle dynamic vs static runtime linkage carefully using the `gtest_force_shared_crt` CMake option to match your project settings.

### Integrating into an Existing CMake Project

Leverage `add_subdirectory()` or the FetchContent module to automatically download and build GoogleTest as part of your project:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

> <Tip>
> Always ensure the C++ standard is consistent between your project and GoogleTest for reliable builds.
> </Tip>

---

## 3. Common Build Errors and Their Solutions

### A. Missing pthread Link Errors

- Symptoms: Linker errors referencing pthread functions.
- Cause: GoogleTest assumes pthread usage but your build environment does not link with `-lpthread`.
- Solution:
  - Explicitly add pthread linkage in your build system.
  - If using CMake, GoogleTest configures this automatically but verify you haven't overridden it.
  - Manually force pthread availability via `-DGTEST_HAS_PTHREAD=1` if detection failed.

### B. Runtime Library Mismatch on Windows

- Symptoms: Link errors about runtime library mismatch like
  `mismatch detected for 'RuntimeLibrary'`
- Cause: Conflict between dynamically and statically linked C runtime libraries.
- Solution:
  - Enable `gtest_force_shared_crt` CMake option to unify runtime linkage.
  - Align your project and GoogleTest runtime flags (MD vs MT).

### C. C++ Standard Not Enforced

- Symptoms: Errors complaining about missing C++17 features.
- Cause: Your compiler flags do not specify or use an older C++ standard.
- Solution:
  - Set `CMAKE_CXX_STANDARD` to at least 17 and `CMAKE_CXX_STANDARD_REQUIRED` ON.
  - Directly add flags like `-std=c++17` for GCC/Clang or `/std:c++17` for MSVC.

### D. Macro Name Collisions

- Symptoms: Macro redefinition errors (e.g., `TEST` macro clashes with other libraries).
- Cause: GoogleTest macros are not namespaced and collide with other code.
- Solution:
  - Use compile-time defines to rename macros, for example,

```bash
-DGTEST_DONT_DEFINE_TEST=1
```
  - Then use `GTEST_TEST` instead of `TEST` macro.

### E. Linking GoogleMock Libraries

- Make sure to link with the appropriate GoogleMock libraries depending on your needs:
  - `-lgmock_main` to use GoogleMock with the bundled `main()` function.
  - `-lgmock` if you provide your own `main()`.
  
- Example CMake linking:

```cmake
target_link_libraries(your_test_target gmock_main)
```

- Verify that the library search paths and include directories are correctly set.

---

## 4. Verifying Your Installation

After building and linking GoogleTest/GoogleMock, build and run a minimal test program to verify a clean setup.

### Minimal Test Example

```c++
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Compilation and Running

- Compile with:

```bash
clang++ -std=c++17 your_test.cpp -lgtest_main -lpthread -o your_test
./your_test
```

- Successful output should list all tests and report "[  PASSED  ]".

---

## 5. Troubleshooting Tips

- **Use Verbose Build Logs:** Inspect compiler and linker commands for missing include paths or libraries.
- **Check CMake Cache:** Make sure all GoogleTest-related variables (`GTEST_*`) are set correctly.
- **Clean and Rebuild:** Remove previous build artifacts to avoid stale configurations.
- **Library Order:** On some linkers, order of linked libraries matters—put GoogleTest libraries after your object files.
- **Consult GoogleTest Logs:** Running tests with `--gtest_repeat=1 --gtest_throw_on_failure` helps catch errors early.

---

## 6. Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [Installation Instructions](https://github.com/google/googletest/blob/main/README.md#building-and-installing)
- [GoogleTest Primer](primer.md) — for writing and running your first tests
- [Setting Up and Running Your First Test](guides/getting-started/setup-first-test)
- [Configuring Your Project](getting-started/setup-basics/configuring-project)
- [Troubleshooting & FAQ](getting-started/first-steps/troubleshooting)

---

## Summary
This page clarifies your pathway through installing and troubleshooting GoogleTest and GoogleMock. It highlights supported platforms and compilers, outlines installation workflows, addresses common build and linker errors, and provides verification steps to confirm your environment is correctly set up.

By following these guidelines, you can quickly resolve setup issues and ensure a stable foundation for writing and running C++ tests.


---

# Appendix: Related Pages in Documentation
- [Prerequisites & System Requirements](getting-started/setup-basics/prerequisites)
- [Installation Instructions](getting-started/setup-basics/installation)
- [Configuring Your Project](getting-started/setup-basics/configuring-project)
- [Troubleshooting & FAQ](getting-started/first-steps/troubleshooting)
- [Quick Validation Checklist](getting-started/first-steps/quick-validation)


---

# FAQ Highlights from Adjacent Pages

### How do I choose between linking with `gmock` vs `gmock_main`?
- Link with `gmock_main` if you want the default `main()` function provided by GoogleMock.
- Link with `gmock` if you supply your own `main()` function.

### What if my compiler does not support C++17?
- Raise your compiler version or adjust your project to use a compatible compiler.
- GoogleTest requires C++17 to build and run properly.

### What do I do if I encounter thread-unsafety warnings?
- Confirm if your platform supports pthread.
- On Windows, avoid concurrent assertions from multiple threads.

---
