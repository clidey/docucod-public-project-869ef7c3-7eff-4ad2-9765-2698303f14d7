---
title: "Basic Usage and Concepts"
description: "Clarifies key terminology and helps users understand the relationship between GoogleTest and GoogleMock, distinguishing their features and highlighting typical usages for test writing."
---

# Basic Usage and Concepts

Understanding the foundational concepts of GoogleTest and GoogleMock is essential for writing effective and maintainable C++ tests. This page clarifies key terminology, explains the roles of GoogleTest and GoogleMock, and distinguishes their features, helping you confidently write and manage tests.

---

## What is GoogleTest and GoogleMock?

GoogleTest is a comprehensive C++ testing framework based on the xUnit architecture. It provides test discovery, assertion mechanisms, and test case management to facilitate robust and scalable testing.

GoogleMock is an integral part of GoogleTest enabling mocking capabilities. It allows you to create mock classes, set expectations on them, and verify interactions between parts of your code. While GoogleTest handles assertion and test flow, GoogleMock focuses on mocking dependencies and verifying interactions.

Together, they form a powerful suite for both state-based and interaction-based testing in C++.

---

## Core Terminology

- **Mock Object**: An object that inherits an interface but allows runtime configuration of expected behavior and interaction verification. Mock objects replace real dependencies in tests, enabling isolation.

- **Fake Object**: An object providing a simplified implementation, usually functional but with shortcuts, primarily used for state-based testing.

- **Expectations**: Declarations about which methods should be called on mock objects, how many times, with what arguments, and what they should return.

- **Matchers**: Expressions that help specify argument constraints for mock method calls, such as exact values, ranges, or more complex conditions.

- **Actions**: Define what a mock method does when invoked, such as returning a value, throwing, or invoking a custom callable.

- **Cardinalities**: Specify how many times (e.g., once, any number, at least 'n') a mock method is expected to be invoked.

- **Sequences and Ordering**: Mechanisms like `InSequence` and `After` to enforce call order on expectations.


---

## Writing and Using Mocks

### Defining a Mock Class

To create a mock class, inherit from your interface and use the `MOCK_METHOD` macro to define mock methods, matching the signatures of the virtual methods. Use qualifiers like `const` and `override` as necessary.

```cpp
#include <gmock/gmock.h>

class MockFoo : public Foo {
 public:
   MOCK_METHOD(int, GetSize, (), (const, override));
   MOCK_METHOD(std::string, Describe, (int type), (override));
   // ... more mock methods ...
};
```

### Using Expectations

Set expectations with `EXPECT_CALL` before calling the mock methods to specify expected interactions.

```cpp
using ::testing::Return;
using ::testing::_;

MockFoo mock;
EXPECT_CALL(mock, GetSize())
    .Times(3)
    .WillOnce(Return(100))
    .WillRepeatedly(Return(20));
```

This means `GetSize()` is expected three times, returns 100 the first call, then 20 subsequently.

### Default Behavior vs Expectations

- `ON_CALL` sets default actions but does not enforce call counts.
- `EXPECT_CALL` sets expectations and behaviors, with verification.

Use `ON_CALL` to specify common behavior shared by tests and `EXPECT_CALL` to verify specific behaviors.

---

## Mock Strictness Levels

GoogleMock supports different strictness wrappers for mock objects:

- **NaggyMock (default)**: Warns on uninteresting calls (calls with no expectation).
- **NiceMock**: Suppresses warnings on uninteresting calls, keeping tests quieter.
- **StrictMock**: Fails the test if any uninteresting calls occur, ensuring tight control.

Example:

```cpp
using ::testing::NiceMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock;    // Suppresses uninteresting warnings
StrictMock<MockFoo> strict_mock;  // Treats uninteresting calls as errors
```

---

## Best Practices for Basic Usage

- Define mocks only for virtual methods.
- Set expectations before invoking mocked methods.
- Use matchers to specify argument constraints liberally.
- Use default actions (`ON_CALL`) to reduce verbosity in tests.
- Consider mock strictness for balancing feedback and test maintenance.

---

## Common User Scenarios

**1. Verifying a method call**:

```cpp
EXPECT_CALL(mock, Process(42))
    .Times(1)
    .WillOnce(Return(true));
```

Ensures that the `Process` method is called once with argument 42 and returns true.

**2. Ignoring other method calls:**

If you don’t care about other calls to the mock object, don’t specify expectations for them. They’ll be uninteresting calls (warnings unless wrapped by `NiceMock`).

**3. Returning different values sequentially**:

```cpp
EXPECT_CALL(mock, GetValue())
    .WillOnce(Return(1))
    .WillOnce(Return(2))
    .WillRepeatedly(Return(3));
```

---

## Troubleshooting Tips

- Always check that mocked methods are `virtual`; otherwise, mocks won’t intercept calls.
- Use `--gmock_verbose=info` to trace mock function calls and expectation matches.
- Use `NiceMock` if uninteresting call warnings clutter your test output.
- For brittle tests from order dependence, consider `InSequence` or partial ordering.

---

## Further Reading and Related Pages

- [GoogleTest Primer](https://google.github.io/googletest/primer.html): Basics of writing tests.
- [Mocking for Dummies](gmock_for_dummies.md): Intro to creating and using mock classes.
- [gMock Cookbook](gmock_cook_book.md): Recipes and best practices for advanced mocking.
- [gMock Cheat Sheet](gmock_cheat_sheet.md): Quick reference for mocking APIs.
- [Configuring Expectations and Actions](guides/mocking-advanced-testing/configuring-expectations-actions.md): For detailed guidance on expectations setup.
- [Mock Strictness Management](guides/mocking-advanced-testing/strictness-niceness.md): Understanding Naggy, Nice, and Strict mocks.

---

Explore these to deepen your mastery of basic usage and mocking concepts.

---