---
title: "How do I install and set up GoogleTest?"
description: "Walks users through the basic steps required to obtain, build, and integrate GoogleTest into their projects, covering supported build systems and troubleshooting common setup pitfalls. This page helps new users quickly achieve a working test environment."
---

# How do I install and set up GoogleTest?

This guide walks you through the fundamental steps required to obtain, build, and integrate GoogleTest into your C++ projects. Whether you are new to GoogleTest or looking to quickly establish a functional testing environment, this document covers supported build systems, installation methods, and troubleshooting common issues encountered during setup.

---

## 1. Obtaining GoogleTest

GoogleTest’s source code is publicly available on GitHub. You can obtain it in several ways:

- **Clone the repository:**
  ```bash
  git clone https://github.com/google/googletest.git
  ```
- **Download a release archive:** Visit the GitHub releases page and download a stable version as a zip or tarball.

The repository includes both GoogleTest and GoogleMock, the mocking framework.

---

## 2. Building GoogleTest with CMake

GoogleTest uses CMake as its primary build system, supporting multiple platforms including Linux, macOS, and Windows. CMake generates native build files suited to your environment (Makefiles, Visual Studio projects, etc.).

### 2.1 Standalone Build

To build GoogleTest as a standalone project:

```bash
cd googletest
mkdir build && cd build
cmake ..                  # To build both GoogleTest and GoogleMock
# Or to build only GoogleTest:
cmake .. -DBUILD_GMOCK=OFF
```

Then build using your platform’s native build tool:

- On Linux/macOS:
  ```bash
  make
  sudo make install         # Optional installation step
  ```
- On Windows:
  Build the generated `.sln` file with Visual Studio.

### 2.2 Integrating GoogleTest Directly Into Your CMake Project

Instead of a standalone build, you can include GoogleTest as part of your project using CMake's `add_subdirectory()` or Git submodules.

Alternatively, the recommended practice is to fetch GoogleTest during your build configuration using CMake's `FetchContent` module:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/\<commit_sha\>.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # On Windows, to match runtimes
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test1.cc test2.cc)
target_link_libraries(my_tests GTest::gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

Make sure to replace `<commit_sha>` with the specific commit you want to depend on.

---

## 3. Building with Bazel

GoogleTest can also be built and integrated using Bazel, Google's preferred build system.

### 3.1 Setting up Bazel Workspace

Create a `MODULE.bazel` file in your workspace root with:

```python
bazel_dep(name = "googletest", version = "1.17.0")
```

### 3.2 Defining a Test

An example `BUILD` file:

```python
cc_test(
    name = "hello_test",
    srcs = ["hello_test.cc"],
    deps = ["@googletest//:gtest", "@googletest//:gtest_main"],
)
```

Build and run tests with:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

---

## 4. Minimum Required Environment

- **C++ Standard:** GoogleTest requires C++17 support. Ensure your compiler and build systems are configured accordingly.
- **Supported Platforms:** Linux, macOS, Windows, and other major platforms supported by your build toolchain.
- **Build Tools:** CMake (recommended 3.14+) for build configuration, Make/Ninja or Visual Studio/MSBuild for building.
- **Thread Support:** If targeting multi-threaded tests, confirm pthread or platform-specific threading support.

Refer to the [Supported Platforms](https://github.com/google/googletest/blob/main/overview/integration-and-ecosystem/supported-platforms.md) guide for detailed information on compatibility.

---

## 5. Integrating GoogleTest into Your Project

### 5.1 Include Paths and Linking

To use GoogleTest, set your compiler's include paths to the GoogleTest headers (`googletest/include`) and link against the GoogleTest libraries (`gtest` or `gtest_main`). Linking `gtest_main` provides a default `main()`.

### 5.2 Using gtest_main

If you don't need a custom `main()`, link your test binary against `gtest_main` instead of `gtest` to avoid writing your own test runner.

### 5.3 Custom main()

If customization of test initialization or command-line processing is required, provide your own `main()` function. Use the following boilerplate:

```c++
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Always call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()`. Never call `RUN_ALL_TESTS()` more than once.

---

## 6. Verifying Your Setup: Quick Validation

After building your test executable, run it. You should see a test summary like:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms a successful build and linkage of GoogleTest.

---

## 7. Common Pitfalls and Troubleshooting

### 7.1 Linking Errors

- Ensure you link against the correct GoogleTest libraries (`gtest`, `gtest_main`).
- On Windows, ensure matching runtime libraries (see `gtest_force_shared_crt` CMake option).
- Include pthread linking on Unix/Linux as needed.

### 7.2 Incorrect C++ Standard

- Confirm your build system uses C++17 or later.
- Set `CMAKE_CXX_STANDARD 17` and `CMAKE_CXX_STANDARD_REQUIRED ON` in CMake.

### 7.3 Multiple Definitions of main()

- Linking both `gtest_main` and defining your own `main()` causes duplication. Use one or the other.

### 7.4 Tests Not Running

- Verify that tests are properly defined using `TEST()` or `TEST_F()`.
- Confirm invoking `RUN_ALL_TESTS()`.
- Use `--gtest_list_tests` to see all discovered tests.

---

## 8. Next Steps

- Learn to write tests with the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md).
- Explore build integrations in detail via the [Quickstart: Building with CMake](https://github.com/google/googletest/blob/main/docs/quickstart-cmake.md) and [Quickstart: Building with Bazel](https://github.com/google/googletest/blob/main/docs/quickstart-bazel.md).
- Dive into writing your first test cases with [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/getting-started/first-test-experience/create-run-first-test.md).

---

## 9. References

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Fundamentals of writing tests.
- [GoogleTest README](https://github.com/google/googletest/blob/main/googletest/README.md) — Build instructions and options.
- [Supported Platforms](https://github.com/google/googletest/blob/main/overview/integration-and-ecosystem/supported-platforms.md) — Environment compatibility.
- [Installation and Setup Guide](https://github.com/google/googletest/blob/main/getting-started/installation-setup/installation-methods.md) — Installation options.


<Tip>
Always ensure your compiler and build tooling meet GoogleTest’s minimum requirements, especially C++17 support and the appropriate CMake version.
</Tip>

<Note>
For Windows users, resolving runtime mismatches may require setting the CMake option `gtest_force_shared_crt` to ON.
</Note>

<Warning>
Calling `RUN_ALL_TESTS()` more than once or ignoring its return value will cause unexpected behavior or compiler errors.
</Warning>