---
title: "Installation and Setup FAQ"
description: "Answers common questions about how to install and configure GoogleTest and GoogleMock, covering supported platforms, dependencies, build systems (like CMake/Bazel), and typical errors during setup. Maps out the fastest path to a working test environment."
---

# Installation and Setup FAQ

This FAQ addresses common questions around installing and configuring **GoogleTest** and **GoogleMock**. It guides you through supported platforms, build system integration, dependencies, typical setup errors, and the fastest paths to a working C++ test environment.

---

## 1. Supported Platforms and Prerequisites

### Which platforms does GoogleTest support?
GoogleTest supports Linux, Windows, and macOS. It also runs on some embedded and special-purpose platforms like ESP8266/ESP32, QURT, and Windows Mobile, though some platform-specific caveats exist.

### What are the minimum system requirements?
- A C++17 compatible compiler.
- CMake version 3.14 or higher (for the FetchContent module).
- Threading support (pthreads on Unix-like systems). GoogleTest is thread-safe where pthread is available.
- Sufficient development tools: compiler, linker, and make or Visual Studio/MSBuild on Windows.

### How can I confirm my environment is ready?
- Verify compiler supports C++17 or higher.
- Confirm CMake is installed (`cmake --version`).
- On Unix, ensure pthreads are present (`-lpthread` linking).

<Tip>
Always check your compiler flags and environment variables to include the necessary C++17 standard and threading support to avoid build or runtime errors.
</Tip>

---

## 2. Installing Using CMake

### How do I build GoogleTest and GoogleMock as a standalone project?
Follow these steps:

<Steps>
<Step title="Clone Repository">
Run:
```bash
git clone https://github.com/google/googletest.git -b v1.17.0
db googletest
```
</Step>
<Step title="Create Build Directory">
```bash
mkdir build
cd build
```
</Step>
<Step title="Configure Build">
```bash
cmake ..
```
This generates native build files for your platform. By default, GoogleMock is included.

To build only GoogleTest (without GoogleMock):
```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build and Install">
On Unix-like systems:
```bash
make
sudo make install  # installs to /usr/local/ by default
```
On Windows with Visual Studio, open the generated `.sln` file and build.
</Step>
</Steps>

### How do I incorporate GoogleTest into an existing CMake project?
You can either:

- Use `find_package(GTest CONFIG REQUIRED)` if GoogleTest is installed.
- Or add GoogleTest as part of your project via `add_subdirectory()`, ensuring consistent compile and link settings.
- Optionally, use CMake's `FetchContent` to automatically download and make GoogleTest available during configuration.

Example snippet to add in `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # Windows runtime
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

<Tip>
Using `FetchContent` ensures your build configuration is repeatable and stays up to date automatically.
</Tip>

---

## 3. Installing Using Bazel

### Can I build and use GoogleTest with Bazel?
Yes. GoogleTest supports Bazel with workspace and dependency declarations.

- Declare GoogleTest in your `MODULE.bazel` file or equivalent.
- Include it as a dependency in your Bazel build targets.
- Write your tests, build, and run them with Bazel commands.

Refer to [Installation via Bazel](getting-started/setup-and-installation/installation-via-bazel.md) for detailed instructions.

---

## 4. Using gmock_main and gmock Libraries

### What is the difference between `gmock` and `gmock_main`?
- **`gmock`** is the GoogleMock library **without** a `main()` function.
- **`gmock_main`** is the same library **with** a `main()` function included.

Linking with `gmock_main` automatically adds a suitable test executable entry point, so you don't need to write your own main function.

### How do I link my test binaries?
- When using CMake, link tests against `gmock_main` or `gtest_main` for automatic test runners.
- If you want custom main functions or test runners, link against `gmock` instead.

---

## 5. Typical Errors and How to Fix Them

### 5.1. "mismatch detected for 'RuntimeLibrary'" link errors on Windows
This occurs when your project's runtime library settings (dynamic vs static) differ from GoogleTest/GoogleMock.

**Solution:**

- Use the `gtest_force_shared_crt` CMake option to force dynamic runtime linkage.
- Add this in your CMake configuration:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

This aligns the runtimes and resolves conflicts.

### 5.2. Linker errors: unresolved symbols for gmock_main or gtest_main

**Cause:** Missing linkage to proper libraries.

**Solution:**

- Make sure to link your test executables against `gmock_main` or `gtest_main`.
- Check your linker flags include `-lgmock_main` or `-lgtest_main`.
- Verify include and lib directories point to the correct installed GoogleTest/GoogleMock paths.

### 5.3. Compiler errors about missing C++17 support

**Cause:** Your compiler defaults to older C++ standards.

**Solution:**

- Add compiler flags such as `-std=c++17` or `/std:c++17`.
- In CMake, ensure:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### 5.4. Link errors involving pthreads on Unix/Linux

GoogleTest can require linking with pthread on some systems.

**Solution:**

- Link test binaries with `-lpthread`.
- When using the provided CMake scripts, this is handled automatically.
- When writing custom build scripts, add pthread manually.

### 5.5. Errors with unrecognized GoogleMock flags during Init

GoogleMockâ€™s `InitGoogleMock()` parses `--gmock_*` command-line flags.

If unrecognized flags are passed, these remain in argv and might confuse your test runner.

**Solution:**

- Ensure flags passed to test executables intended for GoogleMock begin with `--gmock_`.
- Avoid conflicts with other flags.

---

## 6. Verification and Next Steps

### How do I verify that GoogleTest and GoogleMock were installed correctly?

- Build and run the provided example tests.
- Run an executable linked with `gmock_main` or `gtest_main` which executes default tests.
- Interpret output to ensure tests pass.

Check the guide [Verifying Your Setup](getting-started/configuration-and-first-test/verifying-your-setup.md) for a detailed walkthrough.

### What should I do after installation?

- Write and run your own tests to ensure full integration.
- Learn about assertion macros and test fixtures for better test composition.
- Explore mocking capabilities using the gMock tutorials.

Refer to:
- [Writing Your First Unit Test](getting-started/configuration-and-first-test/writing-your-first-unit-test.md)
- [Introduction to Mocking and GoogleMock](guides/mocking-with-googlemock/introduction-to-mocking.md)

---

## 7. Troubleshooting Tips

<AccordionGroup title="Common Installation Issues">
<Accordion title="Build Failures Due to Compiler Incompatibilities">
Verify your compiler supports C++17; upgrade compilers if necessary. Use the `-DCMAKE_CXX_STANDARD=17` flag in CMake configurations.
</Accordion>
<Accordion title="Missing Header or Library Paths">
Ensure you have added the correct include directories and linked libraries paths in your build scripts or CMakeLists.txt.
</Accordion>
<Accordion title="Linker Errors">
Confirm linkage against `gmock_main` or `gtest_main`. Check for duplicate library versions or mismatched versions.
</Accordion>
<Accordion title="Test Runner Fails to Execute or Finds No Tests">
Make sure tests are properly registered using the `TEST()` or `TEST_F()` macros. Call `InitGoogleTest()` or `InitGoogleMock()` before running tests.
</Accordion>
</AccordionGroup>

---

## 8. Useful Compiler Flags for Custom Builds

### Multi-threading

If pthread support is not auto-detected, manually define:

```bash
-DGTEST_HAS_PTHREAD=1
```

### Shared Libraries

To build GoogleTest/GoogleMock as shared libraries:

```bash
-DGTEST_CREATE_SHARED_LIBRARY=1
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

Ensure your linker is set to produce shared libraries.

### Avoiding Macro Name Conflicts

To rename GoogleTest macros if they clash with other libraries:

```bash
-DGTEST_DONT_DEFINE_FOO=1
```
(replacing `FOO` with the problematic macro name)

---

## 9. How to Get More Help

- Official GitHub repository issues page: [https://github.com/google/googletest/issues](https://github.com/google/googletest/issues)
- Community forums and discussions for GoogleTest and GoogleMock.
- Comprehensive documentation and guides linked throughout this FAQ.

<Tip>
Use the `--help` flag with GoogleTest binaries for runtime test flags and options.
</Tip>

---

### Example Minimal `CMakeLists.txt` for GoogleMock Integration

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTestProject LANGUAGES CXX)

# Enable C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Fetch GoogleTest and GoogleMock
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gmock_main)

# Enable testing
enable_testing()
add_test(NAME my_tests COMMAND my_tests)
```

This will build and link your tests with the full GoogleMock library including `main()`.

---

## Summary
This FAQ ensures you have a clear path to install, configure, and troubleshoot GoogleTest and GoogleMock with popular build systems like CMake and Bazel, across all major platforms. Use the provided compiler flags, linking guidance, and error fixes to set up robust test environments smoothly.

---

# Related Documentation
- [Installation via CMake](getting-started/setup-and-installation/installation-via-cmake.md)
- [Installation via Bazel](getting-started/setup-and-installation/installation-via-bazel.md)
- [Building from Source](getting-started/setup-and-installation/building-from-source.md)
- [Verifying Your Setup](getting-started/configuration-and-first-test/verifying-your-setup.md)
- [Troubleshooting Common Setup Issues](getting-started/troubleshooting-and-resources/common-setup-issues.md)
- [GoogleMock README](googlemock/README.md)
- [GoogleMock CMakeLists.txt](googlemock/CMakeLists.txt)

---

### Useful External Links
- GoogleTest GitHub: <https://github.com/google/googletest>
- CMake Official Website: <https://cmake.org/>
- GoogleTest Documentation Hub: <https://google.github.io/googletest/>
