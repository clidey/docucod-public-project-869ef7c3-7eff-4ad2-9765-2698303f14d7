---
title: "Mock Strictness: Nice, Naggy, and Strict"
description: "Explore the different strictness levels (NiceMock, NaggyMock, StrictMock) and their impact on handling unexpected or uninteresting calls. Learn when to use each mode to enhance test clarity, robustness, and signal-to-noise ratio."
---

# Mock Strictness: Nice, Naggy, and Strict

Explore the different strictness levels in GoogleMock — NiceMock, NaggyMock, and StrictMock — and understand how they influence the handling of uninteresting or unexpected mock method calls. This guide clarifies when to employ each mock strictness mode to maintain clear, robust tests while controlling the volume and severity of diagnostic output.

---

## Introduction to Mock Strictness

In GoogleMock, mock objects can operate in one of several strictness modes that define their response to unplanned method calls:

- **Uninteresting Calls:** Calls to mock methods without an explicit expectation (i.e., no `EXPECT_CALL`).
- **Unexpected Calls:** Calls that violate set expectations (called with unexpected arguments or too many times).

The strictness modes alter the handling of uninteresting calls, enabling you to balance test verbosity against rigor.

### The Three Strictness Modes

| Strictness Mode | Description                                          | Default Behavior                   |
|-----------------|------------------------------------------------------|----------------------------------|
| **NiceMock**    | Suppresses warnings on uninteresting calls. Allows tests to ignore irrelevant interactions silently. | Not yet the default, but planned |
| **NaggyMock**   | Prints a warning on uninteresting calls. This is the current default and helps catch potentially overlooked calls. | Default behavior                 |
| **StrictMock**  | Treats uninteresting calls as test failures, making mock behavior very strict and verbose. | Optional                        |

<Tip>
Use StrictMock when you want your tests to catch any unexpected interactions strictly.
Use NiceMock to reduce noise when uninteresting calls are expected and insignificant.
NaggyMock is best during test development or debugging where some warnings are helpful.
</Tip>

## Understanding Uninteresting vs. Unexpected Calls

- **Uninteresting Call:** There is no matching `EXPECT_CALL` for this method call.
- **Unexpected Call:** There are matching `EXPECT_CALL`s, but none match the actual call arguments or ordering.

**Important:** Unexpected calls always cause test failures, regardless of the mock strictness mode.

## How Strictness Modes Affect Mock Behavior

| Scenario               | NiceMock Behavior               | NaggyMock Behavior             | StrictMock Behavior            |
|------------------------|-------------------------------|-------------------------------|-------------------------------|
| Uninteresting call     | No warning, silently allowed  | Warning printed                | Test failure reported         |
| Unexpected call        | Test failure reported          | Test failure reported          | Test failure reported         |
| Expected call          | Pass                          | Pass                          | Pass                          |

Using an example:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Suppose MockFoo is your mock class.
NiceMock<MockFoo> nice_mock;
NaggyMock<MockFoo> naggy_mock;
StrictMock<MockFoo> strict_mock;

EXPECT_CALL(nice_mock, DoSomething());
EXPECT_CALL(naggy_mock, DoSomething());
EXPECT_CALL(strict_mock, DoSomething());

// If a method other than DoSomething() is called:
nice_mock.SomeOtherMethod();   // ignored silently
naggy_mock.SomeOtherMethod();  // warning printed
strict_mock.SomeOtherMethod(); // test failure
```

## Using Mock Strictness Effectively

### When to Use Each:

- **NiceMock**:
  - For tests where only a few interactions matter.
  - To reduce output noise when uninteresting calls are expected.
  - Recommended as the *general* best practice for maintainable tests.

- **NaggyMock**:
  - Good during *test development* to reveal potentially ignored calls.
  - Helps catch missing or incomplete expectations.
  - This is the *default* mock mode today.

- **StrictMock**:
  - Employ when you want *strict enforcement* that only expected calls occur.
  - Useful for sensitive code areas where any extra call indicates a bug.
  - Should be used sparingly, as it can cause tests to fail on benign changes.

<Tip>
Transitioning to nicer mocks over time leads to less brittle and more maintainable tests, as fewer warnings and failures are triggered by unrelated code changes.
</Tip>

## How to Declare a Mock with a Specific Strictness

You specify mock strictness by wrapping your mock class with one of the helper templates provided by GoogleMock.

```cpp
#include <gmock/gmock.h>

// Regular mock:
MockFoo mock;

// Nice mock, suppressing uninteresting call warnings:
NiceMock<MockFoo> nice_mock;

// Naggy mock, printing warnings on uninteresting calls:
NaggyMock<MockFoo> naggy_mock;

// Strict mock, treating uninteresting calls as failures:
StrictMock<MockFoo> strict_mock;
```

These wrappers inherit constructors of your mock class, so you can pass args as usual:

```cpp
NiceMock<MockFoo> nice_mock(5, "hello");  // if MockFoo has constructor (int, const char*)
```

## Important Caveats

- Strictness works only when mock methods are declared **directly** in your mock class using `MOCK_METHOD`. Methods defined in base classes may not be affected consistently.
- Nesting strictness wrappers, e.g., `NiceMock<StrictMock<MockFoo>>`, is **not supported** and will lead to compiler errors.
- Mock classes should have **virtual destructors** to avoid undefined behavior when using these wrappers.

## Practical Tips and Best Practices

- Prefer **nice mocks** as the default for cleaner, less fragile tests.
- Use **naggy mocks** when developing or debugging tests to highlight unexpected interactions.
- Use **strict mocks** cautiously and only when precise interaction enforcement is essential.
- If you want to allow some methods to be called any number of times without warning on a naggy or strict mock, use an explicit catch-all expectation:

```cpp
EXPECT_CALL(mock, UninterestingMethod(_)).Times(AnyNumber());
```

- Avoid suppressing warnings by adding trivial expectations just to silence logs. Instead, use appropriate strictness or explicit actions.

## Under the Hood (Brief Overview)

Each strictness wrapper registers with the GoogleMock framework to configure how uninteresting calls are treated:

- `NiceMock` tells the mocks to **allow** uninteresting calls silently.
- `NaggyMock` causes a **warning** message to be logged on uninteresting calls.
- `StrictMock` treats uninteresting calls as **test failures**.

This behavior integration is transparent to your test code.

## Troubleshooting

<AccordionGroup title="Common Issues with Mock Strictness">
<Accordion title="My uninteresting call warnings are not suppressed when using NiceMock.">
Make sure the mock method is defined directly in your mock class with `MOCK_METHOD`. Methods inherited from base classes may not be covered by NiceMock.
</Accordion>
<Accordion title="StrictMock does not fail on uninteresting calls.">
Verify that your mock class has a virtual destructor and that the mock method is directly declared with `MOCK_METHOD`. Both are required for strictness to function correctly.
</Accordion>
<Accordion title="I get compilation errors when nesting NiceMock and StrictMock.">
Nesting strictness wrappers is unsupported. Wrap your mock class with only one strictness modifier.
</Accordion>
</AccordionGroup>

## Summary

Mock strictness in GoogleMock plays a vital role in controlling the noise and rigor of tests involving mocks. Understanding when and how to apply NiceMock, NaggyMock, or StrictMock empowers you to write tests that are clear, maintainable, and provide useful feedback without overwhelming diagnostic output.

---

## Additional References

- [GoogleMock Cookbook on Strictness](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Defining and Using Mocks](https://google.github.io/googletest/api/gmock_reference.html#mocking_apis)
- [Understanding Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected)
- Navigate to [Mocking Workflows](../../guides/advanced-testing-patterns/mocking-workflows) for practical test writing patterns.

---

For more foundational concepts, see [Mock Object and Expectation Model](../mock-object-model) and [Matchers and Actions](../matchers-and-actions).

---