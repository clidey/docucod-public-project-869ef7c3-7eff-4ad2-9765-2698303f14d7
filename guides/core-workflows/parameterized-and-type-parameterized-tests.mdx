---
title: "Parameterized and Type-Parameterized Tests"
description: "Walkthrough for writing value-parameterized and type-parameterized tests, illustrating how to reduce duplication and increase coverage for functions operating on multiple data sets or types."
---

# Parameterized and Type-Parameterized Tests

GoogleTest offers powerful mechanisms to write tests that automatically run multiple times with different parameters or types. This helps you reduce duplication, increase coverage, and verify your code across multiple scenarios efficiently.

---

## Overview

- **Purpose**: This guide walks you through writing *value-parameterized tests* and *type-parameterized tests*, enabling you to write flexible test suites that run the same test logic over a variety of inputs or data types.
- **Why use these?** These tests enhance maintainability by avoiding code repetition while increasing test coverage by validating multiple variants against the same requirements.
- **Prerequisites**: Familiarity with basic GoogleTest concepts like test fixtures (`TEST_F`), and how to write basic tests (`TEST`).
- **Outcome**: You will learn how to create parameterized and typed test fixtures, define test patterns, instantiate the tests with different parameters or types, and customize test naming.

---

## 1. Value-Parameterized Tests

### What Are Value-Parameterized Tests?
Value-parameterized tests allow you to run the same test with different input parameters. These parameters come from user-defined lists or generators, so you can cover a wide range of inputs systematically.

### How To Define Value-Parameterized Tests

1. **Create a Test Fixture Class** 
   - Inherit from `testing::TestWithParam<T>`, where `T` is the parameter type.
   - You can now access the current test parameter via `GetParam()`.

```cpp
class MyTestSuite : public testing::TestWithParam<int> {
  // Fixture members can be defined here
};
```

2. **Define Tests Using `TEST_P` Macro**
   - Use `TEST_P` instead of `TEST_F` or `TEST`.
   - Write test bodies that use `GetParam()` to access the current parameter.

```cpp
TEST_P(MyTestSuite, HandlesPositiveInput) {
  int n = GetParam();
  EXPECT_GT(n, 0);
  // Your test logic here
}
```

3. **Instantiate the Tests with Parameters**
   - Use the macro `INSTANTIATE_TEST_SUITE_P` to provide parameters.
   - You can use predefined parameter generators like `Values`, `ValuesIn`, `Range`, `Bool`, `Combine` etc.

```cpp
INSTANTIATE_TEST_SUITE_P(
  PositiveInts,
  MyTestSuite,
  testing::Values(1, 2, 3, 4, 5));
```

### Parameter Generators Summary

| Generator       | Description                                   |
|-----------------|-----------------------------------------------|
| `Values(v1,..)` | Explicit list of values.                       |
| `ValuesIn(cont)`| Values taken from an container or array.      |
| `Range(b,e,s)`  | Sequence from `b` to `e-1` with step `s`.    |
| `Bool()`        | Generates `{false, true}`.                     |
| `Combine(g1,..)`| Cartesian product of multiple generators.     |

### Using Parameters in Tests

- Access the parameter with `GetParam()` inside your `TEST_P`.
- Parameters can be primitive types or user-defined types.
- Use custom print functions like `PrintTo()` or `AbslStringify()` for user-defined types to get better test output.

### Customizing Parameter Names

By default, instantiated test cases have names like
`InstantiationName/TestSuite.TestName/i`, where `i` is the zero-based parameter index.

You can provide a functor or function to generate readable test names based on parameters.

```cpp
INSTANTIATE_TEST_SUITE_P(
  MyGroup,
  MyTestSuite,
  testing::Values(10, 20),
  [](const testing::TestParamInfo<int>& info) {
    return "ValueIs_" + std::to_string(info.param);
  });
```

### Handling Uninstantiated Parameterized Tests

If a parameterized test suite is defined but not instantiated, GoogleTest produces failures. To suppress, mark such a test suite:

```cpp
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(MyTestSuite);
```

---

## 2. Typed Tests

### What Are Typed Tests?
Typed tests let you run the same test logic over a specified list of C++ types. Unlike value-parameterized, typed tests operate on types, not values.

### When to Use Typed Tests

- When you want to verify the behavior of template classes or functions over multiple types.
- When test logic only depends on the type, with a consistent way of creating test instances.

### Defining Typed Tests

1. **Define a Typed Test Fixture as a Class Template**

```cpp
template <typename T>
class MyTypedTest : public testing::Test {
 public:
  T value_;
};
```

2. **Associate a List of Types with the Test Suite**

```cpp
using MyTypes = testing::Types<int, double, char>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);
```

3. **Write Tests Using `TYPED_TEST`**

```cpp
TYPED_TEST(MyTypedTest, SanityCheck) {
  TypeParam x = this->value_;
  EXPECT_TRUE(x == x);
}
```

### Customizing Typed Test Names

You can specify a class that generates custom type names.

```cpp
class MyTypeNames {
public:
  template <typename T>
  static std::string GetName(int /*index*/) {
    if constexpr(std::is_same_v<T, int>) return "int";
    if constexpr(std::is_same_v<T, double>) return "double";
    if constexpr(std::is_same_v<T, char>) return "char";
    return "unknown";
  }
};

TYPED_TEST_SUITE(MyTypedTest, MyTypes, MyTypeNames);
```

---

## 3. Type-Parameterized Tests

### What Are They?
Type-parameterized tests are an advanced form of typed tests where you define *abstract* test patterns without committing to specific types upfront. The test pattern can be instantiated multiple times with different sets of types.

### Defining Type-Parameterized Tests

1. **Define a test fixture class template**

```cpp
template <typename T>
class MyTypeParamTest : public testing::Test {
  // ...
};
```

2. **Declare a type-parameterized test suite with `TYPED_TEST_SUITE_P`**

```cpp
TYPED_TEST_SUITE_P(MyTypeParamTest);
```

3. **Define test patterns with `TYPED_TEST_P`**

```cpp
TYPED_TEST_P(MyTypeParamTest, Test1) {
  TypeParam value{};
  EXPECT_EQ(value, value);
}

TYPED_TEST_P(MyTypeParamTest, Test2) {
  EXPECT_TRUE(sizeof(TypeParam) > 0);
}
```

4. **Register test patterns using `REGISTER_TYPED_TEST_SUITE_P`**

```cpp
REGISTER_TYPED_TEST_SUITE_P(MyTypeParamTest, Test1, Test2);
```

5. **Instantiate the pattern with specific types using `INSTANTIATE_TYPED_TEST_SUITE_P`**

```cpp
using MyTypes = testing::Types<int, double>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyInstantiation, MyTypeParamTest, MyTypes);
```

---

## 4. Choosing Between Typed Tests and Value-Parameterized Tests

| Aspect                   | Typed Tests                                      | Value-Parameterized Tests                          |
|--------------------------|-------------------------------------------------|---------------------------------------------------|
| Parameterizes over       | Types                                            | Values (parameters)                               |
| Typical Usage            | Template classes or functions that vary by type | Code that varies by input data or runtime values  |
| Requires Parameter List  | At compile time                                  | At runtime (test initialization)                  |
| Parameter Type           | Types must be known in advance                   | Arbitrary types, including complex objects        |
| Test Naming              | Names include type name                           | Names include parameter suffix or index           |

---

## 5. Best Practices & Common Pitfalls

- **Unique Test Names**: Avoid underscores (`_`) in test suite and test names as GoogleTest uses underscores internally and underscores may lead to runtime errors.
- **Always instantiate parameterized tests**: Otherwise, GoogleTest will report failures unless you mark with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.
- **Custom Parameter Names**: Use parameter name generators to improve test report readability, especially for value-parameterized tests.
- **Use fixtures**: For reusing common test setup logic within typed or parameterized tests, derive your fixtures properly.
- **Running parameterized tests**: You can run all, or filter them by parameterized test names using `--gtest_filter`.

---

## 6. Example: Value-Parameterized Test

```cpp
#include <gtest/gtest.h>

// Simple function to test
int Square(int x) {
  return x * x;
}

// Test fixture
class SquareTest : public testing::TestWithParam<int> {};

// Test using the parameter
TEST_P(SquareTest, SquaresAreNonNegative) {
  int n = GetParam();
  EXPECT_GE(Square(n), 0);
}

// Instantiate with some values
INSTANTIATE_TEST_SUITE_P(PositiveAndNegative,
                         SquareTest,
                         testing::Values(-2, -1, 0, 1, 2));
```

## 7. Example: Typed Test

```cpp
#include <gtest/gtest.h>

template <typename T>
class NumericLimitsTest : public testing::Test {
 public:
  T value_;
};

using NumericTypes = testing::Types<int, unsigned int, float, double>;

TYPED_TEST_SUITE(NumericLimitsTest, NumericTypes);

TYPED_TEST(NumericLimitsTest, MaxIsGreaterThanOrEqualToMin) {
  EXPECT_GE(std::numeric_limits<TypeParam>::max(),
            std::numeric_limits<TypeParam>::min());
}
```

## 8. Example: Type-Parameterized Test

```cpp
#include <gtest/gtest.h>

template <typename T>
class ContainerTest : public testing::Test {};

TYPED_TEST_SUITE_P(ContainerTest);

TYPED_TEST_P(ContainerTest, CanDefaultConstruct) {
  TypeParam container;
  SUCCEED();
}

TYPED_TEST_P(ContainerTest, InitiallyEmpty) {
  TypeParam container;
  EXPECT_EQ(container.size(), 0);
}

REGISTER_TYPED_TEST_SUITE_P(ContainerTest, CanDefaultConstruct, InitiallyEmpty);

using MyContainers = testing::Types<std::vector<int>, std::list<int>>;

INSTANTIATE_TYPED_TEST_SUITE_P(My, ContainerTest, MyContainers);
```

---

## 9. External Resources

- [GoogleTest Primer](primer.md): Introduction and basic usage guidance.
- [Testing Reference](reference/testing.md): Detailed API reference for parameterized tests.
- [Advanced GoogleTest Topics](advanced.md): Deep dives into complex features including typed tests.
- [FAQ - Typed and Parameterized Tests](faq.md): Addresses common questions and issues.

---

## 10. Summary

This document has equipped you with the foundational knowledge to write efficient, reusable, and scalable tests using GoogleTest's parameterized and typed testing features. By organizing your tests to operate over parameter sets or type lists, you enhance your testing coverage while reducing duplication and maintenance overhead.

For next steps, consider exploring _Writing Your First Test_ and _Using Assertions Effectively_ guides to solidify your testing practice.

---