---
title: "Writing Parameterized and Typed Tests"
description: "Step-by-step walkthroughs for writing value- and type-parameterized tests using GoogleTest's macros. Explains how to maximize test coverage efficiently and avoid duplication."
---

# Writing Parameterized and Typed Tests

## Overview

This guide offers practical, step-by-step instructions for writing value- and type-parameterized tests using GoogleTest's macros. By mastering these techniques, you will maximize test coverage efficiently, avoid code duplication, and create flexible test suites that validate your codebase against multiple input parameters or types.

## Prerequisites

- Ensure you have GoogleTest installed and properly configured in your project.
- Familiarity with writing basic tests using `TEST()` and `TEST_F()` macros.
- Basic understanding of C++ templates (for typed tests).
- Include the GoogleTest header: `#include <gtest/gtest.h>`.

## Expected Outcome

By completing this guide, you will be able to:

- Define value-parameterized test fixtures and tests.
- Instantiate parameterized tests with different value sets.
- Write typed tests for running test logic across multiple types.
- Define and instantiate type-parameterized tests for reusable test patterns.
- Apply custom naming schemes to parameterized tests for clarity.

## Time Estimate

Approximately 15-30 minutes for initial understanding and implementation.

## Difficulty Level

Intermediate (requires familiarity with C++ templates and GoogleTest basics).

---

## 1. Writing Value-Parameterized Tests

Value-parameterized tests allow you to run the same test logic against various input values efficiently.

### Step 1: Define a Parameterized Test Fixture

Create a test fixture class derived from `testing::TestWithParam<T>`, where `T` is the type of the parameter values.

```cpp
class FooTest : public ::testing::TestWithParam<int> {
  // Optional: add shared setup or helper methods
};
```

> **Tip:** You may also inherit separately from `testing::Test` and `testing::WithParamInterface<T>` if you have a more complex fixture hierarchy.

### Step 2: Write Parameterized Test Cases Using `TEST_P`

Use the `TEST_P` macro (where `_P` stands for "parameterized") to define test cases that use `GetParam()` to access the current parameter.

```cpp
TEST_P(FooTest, HandlesPositiveInput) {
  int value = GetParam();
  EXPECT_GT(value, 0);
  // Your test logic
}
```

### Step 3: Instantiate Tests with Parameters

Use the `INSTANTIATE_TEST_SUITE_P` macro to create instances of the test suite with specific parameter sets.

```cpp
INSTANTIATE_TEST_SUITE_P(
    PositiveValues, FooTest,
    ::testing::Values(1, 2, 3, 5, 8));
```

You can use other parameter generators such as:

- `ValuesIn(container)`: for containers or arrays
- `Range(start, end, step)`: for numeric ranges
- `Bool()`: for boolean values
- `Combine(...)`: to generate Cartesian products of parameters

### Step 4: Optional â€” Custom Test Naming

The last optional argument to `INSTANTIATE_TEST_SUITE_P` can be a function or lambda that generates descriptive test name suffixes based on parameters.

```cpp
INSTANTIATE_TEST_SUITE_P(
    NamedParams, FooTest, ::testing::Values(1, 2, 3),
    [](const ::testing::TestParamInfo<FooTest::ParamType>& info) {
      return "Value" + std::to_string(info.param);
    });
```

This helps when test outputs show parameter values clearly.

### Verification

- Each `TEST_P` is run once per generated parameter value.
- Test names appear with suffixes (indices or custom names).
- Failures indicate which parameter caused the issue.

---

## 2. Writing Typed Tests

Typed tests allow you to write tests once that run across multiple types, ideal for validating template classes or interfaces implemented by multiple types.

### Step 1: Define a Typed Test Fixture Class Template

Declare a fixture class template parameterized by a type `T`. Derive it from `testing::Test`.

```cpp
template <typename T>
class NumericTest : public testing::Test {
 protected:
  T value_{};
};
```

### Step 2: Define a Type List and Associate it with the Fixture

Define a type list using `::testing::Types<...>` and bind it to your fixture using `TYPED_TEST_SUITE`.

```cpp
using NumericTypes = ::testing::Types<int, double, long>;
TYPED_TEST_SUITE(NumericTest, NumericTypes);
```

> **Note:** Use a type alias (`using` or `typedef`) for correct macro parsing.

### Step 3: Write Typed Tests Using `TYPED_TEST`

Define tests with `TYPED_TEST`, accessing the current type via `TypeParam`. Use `this->` or `TestFixture::` to refer to fixture members as required by C++ templates.

```cpp
TYPED_TEST(NumericTest, DefaultValueIsZero) {
  TypeParam val = this->value_;
  EXPECT_EQ(val, TypeParam(0));
}
```

Write as many typed tests as necessary.

### Step 4: Run Your Typed Tests

GoogleTest will run each typed test once per type in the type list.

### Optional Step 5: Custom Type Naming

You can supply a custom naming class with a static template method `GetName(int)` to generate readable test suite names.

```cpp
class TypeNames {
 public:
  template <typename T>
  static std::string GetName(int) {
    if (std::is_same<T, int>::value) return "Int";
    if (std::is_same<T, double>::value) return "Double";
    return "Unknown";
  }
};

TYPED_TEST_SUITE(NumericTest, NumericTypes, TypeNames);
```

### Verification

- Test results show the type names, aiding in identifying issues per type.
- Typed tests instantiate and run exactly once per type.

---

## 3. Using Type-Parameterized Tests

Type-parameterized tests are similar to typed tests but allow test suite definitions without prior knowledge of the specific types. You can instantiate the tests with different type lists later.

### Step 1: Define a Fixture Class Template

```cpp
template <typename T>
class ContainerTest : public testing::Test {
 protected:
  void CheckEmpty() {
    EXPECT_TRUE(container_.empty());
  }
  T container_;
};
```

### Step 2: Declare the Type-Parameterized Test Suite

Use `TYPED_TEST_SUITE_P` to declare your test suite as type-parameterized.

```cpp
TYPED_TEST_SUITE_P(ContainerTest);
```

### Step 3: Define Type-Parameterized Tests with `TYPED_TEST_P`

Same as typed tests, write tests referring to `TypeParam`.

```cpp
TYPED_TEST_P(ContainerTest, EmptyInitially) {
  this->CheckEmpty();
}
```

Write as many tests as you want.

### Step 4: Register Your Tests

Register your test names using `REGISTER_TYPED_TEST_SUITE_P`.

```cpp
REGISTER_TYPED_TEST_SUITE_P(ContainerTest, EmptyInitially);
```

### Step 5: Instantiate Tests with Desired Types

Instantiate with `INSTANTIATE_TYPED_TEST_SUITE_P` and a list of types.

```cpp
using MyTypes = ::testing::Types<std::vector<int>, std::list<int>>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyContainers, ContainerTest, MyTypes);
```

### Verification

- Your tests will be instantiated and run for each type you specify.
- You can instantiate the same suite multiple times with different type sets.

---

## 4. Practical Tips & Best Practices

- **Avoid underscores in test suite and test names.** GoogleTest reserves underscores for internal use. Use PascalCase or camelCase instead.
- **Use `TEST_P` and `INSTANTIATE_TEST_SUITE_P` only with parameterized fixtures that derive from `TestWithParam<T>` or implement `WithParamInterface<T>`.**
- **When using typed and type-parameterized tests, remember to use `this->` to access fixture members inside templates due to C++ rules.**
- **Define and instantiate parameterized tests at global or namespace scope. Do not place them inside functions.**
- **For complex parameter sets, consider using `Combine()` and `ConvertGenerator()` for better composition and readability.**
- **When naming parameter instances, ensure names are unique and contain only alphanumeric characters and underscores.**

---

## 5. Common Pitfalls and Troubleshooting

- **Missing Instantiations**: If you define `TEST_P` but do not instantiate via `INSTANTIATE_TEST_SUITE_P`, GoogleTest will report failure for uninstantiated parameterized tests. Suppress this using `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if intentional.

- **Incorrect Fixture Inheritance**: Ensure parameterized fixtures inherit properly from `TestWithParam<T>`.

- **Test Suite Name Collisions**: Avoid using underscores as they can cause naming collisions or invalid class names.

- **Lambda Parameter Mismatches for Custom Names**: When creating a custom name generator, ensure your lambda's parameter type matches the test suite's parameter type.

- **Using Non-Copyable Parameter Types**: Test parameters must be copyable. Ensure your types fulfill this requirement.

- **Assertions in Constructors/Destructors**: Avoid using fatal assertions (e.g., `ASSERT_*`) in constructors or destructors, as it leads to compilation errors. Use `SetUp()`/`TearDown()` instead.

---

## 6. Advanced Usage Examples

### Value-Parameterized Test Example

```cpp
class IsEvenTest : public testing::TestWithParam<int> {};

TEST_P(IsEvenTest, ReturnsTrueForEvenNumbers) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, IsEvenTest, testing::Values(2, 4, 6, 8));
```

### Typed Test Example

```cpp
template <typename T>
class NumericLimitsTest : public testing::Test {
};

using NumericTypes = ::testing::Types<int, double, long>;
TYPED_TEST_SUITE(NumericLimitsTest, NumericTypes);

TYPED_TEST(NumericLimitsTest, MaxIsGreaterThanZero) {
  EXPECT_GT(std::numeric_limits<TypeParam>::max(), 0);
}
```

### Type-Parameterized Test Example

```cpp
template <typename T>
class StackTest : public testing::Test {
  // Assume Stack<T> provides Push(), Pop(), and empty().
  Stack<T> stack_;
};

TYPED_TEST_SUITE_P(StackTest);

TYPED_TEST_P(StackTest, IsEmptyInitially) {
  EXPECT_TRUE(this->stack_.empty());
}

REGISTER_TYPED_TEST_SUITE_P(StackTest, IsEmptyInitially);

using StackTypes = ::testing::Types<std::vector<int>, std::list<int>>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyStackTests, StackTest, StackTypes);
```

---

## 7. Next Steps & Related Content

- Explore the [Value-Parameterized Tests section in advanced topics](../advanced.md#value-parameterized-tests) to deepen your understanding.
- Read about [Typed Tests and Type-Parameterized Tests](../advanced.md#typed-tests) for advanced use cases.
- Review [How to Write Your First Test](../../getting-started/first-test-experience/writing-your-first-test) to reinforce test basics.
- Consult the [Testing Reference](../reference/testing.md) for all relevant macros and detailed API insights.

---

## Additional Resources

- [GoogleTest Primer](../primer.md)
- [GoogleTest FAQ](../faq.md)
- [Assertions Reference](../api-reference/core-testing-apis/assertions)
- [Mocking APIs](../api-reference/mocking-apis/mock-classes-methods)

---

This guide equips you with the tools to write comprehensive and maintainable parameterized and typed tests using GoogleTest, leveraging its powerful macros and conventions to boost your test automation coverage and reliability.
