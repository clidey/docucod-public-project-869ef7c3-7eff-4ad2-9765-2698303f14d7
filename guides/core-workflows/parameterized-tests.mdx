---
title: "Parameterizing Tests: Value and Type Parameters"
description: "Detailed guidance on creating value- and type-parameterized test cases, enabling broad test coverage with minimal code. Includes common patterns and setup advice for making tests flexible and maintainable."
---

# Parameterizing Tests: Value and Type Parameters

## Overview

This guide explains how to write and instantiate **value-parameterized** and **type-parameterized** tests using GoogleTest. By leveraging these features, you can increase test coverage while minimizing code duplication. The guide provides practical steps, common usage patterns, and examples for creating flexible, maintainable parameterized tests.

---

## 1. Understanding Parameterized Tests

Parameterized tests in GoogleTest enable you to run the same test logic against different data values or types, without writing separate test functions for each case. This reduces boilerplate and encourages thorough testing.

- **Value-Parameterized Tests:** Tests run multiple times with different input values.
- **Type-Parameterized Tests:** Tests run with different C++ types as parameters.

---

## 2. Value-Parameterized Tests

### 2.1 Workflow Overview

- **Task Description:** Create test suites that execute a test case multiple times with different values to cover various input scenarios.
- **Prerequisites:** Basic knowledge of writing tests with `TEST` and `TEST_F` macros.
- **Expected Outcome:** A single test fixture that can run multiple test instances with distinct parameter values.
- **Time Estimate:** 10–20 minutes to write and instantiate simple parameterized tests.
- **Difficulty Level:** Intermediate.

### 2.2 Writing Value-Parameterized Tests

1. **Define a test fixture class that inherits from `::testing::TestWithParam<T>`**
    - Replace `T` with the parameter type you want to test.
    - Your class can define setup and helper functions as usual.

```cpp
class FooTest : public ::testing::TestWithParam<int> {
protected:
  // Shared setup or functions for all parameter instances
};
```

2. **Write test cases with `TEST_P` macro instead of `TEST` or `TEST_F`:**
    - Inside the test, access the current parameter via `GetParam()`.

```cpp
TEST_P(FooTest, HandlesValues) {
  int param = GetParam();
  EXPECT_TRUE(param >= 0);
  // Additional assertions...
}
```

3. **Instantiate the parameterized test suite using `INSTANTIATE_TEST_SUITE_P`:**
    - Provide a unique instantiation name prefix.
    - Pass your test fixture name.
    - Provide a parameter generator.

```cpp
INSTANTIATE_TEST_SUITE_P(
    PositiveInts,
    FooTest,
    ::testing::Values(1, 2, 3, 42));
```

4. **Run `RUN_ALL_TESTS()` as usual in your test entry point.**

### 2.3 Parameter Generators

GoogleTest offers several built-in parameter generators to produce sequences of values:

| Generator              | Description                                             |
|------------------------|---------------------------------------------------------|
| `Values(v1, v2, ...)`  | Enumerates over explicitly provided values.             |
| `ValuesIn(container)`   | Iterates over elements from a container (array, vector).|
| `Range(start, end[, step])` | Produces values in a [start, end) range, stepping by `step`. |
| `Bool()`               | Generates `{false, true}` for boolean testing.           |
| `Combine(g1, g2, ...)` | Produces the Cartesian product of parameter sequences.   |

### 2.4 Customizing Test Names

- The last argument to `INSTANTIATE_TEST_SUITE_P` can optionally customize how test instances are named.
- This function takes a `TestParamInfo<T>` object and returns a string name consisting only of alphanumeric characters or underscores.
- GoogleTest provides `PrintToStringParamName` for automatic naming based on the parameter's string representation.

Example:

```cpp
INSTANTIATE_TEST_SUITE_P(
    CustomNames,
    FooTest,
    ::testing::Values(1, 2),
    [](const ::testing::TestParamInfo<int>& info) {
      return "Param_" + std::to_string(info.param);
    });
```

### 2.5 Best Practices

- Use meaningful parameter values reflecting realistic cases.
- Avoid overly broad parameter ranges that slow down tests.
- Combine multiple parameters with `Combine()` when testing multi-dimensional input spaces.
- Prefer `EXPECT_*` assertions in parameterized tests to allow comprehensive failure reports.

### 2.6 Common Pitfalls and Troubleshooting

- **Forgot to instantiate:** Every `TEST_P` requires exactly one corresponding `INSTANTIATE_TEST_SUITE_P`. If not instantiated, GoogleTest reports errors.
- **Parameter type mismatch:** Ensure the parameter type of `TestWithParam<T>` matches the types in the generator.
- **Dangling references:** When generating parameters involving strings or objects, ensure lifetime stability (see documentation on `ConvertGenerator` for mapping generator output to parameter types safely).

---

## 3. Type-Parameterized Tests

### 3.1 Workflow Overview

- **Task Description:** Write generic test logic once and run it over multiple C++ types.
- **Prerequisites:** Understanding of C++ templates and basic TEST macro usage.
- **Expected Outcome:** Comprehensive type coverage with minimal test code.
- **Time Estimate:** 10–30 minutes based on complexity.
- **Difficulty Level:** Advanced.

### 3.2 Writing Typed Tests

1. **Define a typed test fixture template** that inherits from `testing::Test`:

```cpp
template <typename T>
class MyTypedTest : public testing::Test {
public:
  // Type-specific members or typedefs
};
```

2. **Declare a type list using `::testing::Types<...>` and associate it using `TYPED_TEST_SUITE`:**

```cpp
using MyTypes = ::testing::Types<int, double, std::string>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);
```

3. **Define tests with `TYPED_TEST` macro:**

```cpp
TYPED_TEST(MyTypedTest, DoesSomething) {
  TypeParam value{};  // TypeParam is the current type under test
  // Test code for TypeParam
  EXPECT_TRUE(/* some condition involving value */);
}
```

4. **Compile and run tests normally.**

### 3.3 Using Type-Parameterized Test Suites

- These are reusable test patterns defined without knowing the type parameters ahead of time.
- Defined similarly to typed tests but use `_P` suffix macros: `TYPED_TEST_SUITE_P`, `TYPED_TEST_P`, and are registered via `REGISTER_TYPED_TEST_SUITE_P`.
- Then instantiated in separate translation units or later using `INSTANTIATE_TYPED_TEST_SUITE_P`.

### 3.4 Customizing Type Names

- Provide a class with template static method `GetName` to generate readable test names for types.

```cpp
class NameGenerator {
 public:
  template <typename T>
  static std::string GetName(int) {
    if constexpr (std::is_same_v<T, int>) return "int";
    if constexpr (std::is_same_v<T, double>) return "double";
    return "unknown";
  }
};

TYPED_TEST_SUITE(MyTypedTest, MyTypes, NameGenerator);
```

---

## 4. Combining Value and Type Parameterization

- You can combine `Combine()` generator with value-parameterized tests for multi-dimensional parameter spaces.
- Type-parameterized tests can offer broad coverage by testing various types.

---

## 5. Examples

### 5.1 Value-Parameterized Test Example

```cpp
class FactorialTest : public ::testing::TestWithParam<int> {};

int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n-1);
}

TEST_P(FactorialTest, ComputesCorrectly) {
  int n = GetParam();
  int expected = /* known factorial value for n */;
  EXPECT_EQ(Factorial(n), expected);
}

INSTANTIATE_TEST_SUITE_P(
    BasicCases, FactorialTest,
    ::testing::Values(0, 1, 2, 3, 8));
```

### 5.2 Type-Parameterized Test Example

```cpp
template <typename T>
class StackTest : public ::testing::Test {
public:
  Stack<T> stack;
};

using MyTypes = ::testing::Types<int, double, std::string>;
TYPED_TEST_SUITE(StackTest, MyTypes);

TYPED_TEST(StackTest, IsEmptyInitially) {
  EXPECT_TRUE(this->stack.empty());
}

TYPED_TEST(StackTest, PushIncreasesSize) {
  this->stack.push(TypeParam{});
  EXPECT_EQ(this->stack.size(), 1);
}
```

---

## 6. Troubleshooting & Tips

### 6.1 Common Issues

- **Tests not running:** Verify `INSTANTIATE_TEST_SUITE_P` is called for all `TEST_P` tests.
- **Name collisions:** Use unique prefixes in `INSTANTIATE_TEST_SUITE_P`.
- **Invalid test names:** Custom name generators must only produce alphanumeric and underscore.
- **Parameter lifetime issues:** Use `ConvertGenerator` with care when generating parameters referencing strings or objects.

### 6.2 Best Practices

- Use descriptive instantiation prefixes that reflect the parameter set purpose.
- Group related parameters logically to improve test clarity.
- Keep parameter lists manageable to avoid long test suites and slow runs.
- When combining parameters with `Combine()`, document the parameter types and orders clearly.

---

## 7. Next Steps & Related Content

- Explore the [GoogleTest Primer](docs/primer.md) for testing fundamentals.
- Learn about [Writing Your First Test Case](getting-started/first-test-experience/writing-your-first-test.mdx).
- Review [Using Assertions Effectively](guides/core-workflows/using-assertions.mdx) to strengthen test validations.
- Check the [Typed Tests](docs/reference/testing.md#TYPED_TEST) and [Value-Parameterized Tests](docs/reference/testing.md#TEST_P) sections.
- Study examples in [googletest/samples/sample7_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample7_unittest.cc) and [sample8_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample8_unittest.cc) for practical illustrations.

---

## References

- [Value-Parameterized Tests - Official Docs](../advanced.md#value-parameterized-tests)
- [Type-Parameterized Tests - Official Docs](../advanced.md#typed-tests)
- [`TEST_P` and `INSTANTIATE_TEST_SUITE_P` - Testing Reference](docs/reference/testing.md#TEST_P)
- [`TYPED_TEST` and `TYPED_TEST_SUITE` - Testing Reference](docs/reference/testing.md#TYPED_TEST)
- [Parameter Generators API](googletest/include/gtest/gtest-param-test.h)

---

*This documentation covers **Parameterizing Tests: Value and Type Parameters** page to help users write comprehensive parameterized tests in GoogleTest with illustrative examples, setup guidance, and troubleshooting advice.*