---
title: "Writing and Running Your First Test"
description: "A hands-on tutorial to create, build, and execute your first test case with GoogleTest. Includes a simple example, expected output, and tips for structuring test code for clarity and maintainability."
---

# Writing and Running Your First Test with GoogleTest

## Workflow Overview

### Task Description
This guide walks you through creating, building, and executing your first test case using the GoogleTest framework. You'll learn how to write simple tests that check your C++ code, understand basic test concepts, and verify the output to confirm your test ran as expected.

### Prerequisites
- A C++ development environment with a compiler supporting C++17 or later.
- GoogleTest installed and properly linked in your project.
- Basic familiarity with C++ programming.

### Expected Outcome
By the end of this guide, you will have a simple GoogleTest test program that compiles and runs, producing a test result indicating pass or failure.

### Time Estimate
15-30 minutes depending on your familiarity with C++ and build tools.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### 1. Write a Simple Test Using `TEST()` Macro

GoogleTest uses macros to define individual tests. The `TEST()` macro requires two identifiers: a test suite name and a test name. Both should follow typical C++ naming conventions without underscores.

Example: Testing a `Factorial` function.

```cpp
// Declaration of the function to test
int Factorial(int n);

// Simple test definitions
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- The first argument (`FactorialTest`) is the test suite, grouping related tests.
- The second argument is the name of the individual test case.

### 2. Build the Test Program

Ensure your build setup includes:
- The directory containing GoogleTest headers.
- The GoogleTest library (`gtest` or `gtest_main`) linked to your executable.

Example CMake linkage:

```cmake
target_link_libraries(your_test_executable gtest_main)
```

If you link to `gtest_main`, it provides a default `main()` function for test execution.

### 3. Run the Test Executable

When you run the test binary, GoogleTest automatically discovers all tests and runs them.

Expected console output snippet:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### 4. Interpreting Test Results

- Tests marked `[  PASSED  ]` succeeded.
- Failed tests are clearly indicated with `[  FAILED  ]` and come with detailed failure messages including file and line number.

### 5. Using Test Fixtures with `TEST_F()` (Optional Next Step)

For multiple tests requiring shared setup, use *test fixtures*:
1. Create a class derived from `testing::Test`.
2. Place shared data and setup code in the fixture.
3. Define tests using `TEST_F(FixtureName, TestName)` to access fixture members.

Example stub:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }
  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);
  ...
}
```

You can explore this after mastering the simple `TEST()` style.

---

## Example: Complete Minimal Test Program

```cpp
#include <gtest/gtest.h>

// Function under test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test cases
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this program. The output should confirm all tests passed.

---

## Practical Tips & Best Practices

- Use descriptive, consistent naming for test suites and test cases.
- Prefer `EXPECT_*` over `ASSERT_*` for non-critical checks to allow test continuation.
- Use assertions to verify both normal and boundary conditions.
- Write isolated tests to make debugging easier.
- Consider using test fixtures (`TEST_F`) to avoid duplicating setup code.

---

## Troubleshooting Common Issues

### Test Not Running or Discovered
- Ensure test executable links with the correct GoogleTest libraries.
- Confirm `InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
- Avoid underscores in test and test suite names as they may cause naming conflicts.

### Compiler or Linker Errors
- Check include paths for GoogleTest headers.
- Verify that GoogleTest source or libraries are compiled with the same C++ standard and compiler settings.

### Failing Tests
- Read the failure message and location GoogleTest prints.
- Use `SCOPED_TRACE()` or custom failure messages in complex tests to improve diagnosis.

---

## Next Steps & Related Content

- Explore [Test Fixtures](../primer.md#same-data-multiple-tests) to write more complex, reusable test setups.
- Learn about [Assertions](../primer.md#assertions) for rich test validations.
- See [Mocking Basics](../guides/core-workflows/mocking-basics) to handle dependencies in tests.
- Use [Sample Tests](../samples.md) to see real-world examples.

---

This hands-on start will build your confidence to expand with GoogleTest and write maintainable, effective tests.

---

## Additional Resources

- Official GoogleTest Primer: [primer.md](../primer.md)
- GoogleTest User Guide Overview: [index.md](../index.md)
- GoogleTest Advanced Topics: [advanced.md](../advanced.md)
- Assertions Reference: [reference/assertions.md](../reference/assertions.md)

By following these steps, you begin your journey into robust C++ testing with GoogleTest.