---
title: "Parameterized and Typed Tests"
description: "Demonstrates how to reduce code duplication and maximize coverage using value-parameterized and type-parameterized tests. Learn to group related test cases and test against multiple input values or data types."
---

# Parameterized and Typed Tests

GoogleTest offers powerful ways to write reusable and comprehensive tests by enabling you to test the same code logic with multiple input values or data types, drastically reducing code duplication and boosting test coverage. This page demonstrates how to use **value-parameterized tests** and **type-parameterized tests** effectively.

---

## Why Use Parameterized and Typed Tests?

Often, test code repeats the same logic for many input variations or across different types. Instead of copying and pasting similar test code for each case, parameterized and typed tests let you write once and run many times:

- **Value-Parameterized Tests:** Run the same test logic across different input values.
- **Typed Tests:** Run the same test logic across multiple data types.

These techniques help maintain cleaner test code, minimize errors, and simplify maintenance.

---

## Value-Parameterized Tests

### Overview

Value-parameterized tests allow you to write tests that automatically run over a range of input values. They are ideal for:

- Testing different data inputs that affect function behavior.
- Verifying compliance with interfaces for various parameter sets.
- Data-driven testing scenarios.

### Setting Up Value-Parameterized Tests

1. **Define a Test Fixture Class**

   Your fixture should derive from `testing::TestWithParam<T>`, where `T` is the parameter type.

   ```cpp
   class MyValueParamTest : public testing::TestWithParam<int> {
   protected:
     // Optional: add helper functions or shared setup
   };
   ```

2. **Write Parameterized Tests Using `TEST_P` Macro**

   Use `TEST_P` to define tests that use `GetParam()` to access the runtime parameter.

   ```cpp
   TEST_P(MyValueParamTest, IsEvenTest) {
     int value = GetParam();
     EXPECT_EQ(value % 2, 0) << "Value " << value << " is not even.";
   }
   ```

3. **Instantiate the Tests with Parameters**

   Use `INSTANTIATE_TEST_SUITE_P` to specify one or more sets of parameters your tests should run against.

   ```cpp
   INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyValueParamTest, testing::Values(2, 4, 6, 8));
   ```

### Parameter Generators

GoogleTest provides several predefined generators for test parameters:

- `Values(v1, v2, ..., vN)`: Explicit list of values.
- `ValuesIn(container or iterator_range)`: Values from a container or iterator range.
- `Range(begin, end, [step])`: Values in an arithmetic range (exclusive of `end`). Default step is 1.
- `Bool()`: Yields `false` and `true`.
- `Combine(g1, g2, ... gN)`: Cartesian product of multiple generators to produce tuples.

Example combining two generators:

```cpp
INSTANTIATE_TEST_SUITE_P(
    ColorsAndNumbers, MyValueParamTest,
    testing::Combine(testing::Values("red", "blue"), testing::Range(1, 4)));
```

### Customizing Test Names

You can supply an optional functor or function to generate more meaningful test names based on parameters. The function takes `const TestParamInfo<T>&` and returns a `std::string`.

```cpp
INSTANTIATE_TEST_SUITE_P(
    CustomNames, MyValueParamTest,
    testing::Values(1, 2, 3),
    [](const testing::TestParamInfo<int>& info) {
      return "Val" + std::to_string(info.param);
    });
```

The generated test names appear as suffixes and must only contain alphanumeric characters or underscores.

### Example Usage

```cpp
class FactorialTest : public testing::TestWithParam<int> {};

TEST_P(FactorialTest, HandlesPositiveInput) {
  int n = GetParam();
  EXPECT_GT(n, 0);
  EXPECT_NO_FATAL_FAILURE({ int result = Factorial(n); });
}

INSTANTIATE_TEST_SUITE_P(PositiveNumbers, FactorialTest, testing::Values(1, 2, 3, 4, 5));
```

---

## Typed Tests

### Overview

Typed tests allow you to run the same test logic across different types rather than just values. They are especially useful when:

- Validating several template class specializations.
- Ensuring multiple implementations meet the same interface specifications.

### Setting Up Typed Tests

1. **Define a Fixture Class Template**

Create a template test fixture derived from `testing::Test` parameterized by a type `T`.

```cpp
template <typename T>
class MyTypedTest : public testing::Test {
 public:
  T value_;
};
```

2. **Specify the Type List**

Use `::testing::Types<Types...>` to list the types you want to test.

```cpp
using MyTypes = ::testing::Types<int, float, double>;
```

3. **Associate the Type List with your Test Suite**

Use `TYPED_TEST_SUITE` to bind the fixture template and the list.

```cpp
TYPED_TEST_SUITE(MyTypedTest, MyTypes);
```

4. **Write Typed Tests with `TYPED_TEST` Macro**

Inside the test, refer to the type parameter as `TypeParam`.

```cpp
TYPED_TEST(MyTypedTest, CanInitializeValue) {
  TypeParam value = this->value_;
  // Use value in testing code
  EXPECT_EQ(value, TypeParam());
}
```

### Example Usage

```cpp
template <typename T>
class NumericLimitsTest : public testing::Test {
};

using NumericTypes = ::testing::Types<int, long, float, double>;

TYPED_TEST_SUITE(NumericLimitsTest, NumericTypes);

TYPED_TEST(NumericLimitsTest, IsNonNegative) {
  EXPECT_GE(std::numeric_limits<TypeParam>::min(), 0);
}
```

---

## Type-Parameterized Tests

These tests extend typed tests by allowing test definitions and test instantiations to be split across translation units, enabling reusable abstract tests for interfaces and concepts.

- Define the fixture template.
- Use `TYPED_TEST_SUITE_P` and `TYPED_TEST_P` macros to declare tests.
- Register tests with `REGISTER_TYPED_TEST_SUITE_P`.
- Instantiate tests with `INSTANTIATE_TYPED_TEST_SUITE_P`.

This advanced pattern supports scenarios where implementation authors instantiate tests with their types.

---

## Best Practices & Tips

- **Name Tests Clearly:** Use meaningful names for test suites, parameter instances, and types for easier debugging.
- **Minimize Test Duplication:** Favor parameterized and typed tests over copy-pasting test code.
- **Use `ASSERT_*` vs. `EXPECT_*` Judiciously:** Prefer `EXPECT_*` for multiple assertions in one test; use `ASSERT_*` when further steps depend on prior success.
- **Avoid Dangling References in Naming Functors:** When generating test names with lambdas or functions, ensure parameters outlive the generator.
- **Be Mindful of Performance:** While parameterized tests increase coverage, too many test cases can slow down your suite.
- **Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` for Unused Tests:** To avoid failures during compilation if a parameterized test is defined but never instantiated.

---

## Troubleshooting Common Issues

- **Tests Not Running:** Ensure your parameterized tests are instantiated with `INSTANTIATE_TEST_SUITE_P`.
- **Name Collisions:** Duplicate parameter names in instantiations cause errors; provide unique names.
- **Invalid Test Names:** Names generated by custom name functions must contain only alphanumeric characters and underscores.
- **Dangling Parameter References:** When using `ValuesIn` with temporary or local containers, ensure values outlive test execution.

Refer to the official [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md) and [Advanced Guide](advanced.md) for deeper troubleshooting.

---

## Additional References

- [Value-Parameterized Tests](advanced.md#value-parameterized-tests)
- [Typed Tests](advanced.md#typed-tests)
- [REGISTER_TYPED_TEST_SUITE_P and INSTANTIATE_TYPED_TEST_SUITE_P](reference/testing.md#REGISTER_TYPED_TEST_SUITE_P)
- [INSTANTIATE_TEST_SUITE_P](reference/testing.md#INSTANTIATE_TEST_SUITE_P)
- [GoogleTest Primer](primer.md) for basics

---

## Summary Diagram

```mermaid
flowchart TD
  A[Define Test Fixture Class]
  B[Write TEST_P or TYPED_TEST]
  C[Instantiate Test Suite with Parameters or Types]
  D[Run RUN_ALL_TESTS()]

  A --> B --> C --> D
```

---

This approach will maximize your test effectiveness by allowing automated comprehensive testing over diverse inputs and types with minimal code duplication.

---

_For a quick start creating parameterized and typed tests, see [Getting Started with Writing Parameterized Tests](guides/core-workflows/parameterized-testing) and the [Testing Reference](reference/core-testing-api/parameterized-and-typed-tests)._