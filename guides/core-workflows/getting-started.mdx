---
title: "Getting Started: Writing Your First Test"
description: "A hands-on, step-by-step guide to creating and running your first GoogleTest suite. Learn to set up your test environment, write basic test cases, and interpret resultsâ€”empowering you to validate code correctness from the outset."
---

# Getting Started: Writing Your First Test

## Workflow Overview

### Task Description
This guide walks you through creating and running your first test suite using GoogleTest. It helps you validate that your C++ code behaves as expected by showing you how to write basic tests, use assertions to verify results, and interpret test outcomes.

### Prerequisites
- GoogleTest and (optionally) GoogleMock have been installed and integrated into your build system. Refer to the [Installation Methods](../getting-started/prerequisites-and-installation/installation-methods.md) guide.
- Your project is properly configured to compile and link against GoogleTest. See [Project Setup](../getting-started/configuration-and-first-run/project-setup.md).
- Basic familiarity with C++ and your development environment.

### Expected Outcome
You will be able to write simple, self-contained test cases using the `TEST()` macro and run them using GoogleTest's test runner. You will understand how assertions work, how tests are organized into test suites, and how to interpret the test execution output.

### Time Estimate
Approximately 15-30 minutes for first-time users.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### 1. Include GoogleTest Headers
Start your test source file by including the GoogleTest header.

```cpp
#include <gtest/gtest.h>
```

If you are using GoogleMock, add:

```cpp
#include <gmock/gmock.h>
```

### 2. Write a Basic Test Case Using `TEST()` Macro
GoogleTest uses the `TEST(test_suite_name, test_name)` macro to define a test. The test suite groups related tests; the test name describes what the specific test verifies.

```cpp
// A simple function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Define tests for Factorial function
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- `EXPECT_EQ` is an assertion macro that checks whether the two arguments are equal.
- If an assertion fails, the test fails but continues running (non-fatal).

### 3. Compile and Link Your Tests
Compile your test source with your C++ compiler, linking against the GoogleTest libraries.

Example (with g++):

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread my_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o my_test
```

Note:
- Use `-isystem` to include GoogleTest headers.
- Link with `libgtest.a` and `libgtest_main.a` (or equivalent).
- The `-pthread` flag is typically required.

### 4. Run the Tests
Execute the test binary:

```bash
./my_test
```

Sample output:

```text
Running main() from gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This output confirms that all tests passed.

### 5. Interpret Test Results
- `OK` means the test succeeded.
- Failures (if any) display the failure location, the expected vs actual values, and the call stack.

### 6. Optional: Write a Custom `main()` Function
Usually, you link with `gtest_main` which supplies a default `main()`. If you want to customize test setup or command-line argument parsing, define your own `main()` as follows:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Note:
- `InitGoogleTest()` parses custom flags and should be called before running tests.
- `RUN_ALL_TESTS()` executes all registered tests and returns 0 if all pass, non-zero otherwise.

---

## Examples & Code Samples

### Example: Testing a Simple Duplication Function

```cpp
int Duplicate(int x) {
  return 2 * x;
}

TEST(DuplicateTest, DoublesPositiveNumbers) {
  EXPECT_EQ(Duplicate(1), 2);
  EXPECT_EQ(Duplicate(5), 10);
}

TEST(DuplicateTest, HandlesZero) {
  EXPECT_EQ(Duplicate(0), 0);
}

TEST(DuplicateTest, HandlesNegativeNumbers) {
  EXPECT_EQ(Duplicate(-5), -10);
}
```

### Example: Using `ASSERT_*` vs `EXPECT_*`

```cpp
TEST(SampleTest, FatalVsNonFatal) {
  int* ptr = nullptr;

  ASSERT_NE(ptr, nullptr);  // Fatal; test stops here if ptr is null
  *ptr = 5;                // Safe only if previous check passes

  EXPECT_EQ(1, 1);         // Non-fatal; test continues regardless
}
```

---

## Troubleshooting & Tips

### Common Issues

- **No tests run:** Make sure your tests are linked with `gtest_main` or you provide a working `main()`.
- **Failure to link:** Verify library paths and correct linking order.
- **Test crashes on assertion:** Use `EXPECT_` assertions to allow test to continue or `ASSERT_` to abort.
- **Tests silently pass but do not run:** Ensure your test files are compiled and linked correctly.

### Best Practices

- Use descriptive and valid C++ identifiers for test suite and test names; avoid underscores.
- Group related tests logically into test suites.
- Prefer `EXPECT_*` for most assertions to allow multiple failures per test. Use `ASSERT_*` only when continuing does not make sense.
- Use `TEST_F()` and fixtures when multiple tests share setup.

### Performance Considerations

- Keep tests fast and isolated.
- Avoid heavy setup in basic tests; defer to fixtures when needed.

---

## Next Steps & Related Content

- Learn to write **test fixtures** using `TEST_F()` in the [GoogleTest Primer](../docs/primer.md#test-fixtures).
- Explore **mock objects** for dependency control in [Using and Creating Mock Objects](../guides/mocking-and-advanced-testing/mock-objects.md).
- Understand rich **assertion macros** and failure reporting in [Mastering Assertions](../guides/core-workflows/writing-assertions.md).
- Dive deeper into **advanced test features** and command-line flags in [GoogleTest Advanced](../advanced.md).

---

## Visual Overview of Test Workflow

```mermaid
flowchart TD
  Start([Write Test Cases Using TEST()]) --> Compile[Compile and Link Test]
  Compile --> RunTests[Run Test Binary]
  RunTests --> CheckResults{Do Tests Pass?}
  CheckResults -->|Yes| Finish([Celebrate Success])
  CheckResults -->|No| Debug[Inspect Failures and Fix Code]
  Debug --> Start
```

---

By following the above steps, you can smoothly validate your C++ program's correctness from the very first test case onward.

---