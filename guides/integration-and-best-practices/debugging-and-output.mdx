---
title: "Debugging Test Failures and Output Customization"
description: "Best practices for diagnosing failing tests, customizing output formats, and using GoogleTest's advanced logging/debugging flags for actionable insights during development and CI runs."
---

# Debugging Test Failures and Output Customization

## Overview

This guide provides practical strategies to debug failing tests and customize test output in GoogleTest. You'll learn how to interpret test failure information, utilize GoogleTest's advanced logging and debugging flags, and tailor output for human-readable or CI-friendly formats. These techniques empower you to rapidly diagnose issues, streamline troubleshooting, and maintain a productive test-driven workflow.

---

## 1. Understanding Test Failures

### What Happens When a Test Fails

- **Failure Types:** A test can fail due to:
  - *Assertion failures* (fatal or non-fatal)
  - *Crashes or exceptions*
  - *Unexpected mock interactions* (when using GoogleMock)
- **Failure Reporting:** GoogleTest reports the failure location (source file and line number) alongside an explanatory message.

### Reading the Failure Output

When a test fails, GoogleTest prints:

- The file path and line number with the assertion that failed.
- The condition or value that failed.
- Optional user-supplied failure message.
- Stack trace information if enabled (see Logging and Verbosity).

### Example Failure Message

```output
path/to/my_test.cc:42: Failure
Expected equality of these values:
  Add(1, 2)
    Which is: 4
  3
Vectors x and y differ at index 2
```

This shows where, why, and how the test failed, aiding targeted debugging.

---

## 2. Customizing Test Output Formats

GoogleTest offers several output customization options to optimize the readability and integration of test results.

### Output Formats

| Flag                        | Description                                            |
|-----------------------------|--------------------------------------------------------|
| `--gtest_color=yes|no|auto` | Control colorized output (enabled by default when supported). |
| `--gtest_output=xml[:path]` | Generate XML test result output for CI integrations. Defaults to `test_detail.xml`. |
| `--gtest_print_time=0|1`     | Show or hide elapsed time per test (enabled by default). |

### Using XML Output

Generate an XML report suitable for CI tools:

```bash
./my_test_binary --gtest_output=xml
```

This creates a `test_detail.xml` file describing all test results.

To customize the filename and path:

```bash
./my_test_binary --gtest_output=xml:results/my_test_report.xml
```

### Controlling Verbosity

Use `--gtest_verbose=LEVEL` to adjust the verbosity of GoogleTest's output.

---

## 3. Leveraging Logging and Debugging Flags

GoogleTest provides flags that grant fine control over test execution and output to ease diagnosis.

### Key Flags

| Flag                        | Description                                                 |
|-----------------------------|-------------------------------------------------------------|
| `--gtest_filter=pattern`    | Run only tests matching the pattern (supports wildcards).    |
| `--gtest_repeat=N`          | Repeat tests N times for flaky tests detection.              |
| `--gtest_break_on_failure`  | Break into debugger when an assertion fails (requires debugger). |
| `--gtest_catch_exceptions=0|1` | Disable or enable exception catching by GoogleTest.         |
| `--gtest_stack_trace_depth=N` | Increase stack trace depth on failures for detailed info.  |

### Example: Running a Single Test Repeatedly

```bash
./my_test_binary --gtest_filter=MyTestSuite.MyTest --gtest_repeat=10
```

This helps isolate intermittent failures.

---

## 4. Diagnosing Common Test Failures

### Assertion Failures

- Review the assertion message and source location.
- Use `EXPECT_*` to allow test to continue and collect multiple failures.
- Use `ASSERT_*` if test should abort immediately on failure.

### Crashes and Exceptions

- Use `--gtest_break_on_failure` combined with a debugger to trap crash locations.
- Enable exceptions via `--gtest_catch_exceptions=1` if your environment supports them.

### Mocking Failures (with GoogleMock)

- Verify your expectations (`EXPECT_CALL`) were set correctly.
- Review output messages specifying unexpected or uninteresting calls.
- Adjust mock behavior and verbosity to ensure accurate matching.

<Tip>
Enable verbose mock output for deeper mock call insights using:

```bash
./my_test_binary --gmock_verbose=info
```

</Tip>

---

## 5. Best Practices for Effective Debugging

- **Isolate failing tests:** Use `--gtest_filter` to run only the failing test(s).
- **Repeat flaky tests:** Employ `--gtest_repeat` to catch intermittent problems.
- **Use detailed assertions:** Prefer expressive assertion macros that describe expectations clearly.
- **Add custom failure messages:** Use streaming `<<` to annotate assertions for clarity.
- **Leverage Test Fixtures:** Share setup and teardown logic to reduce noise.
- **Monitor test duration:** Use `--gtest_print_time` to identify slow tests.

---

## 6. Example: Customized Test Run

Run only specific tests with color output, verbose logging for mocks, XML report generation, repeating tests 5 times, and breaking on failure:

```bash
./my_test_binary \
  --gtest_filter=QueueTest.DequeueWorks \
  --gtest_color=yes \
  --gmock_verbose=info \
  --gtest_output=xml:reports/queue_test.xml \
  --gtest_repeat=5 \
  --gtest_break_on_failure
```

This command aligns output perfectly for deep debugging.

---

## 7. Troubleshooting Tips

<AccordionGroup title="Troubleshooting Common Debugging Issues">
<Accordion title="No Failure Details or Messages">
- Ensure your test binary is built with debug symbols.
- Check whether `--gtest_catch_exceptions` is interfering in environments with exceptions.
- Verify test logging verbosity settings.
</Accordion>
<Accordion title="Tests Not Running as Expected">
- Confirm test names via `--gtest_list_tests`.
- Double-check filter patterns and syntax.
- Ensure test fixtures or setUp/tearDown methods don't abort prematurely.
</Accordion>
<Accordion title="Verbose Mock Output Missing">
- Use `--gmock_verbose=info` or `--gmock_verbose=warning`.
- Verify mock expectations are properly set before exercising mocks.
</Accordion>
<Accordion title="XML Output Not Generated or Wrong Location">
- Check write permissions in the target directory.
- Ensure correct `--gtest_output=xml:filename.xml` syntax.
</Accordion>
</AccordionGroup>

<Tip>
Use a debugger integration for your environment (e.g., gdb, lldb, Visual Studio) with `--gtest_break_on_failure` to enter the failure point directly.
</Tip>

---

## 8. Next Steps & Related Documentation

- **Writing Effective Assertions:** Improve the clarity and robustness of your tests with expressive assertions.
- **Using Test Fixtures for Reusable Setups:** Streamline your test setup and cleanup across multiple tests.
- **Integrating with Continuous Integration (CI):** Learn how to automate running and reporting of your tests in CI workflows.
- **Mocking Best Practices:** Understand how to diagnose and fine-tune mock expectations for reliable tests.

Explore these resources to deepen your testing mastery:

- [Writing Effective Assertions](../core-workflows/writing-assertions.md)
- [Using Test Fixtures for Reusable Setups](../core-workflows/using-fixtures.md)
- [Integrating with Continuous Integration (CI)](/guides/integration-and-best-practices/ci-integration)
- [Mocking Reference](../reference/mocking.md)


---

## Appendix: Common Useful Flags Summary

| Flag                         | Purpose                                        |
|------------------------------|------------------------------------------------|
| `--gtest_filter`             | Run selected tests based on name patterns      |
| `--gtest_repeat`             | Repeat tests multiple times                      |
| `--gtest_break_on_failure`   | Break into debugger on failure                   |
| `--gtest_output=xml[:path]` | Generate XML output for CI                        |
| `--gmock_verbose=info|warning|error` | Control GoogleMock's verbosity              |
| `--gtest_catch_exceptions`   | Enable or disable exception catching             |
| `--gtest_color`              | Force enable/disable color output                |

Use these flags alone or combined to tailor test runs for your debugging and reporting needs.

---

## References

- GoogleTest Primer: [docs/primer.md](https://github.com/google/googletest/blob/main/docs/primer.md)
- Mocking Reference: [docs/reference/mocking.md](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)
- Sample Workflows & Use Cases: [overview/quick-tour-features-usecases/sample-workflows.md](https://github.com/google/googletest/blob/main/overview/quick-tour-features-usecases/sample-workflows.md)
- Continuous Integration Integration Guide: [guides/integration-and-best-practices/ci-integration.md](https://github.com/google/googletest/blob/main/guides/integration-and-best-practices/ci-integration.md)


---

> **Pro Tip:** Start simple â€” isolate a failing test, run with verbose output, and use the debugger break flag. Gradually combine flags and filters as you diagnose deeper issues.

---

This completes the essential guidance to efficiently debug test failures and customize output in GoogleTest environments.