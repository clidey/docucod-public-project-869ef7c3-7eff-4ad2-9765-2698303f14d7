---
title: "Writing and Organizing Tests"
description: "Discover how to define test cases, group related tests, and structure your test files following best practices. This guide illustrates test fixture usage, naming conventions, and organization techniques for maintainable, scalable codebases."
---

# Writing and Organizing Tests

Discover how to define test cases, group related tests, and structure your test files following best practices. This guide illustrates test fixture usage, naming conventions, and organization techniques for maintainable, scalable codebases.

---

## 1. Understanding Test Organization

### What This Guide Helps You Achieve
This guide walks you through writing organized, effective tests with GoogleTest by defining individual tests, grouping related tests into suites, and using test fixtures for shared setup and teardown logic. You’ll learn how to structure your test files for clarity, maintainability, and scalability.

### Prerequisites
- Basic knowledge of C++ and building C++ projects.
- GoogleTest installed and integrated into your build system.
- Familiarity with running test executables.

### Expected Outcome
By the end of this guide, you will:
- Define tests using `TEST` and `TEST_F` macros.
- Organize related tests into test suites and fixtures.
- Use test fixtures to reuse setup/teardown code.
- Follow best practices for naming and structuring your tests.

### Time Estimate
Approximately 15-30 minutes.

### Difficulty Level
Beginner to Intermediate.

---

## 2. Defining Tests and Test Suites

### 2.1 Simple Tests Using `TEST`
GoogleTest uses the `TEST` macro to define an individual test. Each test belongs to a *test suite*, which is the first argument to `TEST`.

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code goes here
  EXPECT_EQ(SomeFunction(), expected_value);
}
```

- The first argument is the test suite name; the second is the test name.
- Test names and suite names must be valid C++ identifiers and should avoid underscores `_` to prevent naming conflicts.

### 2.2 Grouping Tests for Clarity
Tests that logically belong together (e.g., for the same class or module) should share the same suite name.

```cpp
TEST(MathUtils, HandlesZero) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(MathUtils, HandlesPositive) {
  EXPECT_EQ(Factorial(5), 120);
}
```

*Both tests form the `MathUtils` suite.*

---

## 3. Using Test Fixtures for Shared Setup

When multiple tests need to share setup or cleanup code, **test fixtures** come into play. A fixture is a class derived from `testing::Test`.

### 3.1 Defining a Test Fixture

```cpp
class FooTest : public testing::Test {
 protected:
  FooTest() { /* constructor - optionally set up members */ }

  void SetUp() override {
    // Code invoked immediately before each test
  }

  void TearDown() override {
    // Code invoked immediately after each test
  }

  // Member variables accessible in tests
  int shared_resource_;
};
```

### 3.2 Writing Tests Using Fixtures with `TEST_F`

Use `TEST_F` instead of `TEST` to access fixture members:

```cpp
TEST_F(FooTest, TestOne) {
  shared_resource_ = 42;
  EXPECT_EQ(shared_resource_, 42);
}

TEST_F(FooTest, TestTwo) {
  EXPECT_EQ(shared_resource_, 0);  // fresh fixture object
}
```

- Each test gets its own fixture instance, ensuring isolation.

### 3.3 When to Use Fixture Setup vs Constructor

- Use the constructor for simple initialization.
- Use `SetUp()` for operations that may fail or that require virtual dispatch.

Refer to the [FAQ on Constructor vs SetUp](../faq.md#CtorVsSetUp) for details.

---

## 4. Naming Conventions and Best Practices

### 4.1 Naming Test Suites and Tests
- Use PascalCase or CamelCase for names.
- Avoid underscores `_` in test suite and test names to prevent internal name conflicts and reserved usages.

### 4.2 Test Case Isolation
Tests should be independent and not rely on the outcome of others.

### 4.3 Using Multiple Fixtures for Different Suites
If several suites share common logic, rather than repeating code, derive fixtures from a common base class.

```cpp
class BaseTest : public testing::Test {
  // common setup
};

class FooTest : public BaseTest {};
class BarTest : public BaseTest {};

TEST_F(FooTest, DoesSomething) { ... }
TEST_F(BarTest, DoesSomethingElse) { ... }
```

### 4.4 Avoid Mixing Fixtures in the Same Suite
Each test suite must have a unique fixture. Tests within a suite using different fixtures cause runtime errors.

---

## 5. Organizing Test Files

### 5.1 Group Related Tests Together
Put tests for the same module or class in one file.

### 5.2 Header vs Source Files
- Define fixtures and common utilities in header files.
- Implement tests and test logic in `.cc` files.

### 5.3 Test Naming in Files
File names should match the module name for clarity, e.g., `foo_test.cc` for module `foo`.

### 5.4 Example Project Layout
```
/src/foo.h
/src/foo.cc
/tests/foo_test.cc
/tests/bar_test.cc (for other modules)
```

---

## 6. Practical Example

```cpp
#include <gtest/gtest.h>

// Fixture definition
class QueueTest : public ::testing::Test {
 protected:
  QueueTest() {
    // Initialize queues
    q0_.Clear();
    q1_.Enqueue(10);
    q2_.Enqueue(20);
    q2_.Enqueue(30);
  }

  void SetUp() override {}
  void TearDown() override {}

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

// Test using fixture
TEST_F(QueueTest, IsInitiallyEmpty) {
  EXPECT_EQ(q0_.Size(), 0);
}

TEST_F(QueueTest, EnqueueDequeue) {
  int* val = q1_.Dequeue();
  ASSERT_NE(val, nullptr);
  EXPECT_EQ(*val, 10);
  delete val;
}
```

*Each test runs in its own fixture instance; changes don’t bleed between tests.*

---

## 7. Troubleshooting Common Issues

### 7.1 Compiler Errors About Missing Default Constructor
GoogleTest requires default-constructible fixtures because it creates fresh instances for each test. Make sure your fixture has a default constructor.

### 7.2 Mixing Underscores in Test Names
Avoid underscores `_` in test suite and test names to prevent naming collisions and reserved identifier conflicts. See [GoogleTest FAQ](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

### 7.3 Tests Not Running
Verify that you have called `RUN_ALL_TESTS()` in your `main()` and properly registered your tests (using `TEST`, `TEST_F`).

---

## 8. Next Steps & Related Content

- Explore [Using Assertions for Effective Validation](using-assertions) to write robust test checks.
- Learn about [Running and Interpreting Your Tests](running-tests) for test execution insights.
- Advance to [Working with Parameterized and Typed Tests](parameterized-tests) to test over multiple types and values efficiently.
- Review [GoogleTest Primer](../primer.md) for a foundational understanding.

---

## Additional Resources

- [GoogleTest FAQ](../faq.md) — answers common user questions.
- [Testing Reference](../reference/testing.md) — thorough documentation of testing APIs and concepts.
- [Sample Tests on GitHub](https://github.com/google/googletest/tree/main/googletest/samples) — practical examples.

---

## Summary
This guide empowers you to write well-organized tests using GoogleTest by defining test cases, grouping them logically, and leveraging test fixtures for shared data and setup. It covers naming conventions to avoid conflicts, explains fixture lifecycle and usage, and offers troubleshooting hints. Following these patterns leads to maintainable and scalable test suites that enhance your software’s reliability.

---