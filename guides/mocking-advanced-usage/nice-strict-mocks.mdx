---
title: "Nice, Naggy, and Strict Mocks"
description: "Explore the differences and use-cases for NiceMock, NaggyMock, and StrictMock. Understand when to relax mock expectations, when to warn, and when to enforce strict interaction contracts, ensuring you balance test flexibility with precision."
---

# Nice, Naggy, and Strict Mocks

Explore the differences and use-cases for NiceMock, NaggyMock, and StrictMock. Understand when to relax mock expectations, when to warn, and when to enforce strict interaction contracts, ensuring you balance test flexibility with precision.

---

## Overview

GoogleMock provides three standardized mock object wrappers that help you manage how uninteresting calls (calls to mock methods without an explicit expectation) are handled in your tests:

- **NiceMock**: Silences warnings and allows uninteresting calls without complaints.
- **NaggyMock**: Prints warnings on any uninteresting call (default GoogleMock behavior).
- **StrictMock**: Treats any uninteresting call as a test failure.

These wrappers enable you to control the strictness of your mock objects depending on your testing goals.

## Why Use Strictness Wrappers?

When using mock objects, sometimes your test should enforce strict interaction contracts. Other times, you want some leniency for unimportant/mock method calls.

- If you want to focus only on verifying certain calls and don't want noisy warnings for other calls, use `NiceMock`.
- If you want to be notified (but not fail) when unexpected methods are called, use `NaggyMock`.
- If you want to fail the test immediately when a method is called without an expectation, use `StrictMock`.

This gives you flexibility in balancing test maintainability and precision.

## Prerequisites

- A mock class defined using GoogleMock macros (e.g., with `MOCK_METHOD`).
- The mock class should have virtual destructors to ensure proper behavior, especially when using these wrappers.

## Quick Start

You can create wrapped mock objects exactly like unwrapped ones, but with the wrapper template:

```cpp
#include <gmock/gmock.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

TEST(FooTest, Example) {
  // NiceMock: allows uninteresting calls silently.
  NiceMock<MockFoo> nice_foo;
  // NaggyMock: warns on uninteresting calls.
  NaggyMock<MockFoo> naggy_foo;
  // StrictMock: fails on uninteresting calls.
  StrictMock<MockFoo> strict_foo;

  EXPECT_CALL(nice_foo, DoThis());
  EXPECT_CALL(naggy_foo, DoThis());
  EXPECT_CALL(strict_foo, DoThis());

  nice_foo.DoThis();   // Expected call, OK.
  naggy_foo.DoThis();  // Expected call, OK.
  strict_foo.DoThis(); // Expected call, OK.

  // The following calls to methods with NO expected call result in:
  nice_foo.DoThis2();   // No warning or failure.
  naggy_foo.DoThis2();  // Warning printed.
  strict_foo.DoThis2(); // Test failure.
}
```


## Detailed Behavior

| Mock Type    | Uninteresting Call Behavior                 | Test Outcome  | Use Case Example                    |
| ------------ | ------------------------------------------ | -------------| --------------------------------- |
| NiceMock     | Suppresses warnings, allows call silently | Pass          | Tests where unrelated calls OK     |
| NaggyMock    | Warns about uninteresting calls            | Pass          | Default behavior during debugging  |
| StrictMock   | Fails the test on uninteresting calls     | Fail          | Tests enforcing exact interactions |


## How to Use

### Creating Mocks with Wrappers

Simply wrap your existing mock class with one of the wrappers:

```cpp
NiceMock<MockFoo> nice_mock;
NaggyMock<MockFoo> naggy_mock;
StrictMock<MockFoo> strict_mock;
```

Constructors of your mock class are "inherited," so you can pass arguments as usual:

```cpp
NiceMock<MockBar> nice_bar("some", "args");
StrictMock<MockBar> strict_bar(42);
```

### Matching Calls & Expectations

Your `EXPECT_CALL`s and other expectations remain unchanged. The strictness wrappers only affect **uninteresting calls** â€” those with no explicit expectations.

Example:

```cpp
EXPECT_CALL(strict_mock, DoSomething(1));
// This call is expected and must occur.
strict_mock.DoSomething(1);

// Calls without EXPECT_CALL generate different results:
// strict_mock.SomeOtherMethod() => test failure
// naggy_mock.SomeOtherMethod() => warning
// nice_mock.SomeOtherMethod()  => no message
```

### Detecting Strictness at Runtime

GoogleMock provides helper functions to check strictness state:

```cpp
bool is_nice = testing::Mock::IsNice(&mock);
bool is_naggy = testing::Mock::IsNaggy(&mock);
bool is_strict = testing::Mock::IsStrict(&mock);
```

## Best Practices

- Prefer `NiceMock` as the default to reduce test flakiness and maintenance.
- Use `NaggyMock` when developing or debugging tests to be notified about potential uninteresting calls.
- Reserve `StrictMock` for tests where correctness of every interaction matters.
- Avoid nesting wrappers (e.g., `NiceMock<StrictMock<MockFoo>>` is not supported).
- Ensure all mock classes have virtual destructors to avoid issues.

## Common Pitfalls

- Wrappers affect only uninteresting calls, **not** unexpected calls (calls with expectations that don't match). Unexpected calls always cause failures.
- Wrapping mock classes that do not use `MOCK_METHOD` may not work as expected.
- Using wrappers on mock classes without virtual destructors can cause undefined behavior.

## Troubleshooting

<AccordionGroup title="Troubleshooting Strictness Wrapper Issues">
<Accordion title="No warnings when using NaggyMock">Make sure you have set the verbosity level appropriately (default is "warning"). Use `--gmock_verbose=warning` or higher to see warnings from NaggyMock.</Accordion>
<Accordion title="StrictMock does not fail on uninteresting calls">Confirm that your mock class's destructor is virtual. Wrappers rely on this for correct functioning.</Accordion>
<Accordion title="Compilation errors when nesting wrappers">Nesting of NiceMock, NaggyMock, and StrictMock is not supported; refactor your code to use a single wrapper per mock.</Accordion>
<Accordion title="Uninteresting calls still cause test failures">You may be confusing uninteresting calls with unexpected calls. Unexpected calls always cause failures in any mock type.</Accordion>
</AccordionGroup>

## Advanced: Customizing Default Mock Behavior

- By default, mock objects are NaggyMocks.
- The behavior of uninteresting calls can also be influenced globally using the `--gmock_verbose` flag.

## Next Steps & Related Topics

- Dive deeper into [Building & Using Mocks](/guides/mocking-advanced-usage/building-mocks) to learn how to define mock classes and set expectations.
- Learn about [Custom Actions & Matchers](/guides/mocking-advanced-usage/custom-actions-and-matchers) to extend mocking flexibility.
- Explore [Understanding Mocking Concepts](/overview/fundamentals-and-architecture/core-concepts-and-terminology) for foundational knowledge.
- Troubleshoot with [Mocking Issues FAQ](/faq/troubleshooting-and-best-practices/mocking-issues).

## References

- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html#NiceStrictNaggy)
- [gMock Cookbook - Nice, Strict, and Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [GoogleMock API: NiceMock, NaggyMock, StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)

---

### Summary
Explore how to control the strictness of GoogleMock's mock objects with NiceMock, NaggyMock, and StrictMock wrappers. Learn when to silence warnings, when to be notified, and when to enforce strict interaction expectations in your tests.

This guide covers usage, scenarios, best practices, and troubleshooting for each wrapper.

For comprehensive understanding, review related topics on building mocks, custom actions and matchers, and mocking fundamentals.