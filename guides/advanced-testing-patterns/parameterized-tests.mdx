---
title: "Using Parameterized and Typed Tests"
description: "Step-by-step examples on how to write value- and type-parameterized tests to maximize test coverage with less code. Learn to instantiate tests over multiple data sets or types, and how this pattern fits into robust project test suites."
---

# Using Parameterized and Typed Tests

**Master efficient test writing by leveraging GoogleTest's parameterized and typed testing frameworks. This guide offers step-by-step examples that help you write concise, maintainable, and robust tests covering multiple sets of data or types, minimizing code duplication and maximizing coverage.**

---

## Overview of Parameterized and Typed Tests

GoogleTest provides powerful mechanisms to write tests that run repeatedly with different inputs:

- **Value-Parameterized Tests:** Run the same test logic with various values (parameters) without duplicating code.
- **Typed Tests:** Repeat test logic across multiple types, verifying generic code or multiple implementations conform to the same behavior.

These techniques streamline your test suites, allowing for comprehensive coverage while keeping your code clean.

---

## 1. Writing Value-Parameterized Tests

Value-parameterized tests let you test a piece of code against different input values flexibly.

### Workflow

1. **Create a Test Fixture Class:** Derive from `testing::TestWithParam<T>`, where `T` is the parameter type.
2. **Define Test Cases:** Use `TEST_P` macro along with the fixture to write tests accessing the parameter via `GetParam()`.
3. **Instantiate Tests:** Use `INSTANTIATE_TEST_SUITE_P` with a parameter generator (like `Values()`, `Range()`, etc.) to specify the concrete values.

### Step-by-Step Example

```cpp
#include <gtest/gtest.h>

// Step 1: Define the fixture class.
class FooTest : public ::testing::TestWithParam<const char*> {
  // Optional setup/teardown and helper members
};

// Step 2: Define parameterized tests.
TEST_P(FooTest, HandlesInput) {
  const char* param = GetParam();
  EXPECT_TRUE(foo.Blah(param));
}

TEST_P(FooTest, AdditionalCheck) {
  const char* param = GetParam();
  EXPECT_NE(strlen(param), 0);
}

// Step 3: Instantiate tests with parameter values.
INSTANTIATE_TEST_SUITE_P(
    StringTests, FooTest,
    ::testing::Values("meeny", "miny", "moe")
);

// This will run each test in FooTest with each value.
```

### Using Other Generators

GoogleTest provides several built-in parameter generators for convenience:

| Generator                | Description                                         |
|--------------------------|-----------------------------------------------------|
| `Range(begin, end[, step])` | Sequence of values in `[begin, end)` with step size. |
| `Values(v1, v2, ..., vN)`    | A fixed set of explicit values.                      |
| `ValuesIn(container)` or `ValuesIn(begin, end)` | Values from an array or STL container.             |
| `Bool()`                     | Generates `false` and `true`.                        |
| `Combine(g1, g2, ..., gN)`   | Cartesian product of multiple generators.            |

Example combining generators:

```cpp
INSTANTIATE_TEST_SUITE_P(
    ComboTests, FooTest,
    ::testing::Combine(::testing::Values("cat", "dog"), ::testing::Bool())
);
```

### Customizing Test Names

By default, test instances are named with indices. For clearer reports, provide a custom name generator function:

```cpp
INSTANTIATE_TEST_SUITE_P(
    NamedTests, FooTest,
    ::testing::Values("cat", "dog"),
    [](const ::testing::TestParamInfo<FooTest::ParamType>& info) {
      std::string name = info.param;
      // Sanitizes or modifies the name if needed
      return name;
    });
```

---

## 2. Writing Typed Tests

Typed tests allow running the same test logic across different types, useful for testing templates or multiple implementations of an interface.

### Workflow

1. **Define a Fixture Template:** Create a class template derived from `testing::Test` parameterized by a type.
2. **Declare Test Suite with Types:** Use `TYPED_TEST_SUITE` to associate the test suite with a list of types.
3. **Write Typed Tests:** Use `TYPED_TEST` macros to define tests where type parameter is accessed via `TypeParam`.
4. **Run Tests:** GoogleTest runs the tests across all specified types automatically.

### Step-by-Step Example

```cpp
#include <gtest/gtest.h>

// Step 1: Define a typed fixture template.
template <typename T>
class FooTypedTest : public ::testing::Test {
protected:
  T value_{};  // Default constructed value of type T
};

// Step 2: Specify the types to test.
using MyTypes = ::testing::Types<int, double, char>;
TYPED_TEST_SUITE(FooTypedTest, MyTypes);

// Step 3: Write typed tests accessing TypeParam
TYPED_TEST(FooTypedTest, DefaultConstructedIsZero) {
  // TypeParam is the current type being tested.
  EXPECT_EQ(this->value_, TypeParam{});
}

TYPED_TEST(FooTypedTest, PlusOne) {
  TypeParam val = this->value_ + 1;
  EXPECT_GT(val, this->value_);
}
```

### Customizing Type Names

To generate meaningful test names based on type, provide a name generator class:

```cpp
class MyTypeNames {
public:
  template <typename T>
  static std::string GetName(int) {
    if (std::is_same<T, int>::value) return "int";
    if (std::is_same<T, double>::value) return "double";
    if (std::is_same<T, char>::value) return "char";
    return "unknown";
  }
};

TYPED_TEST_SUITE(FooTypedTest, MyTypes, MyTypeNames);
```

---

## 3. Writing Type-Parameterized Tests

Type-parameterized tests extend typed tests by allowing definition and registration of test patterns independent of the types. Types can be specified elsewhere and instantiated multiple times.

### Workflow

1. Define a fixture template.
2. Use `TYPED_TEST_SUITE_P` to declare the test suite.
3. Define tests with `TYPED_TEST_P`.
4. Register tests with `REGISTER_TYPED_TEST_SUITE_P`.
5. Instantiate with `INSTANTIATE_TYPED_TEST_SUITE_P` specifying types.

### Example

```cpp
template <typename T>
class FooTypeParamTest : public ::testing::Test {};

TYPED_TEST_SUITE_P(FooTypeParamTest);

TYPED_TEST_P(FooTypeParamTest, BehavesCorrectly) {
  TypeParam val{};
  EXPECT_EQ(val, TypeParam{});
}

REGISTER_TYPED_TEST_SUITE_P(FooTypeParamTest, BehavesCorrectly);

using MyTypes = ::testing::Types<int, float>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyInstance, FooTypeParamTest, MyTypes);
```

---

## 4. Practical Tips and Best Practices

- Always give unique names to test suite instantiations when using `INSTANTIATE_TEST_SUITE_P` or `INSTANTIATE_TYPED_TEST_SUITE_P`.
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if you define parameterized tests but don't instantiate them immediately.
- Avoid underscores `_` in test and test suite names to prevent conflicts with GoogleTest's macro-generated class names.
- When using complex parameters like tuples, consider using `Combine` to generate Cartesian products of parameter sets.
- For custom parameter types and naming, always provide appropriate `PrintToString` or overload `operator<<` to improve test output readability.
- Named test instances aid in debugging failures by showing parameter values explicitly.

---

## 5. Troubleshooting Common Issues

- **Tests not running after instantiation:** Ensure your `INSTANTIATE_TEST_SUITE_P` macros are placed in source files (not inside functions) and the parameter generator is not empty.

- **Compilation errors with parameterized tests:** Confirm the test fixture derives from `TestWithParam` or appropriately inherits from `Test` and `WithParamInterface`.

- **Duplicate or conflicting test names:** Avoid underscores and ensure unique instantiation names.

- **Dangling references in ConvertGenerator lambdas:** Provide explicit template arguments or use value types rather than references in lambdas to avoid lifetime issues.

- **Test parameter printing issues:** Define `PrintToString` or `PrintTo` overloads for custom types.

---

## Next Steps & Additional Resources

- Explore the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for beginner-friendly introductions.
- Read the [Value-Parameterized Tests section](https://github.com/google/googletest/blob/main/docs/advanced.md#value-parameterized-tests) in the Advanced Topics.
- Learn about [Typed and Type-Parameterized Tests](https://github.com/google/googletest/blob/main/docs/advanced.md#typed-tests).
- Dive into the [Testing Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md) for detailed macro and function documentation.

---

This guide prepares you to leverage parameterized and typed testing in GoogleTest, enabling you to maximize test coverage, reduce code duplication, and enhance the clarity and maintainability of your test suites.

---

## Related Documentation

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Advanced GoogleTest Topics](https://github.com/google/googletest/blob/main/docs/advanced.md)
- [Testing Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md)
- [Writing Your First Unit Test Guide](https://github.com/google/googletest/blob/main/guides/core-testing-workflows/writing-your-first-test.mdx)

---

## Summary of Key Macros & Functions

| Macro / Function               | Purpose                                    |
|-------------------------------|--------------------------------------------|
| `TEST_P`                      | Defines a value-parameterized test          |
| `INSTANTIATE_TEST_SUITE_P`    | Instantiates a value-parameterized test suite |
| `TYPED_TEST_SUITE`            | Associates a fixture template with types to test |
| `TYPED_TEST`                  | Defines a typed test                        |
| `TYPED_TEST_SUITE_P`          | Declares a type-parameterized test suite   |
| `TYPED_TEST_P`                | Defines a type-parameterized test           |
| `REGISTER_TYPED_TEST_SUITE_P` | Registers tests within a type-parameterized suite |
| `INSTANTIATE_TYPED_TEST_SUITE_P` | Instantiates a type-parameterized test suite |

---

## Sample Mermaid Diagram: Parameterized Test Flow

```mermaid
flowchart TD
  subgraph ValueParameterized
    DefineFixture["Define fixture class: TestWithParam<T>"] --> DefineTests["Define tests using TEST_P"]
    DefineTests --> Instantiate["Instantiate suite with INSTANTIATE_TEST_SUITE_P"]
    Instantiate --> RunTests["GoogleTest runs each test per parameter"]
  end

  subgraph TypedTests
    DefineTemplateFixture["Define fixture class template"] --> AssociateTypes["Associate types with TYPED_TEST_SUITE"]
    AssociateTypes --> DefineTypedTests["Write tests using TYPED_TEST"]
    DefineTypedTests --> RunTypedTests["GoogleTest runs each test per type"]
  end

  subgraph TypeParameterizedTests
    DefineTemplateFixture2["Define fixture class template"] --> DeclareTypeParamSuite["Declare suite with TYPED_TEST_SUITE_P"]
    DeclareTypeParamSuite --> DefineTypeParamTests["Define tests with TYPED_TEST_P"]
    DefineTypeParamTests --> RegisterTests["Register tests REGISTER_TYPED_TEST_SUITE_P"]
    RegisterTests --> InstantiateTypeParam["Instantiate with INSTANTIATE_TYPED_TEST_SUITE_P"]
    InstantiateTypeParam --> RunTypeParamTests["Tests run per instantiated type"]
  end

  classDef boxStyle fill:#f9f9f9,stroke:#333,stroke-width:1px;
  class DefineFixture,DefineTests,Instantiate,RunTests,
        DefineTemplateFixture,AssociateTypes,DefineTypedTests,RunTypedTests,
        DefineTemplateFixture2,DeclareTypeParamSuite,DefineTypeParamTests,RegisterTests,
        InstantiateTypeParam,RunTypeParamTests boxStyle;
```
