---
title: "Parameterized and Typed Tests"
description: "Step-by-step guide to writing parameterized and type-parameterized tests in GoogleTest, enabling test case reuse and validation across a range of values and types. Demonstrates macros, patterns, and real-life scenarios."
---

# Parameterized and Typed Tests in GoogleTest

## Overview

Parameterized and typed tests in GoogleTest enable you to write flexible, reusable test logic that runs across multiple values or types without duplicating code. This guide helps you write value-parameterized tests (varying test data) and typed tests (varying test types) step-by-step, empowering you to validate your code comprehensively with less boilerplate.

---

## Value-Parameterized Tests

### Purpose
Use value-parameterized tests to run the same test logic on multiple input values. This avoids repetitive code and ensures your code handles a wide range of inputs correctly.

### Prerequisites
- Familiarity with GoogleTest basics and test fixtures (`TEST_F`)  
- Include `<gtest/gtest.h>` in your test source file

### Expected Outcome
You will have a parameterized test suite where each test runs with every parameter value you specify, with uniquely named test instances.

### Time Estimate
5-15 minutes for initial implementation

### Difficulty
Intermediate

---

### Step-by-Step Instructions

1. **Define a Test Fixture Class**

    Create a test fixture class deriving from `testing::TestWithParam<T>`, where `T` is the parameter type:

    ```cpp
    class FooTest : public ::testing::TestWithParam<const char*> {
      // Optional: fixture setup or helpers
    };
    ```

2. **Define Parameterized Test Cases using `TEST_P`**

    Use `TEST_P` to define tests within this fixture. Inside the test body, call `GetParam()` to access the current parameter value:

    ```cpp
    TEST_P(FooTest, DoesBlah) {
      EXPECT_TRUE(foo.Blah(GetParam()));
    }

    TEST_P(FooTest, HasBlahBlah) {
      // Additional parameterized test logic
    }
    ```

3. **Instantiate the Test Suite with Parameter Values**

    Use `INSTANTIATE_TEST_SUITE_P` to instantiate the tests with your parameters. GoogleTest provides several parameter generators (listed below) to specify values:

    ```cpp
    INSTANTIATE_TEST_SUITE_P(
      InstantiationName, FooTest, testing::Values("meeny", "miny", "moe"));

    // Or using an array with ValuesIn:
    const char* pets[] = {"cat", "dog"};
    INSTANTIATE_TEST_SUITE_P(Pets, FooTest, testing::ValuesIn(pets));
    ```

4. **Run Your Tests**

    When you run tests, GoogleTest will create separate test instances for each parameter. Example test case names:

    ```none
    InstantiationName/FooTest.DoesBlah/0  // using "meeny"
    InstantiationName/FooTest.DoesBlah/1  // using "miny"
    InstantiationName/FooTest.DoesBlah/2  // using "moe"
    ```

5. **(Optional) Custom Test Name Generation**

    Provide a custom name generator function or functor as the last argument to `INSTANTIATE_TEST_SUITE_P` for meaningful parameter names (must be unique, valid identifiers):

    ```cpp
    INSTANTIATE_TEST_SUITE_P(
      CustomNames, FooTest, testing::Values("val1", "val2"),
      [](const testing::TestParamInfo<FooTest::ParamType>& info) {
        return std::string("Param") + std::to_string(info.index);
      });
    ```

---

### Common Parameter Generators

| Generator                      | Description                                                   | Example                         |
|-------------------------------|---------------------------------------------------------------|--------------------------------|
| `Range(begin, end[, step])`    | Produces values from `begin` to `end` (exclusive), stepping by `step` (default 1) | `Range(1, 5)` produces `{1, 2, 3, 4}`|
| `Values(v1, .., vN)`           | Produces given values                                           | `Values(3, 5, 8)`               |
| `ValuesIn(container)`          | Produces all values in a container or iterator range            | `ValuesIn(array)` or `ValuesIn(vec.begin(), vec.end())` |
| `Bool()`                      | Produces `{false, true}` for Boolean tests                      | `Bool()`                       |
| `Combine(g1, g2, ..., gN)`     | Cartesian product of multiple parameter generators              | `Combine(Values(1, 2), Bool())`|

---

### Best Practices & Tips

- Use appropriate parameter types that clearly represent your data.
- Prefer `ValuesIn` for container-based parameters to simplify maintenance.
- Use `Combine` for tests needing multiple parameters in tuple form.
- Define custom parameter names for readability in test results.
- Place the `INSTANTIATE_TEST_SUITE_P` at global or namespace scope, **not** inside functions.

---

### Common Pitfalls

- Forgetting to instantiate a parameterized test suite causes failures in `GoogleTestVerification`.
- Using raw pointers as parameters requires manual lifetime management.
- Parameters must be copyable.
- Generated test names must be unique and contain only ASCII alphanumeric or underscores.

---

## Typed Tests

### Purpose
Typed tests let you run the same test logic across different types without duplication, perfect for testing template classes or interfaces.

### Prerequisites
- Familiarity with class templates and GoogleTest test fixtures
- Include `<gtest/gtest.h>`

### Expected Outcome
You will have test suites that automatically instantiate tests for each specified type with separate test instances identified by type.

### Time Estimate
5-15 minutes

### Difficulty
Intermediate

---

### Step-by-Step Instructions

1. **Define a Fixture Class Template**

    Create a class template derived from `testing::Test`:

    ```cpp
    template <typename T>
    class FooTest : public testing::Test {
     public:
      // Test setup and helper members here
      using List = std::list<T>;
      static T shared_;
      T value_;
    };
    ```

2. **Associate a List of Types with the Test Suite**

    Create a using-alias for a `testing::Types<...>` list specifying the types to test and register them with:

    ```cpp
    using MyTypes = testing::Types<char, int, unsigned int>;
    TYPED_TEST_SUITE(FooTest, MyTypes);
    ```

    You can also provide a custom name generator class for more informative suite names.

3. **Define Typed Tests Using `TYPED_TEST`**

    Write typed test cases using `TYPED_TEST`. Inside the test, use `TypeParam` to refer to the current type and `TestFixture` for fixture class:

    ```cpp
    TYPED_TEST(FooTest, DoesBlah) {
      TypeParam n = this->value_;
      n += TestFixture::shared_;
      typename TestFixture::List values;
      values.push_back(n);
      EXPECT_TRUE(...);
    }

    TYPED_TEST(FooTest, HasPropertyA) {
      // Another test
    }
    ```

4. **Run Your Typed Tests**

    GoogleTest automatically instantiates and runs tests for all types in `MyTypes`.

---

### Type-Parameterized Tests

For scenarios where the list of types might be defined later or in multiple translation units, use Type-Parameterized Tests to declare tests in a header and instantiate them separately.

1. Declare test suite with `TYPED_TEST_SUITE_P`.
2. Define tests with `TYPED_TEST_P`.
3. Register tests using `REGISTER_TYPED_TEST_SUITE_P`.
4. Instantiate with `INSTANTIATE_TYPED_TEST_SUITE_P` specifying types.

Example snippet:

```cpp
template <typename T>
class FooTest : public testing::Test {};

TYPED_TEST_SUITE_P(FooTest);

TYPED_TEST_P(FooTest, DoesBlah) { ... }

REGISTER_TYPED_TEST_SUITE_P(FooTest, DoesBlah);

using MyTypes = testing::Types<char, int, unsigned int>;
INSTANTIATE_TYPED_TEST_SUITE_P(My, FooTest, MyTypes);
```

---

### Tips

- Use type-parameterized tests to build abstract test suites for interfaces.
- Provide custom name generators to improve the naming of instantiated suites.
- Ensure all test patterns are registered before instantiation.

---

## Troubleshooting Common Issues

### Parameterized Tests
- **No Instances Run:** Ensure you have called `INSTANTIATE_TEST_SUITE_P` for every `TEST_P` suite.
- **Duplicate Test Names:** Custom parameter name generators must yield unique names without invalid characters.
- **Type Errors on Parameters:** Parameters must be copyable; raw pointers require careful memory handling.

### Typed Tests
- **Missing `REGISTER_TYPED_TEST_SUITE_P`:** You must register typed test patterns before instantiating.
- **Compilation Errors:** Ensure fixtures and types match usage; type lists are correctly formed.

## Summary
Parameterized and typed tests in GoogleTest significantly reduce code duplication and increase test coverage by running test logic across multiple values or types. Leveraging `TEST_P` and `INSTANTIATE_TEST_SUITE_P` for value parameters, and `TYPED_TEST_SUITE` and `TYPED_TEST` for types, you can write scalable, maintainable test suites.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Testing Reference - TEST_P and INSTANTIATE_TEST_SUITE_P](https://github.com/google/googletest/blob/main/docs/reference/testing.md#TEST_P)
- [Advanced Guide - Value-Parameterized and Typed Tests](https://github.com/google/googletest/blob/main/docs/advanced.md#value-parameterized-tests)
- [GoogleTest GitHub Repository](https://github.com/google/googletest)

---

For hands-on examples, see `samples/sample7_unittest.cc` and `samples/sample8_unittest.cc` in the GoogleTest repository.

---

# Example: A Complete Value-Parameterized Test

```cpp
// 1. Define fixture
class FactorialTest : public ::testing::TestWithParam<int> {};

// 2. Create test
TEST_P(FactorialTest, IsNonNegative) {
  int n = GetParam();
  EXPECT_GE(Factorial(n), 0);
}

// 3. Instantiate
INSTANTIATE_TEST_SUITE_P(PositiveIntegers, FactorialTest, testing::Range(1, 10));
```

# Example: A Complete Typed Test

```cpp
// 1. Define fixture
template <typename T>
class NumericLimitsTest : public ::testing::Test {};

// 2. Register types
using MyTypes = ::testing::Types<int, double, long>;
TYPED_TEST_SUITE(NumericLimitsTest, MyTypes);

// 3. Write typed test
TYPED_TEST(NumericLimitsTest, IsSigned) {
  EXPECT_TRUE(std::numeric_limits<TypeParam>::is_signed);
}
```
