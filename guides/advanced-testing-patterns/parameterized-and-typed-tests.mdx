---
title: "Parameterized and Typed Tests"
description: "Master value-parameterized and type-parameterized tests to reduce code duplication and systematically cover input combinations and data types. This page includes real-world examples and step-by-step implementation guidance."
---

# Parameterized and Typed Tests

Master value-parameterized and type-parameterized tests to reduce code duplication and systematically cover input combinations and data types. This guide includes real-world examples and step-by-step instructions to implement these advanced test patterns using GoogleTest.

---

## 1. Understanding Parameterized and Typed Tests

### 1.1 What Are Parameterized Tests?
Parameterized tests enable you to run the same test logic repeatedly with different input values without duplicating the test code. This is especially useful for systematically covering edge cases and input ranges.

### 1.2 What Are Typed Tests?
Typed tests allow running the same test logic across multiple data types. They reduce duplication when your tests are meant to verify behavior independent of specific types.

### 1.3 Why Use Them?
- **Reduce test code duplication**
- **Increase coverage efficiently**
- **Make maintenance easier and clearer**

---

## 2. Value-Parameterized Tests: Step-by-Step

### Workflow Overview
- **Task Description:** Run tests multiple times with different input values.
- **Prerequisites:** Your test fixture should inherit from `::testing::TestWithParam<T>`, where `T` is your parameter type.
- **Expected Outcome:** One test suite with multiple tests, each executed with different parameter values.
- **Time Estimate:** 10-20 minutes to set up and understand.
- **Difficulty Level:** Intermediate

### 2.1 Define Your Parameterized Test Fixture

```cpp
class FooTest : public ::testing::TestWithParam<int> {
  // Optional: custom setup and members
};
```

### 2.2 Write Tests Using the `TEST_P` Macro

Access your parameter with `GetParam()` inside the test body.

```cpp
TEST_P(FooTest, HandlesValuesCorrectly) {
  int value = GetParam();
  EXPECT_TRUE(value >= 0);
}
```

### 2.3 Instantiate Tests Using `INSTANTIATE_TEST_SUITE_P`

Choose a unique instantiation name and supply a parameter generator.

```cpp
using ::testing::Values;
INSTANTIATE_TEST_SUITE_P(
    PositiveValues, FooTest,
    Values(1, 2, 3, 5, 8));
```

You can use other generators like `Range()`, `ValuesIn()`, `Bool()`, or `Combine()`.

### 2.4 Generators Overview

| Generator    | Description                                            |
|--------------|--------------------------------------------------------|
| `Range(start, end[, step])` | Produces values from `start` to `end - 1`, stepping by `step`.|
| `Values(v1, v2, ..., vN)`    | Enumerates provided values explicitly.                 |
| `ValuesIn(container)` or `ValuesIn(begin, end)` | Uses values from a container or iterator range.        |
| `Bool()`                     | Produces `false` and `true`.                           |
| `Combine(g1, g2, ...)`       | Cartesian product of multiple generators.               |

### 2.5 Customizing Test Names

GoogleTest allows custom names for parameterized tests by providing a name generator function or functor.

```cpp
INSTANTIATE_TEST_SUITE_P(
  CustomNames, FooTest, Values(10, 20),
  [](const testing::TestParamInfo<int>& info) {
    return "Val" + std::to_string(info.param);
  });
```

### 2.6 Real-World Example

```cpp
class MyParamTest : public ::testing::TestWithParam<std::string> {};

TEST_P(MyParamTest, StringNonEmpty) {
  EXPECT_FALSE(GetParam().empty());
}

INSTANTIATE_TEST_SUITE_P(
    StringTests, MyParamTest,
    ValuesIn(std::vector<std::string>{"foo", "bar", "baz"}));
```

After instantiation, tests like `StringTests/MyParamTest.StringNonEmpty/0` will run.

### 2.7 Verification & Running
Make sure your `main()` calls `InitGoogleTest()` and `RUN_ALL_TESTS()` after setting up your test suites.

---

## 3. Typed Tests: Step-by-Step

### Workflow Overview
- **Task Description:** Run the same test for multiple data types.
- **Prerequisites:** Define a test fixture template parameterized by type.
- **Expected Outcome:** A typed test suite runs the same tests with multiple types.
- **Time Estimate:** 10-20 minutes.
- **Difficulty Level:** Intermediate

### 3.1 Define a Typed Test Fixture Template

```cpp
template <typename T>
class MyTypedTest : public ::testing::Test {
 public:
  // Shared setup or members that depend on T can go here.
};
```

### 3.2 Specify the List of Types

Use `::testing::Types` to create a list.

```cpp
using MyTypes = ::testing::Types<int, double, char>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);
```

### 3.3 Write Tests Using `TYPED_TEST`

Use `TypeParam` to refer to the type parameter inside the test.

```cpp
TYPED_TEST(MyTypedTest, DefaultConstructible) {
  TypeParam instance{};
  // Your assertions here.
  EXPECT_TRUE(true);
}
```

### 3.4 Customizing Typed Test Names

Provide a name generator class with a static template `GetName(int)` function.

```cpp
class MyTypeNames {
 public:
  template <typename T>
  static std::string GetName(int) {
    if constexpr (std::is_same_v<T, int>) return "int";
    if constexpr (std::is_same_v<T, double>) return "double";
    if constexpr (std::is_same_v<T, char>) return "char";
  }
};

TYPED_TEST_SUITE(MyTypedTest, MyTypes, MyTypeNames);
```

Names like `MyTypedTest/int` will appear.

### 3.5 Real-World Example

```cpp
template <typename T>
class ContainerTest : public ::testing::Test {
 public:
  using Container = std::vector<T>;
};

using TestTypes = ::testing::Types<int, short>;
TYPED_TEST_SUITE(ContainerTest, TestTypes);

TYPED_TEST(ContainerTest, IsEmptyOnCreation) {
  typename TestFixture::Container c;
  EXPECT_TRUE(c.empty());
}
```

### 3.6 Type-Parameterized Tests (Advanced)

Type-parameterized tests (`TYPED_TEST_SUITE_P`, `TYPED_TEST_P`) allow defining abstract test patterns that can be instantiated multiple times with different types possibly from different translation units. This is more advanced and useful for interface/concept verification.

---

## 4. Combining Parameterized and Typed Tests

You can mix typed tests and value-parameterized tests using a fixture class template, but typically these patterns are used individually.

---

## 5. Practical Tips and Best Practices

- **Choose the right pattern**: Use value-parameterized tests to vary input data values; use typed tests to vary the data types tested.
- **Keep test names unique**: Custom name generators help debugging and filtering.
- **Avoid overly large parameter sets**: Excessive combinations can increase runtime drastically.
- **Use `INSTANTIATE_TEST_SUITE_P` after all test definitions**: GoogleTest runs instantiations during initialization.
- **For parameter types difficult to print, provide custom name generators** to avoid invalid test names.

---

## 6. Common Pitfalls and Troubleshooting

### Problem: Parameterized tests don't run or are skipped
- Verify that `INSTANTIATE_TEST_SUITE_P` is called.
- Ensure `main()` calls `InitGoogleTest()` and `RUN_ALL_TESTS()`.

### Problem: Compile errors with typed tests
- Confirm your test fixture is a template.
- Properly use `TYPED_TEST_SUITE` macro and provide a `Types<...>` list.

### Problem: Duplicate test names when using parameterized tests
- Use custom name generators to ensure unique names.
- Avoid parameters with spaces or special characters.

### Problem: Tests not discovered from separate translation units
- Confirm test fixtures and instantiations are visible to the linker.
- Use proper macros to declare and instantiate tests.

---

## 7. Additional Resources and Next Steps

- [Testing Reference - Parameterized and Typed Tests](https://github.com/google/googletest/blob/main/docs/reference/testing.md#parameterized-and-typed-tests)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Advanced Topics - Parameterized Tests](https://github.com/google/googletest/blob/main/docs/advanced.md#value-parameterized-tests)
- [Examples in googletest repository](https://github.com/google/googletest/tree/main/googletest/test)

Explore further:
- Customizing parameter generators
- Type-parameterized test registration and instantiation
- Combining multiple parameter generators with `Combine()`

---

## 8. Example Summary

```cpp
// Define fixture for parameterized test
class FooTest : public ::testing::TestWithParam<int> {};

// Test using the parameter
TEST_P(FooTest, IsPositive) {
  EXPECT_GT(GetParam(), 0);
}

// Instantiate tests with values
INSTANTIATE_TEST_SUITE_P(
    PositiveValues, FooTest, ::testing::Values(1, 2, 3));

// Typed test fixture template
template <typename T>
class MyTypedTest : public ::testing::Test {};

using MyTypes = ::testing::Types<int, double>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

// Typed test example
TYPED_TEST(MyTypedTest, DefaultConstructible) {
  TypeParam instance{};
  EXPECT_TRUE(true);
}
```

This completes the core understanding and usage instructions for parameterized and typed tests in GoogleTest.