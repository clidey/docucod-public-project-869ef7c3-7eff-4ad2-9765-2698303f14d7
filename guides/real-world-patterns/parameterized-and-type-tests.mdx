---
title: "Parameterized and Type-Parameterized Tests"
description: "Apply value-parameterized and type-parameterized tests to maximize coverage with minimal code duplication. Illustrates setup, patterns, and practical tips."
---

# Parameterized and Type-Parameterized Tests

## Overview

This guide helps you write *value-parameterized* and *type-parameterized* tests in GoogleTest and GoogleMock to maximize code coverage with minimal duplication. These testing techniques let you define reusable test patterns that run against multiple values or multiple types, greatly simplifying thorough verification of template classes, algorithms, and interfaces.

By following this guide, you'll learn how to set up parameterized tests, the common patterns used, and practical tips to avoid pitfalls.

---

## 1. Value-Parameterized Tests

### What They Are

Value-parameterized tests allow you to write tests that run multiple times with different input values. They are ideal when you want to verify your code against a range of inputs without duplicating test code.

### Prerequisites

- Familiarity with basic GoogleTest test fixtures.
- Project configured to use GoogleTest.

### Workflow

1. Define a test fixture class deriving from `testing::TestWithParam<T>`, where `T` is the parameter type.
2. Write test cases using `TEST_P()` macros that use `GetParam()` to access the parameter.
3. Instantiate the test suite for desired values using `INSTANTIATE_TEST_SUITE_P()`.

### Example

```cpp
#include <gtest/gtest.h>

class IsEvenTest : public ::testing::TestWithParam<int> {};

TEST_P(IsEvenTest, ReturnsTrueForEvenNumbers) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers,
                         IsEvenTest,
                         ::testing::Values(2, 4, 6, 8));
```

### Explanation

- The test runs 4 times with values 2, 4, 6, 8.
- Each run invokes `ReturnsTrueForEvenNumbers` with a different value.

### Advanced Tips

- Use `::testing::ValuesIn()` to instantiate from a container or array.
- Combine multiple parameter generators with `::testing::Combine()` for tuple parameters.
- Provide custom test name generators for readable test names.

### Common Pitfalls

- Forgetting to use `TEST_P` instead of `TEST`.
- Omitting the `INSTANTIATE_TEST_SUITE_P` macro, resulting in no tests running.
- Using non-copyable or non-printable parameter types without appropriate support.

---

## 2. Type-Parameterized Tests

### What They Are

Type-parameterized tests allow you to write test patterns abstracted by a type, which can then be instantiated for any number of types. Great for verifying behavior of templates or interfaces generically.

### Workflow

1. Define a test fixture template class parameterized by a type `T`.
2. Declare a type-parameterized test suite with `TYPED_TEST_SUITE_P()`.
3. Define tests using the `TYPED_TEST_P()` macro.
4. Register tests using `REGISTER_TYPED_TEST_SUITE_P()`.
5. Instantiate the suite for actual types using `INSTANTIATE_TYPED_TEST_SUITE_P()`.

### Example

```cpp
#include <gtest/gtest.h>

// 1. Define fixture template
template <typename T>
class StackTest : public ::testing::Test {
 public:
  StackTest() { /* setup */ }
  T value_ = T();
};

// 2. Declare test suite
TYPED_TEST_SUITE_P(StackTest);

// 3. Define tests
TYPED_TEST_P(StackTest, DefaultIsEmpty) {
  TypeParam stack;
  EXPECT_TRUE(stack.empty());
}

TYPED_TEST_P(StackTest, PushAddsElement) {
  TypeParam stack;
  stack.push(this->value_);
  EXPECT_FALSE(stack.empty());
}

// 4. Register tests
REGISTER_TYPED_TEST_SUITE_P(StackTest,
                            DefaultIsEmpty,
                            PushAddsElement);

// 5. Instantiate tests for specific types
using MyTypes = ::testing::Types<std::vector<int>, std::list<int>>;
INSTANTIATE_TYPED_TEST_SUITE_P(My, StackTest, MyTypes);
```

### Explanation

- The test suite runs each test for `std::vector<int>` and `std::list<int>`.
- `TypeParam` represents the current type under test.
- Tests are registered before instantiation allowing reuse.

### Tips

- Use a type name generator class to supply readable test names.
- Register all tests before instantiation.
- Place type-parameterized test definitions in header files for reuse across translation units.

### Common Issues

- Forgetting to register test names causes instantiation errors.
- Attempting to use `TYPED_TEST_SUITE` instead of `TYPED_TEST_SUITE_P` for type-parameterized test patterns.
- Confusing `TypeParam` and fixture template parameter.

---

## 3. Combining Parameterized and Type-Parameterized Tests

You can combine both techniques to write tests that run across multiple types and multiple values, yielding powerful test coverage for generic code.

Example:

```cpp
template <typename T>
class MathTest : public ::testing::TestWithParam<int> {
 public:
  using ValueType = T;
};

TYPED_TEST_SUITE_P(MathTest);

TYPED_TEST_P(MathTest, IsEvenForMultipleValues) {
  int n = this->GetParam();
  TypeParam value = static_cast<TypeParam>(n);
  EXPECT_EQ(static_cast<int>(value) % 2, 0);
}

REGISTER_TYPED_TEST_SUITE_P(MathTest, IsEvenForMultipleValues);

using Types = ::testing::Types<int, long>;
INSTANTIATE_TYPED_TEST_SUITE_P(
    MyMathTests, MathTest, Types,
    ::testing::Values(2, 4, 6, 8));
```

---

## 4. Practical Tips and Best Practices

- Use `GetParam()` only inside tests defined with `TEST_P` or fixtures deriving from `TestWithParam`.
- Always instantiate your parameterized test suites; otherwise tests won't be discovered or run.
- Name parameterized test instantiations meaningfully to ease debugging.
- Prefer simple, readable parameter types (e.g., primitive values or tuples) to reduce complexity.
- For non-copyable parameter types, consider wrapping or using pointers.
- Leverage GoogleTest name generators for meaningful test names.
- Use `SCOPED_TRACE` to emit contextual information within parameterized tests for easier failure diagnosis.

---

## 5. Troubleshooting

### Problem: No Parameterized Tests Run

- Check that you called `INSTANTIATE_TEST_SUITE_P()` for all your parameterized tests.
- Verify that parameterized test definitions use `TEST_P` or `TYPED_TEST_P` appropriately.

### Problem: Ambiguous Template Errors

- Make sure `TYPED_TEST_SUITE_P` and `REGISTER_TYPED_TEST_SUITE_P` are used when defining type-parameterized test patterns.
- Confirm that the test fixture name matches across macros.

### Problem: Parameter Types Not Printable

- Provide a `PrintTo()` override for your type so GoogleTest can generate readable test names and failure messages.

### Problem: Duplicate Test Names in Instantiation

- Avoid conflicting or generic names in `INSTANTIATE_TEST_SUITE_P`.
- Use custom name generators if necessary.

---

## 6. References and Further Reading

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) - Basic testing concepts
- [gMock Cookbook â€” Using Typed and Parameterized Tests](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#value-parameterized-test)
- [GoogleTest Typed and Parameterized Tests Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md#typed-and-parameterized-tests)
- [Mocking and Setting Expectations](https://github.com/google/googletest/blob/main/guides/core-testing-workflows/mocking-and-expectations.md)


---

For a deep dive into mock classes and techniques that empower your parameterized tests, see the [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md) and the [Mocking and Setting Expectations Guide](https://github.com/google/googletest/blob/main/guides/core-testing-workflows/mocking-and-expectations.md).