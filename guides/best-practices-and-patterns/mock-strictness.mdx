---
title: "Controlling Mock Strictness and Behavior"
description: "Understand the differences between NiceMock, NaggyMock, and StrictMock, and discover when and how to use each to control uninteresting call behavior in your test suites for maximum reliability."
---

# Controlling Mock Strictness and Behavior

Understand the differences between `NiceMock`, `NaggyMock`, and `StrictMock`, and discover when and how to use each to control uninteresting call behavior in your test suites for maximum reliability.

---

## Overview

When working with mocks, not all mock method calls are equally important. Calls to mock methods with no explicit expectations (`EXPECT_CALL`) are termed **uninteresting calls**. How your tests react to such calls can be tailored using mock strictness wrappers, primarily `NiceMock`, `NaggyMock`, and `StrictMock`. These wrappers modify the behavior of uninteresting calls to either suppress warnings, emit warnings, or treat them as errors.

This guide explains:

- What uninteresting calls are.
- How `NiceMock`, `NaggyMock`, and `StrictMock` affect test behavior.
- When to prefer each strictness level.
- How to apply these wrappers with mock classes.

---

## What Are Uninteresting Calls?

Uninteresting calls occur when a mock method is called without an associated `EXPECT_CALL`. In other words, the test does not explicitly state any interest in this particular method call.

- **Uninteresting calls are not errors by default**, but they generate warnings to signal potential gaps in test coverage or unexpected interactions.
- If you want to ignore uninteresting calls, or treat them more strictly, you can use wrapper mocks.

---

## Mock Strictness Wrappers

### 1. NiceMock

`NiceMock<T>` is a subclass of your mock type `T` that **silences all warnings** for uninteresting calls.

**Behavior:**

- Suppresses warnings about uninteresting calls.
- Still performs default actions on these calls.
- Does not generate failures if uninteresting calls occur.

**Usage Scenario:**

- When you want cleaner test output and don't care about all interactions.
- To reduce noise from unimportant calls that don't impact test intent.

**Example:**

```cpp
using ::testing::NiceMock;

class MockFoo { 
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (int), ());
};

TEST(MyTest, UsesNiceMock) {
  NiceMock<MockFoo> nice_foo;

  EXPECT_CALL(nice_foo, DoThis());  // Explicit expectation.

  nice_foo.DoThis();  // Matches expectation.
  nice_foo.DoThat(5); // Uninteresting call, no warning emitted.
}
```

---

### 2. NaggyMock

`NaggyMock<T>` is a subclass that behaves like the default mock behavior:

- Emits a **warning** to output for each uninteresting call.
- Does **not** generate test failures.

**Usage Scenario:**

- When you want to be notified about any interactions that your test didn't explicitly expect.
- Suitable during test development or debugging.

**Example:**

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;

EXPECT_CALL(naggy_foo, DoThis());

naggy_foo.DoThis();  // Expected.
naggy_foo.DoThat(10);  // Warning about uninteresting call.
```

---

### 3. StrictMock

`StrictMock<T>` is the strictest wrapper. It treats all uninteresting calls as **test failures**.

**Behavior:**

- Generates **failures** on uninteresting calls.
- Useful to tightly constrain interactions in a test.

**Usage Scenario:**

- When you want to catch any undesired or unexpected mock method invocations immediately.
- Appropriate for tests where any deviation from the defined expectations is a critical error.

**Example:**

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;

EXPECT_CALL(strict_foo, DoThis());

strict_foo.DoThis();  // Expected.
strict_foo.DoThat(10);  // Test fails immediately.
```

---

## How to Use Mock Strictness Wrappers

The wrappers act as subclasses around your mock class and accept the same constructor parameters.

- Create your mock class as usual with `MOCK_METHOD`.
- Wrap the mock instantiation with one of the strictness templates.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Define mock class
class MockFoo {
 public:
  MOCK_METHOD(void, Bar, (), ());
  MOCK_METHOD(int, Baz, (int), ());
};

// Using NiceMock
NiceMock<MockFoo> nice_mock;

// Using NaggyMock
NaggyMock<MockFoo> naggy_mock;

// Using StrictMock
StrictMock<MockFoo> strict_mock;
```

**Constructor Arguments:**

These wrappers forward constructor arguments to the underlying mock class. For example:

```cpp
class MockBar {
 public:
  explicit MockBar(int x) : val_(x) {}
  MOCK_METHOD(void, Foo, (), ());
 private:
  int val_;
};

NiceMock<MockBar> nice_bar(5);  // Calls MockBar(5)
StrictMock<MockBar> strict_bar(10);  // Calls MockBar(10)
```

---

## Important Considerations and Best Practices

- The wrappers affect **only uninteresting calls** (i.e. methods with no expectations). Unexpected calls (calls to methods with expectations but with unmatched arguments or call count violations) always result in test failures regardless of wrapper.

- Currently, the default mock class behaves like `NaggyMock` (i.e., warns on uninteresting calls). This **may change to `NiceMock` in the future** for better usability.

- Use `NiceMock` to reduce noise and improve test maintainability by suppressing warnings on uninteresting calls.

- Use `StrictMock` only when you need to enforce zero tolerance for unexpected interactions, understanding that it may cause tests to be more brittle and require more maintenance.

- Wrappers rely on the mock methods being defined using the `MOCK_METHOD` family of macros **directly in the mock class**. Methods inherited from base classes may not be affected.

- Ensure your mock class has a **virtual destructor** to avoid issues with wrapper behavior during destruction.

- When using wrapper mocks, you can still set expectations and default actions as usual using `EXPECT_CALL` and `ON_CALL`.

- You can nest wrappers **only once** (e.g., `NiceMock<StrictMock<T>>` is *not* supported).

---

## Advanced Usage

### Allowing Leaked Mocks

If your mock objects are deliberately leaked (for example, retained for the life of the program), you can tell gMock not to verify them on destruction by:

```cpp
Mock::AllowLeak(&mock_object);
```

Use with caution, as this disables automatic expectation verification.

---

### Checking Wrapper Type of a Mock Object

You can query if a mock instance is `Nice`, `Naggy`, or `Strict` using static helper methods:

```cpp
EXPECT_TRUE(Mock::IsNice(&mock));
EXPECT_FALSE(Mock::IsNaggy(&mock));
EXPECT_FALSE(Mock::IsStrict(&mock));
```

These can help in debugging or conditional behavior.

---

## Summary

| Wrapper | Uninteresting Call Behavior | Test Impact | Use Case |
|---------|-----------------------------|-------------|----------|
| `NiceMock<T>` | Suppressed warnings | No failures | Cleaner tests; ignore uninteresting calls |
| `NaggyMock<T>` | Print warnings (default) | No failures | Debugging; alert on unexpected calls |
| `StrictMock<T>` | Fail test on uninteresting calls | Fails | Strict verification 

---

## References

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: NiceMock, NaggyMock, StrictMock](../api-reference/mocking-framework/nice-strict-mocks)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)

---

## Tips

<Tip>
Use `NiceMock` for routine tests to reduce noise and increase maintainability.
</Tip>
<Tip>
Reserve `StrictMock` for scenarios demanding strict contract enforcement on API interaction.
</Tip>
<Tip>
To silence warnings on a specific method in a `NaggyMock`, use `EXPECT_CALL(...).Times(AnyNumber())` instead of suppressing output globally.
</Tip>

---

## Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="No effect from NiceMock or StrictMock wrappers">
Ensure the mock methods are defined **directly in the mock class** with `MOCK_METHOD`. Wrapping has no effect on inherited methods.
</Accordion>
<Accordion title="Destructor issues causing warnings">
Confirm your mock class has a **virtual destructor**. Wrappers rely on this for proper cleanup behavior.
</Accordion>
<Accordion title="Unexpected warnings despite using NiceMock">
Check for calls to methods using base class pointers or references that bypass the wrapper.
</Accordion>
<Accordion title="Nesting NiceMock and StrictMock wrappers">
Nesting multiple strictness wrappers is not supported. Use only one wrapper type per mock.
</Accordion>
</AccordionGroup>
