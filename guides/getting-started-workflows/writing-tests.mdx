---
title: "Writing Your First Tests"
description: "A hands-on walkthrough for writing and running your first unit tests with GoogleTest. Explains the basic test structure, assertions, and execution flow, empowering users to validate their code with confidence."
---

# Writing Your First Tests

## Introduction

Welcome to your hands-on guide to writing and running your first unit tests using GoogleTest. This guide empowers you to confidently validate your C++ code by understanding the essential building blocks of tests, assertions, and execution flow.

Whether you’re new to testing or coming from other testing environments, this walkthrough will help you grasp the fundamentals with practical examples.

---

## What This Guide Helps You Accomplish

- Learn how to write simple test functions using GoogleTest macros
- Understand how to group tests logically into test suites
- Use assertions to check your code’s expected behavior
- Run tests and interpret results from the console output

## Prerequisites

- A C++ project configured to include and link against GoogleTest
- Basic understanding of C++ syntax and compilation
- (Optional) Familiarity with building your project using CMake or Bazel

---

## 1. Understanding Test Structure

GoogleTest lets you write tests that are organized into **test suites** and **test cases**.

- **Test Suite:** A named group of related tests, typically corresponding to a class or feature
- **Test Case (Test):** An individual function that performs checks to validate code behavior

### Writing a Simple Test

The most basic unit test uses the `TEST()` macro:

```cpp
TEST(TestSuiteName, TestName) {
  // Test code and assertions go here
}
```

Here, `TestSuiteName` groups tests, and `TestName` uniquely identifies this test.

### Example: Testing a Factorial Function

Suppose you have this simple factorial function:

```cpp
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

Here’s how you test it:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

This defines two test cases within the `FactorialTest` suite.


---

## 2. Using Assertions to Verify Behavior

Assertions check if specific conditions hold true, determining whether a test passes or fails.

### Common Assertion Macros

| Assertion           | Description                                   | Failure Behavior          |
|---------------------|-----------------------------------------------|--------------------------|
| `EXPECT_TRUE(cond)`  | Checks if `cond` is true                       | Nonfatal failure (test continues)
| `ASSERT_TRUE(cond)`  | Checks if `cond` is true                       | Fatal failure (aborts test function)
| `EXPECT_EQ(val1, val2)` | Checks if `val1 == val2`                    | Nonfatal failure
| `ASSERT_EQ(val1, val2)` | Checks if `val1 == val2`                    | Fatal failure

### Differences Between EXPECT and ASSERT

- `EXPECT_` allows the test to continue after failure, allowing multiple issues to be reported
- `ASSERT_` stops the current test immediately upon failure to avoid further undefined behavior

### Example

```cpp
TEST(MathTest, SimpleAssertions) {
  EXPECT_TRUE(1 + 1 == 2);
  ASSERT_EQ(3 * 3, 9);
  EXPECT_FALSE(5 < 3);
}
```


---

## 3. Organizing Multiple Tests Using Test Fixtures

When your tests need shared setup or common data, use a **test fixture**.

### Defining a Test Fixture

Create a class derived from `testing::Test`. Use `protected` members for shared data and override `SetUp()` and `TearDown()` if needed.

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Prepare shared test data
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};
```

### Writing Tests With the Fixture

Use `TEST_F()` macro with the fixture class name to define tests:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* elem = q1_.Dequeue();
  ASSERT_NE(elem, nullptr);
  EXPECT_EQ(*elem, 1);
  delete elem;
}
```

Each test gets a fresh fixture instance, ensuring isolation.

---

## 4. Building and Running Tests

### Build Integration

Make sure your build system includes the necessary GoogleTest headers and links against `gtest` and `gtest_main` (or provides your own main).

For example, in CMake:

```cmake
find_package(GTest REQUIRED)
add_executable(my_test my_test.cc)
target_link_libraries(my_test GTest::gtest_main)
```

### Running Tests

Execute your test binary. GoogleTest will automatically discover and run all tests.

Example console output:

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### What to Do When Tests Fail

- Review the failure message and location
- Check if your code or test expectations are correct
- Use the provided file and line info to navigate directly in your editor

---

## 5. Tips and Best Practices

- Keep tests focused on one behavior per test case
- Use descriptive names for test suites and test cases
- Favor `EXPECT_` over `ASSERT_` unless continuing after failure is unsafe
- Use test fixtures to eliminate duplication
- Write assertions that clearly communicate intent
- Run tests frequently during development

---

## 6. Troubleshooting Common Issues

<Tip>
If your test executable does nothing or crashes immediately:
- Check if you have linked against `gtest_main` or provided your own `main()`
- Ensure `testing::InitGoogleTest(&argc, argv);` is called before `RUN_ALL_TESTS()`
</Tip>

<Note>
If a test reports no tests found:
- Verify you are compiling and linking test files
- Ensure `TEST()` or `TEST_F()` macros are used properly
</Note>

<Warning>
If you see linking errors about missing symbols from GoogleTest:
- Confirm library paths and dependency order in your build system
- Ensure GoogleTest was properly built
</Warning>

---

## 7. Next Steps

- Explore writing tests with [Test Fixtures and Suites](reference/testing.md#TestFixtures)
- Learn about [Advanced Assertions and Matchers](guides/scenarios-patterns/advanced-assertions)
- Discover how to [Create and Use Mocks](guides/getting-started-workflows/basic-mocking)
- Review examples in [GoogleTest Samples](docs/samples.md) for practical scenarios

---

## Example: A Complete Minimal Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run this file, and GoogleTest will execute your defined tests with output describing their results.
