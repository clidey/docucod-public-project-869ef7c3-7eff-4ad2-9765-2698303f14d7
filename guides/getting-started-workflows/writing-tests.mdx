---
title: "Writing & Organizing Your First Tests"
description: "Step-by-step instructions for authoring basic unit tests with GoogleTest, including test case structure, assertions, test fixtures, and test discovery. Also explains project layout and naming conventions for scalable growth."
---

# Writing & Organizing Your First Tests

GoogleTest makes writing basic unit tests straightforward and scales gracefully as your project grows. This guide walks you through authoring your first tests using GoogleTest, focusing on test case structure, assertions, test fixtures, test discovery, and best practices for organizing tests and naming conventions.

---

## 1. Understanding the Workflow

### What This Guide Covers
- Writing simple, focused **unit tests** using GoogleTest's macros
- Structuring tests with meaningful **test suites** and **test cases**
- Making assertions to verify behavior
- Using **test fixtures** for shared setup/teardown
- Organizing your test project layout for maintainability and growth

### Prerequisites
- A working C++ environment with GoogleTest integrated
- Basic familiarity with C++
- Your codebase structured to allow unit testing (functions, classes, interfaces)

### Expected Outcome
You will create a test suite containing multiple tests that run independently and produce clear pass/fail results. You will understand how to use fixtures to reduce repetition, apply assertions effectively, and your project will be organized for scalable test growth.

### Time Estimate
About 30-60 minutes to gain hands-on confidence with writing and organizing your first tests.

### Difficulty Level
Beginner to Intermediate

---

## 2. Step-by-Step Instructions

### Step 1: Create a Test Source File
Create a new C++ file for your tests, for example, `foo_test.cc`.

### Step 2: Include Required Headers
```cpp
#include <gtest/gtest.h>
// Include the header of the code under test//#include "foo.h"
```

### Step 3: Write Simple Tests Using `TEST` Macro
The `TEST` macro defines a test function within a named test suite.

```cpp
TEST(FooTest, ReturnsCorrectFactorial) {
  EXPECT_EQ(Factorial(0), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

- The first argument `FooTest` groups related tests.
- The second argument is the test name.
- Assertions like `EXPECT_EQ` check expected outcomes.

> **Tip:** Avoid underscores in suite/test names for consistency.

### Step 4: Use Assertions to Check Outcomes
GoogleTest provides rich assertion macros:
- `EXPECT_EQ(val1, val2)`: Verifies equality; test continues on failure
- `ASSERT_EQ(val1, val2)`: Same but aborts test on failure
- `EXPECT_TRUE(condition)`, `EXPECT_FALSE(condition)` for boolean checks
- `EXPECT_THROW(statement, exception_type)` for exception testing

Use these to confirm your code behaves as expected.

### Step 5: Add Test Fixtures for Shared Setup
If you have multiple tests that require the same objects/setup, define a fixture:

```cpp
class FooTest : public testing::Test {
 protected:
  void SetUp() override {
    // Common setup code
  }

  void TearDown() override {
    // Cleanup code
  }

  Foo foo_;  // shared object
};

TEST_F(FooTest, DoesThis) {
  EXPECT_TRUE(foo_.DoesThis());
}

TEST_F(FooTest, HandlesEdgeCase) {
  EXPECT_THROW(foo_.DoThat(-1), std::invalid_argument);
}
```

- Use `TEST_F` to associate tests with the fixture.
- Each test runs with a fresh fixture instance.

### Step 6: Name Your Test Files and Classes Consistently
- Source files: `foo_test.cc` for tests related to `foo.cc` or `foo.h`
- Test suite class names end with `Test` (e.g., `FooTest`)
- Test names describe the scenario or behavior tested

### Step 7: Run Your Tests
Compile your test binaries using your build system. Then execute:

```bash
./foo_test
```

GoogleTest will report passes and failures clearly on the console.

---

## 3. Organizing Tests for Growth

### Project Layout Best Practices
Organize tests close to the code they verify:

```
project_root/
  src/
    foo.cc
    foo.h
  tests/
    foo_test.cc
    bar_test.cc
```

This keeps related code and tests manageable.

### Naming Conventions
- Keep test suite and test names descriptive yet succinct.
- Use PascalCase or camelCase for suite and test names; avoid underscores.
- For fixtures, name classes clearly reflecting the test subject.

### Group Test Suites
Group related tests logically:
- By component or module
- By feature
- By public API function

This helps you browse and maintain your test coverage effectively.

---

## 4. Practical Examples

### Example 1: Simple Test Case
```cpp
#include <gtest/gtest.h>

int Add(int a, int b) { return a + b; }

TEST(MathTest, BasicAdd) {
  EXPECT_EQ(Add(1, 2), 3);
  EXPECT_EQ(Add(-1, 1), 0);
}
```

### Example 2: Test Fixture Usage
```cpp
class Calculator {
 public:
  void Clear() { result_ = 0; }
  void Add(int x) { result_ += x; }
  int GetResult() const { return result_; }
 private:
  int result_ = 0;
};

class CalculatorTest : public testing::Test {
 protected:
  Calculator calc;
};

TEST_F(CalculatorTest, AddNumbers) {
  calc.Clear();
  calc.Add(5);
  calc.Add(3);
  EXPECT_EQ(calc.GetResult(), 8);
}

TEST_F(CalculatorTest, InitiallyZero) {
  EXPECT_EQ(calc.GetResult(), 0);
}
```

### Example 3: Running Tests and Output
When tests run, output looks like:

```
[ RUN      ] CalculatorTest.AddNumbers
[       OK ] CalculatorTest.AddNumbers (0 ms)
[ RUN      ] CalculatorTest.InitiallyZero
[       OK ] CalculatorTest.InitiallyZero (0 ms)
[----------] 2 tests from CalculatorTest (1 ms total)
```

Failures will include file and line numbers and descriptive messages.

---

## 5. Advanced Tips & Common Pitfalls

### Tips
- Use `ASSERT_*` macros when continuing without a condition makes no sense (e.g., null pointers).
- Use `EXPECT_*` to allow multiple assertions in one test.
- Write tests that verify **one thing** clearly for better maintainability.
- Use fixtures to reduce duplication and facilitate setup/teardown.
- Name your tests for intent — anyone reading the name should understand what is tested.

### Common Pitfalls
- Forgetting to include `testing::InitGoogleTest()` in `main()` before running tests.
- Writing tests that depend on state from other tests — each test should be isolated.
- Over-constraining expectations (especially in mocks) leading to brittle tests.
- Ignoring the return value of `RUN_ALL_TESTS()` in `main()`.
- Running tests without proper initialization of GoogleTest flags.

---

## 6. Troubleshooting

### Tests Do Not Run or Are Not Discovered
- Ensure test files are compiled and linked correctly into the test binary.
- Confirm you call `RUN_ALL_TESTS()` in your `main()` function.
- Make sure tests are not disabled via `DISABLED_` prefix or command-line filters.

### Assertion Failures
- Read failure messages carefully; they provide argument values and locations.
- Use `--gtest_filter` to isolate failing tests.
- Use `EXPECT_*` judiciously for continued failure reporting.

### Build or Link Errors
- Check that GoogleTest is properly linked.
- Inspect for incompatible C++ standards or missing dependencies.

### Slow or Flaky Tests
- Isolate slow tests and mark accordingly to run separately.
- Avoid shared global state to prevent flaky behavior.

### Further Help
Refer to the official [GoogleTest Primer](primer.md) and [Mocking Cookbook](docs/gmock_cook_book.md) for deeper details.
See the [Common Setup Issues](getting-started/setup-troubleshooting/common-setup-issues.mdx) guide for integration troubleshooting.

---

## 7. Next Steps & Related Documents

- [GoogleTest Primer](primer.md): Deepen your understanding of basics and core concepts.
- [Writing Your First Test](getting-started/first-test-experience/writing-your-first-test.mdx): Hands-on guide to your initial test.
- [Running and Understanding Test Output](getting-started/first-test-experience/running-and-understanding-tests.mdx): Learn how to interpret test results.
- [Mocking Best Practices](guides/mocking-best-practices/basics-of-mocking.md): When and how to use mocks effectively.
- [gMock Cookbook](docs/gmock_cook_book.md): Practical recipes for mocking.

---

## Additional Resources
- GoogleTest GitHub repository: https://github.com/google/googletest
- GoogleTest official documentation hub for examples and API reference

---

<Check>
Remember: each test should be independent, clearly named, and focused on a single behavior.
Use fixtures to share setup and teardown logic.
Start with simple assertions, expand to fixtures as you grow.
</Check>