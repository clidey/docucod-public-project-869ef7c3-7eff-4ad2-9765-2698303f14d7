---
title: "Parameterized and Typed Testing Patterns"
description: "Explains how to use value-parameterized and type-parameterized tests to efficiently test code against different data and types. Includes real-world examples and recommended practices for coverage and maintainability."
---

# Parameterized and Typed Testing Patterns

GoogleTest offers powerful patterns to reduce duplicated code and increase test coverage by running the same test logic with multiple data inputs or types. This guide walks you through using **value-parameterized tests** and **typed tests**, explaining how each works, when to use them, and illustrating real-world examples to maximize your testing efficiency.

---

## Value-Parameterized Tests

### What Are Value-Parameterized Tests?
Value-parameterized tests allow you to write one test logic that runs multiple times with different input values. This avoids the tedious task of writing near-identical tests for each data variant.

### When to Use
Use value-parameterized tests when you want to validate your code behavior over a diverse set of data values, such as testing a function with various inputs, or when behavior depends on runtime flags or configurations.

### Quick Workflow

1. **Define a test fixture class** derived from `testing::TestWithParam<T>`, where `T` is the type of parameter you'll vary.
2. **Write tests with `TEST_P` macro**, accessing the parameter via `GetParam()`.
3. **Instantiate the test suite** with different parameter generators using `INSTANTIATE_TEST_SUITE_P`.

### Step-by-Step Example
```cpp
// 1. Define the fixture class
class FooTest : public ::testing::TestWithParam<int> {
  // Setup/resources shared by all tests here
};

// 2. Write parameterized tests
TEST_P(FooTest, HandlesPositiveNumbers) {
  int value = GetParam();
  EXPECT_GT(value, 0);
  // ... your test logic ...
}

TEST_P(FooTest, CanBeDividedByTwo) {
  int value = GetParam();
  EXPECT_EQ(value % 2, 0);
  // ... your test logic ...
}

// 3. Instantiate the tests with parameter values
INSTANTIATE_TEST_SUITE_P(
  EvenNumbers,  // instantiation name
  FooTest,     // test suite name
  ::testing::Values(2, 4, 6, 8));  // Parameters
```

### Parameter Generators
GoogleTest provides a set of built-in parameter generators in the `testing` namespace:

- `Range(begin, end[, step])` – numeric ranges (excludes `end`)
- `Values(v1, v2, ..., vN)` – explicit list of values
- `ValuesIn(container)` – values from a container or iterator range
- `Bool()` – generates `false` and `true`
- `Combine(g1, g2, ..., gN)` – cartesian product of multiple generators
- `ConvertGenerator<T>(generator, converter)` – transforms generated values

### Useful Tips
- Always provide a **unique instantiation name** to distinguish test groups.
- You can instantiate the same test suite multiple times with different parameter sets.
- If you omit instantiations, any `TEST_P` tests will cause a failure unless you use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.
- Use custom *name generators* in `INSTANTIATE_TEST_SUITE_P` to create readable test names based on parameters.

### Customizing Test Names
By default, test names include indices for parameters. For clarity, supply a function or functor:

```cpp
INSTANTIATE_TEST_SUITE_P(
  NamedInstantiation, FooTest, ::testing::Values(1, 2, 3),
  [](const ::testing::TestParamInfo<int>& info) {
    return "Value" + std::to_string(info.param);
  });
```

### Abstract Value-Parameterized Tests
Place your test fixture and `TEST_P` definitions in headers/source files meant for reuse. Other components can instantiate tests with their parameters later.

<hr />

## Typed Tests

### What Are Typed Tests?
Typed tests run the same test logic for a list of types rather than values. This is ideal when verifying your code's template logic against multiple types.

### When to Use
Use typed tests:
- To test template classes or functions against many types in one test suite.
- When the behavior should be consistent across different types.

### Workflow

1. **Define a class template fixture** that derives from `testing::Test`.
2. **Define a type list (`::testing::Types<...>`) with types to test against**.
3. **Associate the fixture and types with `TYPED_TEST_SUITE` macro.**
4. **Write tests with `TYPED_TEST` macro**, using the special `TypeParam` identifier.

### Step-by-Step Example
```cpp
// 1. Define a template fixture
template <typename T>
class FooTypedTest : public ::testing::Test {
 public:
  // Optionally, shared setup or members
  T value_;
};

// 2. Create a type list
using MyTypes = ::testing::Types<int, float, double>;

// 3. Associate fixture and types
TYPED_TEST_SUITE(FooTypedTest, MyTypes);

// 4. Write your typed tests
TYPED_TEST(FooTypedTest, IsDefaultInitialized) {
  EXPECT_EQ(this->value_, TypeParam{});
}

TYPED_TEST(FooTypedTest, SupportsAddition) {
  TypeParam a = 3;
  TypeParam b = 4;
  EXPECT_EQ(a + b, 7);
}
```

### Advanced: Type-Parameterized Tests
These are similar to typed tests, but you can define abstract test suites to be instantiated with types later (possibly in multiple translation units). They require the `TYPED_TEST_SUITE_P`, `TYPED_TEST_P`, `REGISTER_TYPED_TEST_SUITE_P` macros and explicit instantiation.

<hr />

## Best Practices and Common Patterns

- **Use value-parameterized tests for data-driven testing:** when the varying input is *data*.
- **Use typed tests for type-parameterized testing:** when the varying input is *types*.
- **Combine multiple value generators with `Combine()`** to cover Cartesian product of parameters.
- **Name your tests thoughtfully,** especially with multiple parameters or types, to keep reports readable.
- **Keep fixtures simple and focused** to improve test maintainability.
- **For large parameter sets,** consider generating parameters dynamically from containers.
- **Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`** cautiously to suppress errors when tests are intended to be instantiated elsewhere.

## Troubleshooting

- **No tests run for a `TEST_P` suite:** Ensure you call `INSTANTIATE_TEST_SUITE_P` or mark with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` if it's meant to be instantiated externally.
- **Duplicate parameter names error:** Custom name generator must return unique, non-empty valid C++ identifiers without spaces or special characters.
- **Test parameter names are unreadable:** Provide a custom name generator function.
- **Compilation errors with typed tests:** Make sure the fixture is a class template derived from `testing::Test`.
- **Linking errors:** When using type-parameterized tests with separate instantiations, be sure to instantiate the test suite only once per type list.

## Real-World Scenario

Imagine you are testing a sorting function template that must work on integers, floats, and custom comparable objects. Instead of writing separate tests for each, you define a typed test suite with each type in a type list. Then for each type, the same tests verify sorting behavior, improving coverage and reducing duplication.

Similarly, when testing an algorithm that should perform correctly over a range of inputs, you use value-parameterized tests with generators like `Range()` or `ValuesIn()` to automatically create multiple input scenarios.

---

## Related Links and Further Reading

- [Value-Parameterized Tests](../advanced.md#value-parameterized-tests)
- [Typed Tests and Type-Parameterized Tests](../advanced.md#typed-tests)
- [INSTANTIATE_TEST_SUITE_P Reference](../reference/testing.md#INSTANTIATE_TEST_SUITE_P)
- [TYPED_TEST_SUITE and TYPED_TEST Reference](../reference/testing.md#TYPED_TEST_SUITE)
- [Custom Test Name Generators](../advanced.md#specifying-names-for-value-parameterized-test-parameters)

---

For comprehensive examples, see GoogleTest sample files [sample7_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample7_unittest.cc) (param tests) and [sample6_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample6_unittest.cc) (typed tests).


---

##### Source
Googletest `include/gtest/gtest-param-test.h`, `include/gtest/gtest-typed-test.h`,
`docs/advanced.md` (Value-Parameterized and Typed Tests sections).
