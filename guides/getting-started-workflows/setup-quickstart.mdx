---
title: "Setting Up GoogleTest: Quickstart"
description: "Learn how to set up GoogleTest in your C++ project using CMake or Bazel, integrate it with your build system, and create your first running test. Walks through essential installation steps with practical examples for various environments."
---

# Setting Up GoogleTest: Quickstart

## Overview

This guide helps you quickly set up GoogleTest in your C++ project using either CMake or Bazel as your build system. You will learn how to integrate GoogleTest and GoogleMock into your build workflow, add essential configurations, and create a simple, runnable test program. By following this guide, you will establish a working test environment confidently and efficiently.

---

## Prerequisites

- A C++17-compliant compiler installed on your system.
- Basic familiarity with either CMake or Bazel build systems.
- Git installed if you're cloning the repository.
- Internet connectivity to download GoogleTest sources if not already available.

---

## What You Will Achieve

- Clone or download GoogleTest and GoogleMock sources.
- Build GoogleTest libraries standalone or incorporate them into your project.
- Use `gtest_main` or `gmock_main` libraries to simplify your test executable.
- Integrate GoogleTest with CMake or Bazel build configurations.
- Write and run your first test using the GoogleTest framework.

---

# Step-by-Step Instructions

### 1. Cloning and Preparing GoogleTest

Start by cloning the GoogleTest repository or downloading a stable release.

```bash
# Clone the repository
 git clone https://github.com/google/googletest.git
 cd googletest
```

### 2. Build GoogleTest and GoogleMock (Standalone) Using CMake

1. Create a build directory inside the repository:

    ```bash
    mkdir build && cd build
    ```

2. Generate build scripts with default options (includes GoogleMock by default):

    ```bash
    cmake ..
    ```

3. Build the libraries:

    ```bash
    make
    ```

4. (Optional) Install libraries system-wide (requires administrator privileges):

    ```bash
    sudo make install
    ```

> **Tip:** To build only GoogleTest without GoogleMock, run `cmake .. -DBUILD_GMOCK=OFF` instead.

### 3. Integrate GoogleTest into Your CMake Project

If you have an existing CMake project, you can add GoogleTest as a dependency directly.

Add the following to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)

set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Windows runtime matching
FetchContent_MakeAvailable(googletest)

add_executable(your_tests your_test_file.cpp)
target_link_libraries(your_tests gtest_main)
add_test(NAME your_tests COMMAND your_tests)
```

- Replace `your_tests` and `your_test_file.cpp` with your executable and source file names.
- This method downloads and builds GoogleTest automatically with your project.

### 4. Use GoogleMock if Needed

To enable GoogleMock features, link to `gmock_main` instead:

```cmake
target_link_libraries(your_tests gmock_main)
```

This will include GoogleMock's main function and initialize GoogleMock along with GoogleTest.

### 5. Writing Your First Test

Create a simple test file, `example_test.cpp`, with the following content:

```cpp
#include "gtest/gtest.h"

// Sample function to test
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Test suite: FactorialTest
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### 6. Build and Run Your Tests

Build your test executable with CMake:

```bash
mkdir -p build && cd build
cmake ..
make
./your_tests  # Replace 'your_tests' with your executable name
```

You should see output similar to:

```
Running main() from gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### 7. Using Bazel to Set Up GoogleTest

If using Bazel, add GoogleTest as a dependency in your `WORKSPACE` or `BUILD` file:

```bazel
# WORKSPACE
http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/release-1.17.0.zip",
    strip_prefix = "googletest-release-1.17.0",
)
```

```bazel
# BUILD
cc_test(
    name = "example_test",
    srcs = ["example_test.cpp"],
    deps = ["@com_google_googletest//googletest:main"],
)
```

Run your tests with:

```bash
bazel test //:example_test
```

---

# Best Practices & Tips

- **Use `gtest_main` / `gmock_main` to avoid writing your own `main()`.** These auto-provide `main()` and initialize GoogleTest or GoogleMock properly.
- **Isolate tests with test suites** to organize your tests logically.
- **Leverage CMake FetchContent for easy integration** and keep dependencies up to date.
- **Confirm C++17 compliance** since GoogleTest requires at least C++17.
- **On Windows, set `gtest_force_shared_crt` to ON in CMake** to avoid runtime conflicts.

---

# Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting GoogleTest Setup">
<Accordion title="Build Errors Related to Linker or Compiler">
- Ensure you are using a compiler that supports C++17.
- For CMake, verify that CMake version is 3.14 or newer.
- On Windows, verify that runtime library settings between GoogleTest and your project match. Use `-Dgtest_force_shared_crt=ON`.
</Accordion>
<Accordion title="Tests Not Running or Executable Missing main()">
- Make sure you link with `gtest_main` or `gmock_main` unless you provide your own `main()`.
- Verify that `testing::InitGoogleTest()` or `testing::InitGoogleMock()` is called before `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="GoogleMock Initialization Problems">
- Initialize GoogleMock by calling `testing::InitGoogleMock()` which also initializes GoogleTest.
- If using embedded or Arduino platforms, special entry points like `setup()` and `loop()` may be necessary.
</Accordion>
</AccordionGroup>

---

# Next Steps

- Write more comprehensive tests exploring assertions and fixtures: [Writing Your First Test](../writing-first-test.md)
- Learn how to interpret and run tests: [Running and Interpreting Test Results](../running-interpreting-tests.md)
- Explore mock objects for isolating dependencies: [Isolating Dependencies with Google Mock](../../advanced-testing-patterns/using-gmock.md)
- Configure continuous integration systems to automate testing: [Integrating with Continuous Integration Systems](../../integration-and-optimization/ci-integration-examples.md)

---

# References

- Repository: [GoogleTest on GitHub](https://github.com/google/googletest)
- Official docs link: [GoogleTest Quickstart](https://google.github.io/googletest/quickstart.html)

---

This quickstart guide simplifies your initial setup journey with GoogleTest, easing you into writing robust, maintainable C++ tests with minimal delay. Follow the steps carefully, and your C++ projects will gain a powerful unit testing foundation.
