---
title: "Setup and Quickstart"
description: "Learn how to set up GoogleTest and GoogleMock in your C++ project using common build systems (CMake, Bazel). This guide covers installation, basic configuration, and project integration, ensuring you can start writing tests without friction."
---

# Setup and Quickstart

## Overview

This guide walks you through setting up GoogleTest and GoogleMock in your C++ project using popular build systems like CMake and Bazel. By following these instructions, you will configure your environment to build, link, and run tests seamlessly, enabling you to start writing effective tests without friction.

---

## Prerequisites

Before you begin, ensure you have:

- A C++17 compatible compiler and toolchain.
- CMake or Bazel installed (depending on your build system preference).
- Basic familiarity with your project's build system.
- The GoogleTest repository cloned or downloaded.

If you need help with environment setup, see [Prerequisites & Supported Platforms](/getting_started/requirements_installation/prerequisites_supported_platforms).

---

## What You Will Achieve

By completing this guide, you will:

- Integrate GoogleTest and GoogleMock into your build system.
- Configure your project to find the necessary headers and libraries.
- Set up the test executable entry point.
- Compile and run your first test suite.

---

## Estimated Time

20-30 minutes for a typical setup, depending on your familiarity.

---

## Difficulty

Beginner to Intermediate.

---

## Step-by-Step Setup Instructions

### 1. Cloning and Preparing GoogleTest

1. Clone GoogleTest repository (which includes GoogleMock) with a stable release tag for stability:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
```

2. Navigate into the repository:

```bash
cd googletest
```

---

### 2. Building with CMake (Standalone)

If you want to build GoogleTest and GoogleMock as standalone:

1. Create a build directory:

```bash
mkdir build
cd build
```

2. Generate build files with CMake:

```bash
cmake ..
```

> **Tip:** To build only GoogleTest (without GoogleMock), add the option `-DBUILD_GMOCK=OFF`.

3. Build the libraries and tests:

```bash
make
```

4. Optionally install GoogleTest to your system locations (typically `/usr/local`):

```bash
sudo make install
```

---

### 3. Integrating Into Your CMake Project

Instead of standalone build, most users integrate GoogleTest into their project’s build.

1. Add GoogleTest as a subdirectory in your CMakeLists.txt:

```cmake
add_subdirectory(path/to/googletest)
```

2. Link your test executable target against GoogleTest and GoogleMock libraries:

```cmake
target_link_libraries(your_test_target gtest gmock)
```

3. Make sure to enable C++17 in your project:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

4. Use the provided main function by linking your test executable with `gtest_main` or `gmock_main`:

```cmake
target_link_libraries(your_test_target gtest_main gmock_main)
```

This eliminates the need to write your own `main()` function.

---

### 4. Building with Bazel

To use GoogleTest with Bazel:

1. Add GoogleTest as an external dependency in your `WORKSPACE` file.
2. Define test targets using `cc_test` rule referencing GoogleTest and GoogleMock.

Refer to Bazel-specific documentation for exact syntax and setup.

---

### 5. Writing a Minimal `main()` Function (If Not Using Provided Mains)

If you choose not to link with provided main libraries, define your own entry point:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes the framework and runs all tests.

---

### 6. Validate Your Setup by Running Tests

After building your test executable:

```bash
./your_test_executable
```

You should see output indicating the tests ran, including summaries of passed or failed checks.

---

## Best Practices

- Always use the `InitGoogleTest` (or `InitGoogleMock` if using mocks) function before running any tests to initialize internal state and parse command line flags.
- Link against `gtest_main` (and `gmock_main` for mocks) libraries to avoid manually writing the test `main()` unless you need custom behavior.
- Keep your GoogleTest and GoogleMock versions consistent with your source repository or package versions.
- Use C++17 or higher compiler standards for compatibility.

---

## Troubleshooting Tips

- **Missing Headers or Link Errors:** Verify include paths and linked libraries are correctly set in your build system.
- **Build Failures on Older Compilers:** Ensure your compiler supports C++17 features.
- **Tests Not Running:** Confirm that the test executable is linked with the main libraries and `InitGoogleTest()` is called.
- **Multiple `main()` Definitions Conflicts:** Avoid linking both `gtest_main` and defining your own `main()`.

For detailed troubleshooting, visit [Quick Validation & Troubleshooting](/getting_started/configuration_initial_success/quick_validation_troubleshooting).

---

## What’s Next?

- After completing setup, proceed to [Writing Your First Tests](/guides/getting-started-workflows/writing-tests) to learn how to write effective test cases.
- Explore [Creating and Using Mocks](/guides/getting-started-workflows/basic-mocking) to integrate mock objects in your tests.
- Refer to the [Primer](/docs/primer.md) for foundational concepts and practical examples.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)
- [API Reference - Test Fixtures and Suites](https://github.com/google/googletest/blob/main/api_reference/core_testing_api/test_fixtures_and_suites.md)

---

## Summary

GoogleTest and GoogleMock setup involves fetching the source code, building the libraries, and integrating them into your project's build system with CMake or Bazel. Linking your test executables against the provided main libraries simplifies running tests, ensuring you can quickly start writing and executing C++ tests efficiently. Following this guide guarantees your environment is ready for robust test development.


---