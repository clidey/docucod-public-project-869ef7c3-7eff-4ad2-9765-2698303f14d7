---
title: "Test Discovery and Execution"
description: "Explore how GoogleTest automatically discovers your tests, and learn the recommended patterns for organizing and executing them. This guide covers running individual tests, test filtering, execution order, and leveraging built-in CLI options for faster feedback cycles."
---

# Test Discovery and Execution

## Introduction

GoogleTest simplifies your workflow by automatically discovering and executing tests without requiring manual registration. This guide helps you understand how GoogleTest identifies tests, organizes their execution, and how you can control test runs through filtering, execution order, and command-line options. Mastering these capabilities accelerates feedback loops and enables focused debugging.

---

## 1. How GoogleTest Discovers Tests

GoogleTest automatically detects all tests defined using the `TEST()`, `TEST_F()`, `TEST_P()`, and typed test macros in your linked binaries. This discovery eliminates the need for explicit test registration. Each test case is linked with its suite, and the framework maintains metadata to drive execution.

- Tests are registered during static initialization.
- Test suites group related test cases, mirroring your code structure.
- Tests appear in the order they are linked but can be shuffled or selectively run.

**What this means for you:**
- Simply define tests as usual; GoogleTest picks them up.
- Avoid manual bookkeeping of test lists.

---

## 2. Running Tests: The Basics

GoogleTest provides a single entry point for test execution:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` parses command-line flags for runtime control.
- `RUN_ALL_TESTS()` executes all discovered tests and returns `0` on success.

### Expected Outcomes
- Console output showing test progress and results.
- Exit status reflects success or failure of tests.

---

## 3. Selecting Which Tests to Run

You rarely want to run every test every time. GoogleTest allows precise control over which tests to run using test name filters.

### Using `--gtest_filter`

- Tests are filtered by a comma/colon-separated glob pattern against their full names: `TestSuiteName.TestName`.
- Positive patterns specify tests to run.
- An optional `-` separates negative patterns specifying tests to exclude.

**Examples:**

```bash
# Run all tests in FactorialTest suite
./test_executable --gtest_filter=FactorialTest.*

# Run tests containing 'Zero' or 'Positive'
./test_executable --gtest_filter=*Zero*:*Positive*

# Run all except death tests
./test_executable --gtest_filter=-*DeathTest.*

# Run all tests in FooTest excluding FooTest.Bar
./test_executable --gtest_filter=FooTest.*-FooTest.Bar
```

### Notes
- Wildcards `*` and `?` are supported.
- The filter is applied to the test's full name.
- Disabled tests are excluded unless overridden by `--gtest_also_run_disabled_tests`.

---

## 4. Controlling Test Execution Order

Test order can impact debugging and test reliability.

### Default Behavior
- Tests run in the order of registration/linking, which can be arbitrary.

### Running Tests in Random Order

Use the flag:

```
--gtest_shuffle
```

- Randomizes test execution order.
- Helps detect unintended dependencies between tests.
- Use `--gtest_random_seed=SEED` to reproduce a specific shuffle order.

### Repeating Tests

For flaky tests, use:

```
--gtest_repeat=N
```

- Runs all selected tests N times.
- Use `-1` for infinite repeats.
- Combine with `--gtest_break_on_failure` to halt on first failure.

---

## 5. Running Individual Tests

Beyond filtering, GoogleTest lets you list available tests and run individual ones.

### List all tests

```
./test_executable --gtest_list_tests
```

- Outputs all test suites and their contained test names.
- Useful to discover test names for filtering.

### Running a specific test

Apply `--gtest_filter` with the exact full test name:

```
./test_executable --gtest_filter=TestSuiteName.TestName
```

---

## 6. Handling Disabled Tests

Sometimes tests are temporarily disabled by prefixing their suite or test names with `DISABLED_`.

- Disabled tests do not run by default.
- To run disabled tests, add:

```
--gtest_also_run_disabled_tests
```

- Combine with filtering to run specific disabled tests.

---

## 7. Advanced Execution Controls

### Stop on First Failure

To improve iteration speed during development:

```
--gtest_fail_fast
```

- Stops the test run immediately upon first failure.

### Test Sharding for Parallel Execution

GoogleTest supports sharding tests across multiple machines or processes.

- Set the following environment variables:
  - `GTEST_TOTAL_SHARDS` = total number of shards
  - `GTEST_SHARD_INDEX` = index of current shard (0-based)

- The test runner will split tests evenly, running only a subset on each shard.

---

## 8. Using GoogleTest Flags Summary

| Flag                              | Purpose                                            |
|----------------------------------|---------------------------------------------------|
| `--gtest_list_tests`              | List all test suites and tests                    |
| `--gtest_filter`                  | Select tests to run using filtering               |
| `--gtest_also_run_disabled_tests`| Include disabled tests                             |
| `--gtest_shuffle`                 | Run tests in random order                          |
| `--gtest_random_seed=SEED`        | Specify seed for shuffling                         |
| `--gtest_repeat=N`                 | Repeat tests N times                               |
| `--gtest_fail_fast`               | Stop on first failure                              |
| `--gtest_break_on_failure`        | Break into debugger on failure                     |
| `--gtest_output=xml[:PATH]`       | Output detailed XML report                         |

---

## 9. Verifying Test Execution

After running tests, verify:

- The console output summarizes how many tests ran, passed, and failed.
- The exit code of the test executable: `0` indicates all tests passed.
- XML or JSON reports if enabled, for detailed post-run analysis.

---

## Troubleshooting Common Issues

### Tests Not Running

- Ensure tests are linked properly and not excluded by filters.
- Verify that `RUN_ALL_TESTS()` is called in `main()`.

### Filter Matches No Tests

- Review test names using `--gtest_list_tests`.
- Confirm correct filter syntax.

### Tests Always Run in Same Order

- Use `--gtest_shuffle` to randomize test execution.

### Disabled Tests Not Running

- Use the flag `--gtest_also_run_disabled_tests` to include them.

---

## Best Practices

- Organize tests into logical, named test suites reflecting the code structure.
- Use consistent naming conventions without underscores for suites and tests.
- Use filtering to focus runs during iterative development.
- Shuffle tests regularly to detect hidden dependencies.
- Use test repetition and fail-fast modes to isolate flaky tests swiftly.

---

## Example: Running Specific Tests with Repeat and Shuffle

```bash
# Run only FactorialTest tests containing 'Zero', repeat 10 times, and shuffle
./test_executable --gtest_filter=FactorialTest.*Zero* --gtest_repeat=10 --gtest_shuffle
```

This helps validate correctness with varied execution orders and multiple iterations.

---

## Additional Resources

- [GoogleTest Primer](primer.md) — foundational overview and writing tests
- [Running and Validating Tests](getting-started/first-steps/running-tests.md) — guide focused on test program execution
- [Quick Installation Check](getting-started/troubleshooting-and-validation/quick-validation.md) — ensures proper test environment setup
- [Advanced Guide](advanced.md) — for more intricate test execution controls

---

## Summary

GoogleTest automates test discovery, eliminating manual registration. Through a flexible filtering system and command-line flags, you control which tests to run, in what order, and how often. This guide empowers you to efficiently manage test executions for effective debugging and continuous validation.
