---
title: "Writing Your First Test"
description: "A hands-on walkthrough of creating, building, and running your first test case using GoogleTest. This page introduces the TEST macro, the structure of a test file, and explains common test outputs. Perfect for users unfamiliar with unit testing in C++."
---

# Writing Your First Test

Welcome to your first hands-on experience with GoogleTest! This guide takes you step-by-step through creating, building, and running a simple test case in C++. Designed specifically for those new to unit testing and GoogleTest, it teaches you how to use the fundamental `TEST` macro, how to structure test files, and how to interpret common test outputs.

---

## 1. What You Will Achieve

- **Create a first test case using the `TEST` macro.**
- **Understand the basic structure of a test file.**
- **Build and run your test executable successfully.**
- **Learn how to interpret standard test results and outputs.**

## 2. Prerequisites

Before you begin, ensure the following:

- You have a C++17-compliant compiler installed.
- GoogleTest has been integrated into your project setup (refer to the [Quickstart with CMake](../quickstart-cmake.md) or [Setup and Configuration](../guides/getting-started-testing/setup-and-configuration.md) for instructions).
- Basic familiarity with C++ syntax and compiling programs.
- Your project includes the GoogleTest header `<gtest/gtest.h>`.

<Tip>
If you haven't integrated GoogleTest yet, start with the [Getting Started: Integration & Your First Test](../overview/quick-start-integration/integration-and-first-test.md) guide for detailed setup.
</Tip>

## 3. Understanding the Basic Test Structure

A test in GoogleTest is created using the `TEST()` macro, which takes two identifiers:

- **Test Suite Name:** Groups related tests.
- **Test Name:** Identifies the individual test within the suite.

```cpp
TEST(TestSuiteName, TestName) {
  // your test code here
}
```

Each call to `TEST` defines a new test case. GoogleTest automatically registers these and will run them when executing your test binary.

### Key Points
- Test suite and test names must be valid C++ identifiers and **cannot contain underscores (`_`)**.
- Each test runs independently to promote isolation and avoid interdependencies.

## 4. Writing Your First Test Case

Let's write a simple test that checks basic arithmetic using GoogleTest assertions.

```cpp
#include <gtest/gtest.h>

// A very simple test to check addition
TEST(ArithmeticTest, SimpleAddition) {
  EXPECT_EQ(2 + 2, 4);  // Expect 2 + 2 to equal 4
}
```

### Explanation
- `ArithmeticTest` is the test suite name grouping related arithmetic tests.
- `SimpleAddition` is the individual test checking one condition.
- `EXPECT_EQ` asserts that the two values are equal; if not, the test fails but continues running.

## 5. Building Your Test Executable

### Typical Build Steps Using CMake

If you are using CMake, your `CMakeLists.txt` should include the following snippet to build and link your test with GoogleTest:

```cmake
add_executable(my_first_test my_first_test.cc)
target_link_libraries(my_first_test GTest::gtest_main)
include(GoogleTest)
gtest_discover_tests(my_first_test)
```

Replace `my_first_test.cc` with your source file name.

Then build your project:

```bash
cmake -S . -B build
cmake --build build
```

### Building Manually

If not using CMake, compile your test file and link against GoogleTest libraries:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread my_first_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o my_first_test
```

Adjust paths as necessary according to your GoogleTest installation.

<Tip>
Refer to the [Quickstart: Building with CMake](../docs/quickstart-cmake.md) for detailed instructions tailored to various environments.
</Tip>

## 6. Running Your Test

Run your compiled test binary from the command line:

```bash
./my_first_test
```

Expected output for passing tests looks like this:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ArithmeticTest
[ RUN      ] ArithmeticTest.SimpleAddition
[       OK ] ArithmeticTest.SimpleAddition (0 ms)
[----------] 1 test from ArithmeticTest ran. (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Understanding Test Output

- `[ RUN      ]` shows which test is currently running.
- `[       OK ]` indicates that the test passed.
- Test counts summary at the end shows total tests run and passed.

If any assertion fails, GoogleTest reports a failure message including the file and line number where the failure occurred.

## 7. Interpreting Common Test Failure Output

When a test fails, GoogleTest provides detailed output showing:

- The failed assertion.
- The actual vs expected values.
- Location in code (file and line number).

For example:

```none
my_first_test.cc:5: Failure
Expected equality of these values:
  2 + 2
    Which is: 5
  4
```

This indicates that `2 + 2` was unexpectedly 5 instead of 4.

### What To Do When Tests Fail

1. Review the failure message and code location.
2. Fix the bug in your code or test.
3. Rebuild and rerun tests to verify the fix.

## 8. Practical Tips and Best Practices

- Use `ASSERT_` macros when failing an assertion should abort the test immediately.
- Use `EXPECT_` macros when you want multiple assertions in a test to be evaluated even if some fail.
- Group related tests under logical test suite names to keep your test code organized.
- Avoid underscores in test suite and test names to comply with GoogleTest naming rules.
- Add custom failure messages to assertions using `<<` to give more context on failures.

```cpp
EXPECT_EQ(value, expected) << "Value not as expected for input x";
```

## 9. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Test">
<Accordion title="Test binary fails to build or link">
Check that GoogleTest headers and libraries are correctly included and linked in your build system. For CMake, ensure `GTest::gtest_main` is linked.
</Accordion>
<Accordion title="Test executable runs but no tests execute">
Verify that your test functions are correctly declared using `TEST()` and that you call `InitGoogleTest` and `RUN_ALL_TESTS()` in your `main()` function.
</Accordion>
<Accordion title="Undesired naming with underscores causes compile errors">
Rename your test suite and test names to exclude underscores to meet GoogleTest naming requirements.
</Accordion>
</AccordionGroup>

## 10. Next Steps

- Explore the [GoogleTest Primer](../docs/primer.md) for a deeper understanding of writing tests.
- Learn how to use test fixtures with `TEST_F` for sharing setup code across multiple tests.
- Check the [Core Features & Product Benefits](../overview/introducing-googletest/core-features-benefits.md) page to understand advanced testing features.
- Visit [GoogleTest Samples](../docs/samples.md) for practical examples.

---

## Appendix: Minimal `main()` Function to Run Tests

If you need to write your own `main()`, use this template:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Note: Linking against `gtest_main` often provides this for you.

---

For detailed reference on the `TEST` macro and test registration, see the [Testing Reference](../docs/reference/testing.md#TEST).


# Summary

This guide equips you with the essential knowledge to write, build, run, and interpret your first unit test using GoogleTestâ€™s `TEST` macro. Starting from setting up your project environment, to constructing your first test case and successfully running it, you gain a solid foundation to embark on your automated testing journey in C++.

---