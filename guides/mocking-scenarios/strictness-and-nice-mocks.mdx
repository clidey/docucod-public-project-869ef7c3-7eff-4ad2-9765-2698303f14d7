---
title: "Strictness, Nice, and Naggy Mocks"
description: "Guidance on controlling mock behavior for test cleanliness—learn when to use NiceMock, NaggyMock, or StrictMock, and how to balance thoroughness with maintainability for stable testing in large codebases."
---

# Strictness, Nice, and Naggy Mocks

Mastering mock object behavior is essential for writing clean, maintainable, and reliable tests using GoogleMock. This guide helps you control how mock objects react to uninteresting calls, balancing thoroughness and test stability with the appropriate strictness level. Learn to use `NiceMock`, `NaggyMock`, and `StrictMock` effectively to align your tests with your expectations while avoiding common pitfalls in large codebases.

---

## What Are Uninteresting Calls?

In GoogleMock terminology, an **uninteresting call** is a call to a mock method that has **no expectations** set (`EXPECT_CALL`) on it. When such calls occur, GoogleMock considers it "uninteresting" because your test didn't declare any constraints or interest about it.

By default, *uninteresting calls*:

- Are **allowed** and do **not cause test failures**.
- Produce **warnings** in the test output to notify you that the mock method was called without expectation.

Understanding and controlling this behavior is vital to keep your tests clean and avoid noisy or brittle tests.

---

## The Three Strictness Levels

GoogleMock provides three ways to wrap your mock classes to control how uninteresting calls are handled:

| Strictness Wrapper                    | Behavior on Uninteresting Calls                | Use When...                                                 |
| ----------------------------------- | ---------------------------------------------- | ----------------------------------------------------------- |
| `NiceMock<T>`                       | Suppresses warnings; uninteresting calls pass silently.           | You want to ignore uninteresting calls and keep test output clean. Most maintainable for large test suites.  |
| `NaggyMock<T>` (default for mocks) | Prints warnings about uninteresting calls but allows them.        | You want to be warned about uninteresting calls during test development or debugging.                       |
| `StrictMock<T>`                    | Treats uninteresting calls as **test failures**.                  | You want to enforce that no mock method is called without an expectation to catch unexpected behavior early. |

Example usage:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Suppresses uninteresting call warnings.
NaggyMock<MockFoo> naggy_foo;    // Default behavior: warnings shown.
StrictMock<MockFoo> strict_foo;  // Fails test on uninteresting calls.
```

`T` is your mock class, e.g. `MockFoo`.

---

## When to Choose Which Strictness

- **Use `NiceMock`**:
  - When you want clean test output free of unimportant warnings.
  - For large, mature test suites.
  - When uninteresting calls are expected and harmless.

- **Use `NaggyMock`**:
  - During initial test development to catch accidental uninteresting calls.
  - When you want visibility into unanticipated calls but do not want tests to fail.

- **Use `StrictMock`**:
  - When you require tight control—tests fail on unexpected calls.
  - Only after your tests' expectations are stable.
  - To catch bugs caused by unexpected interactions.

<Tip>
While `NaggyMock` is the current default mock behavior, the recommended practice is to switch to `NiceMock` for maintainable, less noisy tests and use `StrictMock` sparingly to enforce strict correctness.
</Tip>

---

## Practical Usage

### Constructing Strictness-Wrapped Mocks

Strictness wrappers **inherit constructors** of your mock class, so you can instantiate them with the same arguments:

```cpp
NiceMock<MockBar> nice_bar("hello");              // Calls MockBar(string) constructor
NaggyMock<MockBar> naggy_bar('a', 'b', "foo", "bar", 1, 2, "a", "b", true, false);
StrictMock<MockBar> strict_bar("hello");
```

### Important Notes

- Strictness wrappers only affect **mock methods directly declared with `MOCK_METHOD`** in the wrapped class, not those inherited from base classes.
- Wrapping a mock class whose destructor is not **virtual** can cause undefined behavior and incorrect strictness enforcement.

### Example: Using Different Strictness

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockClass {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

// NiceMock suppresses warnings for uninteresting calls
NiceMock<MockClass> nice_mock;
nice_mock.DoSomething();  // No warning

// NaggyMock warns on uninteresting calls
NaggyMock<MockClass> naggy_mock;
naggy_mock.DoSomething(); // Warning emitted

// StrictMock fails test on uninteresting calls
StrictMock<MockClass> strict_mock;
strict_mock.DoSomething(); // Test failure
```

---

## Best Practices

1. **Prefer Nice Mocks for Most Tests:**
   Keeps tests clean and maintainable, especially when many mock methods are not interesting.

2. **Use Naggy Mocks During Test Development:**
   Helps reveal unexpected mock calls while writing or debugging tests.

3. **Reserve Strict Mocks for Critical Paths:**
   Use sparingly when you want to catch any deviation in method invocations.

4. **Avoid Nesting Strictness Wrappers:**
   `NiceMock<StrictMock<MockFoo>>` or similar is not supported and can lead to compilation errors.

5. **Make Mock Destructors Virtual:**
   Ensures correct behavior of strictness wrappers.

6. **Use `EXPECT_CALL` to Explicitly Control Expected Calls:**
   Do not rely only on strictness wrappers to catch unexpected calls—better to specify expectations properly.

7. **Leaking Mocks:**
   If you deliberately leak a mock, use `Mock::AllowLeak(&mock);` to suppress false leak warnings.

---

## Troubleshooting Common Issues

### Issue: Uninteresting Call Warnings Flood Your Test Output

**Solution:**
- Wrap your mock object with `NiceMock` to suppress warnings on uninteresting calls.
- Alternatively, add a catch-all `EXPECT_CALL` with `Times(AnyNumber())` to explicitly allow uninteresting calls.

### Issue: StrictMock Not Triggering Failure

**Solution:**
- Ensure the mock class has a **virtual destructor**.
- Verify that mocked methods are declared with `MOCK_METHOD` directly in the mock class.
- Confirm you are actually using `StrictMock<T>` and not the base mock class.

### Issue: Compilation Errors with Nested Strictness

**Solution:**
- Avoid nesting strictness wrappers (`NiceMock<StrictMock<T>>`); keep only one level.

### Issue: Unexpected Mock Method Calls Failing Your Tests

**Solution:**
- Review and adjust your expectations (`EXPECT_CALL`) to include or exclude calls as appropriate.
- Use `NaggyMock` to warn without failing while investigating.

<Tip>
Run your tests with `--gmock_verbose=info` to see detailed traces of calls and expectation matches. This helps diagnose strictness-related failures.
</Tip>

---

## Summary

By choosing the right strictness wrapper (`NiceMock`, `NaggyMock`, or `StrictMock`), you control how GoogleMock treats uninteresting calls. This directly impacts test output cleanliness, failure policies, and test maintainability. Adopting nice mocks generally leads to more stable and less noisy tests, while strict mocks enforce rigorous verification. Use warnings (`NaggyMock`) to guide you during test development and debugging.

Refer to the [Mocking Reference](../reference/mocking.md#NiceMock) and [gMock Cookbook - The Nice, Strict, and the Naggy](../gmock_cook_book.md#NiceStrictNaggy) for further insights and detailed examples.

---

## Related Resources

- [Mocking Reference](../reference/mocking.md#NiceMock)
- [gMock Cookbook - The Nice, Strict, and the Naggy](../gmock_cook_book.md#NiceStrictNaggy)
- [gMock Cheat Sheet - Mocking a Normal Class](../gmock_cheat_sheet.md#MockClass)
- [gMock for Dummies - Setting Expectations and Mock Behavior](../gmock_for_dummies.md#UsingMocks)

---