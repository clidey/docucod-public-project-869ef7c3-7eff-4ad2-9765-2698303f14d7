---
title: "Mock Strictness: Nice, Naggy, and Strict"
description: "Master GoogleMock's mock object strictness controls (NiceMock, StrictMock, NaggyMock), choosing the right level for your scenario. Understand practical trade-offs with uninteresting calls and error reporting to promote stable, readable tests."
---

# Mock Strictness: Nice, Naggy, and Strict

## Overview

This guide helps you master GoogleMock's mock object strictness controls: **NiceMock**, **NaggyMock**, and **StrictMock**. It explains when and how to use these different mock wrappers to manage uninteresting mock method calls, the trade-offs involved, and practical advice to create stable, maintainable tests that give you clear failure reports.

## What This Guide Helps You Accomplish

- Understand the differences between nice, naggy, and strict mocks
- Learn how to choose the appropriate strictness level based on your testing scenario
- Control warnings and failures from uninteresting (no-expectation) calls
- Avoid common pitfalls with unexpected and uninteresting calls

## Prerequisites

- Familiarity with GoogleMock basics, including defining mocks and using `EXPECT_CALL`
- Your project is set up with GoogleMock
- Understanding of mock method expectations, matchers, and basic test cases

## Expected Outcome

By the end of this guide, you'll confidently apply the right mock strictness level to your mocks, balancing noise reduction with error detection, thereby improving test clarity and reliability.

## Time Estimate

10-15 minutes to read and understand concepts, with immediate usability.

## Difficulty Level

Intermediate: requires basic GoogleMock experience.

---

## Understanding Mock Strictness Levels

GoogleMock provides three mock wrappers that control how uninteresting calls — calls to mock methods without an explicit `EXPECT_CALL` — are handled.

| Strictness Level | Class Template Usage           | Description                                                                                     |
|------------------|-------------------------------|-------------------------------------------------------------------------------------------------|
| NiceMock         | `NiceMock<MockClass>`          | Suppresses warnings for uninteresting calls; lets tests be cleaner and avoids noise for calls you don't care about. Default action is performed silently.        |
| NaggyMock        | `NaggyMock<MockClass>`         | (Current default for plain mocks) Prints warnings on uninteresting calls, helping catch accidental unexpected usage without failing the test.                        |
| StrictMock       | `StrictMock<MockClass>`        | Treats uninteresting calls as errors, causing test failures when methods with no expectations are called—enforces strict interface usage.                           |


### Key Points

- **Uninteresting calls** are calls to mock methods *without any* `EXPECT_CALL` expectations.
- **Unexpected calls** are calls that match some mock method with expectations but do not satisfy *any* of those expectations (e.g., wrong args, too many calls).
- **NiceMock** suppresses warnings on uninteresting calls but does not change unexpected call failures.
- **StrictMock** converts uninteresting calls into test failures, making tests more brittle but catching hidden issues.
- **NaggyMock** (or plain mocks) warn on uninteresting calls but allow tests to continue.

### Warning
Do not confuse warnings from uninteresting calls (_no_ expectations) with failures from unexpected calls (_mismatching expectations). Only unexpected calls cause failures in all strictness levels.

---

## Choosing the Right Strictness for Your Scenario

### When to Use NiceMock

- When you expect some methods might be called without explicit verification
- To reduce noise from warnings about uninteresting calls
- For long-lived mocks with many methods where only a subset are interesting
- When you want tests to focus on failures from unmet expectations, not incidental calls

Example usage:
```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
// Calls to other methods produce no warning
```

### When to Use NaggyMock (Default)

- When you want to be alerted about uninteresting calls via warnings but not fail tests
- When writing or debugging tests to find missing expectations
- When you want to balance feedback and test stability during development

Example usage:
```cpp
using ::testing::NaggyMock;
NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
// A call to an unmentioned method will cause a warning but test passes
```

### When to Use StrictMock

- When you want to enforce strict mocking discipline
- To catch any unanticipated calls that might indicate design or test issues
- When tests must fail on any unexamined calls to mocks
- Best for mature tests that should not ignore any mock interactions

Example usage:
```cpp
using ::testing::StrictMock;
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
// Any call to a method without EXPECT_CALL causes immediate test failure
```

---

## How to Use NiceMock, NaggyMock, and StrictMock

GoogleMock provides convenient wrapper templates for your mock classes.

### Basic Construction

If your mock class is `MockFoo`, use the wrappers like this:

```cpp
NiceMock<MockFoo> nice;       // Allows uninteresting calls silently
NaggyMock<MockFoo> naggy;     // Prints warnings for uninteresting calls
StrictMock<MockFoo> strict;   // Fail tests on uninteresting calls
```

They behave like subclasses of `MockFoo`, so they can be passed to interfaces expecting a `MockFoo`.


### Passing Arguments to Non-default Constructors

These wrappers support passing constructor arguments, forwarding them to the underlying mock class constructor:

```cpp
NiceMock<MockFoo> nice(42, "hello");
StrictMock<MockBar> strict("config", true);
```

---

## Practical Trade-offs and Best Practices

### Suppressing Noise Without Losing Feedback

If your tests produce too many warnings about uninteresting calls, rather than adding spurious `EXPECT_CALL` with `Times(AnyNumber())`, prefer using `NiceMock` to silence harmless ones gracefully.

Use `NaggyMock` or the default if you want gentle feedback during test development.

### Keeping Tests Maintainable

- Too many strict mocks can make your tests fragile to implementation changes.
- Use `StrictMock` only when you want to ensure no unexpected code paths hit your mocks unrecorded.
- For evolving APIs or complex mocks, start with `NiceMock` and tighten to `StrictMock` after the interface stabilizes.

### Note on Inheritance Hierarchies

`NiceMock`, `NaggyMock`, and `StrictMock` work only for mock methods defined directly in the mock class using `MOCK_METHOD`. Methods defined in base classes may not be affected by these wrappers depending on the compiler.

### Warning on Non-Virtual Destructors

For reliable behavior, mock classes should have virtual destructors. Non-virtual destructors may cause these wrappers to behave incorrectly.

---

## Examples

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Create a NiceMock
using ::testing::NiceMock;
NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis();      // OK, no warnings for other calls
nice_foo.DoThat(true); // No warning for uninteresting call

// Create a NaggyMock
using ::testing::NaggyMock;
NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
naggy_foo.DoThis();    // Expected call
naggy_foo.DoThat(true); // Warning about uninteresting call

// Create a StrictMock
using ::testing::StrictMock;
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis();    // Expected call
strict_foo.DoThat(true); // Test failure: uninteresting call
```

---

## Troubleshooting & Tips

### Test Fails with Unexpected Uninteresting Calls

- Check whether you really want strict mock behavior. If not, switch to `NiceMock`.
- If you want strict behavior but the test calls methods not declared in `EXPECT_CALL`, add explicit expectations or use `StrictMock` cautiously.

### Warnings Flood Console Output

- Use `NiceMock` to suppress warnings from uninteresting calls.
- Add catch-all expectations like `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` for methods you expect but don't care to verify strictly.

### `NiceMock` and `StrictMock` Not Suppressing or Failing as Expected

- Verify that your mock methods are declared with `MOCK_METHOD` directly in the mock class.
- Ensure your mock class has a virtual destructor.
- Avoid nesting wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) as this is unsupported.

### Using Verbosity Flags

- Run your tests with `--gmock_verbose=info` to see detailed logs about mock calls and expectations.
- Use `--gmock_verbose=warning` (default) to see warnings about uninteresting calls.
- Use `--gmock_verbose=error` to suppress all non-error messages.

---

## Next Steps and Related Content

- [Creating and Using Basic Mocks](/guides/mocking-scenarios/creating-basic-mocks) — Learn how to define mocks with `MOCK_METHOD`
- [Understanding Uninteresting vs Unexpected Calls](gmock_cook_book.md#uninteresting-vs-unexpected) — Deepen your knowledge of mock call categories
- [Setting Expectations](/reference/mocking.md#EXPECT_CALL) — Control mock method calls with detailed expectations
- [Mocking Patterns & Advanced Use Cases](/guides/mocking-scenarios/mock-strictness-best-practices) — Explore best practices for mock strictness
- [Troubleshooting Common Setup Issues](/getting-started/gs-validation-troubleshooting/gs-troubleshooting-common-issues) — Resolve frequent mock setup problems

---

## References

- GoogleMock header: [`gmock-nice-strict.h`](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h)
- Core Concepts: [gmock_for_dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- Mocking Reference: [EXPECT_CALL and Mock Strictness](https://google.github.io/googletest/reference/mocking.html#NiceStrictNaggy)
- gMock Cookbook: [The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)

---

<Tip>
To debug your tests effectively, prefer starting with `NaggyMock` to get notified about potential issues without breaking tests, and progressively move toward `StrictMock` once your test expectations are stable and comprehensive.
</Tip>

<Note>
Avoid using raw mock objects directly for long-lived mocks, as they default to naggy behavior, which can produce noisy warnings. Wrap mocks in `NiceMock` or `StrictMock` to control verbosity and strictness explicitly.
</Note>

<Warning>
Nesting `NiceMock`, `NaggyMock`, and `StrictMock` is not supported.
</Warning>

