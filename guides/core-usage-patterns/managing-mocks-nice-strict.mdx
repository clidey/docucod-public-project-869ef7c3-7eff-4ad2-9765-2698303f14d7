---
title: "Best Practices for Managing Mocks: Nice, Strict, and Naggy"
description: "Explains how and when to use NiceMock, StrictMock, and NaggyMock wrappers to control mock behavior and test output. Illuminates strategies for suppressing unwanted warnings or enforcing strict interactions for critical tests."
---

# Best Practices for Managing Mocks: Nice, Strict, and Naggy

## Overview

This guide clarifies how to select and use **NiceMock**, **StrictMock**, and **NaggyMock** wrappers in GoogleMock to manage mock object behavior with respect to uninteresting and unexpected calls. It helps you suppress unnecessary warnings in tests, enforce strict interaction constraints for critical validations, and balance test robustness with maintenance overhead.

---

## Understanding Mock Behavior Types

When a mock method is called without an existing expectation, GoogleMock treats it as an *uninteresting call*. By default, such calls lead to warnings but won't fail the test. You can modify this behavior per mock object using specialized wrappers:

| Mock Type    | Behavior on Uninteresting Calls                         | Typical Use Case                                               |
|--------------|---------------------------------------------------------|----------------------------------------------------------------|
| **NiceMock** | *Suppresses* warnings; uninteresting calls pass silently | Use when uninteresting calls are expected or irrelevant for test correctness.
| **NaggyMock**| Prints a *warning* on uninteresting calls (default)      | Good for debugging or during test development to catch unintended calls.
| **StrictMock**| Treats uninteresting calls as *failures*                 | Use when you want to enforce strict validation that only expected calls occur.



## When and Why to Use Each Mock Wrapper

### NiceMock<T>

- Inherits from the mock class `T` and suppresses warnings for any uninteresting calls made to the mock methods.
- Ensures your test output stays clean when you're not concerned about certain methods being called.
- Ideal for large interfaces where only few methods are relevant for a test.
- Behaves just like `T`, including constructors.

### NaggyMock<T>

- Also inherits from the mock class `T` but issues warnings for every uninteresting call.
- This is the **default behavior** for raw mock objects.
- Suitable during active test development or debugging to help identify unwanted calls.

### StrictMock<T>

- Subclass of `T` that treats uninteresting calls as **test failures**.
- Forces your code to invoke only the methods you explicitly expect.
- Useful in highly sensitive or critical tests where unexpected interactions must be caught immediately.

---

## How to Use NiceMock, NaggyMock, and StrictMock

### Construction

Each mock wrapper can be constructed using the same constructors as the underlying mock class. For example, if your mock class has non-default constructors, `NiceMock`, `NaggyMock`, and `StrictMock` support forwarding those arguments.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Assuming MockFoo has a constructor taking (int, std::string)
NiceMock<MockFoo> nice_foo(5, "hello");
NaggyMock<MockFoo> naggy_foo(5, "hello");
StrictMock<MockFoo> strict_foo(5, "hello");
```

### Typical Pattern

```cpp
TEST(ExampleTest, UsingNiceMock) {
  NiceMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());  // Expect DoThis

  mock_foo.DoThis();  // OK
  mock_foo.DoThat();  // No warning, uninteresting call ignored
}

TEST(ExampleTest, UsingNaggyMock) {
  NaggyMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis();
  mock_foo.DoThat();  // Warning about uninteresting call
}

TEST(ExampleTest, UsingStrictMock) {
  StrictMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis();
  mock_foo.DoThat();  // Test fails immediately on uninteresting call
}
```

### When to Prefer One Over Another

- Use **`NiceMock`** when you want to reduce noise from warnings and you are confident unexpected calls are acceptable.
- Use **`NaggyMock`** when you want to be notified about unexpected calls but not fail your tests immediately.
- Use **`StrictMock`** to enforce rigorous interaction contracts where any unexpected call is a test failure.

---

## Best Practices for Managing Mock Strictness

- **Start with `NaggyMock` during test development** to help discover unintended uninteresting calls.
- **Switch to `NiceMock` for test suites** that are mature and where warnings about uninteresting calls are distracting but the calls are benign.
- **Use `StrictMock` selectively** on mocks where strict interaction verification is critical (e.g., security-sensitive code, complex protocols).
- Avoid **nesting** `NiceMock`, `NaggyMock`, and `StrictMock` wrappers (e.g., `NiceMock<StrictMock<T>>`). This is not supported and causes subtle bugs.
- Ensure your mock class has a **virtual destructor** so that wrappers behave correctly.

---

## How NiceMock, NaggyMock, and StrictMock Work Internally

- They inherit constructors and override internal mock behavior by registering with GoogleMock's central registry.
- They control the mock object's reaction to uninteresting calls:
  - `NiceMock` allows silently.
  - `NaggyMock` warns the user.
  - `StrictMock` fails the test.
- When the wrapper object is destructed, this registration is removed cleanly.

---

## Suppressing or Enabling Warnings Manually

If you want to adjust behavior for an already created mock at runtime, use `testing::Mock` APIs:

```cpp
::testing::Mock::AllowUninterestingCalls(reinterpret_cast<uintptr_t>(&mock));  // Like NiceMock behavior
::testing::Mock::WarnUninterestingCalls(reinterpret_cast<uintptr_t>(&mock));   // Like default NaggyMock
::testing::Mock::FailUninterestingCalls(reinterpret_cast<uintptr_t>(&mock));   // Like StrictMock
```

However, it’s recommended to choose the right wrapper at construction time.

---

## Troubleshooting Common Issues

### No Warning From NiceMock

This is by design. `NiceMock` suppresses uninteresting call warnings.

### StrictMock Does Not Fail As Expected

- Verify that your mock methods are defined with `MOCK_METHOD` macros in the mock class directly. Wrappers do not affect mock methods defined in a base class.
- Confirm the mock class destructor is virtual.

### Warning Spam With Raw or Naggy Mocks

- Consider switching to `NiceMock` to suppress irrelevant warnings.
- Review whether you need more precise `EXPECT_CALL` or `ON_CALL` statements to clarify intended calls.

### Exceptions When Using Non-Default Constructible Return Types

`NiceMock` may throw or crash if an unexpected call returns a type without a default constructor. Define an explicit default action (`ON_CALL`) or `EXPECT_CALL` for such methods.

---

## Additional Tips

- Use `EXPECT_CALL(...).Times(AnyNumber())` on methods you deliberately want to ignore without warning.
- When changing mock strictness style, test to confirm expected behavior.
- Use `Mock::AllowLeak(&mock)` if deliberately leaking a mock, to avoid false-positive leaks reported.

---

## Related Resources

- [gMock Cheat Sheet](reference/mocking.md#NiceStrictNaggy) — Details on mock wrappers and behavior
- [gMock Cookbook#NiceStrictNaggy](docs/gmock_cook_book.md#NiceStrictNaggy) — Practical recipes and guidelines
- [gMock for Dummies - Using Mocks in Tests](docs/gmock_for_dummies.md#using-mocks-in-tests) — Introductory guidance on mocks

---

## Summary
Managing how your mocks react to unexpected or uninteresting calls is essential for test clarity and robustness. GoogleMock provides `NiceMock`, `NaggyMock`, and `StrictMock` wrappers to adjust this behavior flexibly, helping balance diagnostics and test noise. Choosing the right mock wrapper improves test maintenance while enforcing your code's interaction expectations.

---

## Quick Reference Examples

```cpp
// NiceMock suppresses warnings for uninteresting calls.
NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, DoThis());
nice_mock.DoThis();    // OK
nice_mock.DoThat();    // OK, no warning

// NaggyMock warns about uninteresting calls (default behavior).
NaggyMock<MockFoo> naggy_mock;
EXPECT_CALL(naggy_mock, DoThis());
naggy_mock.DoThis();   // OK
naggy_mock.DoThat();   // Warning printed

// StrictMock treats uninteresting calls as errors.
StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoThis());
naggy_mock.DoThis();   // OK
strict_mock.DoThat();  // Test fails
```

---

## See Also

- [Mock Classes and Methods](api-reference/mocking-and-matchers/mock-classes-and-methods)
- [ON_CALL vs EXPECT_CALL](reference/mocking.md#ON_CALL)
- [Expectations and Actions](reference/mocking.md#EXPECT_CALL)
- [Matchers Reference](reference/matchers.md)

---

## Notes
`NiceMock`, `NaggyMock`, and `StrictMock` only affect uninteresting calls (methods without expectations). They do not affect unexpected calls (calls that do not match any set expectations).

---

## Contact & Community
For support and feedback, visit [GoogleTest GitHub](https://github.com/google/googletest) and community forums linked from the main documentation hub.


---

<Callout title="Tip">
When using `NiceMock` for mock classes inherited from non-virtual destructors, unexpected behavior may occur — always ensure your mock classes have virtual destructors.
</Callout>

<Callout title="Warning">
Avoid wrapping mock classes multiple times with different strictness wrappers (e.g., `NiceMock<StrictMock<T>>`); this is unsupported and will result in undefined behavior.
</Callout>

<Note>
GoogleMock currently uses `NaggyMock` behavior as the default for raw mock classes. This may change to `NiceMock` in the future.
</Note>
