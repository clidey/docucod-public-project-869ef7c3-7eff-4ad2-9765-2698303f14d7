---
title: "Mock Strictness: Nice, Naggy, and Strict Mocks"
description: "Understand the implications of handling unexpected or uninteresting calls during testing. Compare and apply Nice, Naggy, and Strict mock objects to match your testing philosophy and surface problems early."
---

# Mock Strictness: Nice, Naggy, and Strict Mocks

## Understanding Mock Strictness and Its Impact on Testing

When working with mock objects in GoogleMock, it’s important to understand how uninteresting and unexpected calls are handled to ensure your tests reflect your intent accurately. GoogleMock offers three strictness levels for mock objects – **Nice**, **Naggy**, and **Strict** – which control the behaviour on unanticipated method calls.

Uninteresting calls refer to calls to mock methods that have no `EXPECT_CALL` specification. Unexpected calls are invocations that do not match any existing `EXPECT_CALL` expectation.

Choosing the right strictness level helps you balance between noisy logs, catching issues early, and test maintainability.

---

## The Default Behavior: Naggy Mocks

By default, mock objects in GoogleMock behave like **NaggyMocks**.

- **NaggyMock**: Warns you with a printed message whenever a mock method is called without a matching expectation (`EXPECT_CALL`).
- This behavior helps you notice when your code calls unexpected methods but allows the test to continue.

### Usage example

```cpp
using ::testing::NaggyMock;

class MockFoo : public Foo {
 public:
  MOCK_METHOD(void, DoThis, (), (override));
};

TEST(MyTest, NaggyBehavior) {
  NaggyMock<MockFoo> foo;
  foo.DoThis();  // No expectation set: issues a warning.
}
```

### When to use NaggyMock

- During early development and debugging phases, when you want visibility on unexpected interactions without failing the test immediately.

---

## Suppressing Warnings with Nice Mocks

If you want your tests to be quieter and ignore calls to uninteresting methods silently, use **NiceMock**.

- **NiceMock** suppresses warnings for all uninteresting calls and lets them proceed without complaint.
- It is a subclass of your mock class, so you can use it anywhere your mock class is expected.
- NiceMocks inherit constructors, so if your mock class requires parameters, so does NiceMock.

### Usage example

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
// Calls to methods with no expectations won't warn.
nice_foo.DoThis();
```

### When to use NiceMock

- When you know certain methods may be called without having explicit expectations or when you want to ignore uninteresting calls.
- To keep test output cleaner, focusing only on relevant failures.

---

## Enforcing Strict Expectations with Strict Mocks

At the other end of the spectrum are **StrictMocks**.

- **StrictMock** treats all uninteresting calls as **errors** and makes the test fail immediately.
- This strictness ensures that no calls are missed or ignored inadvertently.
- It is useful when you want your test to have complete control over all interactions.

### Usage example

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;

EXPECT_CALL(strict_foo, DoThis());

strict_foo.DoThis();          // OK.
strict_foo.AnotherMethod();   // Fails: unexpected uninteresting call.
```

### When to use StrictMock

- When you want to catch all interactions explicitly and fail fast on any unexpected call.
- Useful for verifying the strict contract of an interface in safety-critical or highly predictable scenarios.

---

## Creating Nice, Naggy, and Strict Mocks

Given a mock class `MockFoo` defined with `MOCK_METHOD`:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Silence uninteresting calls.
NaggyMock<MockFoo> naggy_foo;    // Warn on uninteresting calls (default).
StrictMock<MockFoo> strict_foo;  // Fail on uninteresting calls.
```

These classes "inherit" the constructors of `MockFoo`, so if your mock has custom constructors, the corresponding strictness wrapper works with the same arguments.

---

## Handling Mock Objects with Non-Default Constructors

Strictness wrappers support mock classes that have constructors with parameters.

Example:

```cpp
class MockBar {
 public:
  explicit MockBar(const std::string& name);
  MOCK_METHOD(void, Foo, (), ());
};

NiceMock<MockBar> nice_bar("my_name");
nice_bar.Foo();  // Works normally without warnings.
```

---

## Important Notes and Caveats

- Strictness wrappers only affect mock methods defined directly in the mock class with `MOCK_METHOD` macros. Methods inherited from a base mock class may not be affected.
- Nesting `NiceMock`, `NaggyMock`, or `StrictMock` (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported and may lead to unexpected behavior.
- Mock class destructors must be `virtual` for strictness wrappers to behave correctly.

---

## Inspecting Mock Strictness During Tests

GoogleMock provides helper methods to check if a mock is nice, naggy, or strict:

```cpp
EXPECT_TRUE(Mock::IsNice(&nice_foo));
EXPECT_TRUE(Mock::IsNaggy(&naggy_foo));
EXPECT_TRUE(Mock::IsStrict(&strict_foo));
```

This can be useful in complex test scenarios or when writing testing utilities.

---

## How GoogleMock Reports Calls Based on Strictness

| Strictness   | Uninteresting Call Behavior              | Unexpected Call Behavior              |
|--------------|-----------------------------------------|-------------------------------------|
| NiceMock     | Silently ignores calls                   | Test fails immediately               |
| NaggyMock    | Prints a warning in the test output     | Test fails immediately               |
| StrictMock   | Test fails immediately                   | Test fails immediately               |

---

## Best Practices

- Use **NiceMock** by default to reduce noise from uninteresting calls.
- Use **NaggyMock** during debugging phases to detect potentially missing expectations.
- Use **StrictMock** when you want full control and to catch all unexpected interactions early.
- Avoid overusing strict mocks in large tests, as they can lead to brittle tests requiring frequent updates.

---

## Troubleshooting Common Issues

<AccordionGroup title="Common Issues with Mock Strictness">
<Accordion title="Unintended Test Failures on Uninteresting Calls">
Ensure you are not using `StrictMock` unintentionally. If you want to suppress uninteresting call warnings, use `NiceMock`.
</Accordion>
<Accordion title="Warnings Despite Setting ON_CALL Default Actions">
`ON_CALL` sets behaviors but does not set expectations. If methods are called without `EXPECT_CALL`, NaggyMock will warn. Use `EXPECT_CALL(...).Times(AnyNumber())` or `NiceMock` to suppress warnings.
</Accordion>
<Accordion title="Mixing Strictness Wrappers causes Weird Behavior">
Avoid nesting strictness wrappers (like `NiceMock<StrictMock<MockFoo>>`). Wrap your mock class with only one strictness modifier.
</Accordion>
<Accordion title="Mock Methods Defined in Base Classes Not Affected">
NiceMock, NaggyMock, and StrictMock affect only methods defined with `MOCK_METHOD` in the mock class itself. For methods inherited from base classes, the strictness behavior may not apply.
</Accordion>
</AccordionGroup>

---

## Summary

Choosing the appropriate strictness level for your mock objects is critical to managing test output verbosity, catching bugs, and maintaining clean tests. GoogleMock's `NiceMock`, `NaggyMock`, and `StrictMock` provide clear semantics for handling uninteresting and unexpected calls, aligning with different testing philosophies and needs.

With this knowledge, you can tune your mocks to: tolerate irrelevant calls quietly, help identify unanticipated method calls, or enforce rigorous interaction contracts.

---

## See Also

- [gMock Cheat Sheet - The Nice, the Strict, and the Naggy](gmock_cheat_sheet.md#NiceStrictNaggy)
- [gMock Cookbook - Nice, Naggy, Strict Mocks](gmock_cook_book.md#NiceStrictNaggy)
- [Mocking Reference - NiceMock, NaggyMock, StrictMock](reference/mocking.md#NiceMock)
- [Using Mocks in Tests - Setting Expectations and Behavior](guides/mocking-techniques/mock-classes-expectations.md)

---

## Additional Resources

- GoogleTest Official Site: https://github.com/google/googletest
- gMock User Guide: https://google.github.io/googletest/gmock_for_dummies.html
- Troubleshooting Mock Tests: guides/mocking-techniques/mock-classes-expectations.md#common-pitfalls

---

### Code Snippet Reference (For Quick Copy):

```cpp
// Define a mock class.
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), (override));
};

// Use a NiceMock to suppress warnings for uninteresting calls.
NiceMock<MockFoo> nice_foo;
nice_foo.DoThis();  // No warning.

// Use a NaggyMock to warn on uninteresting calls (default behavior).
NaggyMock<MockFoo> naggy_foo;
naggy_foo.DoThis(); // Prints a warning.

// Use a StrictMock to fail on uninteresting calls.
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis();          // Ok
strict_foo.AnotherMethod();   // Test failure
```

---

This concludes the guide to understanding how to apply Nice, Naggy, and Strict mock wrappers in GoogleMock to achieve your desired testing behavior and feedback.