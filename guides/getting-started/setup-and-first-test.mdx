---
title: "Setting Up & Writing Your First Test"
description: "A hands-on walkthrough covering installation, environment setup, and the creation and execution of your first unit test using GoogleTest. It highlights the required includes, basic test structure, and simple assertions."
---

# Setting Up & Writing Your First Test

A hands-on walkthrough covering installation, environment setup, and the creation and execution of your first unit test using GoogleTest. This guide highlights the required includes, basic test structure, and simple assertions.

---

## 1. Overview and Preparation

### What You Will Achieve
This guide leads you through installing GoogleTest (if not already installed), setting up your development environment, and writing, running, and interpreting your first simple unit test in C++ with GoogleTest.

### Prerequisites
- A C++17 compliant compiler and basic knowledge of writing C++ code.
- A CMake-based build system setup or an equivalent build environment.
- GoogleTest source code available (cloned or downloaded).
- Familiarity with command line operations (terminal or shell).

### Time Estimate
15–30 minutes.

### Difficulty Level
Beginner: covers essential setup and core concepts to get started.

---

## 2. Setting Up GoogleTest

Before you write your first test, you need GoogleTest available and recognized by your build system.

### Step 1: Clone GoogleTest
If you haven't already, clone the GoogleTest repository:

```bash
  git clone https://github.com/google/googletest.git -b v1.17.0
```

This fetches the stable release useful for your project.

### Step 2: Build and Install (Optional)
You can either build GoogleTest separately or integrate it directly into your project.

**Standalone build using CMake:**

```bash
cd googletest
mkdir build && cd build
cmake .. -DBUILD_GMOCK=OFF
make
sudo make install
```

This installs GoogleTest to your system (usually in `/usr/local`).

**Using GoogleTest within your project:**

Add GoogleTest as a subdirectory in your own `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Windows dynamic runtimes
FetchContent_MakeAvailable(googletest)

add_executable(my_test test.cpp)
target_link_libraries(my_test gtest_main)
add_test(NAME my_test COMMAND my_test)
```

### Step 3: Include GoogleTest Headers
In your test code files, include the main GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This brings in the testing macros and framework functionality.

---

## 3. Writing Your First Test

GoogleTest uses macros to define tests with minimal boilerplate.

### Step 1: Define a Simple Test
Use the `TEST()` macro, which takes two arguments: the test suite name and the test name. Both must be valid C++ identifiers without underscores.

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

- Here, `FactorialTest` groups related tests (test suite).
- `HandlesZeroInput` is the individual test.
- `EXPECT_EQ` checks equality and continues after failure.

### Step 2: Expand the Test
You can add multiple assertions in the test body.

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 3: Understanding Assertions
- `EXPECT_*` macros generate non-fatal failures; the test continues.
- `ASSERT_*` macros generate fatal failures; the test aborts immediately.

Use `ASSERT_*` when further checks don’t make sense after failure.

### Example: Minimal Test Program

```cpp
#include <gtest/gtest.h>

// Simple function to test.
int Factorial(int n) {
  if (n <= 1) return 1;
  else return n * Factorial(n - 1);
}

// First test.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Second test.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This program initializes GoogleTest, runs all registered tests, and returns success or failure.

---

## 4. Running Your Tests

### Step 1: Build Your Test Executable
Use your build system (e.g., CMake, Make) to compile and link your test.

Example with CMake:

```bash
cmake ..
make
```

### Step 2: Execute the Test Binary
Run the test executable:

```bash
./my_test
```

### Step 3: Interpret the Results
GoogleTest prints results grouped by test suite:

```none
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest shows the file, line number, and assertion details to help with debugging.

---

## 5. Practical Tips & Best Practices

- **Group related tests** using the same test suite name to organize logically connected tests.
- **Use descriptive test and suite names** without underscores, reflecting the tested functionality.
- **Prefer `EXPECT_*` assertions** for general checks to continue testing even after failures.
- Use `ASSERT_*` when continuation is unsafe (e.g., dereferencing pointers).
- Keep tests **independent** to avoid inter-test dependencies.
- Return the result of `RUN_ALL_TESTS()` from your `main()` to ensure correct CI integration.
- For larger projects, link against `gtest_main` to avoid writing your own `main()`.

<Tip>
Start with simple assertions and tests before exploring fixtures, parameterized tests, or mocking to build confidence.
</Tip>

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Problems When Writing and Running Your First Test">
<Accordion title="Compilation Errors Including 'gtest/gtest.h'">
Ensure GoogleTest is either installed on your system or the source files are properly added to your project. Check include paths and CMake linking targets.
</Accordion>
<Accordion title="Undefined Reference to `RUN_ALL_TESTS()` or `main()`">
You may be linking against `gtest` instead of `gtest_main`. Link with `-lgtest_main` or provide your own `main()` as shown in examples.
</Accordion>
<Accordion title="Test Not Running or Showing Zero Tests">
Verify that your `TEST()` macros are at global or namespace scope—not inside functions or classes.
Check for typos in macro names and ensure correct GoogleTest initialization.
</Accordion>
<Accordion title="Tests Fail with Segmentation Fault"
>
Check the use of `ASSERT_*` macros—make sure to abort or guard dereferences after assertions. Validate test isolation and resource management.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Explore [Test Fixtures](primer.md#same-data-multiple-tests) to share setup code across tests.
- Learn how to write [Parameterized and Typed Tests](guides/advanced-and-real-world/parameterized-tests) for data-driven testing.
- Review [Core Assertions & Best Practices](guides/getting-started/core-assertions-best-practices) to deepen your understanding of verifying code.
- Check out the [GoogleTest Primer](primer.md) for comprehensive basics and concepts.

---

## Additional Resources

- [GoogleTest Primer](primer.md) — foundational guide on writing GoogleTest tests
- [Testing Reference](reference/testing.md) — full documentation of testing macros and APIs
- [GoogleMock Guide](googlemock/gmock_for_dummies.html) — for mocking and advanced test doubles
- [Build and Installation Instructions](getting-started/installation-config/build-from-source.md)


---

# Summary Diagram of Your Workflow

```mermaid
flowchart TD
  A[Clone/Create GoogleTest Source] --> B[Build or Link in Your Project]
  B --> C[Write Test Code with TEST() Macros]
  C --> D[Compile Test Executable]
  D --> E[Run Test Executable]
  E --> F{Tests Pass?}
  F -- Yes --> G[Integration & CI]
  F -- No --> H[Debug/Test Fix]
  H --> C
```

---

You are now ready to harness GoogleTest for your C++ project’s unit testing. Write your first tests, run them, and iteratively improve your code quality with confidence.