---
title: "Installation & Setup"
description: "Learn how to install GoogleTest with your preferred build system, configure your C++ project, and verify the setup for seamless test development across major platforms."
---

# Installation & Setup Guide for GoogleTest

Welcome to the GoogleTest Installation & Setup guide. This documentation walks you through installing GoogleTest with your preferred build system, integrating it into your C++ project, and verifying the setup to enable smooth test development across all major platforms.

---

## 1. Installation Overview

This guide helps you get GoogleTest up and running in your C++ environment—whether you are starting a new test project or integrating testing capabilities into an existing one.

### Prerequisites

- A platform supported by GoogleTest: Linux, Windows, or macOS.
- C++17 compatible compiler (e.g., GCC 7+, Clang 7+, MSVC 2017+).
- Build tools including CMake (version 3.14 or higher).
- Internet access to fetch GoogleTest source code (if using FetchContent).

### Expected Outcome

By the end of this guide, you will:

- Successfully install GoogleTest.
- Integrate GoogleTest into your CMake-based C++ project.
- Build and run tests that use GoogleTest's framework.
- Understand configuration options for GoogleTest build and linking.

### Time Estimate

Approximately 15–30 minutes, depending on system speed and familiarity.

### Difficulty Level

Beginner to Intermediate.

---

## 2. Step-by-Step Installation and Setup

Follow these clear, actionable steps to install and configure GoogleTest.

### Step 1: Clone or Fetch GoogleTest Source

You can either clone the repository to build GoogleTest standalone, or use CMake's FetchContent to include it automatically in your build.

#### Option A: Standalone Clone and Build

```bash
# Clone GoogleTest repository (change version/tag as needed)
git clone https://github.com/google/googletest.git -b v1.17.0
goto googletest
# Create a build directory
mkdir build && cd build
# Generate native build system files
cmake ..
# Build GoogleTest
make    # On Unix-like systems
# or open the generated solution/project in Visual Studio/Xcode on respective platforms
```

> To build GoogleTest only (without GoogleMock), run:
>
> ```bash
> cmake .. -DBUILD_GMOCK=OFF
> ```

#### Option B: Incorporate GoogleTest into Your Existing CMake Project

Add this snippet to your `CMakeLists.txt` to download and use GoogleTest automatically:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# On Windows: Align GoogleTest runtime with your project (dynamic CRT linkage)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

# Then you can link your test executable with gtest_main
add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

> **Note:** This requires CMake 3.14 or later due to `FetchContent_MakeAvailable()`.

### Step 2: Set Required C++ Standard

Ensure your project uses C++17 or later:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

This setting can be added at the start of your `CMakeLists.txt`.

### Step 3: Build the GoogleTest Libraries

If you are building standalone or within your project, run your build tool:

- On Linux/macOS:
  ```bash
  make
  ```

- On Windows (Visual Studio):
  Open the `.sln` or `.vcxproj` files and build.

If using FetchContent integration in CMake, the build happens automatically.

### Step 4: Link GoogleTest with Your Test Executable

Link your test code against `gtest` or `gtest_main`:

- Use `gtest` if you provide your own `main()`.
- Use `gtest_main` if you want the default GoogleTest `main()`.

Example CMake snippet:

```cmake
add_executable(my_test test_example.cpp)
target_link_libraries(my_test GTest::gtest_main)
include(GoogleTest)
gtest_discover_tests(my_test)
```

### Step 5: Build and Run Your Tests

Run your build system, then execute your test binary. All tests registered with GoogleTest macros will run automatically.

```bash
./my_test
```

You should see output summarizing test results.

---

## 3. Customizing GoogleTest Builds

### Visual Studio: Dynamic vs Static Runtime

By default, GoogleTest links statically to the C runtime, which may differ from your project’s dynamic linkage settings, causing linker errors like:

```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

To resolve this, enable dynamic CRT linkage by adding the option:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

before calling `FetchContent_MakeAvailable()` or building GoogleTest manually.

### Building GoogleTest as a Shared Library

Normally, GoogleTest builds as a static library. To build as a shared library (DLL on Windows), add compiler flags:

```bash
-DGTEST_CREATE_SHARED_LIBRARY=1
```

and during testing binaries build:

```bash
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

Check your linker documentation for details on creating shared libraries.

### Enabling or Disabling Pthread Support

GoogleTest detects pthread availability automatically. To override:

- Force enable pthreads:
  ```bash
  -DGTEST_HAS_PTHREAD=1
  ```
- Force disable pthreads:
  ```bash
  -DGTEST_HAS_PTHREAD=0
  ```

When enabled, your build system should link against pthreads correctly (CMake handles this).

---

## 4. Writing Your Own main() (Optional)

Most users rely on `gtest_main` providing a default `main()`. If you want customization, write `main()` like this:

```c++
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes GoogleTest and runs all registered tests.

---

## 5. Common Pitfalls & Troubleshooting

### Missing Default Constructor Error

If your test fixture class has custom constructors, ensure it has a default constructor. GoogleTest will create fixture instances for each test.

### Linking Errors with Runtime Libraries

Ensure consistent runtime linkage between your project and GoogleTest (static vs dynamic).

### C++ Standard Mismatch

Ensure your entire project including GoogleTest uses C++17 or newer for successful compilation.

### Build Tools and Version Issues

Make sure CMake is version 3.14+ for modern FetchContent functionality.

### Tests Not Running

Verify you linked your test executable against the correct target (`gtest_main` or `gtest`), and that tests are defined properly using GoogleTest macros.

---

## 6. Best Practices & Tips

- Prefer the FetchContent method for integrating GoogleTest into your projects, as it ensures consistent compiler and linker settings.
- Use `gtest_main` whenever possible to avoid writing your own main function.
- Always set the C++ standard explicitly to C++17 or later in your project.
- On Windows, use the `gtest_force_shared_crt` flag to prevent runtime conflicts.
- Disable GoogleMock build (`BUILD_GMOCK=OFF`) if you only need GoogleTest.
- Regularly update GoogleTest to benefit from bug fixes and improvements.

---

## 7. Next Steps

- Write your first test following the [Writing Your First Test](../guides/getting-started/writing-first-test) guide.
- Learn how to build and run test suites with [Test Discovery & Execution](../guides/getting-started/test-discovery-execution).
- Explore detailed [Assertions, Macros & Expectations](../guides/core-test-design/assertions-macros) documentation for deeper test writing skills.

---

## Useful Links

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [Official CMake Documentation](https://cmake.org/documentation/)
- [GoogleTest Primer](../overview/intro-concepts/what-is-googletest)
- [Installation Guide (Full)](../getting-started/setup-requirements/installation-guide)
- [Quickstart: Building with CMake](../getting-started/first-tests/quickstart-example)

---

If you encounter issues, refer to the [Troubleshooting & Common Setup Issues](../getting-started/first-tests/common-troubleshooting) page for practical solutions.


---