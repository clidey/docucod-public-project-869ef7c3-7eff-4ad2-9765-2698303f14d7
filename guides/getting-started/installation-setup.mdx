---
title: "Installation and Setup"
description: "Learn how to install GoogleTest and GoogleMock, integrate with your build system (CMake, Bazel), and configure your environment for successful test development. This guide walks through importing the framework and preparing your project."
---

# Installation and Setup Guide for GoogleTest and GoogleMock

Welcome to the essential guide for installing and setting up GoogleTest and GoogleMock. This guide leads you through quickly importing the frameworks into your project, integrating with your build system, and preparing your environment to start writing and running tests immediately.

---

## 1. Overview

### What This Guide Will Help You Achieve
- Install GoogleTest and GoogleMock from source or via CMake integration.
- Configure your build systems (CMake or Bazel) to include and link against GoogleTest/GoogleMock.
- Set up your environment to write and execute tests smoothly.

### Prerequisites
- Basic familiarity with C++ development and compiling projects.
- Build system knowledge: CMake or Bazel, depending on your environment.
- An environment that supports C++17 or later.

### Expected Outcome
After completing this guide, you will have GoogleTest and GoogleMock correctly installed and integrated into your project build pipeline, ready for test development and execution.

### Estimated Time
15–30 minutes depending on your build system familiarity.

### Difficulty Level
Beginner to Intermediate.

---

## 2. Installing GoogleTest and GoogleMock

### 2.1 Cloning the Repository
Start by cloning the official GoogleTest repository. This repository contains both GoogleTest and GoogleMock sources.

```bash
# Clone GoogleTest repository for version 1.17.0 (example version)
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### 2.2 Building as a Standalone Project Using CMake
Use the included CMake scripts to build both GoogleTest and GoogleMock.

```bash
mkdir build
cd build
cmake ..
make
```

If you only want GoogleTest and not GoogleMock, disable GoogleMock:

```bash
cmake .. -DBUILD_GMOCK=OFF
make
```

On Windows, this process creates Visual Studio `.sln` files, while on Mac OS, Xcode project files are generated.

### 2.3 Installing

Run the following to install installed binaries and headers (requires admin privileges):

```bash
sudo make install
```

By default, this installs into `/usr/local`.

---

## 3. Integrating GoogleTest into Your Project

You have two main workflow options for integrating GoogleTest:

### 3.1 Use Installed Libraries
If GoogleTest is installed system-wide, you can import it directly:

```cmake
find_package(GTest CONFIG REQUIRED)
add_executable(your_tests your_tests.cpp)
target_link_libraries(your_tests GTest::gtest GTest::gmock GTest::gtest_main)
add_test(NAME your_tests COMMAND your_tests)
```

This integrates GoogleTest and GoogleMock libraries, linking your test executable and registering your test target.

### 3.2 Build GoogleTest as Part of Your Project
Including GoogleTest source as part of your project guarantees consistent compiler and linker settings.

Add to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For VS dynamic runtimes
FetchContent_MakeAvailable(googletest)

add_executable(your_tests your_tests.cpp)
target_link_libraries(your_tests gtest_main gmock_main)
add_test(NAME your_tests COMMAND your_tests)
```

**Note:** This approach requires CMake 3.14 or later.

---

## 4. Using Bazel for GoogleTest Integration

GoogleTest also integrates well with Bazel. Include GoogleTest in your BUILD files by referencing the official GoogleTest rules and dependencies. For detailed Bazel integration, see the [Integration with Build Systems and Tools guide](/overview/integration-and-getting-started/integration-with-build-systems-and-tools).

---

## 5. Preparing Your Testing Environment

### 5.1 C++ Standard Requirements
GoogleTest requires a C++17 compatible compiler. Ensure you specify the standard in your build system:

For CMake:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### 5.2 Thread Support
GoogleTest is thread-safe on platforms supporting pthreads. In some environments (especially manual builds), you might need to define `GTEST_HAS_PTHREAD=1` or `0` explicitly via compiler flags.

### 5.3 Linking Runtime (Visual Studio Specific)
To prevent runtime library conflicts on Windows:

- Use `-Dgtest_force_shared_crt=ON` in your CMake to switch GoogleTest to dynamic runtime linking.

---

## 6. Writing Your Main Test Runner

GoogleTest provides `gtest_main` and `gmock_main` libraries implementing a default `main()` function. Linking your tests against these libraries lets you avoid writing your own `main()`.

Example linking:

```cmake
target_link_libraries(your_tests gtest_main gmock_main)
```

If you require customization for test initialization, you can write your own main like this:

```c++
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

If you are using GoogleMock features, initialize with:

```c++
#include <gmock/gmock.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 7. Best Practices and Tips

- **Always check the return value of `RUN_ALL_TESTS()`.** It indicates the success or failure of your test suite.
- **Use `gtest_main` or `gmock_main` when possible** to simplify your test builds.
- **Maintain the same compiler and linker settings** between GoogleTest and your project to avoid runtime mismatch issues.
- **Use CMake FetchContent or git submodules** to manage GoogleTest source dependency reliably.

---

## 8. Troubleshooting Common Issues

<Accordion title="CMake Fails to Find GoogleTest">
Make sure you have run `make install` if you rely on installed packages, or use the FetchContent method to incorporate GoogleTest sources directly to your build to avoid missing package issues.
</Accordion>
<Accordion title="Linker Errors on Windows Runtime Library Mismatch">
Ensure that you enable `gtest_force_shared_crt=ON` in your CMake options to unify static vs dynamic CRT usage.
</Accordion>
<Accordion title="Compiler Compatibility Problems">
Verify your compiler supports C++17. Older compilers will fail to build GoogleTest.
</Accordion>

---

## 9. Next Steps

- Start writing your first test following the [Writing and Running Your First Test guide](/guides/getting-started/first-test).
- Explore mocking with GoogleMock to create powerful interaction tests in the [Mocking Workflow with GoogleMock](/guides/mocking-best-practices/mocking-workflow).
- Review the [Configuring Your Test Environment](/getting-started/configuration-and-validation/configuration-setup) for advanced build and environment nuances.

---

## 10. Additional Resources

- [GoogleTest Primer](primer.md) — Understand the core concepts and writing tests.
- [GoogleMock README](googlemock/README.md) — Detailed overview of mocking features.
- [CMakeLists.txt in GoogleTest repo](https://github.com/google/googletest/blob/main/CMakeLists.txt) — Reference for the build process.

---

By integrating GoogleTest and GoogleMock into your project using the procedures outlined above, you prepare a robust foundation for automated C++ testing, enabling faster development and higher quality code.

---

*Happy Testing!*  
GoogleTest Team

---

<Info>
For advanced continuous integration (CI) integration and optimizing build processes, see the [Integration with Continuous Integration and Build Systems](/guides/real-world-scenarios/integration-examples).
</Info>