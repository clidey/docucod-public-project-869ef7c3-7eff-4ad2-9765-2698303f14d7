---
title: "Writing Your First Unit Tests"
description: "Step-by-step guide to creating your first unit tests with GoogleTest. Learn how to structure test cases, use core assertions, run tests, and interpret results, leveraging simple examples to build effective habits."
---

# Writing Your First Unit Tests

Step-by-step guide to creating your first unit tests with GoogleTest. Learn how to structure test cases, use core assertions, run tests, and interpret results, leveraging simple examples to build effective habits.

---

## 1. Getting Started: What You'll Achieve

### Task Description
This guide walks you through writing your first unit tests using GoogleTest. You will learn how to define test cases, organize tests in test suites, apply core assertions to verify behavior, execute the tests, and understand the output.

### Prerequisites
- Basic knowledge of C++ programming
- GoogleTest installed and integrated into your project (including `<gtest/gtest.h>` available)
- A build system ready to compile and run tests with GoogleTest (e.g., CMake or Bazel)

### Expected Outcome
By following this guide, you'll write simple, organized unit tests that:
- Are grouped logically in test suites
- Use assertions to verify expected outcomes
- Can be executed using the GoogleTest runner
- Provide meaningful feedback on test results for debugging and validation

### Time Estimate
10-20 minutes

### Difficulty Level
Beginner

---

## 2. Your First Unit Test

GoogleTest provides the `TEST` macro as the simplest way to write a test case. Each test is a standalone function, grouped into a test suite.

### 2.1. Defining a Test
Use the syntax:

```cpp
TEST(TestSuiteName, TestName) {
  ... // test statements
}
```

- `TestSuiteName` groups related tests (like a class or module).
- `TestName` identifies the individual test under the suite.

> **Important:** Names must be valid C++ identifiers without underscores (`_`).

### 2.2. Writing Assertions
Assertions check whether your code behaves as expected. GoogleTest offers macros like:

- `EXPECT_EQ(val1, val2)` — Expect equality, report failure but continue.
- `ASSERT_EQ(val1, val2)` — Assert equality, abort test on failure.
- `EXPECT_TRUE(condition)`, `ASSERT_TRUE(condition)` — For boolean conditions.

Use `EXPECT_*` when you want the test to continue after a failure, and `ASSERT_*` when continuing would be invalid.

### Example:
Here’s a simple test for a factorial function:

```cpp
int Factorial(int n);  // Your function under test

// Test suite named FactorialTest, test named HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

After compilation and running, GoogleTest groups these test outputs by their suite. Failures provide file and line details guiding you to the issue.

---

## 3. Using Test Fixtures for Shared Configuration

When multiple tests need the same set-up or shared data, GoogleTest allows using a **test fixture** class. This improves maintainability and reduces duplication.

### 3.1. Creating a Test Fixture

1. Define a class derived from `testing::Test`.
2. Declare shared variables and methods.
3. Optionally override `SetUp()` and `TearDown()` for setup and cleanup before and after each test.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  // Set up objects needed across tests
  QueueTest() {
    // Initial setup
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;  // Empty queue
  Queue<int> q1_;  // Single element queue
  Queue<int> q2_;  // Multi-element queue
};
```

### 3.2. Writing Tests Using the Fixture

Use `TEST_F` macro instead of `TEST`. The first argument is the fixture class name:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

### What Happens at Runtime
For each `TEST_F`:
1. A fresh fixture object is created.
2. `SetUp()` is called (or constructor).
3. Test body runs (your assertions).
4. `TearDown()` is called (or destructor).
5. Fixture object destroyed.

This guarantees test independence and isolation.

---

## 4. Running Your Tests

Once tests are compiled into an executable, use the main function with GoogleTest to run them:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Call `testing::InitGoogleTest()` first to parse command-line flags.
- `RUN_ALL_TESTS()` runs all tests defined (via `TEST`/`TEST_F` macros) and returns 0 on success.

### Test Output
- Passed tests show `[       OK ]` messages.
- Failed tests print detailed failure info, including file, line, and error messages.
- Disabled tests (prefixed `DISABLED_`) are skipped unless a special flag is set.

### Running Subsets of Tests
Use the `--gtest_filter` flag to run specific tests. Example:

```
./my_test --gtest_filter=FactorialTest.HandlesZeroInput
```

This runs only the named test.

---

## 5. Best Practices and Tips

- **Test Naming:** Use descriptive names without underscores for easy maintenance.
- **Assertions:** Prefer `EXPECT_*` when it makes sense to continue checking multiple failures; use `ASSERT_*` when failure makes further tests invalid.
- **Test Independence:** Avoid shared state between tests unless guarded.
- **Fixtures:** Use test fixtures to avoid repeating set-up code for tests needing the same context.
- **Skips and Disables:** Use `DISABLED_` prefix or `GTEST_SKIP()` to manage temporary or conditional skips.

---

## 6. Troubleshooting

- **Common Errors:**
  - Test names or suites with underscores may cause conflicts; rename accordingly.
  - Missing default constructors on fixture classes cause compilation errors.
  - Forgetting to call `InitGoogleTest` before `RUN_ALL_TESTS()` will lead to flags not working.

- **Verifying Tests Run:** Run test executable with `--gtest_list_tests` to confirm recognized tests.

---

## 7. Next Steps & Related Content

Continue learning by exploring:
- [GoogleTest Primer](primer.md) for foundational concepts.
- [Advanced GoogleTest Topics](advanced.md) to master fixtures, parameterized tests, and more.
- [Writing Your First Test](getting-started/first-test-validation/writing-your-first-test) for basic test case creation.
- [Parameterized and Typed Tests](guides/advanced-testing-patterns/parameterized-and-typed-tests) for data-driven testing.

For detailed API and macro references, see the [Testing Reference](reference/testing.md).

---

# Code Example Recap
```cpp
#include <gtest/gtest.h>

// Simple TEST example
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

// Test Fixture example
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---