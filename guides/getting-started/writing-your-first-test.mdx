---
title: "Writing Your First Test Case"
description: "Step through creating your first basic unit test using GoogleTest, from test case skeletons to running your tests and interpreting the output. Emphasis is placed on best practices in test naming, structure, and assertions for meaningful results."
---

# Writing Your First Test Case

Step through creating your first basic unit test using GoogleTest, focusing on test case skeletons, running tests, and interpreting output. This guide emphasizes best practices in test naming, structure, and assertions for meaningful, maintainable test results.

---

## Workflow Overview

### Task Description
This guide helps you create your first unit test using GoogleTest. You'll learn how to write a test case skeleton, run your tests, and understand the test output to ensure your tests are effective.

### Prerequisites
- Have GoogleTest properly installed and integrated into your C++ project.
- Basic knowledge of writing C++ code.
- A working build system configuration that compiles and links your test code with GoogleTest.

### Expected Outcome
You will successfully write a simple test case, run the test binary, and interpret GoogleTest's output to confirm your test suite runs and reports results correctly.

### Time Estimate
Approximately 10-15 minutes.

### Difficulty Level
Beginner.

---

## Step-by-Step Instructions

### 1. Include GoogleTest Header
In your test source file, include the main GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This header provides access to all test macros and support classes.

---

### 2. Define a Basic Test Using `TEST` Macro

Use the `TEST` macro to define an individual test:

```cpp
TEST(TestSuiteName, TestName) {
  ... test code and assertions ...
}
```

- **TestSuiteName**: Groups related tests logically; must be a valid C++ identifier with no underscores.
- **TestName**: Identifies this specific test within the suite; also must be a valid C++ identifier with no underscores.

Example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

---

### 3. Use Assertions to Define Test Logic

Within a test, use `EXPECT_` or `ASSERT_` macros to verify conditions:

- `EXPECT_` macros report non-fatal failures and let tests continue.
- `ASSERT_` macros cause a fatal failure and abort the current test function immediately.

Example:

```cpp
EXPECT_EQ(Factorial(1), 1);
EXPECT_EQ(Factorial(2), 2);
EXPECT_EQ(Factorial(3), 6);
```

Choose `ASSERT_` when the test cannot continue meaningfully after failure (e.g., pointer not null before dereference).

---

### 4. Naming Best Practices

- Avoid underscores (`_`) in test suite and test names to prevent internal naming conflicts.
- Follow C++ naming conventions for clarity and maintainability.

Refer to the [FAQ on naming restrictions](https://github.com/google/googletest/blob/main/docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for detailed reasoning.

---

### 5. Compile Your Test Binary

Ensure your source files including the test cases are compiled and linked with the GoogleTest library.

Typical commands involve passing `-lgtest -lgtest_main -pthread` or linking against your build system's GoogleTest target.

---

### 6. Run All Tests

Use the `RUN_ALL_TESTS()` macro within your main function to execute all defined tests:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` initializes framework settings and processes command-line flags.
- `RUN_ALL_TESTS()` runs all tests, prints results, and returns 0 if all pass.

**Important:** You must **use** the return value of `RUN_ALL_TESTS()` as your program's exit code.

---

### 7. Interpret the Test Output

GoogleTest outputs each test’s status with clear markers:

- `[ RUN      ]` - Test started
- `[       OK ]` - Test passed
- `[  FAILED  ]` - Test failed

At the end, it summarizes total tests run, passed, and failed.

Example output:

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
...
[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput
```

Failures include file, line number, and failure message.

---

## Examples & Code Samples

### Example: Simple Factorial Tests

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run this program to see GoogleTest execute and report each test.

---

### Example: Using ASSERT to Prevent Invalid Access

```cpp
TEST(MyTest, PointerNotNull) {
  int* p = GetPointer();
  ASSERT_NE(p, nullptr) << "Pointer must not be null.";
  // Safe to dereference p here because ASSERT_NE aborts on failure
  EXPECT_EQ(*p, expected_value);
}
```

---

## Troubleshooting & Tips

### Common Issues

- **Test Not Discovered or Run**
  - Ensure your test source files are compiled and linked with GoogleTest.
  - Confirm test functions are defined with `TEST` or `TEST_F` macros correctly.
  - Avoid underscores in test suite/test names which can cause conflicts.

- **Compiler Errors**
  - GoogleTest requires tests have valid C++ identifiers for test and suite names.
  - Ensure you include `<gtest/gtest.h>`.
  - Verify your fixture classes provide a default constructor.

- **Ignoring RUN_ALL_TESTS() Return Value**
  - Always `return RUN_ALL_TESTS()` from `main()` to accurately report test success.

---

### Best Practices

- Use `EXPECT_` assertions for non-fatal checks to continue testing after failures.
- Use `ASSERT_` assertions if a failure should halt the test immediately.
- Group related tests into descriptive test suites.
- Name your tests to clearly indicate what they verify.
- Keep your tests small and focused on a single behavior.

---

### Performance Considerations

- GoogleTest creates a fresh test fixture object for each test to isolate side effects.
- Avoid lengthy setup code in each test—use test fixtures with `SetUp()` and `TearDown()` if necessary.

### Alternative Approaches

- Use `TEST_F` and fixtures for sharing complex test setup.
- For parameterized or typed tests, consult advanced guides once comfortable with basics.

---

## Next Steps & Related Content

### What's Next?
- Explore using test fixtures for shared setup: see [Test Fixtures: Using the Same Data Configuration for Multiple Tests](../primer.md#same-data-multiple-tests).
- Learn about assertions in detail: see [Assertions Reference](reference/assertions.md).
- Start writing parameterized tests to run the same test logic against multiple inputs: see [Value-Parameterized Tests](../advanced.md#value-parameterized-tests).

### Related Guides
- [GoogleTest Primer](../primer.md): Foundations and best practices.
- [Writing Effective and Maintainable Tests](../guides/writing-effective-tests/advanced-assertions-practices).
- [Testing Reference](reference/testing.md): Comprehensive API overview.

### Resources
- GoogleTest GitHub repository: https://github.com/google/googletest
- GoogleTest FAQ: https://github.com/google/googletest/blob/main/docs/faq.md

---

This guide empowers you to write your first solid unit test with GoogleTest, setting the stage for more advanced and maintainable test suites.

---

## Callouts

<Note>
Follow the naming conventions strictly: avoid underscores (`_`) in test suite and test names to prevent conflicts and ensure predictable behavior.
</Note>

<Tip>
Use `EXPECT_*` macros when you want to gather multiple failures in one test run, and `ASSERT_*` macros to halt tests immediately upon serious failures.
</Tip>

<Warning>
Never ignore the return value of `RUN_ALL_TESTS()`. Your test executable's exit code reports overall test success or failure.
</Warning>

---