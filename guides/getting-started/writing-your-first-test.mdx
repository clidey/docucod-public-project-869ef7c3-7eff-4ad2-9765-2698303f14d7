---
title: "Writing Your First Test"
description: "Follow a hands-on walkthrough to create and run your first test using GoogleTest. Learn the essentials of defining a test case, employing assertion macros, and interpreting test results. This guide ensures a quick win for users new to the framework."
---

# Writing Your First Test

Welcome to your foundational journey with GoogleTest! This guide takes you through a practical, step-by-step process to create and run your first C++ test using the GoogleTest framework. You'll learn how to define a test case, apply assertion macros effectively, and interpret the output to verify your results. By the end, you will have a working test and a solid grasp of essential testing concepts.

---

## 1. Understanding the Test Workflow

### Task Description
This guide helps you write your first test case in GoogleTest, understand the test structure, and verify that your test behaves as expected.

### Prerequisites
- GoogleTest must be installed and configured in your C++ project.
- Basic familiarity with C++ programming.
- A working build environment with a compiler supporting C++17 or later.

### Expected Outcome
By following this guide, you will have a compiled and runnable test suite that:
- Defines a test case and test.
- Uses assertion macros to validate conditions.
- Runs tests and produces meaningful output.

### Time Estimate
Approximately 15-20 minutes.

### Difficulty Level
Beginner

---

## 2. Creating Your First Test

GoogleTest organizes tests within *test suites*. Each suite can contain multiple tests. Each test verifies a specific behavior or condition.

### Step 1: Include the GoogleTest Header
Make sure your test source file includes the main GoogleTest header.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Write a Simple Test Using `TEST`
Use the `TEST(TestSuiteName, TestName)` macro to define a test. Both names should be valid C++ identifiers without underscores.

Here is a simplistic example that tests `Factorial` returns 1 for input 0:

```cpp
// Define the function under test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Define a test case
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

*Explanation:* This test suite is called `FactorialTest`, with a single test named `HandlesZeroInput`. The test asserts that `Factorial(0)` equals 1.

### Step 3: Add More Tests
You can add more tests in the same suite by repeating the `TEST` macro:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

*Tip:* Grouping related tests in the same suite improves organization and readability.

---

## 3. Compiling and Running Your Tests

### Step 1: Compile Your Test
Make sure to link against GoogleTest libraries (`gtest` and `gtest_main` or `gmock` if using mocks).

Example compilation command with `g++`:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread \
    your_test_file.cc /path/to/googletest/lib/libgtest.a /path/to/googletest/lib/libgtest_main.a \
    -o your_test_binary
```

Replace `/path/to/googletest` with the actual installation path.

### Step 2: Run Your Test Binary
Executing your test binary runs all defined tests.

```bash
./your_test_binary
```

You should see output similar to:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This confirms that your tests passed.

---

## 4. Understanding Assertion Macros

GoogleTest offers various assertion macros. The two primary types are:

- `EXPECT_*` (non-fatal): Reports failure but continues running the test.
- `ASSERT_*` (fatal): Reports failure and aborts the current test immediately.

### Basic Assertion Examples

- Equality check:

  ```cpp
  EXPECT_EQ(expected, actual);
  ASSERT_NE(pointer, nullptr);
  ```

- Boolean checks:

  ```cpp
  EXPECT_TRUE(condition);
  ASSERT_FALSE(condition);
  ```

- String comparison:

  ```cpp
  EXPECT_STREQ(c_string1, c_string2);
  ```

### When to use What
- Use `ASSERT_*` when failure makes continuing the test meaningless or likely to cause crashes.
- Use `EXPECT_*` for checks where further assertions are still valuable even after failure.

### Custom Messages
You can append a message to assertions:

```cpp
EXPECT_EQ(Factorial(0), 1) << "Factorial of zero should be 1";
```

---

## 5. Test Naming Best Practices

- Test suite and test names should **not** contain underscores (`_`).
- Use descriptive names reflecting the functionality or condition tested.

Example:

```cpp
TEST(StringUtilsTest, ConvertsToUppercaseCorrectly) { ... }
```

This makes test reports easier to read and reduces potential conflicts.

---

## 6. Troubleshooting Common Issues

### Issue: Compiler Error About Missing Default Constructor
GoogleTest requires the test fixture or test suite class to have a default constructor. If you define custom constructors, ensure to provide a default one.

### Issue: Assertions Not Triggering Failures
Ensure you include the correct GoogleTest headers and that assertions are inside a `TEST` or `TEST_F` body.

### Debugging Failed Tests
Run the tests with verbose output:

```bash
./your_test_binary --gtest_verbose=info
```

This shows detailed matching and call logs.

---

## 7. Next Steps

- Read the [GoogleTest Primer](../primer.md) to deepen your understanding.
- Explore the [Essential Assertions and Test Patterns](essential-assertions-and-patterns.md) guide.
- Learn to write parameterized tests for varied inputs ([Writing Parameterized Tests](writing-parameterized-tests.md)).
- Explore mocking techniques using GoogleMock with [Using Mocks in Unit Tests](using-mocks-in-unit-tests.md).

---

## References
- [GoogleTest Primer](../primer.md)
- [Assertions Reference](../reference/assertions.md)
- [Mocking Cookbook (gMock)](gmock_cook_book.md)
- [Test Case and Suite Definition](../api-reference/core-testing-api/test-case-definition.md)
- [GoogleTest FAQ](../faq.md)
- Official repository: [https://github.com/google/googletest](https://github.com/google/googletest)


<Callout title='Tip'>
To keep your tests clean and maintainable, write one assertion per test when possible. This aids in isolating issues during failures.
</Callout>

<Callout title='Note'>
Running `RUN_ALL_TESTS()` returns 0 if all tests pass. Make sure your `main()` returns this value to properly signal test results to your CI or test runner.
</Callout>

---