---
title: "Writing Your First Test"
description: "A beginner-friendly tutorial walking you through the creation of your first test using GoogleTest. It covers fundamental assertion types, test case setup, and basic teardown patterns required to test your C++ code reliably."
---

# Writing Your First Test

A beginner-friendly tutorial walking you through the creation of your first test using GoogleTest. It covers fundamental assertion types, test case setup, and basic teardown patterns required to test your C++ code reliably.

---

## 1. Overview of the Testing Workflow

### What You'll Achieve
This guide helps you write, compile, and run a simple but meaningful test in C++ using GoogleTest. You will learn the basic structure of a test case, use of assertions, and how to organize test files for maintainability.

### Prerequisites
- A working GoogleTest installation integrated into your build system.
- Basic C++ programming knowledge.
- A simple function or class you want to test.

### Expected Outcome
You will be able to write a test function that
- checks expected results using GoogleTest assertions,
- runs successfully with `RUN_ALL_TESTS()`, and
- reports meaningful success or failure feedback.

### Time Estimate
About 15-30 minutes, including setup and running your test.

### Difficulty Level
Beginner

---

## 2. Step-by-Step Instructions

### Step 1: Include the GoogleTest Header
Include the main GoogleTest header in your test file. This provides all necessary macros and utilities.

```cpp
#include <gtest/gtest.h>
```

*Expected Result*: Your compiler finds GoogleTest headers without error.

### Step 2: Write a Simple Test Case
Use the `TEST` macro to create a unit test. The macro takes two arguments: a test suite name and the test name.

```cpp
// Simple function to be tested.
int Add(int a, int b) {
  return a + b;
}

// Test case for the Add() function.
TEST(AdditionTest, HandlesPositiveNumbers) {
  EXPECT_EQ(Add(1, 2), 3);  // Checks that Add(1,2) == 3
}
```

*Expected Result:*
- The test is registered and will be discovered when running tests.

### Step 3: Compile Your Test Program
Compile your test file along with the GoogleTest libraries.

*Tips:*
- Include linking with `-lgtest -lgtest_main -pthread` or your platform equivalent.
- Confirm your build system is set up to find GoogleTest libraries.

### Step 4: Run the Test
Run the compiled test binary. The output will show the test result.

```shell
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from AdditionTest
[ RUN      ] AdditionTest.HandlesPositiveNumbers
[       OK ] AdditionTest.HandlesPositiveNumbers (0 ms)
[----------] 1 test from AdditionTest (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

*Success Criterion*: The test passes without errors.

### Step 5 (Optional): Use a Test Fixture with `TEST_F` for Reusable Setup
When multiple tests share setup or teardown code, create a test fixture.

```cpp
class CalculatorTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Setup code here
  }
  void TearDown() override {
    // Cleanup code here
  }
};

TEST_F(CalculatorTest, AddsCorrectly) {
  EXPECT_EQ(Add(2, 3), 5);
}

TEST_F(CalculatorTest, AddsZero) {
  EXPECT_EQ(Add(0, 0), 0);
}
```

*Expected Result*: Both tests use the same setup and teardown logic.

---

## 3. Practical Examples

### Example: Testing a Simple Class

```cpp
#include <gtest/gtest.h>

class Stack {
 public:
  Stack() : size_(0) {}
  void Push(int x) { size_++; }
  void Pop() { if (size_ > 0) size_--; }
  int Size() const { return size_; }

 private:
  int size_;
};

TEST(StackTest, PushIncreasesSize) {
  Stack s;
  EXPECT_EQ(s.Size(), 0);
  s.Push(4);
  EXPECT_EQ(s.Size(), 1);
}

TEST(StackTest, PopDecreasesSize) {
  Stack s;
  s.Push(4);
  s.Push(5);
  EXPECT_EQ(s.Size(), 2);
  s.Pop();
  EXPECT_EQ(s.Size(), 1);
  s.Pop();
  EXPECT_EQ(s.Size(), 0);
}
```

### Example: Using SetUp and TearDown

```cpp
class QueueTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Initialize a queue before each test
    q_.Enqueue(1);
    q_.Enqueue(2);
  }

  void TearDown() override {
    // Clean up
  }

  // A simple queue class
  Queue<int> q_;
};

TEST_F(QueueTest, SizeIsTwoInitially) {
  EXPECT_EQ(q_.size(), 2);
}

TEST_F(QueueTest, DequeueWorks) {
  int* val = q_.Dequeue();
  ASSERT_NE(val, nullptr);
  EXPECT_EQ(*val, 1);
  delete val;
  EXPECT_EQ(q_.size(), 1);
}
```

---

## 4. Troubleshooting & Best Practices

### Common Issues

- **Test not found or not running:** Confirm correct naming (`TEST` or `TEST_F`) and that `RUN_ALL_TESTS()` is called.
- **Linker errors for GoogleTest functions:** Confirm library linkage and header paths.
- **Assertion failures:** Read the output message carefully; it shows which assertion failed.
- **Tests crashing:** Check test code and the tested functions for invalid memory access.

### Best Practices

- Write **small, focused tests** â€” one assertion per test is a good rule.
- Use **`EXPECT_`** assertions if you want the test to continue after failure; use **`ASSERT_`** if failure should abort the test.
- Use **test fixtures** (`TEST_F`) when dealing with common setup/teardown.
- Give **descriptive names** to your tests and test suites.
- Run tests frequently during development to catch regressions early.

---

## 5. Next Steps & Related Documentation

- **Explore Structuring Test Suites:** Learn how to organize multiple related tests effectively.
- **Master Running Tests and Interpreting Results:** Understand advanced running strategies and output interpretation.
- **Diving into Mocking with GoogleMock:** Once comfortable with basic tests, learn how to write mocks for better isolation.
- **Understand Assertions and Matchers:** Deepen your knowledge of GoogleTest assertions for complex validation.
- **Error Handling and Debugging:** Read troubleshooting guides for fixing test failures and crashes.

---

## Additional Resources
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md)
- [gMock for Dummies](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md)

---

## Summary
This beginner's tutorial guides you through writing and running your first test case using GoogleTest. It covers the essentials of test structure, assertions, and test fixtures, helping you establish a foundation for solid unit testing in C++. Practical examples illustrate simple function and class testing along with best practices and troubleshooting tips to ensure successful test execution.

---

## Example Minimal Test File
```cpp
#include <gtest/gtest.h>

// Function to be tested
int Multiply(int a, int b) {
  return a * b;
}

// Test Suite and Test Case
TEST(MultiplyTest, HandlesPositiveInput) {
  EXPECT_EQ(Multiply(3, 4), 12);
  EXPECT_EQ(Multiply(0, 10), 0);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Follow the above template to quickly build your first test program.

---