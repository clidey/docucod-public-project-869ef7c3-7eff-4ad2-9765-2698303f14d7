---
title: "Writing Your First Test"
description: "Step through creating your first simple unit test using GoogleTest. This guide walks you through initial setup, fundamental assertions, and essential runner commands, helping you establish solid testing habits from the outset."
---

# Writing Your First Test

Step through creating your first simple unit test using GoogleTest. This guide walks you through initial setup, fundamental assertions, and essential runner commands, helping you establish solid testing habits from the outset.

---

## Workflow Overview

### What You Will Achieve
By following this guide, you'll write your first unit test using GoogleTest. You'll learn how to:
- Set up a basic test case and test suite
- Write simple assertions to validate code behavior
- Build and run your tests using the GoogleTest framework
- Understand the test result outputs

### Prerequisites
Make sure you have:
- GoogleTest properly installed and configured in your project (see Installation Guide)
- A basic C++ development environment set up (compiler, build system)
- Source code to test (a simple function or class to verify)

### Expected Outcome
After completing this guide, you will have a working test executable that:
- Includes at least one test suite with one or more test cases
- Runs tests and reports success or failure clearly
- Demonstrates fundamental GoogleTest macros and assertions

### Estimated Time
About 10-15 minutes.

### Difficulty Level
Beginner-friendly.

---

## Step-by-Step Instructions

### Step 1: Include GoogleTest Headers
Ensure your test source file includes the GoogleTest header to access the testing macros:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Write a Simple Test Using TEST Macro
The `TEST` macro defines a basic test function. It takes two arguments:
- The test suite name (grouping tests)
- The test name

Here's an example that tests a simple `Factorial` function:

```cpp
// Example factorial function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Define a test in the suite 'FactorialTest' with the name 'HandlesZeroInput'
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Another test case
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- Use `EXPECT_EQ` to assert expected equality: `EXPECT_EQ(actual, expected)`.
- The test body can contain standard C++ code.

### Step 3: Build Your Test Executable
Compile your test source file along with GoogleTest into an executable.
- If using CMake, link with the `gtest` or `gtest_main` libraries.

Example CMake snippet:

```cmake
add_executable(my_test test_file.cc)
target_link_libraries(my_test gtest_main)
```

### Step 4: Run the Tests
Run your built test binary. GoogleTest will:
- Discover all defined tests
- Run each test and report results

Sample console output:

```text
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### Step 5: Interpret Results
- `PASSED` means your assertions succeeded.
- Failures print the location and expected vs actual values.

---

## Best Practices

- Name test suites and tests clearly reflecting their intent.
- Use `EXPECT_*` assertions to allow multiple checks per test, `ASSERT_*` for fatal conditions.
- Keep tests independent and isolate failures.
- Write tests before or along with your code for better coverage.

---

## Common Pitfalls

- Forgetting to link with GoogleTest libraries.
- Using `TEST()` instead of `TEST_F()` if you intend to use fixtures.
- Omitting `testing::InitGoogleTest(&argc, argv);` and `RUN_ALL_TESTS()` in `main()` when you write one.
- Not returning the value of `RUN_ALL_TESTS()` in your `main()`.

---

## Troubleshooting

### Test Fails To Compile
- Check proper inclusion of `<gtest/gtest.h>`.
- Verify library paths and link flags are set correctly.

### Tests Run But No Tests Found
- Confirm that `TEST()` macros are expanded and not hidden behind macros.
- Ensure that the code containing tests is compiled and linked.

### Tests Fail But You Expect Them To Pass
- Review assertion failure details carefully.
- Use verbose output with `--gtest_filter` to focus on single tests.

---

## Example Full Test Program

```cpp
#include <gtest/gtest.h>

// Simple function under test
int Factorial(int n) {
  return (n == 0) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Save this in a file (e.g. `factorial_test.cc`), then build and run.

---

## Next Steps & Related Content

- Explore **Using Assertions Effectively** to write more comprehensive tests.
- Learn about **Test Fixtures** (`TEST_F()`) for testing with shared objects.
- Dive into **Writing and Running Tests** for more detailed examples.
- Check out the [GoogleTest Primer](primer.md) for foundational concepts.
- Once comfortable, explore Mocking with GoogleMock for testing interactions.

---

<Tip>
Start simple and build confidence. Writing your first test is a foundation for reliable, maintainable C++ software. GoogleTest's framework is designed to make this process smooth and approachable.
</Tip>

<Note>
If you encounter issues with linking or running tests, refer to the Installation Guide and Prerequisites documentation.
</Note>

<Warning>
Always ensure you call `RUN_ALL_TESTS()` and return its result in your main() to correctly report test results.
</Warning>
