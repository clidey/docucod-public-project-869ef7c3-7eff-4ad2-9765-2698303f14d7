---
title: "Writing and Running Your First Test"
description: "A hands-on walkthrough to creating your initial unit test: structuring test cases, using assertions, compiling, and executing tests using GoogleTest."
---

# Writing and Running Your First Test

Welcome to your first hands-on experience writing and running a unit test with GoogleTest. This guide walks you through structuring your initial test case, using assertions, building the test binary, and executing your tests with GoogleTestâ€™s test runner.

---

## 1. Overview: What This Guide Helps You Accomplish

This guide is designed to help you achieve the following goals:

- Write your first simple test case using GoogleTest, ensuring it compiles.
- Learn how to use assertions to verify code behavior.
- Build your test executable using a supported build system.
- Run your tests and interpret their results.

By the end of this walkthrough, you will have a working test executable that exercises a piece of code and reports success or failure.

### Prerequisites

Before starting:

- Ensure GoogleTest and GoogleMock are installed and configured in your environment. Consult the installation guide if not set up.
- Confirm your build system (such as CMake or Bazel) is configured to build and link tests with GoogleTest.
- Basic familiarity with C++ and compiling C++ code.

### Expected Outcome

You will have a test executable that:

- Contains one or more test cases.
- Verifies conditions using assertion macros.
- Provides output reporting which tests passed or failed.

### Time Estimate

Approximately 15-30 minutes depending on your setup.

### Difficulty Level

Beginner-friendly; no advanced knowledge of GoogleTest or mocking required.

---

## 2. Step-by-Step Workflow

### Step 1: Create a Test Source File

Create a new C++ test file, for example, `my_first_test.cc`.

### Step 2: Include GoogleTest Headers

Start your file by including the necessary GoogleTest headers:

```cpp
#include <gtest/gtest.h>
```

If you are using GoogleMock features, include `<gmock/gmock.h>` instead.

### Step 3: Define a Test Case

Use the `TEST()` macro to define a test. It takes two parameters: the test suite name and the test name.

Example:

```cpp
TEST(HelloTest, BasicAssertions) {
  // Assert that true is true
  EXPECT_TRUE(true);
  
  // Assert that values are equal
  EXPECT_EQ(1 + 1, 2);
}
```

This test checks that the basic assertions work as expected.

### Step 4: Compile the Test

Make sure your build system includes this test source, links against GoogleTest libraries, and produces an executable.

For example, using g++ manually:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include \
    -pthread my_first_test.cc /path/to/libgtest.a -o my_first_test
```

Or configure your build tool accordingly. Refer to installation guides for CMake or Bazel integration.

### Step 5: Run the Test Executable

Execute your test binary:

```bash
./my_first_test
```

You should see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms your test passed.

### Step 6: Experiment with Failures

Modify your test to verify failure reporting, e.g.: 

```cpp
EXPECT_EQ(1 + 1, 3); // Will fail
```

Rebuild and rerun. The output will include failure details helping you debug.

### Step 7: Use Fixtures for Grouping Tests (Optional, Progressive Step)

Once comfortable, define fixtures to share setup and teardown between tests:

```cpp
class MyTestFixture : public testing::Test {
 protected:
  void SetUp() override {
    // Initialization
  }
  void TearDown() override {
    // Cleanup
  }
};

TEST_F(MyTestFixture, Test1) {
  EXPECT_TRUE(true);
}

TEST_F(MyTestFixture, Test2) {
  EXPECT_EQ(2 + 2, 4);
}
```

---

## 3. Understanding Assertion Macros

Assertions verify expectations in tests:

- `EXPECT_TRUE(expression)` - Test continues on failure.
- `ASSERT_TRUE(expression)` - Test aborts on failure.
- `EXPECT_EQ(val1, val2)` - Expects two values equal.
- `ASSERT_EQ(val1, val2)` - As above but aborts test on failure.

Use `EXPECT_` macros when the test can continue safely after failure, and `ASSERT_` macros when the failure makes it impossible or meaningless to continue.

---

## 4. Building and Running Tests

GoogleTest integrates seamlessly with common build systems.

### Building with CMake

Add the following to your `CMakeLists.txt`:

```cmake
find_package(GTest REQUIRED)

add_executable(my_first_test my_first_test.cc)

target_link_libraries(my_first_test GTest::gtest_main pthread)

include(GoogleTest)
gtest_discover_tests(my_first_test)
```

Then:

```bash
mkdir build && cd build
cmake ..
make
ctest
```

### Running Tests Manually

Run the test binary directly:

```bash
./my_first_test
```

### Command-Line Options

GoogleTest test runners support options like:

- `--gtest_filter=TestSuite.TestName` to run specific tests.
- `--gtest_repeat=N` to repeat tests N times.
- `--gtest_output=xml:filename.xml` to produce XML reports.

Use these options as needed to control test execution.

---

## 5. Troubleshooting

### Tests Not Running or Found

- Verify your test binary links to GoogleTest and includes test source files.
- Ensure `main()` is present or use `gtest_main` library for automatic main.
- Check for typos in `TEST()` macros.

### Compilation Errors

- Confirm GoogleTest include paths and libraries are correctly configured.
- Check C++ standard flags match GoogleTest build (C++17 recommended).

### Test Failures

- Review failure messages and stack traces for clues.
- Use `--gmock_verbose=info` (if using mocks) to gain insight into mock interactions.

---

## 6. Best Practices and Tips

- Name your tests clearly to describe behavior.
- Keep tests focused, testing one logical concept per test.
- Use fixtures (`TEST_F`) to avoid duplication.
- Use `EXPECT_` for non-fatal assertions and `ASSERT_` when continuing is meaningless.
- Run tests frequently during development.

---

## 7. Next Steps

- Explore [Understanding Assertions and Test Results](/guides/getting-started/common-assertions) to learn detailed assertions usage.
- Learn mock object creation and expectations in [Creating and Using Mock Objects](/guides/mocking-techniques/creating-mocks).
- Study [Building and Running Tests](/getting-started/first-test-experience/building-running-tests) for advanced build system integration.
- Review sample tests in [Exploring Sample Tests](/getting-started/first-test-experience/exploring-samples) to see practical example code.

---

## References

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [GoogleTest API Reference - Test Cases & Suites](/api-reference/core-testing/test-cases-and-suites)
- [GoogleMock for Dummies](docs/gmock_for_dummies.md)
- [gMock Cookbook](docs/gmock_cook_book.md)

---

**Happy testing!**

---

## Sample Minimal Test File Example

```cpp
#include <gtest/gtest.h>

TEST(SimpleTest, TrueIsTrue) {
  EXPECT_TRUE(true);
  EXPECT_EQ(1 + 1, 2);
}
```

Compile and run this minimal test to verify your setup.

---