---
title: "Writing Your First Unit Test"
description: "A practical, step-by-step guide for creating your first test file using GoogleTest. Covers defining test cases, using basic assertion macros, understanding test results, and interpreting failures to close the feedback loop for new users."
---

# Writing Your First Unit Test with GoogleTest

Welcome to your journey in mastering GoogleTest! This guide walks you through creating your very first C++ test file using the GoogleTest framework. You'll define test cases, leverage basic assertions to verify behavior, understand test results, and learn how to interpret failures — closing the feedback loop to write effective tests confidently.

---

## 1. Getting Started with a Basic Test

### What You Will Achieve
This section helps you create a simple, standalone test case using the `TEST` macro, enabling you to confirm that your setup is correct and understand the fundamental structure of a GoogleTest unit test.

### Prerequisites
- A C++17 (or newer) compliant compiler installed.
- GoogleTest and GoogleMock libraries installed and configured in your build system (CMake, Bazel, etc.).
- Basic familiarity with C++ syntax and project compilation.

### Writing Your First Test
1. Include the GoogleTest header.

```cpp
#include <gtest/gtest.h>
```

2. Define a test using the `TEST` macro. It requires two identifiers: a test suite name and a test name — both must be valid C++ identifiers without underscores.

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- Here, `FactorialTest` is the test suite grouping related test cases.
- The test names `HandlesZeroInput` and `HandlesPositiveInput` describe the specific behavior tested.
- `EXPECT_EQ` asserts that the actual and expected values are equal.

3. Implement the function under test (e.g., `Factorial`) in your codebase.

4. Compile your test program by linking against GoogleTest.

5. Run your compiled test binary; GoogleTest executes all registered tests and reports results.

### Outcome
Your program runs the defined tests and prints a report summarizing successes and failures.

---

## 2. Understanding Test Macros and Assertions

### TEST vs TEST_F
- `TEST(TestSuiteName, TestName)`: Defines a simple test without shared setup/teardown.
- `TEST_F(TestFixtureName, TestName)`: Defines a test that uses a fixture class, allowing shared setup, teardown, and data among tests.

Example of a fixture:

```cpp
class QueueTest : public testing::Test {
 protected:
  void SetUp() override {
    q_.Enqueue(1);
  }

  Queue<int> q_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q_.size(), 1);
}
```

Use fixtures if multiple tests require the same initial state or resources.

### Basic Assertion Macros
- `EXPECT_EQ(val1, val2)` / `ASSERT_EQ(val1, val2)`: Checks equality.
- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`: Checks that condition is true.
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`: Checks that condition is false.

**Note:** _EXPECT_ versions report failure but continue the test; _ASSERT_ versions abort the current function on failure.

---

## 3. Running Your Tests

1. Call `testing::InitGoogleTest()` in your `main()` function to initialize GoogleTest with command line flags.

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. `RUN_ALL_TESTS()` runs all registered tests and returns 0 if all pass, 1 if any fail.

Running the test binary yields clearly formatted output indicating each test's status.

---

## 4. Interpreting Test Results and Failures

### Standard Output Example

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
/path/to/factorial_test.cc:15: Failure
Expected equality of these values:
factorial(3)
  Which is: 5
3
/path/to/factorial_test.cc:16: Failure
Expected equality of these values:
factorial(8)
  Which is: 40319
40320
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput
```

- `RUN` lines mark test start.
- `OK` or `FAILED` lines mark test outcome.
- Failure details show source file, line number, and descriptive messages.

### Troubleshooting Failures
- Check your function implementation corresponds to expected results.
- Use the line and file information to locate assertion failures.
- Fix issues and rerun tests.

---

## 5. Tips for Success

- **Test Naming**: Avoid underscores to prevent internal macro conflicts.
- **Assertions**: Prefer `EXPECT_` for non-fatal checks to see multiple failures per test.
- **Test Isolation**: Tests run independently; avoid state leakage between tests.
- **Fixtures**: Use `TEST_F` for shared test setup/teardown code.
- **Skips and Failures**: Use `GTEST_SKIP()` to skip tests dynamically, and `FAIL()` or `ADD_FAILURE()` to register failures.

---

## 6. Troubleshooting Common Issues

<Tip>
If your test does not compile with `TEST_F`, ensure your fixture class has a default constructor.
</Tip>

<Tip>
If tests fail to link, verify that static constants are defined outside of class declarations.
</Tip>

<Warning>
Do not ignore the return value of `RUN_ALL_TESTS()`. Your program's exit code should reflect test results.
</Warning>

If test failures are unclear, use the `SCOPED_TRACE()` macro to add contextual messages to assertion failures for better diagnostics.

---

## 7. Next Steps

- Explore writing test fixtures for shared setup: [Test Fixtures](https://github.com/google/googletest/blob/main/docs/primer.md#same-data-multiple-tests)
- Learn about mocking with GoogleMock: [First Mock Test Guide](https://github.com/google/googletest/blob/main/guides/getting-started/first-mock-usage.md)
- Dive deeper into assertions and matchers: [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- Integrate tests into your build and CI pipelines.

---

## References
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Testing Reference: TEST Macros](https://github.com/google/googletest/blob/main/docs/reference/testing.md#TEST)
- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [FAQ: Common Questions](https://github.com/google/googletest/blob/main/docs/faq.md)

---

Start your test journey with confidence! Every great C++ project begins with its tests, and GoogleTest makes writing them straightforward and reliable.

---