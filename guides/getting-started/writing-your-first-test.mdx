---
title: "Writing Your First Test"
description: "A hands-on guide to writing your first unit test using GoogleTest. Step through the process of creating a test file, defining test cases, using assertions, and running tests from the command line."
---

# Writing Your First Test

A hands-on guide to writing your first unit test using GoogleTest. Step through the process of creating a test file, defining test cases, using assertions, and running tests from the command line.

---

## Overview

### What You Will Learn
This guide will help you:
- Set up a test file for GoogleTest
- Define basic test cases using `TEST` macros
- Use assertions to verify expected outcomes
- Build and run tests using the command line

### Prerequisites
Before starting, ensure that:
- GoogleTest is installed and properly configured in your build system
- You have a C++ development environment set up
- You understand basic C++ syntax and compilation processes

### Expected Outcome
By following this guide, you will create, compile, and run your first test suite using GoogleTest, laying the foundation for robust C++ testing.

### Estimated Time
Approximately 10-15 minutes.

### Difficulty Level
Beginner.

---

## Step-by-Step Instructions

### Step 1: Create a Test Source File
Create a new C++ source file named `sample_test.cc` (or any name you prefer).

Example:
```cpp
// sample_test.cc
#include <gtest/gtest.h>

// Your test cases will go here
```

**Result:** You have a basic test file ready to define tests.

---

### Step 2: Define Your First Test Case
Use the `TEST(TestSuiteName, TestName)` macro to create a test.

**Example:**
```cpp
TEST(MathTest, Addition) {
  // Test that 2 + 2 equals 4
  EXPECT_EQ(2 + 2, 4);
}
```

**Notes:**
- `TestSuiteName` groups related tests together.
- `TestName` names the individual test case.
- Do **not** use underscores (`_`) in these names as GoogleTest uses `_` internally and it may cause naming collisions.

**Result:** You have a test case that checks a basic addition.

---

### Step 3: Add More Tests
Add additional test cases to the same file to cover other scenarios.

**Example:**
```cpp
TEST(MathTest, Subtraction) {
  EXPECT_EQ(10 - 5, 5);
}

TEST(MathTest, Multiplication) {
  EXPECT_EQ(3 * 7, 21);
}

TEST(MathTest, Division) {
  EXPECT_EQ(20 / 4, 5);
}
```

**Result:** You have multiple related tests grouped under the `MathTest` suite.

---

### Step 4: Write Assertions
Assertions verify if your tested code behaves as expected. GoogleTest provides both fatal (`ASSERT_*`) and non-fatal (`EXPECT_*`) assertion macros.

**Differences:**
- `ASSERT_*`: Stops the current test immediately if the assertion fails.
- `EXPECT_*`: Records the failure but continues running the test.

Use assertions appropriate to your test logic to enable detailed reporting.

**Example Assertion Usage:**
```cpp
EXPECT_EQ(actual_value, expected_value);  // Non-fatal
ASSERT_TRUE(condition);                   // Fatal
```

---

### Step 5: Build the Test Executable
Compile your test source file and link it with the GoogleTest libraries.

If using `g++` directly, assuming GoogleTest is installed and its headers and libraries are accessible:

```bash
g++ -std=c++17 -isystem /usr/include/gtest -pthread sample_test.cc -lgtest_main -lgtest -o sample_test
```

**Notes:**
- Replace `/usr/include/gtest` with your actual GoogleTest include path.
- The `-pthread` flag is necessary for thread support.
- Linking with `-lgtest_main` provides a default `main()` function.

If using CMake or Bazel, refer to their respective installation and build guides for integration.

---

### Step 6: Run Your Tests
Execute the compiled test binary.

```bash
./sample_test
```

You should see output like:

```none
[==========] Running 4 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 4 tests from MathTest
[ RUN      ] MathTest.Addition
[       OK ] MathTest.Addition (0 ms)
[ RUN      ] MathTest.Subtraction
[       OK ] MathTest.Subtraction (0 ms)
[ RUN      ] MathTest.Multiplication
[       OK ] MathTest.Multiplication (0 ms)
[ RUN      ] MathTest.Division
[       OK ] MathTest.Division (0 ms)
[----------] 4 tests from MathTest (0 ms total)

[----------] Global test environment tear-down
[==========] 4 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 4 tests.
```

**Result:** Your tests ran successfully.

---

## Tips & Best Practices

- **Test Names:** Avoid underscores in `TestSuiteName` and `TestName`.
- **Assertions:** Prefer `EXPECT_*` for continued testing even after failures, and `ASSERT_*` when further execution of the test would be meaningless.
- **Independent Tests:** Keep tests independent to avoid order dependencies.
- **Use Test Fixtures:** When multiple tests share setup code, use test fixtures (`TEST_F` macro).
- **Check Return Code:** If you write a custom `main()`, always return `RUN_ALL_TESTS()` result to properly reflect test success/failure.
- **Run Single Tests:** Use `--gtest_filter` to run specific tests by name.

---

## Troubleshooting

### Common Issues

- **Compilation Errors:** Check include paths and that you link against `gtest` and `gtest_main`.
- **Tests Not Running:** Verify your test macros and naming. Ensure no underscores in test names.
- **Ignoring Return Value Warning:** If writing your own `main()`, ensure you return the result of `RUN_ALL_TESTS()`.
- **Linker Errors:** Ensure GoogleTest was built with the correct C++ standard and runtime.
- **Test Output Is Confusing:** Use `--gtest_brief=1` for concise output or `--gtest_color=yes` for colorful logs.

### How to Check Tests Are Loaded
Run your test binary with:

```bash
./sample_test --gtest_list_tests
```

It will list all discovered tests without running them.

---

## Next Steps & Related Content

- **Writing and Running Your First Test [Quickstart Primer](../getting-started/first-test-and-validation/quickstart-primer.md):** Learn more foundational testing concepts.
- **Installing GoogleTest with CMake:** Set up GoogleTest in your environment if not yet done.
- **Using Test Fixtures:** When your tests share setup or teardown steps.
- **Assertions Reference:** Deep dive into all available assertion macros and their usage.
- **Mocking Dependencies:** Advance your tests by mocking with GoogleMock.

Explore these guides to enhance your understanding and testing capabilities.

---

## Example: Complete `sample_test.cc`
```cpp
#include <gtest/gtest.h>

TEST(MathTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

TEST(MathTest, Subtraction) {
  EXPECT_EQ(10 - 5, 5);
}

TEST(MathTest, Multiplication) {
  EXPECT_EQ(3 * 7, 21);
}

TEST(MathTest, Division) {
  EXPECT_EQ(20 / 4, 5);
}
```

Build and run as described in steps 5 and 6.

---

## Summary
Writing your first test with GoogleTest involves creating a test source file, defining tests with the `TEST` macro, using assertions to verify behavior, and building/running your test binary. This introduces you to the basic workflow so you can start confidently writing automated unit tests for your C++ code.

---

<Info>
For detailed information on test fixtures, parameterized tests, and advanced features, see [GoogleTest Primer](../getting-started/first-test-and-validation/quickstart-primer.md) and the [Testing Reference](../docs/reference/testing.md).
</Info>

<Warning>
Avoid underscores in test suite and test names to prevent naming conflicts and subtle bugs as explained in the [FAQ on naming](../docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).
</Warning>

<Check>
When running your tests, always verify that the exit code is checked to detect failures.
</Check>

---

## Useful Commands Reference

| Command | Description |
|---------|-------------|
| `TEST(Suite, Test)` | Defines a new test case |
| `EXPECT_EQ(val1, val2);` | Checks equality (non-fatal) |
| `ASSERT_TRUE(cond);` | Checks condition (fatal) |
| `RUN_ALL_TESTS();` | Runs all tests, returns success status |

---

## Links
- [GoogleTest Primer](../getting-started/first-test-and-validation/quickstart-primer.md)
- [Assertions Reference](../docs/reference/assertions.md)
- [Writing Test Fixtures](../guides/getting-started/test-structure-and-discovery.md)
- [GoogleTest FAQ](../docs/faq.md)
- [Installation and Setup Guide](../guides/getting-started/installation-setup.md)
- [Integration with GoogleMock](../guides/core-testing-workflows/mocking-with-googlemock.md)

---

**Happy Testing!**
