---
title: "Writing Your First Test"
description: "A step-by-step guide to creating your first unit test using GoogleTest, introducing test structure, assertions, and best practices for starting effective testing from day one."
---

# Writing Your First Test

A step-by-step guide to creating your first unit test using GoogleTest, introducing test structure, assertions, and best practices for starting effective testing from day one.

---

## 1. What You Will Achieve

Welcome to your first journey into automated testing with GoogleTest. This guide will walk you through:

- Writing a basic test case that runs successfully.
- Understanding the basic structure of a test.
- Using assertions to validate your code.
- Learning best practices for sustainable test writing.

By the end, you will have a foundational test ready to build upon as your project grows.

### Prerequisites

Before starting, ensure you have:

- A C++ development environment with C++17 support.
- GoogleTest installed and accessible in your build environment.
- Basic familiarity with C++ syntax and compilation.

### Expected Outcome

You will create a simple test program, compile it, execute it, and observe the test framework reporting success or failure.

### Time Estimate

About 15 to 30 minutes from start to finish.

### Difficulty Level

Beginner-friendly — no prior experience with GoogleTest needed.

---

## 2. Step-by-Step Guide to Writing Your First Test

Let's demystify test writing. Follow these focused steps to create and run your first GoogleTest test.

### Step 1: Include the GoogleTest Header

At the top of your test source file, add:

```cpp
#include <gtest/gtest.h>
```

This includes all core test framework utilities.

### Step 2: Write a Simple Test Case

Define a test using the `TEST()` macro:

```cpp
// Define a test named HandlesZeroInput in the test suite FactorialTest
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Verify that Factorial(0) returns 1
}
```

- The first parameter is the test suite name — group related tests here.
- The second parameter is the individual test name.
- `EXPECT_EQ` is an assertion checking for equality.

> Replace `Factorial` with your function under test or a simple trivial example if unfamiliar.

### Step 3: Implement the Tested Function (Minimal)

If you don't have an existing function, create a minimal implementation for testing purposes:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

### Step 4: Write Multiple Tests for Different Scenarios

Add more test cases to cover other input values:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 5: Write the main() Function to Run Tests

Create an entry point to run all tests:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);  // Parse command-line flags
  return RUN_ALL_TESTS();                  // Run all tests and return results
}
```

- This initializes the test framework.
- `RUN_ALL_TESTS()` executes all registered tests and returns `0` on success.

### Step 6: Compile and Link Your Test

Use your build system or command line. For example with `g++`:

```bash
g++ -std=c++17 -isystem /path_to_gtest/include -pthread your_test.cc /path_to_gtest/libgtest.a /path_to_gtest/libgtest_main.a -o your_test_executable
```

- Replace `/path_to_gtest/` with actual GoogleTest paths.
- Link with pthread (`-pthread`) is required on most Unix-like systems.

### Step 7: Run Your Test

Execute:

```bash
./your_test_executable
```

Observe the output — a successful test run will report:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### Step 8: Interpret Your Results

- If all tests pass, you've correctly set up and written your first tests.
- If some fail, the output points to the file and line with the failing assertion.
- You can add meaningful failure messages by streaming into assertions:

```cpp
EXPECT_EQ(Factorial(0), 1) << "Factorial(0) must be 1";
```

---

## 3. Best Practices & Tips

- **Name Tests Clearly.** Use meaningful test suite and test names to portray intent.
- **Keep Tests Small.** Each test should verify a single aspect.
- **Use Assertions Wisely.** Prefer `EXPECT_*` unless failure means test shouldn't continue (`ASSERT_*`).
- **Isolate Tests.** Tests must not depend on each other or shared global state.
- **Setup & Teardown.** Use test fixtures (`TEST_F`) for shared setup.
- **Use GoogleTest Features.** Explore parameterized tests and value-parameterized tests as you grow.

---

## 4. Common Pitfalls to Avoid

- **Missing `main()` function.** Your tests need entry point unless you link to Google Test's `gtest_main`.
- **Not linking with GoogleTest libraries correctly.** Ensure linkage to `gtest` and `gtest_main`.
- **Failing to initialize GoogleTest.** Always call `InitGoogleTest()` before `RUN_ALL_TESTS()`.
- **Ignoring assertion results.** Pay attention to test failures in output.
- **Overcomplicating First Test.** Keep initial test very simple.

---

## 5. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Test">
<Accordion title="Test executable does not compile due to missing gtest headers">
Verify GoogleTest include directories are correctly specified in your compiler command using `-isystem` or equivalent.
</Accordion>
<Accordion title="Linker errors for GoogleTest symbols">
Ensure you link against the GoogleTest libraries (`-lgtest -lgtest_main`) and link with pthread if required (`-pthread`).
</Accordion>
<Accordion title="No tests run when executing test binary">
Make sure your test functions are registered properly by using the `TEST()` macro.

Verify you call `InitGoogleTest()` before running tests.
</Accordion>
<Accordion title="Assertion failures unexpectedly occur">
Review your test inputs and expected values carefully.

Use verbose test output by running tests with `--gtest_print_time=1` to pinpoint slow or failing tests.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

- Explore [Writing Your First Mock](https://google.github.io/googletest/guides/getting-started/writing-your-first-mock.html) to mock interfaces in tests.
- Learn about [Using Assertions and Matchers](https://google.github.io/googletest/guides/core-workflows/using-assertions-and-matchers.html) for richer validation.
- Dive into [Organizing Test Suites](https://google.github.io/googletest/guides/core-workflows/organizing-test-suites.html) for scalable testing.
- Check out integration with build systems in [Integrating with Build Systems](https://google.github.io/googletest/guides/integration-and-best-practices/integrating-with-build-systems.html).

---

## 7. Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — detailed introduction.
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — for mocking techniques.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — official API guide.

---

## Example Full Test File

```cpp
#include <gtest/gtest.h>

// Simple factorial implementation
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test suite FactorialTest, test HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test suite FactorialTest, test HandlesPositiveInput
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

Begin with this simple pattern to start benefitting from automated unit testing immediately.

<Check>
Remember: writing your first test is the foundation for all future testing success. Maintain clarity and simplicity as your guiding principles.
</Check>
