---
title: "Writing Your First Test"
description: "A step-by-step walkthrough of creating your first unit test, explaining test case structure, the assertion model, and basic execution flow using GoogleTest."
---

# Writing Your First Test

A step-by-step walkthrough of creating your first unit test, explaining test case structure, the assertion model, and basic execution flow using GoogleTest.

---

## 1. What You Will Achieve
This guide leads you through the process of writing your very first test case using GoogleTest. By the end, you'll understand how to organize tests, write assertions, and run your tests to validate code behavior.

### Prerequisites
- A C++ development environment with GoogleTest installed and configured.
- Basic knowledge of C++ syntax and programming concepts.

### Expected Outcome
- You will create a simple unit test using GoogleTest macros.
- Familiarize yourself with test structure and the assertion model.
- Successfully run the test and interpret the outcome.

---

## 2. Getting Started: Understanding Test Structure

### Test Suites and Tests
GoogleTest organizes tests into **Test Suites**, each containing multiple **Tests**. This grouping helps you organize tests around common code components or functionality.

- **Test Suite:** A named group representing related tests (e.g., `FactorialTest`).
- **Test:** An individual test case verifying a particular behavior within the suite.

### The `TEST()` Macro
Use the `TEST(TestSuiteName, TestName)` macro to define a test function:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

This declares a test named `HandlesZeroInput` inside the `FactorialTest` suite.

### Assertions
Assertions check conditions in your tests and determine pass/fail:

- `EXPECT_*` assertions report failures but continue executing the test.
- `ASSERT_*` assertions abort the current test on failure.

Example assertion:

```cpp
EXPECT_EQ(actual_value, expected_value);
```

---

## 3. Writing Your First Test: Step-by-Step

<Steps>
<Step title="Write a Simple Test Case">
Define a test using the `TEST()` macro.

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

This test verifies the factorial function for positive inputs.
</Step>

<Step title="Include GoogleTest Headers">
Make sure to include the GoogleTest header in your test source file.

```cpp
#include <gtest/gtest.h>
```

This includes all the necessary declarations for writing tests.
</Step>

<Step title="Create a `main()` Function to Run Tests">
Add the standard test runner `main()` function to execute your tests:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes and runs all tests registered with GoogleTest.
</Step>

<Step title="Build and Run Your Test">
Compile your test program linking against GoogleTest libraries.

Run the test binary: it will output which tests passed or failed.
</Step>

<Step title="Interpret Test Output">
Review the console output. Successful tests show `[  PASSED  ]` with test details.

Failing tests show detailed error messages and locations.

Example:
```
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
```
</Step>
</Steps>

---

## 4. Using Test Fixtures for Reusable Setups

When multiple tests require the same setup, use a **Test Fixture**:

### Defining a Fixture Class
Derive a class from `testing::Test`:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
  }
  Queue<int> q0_;
  Queue<int> q1_;
};
```

### Writing Tests with Fixture
Use the `TEST_F()` macro to write tests that use the fixture:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

Each test gets a fresh fixture instance, ensuring isolation.

---

## 5. Best Practices and Tips

- **Name tests descriptively:** Reflect what the test verifies.
- **Use `EXPECT_*` unless test cannot continue:** Helps identify multiple failures.
- **Group related tests logically:** Use test suites and fixtures.
- **Avoid dependencies between tests:** Keep tests independent and repeatable.
- **Call `RUN_ALL_TESTS()` only once:** Calling multiple times may cause unexpected behavior.

---

## 6. Troubleshooting Common Issues

- **Linker errors:** Verify GoogleTest is correctly linked in your build system.
- **Tests donâ€™t run:** Ensure your test binary is executed, and tests are registered properly.
- **Test fails unexpectedly:** Use verbose output or debugging to find assertion failures.
- **Compiler errors with GoogleTest macros:** Check correct inclusion of headers and macro usage.

<Tip>
If you encounter unexpected test failures, run your test binary with the `--gtest_break_on_failure` flag for easier debugging.
</Tip>

---

## 7. Next Steps

- Explore [Running & Validating Tests](https://example.com/guides/getting-started/running-tests) to learn how to execute and interpret test results.
- Use [Mocking with GoogleMock](https://example.com/guides/core-testing-workflows/mocking-basics) to write tests involving external dependencies.
- Read the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for a deeper understanding of concepts and features.

---

## Reference Example: Simple Test Program

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example demonstrates the use of `TEST()`, assertions, and the `main()` entry point.

---

For complete details, see [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md).

---