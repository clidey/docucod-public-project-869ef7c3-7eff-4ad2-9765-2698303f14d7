---
title: "Writing Your First Test"
description: "A hands-on, guided example for creating and running a basic unit test with GoogleTest. Includes explanations of fundamental assertions, test cases, and interpreting test output, giving newcomers a quick path to initial success."
---

# Writing Your First Test

## Introduction

Welcome to your first step in using GoogleTest! This guide provides a clear, practical walkthrough to write and run a basic unit test using GoogleTest. By the end of this guide, you will understand how to set up your test environment, create simple test cases, use assertions to verify behavior, and interpret test outcomes.

## Prerequisites

Before you begin, ensure the following are in place:

- GoogleTest and GoogleMock are installed and properly configured in your development environment.
- Your project includes the necessary headers: `#include <gtest/gtest.h>` and optionally `#include <gmock/gmock.h>` for mock support.
- Your build system is configured to compile and link with GoogleTest libraries.

If you have not completed installation and configuration, please refer to the [Setup and Installation Guide](https://github.com/google/googletest/blob/main/docs/guides/getting-started/setup-and-installation.md).

## Expected Outcome

By completing this guide, you will be able to:

- Write a simple test function using the `TEST` macro.
- Use basic assertions such as `EXPECT_EQ` to verify conditions.
- Compile and run your test binary.
- Recognize the output of a successful or failed test.

## Time Estimate

This guide should take about 15-30 minutes depending on your familiarity with C++ and your development environment.

---

## Step-by-Step Instructions

### 1. Include GoogleTest Headers

Begin by including the essential GoogleTest headers in your test source file:

```cpp
#include <gtest/gtest.h>
```

If you plan to use mocking, also include:

```cpp
#include <gmock/gmock.h>
```

### 2. Define a Simple Test Case

Use the `TEST()` macro to define a test. It takes two arguments: the test suite name and the test name. Write assertions inside the test body to verify behavior.

Example: Testing a simple factorial function

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### 3. Compile Your Test

Compile the test source file with your compiler, linking against GoogleTest and GoogleMock libraries. Example command using `g++`:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread \
    test_factorial.cc /path/to/libgtest.a /path/to/libgmock.a -o test_factorial
```

Replace `/path/to/...` with your actual paths.

### 4. Run the Test Executable

Execute your test binary:

```bash
./test_factorial
```

Sample output for successful tests:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest prints a detailed failure message with file name, line number, and the failed assertion.

### 5. Interpreting Test Results

- A passed test suite reports `[  PASSED  ]` status.
- If any assertion fails, the test reports `[  FAILED  ]` with context.
- Use the line numbers reported to locate failures in your code.

### 6. Use Test Fixtures for Shared Setup (Optional)

For multiple related tests needing shared setup, define a test fixture:

```cpp
class QueueTest : public ::testing::Test {
 protected:
  Queue<int> queue;

  void SetUp() override {
    queue.Enqueue(1);
    queue.Enqueue(2);
  }
};

TEST_F(QueueTest, IsEmptyInitially) {
  Queue<int> empty_queue;
  EXPECT_EQ(empty_queue.size(), 0);
}

TEST_F(QueueTest, EnqueueAndDequeue) {
  EXPECT_EQ(queue.size(), 2);
  int* item = queue.Dequeue();
  ASSERT_NE(item, nullptr);
  EXPECT_EQ(*item, 1);
  delete item;
}
```

Use `TEST_F()` instead of `TEST()` to use the fixture.

---

## Practical Tips & Best Practices

- Organize tests logically in suites reflecting your code structure.
- Use `EXPECT_` macros for non-fatal assertions to gather multiple failures per test.
- Use `ASSERT_` macros to immediately abort on conditions that block further progress.
- Name your test suites and tests clearly to describe the scenario and expected outcome.
- Run tests frequently and in isolation to catch problems early.

---

## Troubleshooting

### Common Issues

- **Test not discovered or running:** Ensure you call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` in your `main()`.
- **Linker errors:** Confirm your linker includes GoogleTest and GoogleMock libraries.
- **Multiple definitions:** Avoid defining tests in headers included in multiple translation units.

Refer to the [Troubleshooting Installation & Setup](https://github.com/google/googletest/blob/main/docs/getting-started/first-steps-validation/troubleshooting-setup.md) guide for detailed help.

---

## Next Steps & Related Content

- Proceed to the [Using Assertions Effectively](https://github.com/google/googletest/blob/main/docs/guides/core-workflows/using-assertions-effectively.md) guide to deepen your test verification skills.
- Explore [Mocking for Dummies](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md) to start integrating mocks in your tests.
- Review [Running Tests and Understanding Results](https://github.com/google/googletest/blob/main/docs/guides/getting-started/running-tests-and-understanding-results.md) for deeper insight into test outputs.

---

## Example Complete Test File

```cpp
#include <gtest/gtest.h>

// A simple function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test case for zero input
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test case for positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

// Entry point
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example encapsulates the full workflow from defining tests to running them.

---

## Summary

You are now ready to write basic unit tests using GoogleTest, set expectations, and verify outcomes confidently. Building on this foundation will empower you to implement robust, maintainable, and scalable tests for your C++ projects.
