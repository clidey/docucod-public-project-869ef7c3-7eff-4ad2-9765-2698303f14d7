---
title: "Setting Up and Running Your First Test"
description: "A step-by-step beginner's walkthrough covering environment setup, project integration, and writing your very first test using GoogleTest. Covers build tools, test discovery, and fundamental command-line test execution."
---

# Setting Up and Running Your First Test

## Overview

This guide walks you through setting up your environment, integrating GoogleTest into your C++ project, and writing and running your very first test. You will learn how to work with build tools, enable test discovery, and execute tests from the command line — all essential skills for beginning your testing journey with GoogleTest.

## Prerequisites

Before you proceed, ensure the following:

- Your system meets the [GoogleTest prerequisites and system requirements](/getting-started/setup-prerequisites-installation/prerequisites-system-requirements), including a supported OS, compatible compiler (C++17 or later), and installed build tools like CMake or Bazel.
- You have cloned or downloaded the GoogleTest repository from GitHub (`https://github.com/google/googletest`) or have the GoogleTest source available.
- Basic familiarity with C++ development workflows and your chosen build system.

## Expected Outcome

By the end of this guide, you will have:

- Successfully integrated GoogleTest into your C++ project build using CMake or Bazel.
- Written a minimal test using the `TEST()` macro.
- Built and run the test executable, observing test discovery and result reporting.

## Time Estimate

Approximately 30 minutes for beginners, depending on prior familiarity with C++ build tools.

---

## Step-by-Step Instructions

### 1. Set Up Your Project Directory

Create a directory structure for your project if you don't have one already. For example:

```
my_project/
 ├── include/
 ├── src/
 ├── tests/
 └── CMakeLists.txt
```

Place your test source files inside the `tests/` directory.

### 2. Add GoogleTest to Your Build System

#### Using CMake

You have two flexible options to add GoogleTest:

##### A. Download and Build GoogleTest Separately

- Clone the repository:
  ```bash
  git clone https://github.com/google/googletest.git
  cd googletest
  mkdir build && cd build
  cmake ..
  make
  sudo make install  # Optional: install system-wide
  ```
- Then link your tests against the installed GoogleTest libraries.

##### B. Integrate GoogleTest Directly Into Your Project

- Add the following snippet in your project `CMakeLists.txt` to fetch GoogleTest at configure time:

  ```cmake
  include(FetchContent)
  FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
  )
  FetchContent_MakeAvailable(googletest)

  enable_testing()

  add_executable(my_tests tests/my_test.cc)
  target_link_libraries(my_tests gtest_main)
  add_test(NAME MyTests COMMAND my_tests)
  ```

This approach ensures the same compiler settings and consistent builds.

#### Using Bazel

- Add GoogleTest as a Bazel dependency by following the official Bazel integration instructions from the [Installation guide](/getting-started/setup-prerequisites-installation/installation-integration).

### 3. Write Your First Test

Create a new source file `my_test.cc` in your `tests/` directory with the following content:

```cpp
#include <gtest/gtest.h>

// A simple function to test:
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Define a test suite and test using GoogleTest's TEST() macro
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### 4. Build the Test Executable

- **For CMake:**
  ```bash
  cd my_project/build
  cmake ..
  make
  ```
  This compiles your tests and links in GoogleTest.

- **For Bazel:**
  ```bash
  bazel test //tests:my_tests
  ```

### 5. Run Your Tests

Run the test executable directly or via your build system:

- If using CMake, you can run:
  ```bash
  ./my_tests
  ```
- This will automatically discover and execute all tests registered with GoogleTest.

### 6. Observe Test Output

GoogleTest produces clear output with test suite and test names, alongside success or failure messages. Successful tests will show `PASSED` status, and failures will provide detailed diagnostics including source code location.

### 7. Experiment with Command-Line Options

To control test execution, you can pass flags such as:

```bash
./my_tests --gtest_filter=FactorialTest.Handles*
./my_tests --gtest_output=xml:report.xml
```

For a complete list of command line options, see the [GoogleTest Primer](primer.md#invoking-the-tests).

---

## Best Practices & Tips

- **Use `gtest_main` library**: When linking your tests, prefer `gtest_main` which provides a default `main()` function calling `RUN_ALL_TESTS()`.
- **Group related tests** in `TEST()` suites for clarity and maintainability.
- Use `EXPECT_*` assertions for non-fatal failures within a test to gain comprehensive failure reports.
- Use `ASSERT_*` assertions if a failure should abort the current test's execution early.
- Always check the return value of test execution (0 means success).

---

## Troubleshooting

<Tip>
If you encounter build errors:
- Verify compiler supports C++17 or later.
- Confirm that CMake or Bazel paths to GoogleTest are correct.
- Check linking errors typically indicate missing or misconfigured GoogleTest libraries.
</Tip>

<Tip>
If your tests do not run or show zero tests discovered:
- Ensure your tests are compiled and linked into the test executable.
- Verify that all test files include `<gtest/gtest.h>` and use the `TEST()` or `TEST_F()` macros.
- Confirm the test executable is running `RUN_ALL_TESTS()` or is linked with `gtest_main`.
</Tip>

<Warning>
Avoid calling `RUN_ALL_TESTS()` multiple times in a test executable, as this can lead to undefined behavior.
</Warning>

---

## Next Steps

- Explore writing tests with [Test Fixtures and Suites](/guides/common-workflows/test-fixtures) to reuse common code.
- Learn about [Assertions and Matchers](/guides/getting-started/basic-assertions) for more powerful test validations.
- Integrate GoogleTest into continuous integration by following the [Build & CI Integration guide](/overview/inside-googletest/integration-points).
- Review the [GoogleTest Primer](primer.md) for a deep dive into test writing conventions.


---

## Sample Test Code Summary

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example includes a simple function under test, two test cases grouped in a test suite, and a main function initializing GoogleTest and running all registered tests.

---

Thank you for taking this first step toward boosting your C++ project’s quality and reliability with GoogleTest. Your tests are now set up, built, and running correctly!



