---
title: "Setting Up and Quickstart"
description: "A concise walkthrough covering installation, project setup, and building your first test case using CMake or Bazel. Learn the minimum required steps to integrate GoogleTest/GoogleMock into your C++ project and run your initial test suite."
---

# Setting Up and Quickstart

A concise walkthrough covering installation, project setup, and building your first test case using CMake or Bazel. Learn the minimum required steps to integrate GoogleTest/GoogleMock into your C++ project and run your initial test suite.

---

## 1. Introduction

This guide takes you through the essential steps to get GoogleTest and GoogleMock up and running in your C++ project. By following this quickstart, you'll install the libraries, configure your build system with CMake or Bazel, and write and execute your first test to verify the setup.

### Why This Matters
GoogleTest and GoogleMock simplify validation and debugging in C++ by automating unit tests and mocks. Correct setup is critical for seamless test discovery, compilation, linking, and execution.

---

## 2. Prerequisites

Before starting, ensure:

- You have a C++17-capable compiler installed (such as GCC 7+, Clang 7+, MSVC 2017+).
- CMake version 3.13 or later is installed (for CMake builds).
- Bazel build tool is set up if you prefer Bazel.
- Basic familiarity with C++ build systems.

If you havenâ€™t installed GoogleTest or GoogleMock yet, refer to the [Installation Methods](../getting-started/prerequisites-installation/installation-methods) guide.

---

## 3. Installation

### Standalone Installation Using CMake

1. **Clone the Repo:**

   ```bash
   git clone https://github.com/google/googletest.git -b main
   cd googletest
   ```

2. **Create and enter a build directory:**

   ```bash
   mkdir build && cd build
   ```

3. **Generate build scripts:**

   - To build both GoogleTest and GoogleMock (default):

     ```bash
     cmake ..
     ```

   - To build only GoogleTest (without GoogleMock):

     ```bash
     cmake .. -DBUILD_GMOCK=OFF
     ```

4. **Build:**

   ```bash
   make
   ```

5. **Install (optional, requires admin rights):**

   ```bash
   sudo make install
   ```

### Using Bazel

GoogleTest and GoogleMock come with Bazel BUILD files allowing integration as dependencies in a Bazel workspace.

Refer to community Bazel integration tutorials or GoogleTest's [Integration with Build Systems](../overview/use-cases-integration/integration-with-build-systems) for details.

---

## 4. Configuring Your Project with GoogleTest and GoogleMock

Integration involves informing your build system where to find GoogleTest/GoogleMock headers, libraries, and source files, and how to link against them.

### Using CMake

The recommended approach is to add GoogleTest as a subdirectory. This ensures compatibility between your tests and GoogleTest's compilation settings.

Add the following to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/heads/main.zip
)
FetchContent_MakeAvailable(googletest)

enable_testing()

add_executable(your_test_executable your_test_file.cpp)
target_link_libraries(your_test_executable gtest_main gmock_main)
add_test(NAME your_test COMMAND your_test_executable)
```

- `gtest_main` provides a main function that calls `RUN_ALL_TESTS()`.
- Linking both `gtest_main` and `gmock_main` ensures access to mocking features.

Ensure your test source files include GoogleTest headers:

```c++
#include <gtest/gtest.h>
#include <gmock/gmock.h>  // If using GoogleMock
```

### Using Bazel

Create a `BUILD` file with GoogleTest dependencies:

```starlark
cc_binary(
    name = "your_test",
    srcs = ["your_test.cc"],
    deps = ["@com_google_googletest//:gtest_main", "@com_google_googletest//:gmock_main"],
    testonly = True,
)
```

Run your test with `bazel test //:your_test`.

---

## 5. Writing Your First Test

GoogleTest uses test macros to define tests. Follow these steps:

1. **Create a test file:**

   ```cpp
   // your_test.cpp

   #include <gtest/gtest.h>

   // A simple test
   TEST(SampleTest, Addition) {
     EXPECT_EQ(1 + 1, 2);
   }
   ```

2. **(Optional) Use GoogleMock:**

   Include mocking headers and define mock classes as needed.

3. **Build your test executable:**

   Follow your build system setup from section 4.

### Example: Simple Addition Test

```cpp
#include <gtest/gtest.h>

TEST(MathTest, SimpleAdd) {
  EXPECT_EQ(2 + 2, 4);
}
```

Compile and link this with GoogleTest libraries as configured.

---

## 6. Building and Running Tests

### Building

Use your configured build system:

- **CMake:**

  ```bash
  cmake --build build
  ```

- **Bazel:**

  ```bash
  bazel build //:your_test
  ```

### Running Tests

Run the test binary directly or use your build system's test runner:

- **Direct execution:**

  ```bash
  ./your_test_executable
  ```

- **CMake CTest:**

  ```bash
  ctest --output-on-failure
  ```

- **Bazel:**

  ```bash
  bazel test //:your_test
  ```

You should see output indicating test results, like:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.Addition
[       OK ] SampleTest.Addition (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

---

## 7. Quick Troubleshooting Tips

<AccordionGroup Group="Troubleshooting Quick Tips">
<Accordion title="Build Failures or Linking Errors">
- Verify the include directories and linked libraries match your setup.
- For CMake, ensure `FetchContent` successfully downloads and integrates Googletest.
- Confirm C++17 support is enabled in your compiler flags.
</Accordion>
<Accordion title="Tests Not Discovered or Not Running">
- Confirm test functions use the `TEST()` or `TEST_F()` macros from GoogleTest.
- Use `TEST_F()` when using fixtures.
- Make sure you call `InitGoogleTest()` or link with `gtest_main`.
- Confirm no conflicting main functions exist.
</Accordion>
<Accordion title="Runtime Errors or Crashes">
- Use `ASSERT_*` assertions to check preconditions in tests to avoid null pointer dereferences.
- Run tests individually to isolate failing test.
</Accordion>
</AccordionGroup>

---

## 8. Best Practices and Tips

- **Link `gtest_main` or `gmock_main`** to avoid writing your own main function.
- Always **return the value from** `RUN_ALL_TESTS()` in your `main()`.
- Use **test fixtures** (`TEST_F()`) to share setup/teardown for multiple related tests.
- Separate your test code from production code in your project's directory.
- Use **command-line flags** (`--gtest_filter=TestSuiteName.TestName`) to run selective tests.

---

## 9. Next Steps and Related Documentation

- Explore how to [write your first test](../getting-started/first-test-run/create-first-test) in detail.
- Learn about [running tests and interpreting output](../getting-started/first-test-run/run-tests).
- Consult installation and configuration guides:
  - [Installation Methods](../getting-started/prerequisites-installation/installation-methods)
  - [Initial Configuration](../getting-started/prerequisites-installation/initial-configuration)
- For advanced testing strategies, visit [Writing Basic Tests](../guides/getting-started/writing-basic-tests) and [Using GoogleMock](../guides/getting-started/using-googlemock).

---

## Appendix: Minimal Example CMakeLists.txt

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTests LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)

FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/heads/main.zip
)
FetchContent_MakeAvailable(googletest)

enable_testing()

add_executable(my_test my_test.cpp)

target_link_libraries(my_test gtest_main gmock_main)

add_test(NAME my_test COMMAND my_test)
```

---

## Appendix: Minimal Example Test (my_test.cpp)

```cpp
#include <gtest/gtest.h>

TEST(QuickTest, CheckTrue) {
  EXPECT_TRUE(true);
}
```

---