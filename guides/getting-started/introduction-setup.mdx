---
title: "Introduction and Environment Setup"
description: "Learn what GoogleTest and GoogleMock are, how they fit into your C++ development process, and how to get started. Follow platform-specific setup instructions and understand integration with popular build systems to prepare your project for modern C++ testing."
---

# Introduction and Environment Setup

## Workflow Overview

**Task Description:**
This guide introduces you to GoogleTest and GoogleMock, explaining their roles in C++ development and how to prepare your environment for writing and running tests. It includes platform-specific setup instructions and guidance for integrating with prominent build systems.

**Prerequisites:**
- Familiarity with basic C++ development.
- Access to a supported compiler (supporting C++17 or later).
- Basic understanding of build systems such as CMake or Bazel.

**Expected Outcome:**
- A clear understanding of what GoogleTest and GoogleMock are.
- Successfully set up GoogleTest and GoogleMock in your development environment.
- Integration with your project's build system configured.

**Time Estimate:** 15-30 minutes.

**Difficulty Level:** Beginner.

---

## Step-by-Step Instructions

### 1. Understand What GoogleTest and GoogleMock Are

GoogleTest (gTest) is a C++ testing framework built to help you write maintainable, automated tests. GoogleMock (gMock) is an extension of GoogleTest that specializes in creating mock classes and setting expectations on interactions, which is invaluable for unit testing code that has dependencies.

Key points:
- GoogleMock provides a declarative syntax to define mock classes.
- It supports mocking virtual and non-virtual methods.
- It allows setting runtime expectations, asserting call order, frequency, and arguments.
- It integrates seamlessly with GoogleTest for comprehensive test writing.

### 2. Prepare Your Development Environment

- Ensure you have a C++ compiler that supports at least C++17.
- Install a build system supported by GoogleTest, such as:
  - **CMake** (version >= 3.10 recommended)
  - **Bazel**
- Verify your platform compatibilityâ€”GoogleTest supports major OSes including Linux, Windows, and macOS.

Refer to the [Prerequisites & System Requirements](https://google.github.io/googletest/getting-started/setup/prerequisites) page for detailed compiler and platform support information.

### 3. Obtain GoogleTest and GoogleMock

GoogleMock is bundled with GoogleTest, so you only need to get GoogleTest from its repository:

```bash
git clone https://github.com/google/googletest.git
```

### 4. Integrate GoogleTest into Your Project

#### Using CMake

- Add GoogleTest as a subdirectory or external project.
- Link your test targets against `gtest` and `gmock` libraries.

Example snippet in your `CMakeLists.txt`:

```cmake
add_subdirectory(googletest)
include_directories(${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)
target_link_libraries(your_test_target gtest gmock)
```

#### Using Bazel

- Use the official GoogleTest Bazel rules.
- Define `cc_test` targets with dependencies on `@com_google_googletest//:gtest_main` and `:gmock`.

See the [Integration & Extensibility](https://google.github.io/googletest/overview/architecture-concepts/integration-overview) page for full instructions.

### 5. Initialize GoogleTest and GoogleMock in Your Test Code

Within your `main()` function (or equivalent), initialize GoogleMock (which also initializes GoogleTest):

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
    testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
}
```

On embedded or platform-specific systems without standard `argc/argv`, use the overload that does not take parameters.

### 6. Confirm Installation

- Write a simple test case and a mock class to verify setup: create a mock class using the `MOCK_METHOD()` macro and an `EXPECT_CALL()`.
- Build and run your test binary.
- Confirm that tests run and GoogleMock reports expectations properly.

If errors such as missing symbols or linker errors occur, review your build configuration.

---

## Examples & Code Samples

### Simple Mock Class Definition

```cpp
#include <gmock/gmock.h>

class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};
```

### Minimal Test Using GoogleMock

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::AtLeast;

TEST(TurtleTest, MovesForward) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, Forward(100))
      .Times(AtLeast(1));

  // Code under test that uses turtle
  turtle.Forward(100);
}
```

---

## Troubleshooting & Tips

### Common Issues

- **Linker errors**: Ensure `gtest` and `gmock` libraries are linked correctly.
- **Unrecognized macros or methods**: Check `#include <gmock/gmock.h>` is present.
- **Missing virtual destructors**: Mock base classes must have a virtual destructor.
- **Build system incompatibilities**: Confirm minimum version requirements (e.g., CMake, Bazel).

### Best Practices

- Prefer using `ON_CALL` for setting default behaviors and `EXPECT_CALL` for interactions you want to verify.
- Use `NiceMock` or `StrictMock` to control the strictness of uninteresting calls.
- Mock only interfaces you own or create mock interfaces yourself to avoid brittle dependencies.
- Leverage existing matchers and actions for expressive and maintainable tests.

### Performance Considerations

- Move mock class implementations to `.cc` files to reduce compilation times.
- Minimize the number of mocks per test to keep tests focused and fast.

### Alternative Approaches

- For non-virtual functions, consider interface wrappers for mockability.
- Use templating or dependency injection to switch between real and mock implementations at compile time.

---

## Next Steps & Related Content

- Start writing tests with the [Writing Basic and Parameterized Tests](https://google.github.io/googletest/guides/getting-started/writing-tests) guide.
- Explore [Assertions and Test Outcomes](https://google.github.io/googletest/guides/getting-started/core-assertions) to verify test results.
- Learn about mock behaviors and customization in [Defining and Using Mocks](https://google.github.io/googletest/guides/mocking-patterns/defining-using-mocks).
- Review the [Quickstart Workflow](https://google.github.io/googletest/overview/features-workflows/quickstart-workflow) for end-to-end test creation steps.

---