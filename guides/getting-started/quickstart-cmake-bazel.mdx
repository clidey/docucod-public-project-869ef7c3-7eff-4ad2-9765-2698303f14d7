---
title: "Quickstart: Setting Up with CMake or Bazel"
description: "Learn how to set up your development environment to use GoogleTest and GoogleMock with CMake or Bazel, from installation through first successful build and test run, ensuring a frictionless start whatever your preferred toolchain."
---

# Quickstart: Setting Up with CMake or Bazel

Learn how to set up your development environment to use GoogleTest and GoogleMock with CMake or Bazel, from installation through first successful build and test run, ensuring a frictionless start whatever your preferred toolchain.

---

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Set Up a Project](#set-up-a-project)
3. [Create and Run a Test Binary](#create-and-run-a-test-binary)
4. [Building and Running the Tests](#building-and-running-the-tests)
5. [Next Steps](#next-steps)

---

## Prerequisites

Before you begin, ensure your environment meets the following requirements:

- **Operating System:** Linux, macOS, or Windows
- **C++ Compiler:** Supports at least C++17 standard
- **Build Tools:** 
  - For CMake: [CMake](https://cmake.org/), plus a compatible build tool such as Make, Ninja, or your platform's native tools
  - For Bazel: Bazel version 7.0 or higher

> The instructions here use Unix shell style prompts but apply equally on Windows command prompts or PowerShell.

For platform compatibility details, see the [Supported Platforms](platforms.md) page.


## Set Up a Project

You will create a minimal project that fetches GoogleTest as a dependency and compiles your test binary.

### Setting Up with CMake

1. Create a directory for your project and move into it:

```bash
mkdir my_project && cd my_project
```

2. Create a file `CMakeLists.txt` with the following contents. This configures your project to fetch and use GoogleTest:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

# GoogleTest requires at least C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
)
# For Windows: Prevent overriding the parent project's compiler/linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)
```

The above snippet declares GoogleTest as a dependency. The URL points to a specific commit for stability; update the hash occasionally to stay current.

### Setting Up with Bazel

1. Create your Bazel workspace directory:

```bash
mkdir my_workspace && cd my_workspace
```

2. Create a `MODULE.bazel` file with the following content to specify GoogleTest as a dependency:

```
# MODULE.bazel

bazel_dep(name = "googletest", version = "1.17.0")
```

This enables Bazel to download and manage GoogleTest.


## Create and Run a Test Binary

To verify your setup, create a simple test that demonstrates GoogleTest assertions.

### Write a Basic Test

Create a file named `hello_test.cc` with the following code:

```cpp
#include <gtest/gtest.h>

// Demonstrate some basic assertions.
TEST(HelloTest, BasicAssertions) {
  // Expect two strings not to be equal.
  EXPECT_STRNE("hello", "world");
  // Expect equality.
  EXPECT_EQ(7 * 6, 42);
}
```

This test checks that two strings differ and that 7 multiplied by 6 equals 42.

### Add Build Configuration

#### For CMake Projects

Add the following to your `CMakeLists.txt` below the existing `FetchContent_Declare` and `FetchContent_MakeAvailable`:

```cmake
enable_testing()

add_executable(
  hello_test
  hello_test.cc
)
target_link_libraries(
  hello_test
  GTest::gtest_main
)

include(GoogleTest)
gtest_discover_tests(hello_test)
```

This configures:
- Enabling the test framework
- Declaring your test executable
- Linking to GoogleTestâ€™s main entrypoint
- Automatically discovering tests within the binary

#### For Bazel Projects

Create a `BUILD` file alongside your `hello_test.cc` with the following contents:

```
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This defines your test target with dependencies on GoogleTest libraries.


## Building and Running the Tests

### Using CMake

Build your project:

```bash
cmake -S . -B build
cmake --build build
```

Run the tests with CTest:

```bash
cd build
ctest
```

Expected output will indicate a passed test similar to:

```
Test project .../my_project/build
    Start 1: HelloTest.BasicAssertions
1/1 Test #1: HelloTest.BasicAssertions ........   Passed    0.00 sec

100% tests passed, 0 tests failed out of 1

Total Test time (real) =   0.01 sec
```

### Using Bazel

Build and run your test:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

You should see output indicating the test ran and passed, including lines like:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[  PASSED  ] 1 test.
```


## Next Steps

Congratulations! You have successfully set up GoogleTest using either CMake or Bazel, created a basic test, built it, and verified it runs.

To continue your journey, consider:

- Exploring the [GoogleTest Primer](primer.md) to learn how to write more detailed and effective tests.
- Reviewing the [Googletest Samples](samples.md) for various usage scenarios.
- Diving into [Writing Your First Unit Test](guides/getting-started/writing-your-first-test) for deeper insights.
- Learning how to create mocks with [Creating and Using Test Doubles with GoogleMock](guides/getting-started/first-mocking-workflow).

If you encounter issues, the [Troubleshooting Common Setup Issues](getting-started/troubleshooting/common-setup-issues.md) guide will help resolve most problems.

---

<Tip>
Remember to keep your compiler and build tools updated to support C++17 features fully, as this is required by GoogleTest.
</Tip>

<Note>
Linking with `gtest_main` or `gmock_main` libraries automatically provides a suitable `main()` function. You only need a custom `main` if you require special initialization.
</Note>