---
title: "Quickstart: Testing with Bazel"
description: "A step-by-step introduction to adding GoogleTest to projects managed by Bazel. Includes dependency setup, test discovery, and running your tests in different environments."
---

# Quickstart: Testing with Bazel

This guide walks you through adding GoogleTest to your C++ projects managed by Bazel. You’ll set up dependencies, write a simple test, and run your tests across different environments. It’s designed for developers new to GoogleTest or those refreshing their Bazel workflow.

## Workflow Overview

### Task Description
Learn how to configure Bazel to build and run GoogleTest-based tests.

### Prerequisites
- A compatible OS (Linux, macOS, or Windows).
- A C++ compiler that supports at least C++17.
- Bazel version 7.0 or higher installed. For installation help, visit the [Bazel installation guide](https://bazel.build/install).

### Expected Outcome
You will have a Bazel workspace configured to use GoogleTest, a sample test file, a Bazel build rule, and knowledge to build and run your test binary.

### Time Estimate
Approximately 15 to 30 minutes.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### 1. Create Your Bazel Workspace
Your Bazel workspace is the root directory where Bazel locates your source files.

```bash
$ mkdir my_workspace && cd my_workspace
```

### 2. Declare GoogleTest Dependency
Create a `MODULE.bazel` file to specify GoogleTest as a dependency via the Bazel Central Registry.

```starlark
# MODULE.bazel

# Specify the GoogleTest version to use.
bazel_dep(name = "googletest", version = "1.17.0")
```

### 3. Write a Simple Test
Create a `hello_test.cc` file inside your workspace.

```cpp
#include <gtest/gtest.h>

// Basic test example demonstrating some GoogleTest assertions.
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Expects strings are not equal.
  EXPECT_EQ(7 * 6, 42);               // Expects values are equal.
}
```

### 4. Create Bazel Build Rule
Add a `BUILD` file alongside your test source to declare the test binary and dependencies.

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

*Explanation:* `cc_test` creates a test binary linked against the GoogleTest libraries.

### 5. Build and Run Your Test
Use Bazel commands specifying C++17 support explicitly.

```bash
$ bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

**Expected output snippet:**

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This output confirms your test was successfully built, run, and passed.

---

## Practical Tips & Best Practices

- Always specify `--cxxopt=-std=c++17` (or the equivalent flag for MSVC) to ensure consistent C++17 compilation.
- Use `--test_output=all` to see full test logs for troubleshooting or verification.
- Keep your Bazel `MODULE.bazel` dependency updated to access the latest GoogleTest features and fixes.
- For larger projects, modularize tests within subdirectories and use corresponding `BUILD` files.

---

## Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Build Fails Due to Missing Headers or Libraries">
Verify that your `MODULE.bazel` file is correctly configured and that Bazel has downloaded the googletest dependency. Run `bazel clean --expunge` and retry.
</Accordion>
<Accordion title="Test Binary Does Not Run or Cannot Discover Tests">
Make sure you link to both `@googletest//:gtest` and `@googletest//:gtest_main` in your BUILD file's `deps`. The `gtest_main` target provides the test runner main function.
</Accordion>
<Accordion title="Compilation Errors About C++ Version">
Ensure Bazel receives the correct compiler option by specifying `--cxxopt=-std=c++17` or your compiler’s equivalent standard flag.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Explore the [GoogleTest Primer](primer.md) to learn how to write a variety of test cases and assertions.
- For an alternative build system setup, check out [Quickstart: Testing with CMake](quickstart-cmake.md).
- Review [Supported Platforms & Ecosystem](overview/introduction-and-value/supported-platforms-and-ecosystem.md) for compatibility details.
- If interested in mocking, jump to the [gMock for Dummies](gmock_for_dummies.md) guide.


---

## Summary Diagram: Bazel Test Workflow

```mermaid
flowchart TD

  A[Create Bazel Workspace (my_workspace)] --> B[Declare googletest dependency in MODULE.bazel]
  B --> C[Write test source (hello_test.cc)]
  C --> D[Define cc_test rule in BUILD file]
  D --> E{Build & Run Test}
  E -->|bazel test --cxxopt=-std=c++17| F[Run test binary and execute tests]
  F --> G[Verify test output shows PASSED]

  classDef startend fill:#b3e6b3,stroke:#333,stroke-width:2px
  class A,G startend
```

---