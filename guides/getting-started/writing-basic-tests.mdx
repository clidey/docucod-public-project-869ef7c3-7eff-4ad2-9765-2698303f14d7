---
title: "Writing Your First Tests"
description: "Learn how to define and execute simple unit tests, use core assertions, and interpret test results. This practical walkthrough helps you evaluate your code's correctness and sets the stage for more advanced checks."
---

# Writing Your First Tests

## Workflow Overview

### What This Guide Helps You Accomplish
This guide walks you through defining and running your very first unit tests using GoogleTest. You will learn how to write simple test cases, use core assertions to validate your code, and interpret the results reported by the framework.

### Prerequisites
- GoogleTest and GoogleMock are installed and integrated into your C++ project.
- Your build environment is set up correctly to compile and run GoogleTest tests (see "Configuring Your Project").
- Basic knowledge of C++ syntax and compilation.

### Expected Outcome
After completing this workflow, you will have:
- Written functional test cases to evaluate your C++ code.
- Used different assertion macros to verify expected behavior.
- Compiled and run test binaries.
- Understood how to read and interpret test output.

### Time Commitment
Approximately 15-30 minutes, depending on familiarity with C++ and testing.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### Step 1: Define a Simple TEST
GoogleTest uses the `TEST()` macro to declare test functions inside test suites. A test suite groups logically related tests while each test checks one aspect of your code.

Example: Testing a hypothetical `Factorial` function:

```cpp
// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

**What You Should See:**
- Tests named `HandlesZeroInput` and `HandlesPositiveInput` included under the `FactorialTest` suite.

---

### Step 2: Use Assertions to Check Conditions
Assertions verify your code state. Choose between nonfatal `EXPECT_` and fatal `ASSERT_` variants:

- `EXPECT_*` lets the test continue after failure.
- `ASSERT_*` aborts the test on failure.

Example:

```cpp
EXPECT_EQ(x.size(), y.size()) << "Vectors differ in length";

for (int i = 0; i < x.size(); ++i) {
  EXPECT_EQ(x[i], y[i]) << "Difference at index " << i;
}
```

**Use Case:** Use `ASSERT_` when further test code depends on a successful check (like dereferencing a pointer).

---

### Step 3: Create a Test Fixture for Shared Setup
When multiple tests share setup or objects, define a test fixture class deriving from `testing::Test`.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Setup common queues
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

**Outcome:** Each test runs with a fresh fixture instance, ensuring tests are independent.

---

### Step 4: Compile Your Tests
Use your build system (e.g., CMake, Bazel) to compile the test sources including GoogleTest.

Typical CMake linking example:

```cmake
add_executable(my_tests my_tests.cpp)
target_link_libraries(my_tests gtest_main gmock)
add_test(NAME my_tests COMMAND my_tests)
```

Run the build to produce a test binary.

---

### Step 5: Run Your Tests
Execute the compiled test binary.

Standard output includes:
- Test suite and test names.
- Assertion summaries and failures.
- A final summary with count of tests passed and failed.

Example:

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
...
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput
```

---

### Step 6: Interpret and Troubleshoot Test Results
- Check failed assertions for file and line info.
- Read failure messages and any streamed messages after assertions.
- Use `--gtest_filter` flag to run specific tests for quick iteration.

Example:

```
./my_tests --gtest_filter=FactorialTest.HandlesZeroInput
```

---

## Practical Tips & Best Practices

- **Name Your Tests Clearly:** Test and suite names should reflect their purpose without underscores.
- **Keep Tests Independent:** Avoid shared state modifications between tests.
- **Use Fixtures When Sharing Setup:** Ensures consistency and cleaner code.
- **Prefer `EXPECT_` Over `ASSERT_` When Possible:** More errors can be found per run.
- **Use Custom Failure Messages:** Stream messages after assertions to clarify failures.
- **Incrementally Build Tests:** Start simple, validate, then extend.

---

## Example: A Complete Simple Test File

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Tests
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Tests">
<Accordion title="Test Does Not Run">
- Verify the test macro `TEST` or `TEST_F` is used properly.
- Ensure your test source files are included in the build.
- Check for typos or invalid names with underscores.
</Accordion>
<Accordion title="Assertion Failures">
- Read the file and line number.
- Confirm the values tested meet the expected condition.
- Use streamed messages to clarify failures.
- Use debugger or verbose output for deeper inspection.
</Accordion>
<Accordion title="Linking or Compilation Errors">
- Confirm GoogleTest and GoogleMock libraries are linked.
- Validate include paths.
- Check the C++ standard version (must be C++17 or later).
</Accordion>
<Accordion title="Tests Pass but Logic is Wrong">
- Add more detailed assertions.
- Use multiple tests focusing on smaller units.
- Test boundary conditions and error cases.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Explore [Assertions Reference](../reference/assertions.md) for richer verification macros.
- Learn about test fixtures in the [GoogleTest Primer](../primer.md#same-data-multiple-tests).
- Proceed to writing [Advanced and Parameterized Tests](../advanced.md#parameterized-tests) to scale your testing.
- Integrate mocking with GoogleMock for testing complex behaviors.
- Consult [Validation & Troubleshooting](../getting-started/configuration-validation/validation-troubleshooting) for common setup issues.

---

## Additional Resources

- [GoogleTest Primer](../primer.md)
- [Writing and Running Your First Test](../getting-started/configuration-validation/writing-first-test)
- [GoogleMock Overview](../googlemock/README.md)
- [Googletest Samples](../docs/samples.md)
- Official repository: [https://github.com/google/googletest](https://github.com/google/googletest)


<Check>
Begin your testing journey here by writing simple, effective tests, verifying their output, and understanding test outcomes with clarity and confidence.
</Check>
