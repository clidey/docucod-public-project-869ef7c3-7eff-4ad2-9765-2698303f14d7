---
title: "Write Your First Test"
description: "A hands-on walkthrough for writing, building, and running a simple C++ unit test using GoogleTest. Learn how to define tests, use basic assertions, and execute your test suite to validate program behavior."
---

# Write Your First Test

## Introduction
Welcome to your first step in using GoogleTest for C++ unit testing. This guide provides a practical walkthrough to help you write, build, and run a simple test. By the end, you will understand how to define tests using the `TEST` macro, use basic assertions to verify behavior, and execute your test suite.

GoogleTest is designed to make testing your C++ code easy, organized, and reliable. Writing your first test will show you how to ensure your code works as expected and lays the foundation for more advanced testing patterns.

---

## Prerequisites
Before continuing, ensure you have the following:

- GoogleTest installed on your system, with headers and libraries accessible to your build system.
- A working C++ build environment, including a compiler that supports at least C++11.
- Basic knowledge of C++ syntax.


If you haven’t installed GoogleTest yet, refer to the [Installation on Standard Platforms](../../getting-started/setup-installation/installing-standard-platforms.md) guide.

---

## What This Guide Covers

- Writing a simple test function with the `TEST` macro
- Using basic assertions to verify behavior
- Compiling and linking your test with GoogleTest
- Running your test suite using `RUN_ALL_TESTS()`
- Understanding test results and exit codes

---

## Writing Your First Test

### Step 1: Define a Test Using `TEST`
GoogleTest defines tests using the `TEST` macro which takes two parameters:

1. **Test Suite Name**: Groups related tests logically
2. **Test Name**: The name of the individual test within the suite

Both parameters must be valid C++ identifiers and should **not contain underscores**.

Example:

```cpp
#include <gtest/gtest.h>

// A simple function to test
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Define a test suite named FactorialTest and a test named HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Define another test in the same suite
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 2: Use Assertions

Inside the test body, use GoogleTest assertions to check for expected outcomes. Common assertions include:

- `EXPECT_EQ(val1, val2)` – expects equality and continues on failure
- `ASSERT_TRUE(condition)` – expects condition to be true, aborting the current function on failure

Example:

```cpp
EXPECT_EQ(Factorial(0), 1);  // Check factorial of 0
EXPECT_EQ(Factorial(3), 6);  // Check factorial of 3
```

You can append custom failure messages with streaming:

```cpp
EXPECT_EQ(Factorial(3), 6) << "Factorial(3) calculation failed";
```

### Step 3: Write a Main Function to Run Tests

GoogleTest provides a main function you can link with (`gtest_main`) that automatically runs all tests. If you want to write your own `main()`, initialize GoogleTest and run all tests like so:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

The `RUN_ALL_TESTS()` function runs all tests that have been registered via the `TEST` macro and returns 0 if all tests pass, or 1 otherwise.

---

## Compiling and Linking Your Test

You must compile your test source files and link them with GoogleTest libraries.

Example compilation command (adjust paths as necessary):

```shell
# Using g++
g++ my_test.cc -lgtest -lgtest_main -pthread -o my_test
```

- `-lgtest` and `-lgtest_main` link GoogleTest libraries
- `-pthread` enables multi-threading support required by GoogleTest

Refer to your build system documentation or [Configuration Basics](../../getting-started/setup-installation/configuration-basics.md) for more details.

---

## Running Your Tests

Once compiled, run your test binary. The test runner will execute all defined tests and output the results:

```shell
./my_test
```

Sample output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

The program exits with a code of 0 if all tests pass, or 1 if any test fails.

---

## Tips and Best Practices

- **Test Independently:** Each `TEST` should be small, independent, and easy to debug.
- **Use Descriptive Names:** Name your test suites and tests clearly to reflect what they verify.
- **ASSERT vs EXPECT:** Use `ASSERT_*` when you want to abort the test early on a failure; use `EXPECT_*` to record failure but continue execution.
- **Avoid Underscores:** To reduce conflicts with GoogleTest internal naming conventions, avoid underscores in test suite and test names.

---

## Troubleshooting Common Issues

<AccordionGroup title="Common Issues When Writing Your First Test">
<Accordion title="Test Not Found or Not Running">
Make sure you have included `<gtest/gtest.h>` and that your test binary is linked with the GoogleTest libraries. Also, ensure that you call `RUN_ALL_TESTS()` in your main.
</Accordion>
<Accordion title="Compiler Errors with TEST Macro">
Check that your test suite and test names are valid C++ identifiers with no underscores. Also confirm your compiler supports C++11 or newer.
</Accordion>
<Accordion title="Tests Fail Unexpectedly">
Review assertion messages carefully and add descriptive failure messages using `<<` streaming. Run a single test in isolation using filters to narrow down the issue.
</Accordion>
<Accordion title="Linker Errors Related to gtest">
Verify library paths and the order of linking. On unix-like systems, `-lgtest -lgtest_main -pthread` order is important.
</Accordion>
</AccordionGroup>

---

## Next Steps

Once you are comfortable writing and running simple tests, explore these related guides:

- [Using Assertions Effectively](../guides/writing-effective-tests/assertions-best-practices.md) – Learn how to write expressive assertions.
- [Test Fixtures: Using the Same Data Configuration for Multiple Tests](../docs/primer.md#same-data-multiple-tests) – Share common setup and teardown using test fixtures.
- [Writing and Running Parameterized Tests](../guides/writing-effective-tests/parameterized-typed-tests.md) – Write tests that run with multiple input values.
- [Getting Started with Mocking](../guides/getting-started/mocking-basics.md) – Learn to write tests for code with dependencies using mocks.

---

## Additional Resources

- [GoogleTest Primer](../docs/primer.md) – An in-depth introduction to GoogleTest concepts.
- [GoogleTest Reference](../docs/reference/testing.md) – Detailed API reference for test macros, classes, and functions.
- [Troubleshooting Common Setup Issues](../../getting-started/first-test-experience/troubleshooting-common-issues.md) – Solutions for common build and setup problems.
- [GoogleTest Samples](../docs/samples.md) – Real-world test samples illustrating various features.

---

Congratulations on writing your first GoogleTest test! Testing is a vital part of software quality, and GoogleTest provides a powerful but approachable framework to support you. 

Keep experimenting and building your tests, and refer back to this guide whenever you need a refresher.