---
title: "Your First Test"
description: "Write and run your very first test using GoogleTest. This guide demystifies the basics of test case creation, assertions, and how to interpret results, ensuring even those new to testing can validate their code with ease and confidence."
---

# Your First Test with GoogleTest

This guide helps you write and run your very first test using GoogleTest. It demystifies the essentials of defining test cases, using assertions, and interpreting test results. Designed for users new to automated testing, this tutorial will empower you to validate your C++ code with confidence.

---

## Workflow Overview

- **Task Description:** Write, compile, and run a basic test case using the GoogleTest framework.
- **Prerequisites:**
  - A C++ development environment with GoogleTest installed and linked.
  - Basic familiarity with C++ syntax.
- **Expected Outcome:** A successful GoogleTest program that runs your first test and reports the result.
- **Time Estimate:** 10-15 minutes.
- **Difficulty Level:** Beginner.

---

## Step-by-Step Instructions

### 1. Include the GoogleTest Header

Start your test source file by including the main GoogleTest header:
```cpp
#include <gtest/gtest.h>
```
This header provides all the necessary macros and functions to write your tests.

### 2. Define a Simple Test Case

Use the `TEST()` macro to define a test. It takes two arguments:

- The **test suite name** — a container grouping related tests.
- The **test name** — identifies this specific test.

Both names must be valid C++ identifiers and, per best practice, should _not_ contain underscores to avoid naming conflicts.

Example - testing a factorial function:
```cpp
int Factorial(int n);  // Declaration of the function under test

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Each `EXPECT_EQ` assertion checks equality between expected and actual values. If any assertion fails, the entire test fails.

### 3. Write the `main()` Function

Add a main function to initialize and run all tests:
```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` parses command line arguments to configure testing behavior.
- `RUN_ALL_TESTS()` runs all registered tests and returns `0` if all succeed, or `1` otherwise.

> **Important:** Always return the result of `RUN_ALL_TESTS()` from your `main()` to ensure the test runner correctly observes success or failure.

### 4. Compile and Link Your Test

Compile your source file with your C++ compiler, linking with GoogleTest and Google's test main libraries (`-lgtest -lgtest_main -pthread` on Unix-like systems).

Example (Unix/macOS):
```bash
g++ my_test.cc -lgtest -lgtest_main -pthread -o my_test
```

### 5. Run Your Test Executable

Execute the compiled binary:
```bash
./my_test
```

Sample output on success:
```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If any test fails, GoogleTest prints detailed info about the failure including file, line number, expected and actual values.

---

## Understanding Assertions

GoogleTest includes a rich set of assertion macros:

- `EXPECT_*` — report failure but continue the test.
- `ASSERT_*` — report failure and abort the current test.

Use `EXPECT_*` assertions when further test evaluation makes sense after a failure, and `ASSERT_*` when subsequent operations depend on the assertion being true.

Example:
```cpp
TEST(MyTestSuite, Example) {
  ASSERT_NE(ptr, nullptr) << "Pointer must not be null!";
  EXPECT_EQ(*ptr, expected_value);
}
```

Common assertions:
- `EXPECT_EQ(val1, val2)` checks equality.
- `EXPECT_TRUE(condition)` checks boolean true.
- `ASSERT_NE(ptr, nullptr)` checks pointer is not null and aborts test if violated.

For full list, see the [GoogleTest Assertions Reference](docs/reference/assertions.md).

---

## Best Practices

* Avoid using underscores in test suite and test names to prevent naming conflicts.
* Use `TEST()` for simple tests; switch to `TEST_F()` when you need shared setup via test fixtures.
* Return the result of `RUN_ALL_TESTS()` in `main()`.
* Compile and run your tests often to catch failures early.
* Use descriptive failure messages by streaming custom messages into assertions with `<<`.
* Use `DISABLED_` prefix to temporarily exclude failing or incomplete tests.

---

## Troubleshooting

**Test not running?**
- Ensure your test source file is compiled and linked into your test executable.
- Confirm `main()` calls `RUN_ALL_TESTS()`.

**Compiler errors with `TEST_F()`?**
- Confirm the fixture class has a public default constructor.

**Test output is empty or cluttered?**
- GoogleTest writes test results to `stdout`, and log messages usually go to `stderr`. Use redirection to separate outputs if needed.

**Test fails without clear cause?**
- Review assertion failure messages carefully.
- Check for proper assertion use (`EXPECT_` vs `ASSERT_`).

**I get linker errors?**
- Verify GoogleTest libraries are properly linked.
- On Windows, confirm runtime library compatibility.

For more troubleshooting tips, see the [GoogleTest FAQ](docs/faq.md).

---

## Next Steps & Related Content

- Explore writing tests with common data setups using [Test Fixtures](docs/primer.md#same-data-multiple-tests).
- Learn how to write parameterized and typed tests in the [Parameterized & Typed Tests Guide](guides/writing-tests/parameterized-tests).
- Dive into advanced assertions and custom failure messages in [Advanced GoogleTest Topics](docs/advanced.md).
- Consult [Project Setup & Configuration](getting-started/first-test-experience/project-setup) for integrating GoogleTest into your build.

---

## Summary

You have now written, built, and run your first GoogleTest case. From here, you can leverage GoogleTest's powerful features to write robust, maintainable, and scalable tests for your C++ applications.

---

## Sample Minimal Test Complete Code
```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Running this will produce output indicating success or failure of the tests.
