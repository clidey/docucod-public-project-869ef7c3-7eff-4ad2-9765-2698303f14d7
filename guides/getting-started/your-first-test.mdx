---
title: "Writing and Running Your First Test"
description: "A hands-on walkthrough on creating, compiling, and executing your first test suite with GoogleTest. This guide demonstrates key xUnit concepts and provides best practices for organizing test code to maximize clarity and maintainability."
---

# Writing and Running Your First Test

## Overview

This guide walks you through the process of writing, compiling, and running your very first test using GoogleTest. It delivers practical, step-by-step instructions designed to teach you key testing concepts based on the xUnit architecture while ensuring your test code is clear, maintainable, and well-structured.

By following this guide, you will gain hands-on experience creating test cases, organizing tests into suites, using assertions to verify code behavior, and running the tests to observe their outcomes.

---

## What You Will Learn

- Writing simple test cases with the `TEST` macro
- Grouping related tests into test suites
- Using assertions to check expected outcomes
- Compilation and linking of your test code
- Executing tests and understanding test reports
- Best practices for naming and organizing tests

---

## Prerequisites

Before you start, ensure:

- GoogleTest is installed and accessible for your build environment.
- Your project is configured to include the GoogleTest headers and link with the GoogleTest libraries.
- You have a working C++17 (or later) compiler and build toolchain.
- Basic familiarity with C++ syntax and compilation.

---

## Time Estimate

Completing the step-by-step workflow should take approximately 15-30 minutes, depending on your familiarity with C++ and your build system.

---

## Difficulty Level

Beginnerâ€”suitable for developers with basic C++ knowledge interested in learning testing with GoogleTest.

---

# Step-by-Step Instructions

### Step 1: Create a Test File

Create a new C++ source file for your tests, for example, `my_first_test.cc`.

### Step 2: Include GoogleTest Headers

Add the necessary GoogleTest header at the top of your file:

```cpp
#include <gtest/gtest.h>
```

### Step 3: Write a Simple Test Case

GoogleTest uses the `TEST` macro to define individual tests. Each test is identified by two parameters: a test suite name and a test name.

Here is an example testing a simple function:

```cpp
// Simple function to be tested
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Defines a test in the suite "FactorialTest" with the name "HandlesZeroInput"
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Checks if Factorial(0) == 1
}

// Another test in the same suite
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### What to expect:
- `TEST(FactorialTest, HandlesZeroInput)` defines a test function named `FactorialTest_HandlesZeroInput_Test` implicitly.
- `EXPECT_EQ` is an assertion that checks for equality. The test continues even if the assertion fails.

### Step 4: Compile Your Test

Use your build system to compile the test. A typical compile command with `g++` looks like:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread my_first_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o my_first_test
```

Adjust the paths for your environment. If using a build system like CMake, include GoogleTest as a dependency.

### Step 5: Run the Test Binary

Execute the test program:

```bash
./my_first_test
```

You should see output similar to:

```text
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This indicates both tests passed successfully.

### Step 6: Interpret Failures

If a test fails, GoogleTest will print the file name, line number, failure message, and which assertion failed. For example:

```text
/path/to/my_first_test.cc:15: Failure
Expected equality of these values:
  Factorial(3)
    Which is: 5
  6
```

Use this information to debug your code or test.

### Step 7: Organize Tests Effectively

- Group related tests in the same test suite (same first `TEST` parameter).
- Use descriptive test and suite names following C++ identifier conventions (no underscores).
- Write clear, atomic tests; each test should verify one logical behavior.

### Step 8: Add More Assertions and Tests

Expand your tests to cover more functionality and edge cases. GoogleTest offers a variety of assertions (e.g., `EXPECT_TRUE`, `EXPECT_NE`, `ASSERT_EQ`). See [Assertions Reference](reference/assertions.md) for details.

### Step 9: (Optional) Use Test Fixtures for Shared Setup

If multiple tests share common setup/teardown, define a `TestFixture` class by inheriting from `testing::Test` and use `TEST_F` macro instead of `TEST`. This is beyond this guide but a natural next step.

---

## Example Complete Test Program

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this program to see the tests execute.

---

## Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Compiler cannot find GoogleTest headers or libraries">
Ensure your compiler include paths and linker paths correctly point to where GoogleTest headers and libraries are installed or built. Verify environment variables or build system settings.
</Accordion>
<Accordion title="Tests do not run or report no tests">
Confirm your test functions are registered properly via `TEST` or `TEST_F` macros.
Make sure `RUN_ALL_TESTS()` is called in your `main()` function after initializing GoogleTest.
</Accordion>
<Accordion title="Test fails immediately with no output or cryptic message">
Try running with increased verbosity or debugging flags.
Ensure that all necessary source files are compiled and linked.
Check for runtime crashes or exceptions.
</Accordion>
<Accordion title="Missing or incorrect outputs on test failures">
Make sure your assertions are properly formed. Use `EXPECT_` for non-fatal checks and `ASSERT_` when failing should stop the test.
Properly compile with debug symbols for better stack traces.
</Accordion>
</AccordionGroup>

---

## Best Practices

- Name your test suites and tests descriptively and consistently.
- Keep tests independent and isolated.
- Write tests that verify one thing at a time.
- Always compile tests with debugging symbols during development.
- Use assertions that provide meaningful failure messages.
- Run and re-run tests frequently during development.
- Consider moving to fixtures (`TEST_F`) when tests share setup or cleanup code.

---

## What's Next

- [GoogleTest Primer](primer.md): Learn about test fixtures and advanced assertions.
- [Using Mocks and Expectations](guides/effective-testing-techniques/mocking-workflows): Introduction to using GoogleMock for mocking dependencies in tests.
- [Configuring Your Project for GoogleTest](getting-started/configuration-first-test/project-setup): Setup detailed configuration for your build system.
- [Writing Parameterized and Typed Tests](guides/effective-testing-techniques/parameterized-testing): Take testing further with data-driven tests.

---

## Additional Resources

- [GoogleTest Primer](primer.md)
- [GoogleMock for Dummies](gmock_for_dummies.md): Learn about mock objects.
- [Mocking Reference](reference/mocking.md): API reference for mock related macros and classes.
- [Assertions Reference](reference/assertions.md): Details on assertions available in GoogleTest.
- [GoogleTest GitHub repository](https://github.com/google/googletest): Source and additional examples.

---