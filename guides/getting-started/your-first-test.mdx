---
title: "Writing and Running Your First Test"
description: "Step-by-step tutorial on creating your first GoogleTest unit test and running it. Introduces the test macro, basic assertions, and how to execute tests, helping users gain immediate hands-on experience."
---

# Writing and Running Your First Test

Welcome to your first hands-on experience with GoogleTest! This guide walks you through writing a simple unit test from scratch and running it, introducing essential concepts and commands so you can start verifying your C++ code immediately.

---

## 1. What You Will Achieve

- Write a basic unit test function using GoogleTest macros
- Compile your test with and without CMake
- Run the test executable and interpret its output

By the end, you'll have a working test case that verifies a simple condition and understand how to extend this foundation for comprehensive testing.

---

## 2. Prerequisites

Before proceeding, ensure you have the following ready:

- GoogleTest installed and configured in your development environment [see Installation and Setup guide](/guides/getting-started/installation-setup)
- A C++17-compliant compiler (e.g., GCC 7+, Clang 5+, MSVC 2017+)
- Basic familiarity with compiling C++ code and running command-line tools

> If you're using CMake or Bazel, confirm you have at least a minimal project setup aligning with [Project Configuration](/getting-started/configuration-and-first-use/project-configuration).

---

## 3. Writing Your First Test

### Step 1: Create a Test Source File

Create a C++ source file named `sample_test.cpp` with the following contents:

```cpp
#include <gtest/gtest.h>

// Test case name: "ExampleTest"
// Test name: "BasicAssertions"
TEST(ExampleTest, BasicAssertions) {
  // Expect equality between 1 and 1.
  EXPECT_EQ(1, 1);

  // Another assertion to demonstrate failure reporting.
  EXPECT_NE(1, 2);

  // An assertion that will fail (for demonstration only).
  // Uncomment to test failure report:
  // EXPECT_EQ(2, 3);
}
```

**Whatâ€™s happening here?**

- `TEST(TestCaseName, TestName)` defines a single test.
- `EXPECT_EQ` and `EXPECT_NE` are assertion macros that verify two values are equal or not equal.
- When assertions fail, GoogleTest reports them but continues running the test.

### Step 2: Compile the Test Manually

If you prefer a direct compile command (without CMake), run something like:

```bash
# Replace <path_to_gtest_include> and <path_to_gtest_lib> accordingly
clang++ -std=c++17 -I<path_to_gtest_include> sample_test.cpp -L<path_to_gtest_lib> -lgtest_main -lgtest -pthread -o sample_test
```

On Windows with MSVC, the command will be adjusted accordingly. Confirm GoogleTest libraries and includes are correctly specified.

### Step 3: Run the Test Executable

Run your test binary:

```bash
./sample_test
```

Expected output (summary excerpt):

```text
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.BasicAssertions
[       OK ] ExampleTest.BasicAssertions (0 ms)
[----------] 1 test from ExampleTest (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If you uncomment the failing assertion and rerun, GoogleTest will provide a detailed failure message.

---

## 4. Using CMake to Build Your Test

You'll often want to integrate GoogleTest into your build system. Here's a minimal example for CMake.

### Step 1: Create `CMakeLists.txt`

```cmake
cmake_minimum_required(VERSION 3.10)
project(ExampleTestProject CXX)

set(CMAKE_CXX_STANDARD 17)

# Find GoogleTest
find_package(GTest REQUIRED)

add_executable(sample_test sample_test.cpp)
target_link_libraries(sample_test GTest::gtest_main GTest::gtest pthread)

include(GoogleTest)
gtest_discover_tests(sample_test)
```

### Step 2: Build and Run

```bash
mkdir build && cd build
cmake ..
cmake --build . --config Release
ctest -V
```

The `ctest -V` command runs tests and outputs verbose results equivalent to running the binary directly.

---

## 5. Understanding Test Structure

- **Test case:** This is `ExampleTest` - groups related tests logically.
- **Test:** `BasicAssertions` - a function that holds one or more assertions.
- **Assertions:** Evaluate conditions; when failing, report errors but do not stop the test unless fatal assertion is used.

This pattern scales naturally as you add more tests and complex validations.

---

## 6. Practical Tips & Best Practices

- Start with simple tests to verify basic functionality.
- Use descriptive test case and test names for clarity.
- Remember that GoogleTest asserts are non-fatal by default (`EXPECT_*`), so tests continue after a failure.
- Use `ASSERT_*` macros when the failure should halt the current test immediately.
- Avoid side-effect statements inside assertions unless necessary.
- Use the `--gtest_filter` flag to run specific tests by test case or test name.
- Keep your test dependencies isolated to avoid flaky behaviors.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Issues">  
<Accordion title="Compilation Errors Related to GoogleTest Headers or Libraries">  
Ensure you have added the correct include paths and linked the required libraries (`gtest`, `gtest_main`, and on Linux/macOS, `pthread`).  
For CMake usage, `find_package(GTest REQUIRED)` mitigates this step.  
</Accordion>  
<Accordion title="Test Binary Does Not Run or Finds No Tests">  
Verify the test binary is linked with `gtest_main` or you provide your own `main` function.  
Ensure you call `::testing::InitGoogleTest(&argc, argv);` in `main` if you write one.  
</Accordion>  
<Accordion title="Tests Do Not Fail When Expected">  
Check that expectation macros (e.g., `EXPECT_EQ`) are correctly used.  
Verify the code under test actually calls the test assertions.  
Run the tests with `--gtest_verbose=info` for detailed output.  
</Accordion>  
<Accordion title="Unexpected Behavior or Crashes">  
Make sure all virtual destructors are present in interfaces, especially when mocking.  
Avoid mocking non-virtual methods unless employing specific strategies detailed elsewhere.  
</Accordion>  
</AccordionGroup>

---

## 8. Next Steps

- Explore writing more complex test cases with fixtures and parameterized tests in the [Writing and Running Your First Test guide](/getting-started/configuration-and-first-use/writing-first-test).
- Learn about GoogleMock basics to mock dependencies ([Basic Mocking with GoogleMock](/getting-started/configuration-and-first-use/using-googlemock-basics)).
- Dive into assertions and test patterns for robust validations ([Assertions and Test Patterns](/guides/core-test-workflows/assertions-best-practices)).

---

## 9. Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) - Detailed introduction
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) - Easy mock introduction
- [GoogleTest GitHub Repository](https://github.com/google/googletest) - Source and examples
- [CMake Installation and Setup Guide](/guides/getting-started/installation-setup)

---