---
title: "Writing Your First Test"
description: "Walk through creating and running a simple unit test using GoogleTest. Learn test structure, setup, compilation, and execution, with explanations for core test macros and test runners."
---

# Writing Your First Test

## Introduction

This guide will take you step-by-step through creating and running a basic unit test with GoogleTest. By following these instructions, you will understand the structure of GoogleTest tests, learn how to set up test cases, compile and link your test programs, and execute tests using the GoogleTest framework.

Whether you're new to GoogleTest or want a quick, practical introduction, this guide will get you up and running confidently with your first test.

---

## What You Will Learn

- How to write a simple test using the `TEST` macro.
- How to compile and link your test code with GoogleTest libraries.
- How to run your test executable and interpret its output.
- Understanding test suite and test naming conventions.
- Basic use of assertions to verify expected behavior.

---

## Prerequisites

- A working C++17 development environment.
- GoogleTest source or compiled libraries available.
- Basic knowledge of compiling C++ programs.
- Familiarity with your build system or compiler commands.

If you are missing any of these, consult the [System Requirements](../getting-started/prerequisites-installation/system-requirements.md) and [Installing with CMake](../getting-started/prerequisites-installation/install-via-cmake.md) guides.

---

## Step 1: Writing Your First Test

At the heart of GoogleTest is the `TEST` macro, which defines an individual test function. It takes two arguments:

1. The test suite name (a group of related tests).
2. The test name within that suite.

Both names should be valid C++ identifiers and should not contain underscores (`_`) to avoid naming clashes and maintain compatibility.

Here is a minimal example testing a simple function `Factorial`:

```cpp
// factorial_test.cc
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Define test suite FactorialTest and test HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Define more tests in the same suite
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

**Explanation:**

- `TEST(FactorialTest, HandlesZeroInput)` declares a test named `HandlesZeroInput` in the `FactorialTest` suite.
- Inside the test, `EXPECT_EQ` asserts that `Factorial(0)` equals `1`.
- Multiple tests can belong to the same test suite, logically grouping related functionality.

> **Tip:** Use descriptive test suite and test names that reflect what behavior is being checked.

---

## Step 2: Compiling and Linking Your Test

To compile your test, you need to include the GoogleTest header `<gtest/gtest.h>` and link against the compiled GoogleTest libraries (usually `libgtest.a` and `libgtest_main.a` or their shared lib equivalents).

If you installed GoogleTest as per the [Installing with CMake](../getting-started/prerequisites-installation/install-via-cmake.md) guide, you can compile your test with a command like this:

```bash
# Example using g++
g++ -std=c++17 -isystem /path/to/googletest/include \
    factorial_test.cc /path/to/libgtest.a /path/to/libgtest_main.a \
    -pthread -o factorial_test
```

**Notes:**

- `-isystem` points to GoogleTest's include directory.
- Link with the static GoogleTest libraries.
- The `-pthread` flag enables thread support, necessary for GoogleTest.

If you use CMake, you can simply add GoogleTest as a dependency and link your test executable against `gtest_main` and `gtest` libraries.

---

## Step 3: Running Your Test Executable

Once compiled, run your test binary from the command line:

```bash
./factorial_test
```

You will see output similar to this:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

**What this means:**

- The tests under your test suite `FactorialTest` were executed.
- Each `RUN` is a test start, followed by result messages.
- `OK` means the test passed without failed assertions.
- The summary shows tests run and how many passed/failed.

If any test fails, the output will include the file, line number, failure message, and a summary.

---

## Understanding Tests and Assertions

### Assertions

Assertions are the heart of your tests. GoogleTest provides many assertion macros. The common pattern is:

- `EXPECT_*` macros: Non-fatal failures, test continues after failure.
- `ASSERT_*` macros: Fatal failures, aborts current function immediately.

A basic assertion example:

```cpp
EXPECT_EQ(actual, expected) << "Failure message if values differ";
```

Use `EXPECT_*` when you want to continue a test after failure; use `ASSERT_*` when continuing does not make sense.

### Test Suites

Tests are grouped into *test suites* which share a name. This helps organize tests aligned to functionality, classes, or modules.

### Naming Conventions

- Test suite and test names should be valid C++ identifiers.
- Avoid underscores in names to prevent macro and naming clashes.

---

## Tips for Success

- Name tests meaningfully to describe intent.
- Keep tests independent: one test should test one concept or scenario.
- Use `EXPECT_*` to allow multiple assertions per test while still reporting all failures.
- Utilize test output to quickly identify failures and their causes.
- Write additional tests as your code evolves.

---

## Troubleshooting

- If tests don't run, ensure GoogleTest is linked correctly.
- If you see linker errors, verify that `libgtest_main` or equivalent is provided.
- Compiler errors about missing `main()`? Check if you linked with GoogleTest's main or provided your own.
- For Windows builds, confirm runtime linkage settings (`gtest_force_shared_crt` in CMake).

For detailed troubleshooting, see [Troubleshooting Common Setup Issues](../getting-started/troubleshooting/common-errors.md).

---

## What Next?

- Learn how to use [Test Fixtures](../getting-started/initial-configuration/first-test-case.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests) to share setup between tests.
- Explore [Assertions Reference](../reference/assertions.md) for all available assertions.
- Try [Value-Parameterized Tests](../guides/core-workflows/value-and-type-param-tests.md) for testing with multiple inputs.
- Understand how to write [Typed Tests](../guides/core-workflows/value-and-type-param-tests.md#typed-tests) for multiple types.
- Integrate GoogleTest into your build with [Configuring GoogleTest in Your Project](../getting-started/initial-configuration/add-to-project.md).

---

## Example Complete Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example includes a simple `main()` function that initializes GoogleTest and runs all tests.

---
