---
title: "Your First Test: GoogleTest Primer"
description: "A hands-on walkthrough for writing your first unit test. Learn how to define test cases and test fixtures, use fundamental assertions, and execute your test suite with practical examples. This guide makes no assumptions about prior experience and focuses on accelerating early success."
---

# Your First Test: GoogleTest Primer

## Introduction

This guide is your hands-on introduction to writing your very first unit test using GoogleTest. You will learn how to define simple test cases, how to use test fixtures to share setup code, apply fundamental assertions to verify expected behavior, and finally run your tests to see results. No prior experience is assumed—just follow the step-by-step workflow to achieve quick, early success.

---

## 1. Workflow Overview

### What You Will Achieve
- Write simple, clear test functions using the `TEST()` macro.
- Organize related tests into test suites.
- Create test fixtures (`TEST_F()`) to share setup and teardown code.
- Use assertions like `EXPECT_EQ()` to check your code’s correctness.
- Run your tests and interpret the output.

### Prerequisites
- GoogleTest library installed and linked with your project.
- Basic familiarity with C++ syntax.
- A C++ development environment with compiler supporting C++17 or later.

### Expected Outcome
A minimal GoogleTest test program with multiple tests demonstrating basic assertions and fixture usage, producing clear pass/fail results.

### Time Estimate
Approximately 15-30 minutes, including writing code and running tests.

### Difficulty Level
Beginner

---

## 2. Writing Your First Simple Test

### Step 1: Define a Test with `TEST()`
Use the `TEST()` macro to define an individual test case.
- The first argument is the test suite name (groups related tests).
- The second argument is the unique test name.

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

*Expected Result*: A test named `HandlesZeroInput` in test suite `FactorialTest` runs and passes if the call to `Factorial(0)` returns `1`.

### Step 2: Add More Tests in the Same Suite
Group related tests by reusing the same test suite name.

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

*Expected Result*: Running tests will show multiple tests under `FactorialTest`.

### Step 3: Use Assertions
- Use `EXPECT_EQ(expected, actual)` for comparisons that should continue even if the assertion fails.
- Use `ASSERT_EQ(expected, actual)` if you want to abort the test immediately on failure.

```cpp
EXPECT_EQ(value, 42) << "Value should be the Answer to Life.";
```

*Expected Result*: If the assertion fails, GoogleTest prints the failure location, expected and actual values, and your message.

---

## 3. Sharing Test Setup with Fixtures (`TEST_F`)

### Step 1: Create a Test Fixture Class
Define a class that inherits from `testing::Test`. Put commonly used objects and setup code here.

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1.Enqueue(1);
    q2.Enqueue(2);
    q2.Enqueue(3);
  }

  Queue<int> q0;
  Queue<int> q1;
  Queue<int> q2;
};
```

*Expected Result*: Objects `q0`, `q1`, and `q2` are fresh instances recreated for each test.

### Step 2: Write Tests Using `TEST_F`
Reference the fixture class in `TEST_F()` to access fixture members.

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* x = q0.Dequeue();
  EXPECT_EQ(x, nullptr);

  x = q1.Dequeue();
  ASSERT_NE(x, nullptr);
  EXPECT_EQ(*x, 1);
  delete x;
}
```

*Expected Result*: Each test runs independently with re-initialized fixture.

### Step 3: Use `SetUp()` and `TearDown()` if Needed
Override these virtual methods if setup or cleanup has more complex logic.

```cpp
void SetUp() override {
  // Runs before each test
}

void TearDown() override {
  // Runs after each test
}
```

*Tip*: Prefer constructors and destructors for simple initialization and cleanup.

---

## 4. Running Your Tests

### Step 1: Initialize GoogleTest
In `main()`, initialize GoogleTest and run all tests.

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Step 2: Compile and Link
- Link with `gtest` and optionally with `gtest_main` if you want main provided.
- Ensure GoogleTest headers and libraries are visible.

### Step 3: Execute the Test Binary
- Running produces output for each test, showing pass/fail.

```
[==========] Running 3 tests from 1 test suite.
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 3 tests from FactorialTest (0 ms total)

[  PASSED  ] 3 tests.
```

*Success Criteria*: All tests passed.

---

## 5. Best Practices & Tips

- Use descriptive test suite and test names without underscores (`_`) to avoid naming conflicts.
- Group related tests logically for maintainability.
- Use fixtures to avoid code duplication in setup.
- Prefer `EXPECT_*` assertions to get comprehensive failure reports, use `ASSERT_*` to guard critical preconditions.
- Keep tests independent; never rely on side effects from other tests.

---

## 6. Troubleshooting

### Common Issue: Tests Not Running
- Confirm you called `RUN_ALL_TESTS()` in your `main()`.
- Check your project links against `gtest` and `gtest_main` correctly.

### Assertion Failures
- Review assertion messages for mismatched values.
- Use `<<` to add custom failure messages for clarity.

### Compiler Errors with `TEST_F`
- Ensure fixture class has a default constructor.
- Verify no typo in `SetUp()` (must be camel-cased exactly).

### Silent Test Passes/Failures
- Verify your `main()` returns `RUN_ALL_TESTS()`’s result.
- Avoid ignoring return values of GoogleTest macros.

### Platform Specifics
- On Windows, link flags or Unicode settings may affect test results. See related documentation.

---

## 7. Real-World Example

```cpp
#include <gtest/gtest.h>

// Simple factorial function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test for zero input
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test for positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}

// Fixture example
class QueueTest : public testing::Test {
 protected:
  std::deque<int> q;

  void SetUp() override {
    q.push_back(10);
    q.push_back(20);
  }
};

TEST_F(QueueTest, IsNotEmptyInitially) {
  EXPECT_FALSE(q.empty());
  EXPECT_EQ(q.size(), 2);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Running this code yields pass/fail reports for both simple and fixture-based tests.

---

## 8. Next Steps & Related Content

- Move to [Basic Configuration Options](../getting-started/first-run-configuration-troubleshooting/basic-configuration-options.mdx) to customize your test runs.
- Explore [Writing and Running Your First Test](../getting-started/first-run-configuration-troubleshooting/writing-and-running-your-first-test.mdx) for deeper insights.
- For mocking dependencies, check out the [gMock for Dummies](../docs/gmock_for_dummies.md) guide.
- When ready, advance to [GoogleTest Advanced](advanced.md) for more sophisticated testing patterns.

---

<Tip>
Remember to keep your tests small, focused, and independent. Early wins with simple tests build confidence and lay a strong foundation for your project's quality.
</Tip>