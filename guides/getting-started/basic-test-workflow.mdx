---
title: "Writing Your First Test"
description: "A hands-on walkthrough from setting up the framework to authoring and running a simple test case, illustrating core concepts such as test cases, test fixtures, and basic assertions."
---

# Writing Your First Test

A hands-on walkthrough from setting up the framework to authoring and running a simple test case, illustrating core concepts such as test cases, test fixtures, and basic assertions.

---

## 1. Introduction: Getting Started with GoogleTest

This guide will empower you to write your first GoogleTest-based test, step-by-step. You’ll learn how to create simple test cases, use test fixtures to reuse setups, and employ assertions to verify code behavior. By the end, you will have run your first test and understood its core components.

## 2. Prerequisites

- Have [GoogleTest](https://github.com/google/googletest) installed and configured within your C++ project. Refer to the [Installation: CMake & Bazel](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/installation-cmake-bazel.mdx) guide for detailed steps.
- A functioning C++17 or newer compiler environment.
- Your project is set up to include GoogleTest headers and link against its libraries.

<Tip>
If you have not set up GoogleTest yet, pause here and check out the [Prerequisites & System Requirements](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/prerequisites-requirements.mdx) and [Installation](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/installation-cmake-bazel.mdx) guides.
</Tip>

## 3. Expected Outcome

By following this guide, you will:
- Understand the structure of GoogleTest test cases and suites.
- Write a simple test function using `TEST()`.
- Create and use test fixtures (`TEST_F()`) to share setup across tests.
- Run your test executable and interpret the results.

## 4. Time Estimate

This workflow typically takes 10–20 minutes for users familiar with C++ development.

## 5. Difficulty Level

Beginner

---

## 6. Step-By-Step Instructions

<Steps>
<Step title="Create Your First Simple Test">
Start by including the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

Then define a test using the `TEST` macro, which takes two identifiers: the test suite name and the test name:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

This defines a test called `HandlesZeroInput` belonging to `FactorialTest` test suite. The body uses an assertion to verify that `Factorial(0)` returns 1.

<Check>
The test compiles and registers automatically without manual listing.
</Check>
</Step>

<Step title="Write Additional Tests in the Same Test Suite">
Add further tests logically grouped in the same suite:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

<Check>
Both tests should appear when running your test executable and be reported separately.
</Check>
</Step>

<Step title="Create a Test Fixture for Shared Setup">
If multiple tests share data or setup, define a fixture class:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};
```

Each test using this fixture can access these member queues.

Use the `TEST_F` macro to write tests that use the fixture:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr) << "Queue q1_ should not be empty";
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

<Check>
Fixtures run with fresh setup for each test. Changes in one test do not affect others.
</Check>
</Step>

<Step title="Run Your Tests">
Write your `main` function or link with `gtest_main` (which provides one).

A simple `main()` function should look as follows:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and link your tests with GoogleTest libraries and run the executable.

Tests run sequentially, reporting passed and failed results.

<Check>
Your console will display test output and a summary indicating success or failures.
</Check>
</Step>
</Steps>

---

## 7. Practical Examples

### Example 1: Simple `TEST` Example

```cpp
// A simple factorial function
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Example 2: Using a Test Fixture

```cpp
template <typename E>
class Queue {
 public:
  Queue() {};
  void Enqueue(const E& element) { data_.push_back(element); }
  E* Dequeue() {
    if (data_.empty()) return nullptr;
    E* front = new E(data_.front());
    data_.pop_front();
    return front;
  }
  size_t size() const { return data_.size(); }

 private:
  std::list<E> data_;
};

class QueueTest : public testing::Test {
protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

### Example 3: Running Tests

```bash
$ ./my_test_executable
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[ RUN      ] QueueTest.IsEmptyInitially
[       OK ] QueueTest.IsEmptyInitially (0 ms)
[----------] 3 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 3 tests.
```

The output confirms your tests ran successfully.

---

## 8. Tips and Best Practices

- Use `EXPECT_*` assertions when you want tests to continue running after failures; use `ASSERT_*` assertions for failures that must abort the current test.
- Organize tests into suites that map logically to the tested component or feature.
- When multiple tests share setup code or data, always use test fixtures (`TEST_F`) to avoid duplication and keep tests maintainable.
- Name your test suites and test cases clearly following C++ naming conventions without underscores.
- Always check the return value of `RUN_ALL_TESTS()` in your `main()` to reflect the test results correctly in your build/CI system.

<Warning>
Do not forget to call `testing::InitGoogleTest()` before running tests. Failing to do so can cause command-line arguments not to be parsed correctly, and tests may not run as expected.
</Warning>

---

## 9. Troubleshooting

<AccordionGroup title="Common Issues While Writing Your First Test">
<Accordion title="Tests Are Not Running or Detected">
- Ensure your test functions are registered with the macros `TEST()` or `TEST_F()`.
- Verify that your test executable links against GoogleTest libraries.
- Confirm that you call `InitGoogleTest()` before `RUN_ALL_TESTS()`.
- Check filters: command line flags can restrict which tests are run. Use `--gtest_list_tests` to see detected tests.
</Accordion>

<Accordion title="Compilation Errors with TEST_F">
- `TEST_F()` requires a previously defined test fixture class derived from `testing::Test`.
- Using `TEST_F()` without defining the fixture results in errors like `virtual outside class declaration`.
- Make sure fixture class and test names follow C++ identifier conventions.
</Accordion>

<Accordion title="Unexpected Fatal Failures on ASSERT_*">
- `ASSERT_*` macros abort the current test function when failing, so code after them won’t run.
- Use them only when continuation is unsafe or meaningless (e.g., dereferencing null pointers).
- Otherwise, prefer `EXPECT_*` macros for non-fatal failures.
</Accordion>

<Accordion title="Multiple Tests with Shared State Affecting Each Other">
- Remember GoogleTest creates a new test fixture instance for each test.
- If shared state is needed (e.g., across tests) use `SetUpTestSuite()` and `TearDownTestSuite()` static methods.
</Accordion>
</AccordionGroup>

---

## 10. Next Steps & Related Content

- After mastering simple tests and fixtures, proceed to [Mastering Assertions](https://github.com/google/googletest/tree/main/docs/guides/core-testing-workflows/using-assertions.mdx) to deepen your validation skills.
- Learn to run and filter tests more selectively at [Running and Validating Tests](https://github.com/google/googletest/tree/main/docs/getting-started/quickstart-validation/run-validate-tests.mdx).
- Explore [Structuring and Organizing Tests](https://github.com/google/googletest/tree/main/docs/guides/getting-started/test-structure-conventions.mdx) for maintaining larger test suites.
- If issues arise during setup or linking, consult [Troubleshooting Common Setup Issues](https://github.com/google/googletest/tree/main/docs/getting-started/quickstart-validation/troubleshooting-common-issues.mdx).

---

## 11. Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md) — a high-level introduction to GoogleTest concepts.
- [GoogleMock Documentation](https://github.com/google/googletest/tree/main/docs/reference/mocking.md) for mocking techniques after you master basic testing.
- [GoogleTest GitHub Repository](https://github.com/google/googletest) — source code, examples, and latest updates.

---

This guide ensures you have the fundamental skills to confidently write, organize, and execute your first tests with GoogleTest, laying a strong foundation for more advanced testing workflows.