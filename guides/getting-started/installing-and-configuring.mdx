---
title: "Installing and Configuring GoogleTest"
description: "A guided walkthrough for integrating GoogleTest into your project, covering setup via CMake or Bazel, supported platforms, and essential configuration steps. Learn to quickly enable reliable C++ unit testing within your existing codebase."
---

# Installing and Configuring GoogleTest

A practical guide to integrating GoogleTest into your C++ project. This walkthrough covers setup methods via **CMake** or **Bazel**, supported platforms, and essential configuration steps you need to quickly enable reliable unit testing within your existing codebase.

---

## Workflow Overview

### What this guide helps you accomplish
Learn how to add GoogleTest to your project using either CMake or Bazel, configure it properly, and confirm that it runs smoothly. Whether starting from scratch or adding to an existing codebase, this guide ensures you set up GoogleTest in a way that maximizes test reliability and productivity.

### Prerequisites
- A C++17-compatible compiler and environment
- Installed build tools:
  - For CMake approach: CMake 3.14 or newer
  - For Bazel approach: Bazel build system configured
- Familiarity with your project's build system (CMake or Bazel)
- Access to the GoogleTest source repository or package

### Expected Outcome
- GoogleTest integrated into your build system
- Ability to compile and run unit tests using GoogleTest's testing APIs
- A configured main test runner,
- Verified working test setup that executes test binaries successfully

### Time Estimate
Around 15 to 30 minutes depending on your familiarity with CMake or Bazel and your existing project setup.

### Difficulty Level
Beginner to intermediate; no advanced build configuration knowledge required.

---

## Step-by-Step Instructions

### Method 1: Installing via CMake

1. **Verify Environment**
   - Ensure CMake version 3.14+ is installed.
   - Confirm your compiler supports C++17.

2. **Fetch GoogleTest Source**
   Add the following snippet to your `CMakeLists.txt` to automatically download GoogleTest during configuration:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)
```

3. **Enable GoogleMock (Optional)**
   - By default, GoogleMock is included.
   - To disable, use: `-DBUILD_GMOCK=OFF` in your CMake configuration command.

4. **Link GoogleTest to Your Test Targets**

```cmake
add_executable(my_tests test_main.cpp my_test_cases.cpp)
target_link_libraries(my_tests gtest_main)
```

5. **Configure Compiler Standards**

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

6. **Build the Test Executable**

```bash
mkdir build && cd build
cmake ..
make
```

7. **Run Your Tests**

```bash
./my_tests
```
You should see GoogleTest output with test results summary.


### Method 2: Installing via Bazel

1. **Verify Prerequisites**
   - Ensure Bazel is installed and configured.
   - Confirm your environment supports C++17.

2. **Update `MODULE.bazel` Workspace**
   Add GoogleTest as a dependency:

```bazel
bazel_dep(name = "com_google_googletest", version = "1.17.0")
```

3. **Declare GoogleTest in WORKSPACE**

```bazel
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.17.0.zip"],
    strip_prefix = "googletest-release-1.17.0",
)
```

4. **Reference GoogleTest in BUILD Files**

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//googletest:main"],
)
```

5. **Build and Run Tests**

```bash
bazel test //path/to:my_test
```

You should see test execution feedback and a success or failure summary.


### Configuring the Test Runner

- Use `gtest_main` or `gmock_main` to avoid writing your own `main()` function.
- If customization is required, write your own `main()` and initialize with `testing::InitGoogleTest(&argc, argv);` or `testing::InitGoogleMock(&argc, argv);`.

Example custom main():

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- For projects using GoogleMock features, initialize GoogleMock instead:

```cpp
#include <gmock/gmock.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Practical Tips & Best Practices

- Always confirm your compiler and environment fully support C++17 features.
- Link against `gtest_main` or `gmock_main` libraries to leverage provided test runners unless you require custom behavior.
- Use CMake's `FetchContent` to keep GoogleTest integration clean and easy to update.
- In Bazel, specify precise versions to avoid unexpected breaking changes.
- On Windows, consider setting the `gtest_force_shared_crt` option in CMake to ensure compatibility between runtimes.

---

## Common Pitfalls & Troubleshooting

<AccordionGroup title="Troubleshooting Common Setup Issues">
<Accordion title="Build Failures Due to Compiler Incompatibility">
Ensure your compiler supports C++17. Older versions may cause obscure errors. Upgrade your compiler or specify the C++17 standard explicitly in your build system.
</Accordion>
<Accordion title="Linker Errors with Missing `main()`">
Make sure you link with `gtest_main` or `gmock_main` libraries, which provide a default `main()` entry point. If writing a custom main, ensure `testing::InitGoogleTest` or `testing::InitGoogleMock` are called correctly.
</Accordion>
<Accordion title="Include Path Problems">
Confirm that your build system sets the include directories properly. When using CMake's `FetchContent` or Bazel dependencies, these paths are generally handled automatically.
</Accordion>
<Accordion title="Tests Not Running or Skipping">
Verify you are calling `RUN_ALL_TESTS()` once after initializing GoogleTest or GoogleMock. Ensure tests are enabled and not disabled by any command line flags.
</Accordion>
</AccordionGroup>

---

## Next Steps & Related Resources

- Explore [Writing Your First Unit Test]( /guides/getting-started/writing-your-first-tests) to start building your test cases.
- Review [Project Configuration]( /getting-started/configuration-and-first-test/project-configuration) for advanced setup tips.
- Consider integration with continuous integration workflows via the [Integration Points]( /overview/architecture-foundations/integration-points) documentation.
- Use the [Common Setup Issues]( /getting-started/troubleshooting-and-resources/common-setup-issues) guide if you encounter problems.

---

#### Additional References

- Official GoogleTest repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- CMake and Bazel installation examples in [Installation via CMake]( /getting-started/setup-and-installation/installation-via-cmake) and [Installation via Bazel]( /getting-started/setup-and-installation/installation-via-bazel)
- GoogleMock integration notes in [Product Overview]( /overview/product-intro/product-overview)

---

With this guide, you will efficiently embed GoogleTest into your projects using industry-standard build tools, empowering you to write and run effective, maintainable C++ tests quickly.
