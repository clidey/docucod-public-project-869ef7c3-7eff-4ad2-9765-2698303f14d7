---
title: "Creating Your First Test Case"
description: "Learn step-by-step how to write, compile, and run your first test case with GoogleTest. This tutorial covers test file structure, test macros, assertions, and running tests with minimal setup."
---

# Creating Your First Test Case

Learn step-by-step how to write, compile, and run your first test case with GoogleTest. This tutorial covers test file structure, test macros, assertions, and running tests with minimal setup.

---

## 1. Introduction

GoogleTest is a powerful and easy-to-use C++ testing framework designed to help you write robust and maintainable test code. This guide walks you through the essential steps for creating your first test case using GoogleTest.

By following this tutorial, you will be able to write a simple test, understand the structure of test files, use GoogleTest macros effectively, and run your tests with minimal setup.

---

## 2. Prerequisites

Before you start, ensure that:

- You have GoogleTest installed and properly integrated into your C++ project.
- Your development environment supports the C++17 standard or higher.
- You have basic knowledge of C++ and can compile and run C++ programs.
- You have included GoogleTest headers and linked against the `gtest` or `gtest_main` library.

For installation help, see:
- [Installing with CMake](/getting-started/prerequisites-installation/installation-cmake)
- [Installing with Bazel](/getting-started/prerequisites-installation/installation-bazel)

---

## 3. What You Will Achieve

By completing this guide, you will:

- Understand how to organize test source files.
- Use the `TEST()` macro to define individual tests.
- Employ assertions to verify behavior.
- Compile and run tests using GoogleTestâ€™s infrastructure.
- Read and interpret test output.

This is a foundational step toward writing comprehensive test suites.

---

## 4. Writing Your First Test Case

### 4.1. Test File Structure

Create a C++ source file (e.g., `example_test.cc`) for your tests. This file should:
- Include the GoogleTest header.
- Define one or more test cases using GoogleTest macros.
- Provide a `main()` function or link with `gtest_main` to run tests.

### 4.2. Defining a Simple Test Using `TEST()`

The `TEST()` macro declares a test function belonging to a test suite. The syntax is:

```cpp
TEST(TestSuiteName, TestName) {
  // Test code and assertions go here.
}
```

- `TestSuiteName`: Groups related tests.
- `TestName`: Identifies this specific test.

**Note:** Both names must be valid C++ identifiers and should **not** contain underscores.

#### Example:

```cpp
#include <gtest/gtest.h>

// Function to test: factorial calculation.
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

### 4.3. Using Assertions

Inside the test body, use GoogleTest assertions to check conditions:

- `EXPECT_*` assertions report non-fatal failures and continue running the test.
- `ASSERT_*` assertions report fatal failures and abort the current test function immediately.

**Example:**

```cpp
EXPECT_EQ(value, expected);  // Non-fatal assertion.
ASSERT_TRUE(condition);      // Fatal assertion.
```

Use `EXPECT_*` for checks where you want the test to continue after a failure, and `ASSERT_*` when failure should immediately stop the test.

---

## 5. Compiling and Running Your Tests

### 5.1. Using `gtest_main`

GoogleTest provides a default `main()` in the `gtest_main` library. If you link your test with it, you do not need to write your own `main()`. The provided one initializes GoogleTest and runs all tests.

### 5.2. Writing a Custom `main()`

If desired, write your own `main()` as below:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This calls `InitGoogleTest()` to parse command-line flags and `RUN_ALL_TESTS()` to execute the tests.

### 5.3. Building Example

Assuming your test file is `example_test.cc`:

For CMake projects:
- Add your test source to your executable target.
- Link with `gtest` and `gtest_main`.

For command-line compilation (example with `g++` on Linux):

```sh
g++ -std=c++17 -isystem /path/to/googletest/include \
    example_test.cc /path/to/libgtest.a /path/to/libgtest_main.a \
    -pthread -o example_test
```

Replace `/path/to/` with the actual paths in your setup.

### 5.4. Running Tests

Execute your test binary:

```sh
./example_test
```

You will see output indicating the progress and result of each test:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

---

## 6. Best Practices and Tips

- **Name test suites and tests clearly** to reflect what is being tested.
- Avoid underscores in test names; GoogleTest treats underscores specially.
- Use `EXPECT_*` assertions when you want the test to continue after failure, useful for multiple checks in one test.
- Use `ASSERT_*` assertions when failure should stop test execution immediately.
- Keep tests isolated: each `TEST()` defines an independent test function.
- Link with `gtest_main` unless you need a custom `main()`.

<Tip>
Using `gtest_main` shortens the amount of boilerplate code you need to write. For simple projects, link with it to get a default `main()`.
</Tip>

<Tip>
You can run specific tests or suites by using the `--gtest_filter` command line flag.
For example: `./example_test --gtest_filter=FactorialTest.HandlesZeroInput`
</Tip>

---

## 7. Troubleshooting

- **Tests not running:** Ensure your tests are linked correctly and `RUN_ALL_TESTS()` is called.
- **Undefined reference errors:** Check your linkage includes the `gtest` and optionally `gtest_main` libraries.
- **Test names with underscores cause issues:** Avoid underscores in `TEST()` names or consult the FAQ for best naming conventions.
- **Tests compiling but not executing:** Confirm you call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()`.

For detailed troubleshooting, see:
- [Troubleshooting and Installation Validation](/getting-started/first-test-configuration/troubleshooting-validation)

---

## 8. Next Steps

After mastering your first simple tests, consider advancing to:

- Writing tests with fixtures using `TEST_F()` for shared setup and teardown.
- Using assertions effectively for detailed test verification.
- Exploring value-parameterized tests to run the same test logic with different data.
- Adding mocks with GoogleMock for testing complex interactions.

Recommended reading:
- [Writing and Running Your First Test](/getting-started/first-test-configuration/writing-first-test)
- [Test Fixtures & Using the Same Data in Multiple Tests](/docs/primer.md#same-data-multiple-tests)
- [Assertions Reference](/api-reference/core-apis/assertions)

---

## Appendix: Minimal Complete Example

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run as described in section 5.

---

This concise workflow will empower you to confidently create and run your first GoogleTest test cases, setting a solid foundation for more advanced testing practices.
