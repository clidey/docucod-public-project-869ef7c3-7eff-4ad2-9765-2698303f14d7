---
title: "Writing Your First Test"
description: "A guided walkthrough for creating, compiling, and running your first C++ unit test with GoogleTest. You'll understand basic test structure, assertions, and see results in action—establishing a foundation for confident code changes."
---

# Writing Your First Test

A guided walkthrough for creating, compiling, and running your first C++ unit test with GoogleTest. This guide will help you understand the basic test structure, assertions, and see test results in action—establishing a foundation for confident code changes.

---

## Workflow Overview

### What This Guide Helps You Accomplish
This guide walks you through writing, compiling, and running your very first GoogleTest unit test in C++. It focuses exclusively on test creation and execution, helping you verify that GoogleTest is properly set up and fits smoothly into your development flow.

### Prerequisites

- GoogleTest must be installed and available in your development environment.
- A C++ compiler with C++17 support.
- Basic understanding of compiling and running C++ applications.
- Basic familiarity with C++ syntax.

### Expected Outcome

By the end of this guide, you will:
- Have written your own simple GoogleTest test function.
- Successfully compiled and run your tests.
- Understood your test output, including successes and failures.
- Learned how to extend this foundation toward more complex testing.

### Time Commitment
About 10–15 minutes, including writing and running code.

### Difficulty Level
Beginner-friendly — no previous testing framework experience required.

---

## Writing Your First Test: Step-by-Step Instructions

### Step 1: Include the GoogleTest Header

Start by including the GoogleTest primary header in your test source file.

```cpp
#include <gtest/gtest.h>
```

This header provides all necessary declarations for writing tests and assertions.

### Step 2: Define a Test Using the `TEST()` Macro

GoogleTest organizes tests in suites, each containing individual test cases. Use the `TEST()` macro to define a test:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

- The first argument `FactorialTest` is the test suite name; group related tests here.
- The second argument `HandlesZeroInput` is the unique test name.
- The code block is your test logic.

### Step 3: Write Assertions to Verify Behavior

Assertions check that the code behaves as expected. Start with `EXPECT_EQ(expected, actual)` to verify equality.

```cpp
EXPECT_EQ(Factorial(0), 1);
```

Common assertion macros include:
- `EXPECT_EQ(a, b)`: checks if `a == b`.
- `EXPECT_TRUE(condition)`: checks if `condition` is true.
- `EXPECT_NE(a, b)`: checks if `a != b`.

Use `ASSERT_` macros if you want the test to stop immediately on failure.

### Step 4: Create Multiple Tests for Different Scenarios

Add more tests to cover various inputs or behaviors:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

Each test runs independently and GoogleTest reports their results separately.

### Step 5: Compile Your Test Program

Compile your source file into an executable linking against GoogleTest and pthreads (Linux/macOS) or appropriate threading libraries.

Example `g++` command:

```sh
g++ -std=c++17 -isystem /path/to/googletest/include -pthread your_test.cc /path/to/libgtest.a -o your_test
```

Adjust paths and flags depending on your setup and platform.

### Step 6: Run Your Test Executable

Execute the compiled binary:

```sh
./your_test
```

You should see output indicating which tests ran, which passed, and which failed.

### Step 7: Interpret Test Output

Successful tests are shown as `PASSED`. Failures display the assertion that failed, the file and line number, and an explanation.

Example failure output:

```
[ RUN      ] FactorialTest.HandlesZeroInput
/path/to/your_test.cc:10: Failure
Expected equality of these values:
  Factorial(0)
    Which is: 0
  1
[  FAILED  ] FactorialTest.HandlesZeroInput (0 ms)
```

This output helps you quickly locate and fix issues.

---

## Practical Example: Testing a Factorial Function

Suppose you want to test this factorial function:

```cpp
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

Your test code (
`factorial_test.cc`
) would look like this:

```cpp
#include <gtest/gtest.h>

// Factorial function declaration or definition
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test for zero input
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests for positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(4), 24);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Compile and run this test program using your compiler and GoogleTest library.

---

## Tips for Writing Your First Test

- **Choose descriptive suite and test names.** They appear in test output and help readability.
- **Use `EXPECT_*` vs `ASSERT_*` wisely.** `EXPECT_*` continues after failure, while `ASSERT_*` aborts test body.
- **Keep each test simple and focused.** One behavior per test improves clarity and maintainability.
- **Check test framework output carefully.** GoogleTest provides detailed diagnostics on failures.
- **Use the test fixture (`TEST_F`) when setup becomes complex.** For basic tests, `TEST` suffices.

---

## Common Pitfalls

- Forgetting to include `<gtest/gtest.h>` causes compilation errors.
- Naming tests or suites with underscores (`_`) at start/end or multiple underscores can cause naming conflicts; avoid them.
- Using `EXPECT_EQ` with C strings compares pointers, not contents. Use `EXPECT_STREQ` for C strings.
- Forgetting to link against GoogleTest library at compile time.
- Ignoring `RUN_ALL_TESTS()` return value in `main()` leads to misleading test results.

---

## Sample `main()` Function

While GoogleTest provides a default main function you can link against, here is the recommended way to write your own when needed:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv); // Parses command-line args
  return RUN_ALL_TESTS();               // Runs all tests and returns result
}
```

Ensure this is present in your test executable or provided by linking against `gtest_main`.

---

## Troubleshooting Your First Test

<Tip>
If your tests fail to run, check:
- That GoogleTest headers and libraries are correctly installed.
- Your compile and link commands include the correct paths and libraries.
- The test function names are unique within their suites.
- You invoked `testing::InitGoogleTest` before running tests.
</Tip>

<Tip>
If your assertions fail unexpectedly:
- Verify the tested code produces the expected output independently.
- Check if you used the right assertion macro for your data type.
- Make sure arguments in `EXPECT_EQ` and similar macros are in the correct order (`expected, actual`).
</Tip>

---

## Next Steps

- Explore writing more complex tests using [Test Fixtures](https://github.com/google/googletest/blob/main/docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests).
- Learn how to integrate GoogleMock for mocking dependencies in [Introducing Mocking with GoogleMock](https://github.com/google/googletest/blob/main/guides/getting-started/integrate-mocking.mdx).
- Familiarize yourself with assertion macros in the [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md).
- Consult the [Basic Configuration & Project Setup](https://github.com/google/googletest/blob/main/getting-started/core-setup/configuration-basics.mdx) guide to properly prepare your build environment.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Writing Tests with Fixtures](https://github.com/google/googletest/blob/main/docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests)
- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [Understanding GoogleMock Basics](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md)
- [Installation and Platform Support](https://github.com/google/googletest/blob/main/getting-started/core-setup/installation-platforms.mdx)

---