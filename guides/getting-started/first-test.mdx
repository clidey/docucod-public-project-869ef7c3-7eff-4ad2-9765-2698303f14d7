---
title: "Authoring Your First Test"
description: "Walks through creating and running your first GoogleTest-based test suite and test cases, demonstrating fundamental test macros, main entry points, and verification of test outcomes using simple assertions."
---

# Authoring Your First Test

Welcome to your first step in leveraging GoogleTest to write robust C++ tests. This guide takes you through the essentials of creating and running a simple test suite using GoogleTest's fundamental macros, verifying test outcomes with straightforward assertions, and ensuring your test program executes correctly.

---

## 1. Workflow Overview

### What You Will Achieve

You will learn how to:
- Write basic test cases with `TEST()` macros.
- Understand test naming and organization.
- Execute your tests using the main entry point.
- Interpret test results from assertion outcomes.

### Prerequisites

Before proceeding, ensure:
- GoogleTest is installed and integrated into your build environment.
- You can build and link your test program against the GoogleTest libraries.
- You have a C++ compiler supporting C++11 or later.

### Expected Outcome

A functioning test program containing one or more test suites with tests that provide clear pass/fail feedback upon execution.

### Estimated Time

Approximately 10-15 minutes to write, build, and run your first test suite.

### Difficulty Level

Beginner – no prior testing experience necessary but requires basic knowledge of C++.

---

## 2. Step-by-Step Instructions

### Step 1: Include GoogleTest Header

Start your test source file by including the GoogleTest framework header.

```c++
#include <gtest/gtest.h>
```

This header exposes all necessary macros and functions for defining and running tests.

### Step 2: Define Your First Simple Test

Use the `TEST()` macro to define an individual test. This macro requires two arguments:
- **Test Suite Name**: Group related tests logically.
- **Test Name**: Identify the behavior or scenario being tested.

```c++
// Sample function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test that Factorial(0) returns 1
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test that Factorial for positive inputs returns correct results
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

#### Notes on Naming

- Both names must **not** include underscores (`_`).
- Test suite names group related tests.
- Tests in different suites can share test names without conflict.

### Step 3: Writing Assertions

Inside tests, use assertion macros like `EXPECT_EQ` to verify behavior:
- `EXPECT_EQ(val1, val2)` verifies `val1 == val2`.
- Use `EXPECT_*` for nonfatal assertions allowing the test to continue.

```c++
EXPECT_EQ(Factorial(3), 6);  // Verifies that factorial of 3 is 6
```

You may add custom failure messages for clarity:

```c++
EXPECT_EQ(Factorial(0), 1) << "Factorial of zero should be 1.";
```

### Step 4: Define the Main Function

To run your tests, you need a `main()` function that initializes GoogleTest and invokes all tests.

```c++
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

*Alternatively*, link your program with the `gtest_main` library to avoid writing your own `main()`.

### Step 5: Build and Run Your Test Program

- Compile your test source file, linking against GoogleTest.
- Run the resulting executable.

### Expected Output Example

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If any assertion fails, GoogleTest will display detailed messages including failure location and expected vs actual values.

### Decision Points

- Should you write your own `main()` or link with `gtest_main`?
  - For custom setup before tests, write your own `main()`.
  - To simplify, link with `gtest_main`.
- When to use `ASSERT_*` vs `EXPECT_*`?
  - Use `ASSERT_*` to stop a test when continuing makes no sense.
  - Use `EXPECT_*` to log failure but continue testing.

### Verification Steps

- Tests run without compilation errors.
- Output shows tests being executed and passing.
- Failed assertions provide clear descriptive output.

---

## 3. Real-World Example

Here is a complete minimal test program testing the `Factorial` function:

```c++
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this to see your first GoogleTest test suite in action.

---

## 4. Troubleshooting & Tips

### Common Issues

- **Test But No Output / Tests Not Running:** Make sure your test functions are properly declared with `TEST()` and your `main()` calls `RUN_ALL_TESTS()`.

- **Fatal Errors on `main()` Missing:** If you omit `main()` and don’t link with `gtest_main`, you will get linker errors.

- **Assertions Not Causing Test Failures:** Use `EXPECT_*` or `ASSERT_*` macros for assertions. Regular `if` statements don’t report failures.

- **Undesired Program Exit:** Use `EXPECT_*` instead of `ASSERT_*` if you want tests to continue after failures.

### Best Practices

- Group logically related tests under the same test suite.
- Avoid underscores in test and suite names to prevent warnings.
- Use `EXPECT_*` to collect multiple assertion results within a single test.
- Use `ASSERT_*` when subsequent code depends on the success of the assertion.
- Add meaningful custom failure messages using the `<<` operator for faster debugging.
- Consider linking with `gtest_main` if you don’t need a custom `main()` function.

### Performance Considerations

Simple tests like these run rapidly; optimize test execution time by minimizing expensive setup within tests.

### Alternative Approaches

- Use `TEST_F()` with test fixtures to share setup across multiple tests (covered in more advanced guides).
- Use `TEST_P()` and `INSTANTIATE_TEST_SUITE_P()` for parameterized tests when testing the same logic over multiple inputs.

---

## 5. Next Steps & Related Content

- Explore the [Your First Test Run guide](https://github.com/google/googletest/blob/main/docs/getting-started/first-steps-validation/first-test-run.mdx) to understand test execution output deeply.
- Learn about Test Fixtures in the [GoogleTest Primer: Test Fixtures section](https://github.com/google/googletest/blob/main/docs/primer.md#same-data-multiple-tests) for reusing setup code.
- Progress to advanced assertions and matchers for more expressive tests.
- Review [GoogleTest Installation and Setup](https://github.com/google/googletest/blob/main/guides/getting-started/setup-installation.mdx) if you face integration hurdles.

<Tip>
Link your test against `gtest_main` to avoid writing a main function when you don't need custom initialization.
</Tip>

<Note>
Avoid using underscores in test suite or test names, as GoogleTest recommends names without underscores to prevent warnings.
</Note>

<Warning>
Make sure to return the value of `RUN_ALL_TESTS()` from `main()`. Failure to do so will cause compilation errors and inaccurate test status reporting.
</Warning>

---