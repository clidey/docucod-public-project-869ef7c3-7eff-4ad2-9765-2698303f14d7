---
title: "Your First Test"
description: "Create and run a basic unit test using GoogleTest, walking through test registration, assertions, and executing the test suite. This page demonstrates the minimal viable workflow for validating the framework."
---

# Your First Test

## Introduction

Welcome to your first experience writing a unit test with GoogleTest. This guide walks you through creating a basic test, registering it with the test framework, running it, and interpreting the results. You'll learn the minimal steps needed to validate your code and see GoogleTest in action.

By the end of this guide, you'll have written your first working test and gained confidence in using GoogleTest's core testing features.

---

## Prerequisites

- A C++ development environment set up with support for C++17 or later.
- GoogleTest installed and ready to use (either built from source or available through your package manager).
- Basic familiarity with C++ syntax and compiling C++ programs.


## What You Will Achieve

- Understand how to define a GoogleTest test case using the `TEST()` macro.
- Learn how to run the test suite with `RUN_ALL_TESTS()`.
- See how GoogleTest reports test results and failures.


## Time Estimate

This guide should take approximately 10 to 15 minutes for a complete first test writing and running cycle.


---

## Step-by-Step Instructions

### Step 1: Include GoogleTest Headers

Start by including the GoogleTest main header at the beginning of your test source file.

```cpp
#include <gtest/gtest.h>
```

This header provides the necessary macros and functions to write and run tests.

### Step 2: Write Your First Test Using `TEST()` Macro

The simplest way to write a test is to use the `TEST()` macro. It defines a test function that will be executed by the test runner.

```cpp
// Define a test suite named "FactorialTest" and a test named "HandlesZeroInput".
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Verifies that Factorial(0) equals 1
}
```

- The first argument is the test suite (or test case) name.
- The second argument is the test name.
- Both should be valid C++ identifiers and should not contain underscores to avoid naming conflicts.

Inside the test, use assertions like `EXPECT_EQ()` to verify conditions. If an assertion fails, GoogleTest records a failure but continues the test.

### Step 3: Write the Function to Test (Example Only)

For demonstration, here's a simple `Factorial` function:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

Include it in the same file or link it from your application code.

### Step 4: Define Additional Tests

Add more tests in the same test suite for different inputs to validate your function further.

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 5: Write the `main()` Function to Run Tests

Most users link directly with the `gtest_main` library that provides a main function. However, if you write your own, it should be as follows:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);  // Initializes GoogleTest with arguments
  return RUN_ALL_TESTS();                 // Runs all registered tests
}
```

- `InitGoogleTest()` parses command-line arguments for GoogleTest options.
- `RUN_ALL_TESTS()` executes all the defined tests and returns zero on success or one when tests fail.

### Step 6: Build Your Test Program

If you're compiling manually with `g++`, use:

```shell
g++ -std=c++17 your_test_file.cpp -lgtest -pthread -o your_test_binary
```

For CMake projects, add GoogleTest as a dependency and link your test target with `gtest` and `gtest_main`.

### Step 7: Run Your Tests

Execute your test binary:

```shell
./your_test_binary
```

You should see output that lists each test case running, with `[  PASSED  ]` or `[  FAILED  ]` messages.

Example output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest provides helpful diagnostics indicating where the failure happened, what was expected, and what the actual result was.

---

## Practical Tips & Best Practices

- Always give meaningful and distinct names for your test suites and test cases.
- Use `EXPECT_*` assertions when you want the test to continue after failures and `ASSERT_*` when test continuation is invalid after failure.
- Run your tests frequently during development to catch regressions early.
- Use the `--gtest_filter` flag to run specific tests for quick feedback.
- Avoid underscores in test names to prevent naming issues.

---

## Troubleshooting Common Issues

- **Tests Not Running**: Make sure you call `InitGoogleTest()` before `RUN_ALL_TESTS()`.
- **Linker Errors**: Ensure you link against the GoogleTest library (`-lgtest -pthread`) correctly.
- **Unrecognized Flags**: GoogleTest strips known flags, make sure they are passed correctly on the command line.
- **Ignoring Return Value Warning**: Always return the result of `RUN_ALL_TESTS()` from your `main()`; otherwise, tests may report success incorrectly.

---

## Next Steps

- Explore writing tests with fixtures using `TEST_F()` for sharing setup and teardown code.
- Learn how to write parameterized tests to run the same test logic with different inputs.
- Dive into assertions and matchers to write more expressive tests.
- Learn how to write mocking tests with GoogleMock for complex dependency simulations.


## Resources & Further Reading

- [GoogleTest Primer](primer.md) — Essential concepts and getting started.
- [Testing Reference](reference/testing.md) — Detailed reference of GoogleTest macros and classes.
- [Assertions Reference](reference/assertions.md) — Comprehensive list of assertion macros.
- [Mocking Reference](reference/mocking.md) — How to create and use mocks.
- [Advanced GoogleTest Topics](advanced.md) — Deep dive into complex test techniques.


---

## Example: Complete Minimal Test File

```cpp
#include <gtest/gtest.h>

// Function under test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test cases
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run the above, and you have your first unit test suite successfully executed!
