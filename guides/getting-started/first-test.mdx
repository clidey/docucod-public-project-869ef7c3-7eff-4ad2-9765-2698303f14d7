---
title: "Writing and Running Your First Test"
description: "Take your first steps with test-driven development: write a basic test with GoogleTest, compile, and run it. This tutorial demonstrates fundamental test case creation and provides troubleshooting tips for a smooth experience."
---

# Writing and Running Your First Test

Take your first steps with test-driven development by writing a simple test case using GoogleTest, compiling it, and running it to observe the results. This tutorial demonstrates how to create fundamental test cases and provides troubleshooting tips to ensure your initial test runs smoothly.

---

## 1. Overview: What You’ll Accomplish

- **Goal:** Learn to write a basic GoogleTest test case, compile it with your C++ project, and run the test executable.
- **Prerequisites:**
  - GoogleTest installed and configured in your build system (CMake preferred).
  - A working C++ development environment.
  - Basic knowledge of compiling and running C++ programs.
- **Outcome:** By the end of this guide, you will have a simple test running that validates part of your code and outputs results you can interpret.
- **Estimated Time:** 10-20 minutes
- **Difficulty:** Beginner

---

## 2. Step-by-Step Instructions for Writing and Running Your First Test

### Step 1: Create a Test File

1. Create a new C++ source file, for example, `sample_test.cpp`, in your project directory.
2. Include the GoogleTest header at the top:

```cpp
#include <gtest/gtest.h>
```

3. Write your first test using the `TEST` macro:

```cpp
// Simple test suite named "SampleTest" with test named "BasicAssertions".
TEST(SampleTest, BasicAssertions) {
  // Expect two integers to be equal.
  EXPECT_EQ(7 * 6, 42);
}
```

This macro defines the test suite `SampleTest` and a test case `BasicAssertions`.

---

### Step 2: Integrate Your Test into Your Build System

- If using **CMake**, add `sample_test.cpp` to your test executable source list.
- Make sure your build links against GoogleTest libraries, e.g., `gtest` and `gtest_main`.

Example CMake snippet:

```cmake
add_executable(sample_test sample_test.cpp)
target_link_libraries(sample_test gtest_main gtest pthread)
add_test(NAME SampleTest COMMAND sample_test)
```

- Build your test executable:

```bash
cmake --build .
```

---

### Step 3: Write Your Custom `main()` Function (Optional)

GoogleTest provides a default `main()`, but if you want to customize behavior:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Integrate this in your test source or separately compile and link it.

---

### Step 4: Run Your Test

Execute the built test binary. For example:

```bash
./sample_test
```

Expected output example:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

---

### Step 5: Understand Test Results

- **[  PASSED  ]** means all assertions passed.
- If an assertion fails, GoogleTest prints detailed messages with file/line info.

Example failure message:

```none
sample_test.cpp:5: Failure
Expected equality of these values:
  7 * 6
    Which is: 41
  42
```

---

## 3. Practical Example: Factorial Function Tests

Suppose you have a function:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

Write tests like:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Build and run your tests as described above to validate your factorial function.

---

## 4. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Test">
<Accordion title="Compilation Errors: Missing GoogleTest Includes or Libraries">
Ensure you have included `<gtest/gtest.h>` and linked against the correct GoogleTest libraries (`gtest` and `gtest_main`). In CMake, verify `target_link_libraries()` includes these.
</Accordion>
<Accordion title="Test Not Executing or Showing Zero Tests">
Check your test names for underscores or invalid characters; GoogleTest recommends test suite and test names be valid C++ identifiers without underscores.
Confirm your tests are compiled and linked into your executable.
</Accordion>
<Accordion title="Test Fails Unexpectedly">
Review the output error message for specific assertion failures.
Add logging (`std::cout` or `printf`) inside tests to debug logic.
Use `ASSERT_*` macros if certain failures should abort the test immediately.
</Accordion>
<Accordion title="No Output or Program Exits Immediately">
Ensure `testing::InitGoogleTest(&argc, argv);` is called before `RUN_ALL_TESTS()`.
Run the executable in a terminal rather than double-clicking in some GUI environments.
</Accordion>
</AccordionGroup>

---

## 5. Tips and Best Practices

- **Use `ASSERT_*` vs `EXPECT_*`:** Use fatal assertions (`ASSERT_*`) when further code in the test depends on passing the assertion.
- **Name without Underscores:** Avoid underscores in test suite and test names to prevent filtering issues.
- **Link with `gtest_main` if Possible:** This avoids writing boilerplate main.
- **Call `RUN_ALL_TESTS()` Exactly Once:** Running multiple times is unsupported.

---

## 6. Next Steps & Related Guides

- **Writing Multiple Tests & Fixtures**: Explore how to group common setup and teardown with `TEST_F()`.
- **Validating Your Setup**: Use the guide to run sample GoogleTest tests and verify installation.
- **Quickstart Guides**: See platform-specific quickstart instructions.
- **Mocking Introduction**: After mastering this, extend tests with GoogleMock for mock-based unit testing.


---

## References

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Foundational concepts and best practices.
- [GoogleTest C++ Reference for `TEST()`](reference/testing.md#TEST) — Detailed API reference.
- [Quickstart & Where to Learn More](overview/integration-adoption/quickstart.mdx) — Fast setup tutorials.
- [Validating Your Setup](getting-started/first-run-validation/validate-setup.mdx) — Run validation tests successfully.
- [GoogleTest Primer: Simple Tests](docs/primer.md#simple-tests) — More example tests.

---