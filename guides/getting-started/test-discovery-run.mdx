---
title: "Test Discovery and Execution"
description: "Demonstrates how GoogleTest discovers and executes tests in your binary, including test naming conventions, filtering, and basic command-line options to control test runs."
---

# Test Discovery and Execution

## Overview

This guide explains how GoogleTest automatically discovers and executes tests available in your test binary. It covers key concepts such as test naming conventions, filtering mechanisms, and command-line options you can use to control which tests are run and how results are reported. Whether you have dozens or thousands of tests, GoogleTest streamlines test execution for you.

## Workflow Overview

- **Task Description:** Learn how GoogleTest identifies, organizes, and runs tests without manual listing.
- **Prerequisites:** Have a test binary compiled with GoogleTest linked and at least one test defined.
- **Expected Outcome:** Ability to run tests selectively via command-line filters, understand test naming, and interpret test run outputs.
- **Time Estimate:** Approximately 15 minutes to grasp and apply basic test execution controls.
- **Difficulty Level:** Beginner to Intermediate.

## How GoogleTest Finds and Runs Tests

GoogleTest automatically discovers test cases and individual tests at runtime by scanning the binary for tests registered via the `TEST()`, `TEST_F()`, and other test macros. It does not require manual specification of test lists.

### Test Suite and Test Name Conventions

- Each test belongs to a **Test Suite** (formerly called Test Case). This is the first parameter in the `TEST()` macro.
- Individual tests are named within their suites and identified by the second parameter.
- Full test names are combined as `<TestSuite>.<TestName>`.

Example:

```cpp
TEST(MathUtils, FactorialOfZero) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(MathUtils, FactorialOfPositive) {
  EXPECT_EQ(Factorial(3), 6);
}
```

Here, `MathUtils` is the test suite; `FactorialOfZero` and `FactorialOfPositive` are tests.

### Running All Tests

Simply execute the test binary. GoogleTest runs all discovered tests:
```bash
./my_test_binary
```

### Filtering Tests

You rarely want to run all tests every time. Use the `--gtest_filter` flag to run a subset.

Syntax:

```bash
--gtest_filter=<positive_patterns>[-<negative_patterns>]
```

- Patterns are colon-delimited.
- Wildcards `*` and `?` are supported.

Examples:

- Run all tests in the `MathUtils` suite:

  ```bash
  ./my_test_binary --gtest_filter=MathUtils.*
  ```

- Run only `FactorialOfZero` test:

  ```bash
  ./my_test_binary --gtest_filter=*FactorialOfZero
  ```

- Run all except `FactorialOfZero`:

  ```bash
  ./my_test_binary --gtest_filter=-*FactorialOfZero
  ```

- Run all tests except those in `MathUtils`:

  ```bash
  ./my_test_binary --gtest_filter=-MathUtils.*
  ```

### Output Reporting Options

- `--gtest_brief=1` shows only brief information about tests.
- `--gtest_repeat=N` repeats all tests N times.
- `--gtest_list_tests` lists all discovered tests without running them.

Example:

```bash
./my_test_binary --gtest_list_tests
```

Shows something like:

```
MathUtils.
  FactorialOfZero
  FactorialOfPositive
StringUtils.
  Trim
  ToUpper
```

## Step-by-Step Instructions

<Steps>
<Step title="Verify Test Definitions">
Ensure your tests use `TEST()` or `TEST_F()` macros properly and compile into your binary.
</Step>
<Step title="Run All Tests">
Execute the test binary:

```bash
./my_test_binary
```

All tests are discovered and run. Expected result: console output shows test results.
</Step>
<Step title="List Available Tests">
Use the list tests option to see all tests discovered:

```bash
./my_test_binary --gtest_list_tests
```

You should see test suites and their constituent tests.
</Step>
<Step title="Run a Subset of Tests Using Filters">
Use the `--gtest_filter` to select specific tests:

```bash
./my_test_binary --gtest_filter=MathUtils.*
```

The output will show only tests within the `MathUtils` suite.
</Step>
<Step title="Use Negative Filters to Exclude Tests">
Exclude tests you don't want to run:

```bash
./my_test_binary --gtest_filter=-MathUtils.FactorialOfZero
```

This runs all tests except the specified one.
</Step>
<Step title="Repeat Tests to Check Stability">
Use `--gtest_repeat` to rerun tests multiple times:

```bash
./my_test_binary --gtest_repeat=5
```

Ensure tests pass consistently across repetitions.
</Step>
</Steps>

## Practical Examples

### Example 1: Running and Filtering Tests

```bash
# Run all tests
./my_test

# Run just MathUtils suite
./my_test --gtest_filter=MathUtils.*

# Run only specific test
./my_test --gtest_filter=MathUtils.FactorialOfZero

# Run all except a test
./my_test --gtest_filter=-MathUtils.FactorialOfZero
```

### Example 2: List Tests for Discovery

```bash
./my_test --gtest_list_tests
```

Sample output:

```
MathUtils.
  FactorialOfZero
  FactorialOfPositive
StringUtils.
  Trim
  ToUpper
```

### Example 3: Repeat Tests Multiple Times

```bash
./my_test --gtest_repeat=10
```

Useful for catching flaky tests.

## Troubleshooting & Tips

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="No Tests Run">
Make sure your test binary is linked against GoogleTest properly and contains tests declared with `TEST` or `TEST_F`. Verify you didn't miss including the test source files in your build.
</Accordion>
<Accordion title="Tests Are Discovered but Not Executed with Filter">
Confirm your filter patterns are correct. Remember that negative filters exclude matching tests, and wildcards `*` can be used liberally. Use `--gtest_list_tests` to see exact test names.
</Accordion>
<Accordion title="Understanding Test Name Patterns">
If your tests use parameterized or typed tests, test names may include suffixes; always verify with `--gtest_list_tests`.
</Accordion>
</AccordionGroup>

<Tip>
Use `--gtest_help` to display all available command-line options for test execution.
</Tip>

## Next Steps & Related Content

- Explore [Test Discovery and Assertions](/overview/feature-summary-and-workflows/test-discovery-assertions) for deeper understanding of test filtering and assertions.
- Read [Writing Your First Test](/guides/getting-started/writing-your-first-test) if you want to start creating tests.
- See [Mocking: Mock Objects & Expectations](/overview/feature-summary-and-workflows/mocking-mock-objects-overview) to integrate mocking into your tests.
- Consult the [GoogleTest Primer](docs/primer.md) for foundational knowledge on using GoogleTest.

---

For additional command-line flags and advanced usage, see the official GoogleTest documentation and consider linking your test with the `gtest_main` or `gmock_main` libraries to simplify `main()` function management.
