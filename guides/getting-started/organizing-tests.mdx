---
title: "Organizing and Running Tests"
description: "Best practices for organizing tests, using test discovery, and running individual or all tests efficiently. Explains the recommended folder layouts, naming conventions, and key runtime options for managing C++ test suites."
---

# Organizing and Running Tests

GoogleTest provides a powerful yet flexible approach to organizing your C++ test suites and running tests selectively or all at once. This guide details best practices for structuring your test files and folders, naming conventions to facilitate discovery, and key runtime options to efficiently execute and manage tests.

---

## 1. Structuring Your Test Code

### Recommended Folder Layout

Organize your test files in a logical and consistent manner alongside your source code:

- Place test code in a dedicated `test` or `tests` directory within your project.
- If your project has multiple modules or components, use subdirectories reflecting those modules.
- Adopt a parallel structure mirroring your production code layout to easily locate the tests corresponding to each component.

For example:

```plaintext
/my_project
  /src
    /graphics
      renderer.cc
      renderer.h
    /network
      connection.cc
      connection.h
  /tests
    /graphics
      renderer_test.cc
    /network
      connection_test.cc
```

### Naming Conventions

- Use descriptive names ending with `_test.cc` or `_unittest.cc` for test files.
- For individual test cases, use `TEST` or `TEST_F` macros with descriptive test names.
- Avoid ambiguous or generic test names to facilitate quick identification in reports.

```cpp
TEST(RendererTest, DrawsCircleCorrectly) {
  // Test implementation
}

TEST_F(NetworkConnectionTest, ConnectsToServer) {
  // Test implementation
}
```

### Grouping Tests Using Test Suites

- Use the first parameter of `TEST` and `TEST_F` as the test suite name to logically group related tests.
- This grouping enables selective execution and better reporting.

## 2. Test Discovery

GoogleTest discovers tests automatically by scanning for `TEST` and related macros in compiled binaries.

- Ensure your test executables include all necessary test files.
- Use consistent naming and folder structure to aid build systems and IDE integrations.

## 3. Running Tests

GoogleTest provides flexible ways to run your tests via command-line options.

### Running All Tests

Simply execute your test binary without arguments. All tests in the compiled executable will run.

```bash
./my_tests
```

### Running Specific Tests

Filter tests using the `--gtest_filter` flag with wildcard support:

- Run a single test suite:

  ```bash
  ./my_tests --gtest_filter=RendererTest.*
  ```

- Run a specific test:

  ```bash
  ./my_tests --gtest_filter=RendererTest.DrawsCircleCorrectly
  ```

- Run multiple tests or suites using patterns separated by `:` (include) and `-` (exclude):

  ```bash
  ./my_tests --gtest_filter=RendererTest.*:NetworkConnectionTest.ConnectsToServer
  ./my_tests --gtest_filter=-*SlowTests
  ```

### Running Tests With Output Options

- Use `--gtest_repeat=N` to run tests multiple times, useful for flaky tests or concurrency checks.
- Use `--gtest_break_on_failure` to stop when a test assertion fails.
- Generate XML test reports with `--gtest_output=xml:filename.xml`.


## 4. Best Practices

### Keep Tests Small and Focused

- Each test should verify a specific behavior or unit of functionality.
- Avoid complex dependencies within tests unless necessary.

### Use Test Fixtures for Shared Setup

- Use `TEST_F` for tests requiring common setup or teardown.

### Isolate Tests

- Ensure tests do not depend on each other or shared global state.

### Manage Test Dependencies

- Keep build dependencies minimal for test targets.
- Use mocks and fakes as appropriate to isolate components.

## 5. Troubleshooting Test Execution

- Verify your build system includes all test files.
- Ensure the test main function is linked (GoogleTest provides one in `gtest_main` library).
- Check test filter patterns and use `--gtest_list_tests` to see detected tests.
- For parallel test runs, consider GoogleTest's support via test sharding.

## 6. Summary of Important Runtime Flags

| Flag                          | Purpose                                   |
|-------------------------------|-------------------------------------------|
| `--gtest_filter`              | Run only tests matching pattern           |
| `--gtest_repeat=N`            | Run tests N times                          |
| `--gtest_output=xml:<file>`   | Save test results in XML format            |
| `--gtest_break_on_failure`    | Stop running tests on first failure       |
| `--gtest_list_tests`          | List all tests discovered in the binary   |

## 7. Additional Resources

- [GoogleTest Primer: Writing Your First Test](./writing-your-first-test.md)
- [Test Fixtures: Reusable Test Setup](./using-fixtures.md)
- [Parameterized Tests](./parameterized-tests.md)
- [Mocking Reference and Cookbook](./gmock_cook_book.md) for integration with GoogleMock

---

By following this guide, you can keep your test suites well-organized, accelerate test execution, and achieve more reliable, maintainable C++ testing using GoogleTest.