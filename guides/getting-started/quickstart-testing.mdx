---
title: "Writing and Running Your First Test"
description: "Learn how to write, build, and execute your first unit test with GoogleTest. This guide covers project setup, test definition, compilation, and test discovery so you can quickly validate your C++ code."
---

# Writing and Running Your First Test

## Overview

This guide walks you through writing, building, and executing your first unit test using GoogleTest. You will learn how to set up your project for GoogleTest, define minimal tests using the `TEST()` macro, compile your test binary, and run tests with automatic discovery and reporting.

By the end of this guide, you will have a working GoogleTest test program and understand the basics of its test structure and execution.

---

## Prerequisites

Ensure you have the following set up before proceeding:

- GoogleTest library installed and accessible in your build environment.
- A C++17 capable compiler.
- Familiarity with basic C++ syntax.
- Your project’s build system configured to include GoogleTest headers and link with its libraries.

If you need help with installation, see the [Installation Instructions](../getting-started/setup-basics/installation.md).

---

## Writing Your First Test

### Step 1: Define a Simple Test Using the TEST Macro

The simplest way to write a test in GoogleTest is with the `TEST()` macro. It creates a standalone test without a fixture.

```cpp
#include <gtest/gtest.h>

// A simple test case that checks if 1 + 1 equals 2.
TEST(SimpleMathTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}
```

- `SimpleMathTest` is the test suite name.
- `Addition` is the test name in this suite.

Both must be valid C++ identifiers and must not use underscores (`_`).

### Step 2: Understand the Test Structure

When this test runs, GoogleTest:

1. Creates a fresh test context.
2. Executes the code within the braces.
3. Checks assertions (`EXPECT_EQ` here).
4. Reports success if all assertions pass; otherwise, it reports failures.

Use `EXPECT_` macros when you want the test to continue and check multiple assertions, and `ASSERT_` macros when failure should abort the test early.

### Step 3: Add More Assertions

You can add multiple assertions to thoroughly verify behaviors:

```cpp
TEST(SimpleMathTest, MultipleAssertions) {
  EXPECT_EQ(2 * 3, 6);
  EXPECT_NE(5 - 2, 0);
  ASSERT_GT(10, 5);
}
```

---

## Building Your Test Program

### Step 1: Include GoogleTest Headers

Make sure you include GoogleTest's main header at the top of your test source files:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Compile and Link

Compile your test source file including the GoogleTest headers and link against the GoogleTest library.

Example command using `g++`:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread your_test_file.cc \
    /path/to/libgtest.a /path/to/libgtest_main.a -o your_test_binary
```

If your build system uses CMake or Bazel, integrate GoogleTest accordingly. See [Integrating with CMake, Bazel, and Other Build Tools](../guides/integration-and-best-practices/build-integration.md) for details.

### Step 3: Use `gtest_main` or Provide your own Main

GoogleTest provides a ready-made `main()` in the `gtest_main` library which initializes GoogleTest and runs all tests.

If you don’t link with `gtest_main`, include this in your test source:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

`InitGoogleTest` parses command-line arguments for GoogleTest flags, preparing the framework.

`RUN_ALL_TESTS()` runs all registered tests and returns 0 if all pass, or 1 otherwise.

---

## Running Your Tests

### Step 1: Run the Test Binary

Execute your compiled test program. GoogleTest automatically discovers and runs all tests registered via `TEST()`, `TEST_F()`, or other macros.

Example:

```bash
./your_test_binary
```

### Step 2: Interpreting the Output

GoogleTest outputs results in a clear format:

- `[ RUN      ]` indicates the test is starting.
- `[       OK ]` indicates the test passed.
- `[  FAILED  ]` indicates failure.

A summary at the end shows overall test counts and failures.

### Step 3: Use Command Line Flags for Control

GoogleTest accepts command line flags for finer control, e.g., running specific tests:

```bash
./your_test_binary --gtest_filter=SimpleMathTest.Addition
```

Run with `--help` to see all available flags.

---

## Tips and Best Practices

- **Use Clear Names:** Give descriptive test suite and test names to easily understand tests.
- **Isolate Tests:** Tests should be independent and not rely on side-effects from other tests.
- **Use Test Fixtures:** When multiple tests share setup, use `TEST_F()` with fixtures.
- **Check Assertions:** Prefer `EXPECT_*` to report all failures; use `ASSERT_*` when needing to abort early.
- **Return Value Matters:** Always return the value from `RUN_ALL_TESTS()` in your `main()`.

---

## Common Pitfalls

- **Mistyping `SetUp`/`TearDown`:** Use the exact capitalization. Mis-spelling leads to them not being called.
- **Ignoring `RUN_ALL_TESTS()` return:** Not using its return value can cause false-positive test results.
- **Using `_` in test names:** Test and suite names must not contain underscores.
- **Not initializing GoogleTest:** Always call `InitGoogleTest()` before `RUN_ALL_TESTS()`.

---

## Example: Full Minimal Test Program

```cpp
#include <gtest/gtest.h>

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, Factorial(0));
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(1, Factorial(1));
  EXPECT_EQ(2, Factorial(2));
  EXPECT_EQ(6, Factorial(3));
  EXPECT_EQ(40320, Factorial(8));
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This code tests a `Factorial` function with some basic inputs, running two tests in the suite `FactorialTest`.

---

## Next Steps

- Explore [GoogleTest Primer](primer.md) for foundational concepts and more examples.
- Learn about [Test Fixtures](primer.md#same-data-multiple-tests) for shared test setups.
- Dive into [Assertions Reference](reference/assertions.md) for detailed assertion usage.
- Understand [Parameterized and Typed Tests](advanced.md#value-parameterized-tests) for data-driven testing.

---

For additional help, see [Troubleshooting Common Issues](../getting-started/troubleshooting/common-issues.md).
