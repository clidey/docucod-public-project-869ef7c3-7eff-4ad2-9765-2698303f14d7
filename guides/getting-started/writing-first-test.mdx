---
title: "Writing Your First Test"
description: "Step-by-step guide to creating your first test case with GoogleTest, covering test suite definition, basic assertions, and understanding test execution flow. Demonstrates how to compile and run tests successfully."
---

# Writing Your First Test

## Overview
This guide walks you through the process of creating your very first test case using GoogleTest. It covers how to define a test suite, write basic assertions to validate code, and explains the flow of test execution. By following this guide, you'll compile, run, and verify your tests successfully.

---

## Prerequisites
- You have installed GoogleTest and its dependencies correctly.
- Your development environment is configured for C++ development with C++17 support.
- You have a basic understanding of C++ programming.

---

## What You Will Achieve
- Define a simple test suite and test case.
- Use basic assertions to check expected outcomes.
- Build and run your test executable.
- Understand how GoogleTest reports test results.

---

## Time Estimate
Approximately 15–30 minutes.

---

## Difficulty Level
Beginner

---

## Step-by-Step Instructions

### Step 1: Include the GoogleTest Header
Start by including the `gtest/gtest.h` header in your test source file. This provides access to the GoogleTest framework functionalities.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Write Your First Test Case
GoogleTest organizes tests into test suites and test cases. Use the `TEST()` macro to define a test. The macro takes two arguments: the test suite name and the test name.

```cpp
TEST(MathTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}
```

- `MathTest` is the test suite name.
- `Addition` is the test name.
- `EXPECT_EQ` is an assertion macro that checks if the two values are equal.

### Step 3: Add More Assertions
GoogleTest provides a variety of assertions. Here are a few examples you can add to your test suite:

```cpp
TEST(MathTest, BasicAssertions) {
  EXPECT_TRUE(4 > 3);
  EXPECT_FALSE(3 > 4);
  EXPECT_NE(0, 1);
  EXPECT_LT(3, 5);
  EXPECT_GT(5, 3);
  EXPECT_LE(3, 3);
  EXPECT_GE(4, 4);
}
```

### Step 4: Create the `main()` Function
GoogleTest provides its own implementation of `main()`, but you can also define your own if needed. The minimal setup is to initialize GoogleTest and run all tests:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Alternatively, if using GoogleMock for mocks, you can replace `InitGoogleTest` with `InitGoogleMock`, which initializes both:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Step 5: Build Your Test
Compile your test source with GoogleTest libraries linked. A simple command using `g++` might look like:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread your_test.cc 
    /path/to/libgtest.a /path/to/libgtest_main.a -o your_test
```

Replace `/path/to/` with the correct paths on your system.

### Step 6: Run the Test Executable
Execute `./your_test`. The output will show each test and whether it passed or failed. For example:

```shell
[ RUN      ] MathTest.Addition
[       OK ] MathTest.Addition (0 ms)
[ RUN      ] MathTest.BasicAssertions
[       OK ] MathTest.BasicAssertions (0 ms)

[==========] 2 tests from 1 test suite ran.
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest outputs detailed messages indicating the failure location and its cause.

---

## Understanding Test Execution Flow
- Each `TEST()` function is automatically registered and executed by `RUN_ALL_TESTS()`.
- Assertions like `EXPECT_*` allow tests to continue after failure; `ASSERT_*` abort the current test case immediately on failure.
- Tests do not depend on order; GoogleTest runs all registered tests independently.

---

## Practical Tips
- Use descriptive test suite and test names to clarify intent.
- Start with simple assertions to validate your assumptions.
- Build modular tests; verify one logical unit or condition per test case.
- Re-run your test executable frequently during development for immediate feedback.

---

## Common Pitfalls
- **Missing `main()`**: Without `main()`, your tests won’t run.
- **Forgetting to link GoogleTest libraries**: Compile errors or linker errors may occur.
- **Assertion misuse**: Using `ASSERT_*` when continuing tests is acceptable can abort prematurely.
- **Ignoring test outputs**: Always examine test output carefully for failed tests.

---

## Example: Complete Test File
```cpp
#include <gtest/gtest.h>

TEST(MathTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}

TEST(MathTest, BasicAssertions) {
  EXPECT_TRUE(4 > 3);
  EXPECT_FALSE(3 > 4);
  EXPECT_NE(0, 1);
  EXPECT_LT(3, 5);
  EXPECT_GT(5, 3);
  EXPECT_LE(3, 3);
  EXPECT_GE(4, 4);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this test, watching for the PASS output.

---

## Troubleshooting

### Test Not Running
- Confirm your test source is compiled and linked into the test executable.
- Make sure `main()` is defined or you're linking against `gtest_main` which provides it.

### Assertions Not Firing
- Use `EXPECT_*` for checks that allow continuing.
- Use `ASSERT_*` for critical errors that should abort test immediately.

### Build/Link Errors
- Verify include paths and linking against `libgtest.a` and dependencies.
- Confirm compatibility of compiler and standard version (C++17 at minimum).

### Tests Passing Unexpectedly
- Check that you placed the assertions inside the test body.
- Verify that no code exceptions are swallowed silently.

---

## Next Steps
- Explore writing parameterized and typed tests.
- Learn about GoogleMock to mock dependencies and test interactions.
- Dive deeper into richer assertions for comprehensive verification.

For more detailed guides, see: [Getting Started with GoogleMock](/getting_started/first_test_and_validation/using_googlemock_basics) and [Mocking Reference](docs/reference/mocking.md).

---

_Last updated: GoogleTest version aligned with GoogleMock main branch_
