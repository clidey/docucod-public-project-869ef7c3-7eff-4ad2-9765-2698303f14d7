---
title: "Writing Your First Test"
description: "A practical walkthrough of creating a first unit test case using GoogleTest. Covers anatomy of a test, basic assertions, compiling, and executing the test suite."
---

# Writing Your First Test

A practical walkthrough of creating a first unit test case using GoogleTest. Covers anatomy of a test, basic assertions, compiling, and executing the test suite.

---

## 1. Introduction

Before diving in, this guide helps you write, compile, and run your very first GoogleTest unit test. You'll learn the test's basic structure, how to verify conditions, and how to interpret the testing output.

### Prerequisites

- GoogleTest must be installed and configured in your build environment. For detailed setup, please see the [Environment Configuration](https://github.com/google/googletest/tree/main/getting-started/quickstart-usage/configuration-overview) guide.
- Familiarity with basic C++ syntax.

### Expected Outcome

By following this guide, you will have:

- Written a simple test function using the `TEST()` macro.
- Used GoogleTest assertions to verify test conditions.
- Compiled a test binary linked against GoogleTest libraries.
- Run the test binary and interpreted the output result.

### Estimated Time

Approximately 15-20 minutes.

### Difficulty Level

Beginner

---

## 2. Understanding the Anatomy of a Test

### The TEST Macro

GoogleTest defines tests using the `TEST()` macro, which takes two parameters: a *test suite name* and a *test name*. Together, they uniquely identify the test case.

Example:

```cpp
TEST(MathTest, AdditionWorks) {
  EXPECT_EQ(2 + 2, 4);
}
```

This declares a test named `AdditionWorks` within the `MathTest` test suite.

### Test Body

Inside the macro, you write your test code. Typically, this involves calling code you want to test and verifying the results using assertions, such as `EXPECT_EQ`, `ASSERT_TRUE`, etc.

- `EXPECT_*` assertions allow tests to continue after failure.
- `ASSERT_*` assertions abort the current test on failure.

### Assertions

Assertions are macros that evaluate conditions. When they fail, GoogleTest reports the failure with file and line number info.

Examples:

```cpp
EXPECT_TRUE(ptr != nullptr);
EXPECT_EQ(value, expected_value);
ASSERT_NE(container.size(), 0);
```

---

## 3. Writing Your First Test Step-by-Step

<Steps>
<Step title="Create a Test Source File">
Create a C++ source file, e.g., `sample_test.cc`.
Add the necessary include for GoogleTest:

```cpp
#include <gtest/gtest.h>
```

This includes the GoogleTest framework.
</Step>
<Step title="Define a Test Case Using TEST()">
Write your first test function:

```cpp
TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(7, 3 + 4);            // Check equality
  EXPECT_TRUE(5 > 3);             // Check truth
  EXPECT_FALSE(3 > 5);            // Check falsehood
}
```

This test verifies some basic integer arithmetic.
</Step>
<Step title="Compile the Test Binary">
Compile your test source linking against GoogleTest libraries.

Example using `g++` and pkg-config:

```bash
g++ -std=c++17 -isystem /usr/local/include -pthread \
    sample_test.cc -L/usr/local/lib -lgtest -lgtest_main -o sample_test
```

Adjust the include and library paths as per your installation.
If you're using CMake or Bazel, please refer to the respective configuration guides.
</Step>
<Step title="Run the Test Binary">
Execute your compiled test:

```bash
./sample_test
```

Expected output:

```text
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

The `[  PASSED  ]` line confirms the test passed.
</Step>
</Steps>

---

## 4. Example: Full First Test

Here is the complete minimal example:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(7, 3 + 4);            // Check equality
  EXPECT_TRUE(5 > 3);             // Check truth
  EXPECT_FALSE(3 > 5);            // Check falsehood
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run as described above.

---

## 5. Best Practices and Tips

- Always use the `TEST()` macro for independent test cases.
- Use descriptive test suite and test names for clarity and searchability.
- Prefer `EXPECT_` assertions if you want to continue test execution after a failure; use `ASSERT_` to abort early.
- For more complex tests involving shared data and setup/teardown, explore `TEST_F()` with fixtures.
- Use the GoogleTest Primer guide to deepen your understanding post this first test.

---

## 6. Common Issues and Troubleshooting

### Test Binary Won't Link

- Verify that GoogleTest libraries (`-lgtest`, `-lgtest_main`) are correctly linked.
- Ensure you are compiling with the same C++ standard (C++17) required by GoogleTest.
- Refer to the [Environment Configuration](https://github.com/google/googletest/tree/main/getting-started/quickstart-usage/configuration-overview) if unfamiliar.

### Test Does Not Run or No Tests Found

- Confirm that your test functions use the `TEST()` macro properly.
- Make sure to call `RUN_ALL_TESTS()` in your `main()` function.

### Test Failures

- Read the failure messages carefully; they include file and line numbers.
- Run tests with `--gtest_verbose=info` to get more debug information.

---

## 7. Next Steps

- Explore [Writing and Running Your First Test](https://github.com/google/googletest/tree/main/getting-started/quickstart-usage/writing-first-test) for an extended tutorial.
- Learn about [assertion macros](https://github.com/google/googletest/tree/main/api_reference/core_assertions_matchers/assertions_overview).
- Set up test fixtures using `TEST_F` to manage shared setup and teardown logic.
- Integrate GoogleTest with your build system (CMake, Bazel) for large projects.

---

## Useful Links

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) for comprehensive basics
- [Environment Configuration](https://github.com/google/googletest/tree/main/getting-started/quickstart-usage/configuration-overview)
- [Assertions Reference](https://github.com/google/googletest/tree/main/api_reference/core_assertions_matchers/assertions_overview)
- [Writing and Running Your First Test](https://github.com/google/googletest/tree/main/getting-started/quickstart-usage/writing-first-test)
- [Troubleshooting Common Setup Issues](https://github.com/google/googletest/tree/main/getting-started/troubleshooting-support/common-setup-issues)

---

> _This guide focuses solely on the user experience of writing and running a first test using GoogleTest. For configuration and advanced features, consult related documentation._