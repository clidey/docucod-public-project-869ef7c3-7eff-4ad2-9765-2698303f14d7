---
title: "Writing Your First Test"
description: "A hands-on walkthrough for writing your initial test cases using GoogleTest. Understand the test structure, use the essential macros, and run your tests successfully."
---

# Writing Your First Test

## Overview

Welcome to GoogleTest! This guide will walk you through creating your first C++ test cases using the GoogleTest framework. You'll learn how to define tests, use the core assertion macros, and run your tests successfully. By the end, you'll be ready to write reliable, well-structured tests to verify your code.

---

## 1. Understanding the Test Structure

GoogleTest organizes tests into **test suites** (formerly called test cases) and **tests**.

- A **test suite** groups related tests, often reflecting the structure or functionality of your code.
- A **test** checks one particular behavior or scenario.

Each test is a simple C++ function declared using macros that GoogleTest provides.

## 2. Prerequisites

Before you begin:

- Ensure GoogleTest is installed and properly set up in your build system.
- Link your test executable against `gtest` and `gtest_main` (or provide your own `main` function).
- Include the header `<gtest/gtest.h>` in your test source files.

## 3. Writing Your First Simple Test

Start by creating a test file, for example `sample_test.cc`. At the top, include GoogleTest:

```cpp
#include <gtest/gtest.h>
```

Then, use the `TEST` macro to define a test inside a test suite:

```cpp
// A simple factorial function to be tested.
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Defines a test in the test suite "FactorialTest" with the name "HandlesZeroInput".
TEST(FactorialTest, HandlesZeroInput) {
  // Asserts that Factorial(0) returns 1.
  EXPECT_EQ(Factorial(0), 1);
}

// Defines another test checking positive inputs.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

**Key points:**

- `TEST(TestSuiteName, TestName)` defines a test function.
- `EXPECT_EQ(actual, expected)` verifies that the two values are equal.
- GoogleTest will report a failure if any assertion fails but will continue running the test.

## 4. Running Your Tests

Link your test executable with GoogleTest libraries including `gtest_main` (which provides a default `main()`). For example with CMake:

```cmake
add_executable(my_test sample_test.cc)
target_link_libraries(my_test gtest_main gtest pthread)  # pthread for Linux
add_test(NAME MyTest COMMAND my_test)
```

Run your test executable:

```bash
./my_test
```

You should see output indicating which tests ran and whether they passed or failed.

## 5. Using Other Assertion Macros

GoogleTest provides a rich set of assertions, including but not limited to:

- `EXPECT_TRUE(condition)` and `ASSERT_TRUE(condition)`
- `EXPECT_FALSE(condition)` and `ASSERT_FALSE(condition)`
- `EXPECT_NE(val1, val2)`, `EXPECT_LT(val1, val2)`, `EXPECT_LE(val1, val2)`, `EXPECT_GT(val1, val2)`, `EXPECT_GE(val1, val2)`
- String comparison macros like `EXPECT_STREQ(str1, str2)` for C strings.
- Floating-point comparisons such as `EXPECT_FLOAT_EQ(expected, actual)`.

Use `EXPECT_` macros for nonfatal checks (test continues on failure), and `ASSERT_` macros for fatal checks (test aborts on failure).

## 6. Streaming Failure Messages

For any assertion, you can append custom messages to help diagnose failures:

```cpp
EXPECT_EQ(Factorial(3), 5) << "Factorial(3) should be 6, but got unexpected value.";
```

This message is printed alongside the standard failure output.

## 7. Example

Here's a complete minimal test file, `factorial_test.cc`:

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this to confirm your setup is working.

## 8. Best Practices

- Group logically related checks into test suites.
- Use `ASSERT_*` when a failure should prevent further test execution.
- Use `EXPECT_*` when you want to continue testing after failures.
- Provide clear, concise custom failure messages when needed.
- Keep tests independent and side-effect free.

## 9. Troubleshooting

- Make sure you have called `testing::InitGoogleTest()` before running `RUN_ALL_TESTS()`.
- If tests don’t run or are not discovered, verify your build links GoogleTest properly.
- Watch for macro name conflicts; GoogleTest allows renaming macros if needed.

## 10. Next Steps

Once comfortable with the basics, explore:

- Writing test fixtures with `TEST_F` to share setup/teardown logic.
- Parameterized tests with `TEST_P` and `INSTANTIATE_TEST_SUITE_P`.
- Typed and Type-Parameterized tests to run the same logic over multiple types.
- Advanced assertions and matchers for complex verification.
- Mocking with GoogleMock for simulating dependencies.

For detailed guidance, see the [GoogleTest Primer](primer.md) and [Advanced Topics](advanced.md).

---

## Additional Resources

- [GoogleTest Assertions Reference](reference/assertions.md)
- [GoogleTest Primer](primer.md)
- [Writing Test Fixtures](guides/core-test-design/test-fixtures-sharing-code.md)
- [Parameterized & Typed Tests Guide](guides/core-test-design/parameterized-typed-tests.md)
- [Mocking with GoogleMock](guides/mocking-advanced-techniques/intro-mocking.md)

---

Remember, effective testing is a journey—start small, keep your tests clear and manageable, and build confidence in your code with each passing test!
