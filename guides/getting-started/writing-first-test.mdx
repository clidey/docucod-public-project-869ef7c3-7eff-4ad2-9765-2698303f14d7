---
title: "Writing and Running Your First Test"
description: "A concise walkthrough for creating your first test case, building it, and executing it on the command line. Covers basic test macros, assertions, and interpreting test output—accelerating your first successful test authoring experience."
---

# Writing and Running Your First Test

## Getting Started: Your First GoogleTest Case

This guide walks you through the essential steps to write, build, and run your very first test using GoogleTest. It demystifies the core macros, basic assertions, and shows how to interpret test results in your command line — empowering you to quickly validate your C++ code correctness with confidence.

---

## What You Will Achieve

- Understand how to create a simple test using `TEST` and `TEST_F` macros.
- Learn how to build your test program.
- Run your tests via the command line and read their output.
- Know the basic assertions to verify conditions.
- Gain confidence in authoring successful test cases.

### Prerequisites

Before you begin, ensure:

- GoogleTest is installed and integrated properly into your build system. (See [Installation Guide](/getting-started/setup-overview/installation-guide))
- Your project is configured to link against the GoogleTest libraries. (See [Initial Project Configuration](/getting-started/setup-overview/first-project-setup))
- You have a working compiler supporting C++17 or later.

---

## Step-by-Step Instructions

### 1. Write a Simple Test

Create a `.cc` file, e.g., `example_test.cc`, and include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

Define a test using the `TEST` macro:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

**Explanation:**
- `FactorialTest` is the test suite name grouping related tests.
- `HandlesZeroInput` is the specific test name.
- Inside the test body, `EXPECT_EQ` asserts that `Factorial(0)` returns `1`.

### 2. Use a Test Fixture for Shared Setup

If multiple tests need common setup or shared objects, define a fixture class:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};
```

Write tests using the fixture with `TEST_F`:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

Test fixture objects are fresh for each test, ensuring independence.

### 3. Build Your Test Program

How you build depends on your environment. Using CMake as an example:

1. Add your test source (e.g., `example_test.cc`) to your executable.
2. Link with `gtest` and `gtest_main` (or with `gtest` and provide your own `main()`).

Example snippet in `CMakeLists.txt`:

```cmake
add_executable(example_test example_test.cc)
target_link_libraries(example_test gtest_main)
```

Compile your project as usual - e.g., `cmake` + `make` or your IDE/build system.

### 4. Run Your Tests from the Command Line

Execute the built test binary:

```shell
$ ./example_test
```

You should see output like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] QueueTest.IsEmptyInitially
[       OK ] QueueTest.IsEmptyInitially (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This confirms your tests compiled, ran, and passed.

### 5. Understand Basic Assertions

- `EXPECT_EQ(val1, val2)` verifies `val1 == val2`.
- `EXPECT_NE(val1, val2)` verifies `val1 != val2`.
- `EXPECT_TRUE(condition)` and `EXPECT_FALSE(condition)` assert boolean conditions.
- Use `ASSERT_*` variants to fail fatally and abort the current function.

Assertions can stream additional failure information:

```cpp
EXPECT_EQ(Factorial(3), 6) << "Factorial(3) should be 6.";
```

### 6. Verify Your Success

Your test program return code is the overall success indicator. Use in your build scripts and CI:

```shell
./example_test
echo $?  # 0 means all tests passed, 1 means failure(s)
```

---

## Best Practices and Tips

- **Test Naming:** Avoid underscores (`_`) in suite and test names to prevent macro expansion issues and naming collisions.
- **Test Isolation:** Each test runs with a fresh test fixture instance. Avoid dependencies between tests.
- **Build Linkage:** Prefer linking against `gtest_main` to get a default test `main()`. Otherwise, explicitly provide one.
- **Output Interpretation:** Passed tests show `[       OK ]`. Failures print detailed error info line and file.
- **Incremental Development:** Start with simple tests, add fixtures and parameterization as needed.

---

## Common Pitfalls

<Warning>
- Forgetting to call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` in `main()` causes flags not to be parsed and tests to not run correctly.
- Ignoring the return value of `RUN_ALL_TESTS()` can cause builds or CI to incorrectly succeed.
- Defining test suites or test names with underscores may cause confusing or conflicting symbol names.
- Using `ASSERT_*` in non-void-returning functions or constructors causes compilation errors.
- Not providing a default constructor for fixture classes results in errors when invoking `TEST_F`.
</Warning>

---

## Example: Complete Simple Test

```cpp
#include <gtest/gtest.h>

// Function under test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// A basic test with no fixture
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
  EXPECT_EQ(Factorial(1), 1);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this to see GoogleTest in action immediately.

---

## Interpreting Test Output

- `[ RUN      ]` marks test start.
- `[       OK ]` means test passed.
- `[  FAILED  ]` means a test failed.
- Summary lines show total tests passed and failed.

In failure cases, GoogleTest prints:
- File name and line number
- Expected vs actual values
- Messages streamed into assertions

This rich report guides you quickly to the root cause.

---

## Troubleshooting

<AccordionGroup title="Common Issues When Writing and Running Your First Test">
<Accordion title="Why are my tests not running or discovered?">
Ensure you used `TEST()` or `TEST_F()` macros correctly. Check your build system is linking to GoogleTest properly and the test binary runs without errors. Confirm you call `InitGoogleTest()` in `main()`.
</Accordion>
<Accordion title="Compilation errors related to fixture constructors?">
Verify your fixture class has a default constructor. If you defined custom constructors, also define an explicit default constructor.
</Accordion>
<Accordion title="Output does not show colors or is unclear?">
Make sure your terminal supports ANSI colors. Use the `--gtest_color=yes` flag or set `GTEST_COLOR=yes` environment variable.
</Accordion>
<Accordion title="Test fails but no failure message?">
Check that assertions use appropriate syntax. Remember `ASSERT_*` aborts the current function; use `EXPECT_*` for non-fatal checks.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Expand your testing skills by learning about [Test Assertions](../core-testing-workflows/test-assertions) for more verification power.
- Explore fixtures and parameterized tests to cover complex scenarios.
- Consult [Troubleshooting Common Setup Issues](/getting-started/first-steps-validation/common-setup-issues) to resolve build and runtime problems.
- Look into integrating GoogleMock for mocking external dependencies.

---

## Resources

- [GoogleTest Primer](../primer.md) - Dive deeper into writing tests
- [Installation Guide](../setup-overview/installation-guide) - Setup step details
- [First Project Setup](../setup-overview/first-project-setup) - Configuring your build
- [Assertions Reference](../reference/assertions.md) - For assertion macros
- [FAQ](../faq.md) - For common questions

---

By following this guide, you transform your C++ code maintenance with automated validation powered by GoogleTest—boosting your productivity and confidence in every code change.
