---
title: "Writing Your First Test"
description: "A step-by-step guide to authoring, running, and interpreting a basic test suite using GoogleTest, highlighting key assertions and common patterns for fast feedback."
---

# Writing Your First Test

A step-by-step guide to authoring, running, and interpreting a basic test suite using GoogleTest, highlighting key assertions and common patterns for fast feedback.

---

## 1. Introduction

This guide helps you write your first simple tests using GoogleTest. You will learn how to create test cases, use assertions effectively, run your tests, and understand their results. Starting with independent and repeatable tests, GoogleTest ensures that you receive fast feedback to improve your C++ code reliability.

### Prerequisites

- GoogleTest built or installed and properly linked to your C++ project.
- Basic understanding of C++ programming.
- Environment configured to compile and run GoogleTest-based tests (see [Prerequisites & System Requirements](../environment-setup/prerequisites-and-requirements)).

### Expected Outcome

By following this guide, you will be able to write a basic test suite with individual test functions, use assertions to verify code behavior, and successfully run and interpret test results.

### Time Estimate

Approximately 15-30 minutes for first-time users.

### Difficulty Level

Beginner

---

## 2. Understanding GoogleTest Test Structure

### Test Suites and Tests

- **Test Suite**: A logical group of related tests sharing a common name.
- **Test**: An individual test function within a suite that checks specific functionality.

Each test is defined with the `TEST()` macro, which takes the test suite name and test name as parameters.

### Assertions

Assertions verify conditions within your test. GoogleTest provides two categories:

- `EXPECT_*`: Non-fatal assertions, which log failures but continue the test.
- `ASSERT_*`: Fatal assertions, which abort the current test immediately on failure.

Always prefer `EXPECT_*` unless the test cannot proceed meaningfully after failure.

---

## 3. Writing Your First Simple Test

### Step 1: Include the GoogleTest Header

Include the core GoogleTest headers in your test source file.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Test Case Using the `TEST()` Macro

Use the pattern:

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code here.
}
```

- Both `TestSuiteName` and `TestName` must be valid C++ identifiers with no underscores.
- Tests from different suites can reuse the same test name.

### Step 3: Write Assertions Inside the Test

Use assertions like `EXPECT_EQ`, `EXPECT_TRUE`, etc., to check conditions.

Example: Testing a factorial function:

```cpp
int Factorial(int n);

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 4: Build and Run Your Test Program

- Compile your test file linking with GoogleTest.
- Execute the binary; by default, it runs all tests and displays the results.

---

## 4. Using Test Fixtures for Shared Setup

When multiple tests operate on similar data or require common setup, use **test fixtures**:

### Step 1: Define a Fixture Class

- Derive from `testing::Test`.
- Declare shared objects and setup/teardown logic.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};
```

### Step 2: Write Tests Using the Fixture

Use `TEST_F()` macro, where the first argument is the fixture class name.

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

Each test runs with a fresh fixture object to ensure independence.

---

## 5. Running the Test Program

Your main function should initialize GoogleTest and run all tests:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` parses GoogleTest-specific command-line flags.
- `RUN_ALL_TESTS()` runs all registered tests and returns 0 if all tests pass.

**Tip:** You usually donâ€™t need to write `main` yourself; link with `gtest_main` to get a default main.

---

## 6. Interpreting Test Results

GoogleTest output groups results by test suites, displaying pass/fail status for each test.

- A **passed** test runs without any assertion failures or crashes.
- A **failed** test contains at least one failed assertion or a crash.

Failure messages include:

- The failed assertion line and condition.
- Actual vs expected values.
- Custom messages streamed into assertions.

Example output for a failed test:

```none
/path/to/factorial_test.cc:12: Failure
Expected equality of these values:
  Factorial(2)
    Which is: 3
  2
```

You can rerun individual tests by filtering with `--gtest_filter=TestSuiteName.TestName`.

---

## 7. Tips and Best Practices

- **Name test suites and test names carefully:** Avoid underscores as they may cause naming conflicts.
- **Use `EXPECT_*` assertions for comprehensive failure reporting:** They allow tests to continue to check other conditions.
- **Use `ASSERT_*` when failure makes further checks invalid:** For example, to prevent dereferencing null pointers.
- **Leverage test fixtures to reduce duplicated setup code.**
- **Keep tests isolated and independent.**
- **Write clear and meaningful failure messages with streaming.**

---

## 8. Troubleshooting

### Common Issues

- **Tests not running:** Ensure tests are correctly registered with `TEST()` or `TEST_F()`.
- **Compiler errors about missing default constructors:** Test fixtures must have a default constructor.
- **Ignoring `RUN_ALL_TESTS()` result:** Must return its value from `main` to reflect test success.

For detailed setup troubleshooting, see [Troubleshooting Common Setup Issues](../troubleshooting-resources/troubleshooting-common-issues).

---

## 9. Next Steps

- Explore [Setting Up GoogleTest](../getting-started/setup-google-test) for environment and building.
- Learn [GoogleMock Basics](../first-steps-validation/mocking-basics) to mock dependencies.
- Deep dive into [All Assertions](../core-concepts/assertions-and-matchers) for more testing techniques.
- Understand how to [Organize and Structure Tests](../core-workflows/test-organization) for maintainability.

---

## 10. References

- [GoogleTest Primer](../primer)
- [Assertions Reference](../reference/assertions.md)
- [Testing Reference](../reference/testing.md)
- [Troubleshooting Guide](../getting-started/troubleshooting-resources/troubleshooting-common-issues)
- [GoogleTest GitHub Repository](https://github.com/google/googletest)

---

This completes your initial journey in writing, running, and interpreting your first GoogleTest test suite. Embrace this foundation to build reliable and maintainable C++ tests rapidly.
