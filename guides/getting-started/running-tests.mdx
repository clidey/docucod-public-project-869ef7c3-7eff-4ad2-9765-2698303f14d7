---
title: "Building and Running Tests"
description: "Covers how to compile, execute, and interpret the outcomes of your tests, including tips for different environments and debugging failed tests."
---

# Building and Running Tests

## Overview
This guide helps you compile your test programs, execute them, and understand the results you get from running your tests with GoogleTest. Whether you're working on Linux, Windows, or macOS, this guide explains how to build your test binaries, run tests in various environments, and interpret success or failure outcomes effectively.

By following this guide, you'll gain confidence running your tests consistently and diagnosing failures for quicker debugging.

---

## 1. Compiling Your Test Programs

GoogleTest provides flexible ways to build test programs that run your tests.

### Prerequisites
- You have your C++ test code ready, using `TEST()`, `TEST_F()`, or other GoogleTest macros.
- Your build environment supports C++17 or later.
- GoogleTest and GoogleMock source or pre-built libraries are accessible.
- A C++ compiler configured for your platform (Linux, macOS, Windows).

### Steps to Compile

1. **Set up Your Build System:** Use CMake, Bazel, or your preferred build system to include GoogleTest and GoogleMock.

2. **Linking Tests:** Link your test code against `gtest` and optionally `gmock` libraries. For convenience, GoogleTest provides `gtest_main` and GoogleMock provides `gmock_main` which contain a pre-defined `main()` function that runs all tests.

3. **Compile Examples:**

   For CMake users, your `CMakeLists.txt` typically contains:
   ```cmake
   find_package(GTest REQUIRED)
   add_executable(my_test my_test.cc)
   target_link_libraries(my_test GTest::gtest_main GTest::gmock_main pthread)
   add_test(NAME MyTest COMMAND my_test)
   ```

4. **Custom Main Functions:** If your tests require a customized `main()` function (for example, additional setup before running tests), define it as described in the GoogleTest Primer, then link only with `gtest` or `gmock` (without `_main`).

### Expected Outcome
A compiled executable test binary that contains your tests and can be run to perform testing.

---

## 2. Running Tests

With your test binary ready, you can run it directly from the command line or within your IDE.

### Basic Invocation
Running the compiled test binary will automatically execute all registered tests.

```bash
./my_test
```

### Test Output
Upon execution, GoogleTest outputs a detailed summary:
- Number of tests run
- Which tests passed or failed
- Detailed failure messages including file names, line numbers, and error messages

### Return Codes
- `0` means all tests passed successfully.
- Non-zero means there were test failures or crashes.

### Running Subset of Tests
You can run specific tests using the `--gtest_filter` flag:

```bash
./my_test --gtest_filter=TestSuiteName.TestName
```

Wildcards like `*` are supported for filtering multiple tests.

### Parallel and Repeat Runs
For speed or debugging flaky tests:
- Use external tools or scripts to run tests in parallel.
- Use `--gtest_repeat=N` to run tests multiple times consecutively.


---

## 3. Interpreting Test Results and Common Scenarios

This section guides you on understanding what test results mean and how to act accordingly.

### Successful Tests
- Output ends with `PASSED` message.
- Exit code is 0.

### Failed Tests
- GoogleTest prints details of failures including the assertion that failed, file, and line.
- If failures occur, subsequent tests run normally unless fatal failures cause aborting of the current test.

### Crash or Fatal Errors
- If a test crashes or hits a fatal failure (`ASSERT_*` macro failure), it aborts the current test function.
- GoogleTest continues to run remaining tests unless the failure occurs during global setup or teardown.

<Tip>
Use the detailed failure output to pinpoint the exact condition and location causing the failure.
</Tip>

### Using Verbose Output
Run tests with verbosity for more detailed diagnostics:

```bash
./my_test --gtest_verbose=info
```

This helps during debugging or when integrating tests into CI.

### Debugging Failed Tests

- **Isolate a test:** Run a failing test in isolation using `--gtest_filter`.
- **Use debuggers:** Run the test executable within a debugger to inspect failure behavior.
- **Check setup/teardown:** Failures in `SetUp()` or `TearDown()` can cause issues; validate these methods.

---

## 4. Advanced Execution Controls

GoogleTest offers flags for fine-tuning test execution.

### Common Test Runner Flags
- `--gtest_repeat=<N>`: Run all tests N times.
- `--gtest_shuffle`: Run tests in random order (good for finding inter-test dependencies).
- `--gtest_break_on_failure`: Pause on failure for debugging.
- `--gtest_output=<format>:<file>`: Output results in XML or JSON for CI consumption.

### Integration in CI Pipelines
- Generate XML reports to feed into CI dashboards.
- Use filters to run only changed tests or specific suites.

---

## 5. Troubleshooting Common Issues

### Tests Don't Run or Are Missing
- Verify tests are defined with `TEST()`, `TEST_F()`, or other GoogleTest macros.
- Confirm linking against the correct GoogleTest library (`gtest_main` or `gmock_main` if no custom main).

### Linker Errors
- Check libraries are linked in the correct order.
- On Windows, ensure correct runtime libraries are used consistently.

### Tests Run but Always Succeed or Fail Unexpectedly
- Verify your assertions are correctly written.
- Check that initialization code in fixtures or `main()` calls `InitGoogleTest()` properly.

### Output is Too Verbose or Confusing
- Use filtering options to limit output.
- Adjust verbosity flags.

---

## 6. Example: Build and Run a Basic Test Program

### Given
File `factorial_test.cc`:

```c++
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Compile
```bash
g++ factorial_test.cc -lgtest -lgtest_main -pthread -o factorial_test
```

### Run
```bash
./factorial_test
```

### Sample Output
```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

---

## 7. Next Steps

- Explore running tests with GoogleMock for mocking abilities.
- Use `--gtest_filter` to target specific suites or tests during development.
- Learn about test fixtures to reuse common test setup.
- Integrate GoogleTest with your continuous integration system using XML outputs.

For more information, see the [GoogleTest Primer](primer.md), [GoogleMock documentation](googlemock/README.md), and [Running & Validating Tests](getting-started/first-test-validation/running-and-validating-tests).

---

## References
- [GoogleTest Primer](primer.md)
- [Running & Validating Tests Guide](getting-started/first-test-validation/running-and-validating-tests)
- [GoogleMock Overview](googlemock/README.md)
- [Assertions Reference](reference/assertions.md)

<Note>
To maximize test reliability and maintainability, always check your test return codes in your build and CI setups and avoid calling `RUN_ALL_TESTS()` more than once in the same program.
</Note>
