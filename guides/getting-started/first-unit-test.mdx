---
title: "Writing Your First Unit Test"
description: "Learn how to write, build, and execute a simple unit test with GoogleTest. This guide introduces test cases, assertions, and test execution flow to demonstrate core xUnit concepts in practice."
---

# Writing Your First Unit Test with GoogleTest

Learn how to write, build, and execute a simple unit test with GoogleTest. This guide introduces test cases, assertions, and test execution flow to demonstrate core xUnit concepts in practice.

---

## 1. Overview

### What This Guide Covers
This guide walks you through the essential steps to write your very first unit test using GoogleTest, the powerful C++ testing framework. You'll learn to:

- Define a test case and test functions.
- Use basic assertions to verify expected outcomes.
- Build and run your test executable.

It focuses exclusively on writing a simple test, so you can immediately start verifying your code's correctness with confidence.

### Prerequisites
Before starting, make sure you have:

- GoogleTest and GoogleMock source code cloned and built in your environment (see the [Installing GoogleTest and GoogleMock](https://github.com/google/googletest) guide).
- A working C++ compiler that supports at least C++17.
- A basic understanding of how to compile and link C++ projects.

### Expected Outcome
By following this guide, you will have a simple test executable that:

- Runs one or more test functions.
- Communicates success or failure of assertions.
- Integrates with your build system for quick feedback.

### Time Estimate
Approximately 15-30 minutes, depending on your familiarity with C++ build processes.

### Difficulty Level
Beginner — no prior experience with GoogleTest required.

---

## 2. Writing Your First Test

### Step 1: Include GoogleTest Headers
Create a new C++ source file for your tests, e.g., `example_test.cc`. At the top, include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This header provides all necessary macros and functions to write tests.

### Step 2: Define a Test Case and Test Function
GoogleTest organizes tests into *test cases* and *test functions*. Use the `TEST` macro as follows:

```cpp
// Defines a test named "SimpleTest" in the test case "ExampleTest".
TEST(ExampleTest, SimpleTest) {
  int expected = 42;
  int actual = 40 + 2;
  EXPECT_EQ(expected, actual);
}
```

- `ExampleTest` is the test case group.
- `SimpleTest` is the test function name.
- `EXPECT_EQ` is an assertion checking equality.

You can write multiple `TEST`s in one file.

### Step 3: Write Assertions
GoogleTest provides many assertion macros. The basic ones include:

- `EXPECT_EQ(val1, val2)`: Verifies `val1 == val2`.
- `EXPECT_TRUE(condition)`: Verifies condition is true.
- `EXPECT_FALSE(condition)`: Verifies condition is false.

They report failures but let the test continue.

For fatal assertions stopping the test immediately, use `ASSERT_*` macros.

Example with multiple assertions:

```cpp
TEST(ExampleTest, MultipleAssertions) {
  EXPECT_EQ(10, 5 + 5);
  EXPECT_TRUE(2 < 3);
  EXPECT_FALSE(false);
  ASSERT_NE(nullptr, std::string("test"));
}
```

### Step 4: Define `main()` Function (Optional)
If you don't have a separate test runner executable, define this in your test source:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes GoogleTest and runs all tests.

_NOTE_: If you use `gmock_main.cc` from the GoogleTest source, it already defines a `main()`.

---

## 3. Building and Running Your Test

### Step 1: Compile Your Test File
Compile your test file and link it with GoogleTest and GoogleMock libraries.

A typical compilation command line looks like:

```sh
c++ -std=c++17 -I/path/to/googletest/include -I/path/to/googlemock/include \
    example_test.cc -L/path/to/libs -lgtest -lgmock -lpthread -o example_test
```

Adjust the include and library paths as per your installation.

### Step 2: Run the Test Executable
Execute your test binary:

```sh
./example_test
```

Expected output will be similar to:

```text
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.SimpleTest
[       OK ] ExampleTest.SimpleTest (0 ms)
[----------] 1 test from ExampleTest (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

If assertions fail, the report indicates which test and line failed.

---

## 4. Practical Tips and Best Practices

### Use Descriptive Test Names
Choose meaningful test case and test names that clarify what is being tested, for example:

```cpp
TEST(MathUtils, SumOfPositiveNumbers) { ... }
```

### Prefer `EXPECT_*` Over `ASSERT_*` When Possible
`EXPECT_*` macros allow tests to continue after failures, giving you more comprehensive feedback.

### Organize Tests Into Suites
Group related tests into test cases (test suites) for clearer reporting.

### Write Multiple Small Tests
Break complex behavior into simpler, focused test cases.

### Use Fixtures for Shared Setup
Once you write more tests, consider using `TEST_F` with fixtures for setup/teardown.

---

## 5. Troubleshooting Common Issues

### Test Not Running or No Output
- Confirm you have a `main()` defined or use `gmock_main.cc` during linkage.

### Assertions Not Firing
- Make sure your assertions are inside `TEST` or `TEST_F` functions.
- Check that your test macros are spelled correctly.

### Linker Errors
- Verify that your build links against `libgtest.a`, `libgmock.a`, and pthread.

### Multiple `main()` Symbols
- If you get multiple `main` definitions, ensure only one `main` (either your own or `gmock_main`) is linked.

---

## 6. Next Steps & Related Content

- [Creating Your First Mock Object](guides/getting-started/first-mock) — Learn how to mock interfaces for interaction-based tests.
- [Mastering Core Assertions & Matchers](guides/essential-testing-patterns/assertions-matchers) — Deepen your assertion skills.
- [Writing Parameterized & Typed Tests](guides/essential-testing-patterns/parameterized-tests) — Write scalable, data-driven tests.
- [GoogleMock for Dummies](docs/gmock_for_dummies.md) — Friendly intro to GoogleMock concepts.
- [Mocking Reference](docs/reference/mocking.md) — Detailed docs about mocking APIs.

---

## Appendix: Minimal Example

Here is a complete minimal example `example_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(ExampleTest, AdditionWorks) {
  EXPECT_EQ(2 + 2, 4);
  EXPECT_TRUE(10 > 5);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this as described above.

---

This guide equips you to confidently write and run your first GoogleTest unit tests, unlocking the power to regressively verify your C++ code effectively.


<Info>
See also the [Getting Started Project Setup Guide](/guides/getting-started/project-setup) for integrating GoogleTest into build environments, and [gMock for Dummies](docs/gmock_for_dummies.md) to get started with mocking.
</Info>
