---
title: "Your First Unit Test"
description: "Learn how to create, write, and run your first C++ unit test with GoogleTest. This page walks through project setup, simple test cases, and expected outcomes, enabling fast verification of your code."
---

# Your First Unit Test

## Workflow Overview

### Task Description
This guide walks you through creating, writing, and running your first simple C++ unit test using GoogleTest. You will understand how to set up a test project, write a basic test case, and verify your code behavior quickly and reliably.

### Prerequisites
- Familiarity with C++ and basic programming concepts.
- A development environment configured with GoogleTest and GoogleMock (including appropriate headers and libraries linked). See [Installing with CMake](../../getting-started/prerequisites-installation/installation-cmake) or [Installing with Bazel](../../getting-started/prerequisites-installation/installation-bazel).
- A working C++ build system (e.g., CMake) that can compile and link test binaries.

### Expected Outcome
By the end of this guide, you will have a working GoogleTest test suite including:
- A functioning test project structure
- A simple but complete test case verifying a piece of C++ code
- Command line instructions to build and execute your test package
- Console output demonstrating test success or failure

### Time Estimate
Approximately 20-30 minutes, depending on familiarity with C++ tools and build systems.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### 1. Set Up Your Test Project

- Create a new directory for your test project.
- Ensure GoogleTest source, headers, and libraries are available.
- Configure your build system (`CMakeLists.txt` or similar) to include GoogleTest and link with it.

#### Sample CMake snippet:
```cmake
cmake_minimum_required(VERSION 3.10)
project(MyFirstTestProject)

find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

add_executable(my_first_test test_main.cpp my_code.cpp)
target_link_libraries(my_first_test ${GTEST_LIBRARIES} pthread)
```

<Note>
Refer to [Configuring Includes and Linking](../../getting-started/configuration-validation/include-and-link) for detailed setup.
</Note>

### 2. Write a Simple Test Case

- Include the GoogleTest header:
  ```cpp
  #include <gtest/gtest.h>
  ```
- Define a test fixture or a standalone test using the `TEST()` macro.

#### Example: Basic test verifying addition
```cpp
#include <gtest/gtest.h>

// Function to test
int Add(int a, int b) {
  return a + b;
}

// Define the test
TEST(AdditionTest, SimpleAdd) {
  EXPECT_EQ(Add(2, 3), 5);  // Assert Add(2, 3) == 5
}
```

- Save this as `test_main.cpp` or any suitable file.

### 3. Build Your Test

- Use your build system to compile your test executable.
- For example, using CMake:
  ```bash
  mkdir build && cd build
  cmake ..
  make
  ```

### 4. Run the Test

- Execute the test binary:
  ```bash
  ./my_first_test
  ```
- You should see output similar to this:
  ```
  [==========] Running 1 test from 1 test suite.
  [----------] Global test environment set-up.
  [----------] 1 test from AdditionTest
  [ RUN      ] AdditionTest.SimpleAdd
  [       OK ] AdditionTest.SimpleAdd (0 ms)
  [----------] 1 test from AdditionTest (0 ms total)

  [----------] Global test environment tear-down
  [==========] 1 test from 1 test suite ran. (0 ms total)
  [  PASSED  ] 1 test.
  ```

### 5. Interpret the Test Results

- Confirm that your test passes (the `[  PASSED  ]` message).
- If the test fails, GoogleTest will provide detailed messages showing the expected and actual values.

<Warning>
If your test fails unexpectedly, carefully check your code logic and test expectations. The error messages will direct you to the exact line.
</Warning>

### 6. Extend Your Tests (Optional)

- Add more `TEST()` or `TEST_F()` functions for additional coverage.
- Use GoogleTest assertions like `EXPECT_TRUE()`, `EXPECT_NE()`, and `ASSERT_THROW()` to verify your code thoroughly.

---

## Examples & Code Samples

### Full Example `test_main.cpp`
```cpp
#include <gtest/gtest.h>

// Simple class to test
class Calculator {
public:
  int Multiply(int a, int b) const {
    return a * b;
  }
};

// Simple test case without fixtures
TEST(CalculatorTest, MultiplyPositive) {
  Calculator calc;
  EXPECT_EQ(calc.Multiply(4, 5), 20);
  EXPECT_NE(calc.Multiply(4, 5), 19);
}

// Main function for test execution usually provided by gtest_main
// or override if needed
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example:
- Tests multiplication behavior
- Uses `EXPECT_EQ` and `EXPECT_NE` assertions
- Includes a custom `main` (optional if you link with `gtest_main`)

---

## Troubleshooting & Tips

### Common Issues

- **Test executable not linking due to missing GoogleTest:** Verify your build configuration includes correct link flags and paths. Refer to [Include and Linking](../../getting-started/configuration-validation/include-and-link).

- **Tests not found or run:** Ensure test functions use the `TEST()` or `TEST_F()` macros and your `main()` initializes GoogleTest with `InitGoogleTest()`.

- **Compiler errors on macro usage (e.g., `MOCK_METHOD`):** Check that all types are properly specified and that commas within templates are wrapped in parentheses or use type aliases.

- **Confusing test failures:** Use verbatim GoogleTest failure messages to locate the expectation mismatch. Run tests with verbose logging for more details.

### Best Practices

- Always keep tests small and focused: one or two assertions per test.
- Name tests clearly describing what they verify.
- Use test fixtures (`TEST_F`) if tests share common setup/teardown.
- Avoid overly strict expectations to keep tests maintainable.

### Performance Considerations

- Use mock objects sparingly for dependencies that are expensive or difficult to test.
- Run tests frequently with continuous integration to catch regressions early.

### Alternative Approaches

- For complex behaviors, explore GoogleMock to mock dependencies and verify interactions.
- Use parameterized tests to cover multiple input scenarios without duplicating code.

---

## Next Steps & Related Content

- Continue to [Mocking with GoogleMock: The Basics](../getting-started/first-mock) to learn about dependency mocking.
- Explore [Writing Powerful Assertions](../../core-workflows/writing-assertions) for deeper validation techniques.
- Learn about [Using and Customizing Matchers](../../core-workflows/using-matchers) to improve argument validation.
- See [Configuring Includes and Linking](../../getting-started/configuration-validation/include-and-link) for build details.
- Visit [Troubleshooting Common Setup Issues](../../getting-started/troubleshooting-help/common-issues) if you encounter problems.

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [GoogleTest API Reference](../../api-reference/core-testing-apis/assertions)

---

## Summary
- Creating your first test involves defining a test case using the `TEST` macro.
- Building and running tests use your usual build system with added GoogleTest linking.
- Test outputs give clear pass/fail messages, guiding debugging.

<Tip>
Running your first test successfully is a major milestone in adopting GoogleTest. It sets the foundation for robust testing and higher code quality in your project.
</Tip>
