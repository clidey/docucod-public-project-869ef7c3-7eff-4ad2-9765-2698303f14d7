---
title: "Quickstart: Build and Run Tests"
description: "Step-by-step quickstart guides for building and running tests with Bazel or CMake. Includes basic setup, configuration, and first successful test run."
---

# Quickstart: Build and Run Tests

Welcome to the practical quickstart guide for building and running your GoogleTest and GoogleMock test suites using either Bazel or CMake. This guide walks you through setting up your build environment, configuring your project correctly, and executing your first successful test run with clear, actionable steps.

---

## 1. Overview

This guide helps you build and run GoogleTest-based C++ tests efficiently using your preferred build system. You will learn basic setup, integration tips, configuration essentials, and how to validate a successful test run.

### Prerequisites

- A working C++17 compatible compiler (e.g., GCC, Clang, MSVC)
- GoogleTest and GoogleMock source code checked out or available as dependencies
- Either Bazel or CMake installed and configured on your system
- Basic familiarity with command-line usage and build tooling

### Expected Outcome

By following this guide, you will be able to:

- Configure your project for linking against GoogleTest and GoogleMock
- Write minimal tests and mocks
- Build your tests with Bazel or CMake
- Run tests and interpret test output

### Time Estimate

Approximately 20–30 minutes depending on your environment setup.

### Difficulty Level

Beginner to Intermediate — no advanced mock or test features required.

---

## 2. Building and Running Tests with Bazel

Bazel provides a fast and scalable build system tightly integrated with GoogleTest.

### Step 1: Define Bazel BUILD File

Create a `BUILD` file in your test directory describing your test target:

```python
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = [
        "@com_google_googletest//:gtest_main",
        "@com_google_googletest//:gmock",
    ],
)
```

- `cc_test` is Bazel’s standard rule for building C++ test binaries.
- `deps` pulls in GoogleTest and GoogleMock targets.


### Step 2: Write Your Test File (my_test.cc)

Create a simple test file that includes GoogleTest and GoogleMock headers:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::Return;
using ::testing::Test;

class MyMock {
 public:
  MOCK_METHOD(int, Foo, (int x), ());
};

TEST(MyTestSuite, BasicTest) {
  MyMock mock;
  EXPECT_CALL(mock, Foo(5)).WillOnce(Return(42));
  EXPECT_EQ(mock.Foo(5), 42);
}
```

### Step 3: Build and Run the Test

Run Bazel build and test commands:

```bash
bazel build //path/to/test:my_test
bazel test //path/to/test:my_test
```

You should see output indicating the test build succeeded and the test passed.

### Verification

- The test binary should build without errors.
- Bazel test output should report all tests passed.

---

## 3. Building and Running Tests with CMake

If you prefer CMake, follow these steps for simple project integration.

### Step 1: Obtain GoogleTest and GoogleMock

GoogleTest (which includes GoogleMock) can be added as a subdirectory or installed system-wide.

- Recommended: Use the bundled GoogleTest in your project or add it as an external project.

### Step 2: Configure Your CMakeLists.txt

A minimal example to build your tests:

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyTestProject LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add GoogleTest
# Option 1: If GoogleTest is cloned inside your project
add_subdirectory(googletest)

# Your test executable
add_executable(my_test my_test.cc)

# Link against gtest and gmock (includes gtest)
target_link_libraries(my_test gmock gtest)

# Optional: Enable test discovery
enable_testing()
add_test(NAME my_test COMMAND my_test)
```

### Step 3: Write the Test Source File (my_test.cc)

Use the same test example from the Bazel section.

### Step 4: Build and Run

```bash
mkdir build
cd build
cmake ..
cmake --build .
ctest
```

### Verification

- Build should complete without errors.
- `ctest` should report your test passed.

---

## 4. Test Execution and Result Validation

Once your test executable runs, GoogleTest provides detailed output.

Example test output:

```text
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from MyTestSuite
[ RUN      ] MyTestSuite.BasicTest
[       OK ] MyTestSuite.BasicTest (0 ms)
[----------] 1 test from MyTestSuite (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

- The key phrase to look for is `[  PASSED  ]`.

- Any failure will be clearly indicated with `[  FAILED  ]` and diagnostic messages.

---

## 5. Best Practices & Tips

- **Manage dependencies carefully** to avoid conflicts between different GoogleTest versions.
- Use **mock objects** effectively to isolate system units under test.
- Always **define expectations before exercising code** that calls mocks.
- For multi-call tests, consider using `.WillOnce()` and `.WillRepeatedly()` for varied mock behaviors.
- Use `NiceMock<T>` or `StrictMock<T>` wrappers to control uninteresting call warnings and failures.
- Enable `--gmock_verbose=info` flag for detailed diagnostics during debugging.

---

## 6. Troubleshooting Common Issues

### 6.1 Compile Errors Related to MOCK_METHOD

- Ensure you use correct syntax with parentheses and commas.
- Wrap return types or arguments containing commas in extra parentheses or use type aliases.

### 6.2 Test Not Running or Found

- For CMake, verify `enable_testing()` and `add_test()` are included.
- Check your test is named with GoogleTest macros like `TEST()` or `TEST_F()`.

### 6.3 Linker Errors

- Confirm targets link against both `gtest` and `gmock` libraries.
- For Bazel, dependencies must include `@com_google_googletest//:gmock` and `gtest_main`.

### 6.4 Unexpected Mock Behavior

- Make sure expectations (`EXPECT_CALL`) are set before exercising the mocks.
- Remember that default mock behavior for uninteresting calls results in warnings unless suppressed.

---

## 7. Next Steps & Related Documentation

- Dive into the [GoogleTest Primer](../primer) to learn how to write basic and fixture-based tests.
- Explore the [Mocking and Expectations](../mocking-and-expectations) guides for advanced mock usage.
- Read the [Configuration and Setup](../configuration-setup) for detailed project integration.
- For troubleshooting setup problems, see [Troubleshooting Common Setup Issues](../troubleshooting-setup).

---

## 8. References & Resources

- Official GoogleTest and GoogleMock: [https://github.com/google/googletest](https://github.com/google/googletest)
- GoogleTest Primer: /guides/getting-started/primer
- gMock Cookbook and Cheat Sheet: /reference/mocking
- Bazel Build System Documentation: [https://bazel.build](https://bazel.build)
- CMake Documentation: [https://cmake.org/documentation/](https://cmake.org/documentation/)


---

Thank you for using GoogleTest! Build confidently and test effectively.
