---
title: "Primer: First Steps with GoogleTest"
description: "Walks users through creating, compiling, and running their first test using GoogleTest. Covers foundational concepts, essential assertions, and the basic flow of writing and extending tests in a C++ project."
---

# Primer: First Steps with GoogleTest

## Introduction
This guide is designed to help you write, compile, and run your very first test using GoogleTest. You'll learn foundational concepts such as how to define a simple test, use essential assertions to validate your code, and understand the flow of test execution in a C++ project.

GoogleTest offers a simple yet powerful way to organize tests, verify behavior, and get rich feedback when tests fail.

---

## 1. What You Will Learn

- **How to define simple tests using the `TEST()` macro**
- **How to write basic assertions like `EXPECT_EQ` and `ASSERT_NE`**
- **How to build and run tests within your C++ environment**
- **How to create and use test fixtures with `TEST_F()`**

---

## 2. Prerequisites

Before you start, ensure:

- You have GoogleTest installed and your build system configured to link against it (see [Installing with CMake](../getting-started/installation-initialization/installation-cmake.md)).
- Your compiler supports C++17 or later.
- You understand basic C++ syntax and compiling code.

---

## 3. Step-by-Step Guide to Your First Test

### Step 1: Include GoogleTest Headers
In your test source file, include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Write a Simple Test Using `TEST()`
The `TEST()` macro defines a new test. It requires two valid C++ identifiers as parameters: a test suite name and a test name.

```cpp
// Function to test
int Factorial(int n);  // Assumes this function is defined elsewhere

// A simple test that checks Factorial(0) == 1
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

- **Test Suite**: Groups logically related tests; here, `FactorialTest`.
- **Test Name**: Describes the specific test; here, `HandlesZeroInput`.

### Step 3: Use Assertions to Check Conditions
Assertions verify your code behaves as expected. For example:

- `EXPECT_EQ(val1, val2)` checks values for equality without aborting the test on failure.
- `ASSERT_NE(ptr, nullptr)` checks pointer is not null and aborts the current test if it fails.

Example:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  ASSERT_NE(Factorial(5), 0) << "Factorial of 5 should not be zero";
}
```

### Step 4: Build Your Test Program
Ensure your build system:

- Includes the path to GoogleTest headers.
- Links against the `gtest` and `gtest_main` libraries (or your own `main` source).

*Example CMake snippet*:

```cmake
find_package(GTest REQUIRED)

add_executable(my_tests test_factorial.cpp)
target_link_libraries(my_tests GTest::gtest_main)
```

### Step 5: Run Your Tests
After building, execute your test binary:

```bash
./my_tests
```

GoogleTest will run all registered tests automatically and print concise pass/fail results.

### Step 6: Interpret Test Output
GoogleTest groups output by test suite and shows details of failures:

```none
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
../test_factorial.cpp:12: Failure
Expected equality of these values:
  Factorial(3)
    Which is: 5
  6
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)

[----------] 2 tests from FactorialTest (1 ms total)

[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput

 1 FAILED TEST
```

This tells you exactly which test failed and why, including file and line number.

---

## 4. Extending Tests with Fixtures (`TEST_F()`)

When multiple tests need to share the same set-up code or data, use test fixtures.

### Step 1: Define a Test Fixture Class
Create a class derived from `testing::Test`:

```cpp
class QueueTest : public ::testing::Test {
protected:
  QueueTest() {
    // Initialization common to tests
    q1.Enqueue(1);
    q2.Enqueue(2);
    q2.Enqueue(3);
  }

  Queue<int> q0;  // Empty queue
  Queue<int> q1;  // Queue with 1 element
  Queue<int> q2;  // Queue with 2 elements
};
```

### Step 2: Write Tests Using `TEST_F()`
Use `TEST_F()` to write tests that use the fixture:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1.size(), 0);
  delete n;

  n = q2.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2.size(), 1);
  delete n;
}
```

Each test runs independently with a fresh fixture object.

### Step 3: Compile and Run as Before
Build and run as you did with simple `TEST()` tests.

---

## 5. Writing a Custom `main()` (Optional)

If you need to customize test program initialization, you can write your own `main()`:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Call `InitGoogleTest()` before `RUN_ALL_TESTS()` to parse command-line flags.

*Note*: Most users can link with `gtest_main` instead, which supplies this `main()`.

---

## 6. Tips and Best Practices

- Use `EXPECT_*` for nonfatal checks that allow further assertions to run.
- Use `ASSERT_*` for fatal checks that should abort the current test on failure.
- Avoid underscores `_` at the start or end of test suite and test names.
- Name test suites and tests clearly to express intent.
- Write small, focused tests that check a single behavior.
- Use fixtures to reduce duplication and share common setup/teardown.

---

## 7. Troubleshooting Common Issues

### Test Not Running or Not Found

- Verify your test is linked correctly and uses `TEST` or `TEST_F` macros.
- Make sure test suite and test names do not contain invalid underscores.

### Failed Linking Due to Missing Symbols

- Confirm linking against `gtest` and/or `gtest_main` libraries.
- If using fixtures, ensure default constructors are defined.

### Test Not Executing All Assertions

- Remember `ASSERT_*` aborts the current function on failure
- Use `EXPECT_*` to continue after failures for more comprehensive results

### Tests Silently Pass or Fail Without Expected Result

- Return the result of `RUN_ALL_TESTS()` from your `main()`
- Ensure `InitGoogleTest()` is called before running tests

---

## 8. Next Steps

After completing your first tests:

- Explore [Creating Your First Test](../getting-started/first-test-validation/creating-first-test.md) for more detailed examples.
- Learn how to build and run tests with different build systems in [Building and Running Tests](../getting-started/first-test-validation/building-running-tests.md).
- Consult the [Troubleshooting Guide](../getting-started/first-test-validation/troubleshooting-setup.md) for setup issues.
- Dive deeper into assertions via the [Assertions Reference](../reference/assertions.md).

---

## 9. References

- [GoogleTest Primer: Basic Concepts](../overview/introduction-core-value/what-is-googletest.md)
- [GoogleTest Primer: Advanced Guide](../docs/advanced.md)
- [GoogleTest Samples Repository](https://github.com/google/googletest/tree/main/googletest/samples)
- GoogleTest GitHub: https://github.com/google/googletest

---

*By following this guide, you have completed the foundational steps of writing and running your first GoogleTest tests, preparing you to write more comprehensive and maintainable test suites effectively.*

---

## Appendix: Example Test File

```cpp
#include <gtest/gtest.h>

// A simple factorial function
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test suite: FactorialTest
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```
