---
title: "Setup and Installation"
description: "Get up and running with GoogleTest by following step-by-step instructions for installation and basic configuration. This guide covers different build systems (CMake, Bazel) and helps you verify your test environment."
---

# Setup and Installation

Get started with GoogleTest by following this practical guide to installing and configuring the framework for your C++ projects. Whether you use CMake or Bazel, this document will walk you through each step to have GoogleTest and GoogleMock up and running, and show you how to verify your test environment.

---

## 1. Overview of Setup and Installation

### What This Guide Covers
This guide aims to help you **install GoogleTest and GoogleMock**, configure your build system for integration, and **validate that your testing environment is ready**. It focuses on step-by-step instructions tailored to different build tools: primarily CMake and Bazel.

### Who Is This For?
If you are a C++ developer seeking to add automated unit testing or mocking to your projects, or a Continuous Integration engineer setting up test workflows, this guide applies to you.

### Expected Outcome
After following this guide, you will have GoogleTest and GoogleMock installed, integrated with your build system, and verified with sample test runs.

### Prerequisites
- A development environment with **C++17** support (compiler and linker).
- Familiarity with your build system, primarily **CMake** or **Bazel**.
- Network access to clone the GoogleTest repository (or have a ZIP archive).

### Time Estimate
Setup typically takes between 10 to 30 minutes depending on build system familiarity and network speed.

---

## 2. Installation and Build Instructions

### 2.1 Cloning the Repository
Start by obtaining the GoogleTest source code, which includes both GoogleTest and GoogleMock by default.

```bash
# Clone the official GoogleTest repository at a stable release tag
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### 2.2 Building with CMake

#### Standalone Build
This approach builds GoogleTest as an independent project.

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

This will build GoogleTest and GoogleMock libraries.

- To **build only GoogleTest (without GoogleMock)**, run:

```bash
cmake .. -DBUILD_GMOCK=OFF
cmake --build .
```

#### Installing System-Wide (Optional)
If you want to make GoogleTest available system-wide (e.g., `/usr/local/`), use:

```bash
sudo cmake --install .
```

#### Visual Studio and Mac OS X
- On Windows, `gtest.sln` and `.vcproj` files are generated and can be opened in Visual Studio.
- On Mac with Xcode, `.xcodeproj` will be created.

### 2.3 Incorporating GoogleTest into Your Existing CMake Project

GoogleTest can be included directly as a subdirectory for consistent compiler settings:

```cmake
add_subdirectory(path_to_googletest)
```

Alternatively, you can use CMake's FetchContent to dynamically pull the code at configure time:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Visual Studio runtime matching
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests GTest::gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

> **Tip:** Using `GTest::gtest_main` links your test executable with a standard main() provided by GoogleTest, so you typically don't need to write your own.

### 2.4 Building with Bazel

GoogleTest supports Bazel integration, but requires a different setup approach. Refer to the [Integration Options](/overview/quickstart-integration/integration-options) for Bazel-specific instructions and best practices.

---

## 3. Configuring Your Project to Use GoogleTest

### 3.1 Include Paths and Linking
Ensure your project's build system knows where to find GoogleTest headers and libraries.

In CMake:

```cmake
target_include_directories(my_tests PRIVATE ${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)
target_link_libraries(my_tests gtest gmock)
```

If GoogleTest is installed system-wide, CMake's `find_package(GTest REQUIRED)` may be used:

```cmake
find_package(GTest REQUIRED)
target_link_libraries(my_tests GTest::gtest GTest::gmock)
```

### 3.2 Compiler Requirements
GoogleTest requires C++17. In your CMakeLists.txt:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### 3.3 Threading Support
GoogleTest is thread-safe when built with pthreads support.

When building yourself, CMake usually detects and links pthread automatically.

### 3.4 Visual Studio Runtime Configuration
If you encounter runtime library conflicts on Windows, enable `gtest_force_shared_crt` to ensure consistent dynamic linking of the C runtime:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

---

## 4. Verifying the Installation

The best way to validate your GoogleTest and GoogleMock setup is to build and run a simple test program.

### 4.1 Sample Test Code
Create a file `sample_test.cpp`:

```cpp
#include <gtest/gtest.h>

// A simple test example
TEST(SampleTest, AssertionTrue) {
    EXPECT_TRUE(true);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

### 4.2 Build and Run
Compile the test program linking against GoogleTest and GoogleMock:

```bash
# Example for CMake projects
# Or compile manually with your compiler and link flags
```

Run the test executable:

```bash
./sample_test
```

You should see output confirming the test ran and passed:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.AssertionTrue
[       OK ] SampleTest.AssertionTrue (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### 4.3 Using GoogleMock
To verify GoogleMock is working, include `gmock/gmock.h` and create a mock class. Then run a test with mock expectations. For a quick start, see [Your First Mock: Testing with GoogleMock Guide](/guides/getting-started/first-mock-example).

---

## 5. Common Pitfalls and Troubleshooting Tips

- **Compiler Version**: Ensure your compiler fully supports C++17 or higher.
- **Linking Errors**: Verify that your test executable links both `gtest` and `gmock` libraries if you use mocking features.
- **Runtime Library Mismatch**: On Windows, ensure consistent runtime linkage (`/MD` vs `/MT`). Use `gtest_force_shared_crt` in CMake to fix linkage problems.
- **Threading Issues**: If your environment lacks pthread support, threading may be disabled. GoogleTest will not be thread-safe.
- **Writing main()**: It is recommended to link against `gtest_main` or `gmock_main` libraries that provide a suitable main() entry point. Only write your own main function if customization is needed.

---

## 6. Best Practices

- Use the CMake FetchContent approach for smooth CI pipeline integration.
- Always build GoogleTest and your tests with the same compiler flags and environment.
- Keep GoogleTest repository updated periodically to leverage bug fixes and improvements.
- Write minimal main() by linking `gtest_main` to reduce boilerplate.

---

## 7. Next Steps

- Proceed to [Writing Your First Test](/guides/getting-started/writing-your-first-test) to learn test authoring basics.
- Explore [Configuration & Quickstart](/getting-started/configuration-quickstart/configure-project) for advanced project setup.
- Visit [Common Installation & Configuration Issues](/getting-started/setup-troubleshooting/common-issues) if you encounter errors.

---

## Additional Resources
- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [Integration Options with Build Systems](/overview/quickstart-integration/integration-options)

<Check>
Make sure your compiler supports C++17 and your build system is properly configured before attempting the build.
</Check>

<Info>
Linking against `gtest_main` or `gmock_main` provides a default main() function, so custom main() writing is often unnecessary.
</Info>