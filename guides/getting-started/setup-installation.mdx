---
title: "Installation and Environment Setup"
description: "A practical guide to installing GoogleTest and GoogleMock, including environment preparation, build integration (CMake/Bazel), and basic project configuration. Perfect for new users looking to quickly start writing and running tests."
---

# Installation and Environment Setup

## Overview
This guide helps you quickly install and set up GoogleTest and GoogleMock in your development environment. It covers environment prerequisites, multiple build system options (CMake and Bazel), and basic project configuration to get you started writing and running tests immediately.

---

## 1. Workflow Overview

### What You Will Accomplish
- Prepare your system with all necessary dependencies.
- Build GoogleTest/GoogleMock from source or integrate them into your existing project.
- Configure your project to compile and link tests with GoogleTest.
- Run your first test executable to validate installation.

### Prerequisites
- A supported OS: Linux, Windows, or macOS.
- A compiler supporting C++17 standard.
- Build tools:
  - For CMake-based projects: CMake 3.14 or later.
  - For Bazel: Bazel build tool.
- Git client (optional, to clone the repository).

### Expected Outcome
- GoogleTest and GoogleMock libraries are built and installed.
- Your test project is successfully configured to compile and link tests using GoogleTest.
- Running the test executable will execute all defined tests using GoogleTest's harness.

### Time Estimate
Approximately 15-30 minutes depending on environment and build system familiarity.

### Difficulty Level
Beginner to Intermediate

---

## 2. Step-by-Step Setup Instructions

### Step 1: Clone the GoogleTest Repository (Optional)
If you do not have the source code locally, clone the repository at the desired release tag.

```bash
# Clone the latest stable release
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest
```

### Step 2: Building GoogleTest Standalone Using CMake
GoogleTest provides a standalone CMake project to build and install its libraries.

<Steps>
<Step title="Create a build directory and navigate into it">
Run these commands:
```bash
mkdir build
cd build
```
</Step>
<Step title="Configure the project">
Configure the build using CMake, optionally disabling GoogleMock:
```bash
cmake ..  # To build both GoogleTest and GoogleMock
# Or, to build only GoogleTest:
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the project">
On Linux/macOS, simply run:
```bash
make
```
On Windows with Visual Studio, open the generated `gtest.sln` and build from the IDE.
</Step>
<Step title="(Optional) Install GoogleTest">
If you want to install GoogleTest system-wide:

```bash
sudo make install
```
This installs the headers and libraries to `/usr/local/` by default.
</Step>
</Steps>

### Step 3: Integrating GoogleTest into Your Existing CMake Project

You have two main options:

- **Use Installed GoogleTest:** If installed system-wide, use `find_package`:

```cmake
find_package(GTest CONFIG REQUIRED)
add_executable(my_tests test1.cpp test2.cpp)
target_link_libraries(my_tests GTest::gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

- **Add GoogleTest as a Subdirectory:** Add the GoogleTest source code to your project and use `add_subdirectory`:

```cmake
add_subdirectory(path/to/googletest)
add_executable(my_tests test1.cpp test2.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

> **Tip:** Adding GoogleTest as a subdirectory ensures compiler and linker flags match, avoiding runtime conflicts especially on Windows.

### Step 4: Using GoogleTest with Bazel

If your project uses Bazel, add GoogleTest as an external dependency via the provided `WORKSPACE` rules (outside of this guide's scope but widely documented). 

Example minimal usage:

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

### Step 5: Configure Your Compiler to Use C++17

GoogleTest requires C++17 support. In CMake projects, set:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

In other build environments, ensure your compiler flags specify support for C++17.

### Step 6: Build and Run Your Tests

Compile your test executable and run it:

```bash
./my_tests
```

You should see output indicating tests running and their results. If all tests pass, your setup is complete.

---

## 3. Practical Examples

### Example: Simple CMakeLists.txt Including GoogleTest

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProject LANGUAGES CXX)

# Enable testing functionality
enable_testing()

# Add GoogleTest as a subdirectory
add_subdirectory(googletest)

# Define test executable
add_executable(my_tests test_mycode.cpp)

# Link with GoogleTest
target_link_libraries(my_tests gtest_main)

# Use C++17
set_target_properties(my_tests PROPERTIES
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
)

# Register the test
add_test(NAME my_tests COMMAND my_tests)
```

### Example: Minimal Test Source (test_mycode.cpp)

```c++
#include <gtest/gtest.h>

TEST(SampleTest, SimpleAssertion) {
  EXPECT_EQ(1 + 1, 2);
}
```

Build your project and run:
```
$ cmake -S . -B build
$ cmake --build build
$ cd build
$ ctest
```
You should see 1 test run successfully.

---

## 4. Troubleshooting & Tips

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Can't Find GoogleTest">
Check that GoogleTest is installed or properly included via add_subdirectory. If installed system-wide, use correct `find_package(GTest CONFIG REQUIRED)` and ensure CMake prefix paths include installation directory.
</Accordion>

<Accordion title="Compiler Errors about C++ Standard">
Ensure your compiler supports C++17 and your build system or compiler flags specify `-std=c++17` or equivalent.
</Accordion>

<Accordion title="Linking Errors on Windows with Visual Studio">
Use the CMake option `-Dgtest_force_shared_crt=ON` when configuring GoogleTest to match your project's runtime library settings (dynamic vs static). This avoids runtime linkage conflicts.
</Accordion>

<Accordion title="Running Tests Outputs No Tests Found">
Ensure you have linked your test executable against `gtest_main` or have correctly implemented your own `main()` which calls `testing::InitGoogleTest()` and `RUN_ALL_TESTS()`.
</Accordion>
</AccordionGroup>

<Tip>
Always build GoogleTest and GoogleMock with the same compiler and flags as your own project to avoid ABI incompatibilities.
</Tip>

<Tip>
Use `gtest_main` library to avoid writing your own `main()` unless you need custom test initialization.
</Tip>

---

## 5. Next Steps & Related Content

- Read the [GoogleTest Primer](primer.md) to learn how to write your first tests.
- Explore [Configuration & Project Integration](getting-started/setup-introduction/configuration-setup) to customize your build further.
- Check out [Authoring Your First Test](first-test.md) for practical test-writing guidance.
- Consult [Troubleshooting & Common Issues](first-steps-validation/troubleshooting.md) if you encounter setup problems.
- Dive into [Advanced Topics](advanced.md) when you're ready to utilize more GoogleTest features.

---

## References

- GoogleTest GitHub Repository: https://github.com/google/googletest
- CMake Official Site: https://cmake.org/
- Bazel Build System: https://bazel.build/



