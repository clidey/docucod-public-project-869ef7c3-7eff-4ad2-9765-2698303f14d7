---
title: "Setup and Installation"
description: "Learn how to install GoogleTest and GoogleMock in your C++ project, set up your build configuration using common tools (CMake, Bazel), and verify the environment is correctly established for testing."
---

# Setup and Installation

## Overview
This guide helps you quickly install and integrate GoogleTest and GoogleMock into your C++ project. You'll learn how to set up your build environment using common tools like CMake and Bazel, configure your build files to include the testing frameworks, and verify that your environment is ready to write and run tests.

## Prerequisites
- A working C++17 capable compiler (GCC, Clang, MSVC minimum versions can be found in the official [System Requirements & Supported Platforms](https://github.com/google/googletest/blob/main/docs/prerequisites-installation-setup/system-requirements-supported-platforms.mdx))
- CMake (minimum version 3.14 recommended for recent GoogleTest fetch content support)
- Bazel if you prefer Bazel-based builds
- Basic familiarity with C++ project build configuration

## What You Will Achieve
- Clone and build GoogleTest and GoogleMock
- Incorporate the testing libraries into your build system
- Build your first simple test executable
- Run and validate the test binary

## Time Estimate
Expect to spend about 15-30 minutes on this setup flow depending on your environment and experience with build tools.

## Difficulty Level
Beginner to Intermediate â€” Suitable for developers new to GoogleTest and GoogleMock or those integrating them into existing projects.

---

## Step-by-Step Instructions

### 1. Clone the GoogleTest Repository

To get the latest stable release with GoogleMock included, clone the repository:

```bash
 git clone https://github.com/google/googletest.git
 cd googletest
```

This contains both GoogleTest and GoogleMock.

### 2. Build GoogleTest and GoogleMock Standalone with CMake

Create a build directory and generate native build files:

```bash
mkdir build
cd build
cmake ..
```

- This generates build scripts for your platform (Makefiles on Linux/macOS, Visual Studio solution files on Windows).
- To build only GoogleTest without GoogleMock, run: 

```bash
cmake .. -DBUILD_GMOCK=OFF
```

Build the libraries and install (requires admin privileges):

```bash
make
sudo make install
```

On Windows, open the generated `.sln` file in Visual Studio and build.

### 3. Integrate GoogleTest/GoogleMock into Your Project Using CMake

The recommended method is to include the libraries as dependencies in your `CMakeLists.txt`. You can either:

- Use `find_package` after installation:

```cmake
find_package(GTest REQUIRED)
target_link_libraries(your_test_target PRIVATE GTest::gtest GTest::gmock)
```

- Or build GoogleTest as part of your project via `FetchContent` (requires CMake 3.14+):

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)
# For Windows compatibility
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(your_test your_test.cc)
target_link_libraries(your_test GTest::gtest_main GTest::gmock_main)
add_test(NAME your_test COMMAND your_test)
```

### 4. Build and Run Your Tests

Build your project as usual. The test executable linked with `gtest_main` or `gmock_main` includes a default `main()` function.

Run your compiled test binary:

```bash
./your_test
```

You should see output indicating test results.

### 5. Validate Your Setup

To confirm everything is working, create a minimal test file `sample_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, TrueIsTrue) {
  EXPECT_TRUE(true);
}
```

Build and run this test; a passing output confirms your installation.

---

## Using Bazel for Setup

GoogleTest and GoogleMock also support Bazel build tool.

1. Add `googletest` and `googlemock` dependencies to your WORKSPACE and BUILD files as detailed in the official Bazel documentation.
2. Run/build tests with `bazel test //path/to:test_target`.

Refer to the [Installation with CMake and Bazel](https://github.com/google/googletest/blob/main/docs/prerequisites-installation-setup/installation-cmake-bazel.mdx) page for detailed Bazel instructions.

---

## Practical Tips

- Always ensure your compiler supports **at least C++17**, as GoogleTest requires this standard.
- Use `gtest_main` or `gmock_main` libraries to avoid writing your own `main()` function.
- You can customize build options such as `BUILD_SHARED_LIBS` for shared libraries or `gtest_force_shared_crt` on Windows for runtime library compatibility.
- When integrating into existing projects, prefer embedding GoogleTest source or using FetchContent to avoid version mismatches.

---

## Troubleshooting Common Issues

### Build Errors and Runtime Failures
- Verify C++ standard compatibility: Set `CMAKE_CXX_STANDARD` to 17 or above.

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- On Windows, enable `gtest_force_shared_crt` if you see runtime library conflicts.

- Ensure that the thread library (pthreads) is linked if your platform requires it.

### Missing Symbols or Linker Errors
- Confirm you link against the appropriate GoogleTest or GoogleMock targets (`gtest_main`, `gmock_main`, `gtest`, `gmock`).
- If using pkg-config files, verify that `gmock.pc` or `gmock_main.pc` are correctly referenced.

### Test Binary Does Not Run or Shows No Tests
- Double-check your tests are properly registered using `TEST()` or `TEST_F()` macros.
- Confirm the test binary links with `gtest_main` or includes a valid `main()` function.

---

## Next Steps

- After installation, proceed to write and run your first tests using the [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-debugging/writing-running-first-test.mdx) guide.
- Explore [Build, Configure, and Validate Your Installation](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation-setup/build-configure-validate.mdx) for further validation strategies.
- For mocking capabilities, review GoogleMock's [Mocking API](https://github.com/google/googletest/blob/main/api-reference/core-apis/gmock-mocking-api.mdx).

---

## References
- Official GoogleTest GitHub: [https://github.com/google/googletest](https://github.com/google/googletest)
- GoogleMock README: [gmock/README.md](https://github.com/google/googletest/blob/main/googlemock/README.md)
- CMake Integration: [googletest/README.md](https://github.com/google/googletest/blob/main/googletest/README.md)
- Mocking Reference: [docs/reference/mocking.md](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)


<Note>
For automated test discovery and execution, the `RUN_ALL_TESTS()` function runs all registered tests once and returns the appropriate exit code, which you must return from your test binary's `main()`.
</Note>