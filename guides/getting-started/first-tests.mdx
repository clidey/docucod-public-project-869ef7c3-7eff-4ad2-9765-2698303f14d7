---
title: "Writing and Running Your First Tests"
description: "Learn the fundamentals of writing, organizing, and executing unit tests using GoogleTest. Covers defining test cases, using test macros, and running tests from the command line. Illustrates basic assertions with practical examples."
---

# Writing and Running Your First Tests

## Overview

This guide introduces you to the fundamentals of writing, organizing, and executing your initial unit tests using GoogleTest. You will learn how to define test cases with the TEST and TEST_F macros, perform basic assertions, compile your tests, and run them from the command line. Practical examples illustrate how GoogleTest output helps diagnose issues promptly.

---

## Prerequisites

Before you begin, ensure you have:

- Installed GoogleTest properly in your development environment. Refer to the [Installation and Setup](../getting-started/prerequisites-installation/installation-cmake.md) guide for CMake or Bazel-based projects.
- Basic knowledge of C++ programming and compiling C++ code.
- A C++ compiler compatible with C++17 standard or later.
- Your build environment configured to link against GoogleTest libraries.


## Expected Outcome

By completing this guide, you will:

- Know how to write simple tests using the `TEST` and `TEST_F` macros.
- Understand the difference between simple tests and fixture-based tests.
- Be able to compile and run your test programs.
- Interpret the test results output by GoogleTest.
- Recognize common assertion macros to validate conditions.

---

## Step-by-Step Instructions

### 1. Creating a Simple Test

Start by writing a basic test without shared test fixtures.

```cpp
#include <gtest/gtest.h>

// A simple function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Define a test named HandlesZeroInput in the FactorialTest suite
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Another test for positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- **What happens?**
  - You declare related tests grouped by the test suite name (`FactorialTest`).
  - Each test checks expected values using the `EXPECT_EQ` assertion macro.

### 2. Writing Tests with Fixtures

For tests that share common setup or data, create a fixture class by deriving from `testing::Test`.

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
     // Initialize queues
     q0_.clear();
     q1_.enqueue(1);
     q2_.enqueue(2);
     q2_.enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;

  n = q2_.dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  delete n;
}
```

- `TEST_F` uses the fixture `QueueTest` to access shared setup.
- Each test runs with a fresh fixture instance (isolated tests).

### 3. Compiling Your Tests

Compile your test code and link it against GoogleTest libraries. Here is how you can do it on the command line with `g++` assuming GoogleTest is installed:

```bash
# Compile
 g++ -std=c++17 -isystem /usr/local/include -pthread \
     my_tests.cc -L/usr/local/lib -lgtest -lgtest_main -o my_tests

# Run the tests
 ./my_tests
```

For CMake projects, set up your `CMakeLists.txt` to include GoogleTest. Example:

```cmake
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})
add_executable(my_tests my_tests.cc)
target_link_libraries(my_tests ${GTEST_LIBRARIES} pthread)
```


### 4. Running Your Tests

When you run the test executable, GoogleTest:
- Automatically discovers all tests registered via TEST/TEST_F.
- Runs each test independently.
- Prints detailed output indicating which tests passed or failed.

Example output:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### 5. Common Assertions and Their Usage

- `EXPECT_EQ(val1, val2)`: Tests if val1 == val2 (non-fatal failure).
- `ASSERT_EQ(val1, val2)`: Tests if val1 == val2 (fatal failure, aborts current function).
- `EXPECT_TRUE(condition)`, `ASSERT_TRUE(condition)`: Checks a condition.
- `EXPECT_FALSE(condition)`, `ASSERT_FALSE(condition)`: Checks condition is false.
- `EXPECT_NE(val1, val2)`: Tests val1 != val2.

Use `ASSERT_*` when the rest of the test cannot sensibly continue after failure (e.g., checking pointer is not null before dereferencing).

### 6. Running a Subset of Tests

To run only specific tests, use the `--gtest_filter` flag:

```bash
./my_tests --gtest_filter=FactorialTest.HandlesZeroInput
```

Wildcards `*` and `?` are supported. For example:

```bash
./my_tests --gtest_filter=FactorialTest.*
```

runs all tests in the `FactorialTest` suite.

### 7. Handling Disabled Tests

Prefix a test name or test suite name with `DISABLED_` to exclude it from normal runs:

```cpp
TEST(FactorialTest, DISABLED_BrokenTest) {
  // This test will be compiled, but not run by default.
}
```

Run disabled tests by adding the flag:

```bash
./my_tests --gtest_also_run_disabled_tests
```

---

## Practical Example

Here is a complete minimal example including main() to run the tests:

```cpp
#include <gtest/gtest.h>

int Add(int a, int b) {
  return a + b;
}

TEST(AddTest, HandlesPositiveInput) {
  EXPECT_EQ(Add(1, 2), 3);
  EXPECT_EQ(Add(2, 2), 4);
}

class AddFixture : public testing::Test {
 protected:
  void SetUp() override {
    base_ = 10;
  }

  int base_;
};

TEST_F(AddFixture, AddToBase) {
  EXPECT_EQ(Add(base_, 5), 15);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run the executable to see tests executing with output.

---

## Troubleshooting & Tips

- **Test Not Running?** Make sure your test functions use the `TEST` or `TEST_F` macros correctly and that your test files are linked.
- **Assertion Not Showing Values?** Prefer `EXPECT_EQ` or other typed assertions over generic `EXPECT_TRUE` for clearer diagnostics.
- **Tests Failing with Segfaults?** Check if you need to use `ASSERT_*` to verify pointers are not null before use.
- **Skips Execution?** Check if `GTEST_SKIP()` is invoked in `SetUp()` or test bodies, which will skip tests gracefully.
- **Custom main() Needed?** By default, linking with `gtest_main` provides a main(). Write a custom `main()` only if needed.
- **Disable Only Temporarily:** Use the `DISABLED_` prefix only until you fix flaky or broken tests; do not commit permanently disabled tests.

---

## Next Steps

- Explore more complex test fixtures and parameterized tests in the [Test Fixtures & Parameterized Testing](../guides/core-test-workflows/structured-fixtures-parameterized-tests.md) guide.
- Learn advanced assertion macros in [Advanced Assertions and Matchers](../guides/core-test-workflows/advanced-assertions-matchers.md).
- Understand mocking for dependency isolation in [Basic Mocking with GoogleMock](../guides/getting-started/basic-mocking.md).
- Consult the [GoogleTest Primer](../overview/about-googletest/what-is-googletest.md) for foundational concepts.

---

## Useful Links

- [GoogleTest Primer](../overview/about-googletest/what-is-googletest.md) - Overview and philosophy of GoogleTest
- [Test Macros and Fixtures](../api-reference/core-test-api/test-macros-and-fixtures.md) - Detailed API for test definition macros
- [Assertions Reference](../api-reference/assertions-and-matchers/basic-assertions.md) - List of assertion macros with usage
- [Running Tests and Command Line Flags](../advanced.md#running-test-programs-advanced-options) - Customize test runs
- [Getting Started with GoogleMock](../getting-started/first-test-usage/using-googlemock.md) - Integrate mocks in tests

---

## Summary

This page teaches you how to write your first GoogleTest unit tests using the `TEST` and `TEST_F` macros, compile your tests linking against GoogleTest libraries, and execute them with clear output results. It covers creating simple test cases, organizing tests with fixtures, and running tests via command-line with filters and flags. Practical troubleshooting guidance helps you overcome common initial issues. Once youâ€™ve mastered this, you can advance to parameterized tests, more sophisticated assertions, and mocking frameworks.


