---
title: "Strict, Nice, and Naggy Mocks: Managing Uninteresting Calls"
description: "Master the use of StrictMock, NiceMock, and NaggyMock to control how your tests react to unexpected or unverified calls. This walkthrough covers choosing the right strictness for development, debugging, and code review scenarios."
---

# Strict, Nice, and Naggy Mocks: Managing Uninteresting Calls

Master the use of `StrictMock`, `NiceMock`, and `NaggyMock` to control how your tests react to unexpected or unverified calls. This guide helps you choose the right mock strictness for development, debugging, and code review scenarios.

---

## Overview

When writing tests with GoogleMock, you might encounter calls to mock methods that you haven't explicitly set expectations on. These are called **uninteresting calls**. How GoogleMock reacts to them can affect the clarity, maintenance, and robustness of your tests.

GoogleMock offers three strictness modes to manage uninteresting calls:

- **NiceMock**: Suppresses warnings for uninteresting calls, making tests quieter.
- **NaggyMock**: Prints warnings for uninteresting calls (default behavior).
- **StrictMock**: Treats uninteresting calls as failures, making tests stricter.

Understanding and leveraging these modes lets you tailor test feedback to suit your workflow.

---

## When to Choose Each Mock Strictness Mode

| Mock Type   | Behavior on Uninteresting Calls                    | When to Use                                     |
|-------------|---------------------------------------------------|------------------------------------------------|
| **NiceMock**  | Suppresses uninteresting call warnings            | Ideal for stable tests where you want to avoid noise
| **NaggyMock** | Prints warnings for uninteresting calls (default) | Useful during active development and debugging to spot unexpected calls
| **StrictMock**| Fails the test on uninteresting calls              | Best for code review or final validation phases to enforce strict expectations

---

## Using StrictMock, NiceMock, and NaggyMock

They are wrappers provided by GoogleMock that change how uninteresting calls are handled for instances of your mock classes.

### Basic Usage Example

Suppose you have a mock class `MockFoo`:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};
```

Here's how to use different strictness modes:

```cpp
using ::testing::StrictMock;
using ::testing::NiceMock;
using ::testing::NaggyMock;

// Strict mock example: fails on any uninteresting call
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
// Any call other than DoThis() causes test failure

// Nice mock example: suppresses warnings
NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
// Calls to other methods will be silently ignored

// Naggy mock example (default behavior): warns on uninteresting calls
NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
// Calls to other methods produce warnings
```

### Retaining Constructor Arguments

`StrictMock`, `NiceMock`, and `NaggyMock` inherit constructors from your mock class, so:

```cpp
NiceMock<MockFoo> nice_foo(arg1, arg2);  // Pass constructor args as usual
```

---

## How It Works Behind the Scenes

- **Uninteresting call**: A call to a mock method with no matching `EXPECT_CALL`.
- `NaggyMock` and plain mocks (default) will **warn** about uninteresting calls.
- `NiceMock` disables these warnings to keep tests clean.
- `StrictMock` converts uninteresting calls into **test failures**.

This strictness is applied at the mock object level, not at the method level.

---

## Best Practices and Tips

- **Use `NiceMock` during regular development** when you want tests less noisy and avoid brittle failures caused by uninteresting calls.

- **Use `NaggyMock` for debugging and test writing** to catch unexpected calls early.

- **Employ `StrictMock` in code reviews or critical tests** to enforce explicit expectations and prevent unanticipated calls slipping through.

- To explicitly allow any number of calls to a method and silence warnings on that method, use:

```cpp
EXPECT_CALL(mock_foo, UninterestingMethod(_))  // _ means any argument
   .Times(testing::AnyNumber());
```

- Avoid mixing nested `NiceMock` or `StrictMock` wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) as this is unsupported.

- Ensure your mock class has a virtual destructor to avoid issues with strictness wrappers.

- If you set default actions with `ON_CALL` but no `EXPECT_CALL`, uninteresting calls will still trigger warnings or failures unless using a `NiceMock`.

---

## Troubleshooting Common Issues

### "Uninteresting function call encountered" Warning or Failure

- If you get this warning unexpectedly, verify that you have set expectations (`EXPECT_CALL`) or allowed calls appropriately.

- Use `NiceMock` to suppress uninteresting call warnings if appropriate.

- To disallow a method call entirely:

```cpp
EXPECT_CALL(mock_obj, Method(_)).Times(0);
```

### Unexpected Calls on StrictMock

- Any unverified calls cause failures.
- To fix, add corresponding `EXPECT_CALL`s explicitly or switch to `NaggyMock` / `NiceMock` during development.

### Behavior with Non-default Constructible Return Types

- `NiceMock` may throw when encountering unexpected calls returning types without default constructors; handle or specify such behaviors explicitly.

### Verbosity Control

- Modify output levels with the `--gmock_verbose=info|warning|error` flag.
- `info` prints all calls and stack traces.
- `warning` prints warnings (default).
- `error` prints only errors, suppressing some warnings.

---

## Summary

Using `StrictMock`, `NiceMock`, and `NaggyMock` empowers you to tune the strictness of your mock objects in GoogleMock, improving test clarity and robustness. Start with `NiceMock` for smooth development, add `NaggyMock` when debugging, and lock down with `StrictMock` during reviews or final tests.

---

## Additional Resources

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) – In-depth examples and best practices
- [Mocking Reference - StrictMock, NiceMock, NaggyMock](https://google.github.io/googletest/reference/mocking.html#StrictMock) – Official API details
- [gMock FAQ: Uninteresting Calls and Default Actions](https://google.github.io/googletest/gmock_faq.html#UninterestingFunctionCall)
- [Using Assertions Effectively](https://google.github.io/googletest/guides/core-workflows/using-assertions.html) to understand failure reports

---