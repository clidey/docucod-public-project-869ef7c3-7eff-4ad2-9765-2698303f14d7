---
title: "Writing Your First Test"
description: "Learn how to create a simple unit test using GoogleTest, including best practices for structuring test cases and using fundamental assertions to validate code behavior. A comprehensive walk-through for running your first test and interpreting its output."
---

# Writing Your First Test with GoogleTest

Learn how to create a simple unit test using GoogleTest, including best practices for structuring test cases and using fundamental assertions to validate code behavior. This guide provides a comprehensive walk-through for running your first test and interpreting its output.

---

## 1. Overview

### What This Guide Covers
This guide walks you through writing your first unit test using GoogleTest. You'll learn how to define test cases, use basic assertions to verify your code's logic, structure tests for clarity, and execute them to see results.

### Prerequisites
- Have GoogleTest installed and configured in your C++ project.
- A working C++ compiler supporting C++11 or above.
- Basic knowledge of C++ syntax.

### Expected Outcome
By following this guide, you will have written and executed a simple test suite consisting of multiple test cases that validate core logic in your code.

### Time Commitment
About 10-15 minutes for first-time users.

### Difficulty Level
Beginner

---

## 2. Writing Your First Simple Test

### Step 1: Include the GoogleTest Header
Start by including the GoogleTest header in your test source file.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Simple Function to Test
For illustration, let's create a basic function, for example, a factorial function:

```cpp
// A simple factorial function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

### Step 3: Write Your First Test Case Using `TEST()` Macro
Use the `TEST` macro to define a test with a suite name and a test name. Avoid underscores; use CamelCase or PascalCase.

```cpp
// Test suite: FactorialTest
// Test name: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
    EXPECT_EQ(Factorial(0), 1);
}

// Another test to verify handling of positive values
TEST(FactorialTest, HandlesPositiveInput) {
    EXPECT_EQ(Factorial(1), 1);
    EXPECT_EQ(Factorial(2), 2);
    EXPECT_EQ(Factorial(3), 6);
    EXPECT_EQ(Factorial(8), 40320);
}
```

**What happens here?**
- `TEST` macro creates a test function.
- `EXPECT_EQ` asserts equality and reports errors but continues execution.

### Step 4: Compile the Test Code
Link your test with the GoogleTest libraries, for example using `g++`:

```bash
g++ -std=c++11 -isystem /usr/include/gtest -pthread your_test.cc -lgtest -lgtest_main -o your_test
```

*(Adjust include and linking flags based on your installation and build system.)*

### Step 5: Run Your Tests
Run the compiled executable:

```bash
./your_test
```

You will see an output indicating which tests passed or failed, with detailed failure messages when applicable.

---

## 3. Test Structure and Best Practices

### Organizing Tests into Suites
Group related tests using the same test suite name (first argument of `TEST()`). This improves readability and maintenance.

### Naming Conventions
- Test suite names typically reflect the class or function under test.
- Test names describe the specific behavior under test.

### Use Assertions Effectively
- Use `EXPECT_*` assertions when you want tests to continue after failure.
- Use `ASSERT_*` assertions when a failure should abort the current test function to prevent invalid downstream operations.

### Progressive Complexity
Once comfortable, progress to using test fixtures (`TEST_F`) for shared setup.

---

## 4. Example: Complete Minimal Test Suite

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
    return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test suite: FactorialTest
TEST(FactorialTest, HandlesZeroInput) {
    EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
    EXPECT_EQ(Factorial(1), 1);
    EXPECT_EQ(Factorial(2), 2);
    EXPECT_EQ(Factorial(3), 6);
    EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

This will:
- Register two tests under `FactorialTest` suite.
- Run all tests and report their success/failure.

---

## 5. Interpreting Test Output

When you run tests, you will see output similar to:

```plaintext
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

For failed assertions, GoogleTest prints file, line, expected and actual values for easy debugging.

---

## 6. Troubleshooting Common Issues

### Tests Not Running
- Ensure `RUN_ALL_TESTS()` is called in `main`.
- Verify proper linking against `gtest` and `gtest_main` or manual `main`.

### Compilation Problems
- Confirm correct include paths for GoogleTest headers.
- Link with pthread library on POSIX systems if needed.

### Assertion Misunderstandings
- Remember that `EXPECT_*` allows test to continue after failure.
- Use `ASSERT_*` to abort test on critical failures.

---

## 7. Practical Tips and Best Practices

- Use descriptive test and suite names to clarify intent.
- Keep each test focused on a single behavior.
- Avoid over-specifying expectations in assertions; test for what matters.
- As you progress, explore fixtures (`TEST_F`) to share setup code.
- Use custom messages with assertions for clarity:

```cpp
EXPECT_EQ(x, y) << "Expected values to be equal.";
```

- Leverage GoogleTest's rich assertion library for different data types.

---

## 8. What Next?

After mastering simple tests:
- Learn about Test Fixtures for reusable setup: see [Using Test Fixtures](https://google.github.io/googletest/primer.html#test-fixtures-using-the-same-data-configuration-for-multiple-tests)
- Explore assertions and matchers for more expressive tests.
- Start creating mocks using GoogleMock to simulate dependencies.
- Run tests with flags to filter and customize output.

---

## References & Links

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) - Introductory tutorial
- [Basic Assertions](https://google.github.io/googletest/reference/assertions.html) - GoogleTest Assertions Reference
- [Writing and Running Your First Test](https://google.github.io/googletest/getting-started.html#writesimpletests) (official getting started)

---

## Example: A Real Test Run

```plaintext
$ ./factorial_test
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If one test fails, GoogleTest shows a message with file, line, expected, and actual output for easy debugging.


