---
title: "Writing Your First Test"
description: "Step through creating, building, and running your first unit test with GoogleTest. You will learn about the basics of test cases, test discovery, and running tests using both the standard runner and custom main functions."
---

# Writing Your First Test

Welcome to your first step in mastering GoogleTest! This guide walks you through creating, building, and running your very first unit test with GoogleTest. You'll become familiar with writing simple test cases, how GoogleTest automatically discovers tests, and running tests using both its built-in runners and custom `main()` functions.

---

## 1. What You Will Achieve

- Write a simple test using GoogleTest's `TEST` macro
- Understand test structure and naming conventions
- Build and run your test program
- Interpret test results
- Learn how to customize test execution with your own `main()` function


## 2. Prerequisites

Before you begin, ensure you have the following set up:

- GoogleTest libraries and headers properly installed or included in your project
- A C++17 compatible compiler (GCC, Clang, MSVC, etc.)
- Basic familiarity with compiling and running C++ programs

> For installation instructions, see [Installation Methods](../getting-started/setup-basics/installation-methods.md) and [Configuration & Initial Integration](../getting-started/setup-basics/configuration-setup.md).


## 3. Writing Your First Test Case

GoogleTest uses the `TEST` macro to define individual tests. A test consists of a test suite name and a test name. Together, they identify the test uniquely.

### Step 1: Create a Test File

Create a new C++ source file called `factorial_test.cc`. This file will hold your test code.

### Step 2: Include GoogleTest Header

Add the following to the beginning of your file:

```cpp
#include <gtest/gtest.h>
```

This includes all the necessary GoogleTest declarations.

### Step 3: Define a Simple Function to Test

For demonstration, let's write a simple `Factorial` function inside this file:

```cpp
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

### Step 4: Write the Tests

Use the `TEST` macro to add test cases that exercise your function:

```cpp
// Test factorial of zero
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test factorial of positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

**Explanation:**
- `FactorialTest` is the test suite name that groups related tests.
- The second argument is the test name.
- `EXPECT_EQ` is an assertion macro that compares expected and actual values.

### Outcome:
When you run these tests, GoogleTest will execute each and report success or failure.


## 4. Building the Test Program

You must compile your test file and link it with the GoogleTest library.

For example, using `g++`:

```bash
# Assuming gtest is installed and pkg-config is available
pkg-config --cflags --libs gtest_main

# Compile and link in one step
 g++ -std=c++17 -isystem /usr/include/gtest -pthread factorial_test.cc -lgtest_main -lgtest -o factorial_test
```

If you use CMake, set up your `CMakeLists.txt` to link with `gtest_main` as shown in the GoogleTest [Install and Configure guide](../guides/getting_started/install-configure.md).


## 5. Running the Tests

Run the compiled test executable:

```bash
./factorial_test
```

You should see output like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

Each test result will be clearly reported with pass/fail status and execution time.


## 6. Understanding Test Discovery

GoogleTest automatically discovers tests defined via `TEST()` and `TEST_F()` macros across all linked files and runs them all when you call `RUN_ALL_TESTS()` in your `main()`.

The macro `TEST` registers the test under the hood. Therefore you never need to manually enumerate or register tests.


## 7. Writing a Custom main() Function

Most users can use the `gtest_main` library for the main entry point. But in some scenarios (like custom initialization or parsing user arguments before tests run), you will need a custom `main()`.

Here is a minimal example:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);  // Parses GoogleTest flags
  return RUN_ALL_TESTS();  // Runs all tests, returns 0 if successful
}
```

**Note:**
- Always call `InitGoogleTest` before running tests.
- Return the value from `RUN_ALL_TESTS()` from `main` to correctly report success/failure.


## 8. Tips and Best Practices

- Choose descriptive test suite and test names that clearly indicate what you are testing.
- Use `EXPECT_*` assertions where you want tests to continue and report multiple failures; use `ASSERT_*` to stop the test on fatal errors.
- Group related tests with the same suite name.
- Keep tests independent and focused on one behavior.
- Use `gtest_main` if you don't need a custom `main()` to reduce boilerplate.


## 9. Troubleshooting Common Issues

- If tests do not run, ensure that you have linked with `gtest_main` or have your own `main()` that calls `RUN_ALL_TESTS()`.
- Compile errors in `MOCK_METHOD` or `TEST` macros usually relate to missing includes or incompatible compiler settings.
- If a test unexpectedly passes or fails, verify your assertions and test logic carefully.


## 10. Next Steps

- Learn about [Test Fixtures with `TEST_F`](../overview/core-concepts/test-structure-discovery.md) for reusing setup code across tests.
- Explore [Expressive Assertions](../guides/core_workflows/assertions-matchers.md) to write more readable tests.
- Try integrating GoogleMock for mocking dependencies as described in the [Mocking Basics](../overview/core-concepts/mocking-basics.md).


---

### Example: Complete `factorial_test.cc`

```cpp
#include <gtest/gtest.h>

// The function to test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test suite: FactorialTest
// Test case: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test positive inputs
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

// Custom main (optional)
// int main(int argc, char **argv) {
//   ::testing::InitGoogleTest(&argc, argv);
//   return RUN_ALL_TESTS();
// }
```

Place this file in your build system and run to verify correctness.

---

<Check>
Remember to always link your test executable with `gtest_main` unless you provide your own `main()`.
</Check>

<Note>
You can run tests with additional flags to control output verbosity and test filtering.
Example: `./factorial_test --gtest_filter=FactorialTest.*`
</Note>

---