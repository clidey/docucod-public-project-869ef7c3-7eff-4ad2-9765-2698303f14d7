---
title: "Install and Configure"
description: "Learn how to install GoogleTest and integrate it into your C++ project. This guide walks you through supported build systems, environment requirements, and the minimum steps to get your first test suite compiling and running."
---

# Install and Configure

## Overview

This guide shows you how to install GoogleTest and integrate it into your C++ project. You'll learn supported build systems, minimum environment requirements, and simple steps to get your first test suite compiling and running.

By following this guide, you'll be up and running with a working GoogleTest environment, enabling efficient and portable C++ testing.

---

## Prerequisites

Before you start, ensure you have:

- A C++17 compliant compiler (GCC, Clang, MSVC) as GoogleTest requires C++17 or higher.
- A supported platform: Linux, Windows, or MacOS.
- CMake (version 3.14 or later) installed for build configuration.
- Git installed if you plan to clone the repository.

Having these in place guarantees smooth installation and integration.

---

## Installation with CMake

GoogleTest provides an easy CMake-based build system that can either be used standalone or embedded into your project.

### Cloning and Building Standalone GoogleTest with GoogleMock Included

1. **Clone the repository:**

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

2. **Create a build directory:**

```bash
mkdir build
cd build
```

3. **Configure build with GoogleMock enabled (default):**

```bash
cmake ..
```

4. **Build the libraries:**

```bash
make
```

(or use your platform-specific build tool, e.g., `nmake`, `MSBuild`, or `xcodebuild`)

5. **Optionally install:**

```bash
sudo make install
```

This installs the libraries and headers to `/usr/local` by default.

### Building GoogleTest Only

If you want only GoogleTest and not GoogleMock:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

Then proceed to build as usual.

### Using GoogleTest in Your Existing CMake Project

You have two options:

- **Use find_package:** If installed, use `find_package(GTest REQUIRED)` and link with `GTest::gtest` and `GTest::gtest_main`.

- **Add GoogleTest as subdirectory:** Download GoogleTest and add it as a subdirectory:

```cmake
add_subdirectory(path/to/googletest)
```

Then link your test targets with `gtest` or `gtest_main` as needed.

Example:

```cmake
add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME MyTest COMMAND my_tests)
```

---

## Linking vs Implementing main()

GoogleTest provides a ready-made `main()` function via the `gtest_main` library, which initializes the test framework and runs all tests.

- **Use `gtest_main` library** if you want a quick start without writing your own main.

- **Write your own `main()`** if you want to customize initialization, command-line processing, or integrate with other frameworks.

Example of simple main function:

```c++
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

When linking:

- Link with `gtest_main` for provided main.
- Link with `gtest` if you provide your own main.

---

## Compiling and Running Your First Test Suite

1. **Create a test file:**

Here is an example test that uses GoogleTest:

```c++
#include <gtest/gtest.h>

// Function to test.
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Basic test suite.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

2. **Compile the test:** 
   Ensure you include the GoogleTest headers and link to the libraries.

   Example command line (assuming installed to standard locations):

```bash
c++ -std=c++17 -isystem /usr/local/include -pthread test.cpp -L/usr/local/lib -lgtest_main -lgtest -o test_binary
```

3. **Run the test:**

```bash
./test_binary
```

You should see output indicating tests passed or failed.

---

## Environment and Build Considerations

- **Visual Studio:** Handle the runtime linkage carefully; enable the `gtest_force_shared_crt` CMake option to avoid runtime library conflicts.

- **Threads:** GoogleTest is thread-safe on pthread-enabled systems; ensure your test environment supports pthread or adopt alternatives.

- **Shared Libraries:** You can build GoogleTest as shared or static libraries. Shared library mode requires extra compiler and linker flags.

- **Compiler and Platform Support:** GoogleTest supports all major platforms and compilers that support C++17.

---

## Best Practices

- Use the provided `gtest_main` if no customization is needed.
- Incorporate GoogleTest as a git submodule or via CMake FetchContent for seamless project builds.
- Use the recommended compiler flags for your platform and avoid macro clashing using control macros.
- Keep your test code and test binary separate from production code.

---

## Troubleshooting

- **Build Errors:** Ensure C++17 support and correct include/library paths.
- **Linker Errors:** Verify linking against both `gtest` and `gtest_main` (or your own main).
- **Multiple Main Functions:** Avoid linking more than one main.
- **Runtime Missing DLLs:** On Windows, ensure runtime DLLs and GoogleTest DLLs are accessible.

Refer to [Troubleshooting Common Setup Issues](../../getting-started/first-test-experience/troubleshooting-common-issues.md) for detailed help.

---

## Useful Links

- [GoogleTest Primer](./primer.md) - Learn how to write your first tests.
- [GoogleMock Quickstart](../guides/getting_started/googlemock-quickstart.md) - For mocking support.
- [Configuration & Initial Integration](../../getting-started/setup-basics/configuration-setup.md) - For build integration guidance.

---

## Summary

With these steps, you'll have a fully functional GoogleTest environment ready to compile and run automated C++ tests efficiently across your supported platforms.

Happy testing!
