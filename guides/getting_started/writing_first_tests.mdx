---
title: "Writing Your First Test"
description: "Learn to create, compile, and run your very first unit test using GoogleTest, including a holistic walkthrough of basic test case structure and assertions. Users will understand the anatomy and workflow of the framework from test writing to execution."
---

# Writing Your First Test with GoogleTest

## Overview

This guide walks you through creating, compiling, and running your very first unit test using GoogleTest. You'll learn the basic anatomy of a test case, how to write assertions, and understand the overall workflow from writing your test to executing it successfully.

---

## 1. Understanding the Test Workflow

### What You'll Achieve
- Write a simple test with GoogleTest's `TEST()` macro.
- Use assertions to verify expected program behavior.
- Compile and run your test executable.
- Interpret test output to confirm success or debug failures.

### Prerequisites
- A C++ development environment with a compiler supporting C++17 or later.
- GoogleTest installed and accessible in your build environment.
- Basic knowledge of C++ syntax.

### Expected Outcome
A successfully compiled test program that runs one or more unit tests, reporting clear results to the console.

### Estimated Time
Approximately 10-15 minutes.

### Difficulty Level
Beginner

---

## 2. Writing Your First Simple Test

### Step 1: Include GoogleTest Header
Start by including the primary GoogleTest header in your test source file:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define the Function Under Test
Suppose you want to test a simple function, for example, a factorial calculator:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

### Step 3: Write Basic Tests with `TEST()` Macro
Use the `TEST()` macro to define your tests. The macro takes two arguments:
1. The **test suite name** (a logical grouping of tests). 
2. The **test name**, which describes the scenario.

```cpp
// Tests factorial of zero.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(4), 24);
}
```

**Naming Tips:**
- Test suite and test names must be valid C++ identifiers.
- Avoid underscores (`_`) to prevent naming conflicts.

### Step 4: Write Assertions
Assertions check conditions:
- `EXPECT_EQ(actual, expected)`: Checks if two values are equal, but continues running upon failure.
- `ASSERT_EQ`: Similar but aborts the current test on failure.

Prefer `EXPECT_*` in most cases for thorough test reporting.

### Step 5: Add `main()` Function (if necessary)
If you are not linking against GoogleTest’s provided `gtest_main`, define your own main:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

`InitGoogleTest()` initializes the framework and parses command-line flags.

---

## 3. Building and Running Your Tests

### Compiling
Make sure your compiler can find GoogleTest headers and libraries. For example, with g++:

```sh
g++ -std=c++17 -isystem /path/to/googletest/include \
    -pthread your_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o your_test
```

Adjust include paths and libraries according to your installation.

### Running Tests
Execute your test binary:

```sh
./your_test
```

You will see output like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, the output prints the failure details including file and line numbers.

---

## 4. Verifying and Debugging

- **Confirm Success:** All tests should show `[  PASSED  ]`.
- **Identifying Failures:** When a test fails, GoogleTest prints the line of the failing assertion and a descriptive message.
- **Iterate Quickly:** Modify your tests or code, rebuild, and rerun.

---

## 5. Practical Tips

- **Keep Tests Small and Focused:** Each test should verify one aspect.
- **Meaningful Test Names:** Make test names descriptive to clarify intent.
- **Use `EXPECT_*` vs `ASSERT_*`:** Use `EXPECT_*` to continue testing beyond a failure, `ASSERT_*` if subsequent steps are invalid.
- **Avoid Underscores:** To prevent macro name collisions, don’t use underscores in suite or test names.
- **Assert in Void Functions:** Fatal assertions (`ASSERT_*`) can only be used in void-returning functions.

---

## 6. Common Issues & Troubleshooting

### Problem: Tests Not Running or Returning 0 Unexpectedly
- Ensure `RUN_ALL_TESTS()` return value is propagated as your `main` return.

### Problem: Compiler Errors About Missing `main()`
- Link with `gtest_main` or define your own `main` that calls `RUN_ALL_TESTS()`.

### Problem: Naming Conflicts or Underscore Restrictions
- Follow naming rules strictly to avoid reserved or duplicated names.

### Problem: Linking Errors
- Confirm correct inclusion of GoogleTest libraries and use consistent runtime settings.

### Debugging Failing Tests
- Use GoogleTest output to locate failing assertions.
- Utilize `--gtest_filter` to run specific tests.

---

## 7. Next Steps and Learning More

- Explore using **Test Fixtures** (`TEST_F()`) to share setup/teardown logic across multiple tests.
- Learn about **Assertions** in detail to test complex scenarios.
- Try **Value-Parameterized Tests** to run tests with multiple inputs.
- Consider integrating **GoogleMock** to mock dependencies.
- Review [GoogleTest Primer](primer.md) for more examples.
- Visit the [Testing Reference](reference/testing.md) for detailed macros and API overview.

---

## Example: Full Minimal Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this to see the simplest working GoogleTest program.

---