---
title: "Assertions in Practice"
description: "Discover the core set of assertions GoogleTest provides, explore practical examples, and understand when to use each assertion to validate code behavior robustly. Real-world patterns demystify common assertion pitfalls and strategies."
---

# Assertions in Practice

Welcome to the practical guide on using GoogleTest assertions effectively. This guide dives into the core assertion macros GoogleTest provides, illustrating how to leverage them to verify your C++ codeâ€™s behavior robustly, pinpoint failures precisely, and craft descriptive tests that reveal meaningful feedback when they fail.

---

## 1. Workflow Overview

### Purpose
This guide empowers you to make informed choices among GoogleTest's rich set of assertions, helping you validate conditions, compare values, catch exceptions, and express complex predicates with clarity.

### Prerequisites
- Basic familiarity with C++ and unit testing concepts.
- GoogleTest included and configured in your build environment.
- Basic knowledge of writing a test using `TEST` or `TEST_F` macros.

### Expected Outcomes
- Understand key assertion macros: `EXPECT_`, `ASSERT_`, and specialized assertions.
- Know when to use each assertion type to achieve meaningful test feedback.
- Use matchers to write expressive and readable checks.
- Avoid common pitfalls that cause confusing test failures.

### Time Estimate
Following the basic and intermediate examples should take about 10-20 minutes.

### Skill Level
Beginner to Intermediate: Suited for developers starting with GoogleTest assertions and advancing towards writing precise validations.

---

## 2. Step-by-Step Instructions and Key Assertions

### 2.1. Choosing Between `EXPECT_` and `ASSERT_`

- **`EXPECT_`** macros generate nonfatal failures: the test continues after a failure.
- **`ASSERT_`** macros produce fatal failures: they abort the current function on failure.

**Use `EXPECT_`** when you want the test to continue running to report multiple issues.

**Use `ASSERT_`** when continuing the test makes no sense after a failure.


### 2.2. Simple Boolean Assertions

- **`EXPECT_TRUE(condition)`**, **`ASSERT_TRUE(condition)`**
  - Verify the condition is true.

- **`EXPECT_FALSE(condition)`**, **`ASSERT_FALSE(condition)`**
  - Verify the condition is false.

```cpp
EXPECT_TRUE(x > 0) << "x should be positive";
ASSERT_FALSE(is_empty) << "Container must not be empty";
```

### 2.3. Binary Comparisons

Compare values directly, checking equality or relations.

- **`EXPECT_EQ(val1, val2)`** / **`ASSERT_EQ(val1, val2)`**: Checks if `val1 == val2`.
- **`EXPECT_NE(val1, val2)`** / **`ASSERT_NE(val1, val2)`**: Checks if `val1 != val2`.
- **`EXPECT_LT(val1, val2)`** / **`ASSERT_LT(val1, val2)`**: Checks if `val1 < val2`.
- **`EXPECT_LE(val1, val2)`** / **`ASSERT_LE(val1, val2)`**: Checks if `val1 <= val2`.
- **`EXPECT_GT(val1, val2)`** / **`ASSERT_GT(val1, val2)`**: Checks if `val1 > val2`.
- **`EXPECT_GE(val1, val2)`** / **`ASSERT_GE(val1, val2)`**: Checks if `val1 >= val2`.

**Example:**

```cpp
EXPECT_EQ(result.size(), 10);
ASSERT_LT(value, threshold);
```

> **Tip:** When comparing pointers, prefer to use `EXPECT_EQ(ptr, nullptr)` instead of `EXPECT_EQ(ptr, NULL)` to avoid ambiguity.

### 2.4. String Comparisons

GoogleTest provides specialized assertions for C-style strings:

- **`EXPECT_STREQ(str1, str2)`** / **`ASSERT_STREQ(str1, str2)`**: Strings have equal contents.
- **`EXPECT_STRNE(str1, str2)`** / **`ASSERT_STRNE(str1, str2)`**: Strings have different contents.
- **`EXPECT_STRCASEEQ(str1, str2)`** / **`ASSERT_STRCASEEQ(str1, str2)`**: Case-insensitive equality.
- **`EXPECT_STRCASENE(str1, str2)`** / **`ASSERT_STRCASENE(str1, str2)`**: Case-insensitive inequality.

```cpp
EXPECT_STREQ(actual_message, "Expected output");
ASSERT_STRCASEEQ(user_input, "yes");
```

> **Note:** For `std::string` objects, use `EXPECT_EQ` or `EXPECT_NE` instead.

### 2.5. Floating-Point Comparisons

Due to rounding errors, use specialized assertions instead of `EXPECT_EQ` for floating-point values:

- **`EXPECT_FLOAT_EQ(val1, val2)`** / **`ASSERT_FLOAT_EQ(val1, val2)`**: Approximately equal floats within 4 ULPs.
- **`EXPECT_DOUBLE_EQ(val1, val2)`** / **`ASSERT_DOUBLE_EQ(val1, val2)`**: Approximately equal doubles within 4 ULPs.
- **`EXPECT_NEAR(val1, val2, abs_error)`** / **`ASSERT_NEAR(val1, val2, abs_error)`**: Difference within specified absolute error.

```cpp
EXPECT_NEAR(computed_pi, 3.14159, 0.0001);
```

### 2.6. Exception Assertions

Verify exception throwing behavior if exceptions are enabled.

- **`EXPECT_THROW(statement, exception_type)`** / **`ASSERT_THROW(statement, exception_type)`**: Checks that `statement` throws `exception_type`.
- **`EXPECT_ANY_THROW(statement)`** / **`ASSERT_ANY_THROW(statement)`**: Checks that `statement` throws any exception.
- **`EXPECT_NO_THROW(statement)`** / **`ASSERT_NO_THROW(statement)`**: Checks `statement` does not throw any exception.

```cpp
EXPECT_THROW(DoDangerousOperation(), std::runtime_error);
```

### 2.7. Predicate Assertions

When you need to test complex boolean conditions with informative failure messages.

- **`EXPECT_PRED1(pred, val1)` .. `EXPECT_PRED5(pred, val1, val2, ..., val5)`**
- **`ASSERT_PRED1(pred, val1)` .. `ASSERT_PRED5(pred, val1, val2, ..., val5)`**

Predicates are functions or functors returning `bool`.

Example:

```cpp
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, num);
```

For predicate formatters (custom messages), use `EXPECT_PRED_FORMAT*` variants.

### 2.8. Generalized Assertions With Matchers

Use `EXPECT_THAT(value, matcher)` / `ASSERT_THAT(value, matcher)` for expressive, readable tests leveraging GoogleMock matchers.

```cpp
EXPECT_THAT(names, ::testing::ElementsAre("Alice", "Bob", "Carl"));
EXPECT_THAT(text, ::testing::StartsWith("Hello"));
```

Matchers can be combined and customized extensively.

### 2.9. Explicit Success and Failure

- **`SUCCEED()`**: Document a successful check (sometimes useful for clarity).
- **`FAIL()`**: Generates fatal failure immediately, aborting the test.
- **`ADD_FAILURE()`**: Generates nonfatal failure, test continues.

```cpp
if (unexpected_condition) {
  FAIL() << "This case should not happen!";
}
```

---

## 3. Practical Examples

### 3.1. Verifying Value Equality

```cpp
TEST(FactorialTest, HandlesPositive) {
  EXPECT_EQ(Factorial(5), 120);
  ASSERT_EQ(Factorial(0), 1);
}
```

### 3.2. Checking Pointer Validity

```cpp
int* ptr = GetIntPtr();
EXPECT_NE(ptr, nullptr);
```

### 3.3. Testing Floating-Point Approximate Equality

```cpp
double result = ComputeApproxValue();
EXPECT_NEAR(result, 10.0, 1e-5);
```

### 3.4. Confirming Exception Throwing

```cpp
EXPECT_THROW(Divide(10, 0), std::invalid_argument);
```

### 3.5. Combining Matchers and Assertions

```cpp
EXPECT_THAT(usernames, ::testing::Contains(::testing::StartsWith("admin")));
EXPECT_THAT(error_code, ::testing::AnyOf(::testing::Eq(404), ::testing::Eq(403)));
```

---

## 4. Troubleshooting & Best Practices

### Common Issues

- **Misusing `ASSERT_` and `EXPECT_`**: Using `ASSERT_` where continuation is possible leads to premature test abortion.

- **Pointer Comparison Pitfalls**: Use pointer-specific assertions (`EXPECT_EQ(ptr, nullptr)`) rather than value comparison.

- **Floating-Point Equals**: Avoid `EXPECT_EQ` for floats, instead use `EXPECT_NEAR` or `EXPECT_FLOAT_EQ`.

- **Overly Specific Matchers**: Over-constraining argument matchers can cause brittle tests.

- **Uninteresting Calls Warnings**: If mock methods cause warnings for calls not expected, consider using `NiceMock` or explicitly specify behavior with `EXPECT_CALL(...).Times(AnyNumber())`.

### Best Practices

- Favor `EXPECT_` macros for non-critical assertions to allow complete test execution.

- Stream meaningful messages with assertions using `<<` operator.

- Leverage generalized `EXPECT_THAT` matcher-based assertions for clarity and power.

- Use sequences and ordered calls where the call order matters.

- Distinguish between uninteresting and unexpected calls when using mocks to set expectations appropriately.

---

## 5. Next Steps & Related Content

- Deepen your understanding with [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for mocking interactions.

- Explore [Assertions Reference](../reference/assertions.md) for a comprehensive API.

- Visit [Writing Your First Test](../getting-started/first-test-run-validation/write-first-test.md) to see practical testing examples.

- Learn about [Matchers Reference](../reference/matchers.md) to create custom and complex matchers.

- Master test organization with [Test Discovery and Organization](../guides/core-testing-workflows/test-discovery-and-organization.md).


---

## Appendix: Selected Assertion Snippets

```cpp
// Boolean assertions
EXPECT_TRUE(x > 0);
ASSERT_FALSE(is_empty);

// Binary comparisons
EXPECT_EQ(result, expected_result);
ASSERT_NE(pointer, nullptr);
EXPECT_LT(value, max);

// String comparisons
EXPECT_STREQ(actual_cstr, expected_cstr);
EXPECT_STRNE(str1, str2);

// Floating point
EXPECT_FLOAT_EQ(float_val1, float_val2);
EXPECT_NEAR(double_val1, double_val2, 0.001);

// Exception
EXPECT_THROW(function_call(), ExpectedExceptionType);
EXPECT_NO_THROW(function_call());

// Predicate
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, number);

// Matcher-based
EXPECT_THAT(vec, ::testing::ElementsAre(1, 2, 3));
EXPECT_THAT(str, ::testing::HasSubstr("needle"));

// Explicit success/failure
SUCCEED() << "Optional success message";
FAIL() << "Error: invalid state";
```

---