---
title: "Writing Your First C++ Test"
description: "Step-by-step walk-through for setting up and authoring your first unit test using GoogleTest, including basic test macros, assertions, and organizing test files. Covers the entry-level workflow for testing C++ functions and classes."
---

# Writing Your First C++ Test

## Overview

This guide walks you through the essential steps for creating, compiling, and running your first C++ test using GoogleTest. It focuses on the fundamental test macros, assertions, and organization of test files to help you establish a basic but solid unit testing setup.

By following this guide, you will learn how to:

- Define simple test cases using `TEST` macro
- Use assertions to verify conditions
- Organize test sources and build configurations
- Execute tests and interpret the results

This is your entry point for verifying your code and building confidence through automated tests.

---

## Prerequisites

Before you begin, ensure you have:

- Installed GoogleTest and GoogleMock libraries on your system.
- A C++ compiler supporting at least C++17 standard.
- Familiarity with basic C++ programming.
- A project structure set up for compiling and linking your test code with GoogleTest.

If you haven't completed installation, see the [Installation Methods](../getting-started/setup-prerequisites-installation/installation-methods) guide.

---

## Expected Outcome

After completing this guide, you will have:

- A simple test suite with at least one test case verifying a function.
- Built and executed the test binary successfully.
- Understood the output of GoogleTest and how assertion failures are reported.

---

## Time Estimate

This guide should take approximately 15â€“30 minutes, depending on your familiarity with C++ and your development environment setup.

---

## Difficulty Level

Beginner

---

# Step-by-Step Instructions

### 1. Create Your First Test File

- Create a new C++ source file dedicated to tests, e.g., `factorial_test.cc`.
- Include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

### 2. Write a Simple Test Case

- Use the `TEST` macro to define a test:

```cpp
// Function under test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test Suite: FactorialTest, Test Name: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test Suite: FactorialTest, Test Name: HandlesPositiveInput
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

- Each `TEST` macro defines a single test case inside the specified test suite.

### 3. Understand Test Macros

- `TEST(TestSuiteName, TestName)` declares a test function.
- Assertions like `EXPECT_EQ` verify conditions and report failures without aborting the test.


### 4. Build Your Test Binary

- Use your build system or a simple command line to compile the test:

```bash
# Assuming g++ and that gtest and pthread libs are in your linker path
g++ -std=c++17 factorial_test.cc -lgtest -lgmock -lpthread -o factorial_test
```

- Ensure the compiler and linker flags include GoogleTest directories if installed in non-standard locations.


### 5. Run the Tests

- Execute the resulting binary:

```bash
./factorial_test
```

- You should see output indicating tests run and their status.


### 6. Interpret Test Results

- Passed tests show `[       OK ]` with test names.
- Failed tests show detailed failure messages including the file and line number, expected vs actual values.

Example of failure output:

```
[ RUN      ] FactorialTest.HandlesZeroInput
factorial_test.cc:10: Failure
Expected equality of these values:
  Factorial(0)
    Which is: 0
  1
[  FAILED  ] FactorialTest.HandlesZeroInput
```

### 7. Organize Your Test Code

- Put your tests in a dedicated directory, e.g., `/tests`.
- Separate production code source files from test source files.
- Group related tests into test suites to organize coverage logically.

### 8. Use Test Fixtures for Reusable Setup (optional)

- For tests that require shared setup/teardown, use test fixtures:

```cpp
class QueueTest : public testing::Test {
 protected:
  void SetUp() override {
    queue_.Enqueue(1);
  }

  Queue<int> queue_;
};

TEST_F(QueueTest, IsNotEmptyInitially) {
  EXPECT_NE(queue_.Dequeue(), nullptr);
}
```

- The `TEST_F` macro uses a fixture class instead of the `TEST` macro.

---

## Practical Tips & Best Practices

- Use descriptive names for suites and tests to make test reports readable.
- Prefer `EXPECT_*` macros to allow continuing tests after failures, unless the failure should be fatal.
- Use `ASSERT_*` when a failure should abort the test function immediately.
- Use fixtures (`TEST_F`) when tests share common objects or setup code.
- Keep tests small, focused, and isolated.
- Run tests regularly as part of your build or CI process.
- If tests fail, read GoogleTest output carefully; failure messages will pinpoint the cause.

---

## Common Pitfalls

- Forgetting to link with `-lgtest -lgmock -lpthread` results in linker errors.
- Naming tests or suites with underscores (`_`) may cause issues or confusion; prefer CamelCase.
- Using `ASSERT_*` inside constructors or destructors is not allowed.
- Not calling `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` will cause flags not to be parsed.

---

## Troubleshooting

- Compilation errors:
  - Check include paths and linking flags.
- No tests running:
  - Verify test names do not contain underscores.
  - Confirm `RUN_ALL_TESTS()` is called.
- Failures unexpectedly passing:
  - Ensure `EXPECT_` vs `ASSERT_` usage suits your scenario.
- Unexpected test output verbosity:
  - Use `--gtest_verbose=warning|error` flags to control output.

---

## Next Steps & Related Content

- [Writing Your First C++ Test](./writing-basic-tests) (this page)
- [Using Assertions Effectively](../guides/core-testing-workflows/using-assertions-effectively)
- [Managing and Organizing Test Suites](../guides/core-testing-workflows/managing-test-suites)
- [Effective Mocking with GoogleMock](../guides/advanced-features-and-patterns/effective-mocking)
- [Parameterized and Typed Tests](../guides/advanced-features-and-patterns/parameterized-and-typed-tests)
- [Troubleshooting Setup Issues](../getting-started/first-run-validation/troubleshooting-setup-issues)

For a deeper understanding of assertion mechanics and test flow, see the [Assertions Reference](../docs/reference/assertions.md) and [Testing Reference](../docs/reference/testing.md).

---

## Example Full Test File: `factorial_test.cc`

```cpp
#include <gtest/gtest.h>

// Factorial function to test.
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Summary

This guide sets you up with the basics of writing and running your first C++ test using GoogleTest, emphasizing test definitions, assertions, and execution workflow. It prepares you to build upon this foundation with more advanced testing features.

---