---
title: "Writing Your First Unit Test"
description: "Learn how to set up GoogleTest in your C++ project and write your first basic unit test. This guide walks through project configuration, test case creation, and understanding test outcomes, making it ideal for new users."
---

# Writing Your First Unit Test

## Overview

This guide helps you set up GoogleTest in your C++ project and write your very first unit test. It walks through configuring your project to use GoogleTest, creating a basic test case using GoogleTest macros, understanding the test structure, and interpreting test results. It is designed specifically for newcomers who want to quickly get started verifying their C++ code.

---

## Prerequisites

- GoogleTest installed in your development environment.
- Basic working knowledge of C++ programming.
- A C++ project with a build system (e.g., CMake) configured to compile your code.

If you haven't installed GoogleTest yet, please refer to the [Installation Instructions](../../getting-started/setup-basics/installation-instructions) page.

---

## What You'll Achieve

By following this guide, you'll:

- Integrate GoogleTest into your C++ project build process.
- Write a simple unit test case verifying a function behavior.
- Compile and run your test binary to check the test output.

---

## Step 1: Configure Your Project to Use GoogleTest

Before writing tests, ensure your build system is set up to include and link GoogleTest correctly.

If you're using CMake, add the following configuration to your `CMakeLists.txt`:

```cmake
# Find and include GoogleTest
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

# Add your test source file
add_executable(my_test test_my_code.cpp)

# Link GoogleTest libraries
target_link_libraries(my_test ${GTEST_LIBRARIES} pthread)

# Enable C++17 or higher support if required
set_target_properties(my_test PROPERTIES CXX_STANDARD 17)
```

> **Tip:** If you installed GoogleTest manually, adjust include and library paths accordingly.

---

## Step 2: Include GoogleTest Header in Your Test File

Create a new C++ source file for your tests, for example, `test_my_code.cpp`. At the top of the file, include the main GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This header provides all the macros and classes you'll need to write tests.

---

## Step 3: Write Your First Basic Test Using the TEST Macro

GoogleTest uses the `TEST` macro to define an individual test. This macro takes two arguments:

- **Test Suite Name** (groups related tests)
- **Test Name** (identifies the individual test)

Both should be valid C++ identifiers and should not contain underscores (`_`).

Here’s how to write a test that checks a simple function, for example, testing a factorial function:

```cpp
// Function under test
int Factorial(int n) {
    if (n <= 1) return 1;
    else return n * Factorial(n - 1);
}

// Test case for Factorial
TEST(FactorialTest, HandlesZeroInput) {
    EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
    EXPECT_EQ(Factorial(1), 1);
    EXPECT_EQ(Factorial(2), 2);
    EXPECT_EQ(Factorial(3), 6);
    EXPECT_EQ(Factorial(8), 40320);
}
```

- `EXPECT_EQ` is an assertion macro that checks if two values are equal.
- If any assertion fails, the test will be marked as failed, but other assertions in the same test will continue to run.

---

## Step 4: Implement main() to Run Tests

You need a `main()` function to initialize GoogleTest and run all registered tests:

```cpp
int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` processes command-line flags and initializes the framework.
- `RUN_ALL_TESTS()` runs all tests and returns `0` if successful, or `1` otherwise.

> **Important:** Always return the value of `RUN_ALL_TESTS()` to correctly signal test results.

---

## Step 5: Build and Run Your Test

Compile your test binary using your build system (e.g., CMake build or manually with `g++`).

```bash
# Using g++ manually
g++ -std=c++17 test_my_code.cpp -lgtest -lpthread -o my_test

# Run the test binary
./my_test
```

Successful test runs will produce output like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest prints detailed information about the failure including file name, line number, and expected vs actual values.

---

## Understanding Test Structure and Outcome

- **Test Suite:** A group of related tests, e.g., `FactorialTest`.
- **Test Name:** Individual test within the suite, e.g., `HandlesZeroInput`.
- **Assertions:** Statements that verify behaviors, such as `EXPECT_EQ`.
- **Test Result:** Each test passes only when all its assertions pass.

A failure in one test does not stop other tests from running.

---

## Practical Tips

- Use descriptive test suite and test names reflecting the functionality being verified.
- Write multiple assertions in a single test only if they verify related logic; otherwise, create multiple tests.
- Use `ASSERT_` macros when a failure should stop the current test immediately (e.g., when further code depends on a condition).
- Keep tests small and focused.
- Avoid underscores in test names due to internal GoogleTest restrictions and naming conflicts.

---

## Common Pitfalls

- Forgetting to link against GoogleTest libraries during build.
- Neglecting to call `InitGoogleTest()` before `RUN_ALL_TESTS()`.
- Ignoring the return value of `RUN_ALL_TESTS()`.
- Using incorrect macro (`TEST_F` instead of `TEST` or vice versa) without defining a fixture.

---

## Next Steps

After mastering basic tests, consider exploring:

- Writing tests with shared setup using [TEST_F fixtures](../getting-started/first-test-experience/write-first-test).
- Building and running tests with CMake or Bazel ([Building and Running Tests](../getting-started/first-test-experience/building-and-running-tests)).
- Understanding assertions in depth ([Assertions Reference](../docs/reference/assertions.md)).
- Handling test failures and debugging.

---

## Additional Resources

- [GoogleTest Primer](../../docs/primer) — Learn core concepts and test writing best practices.
- [GoogleTest FAQ](../../docs/faq) — Answers to common questions and troubleshooting.
- [GoogleTest Samples](../../docs/samples.md) — Practical example test code.
- [GoogleTest API Reference](../../docs/reference/testing.md) — Complete macro and class documentation.

---

By following this guide, you establish a solid foundation for writing reliable, maintainable, and effective unit tests using GoogleTest.
