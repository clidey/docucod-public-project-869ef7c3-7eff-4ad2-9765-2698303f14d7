---
title: "Controlling Test Execution"
description: "Customize how tests are filtered, repeated, or ordered at runtime. Covers command-line options, selective test running, disabling, and death tests for advanced workflows."
---

# Controlling Test Execution

Customize how tests are filtered, repeated, or ordered at runtime. This guide covers command-line options, selective test running, disabling tests, and handling death tests for advanced workflows.

---

## Overview

GoogleTest offers flexible controls to tailor which tests run, how often they run, and in what order. This page helps you master these controls to streamline your test runs and focus on what matters during development or CI workflows.

### Prerequisites

- Basic familiarity with writing and running GoogleTest tests.
- GoogleTest and GoogleMock installed and linked in your project.
- Understanding of running test binaries (see [Running and Validating Tests](https://github.com/google/googletest/tree/main/docs/getting-started/quickstart-validation/run-validate-tests.mdx)).

### Expected Outcome

By following this guide, you will be able to:

- Run specific tests or subsets of tests using filters.
- Control test repetition to verify stability.
- Disable or temporarily skip tests.
- Handle death tests to validate program crashes safely.
- Use command-line options effectively to control test execution.

### Time Estimate

5-10 minutes to understand and apply basic test control techniques; more for advanced use cases like death tests.

### Difficulty Level

Intermediate - requires familiarity with basic test creation and command-line operations.

---

## Step-by-Step Instructions

### 1. Running Selective Tests Using Filters

GoogleTest supports running subsets of tests by specifying filters on test suite and test names.

#### How to filter tests:

1. Use the command-line flag `--gtest_filter=` when invoking your test executable.

2. Provide a pattern matching test names in the form:

   ```
   --gtest_filter=TestSuiteName.TestName
   ```

3. Patterns support wildcards `*` and negative patterns separated by `-`. For example:

   ```bash
   --gtest_filter=MySuite.*-MySuite.DepricatedTest
   ```

   Runs all tests in `MySuite` except `DepricatedTest`.

#### Expected result:

Only tests matching the positive patterns and not matching any negative patterns run.

<Check>
To verify filtering worked, your test output will list only the filtered tests executed.
</Check>

### 2. Repeating Tests

To check for flaky or intermittent failures, you can run tests multiple times.

#### How to repeat tests:

1. Use the `--gtest_repeat=N` flag, where `N` is the number of times you want tests to run.

2. For example, to run the entire test suite 10 times:

   ```bash
   ./your_test_binary --gtest_repeat=10
   ```

3. To repeat until failure or a max count, use `--gtest_break_on_failure` in conjunction.

#### Expected result:

GoogleTest runs all tests the specified number of times, stopping early if failures are encountered when `--gtest_break_on_failure` is used.

<Note>
Repeated runs can expose flaky tests but increase test duration.
</Note>

### 3. Disabling Tests

Sometimes, you need to temporarily disable tests without deleting code.

#### How to disable:

1. Rename the test prefixed with `DISABLED_`. For example:

   ```cpp
   TEST(FactorialTest, DISABLED_HandlesNegative) {
     // test code
   }
   ```

2. Disabled tests will be discovered but **not** run.

#### Expected result:

Test output will note disabled tests but skip running them.

<Warning>
Avoid keeping disabled tests long-term as they hide potential regressions.
</Warning>

### 4. Controlling Execution of Death Tests

Death tests verify that your code terminates or crashes as expected under certain conditions. GoogleTest provides a safe framework to write and execute these.

#### How to run death tests:

1. Use the `EXPECT_DEATH()` or `ASSERT_DEATH()` macros in your test code to define death tests.

2. GoogleTest handles running the death test in a separate process automatically.

3. **Important:** death tests require `RUN_ALL_TESTS()` to be called exactly once in your test binary, as shown in the [`gmock_main.cc`](https://github.com/google/googletest/blob/main/googlemock/src/gmock_main.cc) example.

4. Use `--gtest_break_on_failure` to stop immediately if a death test fails.

#### Expected result:

Death tests run isolated from the main test thread/process, allowing safe validation of crashes. Failing death tests are reported clearly.

<Info>
Death tests incur some overhead; use judiciously.
</Info>

### 5. Using Other Useful Command-Line Flags

| Flag                     | Description                                              |
|--------------------------|----------------------------------------------------------|
| `--gtest_shuffle`        | Runs tests in a random order each run, useful to find order-dependent failures. |
| `--gtest_random_seed=123`| Fixes the seed used by `--gtest_shuffle` for reproducibility. |
| `--gtest_break_on_failure` | Stops test execution upon first failure.               |
| `--gtest_list_tests`     | Lists all tests without running them.                    |

#### Applying these flags:

Example to run all tests shuffled:

```bash
./your_test_binary --gtest_shuffle
```

<Check>
Combine these flags with filters and repeats to create powerful test execution scenarios.
</Check>

---

## Practical Examples

### Example 1: Run only tests related to "Queue"

```bash
./my_tests --gtest_filter=*Queue*
```

Expected: Only test suites or test names containing "Queue" execute.

### Example 2: Repeat flaky tests until fail or 5 times

```bash
./my_tests --gtest_repeat=5 --gtest_break_on_failure
```

Expected: Tests run up to 5 times, stopping early on the first failure.

### Example 3: Disable a test temporarily

```cpp
TEST(MathTest, DISABLED_DivisionByZero) {
  // test code
}
```

Expected: `DivisionByZero` test is skipped during runs.

### Example 4: Running death tests safely

Your death test:

```cpp
TEST(ProcessTest, DeathOnNullInput) {
  EXPECT_DEATH(Process(nullptr), "null pointer");
}
```

Run your test binary normally. Death test infrastructure handles subprocesses.


---

## Troubleshooting & Tips

### Why does a test run even when filtered?

- Ensure your filter pattern is correct and matches the test name exactly or via wildcards.
- Use `--gtest_list_tests` to verify test names.

### Tests not repeating as expected?

- Confirm `--gtest_repeat=N` is specified.
- Check whether your test binary or environment alters flag behavior.

### Disabled tests still running?

- Verify the test name is correctly prefixed with `DISABLED_`.
- Ensure the test suite/build system isn't overriding this behavior.

### Issues with death tests?

- Make sure only one call to `RUN_ALL_TESTS()` exists.
- Death tests require support from your OS (e.g., forks/processes).
- See [Death Tests Guide](https://github.com/google/googletest/blob/main/docs/advanced.md#death-tests) for detailed instructions.

### Best Practices

- Use filtering to speed up development cycles by running only relevant tests.
- Use `DISABLED_` sparingly; better practice is to fix or remove failing tests.
- Combine shuffle and repeat flags to detect flaky, order-sensitive tests.
- Leverage death tests to verify defensive code and error handling.

---

## Next Steps & Related Content

- Explore [Test Fixtures](https://github.com/google/googletest/tree/main/docs/primer.md#test-fixtures) to share setup across related tests.
- Learn how to [Set Expectations and Actions on Mocks](https://github.com/google/googletest/tree/main/docs/gmock_for_dummies.md) for richer test behaviors.
- Understand [Assertions and Matchers](https://github.com/google/googletest/tree/main/docs/core-apis/assertion-macros.md) for validation within tests.
- Deep dive into [Advanced Test Execution Controls](https://github.com/google/googletest/tree/main/docs/advanced.md#running-tests) for finer control.

---

## References

- GoogleTest Primer: https://github.com/google/googletest/tree/main/docs/primer.md
- Running and Validating Tests: https://github.com/google/googletest/tree/main/docs/getting-started/quickstart-validation/run-validate-tests.mdx
- gMock for Dummies: https://github.com/google/googletest/tree/main/docs/gmock_for_dummies.md
- gMock Cheat Sheet: https://github.com/google/googletest/tree/main/docs/gmock_cheat_sheet.md
- GoogleMock Main Function Example: https://github.com/google/googletest/blob/main/googlemock/src/gmock_main.cc

---

Harness these controls to optimize your test runs, improve developer productivity, and maintain healthier test suites.