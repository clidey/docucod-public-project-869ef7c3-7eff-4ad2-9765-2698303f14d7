---
title: "Test Discovery and Execution"
description: "Master the process of discovering and running tests—automatically and manually. Includes filtering, running subsets, command line options, and configuring parallel execution for faster feedback cycles."
---

# Test Discovery and Execution

Master the process of discovering and running tests—automatically and manually. This guide covers filtering tests, running subsets, using command line options, and configuring parallel execution to accelerate your feedback cycle.

---

## 1. Workflow Overview

### Task Description
This guide helps you efficiently discover tests in your codebase and execute them selectively or in parallel. Whether running all tests, filtered subsets, or manually specified tests, you will learn how to control test execution for faster and focused validation.

### Prerequisites
- A working test suite written using GoogleTest (tests created with `TEST()`, `TEST_F()`, `TEST_P()`, and other macros).
- GoogleTest properly installed and linked in your project.
- A build system configured to compile and run tests.
- Familiarity with basic GoogleTest concepts such as test suites and fixtures (see [GoogleTest Primer](primer.md) for details).

### Expected Outcome
By following this guide, you will:
- Understand how GoogleTest discovers tests automatically.
- Learn to run all tests or just a subset using filters.
- Use command line flags to customize which tests to run and how.
- Configure parallel test execution to optimize run time.

### Time Estimate
Approximately 15-30 minutes to grasp basic operations and experiment with parallel execution.

### Difficulty Level
Beginner to Intermediate. No advanced knowledge of GoogleTest internals required.

---

## 2. Step-by-Step Instructions

### Understanding Test Discovery
GoogleTest automatically discovers tests defined in your code using macros like `TEST()`, `TEST_F()`, `TEST_P()`, and the associated registration mechanism.

- Each test is automatically registered when the binary is executed.
- The framework maintains a catalog of test suites and their tests.

You do not need to manually enumerate or list tests for execution.

### Running All Tests
To run the full suite of tests, use the provided test executable and run:

```sh
./your_test_executable
```

- Under the hood, `RUN_ALL_TESTS()` will execute all discovered tests.
- The executable exit code will be `0` if all tests pass, or non-zero if any test fails.

### Running a Subset of Tests Using Filters
Use the `--gtest_filter` flag to run specific tests or test suites.

**Syntax:** 

```sh
--gtest_filter=<positive_patterns>[-<negative_patterns>]
```

- Positive patterns specify which tests to run (supports `*` wildcards).
- Negative patterns exclude tests.

**Examples:**

- Run all tests in the `FactorialTest` suite:

  ```sh
  ./your_test_executable --gtest_filter=FactorialTest.*
  ```

- Run a specific test:

  ```sh
  ./your_test_executable --gtest_filter=QueueTest.DequeueWorks
  ```

- Run all tests except disabled ones:

  ```sh
  ./your_test_executable --gtest_filter=-*.DisabledTest
  ```

**Tips:**
- Patterns match full test names (i.e., `TestSuiteName.TestName`).
- Wildcards `*` match zero or more characters.

### Running Disabled Tests
GoogleTest prefixes disabled tests with `DISABLED_` or names them in a way that excludes them by default.

Run disabled tests with:

```sh
./your_test_executable --gtest_also_run_disabled_tests
```

Combine with filter for fine control.

### Running Tests in a Specific Order or Randomized Order
Run tests in the order they are defined:

```sh
./your_test_executable --gtest_shuffle=0
```

Randomize test order for uncovering dependencies:

```sh
./your_test_executable --gtest_shuffle
```

Use `--gtest_random_seed=<int>` to repeat a specific test order.

### Using the Command Line to Control Test Execution
GoogleTest supports many command line options impacting test discovery and execution:

- `--gtest_repeat=N` - Run tests N times.
- `--gtest_break_on_failure` - Stop on first failed assertion.
- `--gtest_output=xml[:path]` - Output results as XML.
- `--gtest_color=yes|no|auto` - Control colored output.

Refer to the GoogleTest [Advanced Guide](advanced.md) for details.

### Configuring Parallel Test Execution
GoogleTest does not natively support running tests in parallel within a single process. Parallelism is typically achieved by:

1. Splitting tests across multiple processes/shards.
2. Invoking multiple instances of the test executable with filters.

**Running Sharded Tests:**

- Use `--gtest_shard_count` to specify total shards.
- Use `--gtest_test_shard_index` to run the shard at a specific index.

Example: Run shard 0 out of 4 total shards:

```sh
./your_test_executable --gtest_shard_count=4 --gtest_test_shard_index=0
```

**Parallel Execution Workflow:**

- Divide your tests evenly using shards.
- Run each shard in parallel.
- Aggregate results (if needed) from multiple runs.

Many CI systems provide native support for this pattern.

---

## 3. Examples & Use Cases

### Basic Test Discovery and Run
```sh
# Run all tests
./my_tests

# Run tests from the FactorialTest suite
./my_tests --gtest_filter=FactorialTest.*

# Run only the QueueTest.DequeueWorks test
./my_tests --gtest_filter=QueueTest.DequeueWorks
```

### Running Disabled Tests
```sh
# Run all tests including disabled
./my_tests --gtest_also_run_disabled_tests
```

### Running Specific Shard in Parallel Testing
```sh
# Run parallel shard 2 of 4
./my_tests --gtest_shard_count=4 --gtest_test_shard_index=2
```

---

## 4. Troubleshooting & Tips

### Common Issues

**No Tests Run:**
- Check filters; an exclusion or incorrect pattern might exclude all tests.
- Confirm that tests are properly defined and linked.
- Ensure your binary is built with test code included.

**Tests Skipped Unexpectedly:**
- Remember that disabled tests are excluded unless `--gtest_also_run_disabled_tests` is set.

**Parallel Test Failures:**
- Be aware of test interdependencies; tests should be independent for reliable parallel execution.
- Ensure shard counts and indices are set correctly.

**Test Output Is Unclear:**
- Use `--gtest_output=xml:filename.xml` to capture detailed reports.
- Consider `--gtest_internal_run_death_test` for debugging death tests.

### Best Practices

- Name tests and suites consistently for easy filtering.
- Use `TEST_F` and `TEST_P` appropriately to organize complex tests.
- Use shards in continuous integration to reduce wall-clock time.
- Use randomization occasionally to detect hidden dependencies.

### Performance Considerations

- Parallel execution reduces feedback time for large suites.
- Use filters to quickly re-run failed tests during development.
- Limit output verbosity when running large test batches.

### Alternative Approaches

- Use custom test runner scripts to distribute tests efficiently.
- Integrate GoogleTest reports into CI dashboards for visibility.

---

## 5. Next Steps & Related Content

### What's Next
- Learn how to write tests with parameterized and typed tests for better coverage: [Parameterized and Typed Tests](parameterized-and-typed-tests.md).
- Explore assertion best practices to write effective validations: [Using Assertions Effectively](using-assertions.md).
- Understand mocking basics with GoogleMock: [Basic Mocking with GoogleMock](basic-mocking.md).

### Related Guides
- [Writing Your First Test](writing-your-first-test.md)
- [Advanced Mocking Patterns](advanced-mocking-patterns.md)
- [Debugging Test Failures](debugging-and-troubleshooting.md)

### External Resources
- [GoogleTest Primer](primer.md) for foundational concepts.
- [GoogleTest Advanced Guide](advanced.md) for deeper technical insights.

---

# Summary
This guide empowers you to discover and run tests in GoogleTest with precision and efficiency. From running all tests to finely tuned filtering and sharded parallel execution, it equips you to optimize testing workflows.

---

# Additional Notes
- The primary means of test discovery is automatic via registration when the binary is built.
- Subset execution utilizes `--gtest_filter` patterns for granular control.
- Parallel execution is enabled via test sharding flags but requires infrastructure orchestration.
- Run `RUN_ALL_TESTS()` in your `main()` after invoking `InitGoogleTest()` to start tests.

For detailed API and flag references, see the [Testing Reference](reference/testing.md).

---

# Code Snippet for Main Function Running All Tests

```cpp
#include "gtest/gtest.h"

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This minimal main function initializes the framework and runs all tests discovered automatically.

---