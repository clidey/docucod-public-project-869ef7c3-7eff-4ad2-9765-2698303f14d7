---
title: "Writing and Running Your First Test"
description: "Walks users through creating their first GoogleTest-based test suite from scratch: including setting up the test environment, writing test cases, compiling, and executing tests. It covers essential assertions and explains test output."
---

# Writing and Running Your First Test

## Workflow Overview

### Task Description
This guide walks you through creating your first test suite using GoogleTest from scratch. You will learn to set up a test environment, write test cases using the core `TEST` and `TEST_F` macros, compile your test code, execute your tests, and interpret the results, including understanding test output and assertions.

### Prerequisites
- GoogleTest library built and installed or available as part of your build environment.
- A C++17-compatible compiler.
- Basic familiarity with compiling and running C++ code.
- A working build setup (e.g., CMake or another build system) configured to link against GoogleTest.

### Expected Outcome
You will be able to write simple tests, run them with GoogleTest’s test runner, see detailed results of passed and failed tests, and understand how the testing framework organizes tests into suites.

### Time Estimate
Approximately 15-30 minutes, depending on your environment setup.

### Difficulty Level
Beginner

---

## Step-by-Step Instructions

### Step 1: Set Up Your Test File
Create a new `.cc` file for your test, e.g., `example_test.cc`. Include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This gives you access to all GoogleTest macros and functionality.


### Step 2: Write a Simple Test Using `TEST()` Macro
The simplest test consists of defining a test function using `TEST(TestSuiteName, TestName)`. This macro defines and registers a test automatically.

Example:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Notes:
- The first argument is the test suite (group) name.
- The second argument is the individual test name.
- Names should be valid C++ identifiers without underscores.
- Inside the test body, use assertions (e.g., `EXPECT_EQ`) to validate conditions.


### Step 3: Write Tests Using a Test Fixture with `TEST_F()` Macro
For multiple tests sharing the same setup and data, define a test fixture class derived from `testing::Test`.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Setup queue states before each test.
    q0_.clear();
    q1_.enqueue(1);
    q2_.enqueue(2);
    q2_.enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.dequeue();
  ASSERT_NE(n, nullptr); // fatal failure if null
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

Important:
- Use `TEST_F(TestFixtureName, TestName)` when your tests require shared fixtures.
- Each test runs independently with a freshly constructed fixture.


### Step 4: Create the `main()` Function to Run All Tests
Typically, you do not need to write your own `main()`—linking with `gtest_main` provides it. However, you can write your own to customize initialization.


Example:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Steps:
- Call `testing::InitGoogleTest(&argc, argv)` first to initialize GoogleTest and parse testing flags.
- Call `RUN_ALL_TESTS()` to execute all registered tests.
- Return the result of `RUN_ALL_TESTS()` from `main()`.


### Step 5: Compile Your Tests
Use your build system (e.g., CMake, Makefile) to compile and link your test executable.

Example g++ command line:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread hello_test.cc \
    /path/to/libgtest.a /path/to/libgtest_main.a -o hello_test
```

Refer to installation documentation if you use CMake or Bazel builds.


### Step 6: Run Your Tests
Execute the compiled test binary. The GoogleTest framework will:
- Discover all registered tests automatically.
- Run each test individually.
- Display detailed test output, including passed tests, failed tests, and error messages.

Example output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```


### Step 7: Interpret Test Output

- Tests marked `[  PASSED  ]` succeeded.
- Tests marked `[  FAILED  ]` failed some assertion.
- If any test fails, your test program's exit code is `1`; otherwise `0`.

You can also:
- Use `--gtest_filter` flag to run selective tests.
- Use `--gtest_list_tests` to list the available tests.


## Examples & Code Samples

### Basic Test Example

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Test Fixture Example

```cpp
#include <gtest/gtest.h>

class Queue {
 public:
  Queue() {}
  void Enqueue(int element) { data_.push_back(element); }
  int* Dequeue() {
    if (data_.empty()) return nullptr;
    int* front = new int(data_.front());
    data_.erase(data_.begin());
    return front;
  }
  size_t size() const { return data_.size(); }
 private:
  std::vector<int> data_;
};

class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q0_.clear();
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue q0_;
  Queue q1_;
  Queue q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

## Troubleshooting & Tips

### Common Issues

- **Tests not being discovered or run:** Ensure your test files are linked in the test binary and GoogleTest headers are included correctly.
- **Compilation errors with macros:** Verify correct use of `TEST` vs `TEST_F` macros; `TEST_F` requires a fixture class.
- **Assertion failures confusing:** Read assertion failure messages carefully; they show the expected vs actual values.
- **Fatal assertion behavior:** Remember that `ASSERT_*` macros abort current function only, not whole test, which might require you to check `HasFatalFailure()` or design tests accordingly.
- **Linker errors:** Confirm that GoogleTest libraries are correctly linked, matching your build configuration.

### Best Practices

- Prefer `EXPECT_*` over `ASSERT_*` when test can continue after failure to get more failure info in a single run.
- Use test fixture classes (`TEST_F`) for reusing setup code.
- Name your test suites and tests clearly and consistently.
- Keep tests independent and isolated.
- Use `GTEST_SKIP()` to dynamically skip tests when preconditions are not met.

### Performance Considerations

- Tests are run sequentially by default; to speed up, consider tools outside GoogleTest to run tests in parallel.
- Keep tests fast and focused for rapid iteration.

### Alternative Approaches

- For parameterized testing or mocks, see other GoogleTest guides on those topics to extend your tests.

## Next Steps & Related Content

- After mastering the basics here, explore:
  - [Writing and Running Your First Test](primer.md) for more detailed primer.
  - [Test Discovery and Running Strategies](guides/essential-workflows/test-discovery) for selective and filtered test running.
  - [Using GoogleMock](guides/essential-workflows/using-mocks) for advanced mocking use cases.
  - [Assertion Patterns and Best Practices](guides/core-scenarios/assertion-best-practices) to deepen understanding of assertions.

- Consult the [GoogleTest Primer](primer.md) for foundational concepts.
- For build setup, see [Quickstart: Building with CMake](quickstart-cmake.md).


---

_For complete examples and detailed explanations, also see the [GoogleTest Primer](primer.md) and the [Testing Reference](docs/reference/testing.md)._