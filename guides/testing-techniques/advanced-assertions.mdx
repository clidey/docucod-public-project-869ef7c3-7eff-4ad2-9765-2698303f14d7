---
title: "Using Assertions Effectively"
description: "In-depth examples and strategies for leveraging GoogleTest’s rich set of assertions. Covers equality, inequality, floating-point, exception, and custom assertions, with guidance on when and how to use each type for clear, reliable tests."
---

# Using Assertions Effectively

## Overview
This guide demonstrates practical examples and strategies to leverage GoogleTest's extensive assertion capabilities. You will learn how to apply various types of assertions including equality, inequality, floating-point comparisons, exception checks, and custom assertions to write reliable and clear tests. The focus is on selecting the right assertion for your testing needs to produce meaningful test failures and maintainable test code.

---

## 1. Assertion Categories and Their Purpose

GoogleTest provides a rich set of assertions categorized as follows:

- **Equality and Inequality Assertions**: Check if values are equal or not equal.
- **Relational Assertions**: Verify ordering relations like greater or less.
- **Floating-Point Assertions**: Account for precision issues in floating-point comparisons.
- **Exception Assertions**: Expect and verify exceptions thrown by code.
- **Boolean Assertions**: Validate truthiness directly.
- **Custom Assertions**: Define domain-specific checks for complex conditions.

### Tips
- Use `EXPECT_*` for non-fatal failures to allow the test to continue.
- Use `ASSERT_*` for fatal failures to stop further execution when a critical condition fails.
- Choose assertions that provide clear failure messages to ease debugging.

---

## 2. Using Equality and Inequality Assertions

### Basic Equality Checks
Use `EXPECT_EQ(val1, val2)` or `ASSERT_EQ(val1, val2)` to compare values for exact equality.

```cpp
TEST(MathUtilsTest, Addition) {
  int result = Add(2, 3);
  EXPECT_EQ(result, 5);  // Passes if result == 5
}
```

### Inequality Checks
`EXPECT_NE(val1, val2)` or `ASSERT_NE(val1, val2)` verify that values are *not* equal.

### Important Best Practices
- Arguments in equality assertions should be in the order: expected value, actual value.
- Prefer equality checks over boolean checks for value comparison for clarity.

---

## 3. Relational Assertions

Used for verifying ordering and range relations.

- `EXPECT_LT(val1, val2)`  // Less than
- `EXPECT_LE(val1, val2)`  // Less than or equal
- `EXPECT_GT(val1, val2)`  // Greater than
- `EXPECT_GE(val1, val2)`  // Greater than or equal

Example:
```cpp
EXPECT_GT(value, 10);  // Validate value is greater than 10
```

---

## 4. Floating-Point Assertions

### Due to floating-point rounding errors, use approximate checks:

- `EXPECT_FLOAT_EQ(val1, val2)` for `float` precision
- `EXPECT_DOUBLE_EQ(val1, val2)` for `double` precision
- `EXPECT_NEAR(val1, val2, abs_error)` for custom tolerance

Example:

```cpp
float result = CalculateValue();
EXPECT_NEAR(result, 3.14159f, 0.0001f);
```

### Avoid direct `EXPECT_EQ` or `EXPECT_DOUBLE_EQ` for floating-point values unless the values are expected to be exactly the same.

---

## 5. Boolean Assertions

- `EXPECT_TRUE(condition)` and `ASSERT_TRUE(condition)`
- `EXPECT_FALSE(condition)` and `ASSERT_FALSE(condition)`

Use when testing boolean conditions directly. However, when possible, prefer more specific value comparisons for clarity.

---

## 6. Exception Assertions

To verify that a piece of code throws or does not throw exceptions:

- `EXPECT_THROW(statement, ExceptionType)` checks that `statement` throws the specified exception type.
- `EXPECT_ANY_THROW(statement)` checks that `statement` throws any exception.
- `EXPECT_NO_THROW(statement)` confirms `statement` does not throw any exceptions.

Example:

```cpp
EXPECT_THROW(CallFunctionThatThrows(), std::runtime_error);
```

### Tips
- Use precise exception types for specific failure verification.
- For testing exception messages, you may need to catch exceptions manually in the test.

---

## 7. Custom Assertions

Sometimes built-in assertions are not enough. GoogleTest allows defining:

- **Predicate Assertions** with `EXPECT_PRED1`, `EXPECT_PRED2`, ... for boolean predicates.
- **Predicate Format Assertions** like `EXPECT_PRED_FORMAT1` for detailed failure messages.
- **`ASSERT_TRUE` or `EXPECT_TRUE` with a matcher or predicate function for cleaner expression.**

### Example:

```cpp
bool IsValidNumber(int n) { return n > 0 && n < 100; }

TEST(NumberTest, ValidNumber) {
  int value = GetNumber();
  EXPECT_PRED1(IsValidNumber, value);
}
```

---

## 8. Using Assertion Macros Intelligently

### Distinguishing `EXPECT_*` vs. `ASSERT_*`
- Use `EXPECT_*` when failure allows the test to proceed safely.
- Use `ASSERT_*` when failure should stop the current test procedure immediately.

### Writing Clear Failure Messages
- When an assertion fails, the error message should help pinpoint the cause.
- Use predicate format assertions when complex validation is required.

### Avoiding Common Pitfalls
- Don’t use `EXPECT_EQ` with floating-point if exact match is unlikely.
- Use the right order in `EXPECT_EQ(expected, actual)`; reversing arguments can lead to confusing messages.
- Avoid overusing `ASSERT_*` as it stops test execution early and might hide additional failures.

---

## 9. Advanced Assertion Features

### Testing Multiple Values Simultaneously
Use compound assertions or custom matchers to verify complex data structures.

### Assertion on Collections
Use `EXPECT_THAT(container, matcher)` with matchers like `ElementsAre()`, `Contains()`, or `UnorderedElementsAre()` for expressive container checks.

### Example:

```cpp
using ::testing::ElementsAre;

EXPECT_THAT(my_vector, ElementsAre(1, 2, 3));
```

### Exception Assertions in More Detail
Test for exception propagation and check that no exceptions occur where not expected.

---

## 10. Troubleshooting Assertions

### Assertion Fails Unexpectedly
- Confirm argument order in equality tests.
- Check if floating-point tests require approximate comparison.
- Review if predicates or custom assertions provide correct logic.

### Test Stops Too Early
- Evaluate the necessity of `ASSERT_*` usage.
- Replace non-critical `ASSERT_*` by `EXPECT_*` when possible.

---

## 11. Summary and Best Practices

- Choose the specific assertion that matches your scenario for clarity and robustness.
- Use `EXPECT_*` unless you need to terminate on failure, then use `ASSERT_*`.
- For floating-point, use `EXPECT_NEAR`, `EXPECT_FLOAT_EQ`, or `EXPECT_DOUBLE_EQ`.
- When verifying exceptions, be explicit on the expected exception type.
- Leverage custom predicates when built-in assertions can’t express your validation cleanly.
- Keep failure messages informative and easy to interpret.

---

## 12. Additional Resources

- [GoogleTest Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md)
- [Matchers Reference](https://github.com/google/googletest/blob/main/docs/reference/matchers.md)
- [Writing Your First Unit Test](../getting-started/configuration-and-first-test/writing-your-first-unit-test.mdx)
- [Mocking with GoogleMock Guides](../guides/mocking-with-googlemock/introduction-to-mocking.mdx)


<Callout title="Practical Tip">
Always verify your assertions with simple test cases to ensure they behave as expected before integrating them into your test suite.
</Callout>