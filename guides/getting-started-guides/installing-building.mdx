---
title: "Installing and Building GoogleTest"
description: "A comprehensive guide to acquiring, building, and integrating GoogleTest into your C++ project. Covers common build systems (CMake, Bazel), basic configuration, and essential steps for setting up the test framework, ensuring users can quickly get started on multiple platforms."
---

# Installing and Building GoogleTest

A comprehensive guide to acquiring, building, and integrating GoogleTest into your C++ project. This guide covers common build systems including CMake and Bazel, basic configuration steps, and essential instructions to quickly set up the GoogleTest framework across multiple platforms.

---

## Workflow Overview

### Task Description
This guide helps you acquire the GoogleTest source code, build the GoogleTest framework, and integrate it into your C++ project using popular build systems. You will learn how to build GoogleTest as a standalone project or embed it into your existing builds, configure compiler settings, and prepare your environment for effective testing.

### Prerequisites
- Basic familiarity with command line operations.
- C++17 compatible compiler installed.
- Installed CMake (version 3.14 or later recommended).
- Git client installed (for cloning the repository).
- (Optional) Visual Studio or Xcode for native builds on Windows or macOS.

### Expected Outcome
By following this guide, you will have a fully built GoogleTest testing framework available to link your tests against, configured to fit your project's build system, ready to compile and run tests reliably.

### Time Estimate
Approximately 15–30 minutes depending on environment and familiarity with building C++ projects.

### Difficulty Level
Beginner to Intermediate

---

## Step-by-Step Instructions

### 1. Acquire GoogleTest Source

- Open a terminal or command prompt.

- Execute the following to clone the official GoogleTest repository at the stable tag v1.17.0:

  ```bash
  git clone https://github.com/google/googletest.git -b v1.17.0
  cd googletest
  ```

  This step gives you the latest stable source code including GoogleMock.


### 2. Build GoogleTest Standalone with CMake

- Create and enter a build directory inside the cloned repo:

  ```bash
  mkdir build
  cd build
  ```

- Generate native build scripts using CMake:

  ```bash
  cmake ..
  ```

  By default, this includes building GoogleMock along with GoogleTest.

- If you want to build only GoogleTest without GoogleMock, run instead:

  ```bash
  cmake .. -DBUILD_GMOCK=OFF
  ```

- Build the library:

  - On Linux/macOS:

    ```bash
    make
    ```

  - On Windows (if using Visual Studio):

    Open the generated `gtest.sln` solution file in Visual Studio and build the desired configuration.

  - On macOS (if using Xcode):

    Open the generated `.xcodeproj` file and build.

- (Optional) Install GoogleTest system-wide (requires admin privileges):

  ```bash
  sudo make install
  ```

  This installs headers and libraries to system directories like `/usr/local`.

### 3. Integrate GoogleTest Into Your Existing CMake Project

You have two main ways to integrate GoogleTest:

#### Option A: Use Installed GoogleTest

- Use CMake’s `find_package` to locate installed GoogleTest:

  ```cmake
  find_package(GTest CONFIG REQUIRED)
  target_link_libraries(your_test_target GTest::gtest_main)
  ```

- This requires that GoogleTest has been installed previously.

#### Option B: Build GoogleTest As Part of Your Project

- Add GoogleTest as a subdirectory in your project’s `CMakeLists.txt`:

  ```cmake
  include(FetchContent)
  FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
  )

  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Windows dynamic runtime compatibility

  FetchContent_MakeAvailable(googletest)

  add_executable(your_test_executable your_test.cpp)
  target_link_libraries(your_test_executable gtest_main)
  add_test(NAME your_test COMMAND your_test_executable)
  ```

- This ensures GoogleTest is built with the same compiler and linker settings as your project.
- Requires CMake 3.14 or later.

### 4. Configure Compiler and Linker Settings

- GoogleTest requires a C++17-compatible compiler.
- To enforce C++17, add to your `CMakeLists.txt`:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- For Windows users, the default Visual Studio projects link the C runtime dynamically, whereas GoogleTest links statically by default. To avoid runtime conflicts:

  ```cmake
  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
  ```

- This makes GoogleTest use the dynamic runtime and match your project settings.

### 5. (Optional) Customizing GoogleTest Build with Compiler Macros

- You can enable or disable features by defining macros on the compiler command line.
- Some useful macros:

  - `DGTEST_HAS_PTHREAD=1` or `0` to force pthread usage.
  - `DGTEST_CREATE_SHARED_LIBRARY=1` to build GoogleTest as a shared library.
  - `DGTEST_LINKED_AS_SHARED_LIBRARY=1` when linking tests against a shared GoogleTest.
  - `DGTEST_DONT_DEFINE_<MACRO>=1` avoids macro name clashes by renaming GoogleTest macros.

### 6. Verify Your Build

- After building, make sure your test executable links properly to GoogleTest.
- Run your tests with the command line:

  ```bash
  ./your_test_executable
  ```

- Successful runs will display test results.

---

## Examples & Use Cases

### Basic Standalone Build Example

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build && cd build
cmake ..
make
sudo make install
```

### Integrating GoogleTest in CMake with FetchContent

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME MyTests COMMAND my_tests)
```

### Windows Visual Studio Build

- Generate solution:

  ```powershell
  cmake .. -G "Visual Studio 16 2019"
  ```
- Open `googletest.sln` and build.

---

## Troubleshooting & Tips

### Common Issues

- _Compiler errors about C++ standard version_: Ensure your compiler supports C++17 and you have set `CMAKE_CXX_STANDARD 17`.

- _RuntimeLibrary mismatch errors on Windows_: Set `gtest_force_shared_crt ON` in CMake to align with your project's runtime linkage.

- _Link errors related to pthread_: Make sure your build system includes pthreads if on POSIX systems; CMake handles this automatically.

- _Macro name clashes_: Use `DGTEST_DONT_DEFINE_<MACRO>` flags to rename GoogleTest macros.

### Best Practices

- Prefer integrating GoogleTest via `FetchContent` or git submodules to keep your tests synchronized with your project.

- Use `gtest_main` to avoid writing your own `main()` function.

- Always run `RUN_ALL_TESTS()` once in your test executable and ensure the return value propagates as your program's exit code.

- Build GoogleTest with the same compiler and linker settings as your project to avoid subtle compatibility bugs.

### Performance Considerations

- Building GoogleTest as a static library is simpler and typically recommended.

- Use shared libraries only if needed, with correct compiler flags enabled.

### Alternative Approaches

- Bazel users should consult the `Integration with Build & CI Systems` guide for Bazel-specific instructions.

- Package managers can be used on some platforms but may lag behind latest GoogleTest versions.

---

## Next Steps & Related Content

- Explore the [Writing and Running Your First Test guide](/getting-started/project-setup-validation/first-test) to learn how to write your initial tests.

- Review [Configuring Your Project](/getting-started/project-setup-validation/configuring-project) for advanced project-specific integration.

- For build system deep dives, see [Integration with Build & CI Systems](/overview/audience-usecases-integration/integration-points) and [Build System Integration guide](/guides/integration-scenarios/build-system-integration).

- If you encounter problems, the [Troubleshooting Setup Issues](/getting-started/project-setup-validation/troubleshooting-setup) guide offers practical fixes.

---

## Summary Diagram: GoogleTest Build Flow

```mermaid
flowchart TD
  A[Clone googletest repository] --> B{Build options}
  B -->|Standalone build| C(CMake generate build files)
  B -->|Embed in project| D(Integrate via FetchContent or submodule)

  C --> E[Run build command]
  E --> F{Platform}
  F -->|Unix-like| G[Run make]
  F -->|Windows| H[Open Visual Studio solution & build]
  F -->|macOS| I[Open Xcode project & build]

  D --> J[Include googletest in your project]
  J --> K[Link test executable to gtest_main]

  G & H & I --> L[Install (optional)]
  L --> M[Run tests with your executable]
  K --> M

  M --> N[Review test results]
```

---