---
title: "Writing Your First Test"
description: "A step-by-step tutorial for creating and running your first unit test using GoogleTest. Demonstrates the core test structure, assertion macros, and execution flow, providing practical code samples and explanations to establish foundational testing skills."
---

# Writing Your First Test

A practical, step-by-step tutorial that guides you through creating and running your first unit test using GoogleTest. This page breaks down the core test structure, introduces essential assertion macros, and demonstrates how test execution flows. With real code examples and explanations, you’ll quickly build foundational testing skills necessary to confidently write your own tests.

---

## Workflow Overview

### What You'll Accomplish
- Write your first GoogleTest unit test function
- Learn how to use `TEST()` and basic assertion macros
- Compile and run your test program successfully

### Prerequisites
- GoogleTest installed and integrated into your build environment
- Basic familiarity with C++
- Your project set up to include `<gtest/gtest.h>` and link with GoogleTest libraries

### Expected Outcome
By the end of this tutorial, you will have a working test binary that runs one or more unit tests verifying simple conditions. You'll understand how tests are defined, organized, and executed, and how assertions indicate success or failure.

### Time Estimate
Approximately 10–15 minutes from scratch.

### Difficulty Level
Beginner — no prior unit testing experience necessary.

---

## Step-by-Step Instructions

<Steps>
<Step title="Include the GoogleTest Header">
Start your test source file by including the GoogleTest header file:

```cpp
#include <gtest/gtest.h>
```

This brings in all the macros and utilities needed to write tests.
</Step>
<Step title="Define a Simple Test Using TEST()">
Use the `TEST()` macro to define a test function. It requires two valid C++ identifier arguments:

- The **test suite name** (a group to organize related tests).
- The **test name** within this suite.

Example:

```cpp
TEST(SampleTestSuite, BasicAssertions) {
  EXPECT_EQ(1, 1);  // Check if 1 equals 1
  EXPECT_TRUE(true); // Check if true is true
}
```

- Each `TEST()` defines an independent function that runs when the test binary is executed.
- Both names should use camel-case or PascalCase without underscores, matching common C++ style guidelines.
</Step>
<Step title="Write Meaningful Assertions">
Inside the test body, use GoogleTest assertion macros to validate conditions.

Common macros:

- `EXPECT_EQ(val1, val2)`: Verifies `val1 == val2`.
- `ASSERT_NE(ptr, nullptr)`: Verifies a value is not null and aborts test on failure.
- `EXPECT_TRUE(condition)`: Checks if a condition evaluates to true.

Example with failure message:

```cpp
EXPECT_EQ(Factorial(3), 6) << "Factorial of 3 should be 6";
```

Use `EXPECT_*` for non-fatal failures (test continues) and `ASSERT_*` for fatal (test aborts immediately).
</Step>
<Step title="Define Multiple Related Tests">
Group logically related tests under the same test suite name.

Example: Testing a factorial function:

```cpp
// Test factorial of 0
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test factorial of positive numbers
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(4), 24);
}
```

Tests with the same test suite name appear grouped in test reports.
</Step>
<Step title="Compile Your Test Program">
Make sure your source file including tests is compiled and linked against the GoogleTest libraries (typically `gtest` and optionally `gtest_main`).

If using CMake, the target linking GoogleTest might look like:

```cmake
add_executable(MyTests my_tests.cc)
target_link_libraries(MyTests GTest::gtest_main)
```

If you link with `gtest_main`, you don’t have to write a `main()` function manually.
</Step>
<Step title="Run Your Tests">
Run the compiled test binary. It will automatically discover and execute all tests.

Example console output on success:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
``` 

If any assertions fail, GoogleTest prints detailed messages with file and line numbers.
</Step>
</Steps>

---

## Key Concepts Explained

### `TEST()` vs `TEST_F()`

- Use `TEST()` for simple, stateless tests.
- Use `TEST_F()` when tests share common setup/teardown using a test fixture class.

This guide focuses on `TEST()` for your first test.

### Assertions

- `EXPECT_*` macros log a failure but continue test execution.
- `ASSERT_*` macros fail immediately and abort the current test function.
- Prefer `EXPECT_*` when you want to gather multiple failures per test.
- For critical checks (e.g., pointers that must be valid before dereferencing), use `ASSERT_*`.

### Test Organization

- Test suites group related tests logically.
- Test suite names typically match the name of the class or functionality under test.
- Individual test names describe the tested condition or scenario clearly.

---

## Practical Examples

### Example 1: Minimal Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, Returns1ForZero) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, ReturnsCorrectFactorials) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

### Example 2: Adding Custom Failure Messages

```cpp
TEST(FactorialTest, FactorialIsPositive) {
  for (int i = 0; i < 10; ++i) {
    EXPECT_GT(Factorial(i), 0) << "Factorial of " << i << " is not positive.";
  }
}
```

---

## Troubleshooting & Tips

### Common Issues

- **Test Functions Not Executing:** Verify your test source files are compiled and linked into your test binary.
- **Linker Errors:** Ensure you link against the correct GoogleTest libraries (`gtest` or `gtest_main`).
- **Tests Not Found/Running:** Confirm you call `testing::InitGoogleTest()` in a custom `main()` or link with `gtest_main`.

### Best Practices

- Keep tests independent; avoid relying on execution order.
- Use descriptive test suite and test names to make failures easier to diagnose.
- Prefer `EXPECT_*` unless immediately stopping test execution is necessary.

### Performance Considerations

- For more complex tests requiring shared state, use test fixtures (`TEST_F()`).
- Consider test execution order and grouping when your project grows.

### Alternative Approaches

- To run tests repeatedly or filter by name, use GoogleTest command line flags such as `--gtest_filter` or `--gtest_repeat`.
- Use `ASSERT_NO_FATAL_FAILURE` to wrap code blocks you want to ensure did not produce fatal failures.

---

## Next Steps & Related Content

- Continue your learning by exploring the [GoogleTest Primer](https://google.github.io/googletest/primer.html) for deeper explanations.
- Learn how to use test fixtures in the [Test Fixtures](../primer.md#same-data-multiple-tests) section of the Primer.
- Investigate assertion macros and their variations in the [Assertions Reference](reference/assertions.md).
- Discover how to integrate GoogleTest into your project's build system via [Configuring Your Project](getting-started/project-setup-validation/configuring-project.md).
- If interested in mocking dependencies, check out [Getting Started with GoogleMock](guides/getting-started-guides/mocking-basics.md).

---

## Summary

Writing your first test with GoogleTest is straightforward by following these steps: include the header, define your tests using `TEST()`, add assertions to verify behavior, compile linking against GoogleTest, and run your tests. This page equips you with the essential workflow and practical examples to get started confidently.

<Info>
For complete API details, visit the [Testing Reference](reference/testing.md).
</Info>