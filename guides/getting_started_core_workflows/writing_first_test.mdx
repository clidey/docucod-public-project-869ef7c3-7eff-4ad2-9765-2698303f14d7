---
title: "Writing Your First Test"
description: "A guided example on implementing your initial unit test with GoogleTest, introducing test cases, the xUnit pattern, and the most important assertions. Includes advice for best practices in structuring test files and naming conventions."
---

# Writing Your First Test

Welcome to your first guided example of writing unit tests with GoogleTest, enhanced by GoogleMock. This guide is designed to walk you through the foundational concepts of creating your initial test cases using the xUnit testing pattern, demonstrate the essential assertions, and offer best practices on structuring and naming your test files effectively.

---

## Workflow Overview

### What You Will Learn
- How to implement your first unit test using GoogleTest.
- Introduction to test case structure following the **xUnit pattern**.
- How to use the most important assertions for validating code behavior.
- Best practices on organizing test files and adopting naming conventions to maintain clarity and manageability.

### Prerequisites
- A working GoogleTest and GoogleMock environment set up in your project.
- Basic understanding of C++ development and compilation.
- Familiarity with writing and running C++ code.

### Expected Outcome
By the end of this guide, you will have written and successfully run your initial unit test in GoogleTest, grasping how test cases are structured and what assertions to use. You will also understand how to organize your test files for clarity and future scalability.

### Time Estimate
15-30 minutes to complete this introductory tutorial.

### Difficulty Level
Beginner — aimed at new users starting with GoogleTest and GoogleMock.

---

## Step-by-Step Instructions

### Step 1: Include GoogleTest Headers
Begin your test file by including the necessary GoogleTest header to access the testing macros and assertions.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Test Case and Test
Use the `TEST` macro to define a test case and the associated test. The first parameter is the test case name (grouping related tests), and the second is the individual test name.

```cpp
TEST(MyFirstTestCase, BasicTest) {
  // Your test code goes here.
}
```

### Step 3: Write Assertions to Validate Behavior
Inside the test, write assertions such as `EXPECT_EQ`, `ASSERT_TRUE`, or other GoogleTest assertions to verify conditions.

Example: A simple check that 5 + 5 equals 10.

```cpp
EXPECT_EQ(5 + 5, 10);
```

### Step 4: Build and Run Your Test
- Compile your test source with GoogleTest and GoogleMock linked.
- Run the resulting binary.
- Verify that your test passes, confirming proper setup and test logic.

If your test fails, the framework will produce descriptive output showing the location and nature of the failure, helping you debug.

### Step 5: Organize Your Test Files
Follow these **best practices** to maintain clean and scalable test code:

- **File Naming:** Use clear and consistent naming, typically matching the source file but with a `_test.cc` suffix.
  - Example: `calculator.cc` → `calculator_test.cc`

- **Test Case Naming:** Group tests logically using related names. Keep test names descriptive.
  - Example: `CalculatorTests` containing tests for addition, subtraction, etc.

- **Single Responsibility:** Each test should verify one logical behavior to simplify debugging.

- **Use Setup Fixtures (If Needed):** For tests sharing setup/teardown, use `TEST_F` with fixture classes.

### Step 6: Introducing the xUnit Test Pattern
Understanding the xUnit pattern helps structure your tests clearly:

- Tests reside within test case groups.
- Each test operates independently.
- Assertions inside tests verify expected outcomes.
- Test runners execute all test suites and report results.

Example:

```cpp
TEST(MathTest, AdditionWorks) {
  EXPECT_EQ(2 + 2, 4);
}

TEST(MathTest, MultiplicationWorks) {
  EXPECT_EQ(3 * 3, 9);
}
```

This structure keeps tests modular and predictable.

### Step 7: Using the Most Important Assertions
GoogleTest offers a rich set of assertion macros. Here are some essential ones useful in your first tests:

| Assertion         | Description                             | Usage Example                      |
|-------------------|-------------------------------------|----------------------------------|
| `EXPECT_EQ(a, b)` | Expects `a == b` without aborting test if false. | `EXPECT_EQ(5, Calculate());`      |
| `ASSERT_TRUE(cond)`| Asserts condition `cond` is true, failing test immediately if not. | `ASSERT_TRUE(IsValid());`          |
| `EXPECT_NE(a, b)` | Expect `a != b`.                     | `EXPECT_NE(pointer, nullptr);`   |
| `EXPECT_TRUE(cond)`| Expect condition to be true.        | `EXPECT_TRUE(IsReady());`         |

For your initial tests, start with `EXPECT_EQ` and `ASSERT_TRUE` as they cover many validation scenarios.

---

## Examples & Code Samples

### Example 1: Basic GoogleTest

```cpp
#include <gtest/gtest.h>

// Function to test
int Add(int a, int b) {
    return a + b;
}

// First test case
TEST(AdditionTests, SimpleAddition) {
    EXPECT_EQ(Add(3, 4), 7);  // Simple equality assertion
    EXPECT_EQ(Add(-1, 5), 4);
    EXPECT_NE(Add(2, 2), 5);
}

int main(int argc, char** argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

### Example 2: Structuring Test Files

File: `math_utils.cc`
```cpp
int Multiply(int a, int b) {
  return a * b;
}
```

File: `math_utils_test.cc`
```cpp
#include <gtest/gtest.h>
#include "math_utils.cc"  // Include your implementation or header

TEST(MultiplyTests, SimpleCases) {
    EXPECT_EQ(Multiply(2, 3), 6);
    EXPECT_EQ(Multiply(-1, 5), -5);
}
```

Build and run these tests to validate your setup and confirm logic correctness.

---

## Troubleshooting & Tips

### Common Issues

- **Test Does Not Run or Is Not Detected:**
  - Confirm your test source files include `gtest/gtest.h`.
  - Make sure you call `RUN_ALL_TESTS()` in your `main` function.
  - Verify your build system compiles all test files and links against GoogleTest libraries.

- **Tests Fail Unexpectedly:**
  - Read failure messages provided by GoogleTest carefully — they show the condition and location.
  - Use `EXPECT_EQ`, `ASSERT_TRUE`, or other assertions correctly — mismatched types can cause subtle issues.

- **Multiple Failures or Unknown Errors:**
  - Ensure your test case and test names are unique to avoid conflicts.
  - Avoid calling GoogleMock expectations (`EXPECT_CALL`) after exercising the mock.

### Best Practices for Success

- Write small, focused tests.
- Use descriptive test and test case names.
- Set expectations *before* exercising mocks to avoid undefined behavior.
- Start with basic assertions and expand coverage incrementally.
- Organize your tests into logical groups.

---

## Next Steps & Related Content

- After writing your first test, explore **Running and Interpreting Test Results** to understand test outputs and troubleshooting ([link](/getting-started/first-use/running-tests)).
- Learn about **Mocking Dependencies with GoogleMock** to add powerful behavior-driven testing capabilities ([link](/guides/getting_started_core_workflows/mocking_dependencies)).
- Discover how to use **Parameterized and Typed Tests** for scalable test coverage ([link](/guides/real_world_patterns_advanced/parameterized_and_typed_tests)).
- Check out the **gMock Cheat Sheet** and **gMock Cookbook** for advanced mocking scenarios and best practices.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/googletest/docs/primer.md)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [GoogleTest and GoogleMock Integration Guide](https://google.github.io/googletest/integration.html)
- [GoogleMock Spec Builders Reference](https://google.github.io/googletest/reference/mocking.html)

---

## Summary
Writing your first test sets the foundation for harnessing the power of GoogleTest and GoogleMock. This guide has shown how to define test cases and tests, apply key assertions, and organize test source files according to best practices. Understanding the xUnit pattern and proper expectation setup prepares you to write robust and maintainable tests that resist brittleness and accelerate your development workflow.

<Check>
Remember: Always set `EXPECT_CALL` expectations before exercising mocks and keep each test focused on one behavior.
</Check>

---

Happy testing!

---

<Source url="https://github.com/google/googletest" />