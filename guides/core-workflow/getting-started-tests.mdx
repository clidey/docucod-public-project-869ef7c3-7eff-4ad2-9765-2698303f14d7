---
title: "Writing Your First Test"
description: "A step-by-step walkthrough to create, build, and run your initial unit test using GoogleTest. This guide covers basic test structure, test macros, and running the test suite to validate C++ code. New users will learn the essential setup and see immediate results."
---

# Writing Your First Test with GoogleTest

## Workflow Overview

### Task Description
This guide walks you through the complete journey of writing, building, and running your initial unit test using GoogleTest. You will learn how to structure a simple test case, use core test macros, and execute your test suite to verify your C++ code behaves as expected.

### Prerequisites
- A working GoogleTest installation and development environment as described in related setup documentation.
- Basic familiarity with C++ programming.
- A C++17-compliant compiler and a compatible build system configured to compile your tests with GoogleTest.

### Expected Outcome
By the end of this guide, you will have:
- Written a basic GoogleTest test case that checks correctness of a function.
- Built your test executable successfully.
- Run your test suite and interpreted the output.

### Time Estimate
Approximately 15 minutes for writing, building, and running your first test.

### Difficulty Level
Beginner – this guide assumes no prior experience with GoogleTest.

---

## Step-by-Step Instructions

### 1. Create a Test Source File
Begin by creating a `.cc` or `.cpp` file where your test code will live. Name it something like `my_first_test.cc`.

### 2. Include GoogleTest Headers
Add the necessary include directive for GoogleTest.

```cpp
#include <gtest/gtest.h>
```

This header provides all the macros and functions you need to write and run tests.

### 3. Write a Simple Test Case
Use the `TEST()` macro to define your test. The first argument is the test suite name, grouping related tests logically. The second argument is the test name.

Example:

```cpp
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

**Explanation:**
- `TEST(FactorialTest, HandlesZeroInput)` defines a test named `HandlesZeroInput` inside the `FactorialTest` suite.
- `EXPECT_EQ` asserts that the first argument equals the second. If not, the failure is reported but the test continues.

### 4. Write a `main()` to Run Tests (if needed)
If your build system does not link against `gtest_main` (which provides a default `main()`), you must write one:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes GoogleTest and runs all registered tests.

### 5. Build the Test Executable
Compile your test file linking against GoogleTest libraries.

**Example using g++ and pkg-config:**

```bash
g++ -std=c++17 my_first_test.cc -o my_first_test $(pkg-config --cflags --libs gtest) -pthread
```

Or, if using CMake, add the test file and link with `GTest::gtest_main` (see installation docs).

### 6. Run the Tests
Execute the test binary:

```bash
./my_first_test
```

You should see output similar to:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This confirms both tests passed successfully.

### 7. Interpreting Test Results
- `[       OK ]` means the test passed.
- `[  FAILED  ]` means the test failed, and failure messages will describe which assertions did not hold.

----

## Practical Tips & Best Practices

- Use descriptive names for test suites and test cases reflecting what you are testing.
- Use `EXPECT_*` assertions when you want the test to continue after failures; use `ASSERT_*` to abort the test early.
- Start with small, focused tests before combining into more complex scenarios.
- When tests grow complex, consider using test fixtures (see related docs).
- Always return the result of `RUN_ALL_TESTS()` from your `main` function.

## Common Pitfalls

- Forgetting to call `InitGoogleTest()` before running tests results in uninitialized test framework.
- Using the wrong macro: `TEST()` vs `TEST_F()` — the former is for simple tests, the latter for fixture-based tests.
- Omitting `return RUN_ALL_TESTS();` in `main()` causes build errors or incorrect exit codes.
- Naming tests or suites with underscores `_` can lead to deprecation warnings and confusion. Use CamelCase or PascalCase.

## Troubleshooting

<AccordionGroup title="Troubleshooting Your First Test">
<Accordion title="Test executable not built correctly">
- Verify GoogleTest is properly installed and your build system links against `gtest` or `gtest_main`.
- Use `pkg-config --cflags --libs gtest` to get compiler and linker flags on supported platforms.
- For CMake, confirm target link libraries include `GTest::gtest_main`.
</Accordion>
<Accordion title="Tests do not run or test discovery fails">
- Ensure you call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS();`.
- Check for any command line flags that may filter tests.
- Use `--gtest_list_tests` to see registered tests.
</Accordion>
<Accordion title="Assertions fail unexpectedly">
- Check that the expected and actual values are correctly provided to assertions.
- Add custom failure messages to clarify test intent.
</Accordion>
</AccordionGroup>

## Next Steps & Related Content

- Explore the [GoogleTest Primer](primer.md) for a broader introduction to testing concepts.
- Learn about Test Fixtures to manage shared setup for multiple tests.
- Read [Running Sample Tests](getting-started/first-test-experience/run-sample-tests.md) to understand built-in sample test binaries.
- When ready, proceed to [Writing Mocks](guides/core-workflow/writing-mocks.md) to isolate dependencies.
- Consult [Validating Your Setup](getting-started/first-test-experience/validate-setup.md) if tests do not behave as expected.

---

## Example Full Minimal Test Program

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run as described above.

---

## Summary

Creating your first test in GoogleTest is straightforward: include the header, define tests using the `TEST()` macro, build your executable linking properly, then run it to see results. This quick feedback loop strengthens code confidence and accelerates debugging.

Start simple, verify functionality, and progressively build your test suite with fixtures and parameterized tests as your project grows.

For more comprehensive information, consult related onboarding and API reference guides.

---

## Visual Workflow Diagram

```mermaid
flowchart TD
  A[Write Source File With Tests] --> B[Include <gtest/gtest.h>]
  B --> C[Define Tests with TEST() Macro]
  C --> D[Write main() or Link gtest_main]
  D --> E[Build Executable]
  E --> F[Run Test Executable]
  F -->|All Tests Passed| G[Success]
  F -->|Any Test Failed| H[Investigate Failures]
  H --> I[Refine Tests or Fix Code]
  I --> E
```
