---
title: "Managing Mock Strictness: Nice, Naggy, and Strict Mocks"
description: "Optimize your tests by correctly managing how mocks handle unexpected calls. Learn the differences between NiceMock, NaggyMock, and StrictMock, and when to use each pattern for stricter or more forgiving test scenarios."
---

# Managing Mock Strictness: Nice, Naggy, and Strict Mocks

Optimize your tests by correctly managing how mocks handle unexpected calls. Learn the differences between `NiceMock`, `NaggyMock`, and `StrictMock`, and when to use each pattern for stricter or more forgiving test scenarios.

---

## Overview

When writing tests using GoogleMock, managing how your mocks respond to calls that have no specific expectations (called *uninteresting calls*) is crucial. GoogleMock provides three built-in wrappers to control this strictness:

- **NiceMock**: Ignores uninteresting calls silently.
- **NaggyMock**: Warns when an uninteresting call occurs (current default).
- **StrictMock**: Treats uninteresting calls as errors, causing test failures.

Choosing the appropriate strictness level helps you create tests that are either forgiving or strict in verifying mock interactions, improving both test reliability and maintainability.

---

## When to Use Each Mock Strictness

| Mock Type  | Behavior on Uninteresting Calls                  | Use Case                                                                |
|------------|-------------------------------------------------|-------------------------------------------------------------------------|
| **NiceMock**   | Suppresses warnings and allows uninteresting calls silently | Preferable in most cases for maintainable tests that don't need to verify every call | 
| **NaggyMock**  | Prints a warning when uninteresting calls occur (default behavior) | Useful during test development or debugging to catch unexpected mock usage  |
| **StrictMock** | Fails the test when an uninteresting call is made | Use when you want to enforce _strict_ adherence to expectations, avoiding unverified mock calls |

---

## How Mock Strictness Works

Given a mock class (e.g., `MockFoo`), these templates can be used to wrap it:

- `NiceMock<MockFoo>`
- `NaggyMock<MockFoo>`
- `StrictMock<MockFoo>`

They are subclasses of the original mock class, so they can be used interchangeably wherever `MockFoo` is expected.

The wrappers internally modify the mock's behavior around uninteresting calls by registering with GoogleMock's internal system when created and deregistering when destroyed.

Currently, `MockFoo` behaves like a `NaggyMock<MockFoo>`. This default behavior may change to `NiceMock<MockFoo>` in the future to encourage maintainable tests.

---

## Quick Start: How to Use NiceMock, NaggyMock, and StrictMock

```cpp
#include <gmock/gmock.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

// Creating and using mocks with different strictness:
NiceMock<MockFoo> nice_foo;
NaggyMock<MockFoo> naggy_foo;
StrictMock<MockFoo> strict_foo;

EXPECT_CALL(nice_foo, DoSomething());  // normal expectation
nice_foo.DoSomething();                // OK

// Uninteresting calls:
nice_foo.DoSomething();  // allowed silently
naggy_foo.DoSomething(); // prints warning
strict_foo.DoSomething();// fails test
```

---

## Handling Non-Default Constructors

The strictness wrappers inherit constructors from the mock class.

You can construct wrapped mocks with any constructor arguments your mock class supports. For example:

```cpp
class MockBar {
 public:
  explicit MockBar(const std::string& data) { ... }
  MOCK_METHOD(int, Compute, (int), ());
};

NiceMock<MockBar> nice_bar("hello");
EXPECT_CALL(nice_bar, Compute(42));
```

They also support constructors with many parameters, forwarding all arguments perfectly.

---

## Important Usage Notes & Limitations

- **Only works with mock methods defined *directly* using `MOCK_METHOD` macros in the mock class.**
  Methods inherited from base classes may not be affected by the strictness wrapper, depending on compiler.

- **Nesting wrappers is not supported.** For example: `NiceMock<StrictMock<MockFoo>>` is disallowed.

- The destructor of your mock class **must be virtual** for proper behavior with these wrappers.

- The wrappers are zero-overhead with no extra padding, ensuring they behave like the original mock class with extra behavior.

---

## Typical User Workflow

<Steps>
<Step title="Decide on mock behavior">
Choose whether to ignore uninteresting calls (`NiceMock`), warn on them (`NaggyMock`), or fail on them (`StrictMock`).
</Step>
<Step title="Wrap your mock class">
Wrap your mock class with the chosen strictness wrapper. For example: `NiceMock<MockFoo> nice_foo;`
</Step>
<Step title="Use the wrapped mock in your tests">
Write expectations and exercise your code as usual.
</Step>
<Step title="Interpret failures or warnings">
If unexpected calls cause warnings or failures, adjust your expectations or mock strictness as needed.
</Step>
</Steps>

---

## Practical Tips

- **Prefer `NiceMock` for most tests** to make them less brittle and easier to maintain.

- Use `StrictMock` **only when you want to ensure every mock call is expected**, to catch unexpected interactions early.

- If you need **to debug unexpected calls during test development**, switch to `NaggyMock` to see warnings.

- Combine with `EXPECT_CALL(...).Times(0)` to explicitly ban a method call.

- Use catch-all expectations (`EXPECT_CALL(mock, Method(_)).Times(AnyNumber());`) to ignore all calls safely if needed.

---

## Example: Catching Unexpected Calls with StrictMock

```cpp
class MockTurtle {
 public:
  MOCK_METHOD(void, PenDown, (), ());
  MOCK_METHOD(void, PenUp, (), ());
};

TEST(TurtleTest, StrictMockCatchesUnexpectedCalls) {
  StrictMock<MockTurtle> turtle;

  EXPECT_CALL(turtle, PenDown()).Times(1);

  turtle.PenDown();  // OK

  // The following call leads to a test failure because PenUp() has no expectation
  turtle.PenUp();    // Test fails with "Uninteresting mock function call"
}
```

---

## Advanced Concepts

### How the wrappers work internally

Each wrapper inherits from an internal implementation class that:

- Registers the mock instance with GoogleMock on construction to set its uninteresting call behavior.
- Deregisters on destruction.

Concretely, these calls modify GoogleMock's internal table to allow, warn, or fail when uninteresting calls occur.

### Current behavior and future changes

- By default, mocks act as `NaggyMock`, issuing warnings on uninteresting calls.
- Future releases may make `NiceMock` the default to reduce noisy test outputs.

---

## Troubleshooting & Common Issues

<AccordionGroup title="Troubleshooting Mock Strictness">
<Accordion title="My uninteresting calls are failing unexpectedly">
Make sure you are using `NiceMock` or `NaggyMock` if you want to allow uninteresting calls. `StrictMock` causes uninteresting calls to fail.
</Accordion>
<Accordion title="I still get warnings using NiceMock">
Confirm that your mock methods are defined directly in your mock class using `MOCK_METHOD`. Inherited mock methods might still generate warnings.
</Accordion>
<Accordion title="I want to mix behaviors in nested wrappers, but it breaks">
Nesting `NiceMock`, `NaggyMock`, and `StrictMock` wrappers is not supported. Wrap only once.
</Accordion>
<Accordion title="My mock doesn't suppress warnings despite NiceMock">
Check that your mock's destructor is virtual. Without a virtual destructor, the strictness wrapper may not function properly.
</Accordion>
</AccordionGroup>

---

## Next Steps & Related Documentation

- Learn how to [Define and Use GoogleMock Expectations](../guides/mocking-advanced-testing/configuring-expectations-actions.md) to specify mock behaviors precisely.
- Explore [Understanding Uninteresting vs Unexpected Calls](../docs/gmock_cook_book.md#uninteresting-vs-unexpected) for deeper insight.
- Review the [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md) for quick reference on mocks, expectations, and actions.
- Consult the [Overview of GoogleTest and GoogleMock Architecture](../concepts/testing-foundations/architecture-overview.md) to understand the framework at a system level.

---

## References and Additional Resources

- GoogleMock Official Docs: https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy
- Example Tests Using These Wrappers: [gmock-nice-strict_test.cc](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc)
- Related Guides:
  - [Introduction to Mocking with GoogleMock](../guides/mocking-advanced-testing/intro-mocking.md)
  - [Configuring Mock Expectations and Actions](../guides/mocking-advanced-testing/configuring-expectations-actions.md)

---