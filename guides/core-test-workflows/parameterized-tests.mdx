---
title: "Parameterized and Typed Tests"
description: "Guide to using parameterized and type-parameterized tests for efficient, DRY testing of code with multiple inputs or types. Covers setup, macros, and real examples for building scalable tests."
---

# Parameterized and Typed Tests

GoogleTest offers powerful mechanisms called **parameterized tests** and **type-parameterized tests** that help you write concise, maintainable, and scalable tests when you want to validate your code with multiple inputs or types. This guide explains how to harness these features effectively â€” from setting up parameterized fixtures to using built-in test parameter generators, macros, and real-world examples.

---

## 1. Overview

### What This Guide Helps You Accomplish
- Write tests that run repeatedly over varying input values without duplicating code.
- Create test case templates that apply to multiple data types, ensuring your code works generically.

### Prerequisites
- Familiarity with basic GoogleTest test writing, including `TEST`, `TEST_F`, and test fixtures.
- Working GoogleTest environment with C++17 support.

### Expected Outcome
By following this guide, you will:
- Define value-parameterized tests to run your tests with multiple inputs.
- Define typed tests that apply the same test logic for multiple types.
- Define type-parameterized tests for reusable test patterns over types.
- Instantiate parameterized and typed tests using provided macros and parameter generators.

### Time Estimate
Setting up basic parameterized tests: 10-15 minutes
Defining typed or type-parameterized tests: 15-30 minutes

### Difficulty Level
Intermediate

---

## 2. Using Value-Parameterized Tests

Value-parameterized tests are great for testing your code behavior against different input values without duplicating test code.

### 2.1 Define a Parameterized Test Fixture
Your fixture should inherit from `::testing::TestWithParam<T>` where `T` is the type of your parameter.

Example:
```cpp
class MyStringTest : public ::testing::TestWithParam<const char*> {};
```

You can add SetUp, TearDown, and members as usual.

### 2.2 Write Parameterized Tests Using `TEST_P`
Write tests using `TEST_P` instead of `TEST_F`. Access the parameter using `GetParam()`.

Example:
```cpp
TEST_P(MyStringTest, LengthIsNonZero) {
  const char* str = GetParam();
  EXPECT_STRNE(str, "");
}
```

### 2.3 Instantiate Your Parameterized Tests Using Generators
Use `INSTANTIATE_TEST_SUITE_P` to supply the test parameter values.

Example with explicit values:
```cpp
INSTANTIATE_TEST_SUITE_P(NonEmptyStrings,
                         MyStringTest,
                         ::testing::Values("hello", "world", "foo"));
```

You can use other generators: `Range()`, `ValuesIn()`, `Combine()`, `Bool()`, or `ConvertGenerator()` for custom conversions.

### 2.4 Common Parameter Generators
- `Values(v1, v2, ..., vN)`: Enumerate explicit values.
- `ValuesIn(container)`: Values from a container or iterator range.
- `Range(start, end, [step])`: Yields values in a numeric range `[start, end)`.
- `Bool()`: Sequence `{false, true}`.
- `Combine(g1, g2, ..., gN)`: Cartesian product of multiple generators.

### 2.5 Customizing Test Names
The last argument to `INSTANTIATE_TEST_SUITE_P` can be a function or functor that generates test suffixes based on parameters.

Example:
```cpp
INSTANTIATE_TEST_SUITE_P(
  Named, MyStringTest,
  ::testing::Values("Alice", "Bob"),
  [](const ::testing::TestParamInfo<const char*> & info) {
    std::string name = info.param;
    std::replace_if(name.begin(), name.end(), [](char c) { return !std::isalnum(c); }, '_');
    return name;
  });
```

### 2.6 Practical Tips
- Use parameterized tests to cover multiple inputs with less code duplication.
- Use `Combine()` to test combinations of multiple parameters.
- Prefer `ValuesIn()` when you have existing containers of inputs.
- Custom test names improve readability and diagnostics.
- Always instantiate your parameterized tests to avoid runtime missing test failures.

### 2.7 Troubleshooting
- Ensure your parameter type is copyable.
- The parameter generator expression is evaluated at `InitGoogleTest()`, so dependencies must be ready before.
- Failure to instantiate causes GoogleTestVerification failures.

---

## 3. Using Typed Tests

Typed tests are used when you want to test the same functionality over a list of types.

### 3.1 Define a Typed Test Fixture Template
Make your fixture a class template inheriting from `::testing::Test`.

Example:
```cpp
template<typename T>
class MyContainerTest : public ::testing::Test {
 public:
  T container_;
};
```

### 3.2 Associate Types Using `TYPED_TEST_SUITE`
Define the type list and associate it:

```cpp
using MyTypes = ::testing::Types<std::vector<int>, std::list<int>>;
TYPED_TEST_SUITE(MyContainerTest, MyTypes);
```

### 3.3 Write Typed Tests Using `TYPED_TEST`
Write typed tests using `TYPED_TEST`. Use `TypeParam` to refer to the current type.

```cpp
TYPED_TEST(MyContainerTest, IsInitiallyEmpty) {
  EXPECT_TRUE(this->container_.empty());
}
```

### 3.4 Customizing Type Test Names
Provide a custom name generator class if needed:

```cpp
class TypeNameGenerator {
 public:
  template <typename T>
  static std::string GetName(int) {
    if constexpr (std::is_same_v<T, std::vector<int>>) return "Vector";
    if constexpr (std::is_same_v<T, std::list<int>>) return "List";
  }
};

TYPED_TEST_SUITE(MyContainerTest, MyTypes, TypeNameGenerator);
```

### 3.5 Tips
- Typed tests are great when the test logic is the same for a set of types.
- Use typed tests for containers, numeric types, or classes implementing the same interface.

---

## 4. Using Type-Parameterized Tests

Type-parameterized tests are similar to typed tests but allow for defining a generic test pattern that can be instantiated with different type lists separately.

### 4.1 Define a Type-Parameterized Test Fixture Template
```cpp
template <typename T>
class MyAbstractTest : public testing::Test {
public:
  void CommonTest();
};
```

### 4.2 Declare It as a Type-Parameterized Test Suite
```cpp
TYPED_TEST_SUITE_P(MyAbstractTest);
```

### 4.3 Define Typed Tests Using `TYPED_TEST_P`
```cpp
TYPED_TEST_P(MyAbstractTest, DoesCommonWork) {
  TypeParam obj;
  EXPECT_TRUE(obj.IsValid());
}
```

### 4.4 Register Your Tests
```cpp
REGISTER_TYPED_TEST_SUITE_P(MyAbstractTest, DoesCommonWork);
```

### 4.5 Instantiate With Desired Types
```cpp
using Implementations = ::testing::Types<MyClass1, MyClass2>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyInstances, MyAbstractTest, Implementations);
```

### 4.6 Benefits
- Can define test patterns without knowing types upfront.
- Allows multiple instantiations with different type sets.
- Helps enforce interface or concept conformance.

---

## 5. Illustrative Examples

### 5.1 Simple Value-Parameterized Test
```cpp
class FactorialTest : public ::testing::TestWithParam<int> {};

int Factorial(int n);

TEST_P(FactorialTest, HandlesPositiveInput) {
  int n = GetParam();
  EXPECT_GE(Factorial(n), 1);
}

INSTANTIATE_TEST_SUITE_P(Values, FactorialTest, ::testing::Values(1, 2, 3, 10));
```

### 5.2 Typed Test for Containers
```cpp
template <typename T>
class ContainerTest : public ::testing::Test {
 public:
  T container_;
};

TYPED_TEST_SUITE(ContainerTest, ::testing::Types<std::vector<int>, std::list<int>>);

TYPED_TEST(ContainerTest, IsEmptyInitially) {
  EXPECT_TRUE(this->container_.empty());
}
```

### 5.3 Type-Parameterized Test Pattern
```cpp
template <typename T>
class StackTest : public ::testing::Test {};

TYPED_TEST_SUITE_P(StackTest);

TYPED_TEST_P(StackTest, PushAndPop) {
  TypeParam stack;
  stack.Push(5);
  EXPECT_EQ(stack.Pop(), 5);
}

REGISTER_TYPED_TEST_SUITE_P(StackTest, PushAndPop);

using StackImplementations = ::testing::Types<MyStack, YourStack>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyStacks, StackTest, StackImplementations);
```

---

## 6. Summary

Mastering parameterized and typed tests allows you to write easily maintainable, scalable tests with minimal duplication. They empower you to test multiple values or types under consistent logic, enforcing wider code correctness with less test code.

---

## 7. Additional Resources

- [Value-Parameterized Tests Overview (Advanced Guide)](../advanced.md#value-parameterized-tests)
- [Typed Tests and Type-Parameterized Tests (Advanced Guide)](../advanced.md#typed-tests)
- [Testing Reference - Value-Parameterized Tests](../reference/testing.md#TEST_P)
- [Sample Typed Test Examples](https://github.com/google/googletest/blob/main/googletest/samples/sample6_unittest.cc)
- [Sample Parameterized Test Examples](https://github.com/google/googletest/blob/main/googletest/samples/sample7_unittest.cc)

---

## Appendix: Common Macros

| Macro                                | Description                                |
| ------------------------------------ | ------------------------------------------ |
| `TEST_P(TestFixture, TestName)`      | Defines a parameterized test.              |
| `INSTANTIATE_TEST_SUITE_P(Name, Suite, Generator)` | Instantiates parameterized tests.           |
| `TYPED_TEST_SUITE(Fixture, Types)`   | Defines typed test suite for types.        |
| `TYPED_TEST(Fixture, TestName)`      | Defines a typed test.                       |
| `TYPED_TEST_SUITE_P(Fixture)`        | Declares a type-parameterized test suite.  |
| `TYPED_TEST_P(Fixture, TestName)`    | Defines a type-parameterized test.          |
| `REGISTER_TYPED_TEST_SUITE_P(Fixture, Tests...)` | Registers tests for type-parameterized suite. |
| `INSTANTIATE_TYPED_TEST_SUITE_P(Name, Suite, Types)` | Instantiates type-parameterized tests.       |
