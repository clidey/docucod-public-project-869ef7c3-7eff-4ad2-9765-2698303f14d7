---
title: "Breaking Changes & Deprecations"
description: "A focused guide to features or APIs that have been changed or deprecated, with specific callouts to affected areas and recommendations for mitigation. Essential reading before any major upgrade."
---

# Breaking Changes & Deprecations

This page details the features and APIs within GoogleTest that have undergone changes or have been deprecated. It serves as a crucial reference to help you identify impacts to your tests before upgrading to a newer version. Understanding these changes allows you to prepare by updating your code and adopting recommended practices, ensuring a smooth transition during upgrades.

---

## Overview

GoogleTest prioritizes stability and backward compatibility. However, when evolving the framework to improve usability, maintainability, or to conform to modern C++ standards, some features may change or be deprecated. This document highlights such changes with concrete guidance and mitigation recommendations.

Before performing a major upgrade, reviewing this document is essential to avoid surprises and to keep your test suite reliable and effective.

---

## Breaking Changes

### Test Suite and Test Name Restrictions

Test suite names and test names should avoid using underscores (`_`). GoogleTest internally uses underscores in generated class names which can lead to name collisions or reserved identifier conflicts.

**Why this matters:**

- Names starting or ending with underscores can produce generated code that violates C++ reserved identifier rules.
- Underscores in the middle of names might result in different test names generating identical internal class names.

**Migration Recommendation:**

- Avoid using underscores in `TEST` and `TEST_F` suite or test names.
- Use camel case or other delimiters if separation is needed.

### Fatal Assertions Usage Restrictions

Fatal assertions (`ASSERT_*`, `FAIL()`) can only be used in void-returning functions. Using them in functions with other return types will cause compilation errors such as "void value not ignored as it ought to be."

**Mitigation:**

- Use `EXPECT_*` variants for non-void functions where failure should not abort.
- For fatal checks, move the logic into `void` helper functions or test fixtures’ `SetUp`/`TearDown` methods.

### Death Test Naming Convention

Test suites containing death tests (`EXPECT_DEATH`, `ASSERT_DEATH`) should have names ending in `DeathTest`. This convention helps GoogleTest enforce ordering and prevent test interleaving issues caused by the way death tests spawn subprocesses.

**Tip:** If a fixture is shared by normal and death tests, alias it with a `using` declaration:

```cpp
using FooDeathTest = FooTest;
```

Then write death tests with the alias to clearly separate their execution context.

### Default Constructor Requirement for Test Fixtures

GoogleTest requires test fixture classes used with `TEST_F` to have a default constructor. Explicitly declaring a non-default constructor without providing a default one will cause errors.

**Resolution:**

- Define an explicit default constructor if you provide other constructors.

### Static Const Data Member Definitions

Static const integral members declared inside a fixture class must also be defined outside the class body to avoid linker errors.

```cpp
// Header
static const int kValue = 100;

// Source
const int FixtureClass::kValue;
```

If declared `constexpr`, separate definition is not needed.

### Use of `NULL` in Assertions

For pointer comparisons, prefer `nullptr` over `NULL` with assertion macros to avoid type-related pitfalls. Usage of `EXPECT_EQ(NULL, ptr)` is supported, but `EXPECT_NE(NULL, ptr)` is not — use `EXPECT_TRUE(ptr != nullptr)` instead or prefer `nullptr` consistently.

### Changes in Assertion Ordering

In older versions, the expected value was the first argument in some macros (e.g., `EXPECT_EQ(expected, actual)`). While still accepted, the recommended style is to write `EXPECT_EQ(actual, expected)` to align with failure message semantics.

### Stream Redirection Defaults

GoogleTest outputs logs to stderr while test results go to stdout, enabling easy separation of outputs. Be aware of this when capturing logs or test output during upgrades.

---

## Deprecations

### Deprecated Macros and API

Whenever a macro or API is deprecated, it will be clearly marked in the docs with guidance on preferred replacements. Deprecated items are supported for multiple versions before removal.

### Transition to Matchers

GoogleTest encourages the use of matcher-based assertions (`EXPECT_THAT`, `ASSERT_THAT`) over traditional predicate macros like `EXPECT_EQ`, `EXPECT_NE` for improved composability and expressiveness. This trend will eventually deprecate older macros in favor of matcher-based ones.

---

## Migration & Mitigation Recommendations

- Replace underscores in test suite and test names to avoid future breakage.
- When upgrading major versions, validate test fixture constructors comply with default-constructible requirements.
- Transition pointer comparisons from `NULL` to `nullptr`.
- Restructure assertion usages that violate fatal assertion placement rules.
- Adopt matcher assertions to leverage new powerful expressive features.
- Validate death test suites follow naming conventions to ensure proper execution order.

---

## Common Pitfalls & Troubleshooting

- **Compiler Errors About Void Return**: Check that fatal assertions are only inside void-returning functions.
- **Linker Errors with Static Const Members**: Confirm that static const integral members are defined outside the class when not `constexpr`.
- **Name Collisions in Tests**: Avoid underscores in test names to prevent unintended class name duplication.
- **Death Test Failures**: Confirm the test suite name ends with `DeathTest` to ensure correct ordering.

---

## Additional Resources

- [GoogleTest FAQ](faq.md) — for detailed explanations on common usage scenarios and errors.
- [Assertions Reference](reference/assertions.md) — overview of assertion macros and recommended usage.
- [Mocking Reference](reference/mocking.md) — for guidance on mock object usage and behaviors.
- [Advanced GoogleTest Topics](advanced.md) — covers assertion placement, test fixture best practices, and advanced usage.
- [Migration & Upgrade Guide](changelog/breaking-changes-guidance/migration-upgrade-guide) — specific step-by-step instructions for major version upgrades.

---

_By thoroughly reviewing this page before upgrading, you ensure your tests remain stable and fully leverage the latest improvements in GoogleTest._