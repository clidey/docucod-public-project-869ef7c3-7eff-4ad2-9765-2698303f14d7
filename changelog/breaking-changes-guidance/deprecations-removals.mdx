---
title: "Deprecations & Removals"
description: "A current list of features, APIs, or behaviors marked for deprecation or recently removed, with migration tips and advance notice. Ensures that users are able to plan refactors with minimal disruption."
---

# Deprecations & Removals

This page provides a comprehensive and up-to-date list of features, APIs, and behaviors within GoogleMock that have been officially marked for deprecation or have been recently removed. It is tailored to help you plan smooth migrations by understanding what is changing, when support for features will end, and how to adapt your existing test code with minimal disruption.

---

## Understanding Deprecated and Removed Functionality

Over time, GoogleMock evolves to improve reliability, maintainability, and developer experience. In this process, certain older features may be deprecated—meaning they remain functional but are discouraged and flagged for future removal. Others are removed altogether after a deprecation period.

This page focuses strictly on such elements to ensure you can:

- Identify deprecated matchers, macros, behaviors, or utilities.
- Understand the timeline and urgency associated with these changes.
- Find detailed migration tips and alternative usage patterns.

**Note:** This page concentrates exclusively on deprecated or removed aspects of GoogleMock's API and behaviors, enabling you to maintain clean, future-proof test suites.

---

## Notable Deprecations and Removals

### 1. Deprecation of Old-Style `MOCK_METHODn` Macros

Previously, mocking methods in GoogleMock required using a family of macros like `MOCK_METHOD1`, `MOCK_CONST_METHOD1`, and their templated or calltype variations. These have been deprecated in favor of the more flexible and robust `MOCK_METHOD` macro.

**Key points:**

- The new `MOCK_METHOD` macro supports modifiers such as `const`, `override`, and `noexcept` more naturally.
- Legacy macros still work temporarily but will be removed in future releases.
- Migration requires rewriting all mock method macros to use the new syntax:

```cpp
// Old style:
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD1(Bar, int(const std::string&));

// New style:
MOCK_METHOD(bool, Foo, (int));
MOCK_METHOD(int, Bar, (const std::string&), (const));
```

This modernization enhances type safety and simplifies method mocking across virtual and non-virtual functions.

### 2. Changes in Strictness Wrappers Behavior (`NiceMock`, `NaggyMock`, `StrictMock`)

The handling of uninteresting and unexpected calls within the wrappers `NiceMock`, `NaggyMock`, and `StrictMock` has been refined:

- `NaggyMock` remains the default and continues to print warnings on unexpected calls.

- `NiceMock` suppresses warnings on uninteresting calls to aid test readability.

- `StrictMock` escalates uninteresting call warnings to errors, enforcing strict verification.

**Important:**

- These wrappers only impact mock methods implemented using the new `MOCK_METHOD` macro directly in the mock class. Mock methods declared in base classes may not be affected as expected due to compiler limitations.

- Nesting wrappers (e.g., `NiceMock<StrictMock<T>>`) is unsupported and may lead to undefined behavior.

- Virtual destructors are recommended to ensure proper operation.

Migration tip: Review any usage of `NiceMock`, `StrictMock`, or `NaggyMock` to align with these updated behaviors and the new mock method declarations.

### 3. Modernization of Flag Parsing and Initialization APIs

GoogleMock's initialization functions such as `InitGoogleMock` have updated flag parsing logic, especially regarding command-line flags like `--gmock_verbose`:

- Flags unknown to GoogleMock are preserved in `argv` to avoid interfering with other components.

- GoogleMock flags are removed from `argv` after parsing.

- Unicode and embedded platform support have been expanded with additional overloads of initialization APIs.

If you previously relied on older flag parsing behavior, you should test your initialization flow with updated usage to ensure no regressions.

### 4. Matchers and Matcher Macros

The family of `MATCHER`, `MATCHER_P`, and their multi-parameter variations have been streamlined:

- Usage of these macros is now encouraged for creating custom matchers instead of implementing matcher interfaces manually.

- Descriptions can be provided with dynamic messages using the `negation` parameter to improve assertion outputs.

- Parameterized matchers now fully support up to ten parameters.

- The code now encourages usage of polymorphic matchers to cover various argument types flexibly.

Migration tip: Prefer `MATCHER*` macros over legacy custom matcher implementations when extending functionality.

---

## Migration and Compatibility Guidance

### Transitioning from Old Mock Macros

1. Identify and replace all `MOCK_METHODn` macros with the modern `MOCK_METHOD` macro.
2. For const methods, add the `(const)` specifier as the fourth macro parameter.
3. Add `override`, `noexcept`, or other qualifiers inside the specifier list as needed.
4. Use parentheses around return or argument types containing commas to avoid parsing errors, or create type aliases.

### Adjusting Strictness Wrapper Usage

- Audit any mocks wrapped with `NiceMock` or `StrictMock` and ensure all mock methods use `MOCK_METHOD`.
- Avoid nesting these wrappers.
- Verify that destructors are virtual for base mock classes to prevent unexpected behaviors.

### Updating Initialization Code

- Prefer using `InitGoogleMock(int* argc, char** argv)` or the Unicode variant.
- Validate that command-line flags are correctly managed, particularly when integrating with other systems parsing flags.

---

## Troubleshooting Common Deprecation Issues

If you encounter compilation errors or warnings related to deprecated macros:

- Confirm you are using the new `MOCK_METHOD` macro with the correct syntax.
- Check that qualifiers like `override` and `const` are included in the macro's fourth parameter list.
- Wrap argument or return types containing commas with parentheses or use type aliases.

If warnings or errors appear related to uninteresting calls:

- Consider switching to `NiceMock` or `StrictMock` depending on the desired behavior.
- Review your `EXPECT_CALL` and `ON_CALL` statements for comprehensive coverage and presence of catch-all expectations if needed.

For flag parsing or initialization anomalies:

- Verify flags passed to `InitGoogleMock` match expected formats.
- Use the verbosity flag `--gmock_verbose` to diagnose mock behavior.

---

## Summary

The deprecations and removals outlined here are part of GoogleMock’s ongoing efforts to improve the user experience and maintainability while encouraging best practices. By migrating away from legacy mocking macros, adjusting to updated strictness semantics, and adopting refined initialization procedures, users ensure their tests remain robust, clear, and future-compatible.

For detailed migration strategies, samples, and troubleshooting, users should consult the related GoogleMock guides.

---

## Helpful Links and References

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Recipes and best practices for mocking.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — API reference including `MOCK_METHOD` usage.
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Beginner-friendly tutorials.
- [Breaking Changes & Upgrade Guidance](https://github.com/google/googletest/blob/main/docs/breaking_changes.md) — Additional important changes that require user action.
- Navigation in documentation:
  - `/changelog/breaking-changes-guidance/deprecations-removals` (this page)
  - `/changelog/breaking-changes-guidance/breaking-changes`
  - `/changelog/breaking-changes-guidance/upgrade-instructions`

---

For any questions or clarifications, the [Support & Help FAQ](https://google.github.io/googletest/faq/community-resources/support-help.html) is recommended. Users are encouraged to keep their mock definitions and usage patterns up to date for continued compatibility with new GoogleMock versions.

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googlemock/include/gmock/gmock-matchers.h", "range": "1-988"},{"path": "googlemock/include/gmock/gmock.h", "range": "1-78"},{"path": "googlemock/test/gmock_test.cc", "range": "1-135"}]} />