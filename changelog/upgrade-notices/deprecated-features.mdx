---
title: "Deprecation Notices"
description: "Lists deprecated features and APIs, gives alternatives or timelines for removal, and helps users keep their test code modern and maintainable."
---

# Deprecation Notices

Keeping your test code up-to-date and maintainable means staying current with deprecated features and APIs in GoogleTest and GoogleMock. This page details deprecated constructs within the framework, recommends alternatives, and provides timelines or guidelines for removal. This guidance helps you modernize your tests with confidence and avoid future breakages.

---

## 1. Deprecated Mock Method Macros

GoogleMock previously supported a family of macros named `MOCK_METHODn`, where `n` is the number of arguments. These have been superseded by the more flexible and robust `MOCK_METHOD` macro introduced since 2018.

- **Deprecated:** `MOCK_METHOD0`, `MOCK_METHOD1` ... `MOCK_CONST_METHODn`, `MOCK_METHODn_T`, and their variants.
- **Preferred:** `MOCK_METHOD(ReturnType, MethodName, (Args...), (Specs...))`.

### Migration Guidance

Replace usages of the old-style macros with `MOCK_METHOD` by rearranging the method signature components as shown:

```cpp
// Old Style
MOCK_METHOD1(Foo, bool(int x));

// New Style
MOCK_METHOD(bool, Foo, (int x));
```

For `const` methods, add `(const)` specifier:

```cpp
MOCK_METHOD(bool, Foo, (int x), (const));
```

If overriding virtual `noexcept` or Windows-specific calling conventions, also provide appropriate specifiers.

---

## 2. Deprecated Mock Strictness Macros

GoogleMock provides `NiceMock`, `NaggyMock`, and `StrictMock` wrapper templates to control the behavior for uninteresting mock calls.

- The `NaggyMock` mode, which printed warnings on uninteresting calls, has been deprecated as a separate explicit mode.

### Current Practice

- Use `NiceMock` to suppress warnings on uninteresting calls.
- Use `StrictMock` to treat uninteresting calls as errors.
- By default, mock objects behave like `NaggyMock` but explicit use of `NaggyMock` is discouraged.

---

## 3. Deprecated Flag Macros in `gmock-port.h`

Legacy macros for declaring and defining flags such as `GMOCK_DECLARE_bool_` or `GMOCK_DEFINE_bool_` without integration with modern Abseil flags are deprecated.

- The `custom/gmock-port.h` allows injection of custom flag definitions but the older internal macros are superseded by Abseil flag support when available.

### Alternative

- Prefer using the Abseil flag APIs where possible (`ABSL_FLAG`, `ABSL_DECLARE_FLAG`, `absl::GetFlag`, `absl::SetFlag`).

---

## 4. Deprecated gMock Macro Variants and Syntax

Some older macros and patterns within GoogleMock have been deprecated to encourage clearer, modern mock definitions.

- Using `MOCK_METHOD` in sections other than `public` is deprecated because the framework relies on `public` access for accessibility in expectations and actions.
- Declaring mock methods in the private or protected section is discouraged as it complicates test code.

### Best Practice

Always place `MOCK_METHOD` declarations in the `public:` section of your mock class, irrespective of original method access.

---

## 5. Deprecated Usage of Uninteresting Call Warnings

GoogleMock used to print warnings for any uninteresting mock method call by default.

- This warning is deprecated as the default behavior in favor of making it controllable via `NiceMock` and `StrictMock`.
- Suppressing warnings by adding unnecessary `EXPECT_CALL` statements is discouraged as it leads to fragile and noisy tests.

### Recommendations

- Use `NiceMock` when you want to suppress uninteresting call warnings cleanly.
- Use explicit expectations to verify behavior you care about, but don't over-specify.

---

## 6. Deprecated Delegation Patterns

Some older recipes for delegating calls to fakes or real objects have been superseded by more streamlined techniques using `ON_CALL` with lambdas and modern C++ facilities.

### Recommended Approach

- Use `ON_CALL(mock, Method(...)).WillByDefault(...)` with lambdas or callable objects.
- Avoid duplicating fake behavior inside mock classes.

---

## 7. Timeline for Removal

Features deprecated more than 2 years ago or replaced by improved APIs are planned for removal in upcoming major releases.

- Plan your migrations based on your version usage.
- Follow the [Breaking Changes & Migrations guide](/changelog/upgrade-notices/breaking-changes) for detailed upgrade paths.

---

## 8. Additional Deprecated Items

- Old-style `MOCK_FUNCTION` macros (before `MOCK_METHODn`) are no longer supported.
- Deprecated internal GoogleTest or GoogleMock utilities may be removed and replaced by standard libraries.

---

## Summary

Staying aware of deprecated features ensures your tests remain maintainable and compatible with future GoogleTest and GoogleMock versions. The latest macros and patterns provide better expressiveness, clearer semantics, and improved tool support.

For specifics, consult the official upgrade documentation and consider updating your build and test configurations accordingly.

---

## Links and References

- [Mocking Reference](reference/mocking.md)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [Breaking Changes & Migrations](changelog/upgrade-notices/breaking-changes.md)
- [Mock Strictness and Behavior](api-reference/mocking-framework/mock-strictness.md)
- [Flags and Options](api-reference/configuration-advanced/flags-and-options.md)

Cast your testing strategy forward by embracing the latest practices and APIs GoogleTest and GoogleMock have to offer.
