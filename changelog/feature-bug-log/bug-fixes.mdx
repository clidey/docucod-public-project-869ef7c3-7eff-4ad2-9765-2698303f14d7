---
title: "Bug Fixes & Minor Changes"
description: "List of bugs addressed, stability and compatibility improvements, minor behavioral adjustments, and small-scale changes. Designed to assist users who need to track specific fixes, especially for regression analysis and QA planning."
---

# Bug Fixes & Minor Changes

This page chronicles the recent bug fixes, minor behavioral adjustments, stability improvements, and small-scale changes introduced into GoogleTest and GoogleMock. It is designed specifically for users who need to track precise fixes, particularly for regression analysis, quality assurance planning, or ensuring compatibility with existing test suites.

---

## 1. Introduction

In software development, thorough tracking of bug fixes and minor changes is essential for maintaining stability and compatibility. This page helps you quickly understand the scope and impact of recent changes that do not introduce new features but improve reliability and correct behavior in GoogleTest and GoogleMock. This documentation focuses exclusively on fixes and subtle adjustments rather than new APIs or major enhancements.

---

## 2. Scope of Bug Fixes & Minor Changes

- **Bug Fixes**: Rectifications of incorrect behaviors, crashes, memory leaks, or assertion mishandlings reported by users.
- **Stability Improvements**: Enhancements that improve test reliability, reduce flaky tests, or handle edge cases gracefully.
- **Compatibility Adjustments**: Changes ensuring better compatibility across different compilers, platforms, and C++ standards.
- **Minor Behavioral Tweaks**: Modifications that slightly alter default behaviors to align better with user expectations or standard compliance, without breaking existing tests.

These changes are targeted to be backward compatible and do not break existing APIs or require migration steps.

---

## 3. Key Bug Fixes and Improvements

### 3.1 Handling of Const in Mock Methods

- Resolved compiler warnings related to `const` qualifiers in method parameters, particularly on MSVC.
- Recommendation: Omit top-level `const` qualifiers in parameters in mock method declarations to avoid spurious warnings.

### 3.2 Uninteresting Calls and Strictness

- Improved accuracy in distinguishing between **uninteresting** and **unexpected** calls to mocks.
- Fixed scenarios where uninteresting calls incorrectly produced warnings even when `ON_CALL` had default actions.
- Better integration of `NiceMock`, `NaggyMock` (default), and `StrictMock` to respect expectations and user intentions.

### 3.3 Support for Move-Only Types in Mocks

- Enhanced support for mocking methods accepting or returning move-only types like `std::unique_ptr`.
- Simplified usage patterns to allow return of freshly created move-only objects via lambdas.
- Documented workaround patterns for legacy compilers where needed.

### 3.4 Matchers and Actions

- Fixed edge cases in matcher composition, such as safe casting and matcher reuse, ensuring stable and clear error messages.
- Adjusted `WillOnce`, `WillRepeatedly`, and `DoAll` semantics for actions with side effects to be more intuitive and reliable.

### 3.5 Thread Safety Enhancements

- Reinforced thread-safe behavior of mocks, ensuring actions execute in the thread invoking the mock method.
- Improved internal mutex and thread-local handling to reduce race conditions during heavy multi-threaded tests.

### 3.6 Test Event Listeners and Reporting

- Fixed bugs causing duplicate or missing failure messages in custom event listeners.
- Enhanced trace logging in failure cases, especially when using `SCOPED_TRACE` for better diagnostics.

### 3.7 Death Test Improvements

- Improved robustness and determinism in death test execution across platforms.
- Addressed leaks and false positives caused by mock object lifetime during death tests.

### 3.8 Compilation Performance

- Minor refactoring in mock class constructor/destructor code generation to speed up compilation.
- Added best practice notes on moving mock implementation code to source files to reduce build times.

---

## 4. Practical Tips and Recommendations

- **Set Expectations Before Use**: Always call `EXPECT_CALL()` before using mocks to avoid undefined behavior.
- **Use `NiceMock` to Suppress Warnings**: When uninteresting calls are acceptable, wrap your mock in `NiceMock` to reduce console noise.
- **Avoid Overlapping Expectations**: Place specific expectations after more general catch-alls to prevent shadowing.
- **Use `RetiresOnSaturation()`**: Mark expectations expected to be called limited times so they retire and avoid sticky upper bound failures.
- **Leverage `ON_CALL()` for Defaults**: Provide default behaviors to minimize the need for many `EXPECT_CALL` specifications.
- **Use Lambdas for Move-Only Returns**: When mocking methods returning move-only types, prefer lambdas for generating unique objects per call.

---

## 5. Troubleshooting Common Issues Fixed

- Unexpected warnings about uninteresting calls despite providing `ON_CALL` default behavior.
- Compiler warnings or errors related to misuse of `const` in mock method declarations.
- Failing tests due to mismatch of mock expectations order and sticky expectations.
- Death tests hanging or failing due to mock object leak detection.
- Flaky tests caused by multi-threaded mocks with improper synchronization.

For detailed troubleshooting, please see the [Troubleshooting Common Issues](https://github.com/google/googletest/blob/main/docs/starting/validation-troubleshooting/troubleshooting.md) guide.

---

## 6. Version Compatibility

These fixes and tweaks apply across recent versions of GoogleTest and GoogleMock compatible with C++17 and later. No breaking changes are introduced; hence upgrades to these patches do not require migration.

---

## 7. Useful References

- [gMock Cookbook](../gmock_cook_book.md) — for practical recipes on mocking and expectations
- [Mocking Reference](docs/reference/mocking.md) — comprehensive API reference on mocks and expectations
- [gMock Strictness and Behavioral Modes](api-reference/gmock-mocking-apis/mock-strictness-and-behavior.md) — understand controlling mock feedback verbosity
- [Troubleshooting Common Issues](getting-started/validation-troubleshooting/troubleshooting.md) — diagnose and fix test failures
- [Setting Expectations and Call Control](api-reference/gmock-mocking-apis/expectations-and-control.md) — for fine-grained call ordering and behavior control

---

## 8. Conclusion

This documentation helps you stay informed about the continuous improvements on the reliability and stability of GoogleTest and GoogleMock. For smooth testing experiences, we recommend staying current with these bug fixes and minor behavioral adjustments. Always consult the related references for guidance on composing effective mock-based tests and troubleshooting.

---

# Additional Resources

For a broader understanding of GoogleTest and GoogleMock usage, please also see:

- GoogleTest Primer (quick introduction): [primer.md](primer.md)
- GoogleMock for Dummies (mock usage): [gmock_for_dummies.md](docs/gmock_for_dummies.md)
- Advanced Mocking Patterns: [advanced-mocking-patterns.mdx](guides/core-testing-workflows/advanced-mocking-patterns.mdx)
- Parameterized and Typed Tests Guide: [parameterized-type-tests.mdx](guides/core-testing-workflows/parameterized-type-tests.mdx)

---

# Navigation

This page belongs to the **Changelog > Features, Improvements, and Fixes** section. For related pages, see:

- [Version Summary and Highlights](version-summary.md)
- [Detailed Release Notes](detailed-release-notes.md)
- [Breaking Changes & Deprecations](breaking-changes.md)
- [Upgrade Guides](upgrade-guides.md)

---

For any questions or to report issues, visit the official GitHub repository: https://github.com/google/googletest

---

<Note>
This documentation captures bug fixes and minor changes relevant at the time of release. Always refer to the official release notes and GitHub changelogs for detailed version-specific information.
</Note>