---
title: "Breaking Changes & Major Migrations"
description: "Comprehensive, version-by-version breakdowns of all backward-incompatible changes, major migrations, and required actions for affected users. This page helps teams prepare for or react to disruptive changes—reducing friction and troubleshooting during upgrade cycles."
---

# Breaking Changes & Major Migrations

Comprehensive, version-by-version breakdowns of all backward-incompatible changes, major migrations, and required actions for affected users. This page helps teams prepare for or react to disruptive changes—reducing friction and troubleshooting during upgrade cycles.

---

## Overview

GoogleTest and GoogleMock evolve to improve testing experiences, performance, and platform support. Occasionally, updates introduce breaking changes or require migration steps. This page documents these major changes across versions to enable smooth transitions and avoid surprises.

---

## How to Use This Guide

- **Review each version in reverse chronological order** to identify breaking changes that impact your codebase.
- **Follow migration instructions carefully**, especially for major releases.
- **Check compatibility notes** regarding supported platforms, compiler requirements, and build system updates.
- **Coordinate with your team** to plan upgrades, adapt build configurations, and update test code.

---

## Version-Specific Breaking Changes

### Version 1.17.0 (Latest Release)

- **Minimum C++ Standard Raised to C++17**
  - GoogleTest now requires C++17 support. Ensure your build environment and compiler toolchain meet this.
  - If not feasible, migration to earlier releases or toolchain upgrade is necessary.

- **Build System Updates**
  - The standalone CMake project can be customized with `-DBUILD_GMOCK=OFF` to exclude GoogleMock if desired.
  - Use `FetchContent_MakeAvailable(googletest)` with CMake 3.14+ to embed GoogleTest in existing CMake builds.
  - Adjust runtime linkage on Windows by setting the `gtest_force_shared_crt` CMake option to match your project’s CRT linkage.

- **Runtime and API Changes in GoogleMock**
  - `MOCK_METHOD` macros now require careful parentheses handling around types with commas (e.g., `std::pair`).
  - Several new matchers and action customizations have been introduced; review [Custom Matchers and Actions](https://google.github.io/googletest/gmock_cook_book.html#NewMatchers) for adjustments.

- **Deprecated Macros and APIs**
  - Old `MOCK_METHODn` macros are deprecated; migrate to new `MOCK_METHOD` style for better compiler diagnostics and functionality.

---

### Version 1.16.x

- **Threading and Multi-threaded Test Macros**
  - Library improved thread safety detection for multi-threaded tests; verify your tests handle threading flags correctly.

- **Death Test Behavioral Adjustments**
  - Changes in how death tests run with threads require code that forks to be single-threaded beforehand.
  - Use recommended naming convention `*DeathTest` for test suites containing death tests to avoid concurrency issues.

- **Matcher and Action Enhancements**
  - Changes in matcher composition and lambda invocation require migration of some custom matchers.

---

### Version 1.15.x and Earlier

- **Removal of Support for Deprecated Compilers**
  - Visual Studio 2013 and older versions no longer supported. Upgrade your compiler to VS2015 or newer.

- **Changes to Default Test Filtering and Output**
  - Flags for test filtering and colored output have been updated.
  - Tests relying on legacy flag names or environment variables should migrate accordingly.

- **Macros and Mock Behavior**
  - Shift from NaggyMock default verbosity to more controlled behavior; users must explicitly specify strictness modes.

- **Global Setup and Tear-down Changes**
  - Adjustments in handling `::testing::Environment` lifecycle require updates to environment registration code.

---

## Common Migration Steps

- **Verify Your Build Environment Compatibility**
  - Confirm compiler version, C++ standard support, and build tool versions.

- **Update your CMakeLists.txt**
  - Replace deprecated build options.
  - For embedded builds, use `FetchContent_Declare` and `FetchContent_MakeAvailable`.

- **Refactor Mock Definitions**
  - Replace old `MOCK_METHODn` with the new `MOCK_METHOD` macro.
  - Use parentheses around template types with commas.

- **Adapt Test Code to C++17 Features and Limitations**
  - Use new predicate/assertion mechanisms for enhanced failure messages.
  - Follow new conventions for typed and parameterized tests.

- **Review and Adjust Strictness Modes of Mocks**
  - Decide when to use `NiceMock`, `StrictMock`, or `NaggyMock` for warnings on uninteresting calls.

- **Consider New Features for Test Event Listeners**
  - Update custom event listeners per new API signatures.

- **Rebuild and Test Thoroughly**
  - Engage continuous integration for the whole test suite.
  - Use `--gtest_list_tests` and verbose logging flags for diagnosing changes.

---

## Troubleshooting Upgrade Issues

- **Linker Errors After Upgrade**
  - Ensure all your dependencies link against the same C++ standard library and runtime versions.
  - Match static vs dynamic linking settings, especially on Windows.

- **Unexpected Test Failures or Skipped Tests**
  - Check for changed default behaviors, especially around disabled tests and filtering.

- **Mock Failures Due to Changed Expectations or Matchers**
  - Review ON_CALL and EXPECT_CALL order and specificity.
  - Use `--gmock_verbose=info` for detailed tracing.

- **Build Failures with Macros**
  - Verify correct macro usage with parentheses for types containing commas.

- **C++17 Compatibility Breakages**
  - Review deprecated language constructs; update to modern equivalents.

---

## Additional Resources and Links

- [Official GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [GoogleMock Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [GoogleTest Release Notes and Version Overviews](/changelog/release-history/version-overview)
- [Build & Integration Guides](/overview/integration-platforms/integration-other-systems)
- [Supported Platforms](/overview/integration-platforms/platform-support)

---

## Best Practices for Future Upgrades

- Keep an eye on release notes and migration guides for every release.
- Frequently update development environments to stay current with required standards (C++17+).
- Modularize mocks and tests to isolate upgrade impacts.
- Incorporate GoogleTest and GoogleMock seamlessly into your CI workflows for automated validation.

---

By adhering to the guidance in this document, you will minimize downtime and maintenance overhead during GoogleTest and GoogleMock upgrades, ensuring your C++ test suites remain reliable, maintainable, and performant.
