---
title: "New Features & Improvements"
description: "In-depth coverage of major enhancements, new test utilities, expanded platforms, and productivity-boosting features as they are released. This page highlights value-adds and demonstrates the evolving power of GoogleTest/GoogleMock for all users."
---

# New Features & Improvements

Welcome to the **New Features & Improvements** page for GoogleMock (gMock), your go-to source for discovering the latest enhancements, expanded platform support, and productivity-boosting capabilities in the evolving GoogleTest/GoogleMock framework. This page focuses specifically on the most impactful updates and advancements in GoogleMock, enabling all users—from beginners to experts—to harness its growing power more effectively in their testing workflows.

---

## 1. Enhanced Mocking Capabilities

### 1.1. Modern and Flexible Mock Method Definitions
GoogleMock continuously streamlines mocking syntax to give users clearer and more robust ways to define mocks. The introduction and refinement of the generic `MOCK_METHOD` macro enables you to mock methods of any signature with 3 or 4 parameters, covering return type, method name, arguments, and optional qualifiers such as `const` or `override`.

#### Key Utilization Tips:
- When mocking methods with templates or complex signature types (e.g., containing commas), wrap those types in parentheses or use type aliases to ensure smooth compilation.
- Always place `MOCK_METHOD` declarations in the `public:` section of your mock class, regardless of the original method’s access level.

```cpp
class MockExample {
 public:
  MOCK_METHOD(int, GetValue, (), (const, override));
  MOCK_METHOD(void, SetValue, (int newValue), (override));
};
```

### 1.2. Support for Overloaded and Non-Virtual Method Mocking

- Overloads can be mocked straightforwardly without extra boilerplate.
- Non-virtual methods can now effectively be mocked by creating mock classes unrelated to the real ones but implementing the required methods.

This greatly extends the scenarios where GoogleMock can be applied, even when working with legacy or third-party code.

### 1.3. Move-Only Types and Modern C++ Support

GoogleMock now supports mocking methods that take or return C++11 move-only types such as `std::unique_ptr`. This unlocks safe and effective mocking of modern C++ codebases that use smart pointers and other move semantics.

Example:

```cpp
class MockResource {
 public:
  MOCK_METHOD(std::unique_ptr<Foo>, CreateFoo, (), (override));
};
```

Remember, when returning move-only types, use lambdas or callable objects in expectation actions to generate fresh instances on each call rather than trying to return a pre-made `unique_ptr`, which can only be moved once.

---

## 2. Strictness Wrappers for Mock Behavior Control

GoogleMock introduces three main wrappers to manage how your mocks handle uninteresting calls (method calls without expectations):

### 2.1. `NiceMock`
Suppresses warnings on uninteresting calls, letting your tests focus on what matters, minimizing noise.

### 2.2. `NaggyMock`
The default behavior for mocks, which warns on uninteresting calls, helping catch unexpected usage.

### 2.3. `StrictMock`
Treats uninteresting calls as test errors, enforcing strict control over mock interactions — essential when you want to ensure your test covers every possible call explicitly.

These wrappers work by subclassing your mock classes, preserving constructors, and adjusting behavior seamlessly.

Example of usage:

```cpp
using ::testing::NiceMock;
NiceMock<MockInterface> mock_obj;
EXPECT_CALL(mock_obj, DoWork());
```

### Best Practices:
- Use `NiceMock` to keep tests focused and resilient to refactoring.
- Use `StrictMock` sparingly when you want to verify *all* interactions explicitly.

---

## 3. Powerful and Expressive Expectation Specification

### 3.1. `EXPECT_CALL` with Flexible Matchers and Actions
GoogleMock's expressive `EXPECT_CALL` syntax allows precise control over:
- When and with what arguments a mock method is called
- The number of times a method is expected
- The order of calls via sequences and partial orders
- The behavior on each call with `.WillOnce()`, `.WillRepeatedly()`, or chained actions

### 3.2. Handling Default Actions and `ON_CALL`
Use `ON_CALL` to specify default behaviors for methods that are called but not explicitly expected to be called (uninteresting calls). This reduces test brittleness and keeps your mocks realistic.

```cpp
ON_CALL(mock_obj, GetValue())
    .WillByDefault(Return(42));
```

### 3.3. Ordering and Cardinalities
- Define strict call order with `InSequence` or partial order with `After` clauses.
- Specify call count expectations with cardinalities like `Times(n)`, `AtLeast(n)`, or `AnyNumber()`.

### 3.4. Advanced Argument Matching
- Combine multiple matchers with `AllOf`, `AnyOf`.
- Use tuple matchers for multi-argument validation with `.With()`.


---

## 4. Test Productivity and Debugging Enhancements

### 4.1. Informative Mock Call Tracing
By running tests with verbosity flags such as `--gmock_verbose=info`, developers can gain detailed insights into mock calls, arguments, and matching expectations — saving hours in debugging complex test failures.

### 4.2. Easy Transition to Newer Mocking Styles
GoogleMock continuously improves its syntax and best practices, such as favoring the generic `MOCK_METHOD` macro over the old `MOCK_METHODn` macros, making mocks easier to write and maintain.

### 4.3. Support for Key Scenarios
- Mocking methods that mutate output arguments with actions like `SetArgPointee` and `SetArrayArgument`.
- Delegating calls to fake or real objects for hybrid test doubles.
- Suppressing or allowing unexpected or uninteresting calls via `NiceMock`, `NaggyMock`, `StrictMock` wrappers.

---

## 5. Comprehensive Cross-Platform and Compiler Support

GoogleMock expands platform support, maintaining compatibility across Windows, Linux, macOS, and embedded systems, and acknowledges specific compiler quirks (such as MSVC warnings) ensuring you can confidently rely on mocks in diverse environments.

---

## Practical Examples

```cpp
// Creating a mock with strictness control
class MockDownloader {
 public:
  MOCK_METHOD(bool, Download, (const std::string& url), (override));
};

// Using StrictMock to enforce strict expectations
StrictMock<MockDownloader> mock_downloader;
EXPECT_CALL(mock_downloader, Download("http://example.com"))
    .Times(1)
    .WillOnce(Return(true));

// Running test code that uses mock_downloader
bool result = mock_downloader.Download("http://example.com");
EXPECT_TRUE(result);
```

---

## Troubleshooting and Common Pitfalls

- Remember to set expectations *before* exercising the mock to avoid undefined behavior.
- Ensure all mocked methods are virtual; otherwise, mock calls may invoke real methods.
- Use `NiceMock` or `NaggyMock` to control warnings on uninteresting calls according to test maturity.
- Wrap argument types with parentheses or use type aliases in `MOCK_METHOD` when dealing with template parameters that contain commas.

---

## See Also

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — hands-on recipes for mocking.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.md) — detailed API descriptions.
- [Behavior Strictness Documentation](https://google.github.io/googletest/api/gmock-nice-strict_8h.html) — deep dive into NiceMock, NaggyMock, and StrictMock.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) — quick summary of key concepts.

---

GoogleMock seamlessly evolves to empower your testing with clarity, precision, and efficiency. Whether you're ramping up on mock basics or refining complex test infrastructures, these new features and improvements will help you build more robust, maintainable, and insightful tests.


---

*Documentation generated from official GoogleTest/GoogleMock resources and internal code, aligned with user-centric workflows and practical guidance.*
