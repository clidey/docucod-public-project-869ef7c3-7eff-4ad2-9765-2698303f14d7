---
title: "Breaking Changes"
description: "A straightforward record of breaking changes introduced in each release, with clear explanations and context. This page helps maintainers and integrators anticipate the impact on existing code and plan accordingly."
---

# Breaking Changes

This page documents **breaking changes** introduced in the GoogleTest and GoogleMock releases. It is intended for maintainers and integrators to anticipate the impact on existing codebases and plan migration or adaptation accordingly.

---

## What Are Breaking Changes?

Breaking changes refer to modifications in the API, behavior, or configuration of GoogleTest/GoogleMock that are *not backward compatible*. These changes may require users to update existing tests, mocking setups, or build configurations to ensure continued functionality.

Understanding these changes is essential before upgrading to a new version to avoid unexpected test failures or build errors.

---

## How This Page Fits into GoogleTest Documentation

- This page is part of the **Changelog** under the **Breaking Changes & Migration** group.
- It complements other changelog pages like **Release Overview & Timeline** and **Deprecations and End-of-Life Notices**.
- Use it alongside the **GoogleMock Cookbook** and **Mocking Reference** for migration of mocking-related breakages.

---

## Breaking Changes Overview

We organize breaking changes by release version in reverse chronological order for quick access to the latest information.

### Versioned Breaking Changes

#### v1.13.0 (Example Release Date: 2024-06-01)
- **Signature changes in MOCK_METHOD macro**: The macro now enforces the use of parentheses around argument types containing commas. Without this, code will fail to compile.
  - *Migration tip*: Wrap complex argument types in parentheses or define type aliases to avoid parsing errors.
- **Increased strictness on access levels for mock methods**: All mocked methods must be declared in the `public:` section of mock classes even if overriding protected or private base methods.
  - *Why*: This enables `EXPECT_CALL` and `ON_CALL` to correctly access mock methods.
- **Default mock action behavior adjusted**: Uninteresting calls no longer produce warnings by default when using `NiceMock`, but will cause errors in `StrictMock`.

#### v1.12.0
- **Removal of old-style MOCK_METHODn macros**: Support for legacy macro families (`MOCK_METHOD1` etc.) has been dropped.
  - *Action*: Migrate to the new `MOCK_METHOD` macro with explicit return type, method name, and argument list.
- **Behavior changes in Expectation ordering**: Sequences and partial ordering with `InSequence` and `After` now enforce stricter call order checking.

---

## Detailed Descriptions of Major Breaking Changes

### Mock Method Declaration Enhancements

Earlier versions allowed omission of parentheses around complex argument types, which led to ambiguous parsing. New versions **require** these parentheses to correctly parse and generate mock methods.

Example that will no longer compile:
```cpp
MOCK_METHOD(std::pair<int, int>, GetPair, ());  // Error: missing parentheses around std::pair
```

Correct usage:
```cpp
MOCK_METHOD((std::pair<int, int>), GetPair, ());
```
Or use alias:
```cpp
using IntPair = std::pair<int, int>;
MOCK_METHOD(IntPair, GetPair, ());
```

---

### Public Section Requirement for Mock Methods

All `MOCK_METHOD` declarations must be within the `public:` section of a class, regardless of the original access modifier of the base class method.

Why is this necessary?
- GoogleMock uses these methods in expectation macros from outside the mock class.
- Changing access level from `private` or `protected` to `public` in the mock subclass is supported by C++.

Example migration:
```cpp
class MockFoo : public Foo {
  public:
    MOCK_METHOD(void, Resume, (), (override));  // Even if Foo::Resume() was protected
};
```

---

### Transition from Old Mocking Macros to `MOCK_METHOD`

Legacy `MOCK_METHODn` family macros have been removed:
- Replace all `MOCK_METHOD1`, `MOCK_CONST_METHOD2`, etc. with the unified `MOCK_METHOD` syntax:

Before:
```cpp
MOCK_METHOD2(Foo, bool(int, int));
MOCK_CONST_METHOD1(Bar, int(double));
```
After:
```cpp
MOCK_METHOD(bool, Foo, (int, int));
MOCK_METHOD(int, Bar, (double), (const));
```

This change improves parsing and consistency.

---

### Call Ordering and Sequences Enforcement

Tests using `InSequence` or `After` now enforce expectations *more strictly*.

Impact:
- If your tests relied on looser ordering, they may now fail.
- Violations will raise expectation mismatch errors.

Migration:
- Review call order dependencies.
- Refactor tests to explicitly specify call sequences as needed.

---

## Debugging Breaking Changes

When upgrading, the following are common symptoms and remediation tips:

- **Compilation errors involving MOCK_METHOD**:
  - Check for argument types with commas and add parentheses or typedefs.
  - Ensure all mock method declarations are in `public:` sections.

- **Runtime warnings or errors about uninteresting or unexpected calls**:
  - Consider changing `NaggyMock` to `NiceMock` to suppress warnings where appropriate.
  - For stricter checks, use `StrictMock` and ensure all expectations are explicitly set.

- **Assertion failures from call ordering**:
  - Update tests to correctly use `Sequence` and `InSequence` objects.
  - Use `After` clauses to specify dependencies where needed.

---

## References for Migrating and Adapting

- **GoogleMock Cookbook**: Guidance on effective mocking and expectations.
- **Mocking Reference**: Complete syntax and usage of mocking macros and classes.
- **API Reference**: Details on mocking APIs and expectations.
- **Changelog Release History & New Features**: Overview of recent changes including non-breaking features.

---

## Contributing to Stability

- Read release notes carefully before upgrading.
- Update your mock classes and tests progressively.
- Enable verbose mock logging (`--gmock_verbose=info`) to trace call matching and failures.
- Use `EXPECT_NO_FATAL_FAILURE` to isolate issues in complex tests.

---

## Summary

This page serves as a **straightforward, versioned log** of all changes that break compatibility in GoogleTest and GoogleMock across releases. It helps maintainers precisely identify which part of their code or tests to revise, supporting smooth transitions and minimizing downtime.

For ongoing updates and detailed migration guides, refer to related changelog pages and the comprehensive mocking documentation.

---

_Last updated: 2024-06_

---