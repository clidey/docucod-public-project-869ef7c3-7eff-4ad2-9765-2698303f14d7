---
title: "New Features & Enhancements"
description: "A focused breakdown of the most impactful features and improvements introduced in recent releases. Gain insight into extended test capabilities, new assertion options, platform support advancements, and productivity enhancements available in GoogleTest and GoogleMock."
---

# New Features & Enhancements

Discover the most impactful additions and improvements introduced in recent GoogleTest and GoogleMock releases. This page focuses on enhanced testing capabilities, new assertion macros, platform support advancements, and improved user experience features that empower you to write more expressive, maintainable, and robust C++ tests.

---

## 1. Enhanced Assertion Options

GoogleTest continues to broaden its assertion repertoire to give you richer failure diagnostics and more expressive test conditions:

- **Predicate Assertions with `AssertionResult`**
  - Write predicate functions returning `testing::AssertionResult` to provide detailed success and failure messages.
  - Example: use `AssertionSuccess()` and `AssertionFailure()` with streamed messages to reveal why an assertion fails, improving debug efficiency.

  ```cpp
  testing::AssertionResult IsEven(int n) {
    if ((n % 2) == 0)
      return testing::AssertionSuccess() << n << " is even";
    else
      return testing::AssertionFailure() << n << " is odd";
  }
  EXPECT_TRUE(IsEven(value));
  ```

- **Exception Assertions** enable direct verification of exception throwing behavior.

- **Floating-Point Predicate-Format Functions** such as `FloatLE` and `DoubleLE` offer nuanced comparison capable of tolerating floating-point precision issues.

- **Windows HRESULT Assertions** simplify testing on Windows by providing meaningful success or failure diagnostics based on HRESULT values.

- **String Matchers via `EXPECT_THAT`** enable expressive substring, regex, prefix/suffix assertions, enriching text validation.

## 2. Value and Type-Parameterized Test Support

Expanding test coverage while minimizing maintenance, GoogleTest enhances usability for parameterized tests:

- **Value-Parameterized Tests (`TEST_P`, `INSTANTIATE_TEST_SUITE_P`)** allow testing functions with diverse input values systematically.
- **Typed Tests (`TYPED_TEST_SUITE`, `TYPED_TEST`)** let you reuse the same test logic over a set of types, verifying type-polymorphic behavior.
- **Type-Parameterized Tests (`TYPED_TEST_SUITE_P`, `REGISTER_TYPED_TEST_SUITE_P`, `INSTANTIATE_TYPED_TEST_SUITE_P`)** support writing reusable type-agnostic test patterns instantiated later.
- Custom naming options for parameters and test instances help maintain readable and meaningful test reports.

## 3. Death Tests Improvements

Death tests, which verify that unsafe code aborts as expected, have become safer and more accessible:

- **Thread Safety Options** via `--gtest_death_test_style` allow choosing between "fast" and "threadsafe" styles to balance speed against robustness in multithreaded environments.
- Recommendations to name test suites ending with "DeathTest" improve test ordering to avoid concurrency issues.
- Flags and strategies are provided to ease debugging death tests by controlling subprocess behavior.

## 4. Global and Shared Resource Management

To optimize resource usage and test suite performance:

- **SetUpTestSuite() and TearDownTestSuite()** let you define shared setup/teardown for an entire suite, avoiding expensive per-test repetition.
- **Global Test Environments (`testing::Environment`)** allow for system-wide setup and teardown surrounding all tests in the program.
- Hooks like `AddGlobalTestEnvironment()` provide convenient registration for these global environments.

## 5. Test Event Listener API Enhancements

Extend GoogleTest's execution feedback with customizable event listeners:

- Add listeners to track test progress, capture failures, or generate custom output formats.
- Control event forwarding to filter or suppress output in subprocesses, such as death test children.
- Support for failure-raising listeners enables complex conditional logic during test execution.

## 6. Output and Reporting

Improved test report generation helps integrate with CI and analysis tools:

- Support for XML and JSON output formats enhances machine parsing.
- XML reports include rich failure messages with stack traces.
- JSON output conforms to schema suitable for modern tooling.
- Command-line flags (`--gtest_output`) specify formats and output locations.
- Colorized terminal output improves human readability.

## 7. Test Filtering, Sharding, and Execution Control

Enhanced user control over test execution:

- **Test Name Filtering (`--gtest_filter`)**: Select tests to run with positive and negative pattern matching.
- **Sharding Support**: Run subsets of tests distributed across machines or processes using environment variables (`GTEST_TOTAL_SHARDS`, `GTEST_SHARD_INDEX`).
- **Repeat and Shuffle**: Useful flags to rerun tests multiple times or in random order for flakiness detection.
- **Fail Fast Option (`--gtest_fail_fast`)** stops on the first failure to speed up development cycles.

## 8. Other Productivity Enhancements

- **Scoped Traces (`SCOPED_TRACE`)** help annotate failure messages for clarity when drilling into nested function calls.
- **Test Registration at Runtime** enables dynamic test addition beyond macros.
- **Customized Type Printing** through `AbslStringify()` or `PrintTo()` overloads allows better diagnostic messages.

---

## Practical Example: Writing a Predicate Assertion with Custom Messages

```cpp
testing::AssertionResult IsPositive(int value) {
  if (value > 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << value << " is not positive";
}

TEST(MyTestSuite, PositiveValueTest) {
  int x = -5;
  EXPECT_TRUE(IsPositive(x));  // Failure message will explain why.
}
```

## Best Practices

- Prefer using predicate assertions with detailed messages to gain clearer failure insights.
- Use `SetUpTestSuite()` and `TearDownTestSuite()` to optimize shared resource management.
- Mark disabled tests temporarily to maintain stability while developing new features.
- Employ sharding and test filters to shorten CI turnaround time.
- Leverage event listeners to integrate custom logging or telemetry.

## Common Pitfalls to Avoid

- Mixing TEST and TEST_F macros within the same test suite leads to registration errors.
- Expect fatal assertions (`ASSERT_*`) in non-void-returning functions to abort only the function, not entire test, unless specially handled.
- Avoid leaving uninstantiated parameterized test suites; use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST` where appropriate.

---

For detailed guidance on each of these topics, explore the [Advanced GoogleTest Topics](docs/advanced.md) and [Testing Reference](docs/reference/testing.md).

---

*This page is part of the [Release History & Highlights](https://github.com/google/googletest) section of the official GoogleTest documentation.*