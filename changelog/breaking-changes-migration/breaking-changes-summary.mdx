---
title: "Breaking Changes Overview"
description: "Lists all breaking changes introduced in recent and past releases, with clear explanations of the impact and guidance on addressing them in existing code bases."
---

# Breaking Changes Overview

This page offers a comprehensive listing of all breaking changes introduced in recent and past releases of GoogleTest and GoogleMock. Each breaking change is presented with clear explanations of its impact and practical guidance on how to address it in existing codebases. The goal is to help users navigate upgrades smoothly by understanding incompatible changes and applying appropriate migration steps.

---

## Understanding Breaking Changes

Upgrading to newer versions of GoogleTest and GoogleMock can provide powerful new features, enhanced stability, and performance improvements. However, sometimes these upgrades introduce changes that are not backward compatible. When these "breaking changes" occur, existing code may fail to compile, behave incorrectly, or require modifications.

The "Breaking Changes Overview" page is designed to document each such change clearly, from a user perspective:

- **What changed:** A description of the change impacting users.
- **Why it changed:** The rationale behind the change, often linked to improved design or correctness.
- **What it means for your code:** How this change affects existing tests or mocks.
- **How to update:** Step-by-step guidance or best practices to adapt your code.

This focus on user outcomes ensures you can maintain your test suites' reliability and leverage new capabilities without unexpected disruption.

---

## Key Breaking Changes and Migration Guidance

### 1. Transition to C++17 Requirement

- **Change:** GoogleTest and GoogleMock now require compiling with C++17 or newer.
- **Impact:** Projects using earlier language standards may fail to compile.
- **Migration Tip:** Update your compiler flags and build system to specify at least C++17.

### 2. MOCK_METHOD Macro Modernization

- **Change:** The introduction of a unified `MOCK_METHOD` macro replacing legacy `MOCK_METHODn` macros.
- **Impact:** Existing mocks using old macros remain supported but are deprecated.
- **Migration Tip:** Refactor mock methods to use the new `MOCK_METHOD(ReturnType, MethodName, (Args...), (Qualifiers))` syntax to benefit from clarity and uniformity.

### 3. Default Mock Object Behavior and Strictness

- **Change:** The default strictness model for mocks is evolving from "naggy" (warnings on uninteresting calls) to "nice" (ignores uninteresting calls silently).
- **Impact:** Tests depending on warnings for uninteresting calls may see different behavior.
- **Migration Tip:** Explicitly use `NiceMock<>`, `NaggyMock<>`, or `StrictMock<>` wrappers to control strictness as needed.

### 4. Matchers and Actions API Refinement

- **Change:** Updates to matcher and action definitions, including improved support for move-only types and lambda-based actions.
- **Impact:** Some older code patterns might produce compile warnings or errors.
- **Migration Tip:** Transition to lambda expressions or `Invoke()`-based actions for complex behavior; prefer polymorphic matchers from the recommended APIs.

### 5. Expectation Ordering and Cardinality Adjustments

- **Change:** Revised semantics in expectation matching, including sticky expectations and retiring expectations upon saturation.
- **Impact:** Test failures may occur due to more precise call count enforcement.
- **Migration Tip:** Use `.RetiresOnSaturation()` judiciously to release expectations; employ `InSequence` or `After` to enforce call order robustly.

### 6. Mock Destructor Verification Pattern

- **Change:** Destructors cannot be mocked directly with `MOCK_METHOD`.
- **Impact:** Tests requiring destructor timing need alternative approaches.
- **Migration Tip:** Add an explicit mock method (e.g., `Die()`) called from the destructor and set expectations on it.

### 7. Removal of Deprecated Macros and APIs

- **Change:** Deprecated macros such as `MOCK_CONST_METHODn` and old matcher implementations are phased out.
- **Impact:** Legacy code using these will fail to compile.
- **Migration Tip:** Migrate to modern `MOCK_METHOD` and matcher interfaces.

---

## Troubleshooting Common Issues When Upgrading

### Compilation Failures

- Verify your compiler supports C++17.
- Check for invalid method signatures with `MOCK_METHOD`.
- Refactor usage of deprecated macros.

### Unexpected Test Failures

- Review changes in expected call cardinalities.
- Use stricter or more explicit matchers controlling call arguments.
- Investigate uninteresting call warnings; adjust mock strictness as appropriate.

### Runtime Behavior Differences

- Ensure mock object behaviors (`ON_CALL` and `EXPECT_CALL`) are updated for new matcher or action APIs.
- Validate test logic sensitive to invocation order against updated sequencing constructs.

---

## Best Practices for Managing Upgrades

- **Read release notes carefully:** Always check breaking changes before upgrading.
- **Incremental migration:** Upgrade tests gradually, starting with smaller components.
- **Leverage strictness wrappers:** Clarify the intent of mock behaviors using `NiceMock`, `NaggyMock`, or `StrictMock`.
- **Use modern syntax:** Modernize your mocks and expectations for better readability and maintainability.
- **Automate verification:** Use `Mock::VerifyAndClearExpectations()` when appropriate to catch unmet expectations early.

---

## Additional Resources

For a deeper dive into these breaking changes and their impact, see:

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [Strictness Wrappers](https://google.github.io/googletest/api/reference/mocking-apis/strictness-wrappers.html)

This page fits within the [Changelog > Breaking Changes & Migration Guidance](https://google.github.io/googletest/changelog/breaking-changes-migration/breaking-changes-summary.html) group, complementing release timeline and deprecation notices documentation.

---

**Navigating Breaking Changes with Confidence**

By understanding and adapting to breaking changes, your migration journey remains smooth and transparent. Keep informed, follow structured update strategies, and consult detailed migration guides to ensure your test suite evolves alongside the GoogleTest framework without disruption.
