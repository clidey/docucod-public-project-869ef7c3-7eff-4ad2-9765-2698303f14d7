---
title: "Breaking Changes by Version"
description: "Catalog of breaking changes, deprecated features, and removals. Clear explanations of what changed, why, and the impact on user code, enabling teams to plan and implement necessary updates confidently."
---

# Breaking Changes by Version

This page provides a clear catalog of breaking changes, deprecated features, and removals in GoogleMock, accompanied by explanations of why these changes were made and how they affect user code. Understanding these changes empowers users and teams to plan and execute necessary updates confidently.

---

## Purpose of This Document

Breaking changes describe modifications to the API or behavior of GoogleMock that are incompatible with previous versions. Such changes can cause existing tests to fail or mock behaviors to differ unexpectedly. This documentation focuses exclusively on those changes, helping you identify what to adjust in your test code and when.

> **Note:** This page covers breaking changes *only* for GoogleMock components. For GoogleTest-related changes, please refer to other release notes.

---

## Structure of the Breaking Changes

Each breaking change described includes:

- **Version**: The release version in which the change occurred.
- **Description**: What changed and the rationale behind it.
- **User Impact**: Explanation of how the change might affect your existing code.
- **Migration Guidance**: If applicable, concrete, step-by-step instructions to update your code.

---

## Breaking Changes Overview

### Version 1.15.0 - Introduction of Generic MOCK_METHOD Macro

**Description:**
- GoogleMock replaced the family of `MOCK_METHODn` macros with a generic, unified `MOCK_METHOD` macro that accepts the return type, method name, argument list, and optional qualifiers as parameters.

**User Impact:**
- Existing mock classes using `MOCK_METHODn` macros still compile but are marked deprecated.
- Users are encouraged to migrate to the new macro syntax for better consistency and future compatibility.

**Migration Guidance:**
```cpp
// Old style
MOCK_METHOD1(Foo, bool(int));

// New style
MOCK_METHOD(bool, Foo, (int));
```
- Wrap argument or return types involving commas in extra parentheses or use type aliases to avoid parsing errors.

---

### Version 1.16.0 - Strictness Wrappers (NiceMock, NaggyMock, StrictMock) Behavior Clarification

**Description:**
- Defined clearer semantics for mock strictness wrappers:
  - `NaggyMock`: prints warnings on uninteresting calls (current default).
  - `NiceMock`: suppresses warnings on uninteresting calls.
  - `StrictMock`: treats uninteresting calls as errors.

- Added guarantee that these wrappers only affect mock methods declared directly in the mock class using `MOCK_METHOD` macros.

**User Impact:**
- If your code uses `NiceMock` or `StrictMock` with mock base classes declaring mock methods in base classes, stricter behavior or warnings might occur.
- Behavior might differ slightly if destructors are non-virtual.

**Migration Guidance:**
- Prefer adding `MOCK_METHOD` macros directly in your mock class when strictness behavior matters.
- Ensure destructors of mock classes are virtual.

---

### Version 1.17.0 - Minimum C++ Standard Requirement Raised to C++17

**Description:**
- GoogleMock now requires C++17 or later for compilation.

**User Impact:**
- Projects using older C++ standards (e.g., C++11 or C++14) must upgrade their compiler settings.

**Migration Guidance:**
- Update your build configuration to specify `-std=c++17` or higher.
- Confirm that your compiler supports C++17 features.

---

### Version 1.17.0 - ON_CALL Must Specify WillByDefault

**Description:**
- The `ON_CALL` macro now requires a `.WillByDefault(action)` clause to define the mock method's default behavior explicitly.
- Omitting this clause leads to a run-time fatal error to prevent silent misuse.

**User Impact:**
- Existing code with `ON_CALL(mock, Method(...));` but no default action specified will fail at runtime.

**Migration Guidance:**
```cpp
// Before
ON_CALL(mock, Method()); // Causes error

// After
ON_CALL(mock, Method()).WillByDefault(Return(default_value));
```
- Always specify the default action.

---

### Version 1.17.0 - Actions Order Enforcement in EXPECT_CALL

**Description:**
- Enforced strict ordering: `.WillOnce()` clauses must precede `.WillRepeatedly()`. Any deviation leads to a fatal error on expectation creation.

**User Impact:**
- Test code that places `.WillRepeatedly()` before any `.WillOnce()` will fail to compile or run.

**Migration Guidance:**
```cpp
// Correct order
EXPECT_CALL(mock, Method())
    .WillOnce(Return(1))
    .WillRepeatedly(Return(2));

// Incorrect order (causes error)
EXPECT_CALL(mock, Method())
    .WillRepeatedly(Return(2))
    .WillOnce(Return(1));
```

---

## Common Issues and Troubleshooting

### Unexpected or Uninteresting Call Warnings

- Uninteresting calls occur when a mock method is invoked without a matching `EXPECT_CALL`. By default, GoogleMock treats them as warnings.
- Switching to `NiceMock` suppresses these warnings.
- Switching to `StrictMock` turns these warnings into errors, failing tests on unexpected calls.

### Compilation Errors with Older C++ Standards

- Ensure your project uses C++17 or later due to new language features.
- If you rely on older standards, continue using an earlier GoogleMock version.

### Parsing Issues with Commas in Types

- For templated types with commas, wrap them in extra parentheses or define type aliases:

```cpp
using MapType = std::map<int, double>;
MOCK_METHOD(bool, CheckMap, (MapType, bool));
```

---

## Practical Tips for Migrating Legacy Code

- Refactor macros from old `MOCK_METHODn` family to the generic `MOCK_METHOD`.
- Audit your `ON_CALL` macros to ensure `.WillByDefault()` is specified.
- Review all `EXPECT_CALL` chains to confirm `.WillOnce()` precedes `.WillRepeatedly()`.
- Use strictness wrappers (`NiceMock`, `StrictMock`) according to desired call tolerance.
- Upgrade your build system to enable C++17 and verify compiler support.

---

## Additional Resources

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for recipes on mock usage and best practices.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking-framework.html) to understand macros, classes, and clauses.
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) to troubleshoot common issues.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) for quick syntax reminders.

---

## Summary

Understanding and adapting to breaking changes is critical for maintaining reliable, up-to-date tests with GoogleMock. This document furnishes the explanations, impacts, and migration instructions needed to address significant API and behavior shifts in recent versions.

---

For complete release information and version timelines, see [All Releases & Version Timeline](https://google.github.io/googletest/changelog/release-history/all-releases.html).

---

_Last updated with GoogleMock version 1.17.0._

<Info>
If you encounter issues migrating or have questions about breaking changes, consult the [Community-Created Documentation](https://github.com/google/googletest#community-created-documentation) or seek support through official channels.
</Info>
