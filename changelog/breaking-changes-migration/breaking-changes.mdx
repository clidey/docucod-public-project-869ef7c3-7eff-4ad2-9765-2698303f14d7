---
title: "Breaking Changes & Deprecations"
description: "Highlights changes that alter APIs or behaviors in incompatible ways, lists deprecated features, and offers timelines for removal. Details rationale behind each change and practical advice to adapt existing codebases."
---

# Breaking Changes & Deprecations

The **Breaking Changes & Deprecations** page highlights key modifications to GoogleTest and GoogleMock that introduce incompatible API or behavioral changes. It provides users with detailed rationale behind these changes, clear timelines for removal of deprecated features, and practical guidance to adapt existing codebases smoothly.

Understanding and navigating breaking changes is critical to maintaining test stability and taking advantage of improvements without disruption.

---

## 1. Overview of Breaking Changes

Breaking changes refer to any alterations that modify the public API or internal behaviors incompatible with previous versions, requiring users to update their test code or mock classes accordingly.

This includes:

- Changes to function signatures in GoogleTest or GoogleMock interfaces.
- Modifications in behavior or semantics of test lifecycle or mocking mechanisms.
- Removal or obsolescing of previously supported flags or macros.

Each breaking change is explained with the reasoning behind it and advice on migrating code.


## 2. Deprecations and Removal Timelines

Features deprecated in earlier releases are listed here with their planned removal schedules. This allows users to prepare and migrate their projects before a feature becomes unsupported.

Typical lifecycle:

- **Deprecation in minor version**: Feature marked as discouraged to use.
- **Warning on usage**: Compilation or runtime warns when deprecated features are used.
- **Removal in major version**: Feature is eliminated, resulting in compilation errors if still used.


## 3. Common Breaking Changes & How to Adapt

### 3.1 MOCK_METHOD Signature Changes

Older macro variants (`MOCK_METHODn` family) have been superseded by the unified `MOCK_METHOD` macro:

```cpp
// Old style:
MOCK_METHOD1(Foo, bool(int));

// New style:
MOCK_METHOD(bool, Foo, (int));
```

**Migration advice:**

- Transition your mock class method declarations to use the new `MOCK_METHOD` syntax for improved uniformity.
- Wrap return or argument types involving commas in parentheses or use type aliases to avoid macro parsing issues.

### 3.2 NiceMock, NaggyMock, and StrictMock Behavior Refinements

The interaction around mock strictness wrappers (`NiceMock`, `NaggyMock`, `StrictMock`) is evolving, with default behavior moving toward `NiceMock` semantics to reduce excessive noise from uninteresting calls.

**What changes for users:**

- Code using mocks might observe fewer uninteresting call warnings by default.
- Explicit usage of `NaggyMock` or `StrictMock` is recommended to enforce warning or failure policies.

**Migration advice:**

- Review areas of tests generating uninteresting call warnings and consider wrapping mocks with the appropriate strictness wrapper.
- Avoid nesting these wrappers, as it is unsupported and can cause unexpected behavior.

### 3.3 Removal of Legacy Test APIs

Legacy aliases, such as `TestCase` for `TestSuite`, are deprecated to align terminology with modern C++ testing conventions.

**Migration advice:**

- Replace `TestCase` usage with `TestSuite` in your test code and expectations.

### 3.4 Flag and Command-line Parsing Updates

Parsing of GoogleTest and GoogleMock flags has been refined to improve compatibility and extensibility.

Examples include handling unrecognized flags and supporting flag removal from command line arguments transparently.

**Migration advice:**

- Confirm that any custom test runners or wrappers properly invoke the latest `InitGoogleTest` or `InitGoogleMock` initializers with updated arguments.
- Update scripts to omit deprecated or changed flags.


## 4. Handling Breaking Changes

To successfully migrate your tests and mocks:

- Review detailed release notes and changelog accompanying the version upgrade.
- Identify usages of deprecated macros or flags and replace them with recommended alternatives.
- Test your code thoroughly with the new version, focusing on tests dependent on mock strictness or custom matchers and actions.
- Use verbose output (`--gmock_verbose=info`) to trace mock call expectations and uninteresting calls, aiding in identifying impact.


## 5. Practical Tips

- **Gradual Migration:** Adopt changes incrementally across test suites rather than all at once if possible.
- **Use Type Aliases:** When dealing with complicated return or argument types in mocks, alias types to reduce macro parsing issues.
- **Explicit Expectations:** Apply `EXPECT_CALL(...).Times(AnyNumber())` to mocks whose calls you're not interested in explicitly tracking but want to avoid strict failures.
- **Leverage Strictness Wrappers:** Use `NiceMock` for tests where uninteresting calls should be silent; use `StrictMock` when you want those to surface as errors.


## 6. Troubleshooting

### Common Issues

- **Compilation errors on MOCK_METHOD macros:** Verify that all method declarations follow the updated `MOCK_METHOD` syntax and ensure proper parentheses or type aliases around complex types.

- **Unexpected test failures after migration:** Check for strictness wrapper changes and uninteresting call warnings turning into errors.

- **Flag parsing failures:** Confirm that test runners call the correct initialization functions and that command line flags used are currently supported.


## 7. Additional Resources

- [Mocking Reference](../reference/mocking.md): Detailed API for mock classes, macros, and expectations.

- [gMock Cookbook](../gmock_cook_book.md): Practical recipes for mocking techniques and tricky scenarios.

- [Mock Class Strictness Guide](../../guides/mocking-masterclass/mock-class-strictness.mdx): Controls for mock strictness and handling uninteresting calls.

- [Version History & Release Notes](../version-history/latest-release): Stay informed about breaking changes in latest releases.

- [Migrating to Newer Mocking APIs](../breaking-changes-migration/upgrade-guide): Step-by-step migration paths and samples.

---

<Check>
Always verify your test suite compiles and runs correctly after upgrading GoogleTest/GoogleMock, paying special attention to mock expectations and behaviors affected by breaking API changes.
</Check>