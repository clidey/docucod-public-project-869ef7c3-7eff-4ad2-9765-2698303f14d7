---
title: "Migration Guides"
description: "Step-by-step instructions and checklists to help users transition their codebases between major versions—covering dependency changes, configuration updates, and advice for common scenarios experienced in real migrations."
---

# Migration Guides

GoogleTest's migration guides provide clear, actionable steps and checklists to assist users as they transition their codebases between major versions. These guides focus on practical concerns such as dependency updates, configuration changes, and common scenarios encountered during real-world migrations. By following these guides, you can ensure smooth upgrades and minimize disruptions.

---

## 1. Preparation for Migration

Before starting a version upgrade, it’s essential to understand the scope of changes, review release notes, and prepare your environment.

### Steps:

1. **Review Release Notes and Breaking Changes**
   - Familiarize yourself with the [breaking changes](breaking-changes) and [release notes](release-notes-history).
   - Identify any deprecated features or APIs that affect your tests.

2. **Check Environment Compatibility**
   - Ensure your build environment meets the updated system requirements, such as C++17 support.
   - Confirm your platform and compiler versions are supported ([Supported Platforms](getting-started/prerequisites-installation/system-requirements)).

3. **Backup and Version Control**
   - Commit all current work and create a branch specifically for migration to isolate changes.

4. **Set Up Dependency Updates**
   - Update GoogleTest and GoogleMock dependencies to the target version using your build system (e.g., CMake or Bazel).
   - Confirm correct linkage and inclusion as per [Setup and Project Integration](getting-started/configuration-first-run/configuration-setup).

---

## 2. Adapting Test Code

Upgrading to a major version may require changes in your test code to accommodate API modifications or behavioral alterations.

### Key Areas to Address:

- **Refactoring Deprecated Macros and APIs**
  - Replace deprecated macros with their current alternatives.
  - Update test fixtures and test suite naming conventions as necessary.

- **Handling API Breaking Changes**
  - Modify mock class definitions if mocks rely on altered constructs.
  - Adjust usage of matchers, actions, and expectations according to new syntax or semantics ([Mocking Macros and Methods](api-reference/matchers-and-mocking/mocking-macros-and-methods), [Actions and Call Behaviors](api-reference/matchers-and-mocking/actions-and-call-behaviors)).

- **Address Assertion Behavior Modifications**
  - Verify that assertions like `EXPECT_*` and `ASSERT_*` behave as expected, especially handling of fatal vs. non-fatal failure modes ([Assertions](api-reference/core-testing-api/assertions)).

- **Update Parameterized and Typed Tests**
  - Review your value-parameterized and typed test suites for compatibility ([Parameterized and Type-Parameterized Tests](api-reference/core-testing-api/parameterized-and-type-parameterized-tests)).

- **Death Tests Considerations**
  - If using death tests, review the death test invocation styles and threading considerations ([Death Tests](api-reference/specialized-testing-apis/death-tests), [Death Tests and Failure Handling](guides/advanced-testing-strategies/death-and-failure-tests)).

---

## 3. Configuration and Build Adjustments

Update your build system configuration to align with changes in GoogleTest’s integration patterns.

### Actions:

- **Update CMake or Bazel Integration**
  - Refresh your `CMakeLists.txt` or Bazel BUILD files to reflect new source locations, target names, or build flags as detailed in [Build System and Platform Integration](concepts/integration-patterns-advanced/build-system-and-platform-integration).

- **Enable C++17 and Compiler Flags**
  - Ensure that the appropriate C++17 standard and compiler options are set to prevent compilation errors.

- **Adjust Linkage Options for Shared Libraries (if applicable)**
  - If you link against shared libraries, verify that your runtime flags align with the new library builds.

- **Validate Integration Entrypoints**
  - Confirm the use of proper initialization and execution entrypoints ([Integration Entry Points](overview/architecture-features/integration-entrypoints)).

---

## 4. Testing the Migration

After modifying your tests and build configuration, thorough validation is critical.

### Recommended Workflow:

1. **Incremental Test Runs**
   - Run your test suites incrementally to catch failures early.

2. **Debug Failing Tests**
   - Use `--gmock_verbose=info` and other diagnostic flags to trace mock calls and failures ([Debugging Death Tests and Mocking](faq/advanced-usage-and-performance/debugging-death-tests-and-mocking)).

3. **Update or Create Migration-Specific Tests**
   - Write additional tests to ensure new behaviors or API changes are exercised.

4. **Use Continuous Integration**
   - Automate the migration test runs within your CI pipelines to continuously verify.

5. **Evaluate Performance**
   - Compare test execution times before and after migration; optimize usage of parallelism and parameterized tests ([How to Run Tests Faster](faq/advanced-usage-and-performance/how-to-run-tests-faster)).

---

## 5. Common Migration Scenarios & Solutions

### Scenario: Mock Method Signature Changes

- Update all `MOCK_METHOD` declarations to match new method signatures.
- Use recommended mocking macros to handle new qualifiers or call types.

### Scenario: Deprecated or Removed Features

- Identify features marked as deprecated in release notes.
- Refactor tests to replace deprecated features with supported alternatives.

### Scenario: Test Failures Due to Assertion Behavior Changes

- Distinguish between fatal and non-fatal assertion updates.
- Adjust assertions accordingly, using `ASSERT_*` versus `EXPECT_*` as per best practices.

### Scenario: Build Errors After Updating Dependencies

- Review your build system for changed include paths, link libraries, or compile definitions.
- Confirm all dependencies are at compatible versions.

---

## 6. Post-Migration Best Practices

- **Adopt New Features**
  - Explore new assertion macros, matchers, or test patterns introduced in the latest versions to improve your test quality.

- **Refactor to Increase Maintainability**
  - Modularize test fixtures, exemplify usage of parameterized tests, and leverage mocks effectively.

- **Document the Migration**
  - Log key changes, upgrade steps, and lessons learned for your team.

- **Continuously Monitor and Update**
  - Follow ongoing release notes and prepare early for future migrations.

---

## Additional Resources

- [Breaking Changes](breaking-changes) - Detailed description of breaking APIs and behaviors.
- [GoogleTest Primer](primer.md) - Foundations for writing tests.
- [GoogleMock Cookbook](gmock_cook_book.md) - Practical mocking recipes.
- [Running and Configuring Tests](api-reference/core-testing-api/running-and-configuring-tests) - Guidance on test execution.
- [Mocking with GoogleMock](guides/advanced-testing-strategies/mocking-with-googlemock) - Tutorial on mocking techniques.

---

Migration is a critical step towards leveraging the latest features and improvements in GoogleTest. By following these structured guides, you ensure your tests remain stable, your build processes smooth, and your testing practice robust.