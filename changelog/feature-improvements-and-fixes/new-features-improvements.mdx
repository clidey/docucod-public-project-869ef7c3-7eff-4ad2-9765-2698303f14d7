---
title: "New Features & Improvements"
description: "Deep dive into recently introduced functionalities, optimizations, and broadened support (such as new platforms or C++ standards). Each item links to the specific implementation or interface headers so users can leverage new capabilities immediately."
---

# New Features & Improvements

Explore the recently introduced functionalities, optimizations, and broader support enhancements within GoogleMock. This documentation focuses on the enhancements that empower you to leverage new capabilities immediately by providing direct links to implementation details and interface headers.

---

## 1. Enhanced Mock Behavior Modifiers: NiceMock, NaggyMock, and StrictMock

GoogleMock continues to refine its framework for handling uninteresting mock method calls through three flexible behavior modifiers:

- **NiceMock**: Suppresses warnings for uninteresting calls, allowing cleaner test output when you want to ignore unexpected mock invocations.
- **NaggyMock**: The default behavior that warns when uninteresting calls occur, helping to spotlight unexpected method invocations.
- **StrictMock**: Treats all uninteresting calls as errors, ensuring no unexpected calls slip through silently.

These modifiers offer precise control over the strictness of your test mocks, fitting various development and debugging stages seamlessly.

**Highlights:**

- All three classes act as drop-in subclasses of your original mock class and inherit all constructors, enabling seamless integration even with mock classes that have complex constructors.
- The behavior modifiers only affect calls to mock methods defined directly with `MOCK_METHOD` within the mock class.
- The NaggyMock remains the default behavior for mock objects, but future versions will likely adopt NiceMock as the default for enhanced maintainability.
- Nesting behavior modifiers (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported due to C++ language limitations.

<Accordion title="Example Usage of Behavior Modifiers">
```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

TEST(MyTest, UseNiceMock) {
  NiceMock<MockFoo> nice_mock;
  // Uninteresting calls to nice_mock.DoThis() do not emit warnings.
  nice_mock.DoThis();
}

TEST(MyTest, UseNaggyMock) {
  NaggyMock<MockFoo> naggy_mock;
  // Uninteresting calls emit warnings to stdout.
  naggy_mock.DoThis();
}

TEST(MyTest, UseStrictMock) {
  StrictMock<MockFoo> strict_mock;
  // Uninteresting calls fail the test.
  // strict_mock.DoThis(); // This would be a test failure if uncommented.
}
```
</Accordion>

<Tip>
Use NiceMock for general development to reduce noise, NaggyMock for debugging to spot unexpected calls, and StrictMock when you need to enforce strict call verification.
</Tip>

---

## 2. Improved Support for Non-default Constructible Mock Classes

GoogleMock enhanced its ability to work with mock classes lacking default constructors. Now, you can instantiate NiceMock, NaggyMock, or StrictMock wrapped mocks with any constructor arguments your original mock class supports.

**Key benefits:**

- Allows mocking of classes requiring complex construction parameters.
- Increases flexibility in testing legacy or third-party code with strict constructor requirements.

<Accordion title="Demonstration">
```cpp
class ComplexMock {
 public:
  explicit ComplexMock(const std::string& init_value) : value_(init_value) {}
  MOCK_METHOD(int, GetValueLength, (), (const));

 private:
  std::string value_;
};

NiceMock<ComplexMock> nice_mock("initialization");
EXPECT_CALL(nice_mock, GetValueLength())
    .WillOnce(Return(14));
```
</Accordion>

---

## 3. Enhanced Logging and Verbosity Controls

GoogleMockâ€™s logging system now supports refined verbosity levels:

- `info`: Logs comprehensive informational messages for mock calls, including stack traces on uninteresting calls.
- `warning`: (Default) Logs warnings and errors but omits stack traces on uninteresting calls.
- `error`: Logs errors only, suppressing warnings and info messages.

These levels can be adjusted dynamically via the `--gmock_verbose` command-line flag or programmatically within tests.

**Practical usage example:**

```cpp
// Set verbose logging level to info to trace mock interactions.
GMOCK_FLAG_SET(verbose, "info");
```

These controls empower developers to fine-tune the amount of diagnostic output during testing, assisting debugging and noise reduction.

---

## 4. New C++17 Compliance and Platform Support Optimizations

The framework has been modernized to fully embrace C++17 features and platform compatibility:

- Adoption of modern C++17 capabilities allows safer and more efficient mock method generation and invocation.
- Expanded support for compilers and platforms adhering to C++17, including improved behavior on Windows, Linux, and macOS.
- Runtime and compile-time checks to ensure your development environment meets the new standard requirements.

Refer to the [System Requirements](../../getting-started/prerequisites-installation/system-requirements) for detailed compatibility information.

---

## 5. Underlying Infrastructure and Internal Improvements

While the internal details are abstracted from users, these changes enhance user experience:

- The mock registration mechanism has been optimized to accurately manage mock lifecycles with minimal overhead.
- The behavior strictness modifiers unregister their call reactions safely ensuring consistent mock method behavior during the object lifetime.

These improvements contribute to more reliable, maintainable, and performant mock objects in your test suites.

---

## 6. Links to Implementation and Interface Headers

To utilize these new capabilities immediately, refer directly to the updated source headers and tests:

- Behavior Modifiers Implementation: [`googlemock/include/gmock/gmock-nice-strict.h`](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h)
- Detailed Tests Validation: [`googlemock/test/gmock-nice-strict_test.cc`](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc)
- Usage Recipes and Cheat Sheet: [`docs/gmock_cheat_sheet.md`](https://github.com/google/googletest/blob/main/docs/gmock_cheat_sheet.md)
- Mocking Reference for full API and Option clauses: [`docs/reference/mocking.md`](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)

Referencing these sources supports quick adoption and deeper exploration of these new features.

---

## 7. Best Practices and Recommendations

- Favor `NiceMock` to suppress uninteresting call warnings in stable tests.
- Reserve `StrictMock` for critical tests that require strict interaction verification.
- Use constructor argument forwarding in behavior modifiers when mocking classes without default constructors.
- Utilize verbose logging flags for detailed call information during test development and debugging.
- Always check compatibility with your compiler and platform environment, as detailed in system requirements.

---

## 8. Troubleshooting Tips

- If warnings on uninteresting calls persist unexpectedly, confirm you are using the right behavior modifier.
- Constructor forwarding requires that the mock class's constructors are accessible and properly forwarded.
- Ensure virtual destructors exist on your mock classes to guarantee proper behavior with behavior modifiers.
- For verbose output control, verify that the `--gmock_verbose` flag is set appropriately and supported by your test execution environment.

---

For deeper knowledge, consult related documentation on [Mocking Reference](../../api-reference/gmock-apis/mocking-api), [Matchers and Actions](../../concepts/mocking-concepts/matchers-actions-cardinalities), and [gMock Cookbook](../../guides/core-testing-workflows/test-doubles-with-googlemock).

---

<Source url="https://github.com/google/googletest" paths='[{"path": "googlemock/include/gmock/gmock-nice-strict.h", "range": "1-203"},{"path": "googlemock/test/gmock-nice-strict_test.cc", "range": "1-384"}]' />