---
title: "Future Deprecations"
description: "Awareness of features and APIs slated for future deprecation or removal, so you can plan codebase maintenance and dependency management proactively."
---

# Future Deprecations

Stay informed about upcoming changes in GoogleTest and GoogleMock that may impact your codebase. This page highlights features and APIs slated for deprecation or removal in future releases, empowering you to proactively plan upgrades, maintain compatibility, and reduce technical debt.

---

## Overview

GoogleTest and GoogleMock evolve continuously to improve functionality, performance, and ease of use. To maintain code health and avoid surprises during upgrades, it is crucial to track deprecations early and update your tests accordingly.

This page helps you anticipate these changes by summarizing the key items expected to be phased out or modified. It focuses specifically on actionable information for test authors and maintainers.

---

## Deprecated Language Standard Support

- **C++14 and earlier**: Future releases will enforce **C++17** as the minimum language standard.
  - This change allows GoogleTest and GoogleMock to modernize internal implementation and offer improved features.
  - Ensure your build environment and test projects are updated to compile with C++17 or newer.

---

## Mock Method Macro Updates

- Legacy mock macros such as `MOCK_METHODn`, `MOCK_CONST_METHODn`, and variants with `_WITH_CALLTYPE` suffix are deprecated.
  - Replace all old-style mocks with the new **`MOCK_METHOD`** macro.
  - The new `MOCK_METHOD` syntax requires explicit declaration of method qualifiers such as `const`, `override`, and `noexcept`.
  - This improves correctness and clarity of mock definitions.

**Example Migration:**

Before:
```cpp
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD1(Bar, int(int));
```
After:
```cpp
MOCK_METHOD(bool, Foo, (int));
MOCK_METHOD(int, Bar, (int), (const));
```

---

## Handling Move-Only Types

- Enhanced native support for mocking methods with move-only argument types (e.g., `std::unique_ptr`) and return types.
  - Older workarounds using delegation (e.g., forwarding mock methods without move-only params) are discouraged.
  - Transition to direct `MOCK_METHOD` declarations supporting move-only types.

**Key Tips:**
- To return move-only objects from a mock method, prefer lambdas or `WillOnce` returning a new object each call.
- Avoid using `Return(std::move(...))` with `WillRepeatedly`, since the moved-from object won't be valid after the first call.

---

## Strictness Wrappers and Default Behavior

- `NaggyMock` remains deprecated in favor of `NiceMock` and `StrictMock` for handling uninteresting calls.
  - Use `NiceMock<T>` to suppress warnings on uninteresting calls.
  - Use `StrictMock<T>` to treat uninteresting calls as errors and enforce strict verification.

---

## Logging and Verbosity Flags

- The behavior of verbose logging flags such as `--gmock_verbose` may evolve.
  - Future versions may standardize default verbosity levels.
  - Stay aware of potential changes to logging output format.

---

## Build and Compiler Compatibility

- Compiler and platform support will be updated to align with modern tooling.
  - MSVC versions older than Visual C++ 2015 will no longer be supported.
  - Deprecated compiler flags and build options will be removed.
  - Integration scripts and CMake configurations may require updates.

---

## Deprecation Timeline and Support Policy

- Deprecated features will typically go through the following progression:
  - **Announcement & Warning:** Deprecated status declared in release notes and documentation.
  - **Grace Period:** Supported but users warned to migrate.
  - **Removal:** Features are removed in a major release.

- Follow official release notes and migration guides closely to know when updates become mandatory.

---

## How to Prepare Your Codebase

1. **Audit your tests and mocks for deprecated APIs:**
   - Identify use of old mock macros, unsupported qualifiers, or legacy mocking patterns.

2. **Update build environments:**
   - Set compiler flags to C++17.
   - Upgrade toolchains as required.

3. **Convert all mock classes to use `MOCK_METHOD` syntax:**
   - Add explicit qualifiers.
   - Remove deprecated macros.

4. **Use strictness wrappers consciously:**
   - Prefer `NiceMock` or `StrictMock` over `NaggyMock`.

5. **Review default actions and expectations:**
   - Use `ON_CALL` for default behavior without expectations.
   - Use `EXPECT_CALL` only when you want to verify call counts or order.

6. **Test your tests:**
   - Run with `--gmock_verbose=info` to see detailed mock interactions.
   - Fix any warnings or errors that surface.

7. **Follow migration guides from each release:**
   - Address breaking changes as documented.

---

## Useful Links

- [Mock Object Definition](../api-reference/mocking-api/mock-object-definition.md)
- [Expectations and Cardinalities](../api-reference/mocking-api/expectations-cardinalities.md)
- [Nice, Naggy, and Strict Mocks](../api-reference/mocking-api/nice-strict-mocks.md)
- [gMock Cookbook](../docs/gmock_cook_book.md)
- [Breaking Changes and Migration Guides](../changelog/breaking-migration/migration-guides.md)
- [Detailed Release Notes](../changelog/release-history/detailed-release-notes.md)

---

## Summary

Keeping your tests compatible with GoogleTest and GoogleMock means staying current on deprecations. This proactive page details the notable upcoming removals, syntax changes, and minimum requirements so that your workflow remains smooth and maintainable.

Please consult the above links and regularly monitor release notes to maintain test stability and leverage the full power of GoogleTest.

---

<Note>
To stay ahead of future removals, subscribe to GoogleTest release announcements and follow the GitHub project milestones.
</Note>
