---
title: "Upgrade Checklist"
description: "An actionable checklist outlining preparation, recommended upgrade order, compatibility checks (e.g., C++17 requirements), and post-upgrade verifications. Helps teams plan safe, reliable upgrades."
---

# Upgrade Checklist

The Upgrade Checklist page is your essential guide for planning and executing safe, reliable upgrades to GoogleMock and GoogleTest. This actionable checklist walks your team through all critical preparation steps, recommended upgrade order, compatibility verifications such as C++17 compliance, and post-upgrade validation tasks. By following this checklist, your team can mitigate risks, avoid common pitfalls, and ensure a smooth transition to the latest versions.

---

## 1. Preparation Before Upgrading

Before initiating the upgrade, ensure your environment and codebase meet the necessary prerequisites. This section aligns with system requirements and offers best practices for a smooth start.

### 1.1 Verify C++17 Compatibility
- Confirm your compiler and build environment support C++17 or newer, as GoogleMock now requires C++17 as a minimum standard.
- Update your project build configurations explicitly to use C++17 (e.g., `set(CMAKE_CXX_STANDARD 17)` in CMake).

### 1.2 Backup and Version Control
- Commit all pending changes to version control.
- Tag the existing stable version of your tests and dependencies to simplify rollback if needed.

### 1.3 Review Deprecations and Breaking Changes
- Familiarize yourself with breaking changes such as removal of legacy mocking macros and changes in mock behavior defaults.
- Consult the Breaking Changes and Deprecation Notices documentation for detailed impact analysis.

### 1.4 Prepare Your Build System
- Confirm that all build scripts account for the updated dependencies.
- Verify that CMakeLists and Bazel configurations are updated to find and link the new GoogleMock and GoogleTest versions correctly.

### 1.5 Communicate Upgrade Schedule
- Set clear timelines for upgrading and testing phases.
- Inform your development and QA teams of any expected behavior changes or feature deprecations.

---

## 2. Recommended Upgrade Order

Adhering to a logical sequence ensures minimal disruption and eases troubleshooting.

1. **Upgrade Build Tools and Dependencies:**
    - Refresh CMake or Bazel modules to the versions compatible with the upgraded GoogleMock and GoogleTest.
2. **Upgrade GoogleTest and GoogleMock Libraries:**
    - Update to the targeted release versions, ensuring compatible API versions.
3. **Run Basic Smoke Tests:**
    - Execute initial test cases to confirm basic framework functionality.
4. **Migrate Mock Implementations:**
    - Address breaking changes in mock method declarations and expectations.
    - Use the `MOCK_METHOD` macro replacing deprecated legacy macros as necessary.
5. **Refactor Tests for Default Actions and Expectations:**
    - Adjust mock behaviors to accommodate new defaults for uninteresting calls, especially by managing `NiceMock` and `StrictMock` wrappers.
6. **Complete Full Test Suite Run and Analyze Output:**
    - Look for failures related to changed behavior, API updates, or environment incompatibility.

---

## 3. Compatibility Checks

Ensuring the environment and codebase align with new requirements prevents elusive errors.

### 3.1 C++ Standard Enforcement
- Confirm all components are compiled with the C++17 standard or higher.
- Check for deprecated or removed language features incompatible with your compiler.

### 3.2 Library and Dependency Versioning
- Verify that all linked GoogleMock and GoogleTest components share consistent version numbers.
- Update any third-party integrations to use compatible API signatures.

### 3.3 Mock API Usage
- Audit usage of mock macros:
  - Replace old-style `MOCK_METHODn` macros with the modern `MOCK_METHOD`.
  - Ensure correctness in const, override, noexcept, and call type specifiers.

### 3.4 Build and Link Configuration
- Confirm threading libraries and linker flags align with requirements (`@CMAKE_THREAD_LIBS_INIT@`).
- Check for static vs dynamic runtime mismatches, especially on Windows.

---

## 4. Post-Upgrade Verification

After upgrading, verify the stability and correctness of your test suite with these checks.

### 4.1 Run Full Test Suite
- Execute all unit tests and mocks.
- Verify that no unexpected failures occur related to mock expectations or new default behaviors.

### 4.2 Validate Mock Behavior
- Confirm that `EXPECT_CALL` and `ON_CALL` usages satisfy the new evaluation rules.
- Check whether strictness modes (`NiceMock`, `StrictMock`, default) behave as expected.

### 4.3 Confirm Build and Runtime Stability
- Perform stress or integration tests to ensure the upgraded framework doesnâ€™t introduce runtime defects.

### 4.4 Analyze Test Output Verbosity
- Optionally enable `--gmock_verbose` flags (`info`, `warning`, `error`) during testing to debug unexpected behavior.

### 4.5 Verify CI Pipeline Integration
- Confirm that continuous integration systems correctly build and run tests with the new GoogleMock version.
- Update tooling or scripts if necessary.

---

## 5. Practical Tips and Best Practices

- **Use `ON_CALL` liberally:** Prefer defining default mock behaviors with `ON_CALL` and reserve `EXPECT_CALL` for assertions.
- **Maintain explicit C++17 support:** Being explicit about your environment version avoids subtle, difficult-to-debug issues.
- **Regularly consult Breaking Changes:** Keep abreast of ongoing deprecations and migration guides to future-proof your tests.
- **Leverage `NiceMock` and `StrictMock` appropriately:** Manage warnings and failures for uninteresting calls to improve test clarity.
- **Version pin your dependencies:** Avoid unexpected upgrades by pinning GoogleMock and GoogleTest versions in your project configs.

---

## 6. Troubleshooting Common Upgrade Issues

| Issue                          | Symptom                                                     | Resolution                                 |
|-------------------------------|-------------------------------------------------------------|--------------------------------------------|
| Build failures due to C++17    | Compiler errors about unsupported language features        | Upgrade compiler or explicitly set C++17  |
| Legacy mock macros deprecated  | Compile errors for `MOCK_METHODn`                         | Replace with `MOCK_METHOD` macro           |
| Unexpected mock failures       | Tests fail due to changed default mock behavior             | Wrap mocks in `NiceMock` or adjust expectations |
| Linking errors on Windows      | Missing pthread or runtime mismatch errors                  | Use `gtest_force_shared_crt` in CMake; verify thread libs |
| Uninteresting call warnings    | Tests produce warnings about un-expected mock calls         | Use `NiceMock`, or explicitly allow with `EXPECT_CALL(...).Times(AnyNumber())` |

---

## 7. References and Next Steps

- **Breaking Changes:** Detailed explanations on API and behavior changes.
- **Migration Guides:** Step-by-step guidance to upgrade between major versions.
- **Prerequisites & System Requirements:** Environment setup and compiler requirements.
- **Installation & Integration:** Instructions for system setup, building, and linking.
- **Mocking Reference:** Comprehensive documentation of mock APIs and best practices.
- **Changelog: Detailed Release Notes:** Track changes and fixes.

By carefully following this upgrade checklist, your team will ensure a smooth transition to the latest GoogleMock and GoogleTest versions while maintaining test reliability and minimizing downtime.

---

For continuous updates and community support, visit the [GoogleTest GitHub repository](https://github.com/google/googletest) and refer to the accompanying official guides linked above.