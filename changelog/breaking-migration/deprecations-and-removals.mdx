---
title: "Deprecations and Removals"
description: "Stay ahead of the curve by monitoring deprecated features, APIs, or configurations, including removal schedules and replacement recommendations. Proactively address future incompatibilities in your code."
---

# Deprecations and Removals

Stay ahead of the curve by monitoring deprecated features, APIs, or configurations in GoogleTest and GoogleMock. This documentation helps you proactively identify deprecated elements, understand their scheduled removals, and adopt recommended replacements to avoid future incompatibilities.

---

## Understanding Deprecations and Removals

GoogleTest and GoogleMock periodically phase out older features, macros, APIs, and configurations that no longer align with evolving standards or best practices. This page is your go-to resource to track those changes so your tests and mocks remain current, maintainable, and compatible with future releases.

Deprecation warnings signal that a feature is still available but will be removed in upcoming releases. Early action is encouraged to update your tests and mock code according to replacement guidelines.

---

## What Is Deprecated?

Deprecated features can include:

- Macros and methods superseded by improved or safer alternatives
- Outdated flag names or default behaviors
- APIs inconsistent with the modern C++ language standards (e.g., pre-C++17 support removal)
- Legacy mechanisms for mock behavior specification

For example, the older `MOCK_METHODn` macros have been replaced by the more versatile and clearer `MOCK_METHOD` macro. Usage of deprecated macros will generate warnings and eventually become unsupported.

---

## Removal Schedules

Features marked as deprecated remain supported for at least one major release cycle. Removal schedules are communicated well in advance through this changelog section and release notes. You should use these timelines to plan your code upgrades.

Ignoring deprecation notices will lead to build or runtime failures when upgrading to versions where the deprecated functions have been removed.

---

## Recommended Replacements

For each deprecated feature or API, GoogleTest provides clear recommendations for replacement:

- Use `MOCK_METHOD` macro instead of deprecated `MOCK_METHODn` macros. This new macro simplifies mocking by supporting qualifiers, move-only types, and cleaner syntax.

```cpp
class MockFoo {
 public:
  MOCK_METHOD(int, Bar, (int x, const std::string& s), (override));
};
```

- Switch from default `NaggyMock`-style mocks to `NiceMock` or `StrictMock` for better control over uninteresting call warnings and failures.

```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> nice_foo;
```

- Replace deprecated flag names with their current versions, e.g., prefer `--gmock_verbose` for controlling output verbosity.

- Move to C++17 minimum language standard and use updated qualifiers on mock methods (`const`, `noexcept`, `override`, `ref(&)`) as needed.

---

## Key Deprecated Items and Migration Tips

### Deprecated Macros: `MOCK_METHODn` Family

- Replace `MOCK_METHODn` macros with the generic `MOCK_METHOD` macro.
- Wrap argument types containing commas with parentheses or use `using` type aliases to avoid parsing errors.
- Always place mock method definitions in the `public` section, even if overriding protected or private methods.

### Default Mock Strictness

- Transition from `NaggyMock` (default) to `NiceMock` or `StrictMock` classes to manage warnings and errors for uninteresting calls more explicitly.
- Understand that `NiceMock` suppresses warnings, `NaggyMock` shows warnings, and `StrictMock` treats uninteresting calls as test failures.

### Language Standard and Qualifiers

- GoogleMock now requires C++17 as a minimum standard; projects using older standards must upgrade.
- Mock method declarations must include matching qualifiers, e.g., `const`, `override`, `noexcept`, or reference qualifiers `ref(&)`, aligned with the base class signatures.

### Deprecated Flags

- Ensure use of up-to-date command-line flags such as `--gmock_verbose` instead of older or internal flags.
- Flags control verbosity levels (`info`, `warning`, `error`) to customize console output from mocks.

---

## Avoiding Common Pitfalls

- Do not mix or nest `NiceMock`, `NaggyMock`, and `StrictMock` wrappers; this is unsupported and leads to undefined behavior.
- Do not suppress uninteresting call warnings by blindly adding `EXPECT_CALL` with catch-all matchers; prefer explicit default behavior via `ON_CALL` or proper mock strictness classes.
- Avoid wrapping types with parentheses except when required for macro parsing. Use `using` aliases for complex types.
- For move-only types like `std::unique_ptr`, always mock methods using the latest `MOCK_METHOD` macro—legacy workarounds are no longer necessary.

---

## Best Practices for Migration

1. **Identify Deprecated Usages:**
   Search your tests and mock classes for usage of deprecated macros, flags, or APIs.

2. **Update Mock Definitions:**
   Convert all `MOCK_METHODn` usages to `MOCK_METHOD`, ensuring correct placement in `public` sections.

3. **Adopt Mock Strictness Classes:**
   Wrap your mock objects in `NiceMock` or `StrictMock` depending on testing needs to better manage warnings and failures.

4. **Check Method Qualifiers:**
   Add required qualifiers (`const`, `override`, `noexcept`, `ref(&)`) to mocked methods for compatibility with base classes.

5. **Use New Verbosity Flags:**
   Replace any legacy flags with current ones like `--gmock_verbose` and tune verbosity for debugging or silence.

6. **Upgrade Language Standard:**
   Ensure your project builds with at least C++17 to comply with GoogleMock requirements.

7. **Test and Verify:**
   After migrating, run your tests with `--gmock_verbose=info` to inspect mock calls and verify expected behavior.

---

## Troubleshooting Deprecation Issues

### Compilation Errors on Mock Methods

- Verify that `MOCK_METHOD` is used correctly with proper parenthesized argument lists or type aliases for types containing commas.
- Ensure qualifiers match the base method signature exactly.

### Unexpected Behavior of Uninteresting Calls

- Switch from default mocks to `NiceMock` or `StrictMock` to control how uninteresting calls are handled.
- Use `ON_CALL` to set default actions instead of blanket `EXPECT_CALL`.

### Flag-Related Problems

- Remove obsolete or unsupported command-line flags and migrate to current naming and semantics.

---

## Additional Resources

- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — detailed API and usage for mocking features.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — practical recipes for advanced mocking patterns.
- [Breaking Changes and Migration Guides](/changelog/breaking-migration/breaking-changes) — essential reading for migration.
- [Nice, Naggy, and Strict Mocks](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) — understanding mock strictness.

---

## Summary

This page is designed to keep you informed of deprecated APIs and features in GoogleTest's mocking framework and guide you with concrete steps to update your test code for smooth transitions. Regularly consulting this documentation will prevent surprises from removed functionalities and help maintain robust, modern tests.

---

## Quick Reference: Key Deprecated Items

| Deprecated Feature            | Recommended Replacement          | Notes                                          |
|------------------------------|---------------------------------|------------------------------------------------|
| `MOCK_METHODn` macros         | `MOCK_METHOD` macro             | Wrap types with commas with parentheses or use `using` typedefs |
| Raw mocks (NaggyMock default) | `NiceMock` or `StrictMock`      | Provides better warning and error handling       |
| Missing qualifiers on mocks   | Add `const`, `override`, `noexcept`, `ref(...)` | Mandatory for compatibility and correctness      |
| Legacy flags (e.g. non-gmock flags) | Use `--gmock_verbose` etc.   | Control output verbosity and behavior             |

---

<Tip>
Stay proactive by regularly scanning your test and mock code for deprecated usage. Begin incorporating recommended replacements early to avoid urgent overhauls before major releases.
</Tip>

<Note>
For a smooth upgrade, combine this page with the [Breaking Changes](../breaking-migration/breaking-changes) and [Migration Guides](../breaking-migration/migration-guides) for full context and migration instructions.
</Note>

<Check>
Always verify your tests' behavior with increased verbosity (`--gmock_verbose=info`) after migration to catch unexpected mismatches or deprecation warnings early.
</Check>