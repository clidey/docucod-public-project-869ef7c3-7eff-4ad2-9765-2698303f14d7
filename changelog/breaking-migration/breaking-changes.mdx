---
title: "Breaking Changes & Deprecations"
description: "Detailed explanations of breaking API changes, removed or deprecated features, and context around why each change was made. Users understand risk and required actions before upgrading."
---

# Breaking Changes & Deprecations

This page outlines important **breaking API changes**, **deprecated features**, and **removed functionalities** within GoogleTest. Its purpose is to help users understand potential risks and required actions before upgrading their test code and framework versions. By clearly communicating these changes, you can plan migrations with confidence and avoid surprises during integration.

---

## 1. Overview of Breaking Changes

When upgrading GoogleTest to a newer version, you may encounter changes that **alter or remove existing APIs** or behaviors. These could cause your tests to fail to compile or behave differently at runtime.

This page focuses on these core areas:

- **API breaking changes:** Modifications to test macros, assertions, or fixture behavior that require code adjustments.
- **Deprecated features:** APIs or usages that are discouraged and will be removed in future releases.
- **Removed features:** APIs or test components eliminated from the framework.

Before upgrading, it is imperative to review and understand these to ensure your test suites run smoothly.

---

## 2. Breaking Changes Detected

### a. Restrictions on Test Suite and Test Names

GoogleTest reserves the underscore (`_`) character for internal use in test suite and test names. This means:

- **Test suite names and test names must NOT contain underscores (`_`).**
- Underscores appearing at the start or end of names are especially problematic as they produce invalid identifiers internally.

If you violate this rule, your test classes may be generated with conflicting or reserved names, resulting in compilation errors or unexpected behavior. For simplicity and future compatibility, avoid `_` altogether in `TEST()` and `TEST_F()` names.

<Callout title="Example of problematic name usage">
```cpp
// Avoid names with underscores:
TEST(Time, Flies_Like_An_Arrow) { ... }  // discouraged
TEST(TimeFlies, LikeAnArrow) { ... }   // preferred
```
</Callout>

For details and rationale, see the [FAQ entry on underscores in test names](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

---

### b. ASSERT and EXPECT Macros with `NULL` Arguments

While historically GoogleTest supported `EXPECT_EQ(NULL, ptr)` and `ASSERT_EQ(NULL, ptr)`, it does **not** fully support `EXPECT_NE(NULL, ptr)` or `ASSERT_NE(NULL, ptr)` due to C++ template limitations.

- **Recommendation:** Use `nullptr` instead of `NULL` for pointer comparisons. For example:

```cpp
EXPECT_EQ(ptr, nullptr);
EXPECT_NE(ptr, nullptr);
```

This syntax is safer, more modern, and free of the limitations associated with `NULL`.

For additional guidance, see the detailed explanation in the [FAQ](docs/faq.md#why-does-google-test-support-expect_eqnull-ptr-but-not-expect_ne-null-ptr).

---

### c. Test Fixture Derived Classes and Same Test Suite Names

GoogleTest enforces that **all tests in a test suite use the same test fixture class**. This means:

- Mixing `TEST` and `TEST_F` with the same test suite name is illegal.
- Defining derived fixtures sharing the same test suite name is prohibited.

If violated, the framework reports runtime errors specifying that test fixtures conflict within the same suite.

<Callout title="How to safely share fixture logic">
You can share test fixture logic implicitly by inheriting from a base fixture and defining separate fixtures with different names for use in different tests:

```cpp
class BaseTest : public ::testing::Test { ... };

class DerivedTest1 : public BaseTest { ... };
class DerivedTest2 : public BaseTest { ... };

TEST_F(DerivedTest1, TestName) { ... }
TEST_F(DerivedTest2, TestName) { ... }
```

Using this approach avoids naming conflicts.
</Callout>

For full details, see [FAQ entry on deriving fixtures and test suite names](docs/faq.md#Can-I-derive-a-test-fixture-from-another).

---

### d. `RUN_ALL_TESTS()` Return Value Usage

GoogleTest now requires that the return value of `RUN_ALL_TESTS()` is used, typically as the return value of `main()`:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Ignoring the return value will now generate a compilation error on some compilers because it breaks proper test status reporting.

Failing to do this may cause your test runs to incorrectly report success, even if some tests failed.

See [FAQ entry on ignoring `RUN_ALL_TESTS()` return value](docs/faq.md#My-compiler-complains-about-ignoring-return-value-when-I-call-run_all_tests) for more.

---

## 3. Deprecation Notices

### a. Legacy Test Case vs Test Suite API

GoogleTest is moving from the old `TestCase` terminology to `TestSuite`. While `TestCase`-based APIs are still available for compatibility,
new code should use test suite APIs instead.

- Legacy API usage may generate deprecation warnings.
- Refer to the new API in the [Test Lifecycle and Environment Control](api-reference/core-test-api/test-lifecycle-and-environment.md).

### b. `TEST_CASE` Macro

The older `TEST_CASE` macro is deprecated. Use `TEST` or `TEST_F` to define tests instead.

---

## 4. Removal of Features

### a. Removal of Support for Static const Data Member Definitions Without Out-of-Class Definition

GoogleTest follows correct C++ rules requiring that **static const integral members must be defined outside the class body if they are odr-used**.

If you previously relied on omitting the out-of-class definition, expect compilation or link errors. Define static members as follows:

```cpp
class Foo {
  static const int kBar = 100;
};

const int Foo::kBar;  // Required definition.
```

For `constexpr` static members, no separate definition is needed.

See [FAQ on undefined references to static members](docs/faq.md#The-compiler-complains-about-undefined-references-to-some-static-const-member-variables-but-I-did-define-them-in-the-class-body).

---

### b. Fix for `EXPECT_EQ` Using Macros as Arguments

`EXPECT_EQ(htonl(blah), blah_blah)` may generate compiler errors in optimized mode due to `htonl()` defined as a macro on some platforms.

This is a known platform issue rather than GoogleTest bug. The workaround is to avoid placing problematic macros inside `EXPECT_EQ` directly.

---

## 5. Migration Tips and Required Actions

To smoothly upgrade:

- **Review your test names:** Remove or replace underscores in test suite and test names.
- **Replace `NULL` with `nullptr` for pointer assertions.**
- **Ensure consistent fixture use within test suites:** Avoid mixing `TEST` and `TEST_F` in the same suite.
- **Use the return value of `RUN_ALL_TESTS()` correctly,** ensure it propagates in your `main()`.
- **Add out-of-class definitions for static const members** where necessary.

Failure to comply may lead to compilation failures, runtime errors, or unreliable test results.

---

## 6. Additional Considerations

### Death Tests

- Recommended to name death test suites ending with `*DeathTest` to help GoogleTest run them prior to normal tests, ensuring isolation.
- See [Advanced Topics: Death Tests](guides/core-test-workflows/death-tests-error-handling.md) for detailed migration and configuration guidance.

### Thread-Safety and Sharding

Keeping consistent test suite fixture usage and avoiding underscores help maintain compatibility with advanced features like test sharding and thread-safe death tests.

---

## 7. References and Further Reading

- [FAQ on Test Names and Underscores](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [FAQ on ASSERT/EXPECT with NULL](docs/faq.md#why-does-google-test-support-expect_eqnull-ptr-but-not-expect_ne-null-ptr)
- [FAQ on Fixture Derivation and Test Suites](docs/faq.md#Can-I-derive-a-test-fixture-from-another)
- [FAQ on RUN_ALL_TESTS() Return Value](docs/faq.md#My-compiler-complains-about-ignoring-return-value-when-I-call-run_all_tests)
- [Assertions Reference](docs/reference/assertions.md)
- [Advanced Topics on Death Tests](guides/core-test-workflows/death-tests-error-handling.md)

---

By reviewing these breaking changes and deprecations carefully, you will be empowered to maintain reliable, performant, and forward-compatible test suites in GoogleTest.


---

<Note>
This document concentrates on user-facing API changes and deprecations relevant to writing and running tests with the GoogleTest framework. It does not cover unrelated internal refactorings or performance optimizations that do not affect test authors directly.
</Note>
