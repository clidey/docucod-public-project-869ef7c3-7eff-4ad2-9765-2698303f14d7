---
title: "Deprecations & Removals"
description: "Catalog of APIs and features that have been deprecated or removed, including timelines and recommended migration paths. Stay ahead of the curve by adjusting to forward-looking changes."
---

# Deprecations & Removals

Welcome to the Deprecations & Removals catalog, your authoritative reference for tracking APIs and features within GoogleMock that have been deprecated or removed. This page is designed to empower you to proactively manage your test codebase and stay aligned with GoogleMock’s evolution.

By consulting this page, you’ll gain insight into:

- **Which APIs and features are deprecated or gone.**
- **When these deprecations or removals took effect.**
- **Recommended migration paths and alternatives.**

---

## Understanding Deprecations & Removals

Software inevitably evolves, and sometimes features or APIs must be retired to keep the testing framework robust, modern, and maintainable. This page focuses exclusively on GoogleMock APIs and capabilities that have been marked for eventual end-of-life.

Staying informed here ensures you avoid surprises and can smoothly adapt your test code to leverage newer, improved constructs.

---

## Typical User Journey: Managing Deprecated Features

Imagine you have a legacy test suite that uses an older mock method macro or relies on deprecated behaviors around expectations and default actions. You want to upgrade GoogleMock or improve your usage to comply with the latest standards to enjoy improved maintainability and performance.

This page offers:

- **Timelines:** Clear indication of when support for older features will cease or has ceased.
- **Migration Guidance:** Practical advice on how to transition from deprecated APIs to their modern replacements, ensuring your mock definitions and test assertions continue to work flawlessly.

---

## Deprecation and Removal Highlights

### Deprecated Macros and Patterns

Older-style mock macros like `MOCK_METHODn` have been deprecated in favor of the unified `MOCK_METHOD` macro, which provides clearer syntax and better support for qualifiers and complex type signatures. You are encouraged to migrate mock classes to use the newer syntax to benefit from improved readability and maintainability.

**Migration Tip:** Replace uses of legacy `MOCK_METHODn` macros with the generic `MOCK_METHOD` form, matching the method signature explicitly, including any necessary qualifiers such as `const` or `override`.

### Behavioral Changes in Uninteresting Calls

The default behavior of uninteresting mock calls—calls to mock methods for which no explicit expectation was set—has been clarified and streamlined. GoogleMock now supports distinguishing among “nice”, “naggy”, and “strict” mock objects, affecting whether uninteresting calls generate warnings or test failures.

**Action:** Use `NiceMock<T>`, `NaggyMock<T>`, or `StrictMock<T>` wrappers around your mock classes depending on your desired level of strictness around mock method calls with no explicit expectations.

### Verification and Lifecycle Updates

Advancements in mock lifecycle management have introduced improved ways to force verification of mock object expectations before destruction using `Mock::VerifyAndClearExpectations()`. This is critical for tests where a mock’s lifetime is managed outside the test scope and helps avoid silent test gaps caused by leaked or improperly cleaned-up mocks.

**Best Practice:** Regularly invoke `Mock::VerifyAndClearExpectations()` on mocks you create on the heap to ensure early failure reporting and prevent hidden expectation violations.

### Removal of Old Mocking Syntax and Practices

Older idioms such as creating mock methods in non-public sections or mocking of free functions without using interfaces have been deprecated. Direct mocking of free functions is unsupported, and you should introduce interfaces with virtual methods instead.

**Recommendation:** Refactor your codebase to embrace interface-based designs to enable effective mocking.

---

## Timeline and Migration Paths

| Feature / API                      | Status          | Removal Timeline     | Migration Action                                           |
|----------------------------------|-----------------|---------------------|------------------------------------------------------------|
| `MOCK_METHODn` macros            | Deprecated      | Scheduled for removal in upcoming major release | Refactor to use unified `MOCK_METHOD` macro syntax          |
| Legacy unprotected commas in signatures | Deprecated | Use modern parentheses wrapping now             | Wrap complex types in parentheses or use type aliases       |
| Uninteresting call default warning behavior | Adjusted behavior since recent releases | N/A                     | Use `NiceMock` or `StrictMock` to control warnings/errors  |
| Direct mocking of free functions  | Deprecated      | No direct support; encourage interface usage    | Encapsulate free functions in interfaces and mock them      |
| Implicit default return values    | Updated defaults| Ongoing               | Use `ON_CALL` to explicitly specify desired default behavior|

---

## Practical Migration Examples

### Migrating from `MOCK_METHODn` Macros

**Old syntax:**
```cpp
MOCK_METHOD1(Foo, bool(int));
```

**New syntax:**
```cpp
MOCK_METHOD(bool, Foo, (int));
```

Add qualifiers if needed:
```cpp
MOCK_METHOD(bool, Foo, (int), (const, override));
```

### Handling Complex Types with Commas

When mocking methods returning or accepting types with commas, wrap types in an extra pair of parentheses or use type aliases:

```cpp
using BoolAndInt = std::pair<bool, int>;
MOCK_METHOD(BoolAndInt, GetPair, ());
```

or

```cpp
MOCK_METHOD((std::pair<bool, int>), GetPair, ());
```

### Controlling Default Mock Call Behavior

To suppress warnings on uninteresting calls:
```cpp
NiceMock<MyMockClass> mock;
```

To treat uninteresting calls as failures:
```cpp
StrictMock<MyMockClass> mock;
```

### Forcing Early Verification

If your tests create mocks on the heap and the test does not guarantee destruction:
```cpp
Mock::VerifyAndClearExpectations(mock_ptr);
```
Call this before your verification phase to ensure all expectations were met.

---

## Troubleshooting Common Deprecation Issues

- **Parsing errors in `MOCK_METHOD`:** Wrap complex argument list types with parentheses or define clear type aliases.
- **Unexpected warnings about uninteresting calls:** Consider switching to `NiceMock` if the warnings are noise, or `StrictMock` if strict validation is needed.
- **Mocking free functions directly fails:** Wrap the function calls in an interface and mock that interface instead.
- **Test failures post-upgrade complaining about missing expectations:** Check your expectations and possibly add `ON_CALL` defaults or adapt expectations to new mock behaviors.

---

## Staying Ahead

Keep this page bookmarked and review it regularly to catch new deprecations early. Align your test code proactively with recommended migration paths to maintain robustness and compatibility.

For comprehensive understanding and up-to-date migration support, refer to the following resources:

- [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md)
- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)
- [Breaking Changes & Migration](https://github.com/google/googletest/blob/main/changelog/breaking-changes-and-migration/breaking-changes.md)
- [Effective Mocking Techniques Guide](/guides/core-workflows/mocking-techniques)

---

By embracing these changes, your testing will remain reliable, future-proof, and aligned with GoogleMock’s best practices, enabling your team to deliver high-quality software with confidence.
