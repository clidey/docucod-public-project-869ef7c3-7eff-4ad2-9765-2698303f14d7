---
title: "Deprecations and Feature Removals"
description: "List of deprecated features, planned removals, and timelines for sunsetting old APIs. Provides actionable recommendations for updating your usage to supported equivalents."
---

# Deprecations and Feature Removals

This page outlines features in GoogleMock that have been deprecated or scheduled for removal, including APIs, macros, and behaviors that users should update or migrate away from. It also provides clear timelines for sunsetting these features and actionable recommendations to transition your code to supported equivalents.

---

## Understanding Deprecations and Removals

GoogleMock maintains a commitment to evolve and improve while ensuring stability. We periodically deprecate older features that no longer align with modern usage, best practices, or maintenance goals. This page documents those changes to help you avoid surprises and smoothly upgrade your tests.

You should review this page regularly to:

- Identify deprecated features you currently use.
- Learn migration paths to supported APIs.
- Plan updates ahead of removal deadlines.

---

## Deprecated Features and Planned Removals

### 1. Old-Style MOCK_METHODn Macros

The classic family of `MOCK_METHODn` macros has been superseded by the more powerful and flexible `MOCK_METHOD` macro.

- **Status:** Deprecated since 2018, but still supported for backward compatibility.
- **Impact:** Using `MOCK_METHODn` is discouraged. Your mock classes should migrate to `MOCK_METHOD` which provides better parsing, qualifiers, and extensibility.
- **Migration:** Replace lines like:

  ```cpp
  MOCK_METHOD1(Foo, bool(int));
  MOCK_CONST_METHOD1(Bar, void() const);
  ```

  with:

  ```cpp
  MOCK_METHOD(bool, Foo, (int), (override));
  MOCK_METHOD(void, Bar, (), (const, override));
  ```

- **Recommendation:** Transition all mock classes to `MOCK_METHOD` to future-proof your tests and leverage enhanced functionality.

### 2. Implicit Default Actions Without ON_CALL

Relying on default built-in behavior without explicitly setting `ON_CALL` for default actions may cause unexpected warnings or fragile tests.

- **Status:** This practice is now discouraged.
- **Impact:** Uninteresting calls without an explicit `ON_CALL` may produce warnings and can obscure test intent.
- **Migration:** Define default behaviors explicitly with `ON_CALL(mock_obj, Method(args)).WillByDefault(action)` to clearly communicate expected default behavior.

### 3. Uninteresting Call Warnings Without Controls

By default, uninteresting calls (calls to mock methods with no expectations) generate warnings.

- **Status:** This default is intended, but you may opt for quieter behavior.
- **Impact:** Excess warnings may clutter test output.
- **Migration:** Use `NiceMock<T>` to suppress these warnings when they generate noise but do not indicate an error.

### 4. Expectation Order and Sticky Expectations

The default sticky behavior of expectations means they remain active after reaching their expected number of calls, which may differ from other frameworks.

- **Status:** Design choice, but users should be aware.
- **Impact:** Misunderstanding this can cause unexpected errors or brittle tests.
- **Migration:** Use `.RetiresOnSaturation()` or sequence constraints (`InSequence`) to control expectation activation and lifecycle precisely.

### 5. Mock Method Visibility

Mock methods must be declared in the `public:` section of mock classes, even if the base method is private or protected.

- **Status:** Always required; not deprecated but a common pitfall.
- **Impact:** Violating this causes compilation or runtime failures.
- **Recommendation:** Verify all `MOCK_METHOD` declarations are in public scope.

---

## Timelines for Sunsetting Deprecated Features

| Deprecated Feature             | Deprecated Since | Planned Removal | Recommended Action                        |
|-------------------------------|------------------|-----------------|-----------------------------------------|
| `MOCK_METHODn` Macros          | 2018             | TBD             | Migrate to `MOCK_METHOD` macro          |
| Default Action Without `ON_CALL` | N/A              | N/A             | Explicitly specify with `ON_CALL`       |
| Uninteresting Call Warnings    | N/A              | N/A             | Use `NiceMock` or suppress warnings     |

_Removal dates are subject to update; please consult the latest official release notes and migration guides._

---

## Actionable Recommendations

### Updating Mock Methods

Audit your mock class definitions and:

- Replace all instances of `MOCK_METHODn` macros with `MOCK_METHOD`.
- Wrap any argument types with commas in parentheses or use type aliases to avoid compilation issues.
- Ensure all mock methods reside in `public:` sections.

### Explicit Default Actions

Define default behaviors with `ON_CALL` to avoid warnings and to make the intent of test behavior clear.

Example:

```cpp
ON_CALL(mock_obj, Compute(_)).WillByDefault(Return(42));
```

### Controlling Mock Strictness

- If uninteresting call warnings clutter output but do not reflect errors, consider wrapping mocks in `NiceMock<>`.
- Use `StrictMock<>` to treat uninteresting calls as errors when strict enforcement is desired.

### Managing Expectation Order

- Use `.RetiresOnSaturation()` to make expectations retire after the specified number of calls.
- Use `InSequence` to enforce call order explicitly and avoid test brittleness.

Example:

```cpp
{
  InSequence s;
  EXPECT_CALL(mock_obj, Start()).WillOnce(Return());
  EXPECT_CALL(mock_obj, Stop()).WillOnce(Return());
}
```

### Checking for Deprecated Usage

Enable verbose logging with `--gmock_verbose=info` during test runs to identify unexpected calls and deprecated patterns.

---

## Troubleshooting and Common Pitfalls

### Warning: Uninteresting Mock Function Call

If this warning appears, it means a mock function was called without an expectation set. Confirm this is acceptable or add an expectation accordingly.

### Compiler Warnings for Const Parameters

When mocking methods with const parameters, note that top-level consts on parameters are ignored by C++ and should be omitted in mocks to avoid compiler warnings.

### Multiple EXPECT_CALL with Overlapping Matchers

Remember gMock chooses the last matching expectation by default. Put more specific expectations after more general ones.

---

## Migration and Upgrade Resources

- See the [Breaking Changes](https://google.github.io/googletest/changelog/breaking-changes-and-migration/breaking-changes) page for detailed migration instructions.
- Consult the [Mock Method Macros](https://google.github.io/googletest/api/gmock_mock-methods.html) reference for modern syntax.
- Review the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for practical examples and best practices.

---

## Related Documentation

- [Mocking Reference](https://google.github.io/googletest/api/gmock_mocking.html)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Mocking Basics Guide](https://google.github.io/googletest/guides/core-workflows/mocking-basics)
- [Breaking Changes](https://google.github.io/googletest/changelog/breaking-changes-and-migration/breaking-changes)
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [Troubleshooting Common Issues](https://google.github.io/googletest/getting-started/troubleshooting-validation/common-issues)

---

## Summary
GoogleMock periodically deprecates outdated features to maintain code quality and user experience. This page details deprecated constructs like the older `MOCK_METHODn` macros, implicit default actions without explicit `ON_CALL`, and uninteresting call warnings. It offers clear migration tips, timelines, and practical advice to help users update their mocking setups, ensuring smoother maintenance and future compatibility.

---

_Last Updated: [Refer to latest release notes]_