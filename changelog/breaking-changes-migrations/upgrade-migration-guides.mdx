---
title: "Upgrade & Migration Guides"
description: "Step-by-step walkthroughs and best practices for upgrading between major GoogleTest versions. These guides help teams safely navigate migrations, adjust to new APIs, and avoid common pitfalls caused by changes in the framework."
---

# Upgrade & Migration Guides

GoogleTest evolves continually to provide enhanced features, improved stability, and better user experience. This Upgrade & Migration Guides page offers comprehensive, step-by-step walkthroughs and practical best practices to help teams safely and efficiently upgrade between major GoogleTest versions. Whether you are navigating breaking changes, adapting to new APIs, or troubleshooting migration challenges, this resource is designed to empower you through the transition with clear guidance and actionable insights.

---

## Understanding Version Upgrades

When upgrading between major GoogleTest versions, it's important to understand the scope and nature of changes that could impact your existing tests and mocks. This guide helps you:

- **Identify breaking changes** that require code modifications.
- **Discover deprecated features** and available alternatives.
- **Adjust to new API designs** introduced in the newer versions.
- **Avoid common pitfalls** that stem from changes in mock behavior or core testing APIs.

By following structured migration paths and examples, you can minimize disruption and avoid test failures caused by unexpected incompatibilities.

## How to Use These Guides

Each migration guide is crafted as a user journey, focusing on real scenarios and the outcomes you want to achieve:

- Follow clear, progressive instructions starting from simple concepts and advancing to complex scenarios.
- Review concrete examples that reflect common upgrade cases.
- Employ practical tips and best practices to ensure your tests continue to work as expected.
- Reference troubleshooting sections for common failure modes encountered during migration.

Always begin upgrades by assessing your current codebase against the breaking changes listed in the version release notes. Then use these guides for stepwise adaptation.

## Common Migration Topics Covered

### API Changes and Adjustments

GoogleTest occasionally modifies its APIs for improved clarity, performance, or capability. These guides explain:

- How to refactor your mocks and expectations to comply with updated interfaces.
- Changes in macro usage such as `MOCK_METHOD`, `EXPECT_CALL`, and `ON_CALL`.
- Adjustments required for newly introduced qualifiers or call conventions.

### Mock Strictness and Behavior

As GoogleTest matures, the default behavior of mocks regarding uninteresting calls and their strictness can change. Our guides cover:

- The difference between `NaggyMock`, `NiceMock`, and `StrictMock` in newer versions.
- How to migrate from naggy (default) to nice mocks for better test maintainability.
- How strict mocking changes affect test failure patterns.

### Build and Platform Requirements

Major version upgrades may introduce changed or stricter build requirements:

- Minimum supported compiler versions and C++ standards.
- Changes in supported platforms or threading models.
- Adjustments needed for integrating with build systems like CMake or Bazel.

### Deprecation and Removal of Features

Some features or macros may be deprecated or removed over time. Upgrade guides advise on:

- Identifying deprecated features in your code.
- Recommended replacement features or idioms.
- Best practices for phased migration and deprecation handling.

### Best Practices for Smooth Migration

- **Incremental Migration:** Upgrade and test in small increments to identify breakage early.
- **Use Feature Flags and Compiler Warnings:** Observe new warnings or switches added to aid migration.
- **Leverage `NiceMock` and `StrictMock`:** Explicitly control mock strictness to better match your testing needs.
- **Automated Test Runs:** Run your full test suite frequently to catch unexpected behavior changes.

<Tip>
Before starting a major upgrade, ensure you have a clean baseline with all tests passing on the current version.
</Tip>

## Example Upgrade Workflow

<Steps>
<Step title="Assess Current Code">
Analyze your current test and mock implementation for features that are deprecated or changed in the target version.
</Step>
<Step title="Review Release Notes and Breaking Changes">
Check the release notes and breaking changes documentation to understand what adjustments are necessary.
</Step>
<Step title="Update Build Configuration">
Make sure your compiler, build system, and dependencies meet the new version's requirements.
</Step>
<Step title="Refactor Mocks and Expectations">
Modify macros and API usages according to new syntax and semantics, referencing migration recipes for complex changes.
</Step>
<Step title="Adjust Mock Strictness">
Select appropriate mock strictness wrappers (`NiceMock`, `StrictMock`) to match your test philosophy and adopt new defaults if needed.
</Step>
<Step title="Run Tests Frequently">
Run your test suite after each migration step to identify and resolve failures early.
</Step>
<Step title="Troubleshoot and Fix Issues">
Consult troubleshooting guidelines and community resources if you encounter test failures or warnings.
</Step>
</Steps>

## Troubleshooting Upgrades

Upgrading major versions can trigger challenges that this guide helps you to navigate:

- Tests failing due to unexpected mock invocation or missing expectations
- Warnings or errors caused by changed default behaviors of mocks
- Compiler errors from changed macro syntax or added qualifiers
- Linker issues from updated build configurations

Review the test logs carefully. When encountering unexpected call failures, consider enabling verbose logging with the `--gmock_verbose=info` flag to gain detailed diagnostics.

## Related Resources

- [Breaking Changes and Migration Notes](./breaking-changes): Detailed catalog of breaking changes with migration instructions.
- [gMock Cookbook](../guides/mocking-patterns/gmock_cook_book): In-depth recipes for defining and using mocks effectively.
- [Mock Strictness Policies](../guides/mocking-patterns/mock-strictness-lifecycle): Understanding and adapting mock strictness and behaviors.
- [Typical Use Cases](../overview/features-workflows/example-use-cases): Real-world scenarios and best practices.

## Next Steps

- Carefully check release notes for your target upgrade version.
- Follow incremental migration steps with frequent test validation.
- Update mocks conscientiously, leveraging new strictness wrappers for improved test reliability.
- Use the tests generated by the sample projects or existing test suites to verify your migration success.

<Tip>
Keep abreast of the latest documentation changes and community discussions for smooth transitions and optimizations.
</Tip>

---

For detailed migration help, see the sections linked above and consult the full GoogleTest project repository and issue tracker for support and examples.


---