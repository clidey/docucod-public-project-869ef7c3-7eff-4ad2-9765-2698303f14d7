---
title: "Upgrade Guides"
description: "Step-by-step guidance for upgrading between major and minor versions, including advice for addressing deprecations and leveraging new features without regressions. Practical tips and strategies help users plan and execute smooth transitions."
---

# Upgrade Guides

GoogleTest's Upgrade Guides provide clear, step-by-step instructions for migrating your test suites between major and minor versions. Whether youâ€™re updating to leverage the latest features or to address deprecated functionality, these guides will help you navigate changes smoothly, avoid regressions, and maintain robust, reliable tests.

---

## 1. Introduction to Upgrading

Upgrading GoogleTest is essential to stay current with improvements, performance enhancements, and security patches. However, major version jumps can include breaking changes that require code modifications. This guide focuses specifically on upgrading your test suite code, providing practical tips and migration strategies.

You will learn how to:
- Identify deprecated features and alternatives
- Address breaking changes with minimal disruption
- Adopt new features to improve test quality and maintainability


## 2. Upgrade Preparation

Before starting the upgrade process, follow this checklist to avoid common pitfalls:

- **Review your current version**: Confirm your existing GoogleTest version to identify relevant migration notes.
- **Backup your tests**: Make a complete backup to prevent data loss.
- **Read breaking changes documentation**: Consult [Breaking Changes & Migration Notes](/changelog/breaking-changes-migrations/breaking-changes).
- **Use a separate branch or environment**: Isolate your upgrade work to avoid disruption to active development.
- **Run your existing tests**: Establish a baseline with current test pass/fail status.

<Tip>
Upgrading incrementally, such as moving through minor versions before jumping major versions, can reduce complexity and provide clearer insight into changes.
</Tip>

## 3. Addressing Breaking Changes

Some upgrades introduce breaking changes that require deliberate updates to your test code.

### Common Breaking Changes

- **Mandatory C++17 Support**: From version 1.17.0 onwards, GoogleTest requires a minimum of C++17 standard. Update your compiler options accordingly.

- **Test Naming Restrictions**: Avoid underscores in test suite and test names, as these restrictions have been enforced to accommodate internal naming conventions.

- **Legacy Mock Macro Migration**: Transition from `MOCK_METHODn` macros to newer `MOCK_METHOD` with variadic templates.

- **Death Test Suite Naming**: Death tests must follow updated naming guidelines to ensure they function correctly with threading and process models.

- **Null Pointer Assertions**: Replace uses of `NULL` with `nullptr` in assertions for improved type safety and clarity.

### Migration Tips

- Use automated search-and-replace scripts for test name adjustments.
- Prefer `static_assert` or compiler flags to enforce the C++17 standard in your build system.
- Consult the [Deprecated APIs and Removals](/changelog/breaking-changes-migrations/deprecations) guide for specific features removed or replaced.

<Note>
Always run all tests after applying migration steps to detect issues early.
</Note>

## 4. Leveraging New Features

Upgrading unlocks access to new capabilities that can simplify your tests and improve expressiveness.

- **Enhanced Assertions**: The latest GoogleTest versions offer improved expressive assertions and matcher APIs, enabling you to write clearer, intent-revealing tests.

- **Parameterization Improvements**: Take advantage of richer support for value- and type-parameterized tests to improve coverage and reduce redundancy.

- **Custom Test Environments & Event Listeners**: Harness extension points to customize global setups and test event handling.

- **Advanced Mocking Techniques**: Utilize new `NiceMock` and `StrictMock` wrappers and advanced expectations chaining for more precise mock control.

<Tip>
Gradually refactor test suites to incorporate these improvements, enhancing maintainability over time.
</Tip>

## 5. Step-by-Step Example: Upgrade from 1.16.x to 1.17.x

1. **Confirm environment supports C++17 or higher.** Update your build setup to specify `-std=c++17` or equivalent.
2. **Modify test names to remove underscores:** For example, rename `TEST_MySuite, Test_Name` to `TEST_MySuite, TestName`.
3. **Replace uses of `NULL` with `nullptr` in assertions:**

```cpp
EXPECT_EQ(ptr, nullptr);
ASSERT_NE(ptr, nullptr);
```

4. **Update mock method declarations:** Convert older `MOCK_METHOD` macros with fixed parameters to the variadic `MOCK_METHOD` form.

5. **Run tests and verify successful execution.**

6. **Optionally, use new ASSERT/EXPECT matchers and parameterized tests to clean up tests.**

## 6. Troubleshooting Upgrades

Upgrading test suites can encounter issues, some common areas to check include:

- **Compilation errors related to C++ version or features:** Ensure `-std=c++17` is applied correctly and your compiler version supports it.

- **Broken test registrations:** Verify that test names adhere to the new naming conventions and macros match the upgraded APIs.

- **Mock-related incompatibilities:** Confirm all mock declarations and expectations use the new formats.

- **Death test failures:** Check that death test naming and styles comply with updated behavior and platform requirements.

For detailed help, see the [Troubleshooting Guide](/faq/troubleshooting-faq/faq-test-failures-troubleshooting) and [Breaking Changes & Migration Notes](/changelog/breaking-changes-migrations/breaking-changes).

<Warning>
Do not bypass upgrading deprecated features by suppressing warnings; this may lead to brittle tests and incompatibilities.
</Warning>

## 7. Additional Resources and Next Steps

- **Full Release History:** [Version History & Highlights](/changelog/release-highlights/all-releases)
- **Breaking Changes:** [Breaking Changes & Migration Notes](/changelog/breaking-changes-migrations/breaking-changes)
- **Deprecations:** [Deprecations & Removals](/changelog/breaking-changes-migrations/deprecations)
- **Installation & Setup:** [Setup & Installation Guide](/getting-started/setup-and-installation/prerequisites-system-requirements)
- **New Features:** [Advanced Testing Patterns](/guides/advanced_testing_patterns/using_matchers_assertions)
- **Mocking Upgrades:** [Advanced Mocking Strategies](/guides/practical_tips_and_patterns/mocking_advanced_strategies)

---

Upgrading your GoogleTest environment improves test reliability and unlocks modern C++ testing innovations. Carefully follow these upgrade paths to ensure a smooth transition and maintain your continuous integration workflows seamlessly.
