---
title: "Deprecations"
description: "Lists all deprecated APIs, features, and build configurations, along with timelines and suggested alternatives. Helps users proactively refactor their codebase before features are removed."
---

# Deprecations

This page provides a comprehensive list of all deprecated APIs, features, and build configurations in GoogleTest and GoogleMock. It serves as an essential resource to help you proactively identify deprecated elements in your codebase, understand their planned removal timelines, and discover recommended alternatives. By referencing this page, you can efficiently plan and execute refactoring efforts to maintain compatibility and leverage the latest framework improvements.

---

## Why Monitor Deprecations?

GoogleTest and GoogleMock evolve continuously to improve usability, performance, and maintainability. This evolution sometimes requires deprecating older APIs or configurations, which:

- May become unsupported in future releases.
- Could cause compilation warnings or errors in the latest C++ standards.
- Often have safer or more efficient alternatives.

Monitoring deprecations ensures your test code remains robust, future-proof, and compatible with modern C++ practices.

---

## Categories of Deprecations

### 1. Mocking Macros and Methods

The transition from the old `MOCK_METHODn` macros family to the unified and improved `MOCK_METHOD` macro is a key deprecation effort aimed at simplifying mocking syntax and enhancing versatility.

- **Deprecated:** `MOCK_METHOD0`, `MOCK_METHOD1`, ..., `MOCK_CONST_METHODn`, and related variants.

- **Recommended:** Use the generic `MOCK_METHOD(ReturnType, MethodName, (Args...), (Qualifiers))` macro.

- **Explanation:** The generic macro supports constness, noexcept, reference qualifiers, and call types in a single, flexible interface.

**Example Migration:**
```cpp
// Old style - deprecated
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD2(GetValue, int(int, int));

// New style - recommended
MOCK_METHOD(bool, Foo, (int), (override));
MOCK_METHOD(int, GetValue, (int, int), (const, override));
```

---

### 2. Mock Strictness Wrappers

To control how uninteresting calls are handled on mock objects, GoogleMock offers three wrappers:

- `NiceMock<T>` suppresses warnings on uninteresting calls.
- `NaggyMock<T>` (default behavior) warns on uninteresting calls.
- `StrictMock<T>` treats uninteresting calls as errors.

While `NaggyMock` remains the standard, newly introduced or legacy methods related to strictness handling may be subject to deprecation in future versions. Users should align with the established usage patterns described below.

**Best Practice:**
```cpp
using ::testing::NiceMock;
using ::testing::StrictMock;

NiceMock<MockClass> nice_mock;    // Suppresses warnings
StrictMock<MockClass> strict_mock;  // Fails on uninteresting calls
```

*Note:* These wrappers only affect mock methods defined *directly* in the mock class using `MOCK_METHOD`. Methods mocked in base classes might be unaffected. Ensure virtual destructors exist in your mock classes for reliable behavior.

---

### 3. Build and Compiler Requirements

- **Minimum C++ Standard:** GoogleTest now requires C++17 as the minimum supported version. Projects using older standards should update compilation flags accordingly.

- **Compiler Support:** Legacy support for outdated compilers (such as Visual C++ versions older than 2015) has been dropped.

- **Deprecated Build Options:** Certain build flags and macros related to legacy platform support or runtime settings have been removed or marked deprecated.

*Tip:* Ensure your build system enforces C++17 and use the modern recommended compiler versions for a smooth experience.

---

### 4. API Elements

- Some older mock method control macros, deprecated matchers, or utility functions may have been marked deprecated to encourage use of newer, more consistent alternatives.

- For instance, earlier specialized mock macros for class templates or call type specifications are superseded by the generic `MOCK_METHOD` and respective qualifiers.

- Deprecated APIs will generate compile-time warnings describing alternatives to simplify migration.

---

## Suggested Alternatives and Migration Paths

- Replace all old `MOCK_METHODn*` macros with the unified `MOCK_METHOD` macro.

- Use `EXPECT_CALL` and `ON_CALL` as per current best practices for expectation management.

- For controlling uninteresting calls, use `NiceMock` or `StrictMock` as appropriate.

- Upgrade your build environment to support C++17 or later.

- Review and remove deprecated compiler flags and macros no longer supported.

- Consult the [Breaking Changes](https://github.com/google/googletest/blob/main/docs/changelog/breaking-changes-migrations/breaking-changes.md) page for detailed migration guidance.

---

## How This Page Fits Into the Documentation

This `Deprecations` page works in conjunction with:

- **Breaking Changes Page:** For critical changes that may break existing code and detailed migration guides.
- **Mock Methods API:** To understand the modern approach to mocking methods and the advantages of the new APIs.
- **Nice, Naggy, Strict Mock API:** Details on strictness control for mocks.
- **Migration Guides:** Step-by-step instructions to update codebases.

See the [Version History](https://github.com/google/googletest/blob/main/docs/changelog/release-notes/version-history.md) for release context and timelines.

---

## Practical Tips

- Start migration early upon announcement of deprecations to avoid last-minute rush.
- Use compiler warnings as indicators of deprecated usage.
- Leverage automated tools or static analyzers where possible to identify deprecated APIs.
- Validate tests carefully after migration, paying attention to mock strictness behavior changes.

---

## Troubleshooting Deprecation Issues

- **Deprecated Macro Warnings:** Verify that all mock macros follow the `MOCK_METHOD` syntax.
- **Unexpected Call Errors After Switching to StrictMock:** Inspect whether uninteresting calls are properly expected, or add necessary `EXPECT_CALL`s.
- **Build Failures Due to Compiler Version or Standard:** Upgrade your compiler and set your build to use C++17.

Refer to the [Troubleshooting Common Setup Issues](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-and-validation/troubleshooting-common-issues.md) for general help.

---

## Additional Resources

- [Mock Methods API](https://github.com/google/googletest/blob/main/docs/api-reference/mocking-and-matcher-api/mock-methods-api.md)
- [Nice, Naggy, Strict Mock API](https://github.com/google/googletest/blob/main/docs/api-reference/mocking-and-matcher-api/nice-naggy-strict-mock-api.md)
- [Breaking Changes & Migrations](https://github.com/google/googletest/blob/main/docs/changelog/breaking-changes-migrations/breaking-changes.md)
- [Migration Guides](https://github.com/google/googletest/blob/main/docs/changelog/breaking-changes-migrations/migration-guides.md)
- [Version History](https://github.com/google/googletest/blob/main/docs/changelog/release-notes/version-history.md)

---

## How to Contribute or Report a Deprecated Feature

If you encounter undocumented deprecations or have suggestions for smoother migration, please contribute by submitting issues or pull requests at the [GoogleTest GitHub repository](https://github.com/google/googletest).

---

*Last updated on the `main` branch.*

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/changelog/breaking-changes-migrations/deprecations.md", "range": "all"}]} />