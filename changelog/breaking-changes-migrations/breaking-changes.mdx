---
title: "Breaking Changes & Migration Notes"
description: "Identify and understand breaking or backward-incompatible changes introduced in recent releases. This page provides clear descriptions of affected features and practical steps for migrating test suites, ensuring users can update with minimal disruption."
---

# Breaking Changes & Migration Notes

When upgrading GoogleTest to recent versions, it’s critical to understand any breaking changes or backward-incompatible updates introduced. This page identifies such changes explicitly and walks you through practical migration strategies to update your test suites smoothly.

---

## Understanding Breaking Changes

GoogleTest evolves to improve robustness, maintainability, and modern C++ support. While these changes provide strong benefits, they may affect existing test code compatibility. This document helps you:

- Identify which features or behaviors have changed in backward-incompatible ways.
- Understand the impact on your tests.
- Follow clear, actionable migration steps to adapt your code.

### What Is a Breaking Change?

A breaking change is any modification that:

- Removes support for previously supported syntax or functionality.
- Changes the behavior or semantic of existing features in a way that might cause your tests to fail or behave differently.
- Requires you to modify your existing test code or test setup to maintain compatibility.

Breaking changes are deliberately introduced only when necessary to keep GoogleTest modern, efficient, and maintainable.

<Check>
Always review this page carefully before upgrading, especially if your project has a large or complex test suite. Skipping these notes might lead to unexpected test failures or incorrect test behaviors.
</Check>

## Current Breaking Changes and Migration Instructions

### C++17 Minimum Standard Requirement from Version 1.17.0

- **Change:** Starting with GoogleTest 1.17.0, C++17 or a newer standard is mandatory for compilation.
- **Impact:** If your build environment targets an older C++ standard, compilation will fail.
- **Migration:** Update your build system or compiler flags to enable at least C++17.

### Test and Test Suite Naming Restrictions

- **Change:** Underscores (`_`) in test suite or test names can cause naming collisions or undefined behavior due to how GoogleTest generates internal class names.
- **Impact:** Tests named using underscores in certain positions could break unexpectedly or fail to compile.
- **Migration Steps:**
  1. Avoid underscores in `TestSuiteName` and `TestName`.
  2. Don't start or end these names with an underscore.
  3. Remove duplicate or ambiguous underscores that might clash.
  4. Rename affected tests following these guidelines to ensure future compatibility.

  Refer to the detailed rationale and examples in the [FAQ on Test Naming](../overview/product-intro/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

### Changes in Mocking Macros

- **Change:** The legacy `MOCK_METHODn` macros are deprecated in favor of the new generic `MOCK_METHOD` macro.
- **Impact:** Tests still using the old macros may produce deprecation warnings and miss improved features.
- **Migration:** Convert old-style mocks to the new syntax:

  ```cpp
  // Old:
  MOCK_METHOD1(Foo, bool(int));
  MOCK_CONST_METHOD0(Bar, void());

  // New:
  MOCK_METHOD(bool, Foo, (int), (override));
  MOCK_METHOD(void, Bar, (), (const, override));
  ```

- **Benefit:** The new `MOCK_METHOD` supports move-only types, better type safety, and clearer semantics.

### Death Test Suite Naming Conventions

- **Change:** Death tests must reside in test suites whose names end with `DeathTest`.
- **Impact:** If your death tests are mixed into suites without these suffixes, unexpected order or threading issues may occur, leading to flakiness or test hangs.
- **Migration:**
  1. Split death tests into separate test suites named with the `DeathTest` suffix.
  2. Use `using` aliases to share fixture code when needed:

  ```cpp
  class FooTest : public ::testing::Test { ... };
  using FooDeathTest = FooTest;

  TEST_F(FooTest, NormalTest) { ... }
  TEST_F(FooDeathTest, DeathTest) { ... EXPECT_DEATH(...); }
  ```

### Handling `EXPECT_EQ` and `ASSERT_EQ` with Null Pointers

- **Change:** Using `NULL` in `EXPECT_NE` or `ASSERT_NE` triggers unsupported behavior due to C++ template peculiarities.
- **Impact:** Pulling `EXPECT_NE(NULL, ptr)` syntax is not supported and will cause compilation errors.
- **Migration:** Replace `NULL` with `nullptr` for all null pointer assert macros.

### Mock Object Leak Checks in Death Tests

- **Change:** Death tests run in child processes where mock objects may not get destructed as expected.
- **Impact:** This can cause GoogleMock’s leak detector to report false positive mock leaks.
- **Migration:** Use `::testing::Mock::AllowLeak()` for mock objects used in death tests to suppress false leak detection.

## Practical Migration Workflow

Follow these steps to minimize upgrade friction:

<Steps>
<Step title="Review Your Test Suite">
Check your existing test suite for naming patterns, use of null pointer macros, presence of death tests, and mocking macros.
</Step>
<Step title="Update Your Toolchain">
Configure your build system to require at least C++17 standard (or newer).
</Step>
<Step title="Rename Tests to Avoid Underscore Issues">
Rename any tests with problematic underscores to avoid clashes with GoogleTest’s class generation.
</Step>
<Step title="Refactor Death Tests">
Place death tests into designated test suites suffixed with `DeathTest` and separate from normal tests.
</Step>
<Step title="Convert Old-Style Mocks">
Replace deprecated `MOCK_METHODn` family macros with the new `MOCK_METHOD` macro syntax.
</Step>
<Step title="Replace NULL with nullptr">
Search and replace usages of `NULL` in assertion macros with `nullptr`.
</Step>
<Step title="Configure Mock Leak Handling in Death Tests">
Add `Mock::AllowLeak()` for mocks in death tests to prevent false positives.
</Step>
<Step title="Rebuild and Validate">
Rebuild the codebase and run all tests. Investigate and fix any failures arising from the above changes.
</Step>
</Steps>

## Common Pitfalls and Troubleshooting

### Compiler Errors After Upgrade

- Ensure your compiler supports C++17 and your build flags enable it.
- Verify no test suite or test contains disallowed naming patterns.
- Confirm all mocks use supported macro forms.

### Unexpected Test Failures or Timeouts

- Check if death tests are properly isolated into `*DeathTest` suites.
- Confirm `Mock::AllowLeak()` applied where mocks are used inside death tests.
- Look out for assertions using `NULL` where `nullptr` is expected.

### Linker Errors Relating to Static Members

- Ensure static const members used in tests have corresponding definitions outside the class as per C++ requirements.

## Additional Migration Resources

- [Migration Guides](/changelog/breaking-changes-migrations/upgrade-guides)
- [Deprecations & Removals](/changelog/breaking-changes-migrations/deprecations)
- Test naming conventions and rationale: [FAQ on Test Names](../overview/product-intro/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- Death test conventions: [Death Tests Guide](../guides/advanced_testing_patterns/death_testing.md)

---

## Summary

This page helps you identify breaking changes introduced in recent GoogleTest releases and guides you through migrating your tests and mocks accordingly. Following the recommendations here ensures your test suites remain robust, maintainable, and compatible with modern GoogleTest versions.

---

<Tip>
Keeping your test suite up to date with GoogleTest’s evolving standards unlocks improved stability, enhanced C++ language features, and better test expressiveness.
</Tip>

<Note>
Adhering strictly to test naming rules and build environment prerequisites is key to successful GoogleTest upgrades. Avoid shortcuts to prevent subtle runtime errors.
</Note>
