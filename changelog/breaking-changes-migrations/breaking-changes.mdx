---
title: "Breaking Changes & Deprecations"
description: "Details on removals, incompatible alterations, and features scheduled for deprecation in upcoming releases. Clearly flags what could impact your test and build setups, with actionable insights for remediation."
---

# Breaking Changes & Deprecations

This page provides crucial information on recent and upcoming breaking changes and deprecated features in GoogleMock. It highlights modifications that may affect your test suites, build environments, or integration workflows, and offers actionable guidance to help you adapt your code smoothly.

---

## 1. Understanding Breaking Changes

Breaking changes are modifications in the GoogleMock API or behavior that are incompatible with previous versions. They may require modifications in your existing test code to compile or run correctly.

### Key Points:
- Breaking changes can involve renamed macros, removed functions, altered behavior, or changed default settings.
- These changes are introduced sparingly and primarily during major version updates.
- Staying updated with breaking changes helps avoid unexpected test failures or build issues.


## 2. Deprecation Policy

Deprecations signal that certain features or interfaces will be removed in future releases. Deprecation provides advance notice and encourages users to transition away from the deprecated APIs.

### What to Expect:
- Deprecated features continue to work but emit warnings.
- Documentation notes deprecated functionality explicitly.
- Migration paths or alternative recommended APIs are provided where applicable.


## 3. Notable Breaking Changes

### 3.1. Macro and Flag Naming Revisions

- Some GoogleMock flags and macros have been renamed to better align with internal standards and avoid conflicts.
- Example: Flags previously prefixed differently may now use the unified `GMOCK_FLAG` format.

**Action:** Update any direct references to flags such as `--gmock_verbose` and macros to their current names as per the latest `gmock-port.h` declarations.


### 3.2. Minimum Compiler Requirements

- From recent updates, GoogleMock requires at least Visual C++ 2015 (version 14.0) or equivalent modern compilers supporting C++17.

**Action:** Ensure your build environment uses supported compilers meeting or exceeding these requirements.


### 3.3. Move-Only Type Support in Mock Methods

- Mocking methods that accept or return move-only types (e.g., `std::unique_ptr<>`) is fully supported with the `MOCK_METHOD` macro.

**Action:** If updating from legacy versions, refactor mocks for move-only types according to the patterns documented in the gMock Cookbook and Mocking Reference to avoid compilation errors.


### 3.4. Removal of `MOCK_METHODn` Legacy Macros

- The old family of macros `MOCK_METHOD0` through `MOCK_METHOD10` is deprecated in favor of the versatile `MOCK_METHOD` macro.

**Action:** Migrate all old-style mock method macros to use `MOCK_METHOD` with explicit argument lists and specifiers.


### 3.5. Flag Parsing and Initialization Changes

- Initialization of GoogleMock via `InitGoogleMock()` now properly parses command-line flags and removes recognized flags from `argv`.
- Flags unrelated to GoogleMock are preserved.

**Action:** When initializing, continue to use `InitGoogleMock`. Review custom integration scenarios if you manually manipulate flags.


## 4. Deprecated Features and Upcoming Removal

### 4.1. Deprecated Macros and Functions

- Internal macros ending with an underscore (e.g., those in `gmock-port.h`) are for internal use only and subject to change without notice.

**Action:** Do not use internal macros directly in your code; rely only on public API macros and functions.


### 4.2. Legacy Mocking Syntax

- Avoid using legacy macros for mocking non-virtual methods or old-style `MOCK_METHODn` macros. They are slated for removal in future versions.


## 5. Migration Tips

- **Review all mocked classes:** Ensure usage of the new `MOCK_METHOD` macro with proper argument parentheses, especially when your methods use types with commas such as templates or pairs.

- **Flags:** Transition any flag usage in test runners or CI configurations to the canonical `--gmock_*` form, and refer to updated macro definitions in `gmock-port.h`.

- **Compiler compatibility:** Confirm the compiler version and settings meet minimal requirements (C++17 support and MSVC >= 2015 if applicable).

- **Uninteresting and unexpected calls:** Use `NiceMock`, `NaggyMock`, or `StrictMock` wrappers appropriately to maintain desired test strictness while conforming to new mock default behavior.


## 6. Troubleshooting Common Impact Areas

- **Unexpected macro or flag errors:** Usually caused by outdated macro or flag usage; update to match current naming conventions.

- **Compiler errors with move-only types:** Transition to the new pattern supporting move-only method arguments.

- **Test failures after upgrading:** Confirm that expectations and default behaviors align with any adjusted call cardinality defaults.

- **Initialization anomalies:** Always invoke `InitGoogleMock()` early in your test harness, and avoid mixing manual flag manipulation that conflicts with its parsing logic.


## 7. Additional Resources

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for practical guidance on updating mock definitions and usages.
- [Mocking Reference](./reference/mocking.md) for the latest syntax and flag descriptions.
- [gmock-port.h source](https://github.com/google/googletest/blob/main/googlemock/include/gmock/internal/gmock-port.h) for current macro declarations and flag definitions.
- [InitGoogleMock Test Coverage](./googlemock/test/gmock_test.cc) illustrating parsing and flag initialization.

---

## Summary
This documentation guides you through breaking changes and deprecated features impacting GoogleMock usage, focusing on user-facing API shifts, build configuration requirements, and behavior modifications. It arms you with migration advice and troubleshooting tips to ensure your tests remain correct and maintainable.

---