---
title: "Breaking Changes"
description: "A definitive list of any backwards-incompatible changes, including removals, default behavior modifications, or language/version requirement increases. Each change is explained with examples and rationale to support seamless transitions."
---

# Breaking Changes

This page presents a definitive list of all backwards-incompatible changes introduced in GoogleTest. It details removals of features, modifications to default behaviors, and increased requirements on language or version compatibility. Each change is explained with examples and rationale to help you transition your tests and codebases smoothly without disruption.

---

## Understanding Breaking Changes

Breaking changes are modifications that may affect existing test suites such that they no longer compile or behave as before. Awareness and careful handling of these changes are critical to maintain the stability and reliability of your test environments.

This page focuses solely on backward-incompatibilities. For feature enhancements or bug fixes that don't cause compatibility issues, consult the respective changelog sections.

---

## Types of Breaking Changes Covered

- **Feature Removals:** Deletions or discontinuations of APIs, macros, or behaviors that were previously available.
- **Default Behavior Modifications:** Changes in how the framework behaves by default, potentially affecting test outcomes.
- **Language and Version Requirements:** Increases in the minimum required compiler or language standard support.

Each entry explains what changed, why it changed, and provides examples or migration suggestions.

---

## Notable Breaking Changes

### 1. Minimum C++ Standard Requirement Increased to C++17

Starting from GoogleTest version 1.17.x, the minimum C++ standard required for building GoogleTest has been raised to **C++17**. Attempting to compile with earlier standards will result in errors.

**Example:**

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

**Rationale:** This change enables usage of modern C++ features for improved code quality, performance, and maintainability.

**Migration Tips:**

- Update your project build configuration to enforce C++17 or later.
- If using GoogleTest in a pure C codebase, pass appropriate `-DCMAKE_CXX_FLAGS` to include C++17 support.

### 2. Mixing `TEST` and `TEST_F` in the Same Test Suite is Illegal

GoogleTest enforces that all tests in the same test suite must use the **same test fixture class**. Mixing `TEST` (no fixture) and `TEST_F` (fixture) definitions within the same test suite now triggers a runtime error.

**Example of Disallowed Usage:**

```cpp
TEST(FooTest, Test1) { ... }
TEST_F(FooTest, Test2) { ... }  // Causes error: mixed fixtures in FooTest
```

**Rationale:** This enforcement ensures uniform test suite semantics and avoids ambiguous state sharing.

**Migration Tips:**

- Separate tests requiring fixtures into their own test suites.
- Alternatively, convert `TEST`s to use `TEST_F` with a fixture class.

### 3. Test Suite Names and Test Names Should Avoid Underscores

Underscore characters (`_`) in test suite and test names are discouraged because they interfere with the generated C++ class names and may cause collisions or compilation errors.

**Example Problem:**

```cpp
TEST(Time_Flies, Like_An_Arrow) { ... }  // May cause symbol clashes
```

**Recommended Practice:**

- Avoid underscores at the start or end of names.
- Avoid consecutive underscores.
- Prefer camel case or other naming schemes without underscores.

**Rationale:** Prevents undefined behavior and improves compiler compatibility.

### 4. Removal of Deprecated Testing Macros

Certain legacy macros such as `INSTANTIATE_TEST_CASE_P` and `TYPED_TEST_CASE_P` have been deprecated and replaced with their `*_SUITE_*` equivalents.

**Migration Recommendation:** Replace

```cpp
INSTANTIATE_TEST_CASE_P(MyTests, FooTest, Values(1, 2, 3));
```

with

```cpp
INSTANTIATE_TEST_SUITE_P(MyTests, FooTest, Values(1, 2, 3));
```

This ensures compatibility with current and future GoogleTest versions.

### 5. Visual Studio CRT Linkage Mismatch Requires Explicit Option

In Visual Studio, GoogleTest links statically to the C runtime (CRT) by default, but user projects typically link dynamically by default. This mismatch triggers linker errors like:

```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

**Solution:** Pass the CMake option:

```cmake
-DBUILD_GMOCK=ON -Dgtest_force_shared_crt=ON
```

or otherwise configure your build to align CRT linkage.

---

## Best Practices to Handle Breaking Changes

- **Review Release Notes and Migration Guides:** Always check the official release announcements to understand any breaking changes.
- **Adapt Test Suite Names and Fixtures Early:** Follow naming conventions and fixture usage rules upfront to avoid runtime errors.
- **Upgrade Compiler and Language Standard:** Upgrade your toolchains to support at least C++17 before upgrading GoogleTest.
- **Use Modern Macros:** Replace deprecated macros with their current counterparts.

---

## Troubleshooting Breaking Changes

If you encounter build or runtime errors after upgrading:

- Verify your compiler supports C++17 and the appropriate flags are set.
- Check that your test suite names and test names do not contain leading/trailing underscores or consecutive underscores.
- Confirm no mixing of `TEST` and `TEST_F` macros within a test suite.
- Ensure correct CRT linkage settings, especially on Visual Studio.
- Review your use of deprecated macros and update accordingly.

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html): Offers a thorough introduction to tests and fixtures.
- [Assertions Reference](reference/assertions.md): Contains detailed info on assertion macros.
- [FAQ on Naming Conventions](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore): Explains underscore restrictions.
- [CMake Build Instructions](googletest/README.md#build-with-cmake): Guides on build system configuration.
- [Release Notes](https://github.com/google/googletest/releases): Official changelogs with details on version changes.

---

This page represents critical guidance for maintaining compatibility as GoogleTest evolves, enabling a smoother and more stable testing experience.


<Info>
For the latest and complete details, always cross-check this page with the official release notes found at the [GoogleTest GitHub releases page](https://github.com/google/googletest/releases) and verify your test environment settings accordingly.
</Info>

---

### Version Compatibility Matrix Example

| GoogleTest Version | Minimum C++ Standard | Major Known Breaking Changes                         |
|--------------------|---------------------|-----------------------------------------------------|
| 1.17.x             | C++17               | C++17 required, no mixing TEST and TEST_F in suites |
| < 1.17.x           | C++03 or C++11 (varies)| Older macro usage, looser naming, dynamic crt linking|



