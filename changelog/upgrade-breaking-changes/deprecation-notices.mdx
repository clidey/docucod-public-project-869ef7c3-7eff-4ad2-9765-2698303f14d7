---
title: "Deprecation Notices"
description: "Lists all features, APIs, or options planned for removal or already deprecated, along with timelines and recommended alternatives, so users can proactively refactor and future-proof their code."
---

# Deprecation Notices

This page provides a detailed list of **deprecated features, APIs, and options** within GoogleMock that are planned for removal or have been superseded. Keeping track of these deprecations helps you proactively update and future-proof your codebase to ensure compatibility with upcoming releases.

---

## Deprecated Mocking Macros

### Transition from Old-Style `MOCK_METHODn` Macros

The older `MOCK_METHODn` family of macros (
`MOCK_METHOD1`, `MOCK_CONST_METHOD1`, `MOCK_METHOD1_T`, etc.) has been deprecated in favor of the **unified and more expressive** `MOCK_METHOD` macro introduced in 2018.

```cpp
// Deprecated old style:
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD1(Foo, bool(int));
// Recommended replacement:
MOCK_METHOD(bool, Foo, (int), ());
MOCK_METHOD(bool, Foo, (int), (const));
```

**Migration notes:**
- New macros support qualifiers such as `const`, `override`, `noexcept`, `Calltype` and reference qualifiers consistently.
- Old macros will remain supported temporarily but will be removed in future releases.
- It is highly recommended to migrate fully to the new `MOCK_METHOD` macro.

## Deprecated Functionality

### Mocking Non-Virtual Methods with Inheritance

Explicit inheritance-based mocking of **non-virtual** methods is discouraged and considered legacy.

**Recommendation:** Use *Hi-perf dependency injection* via unrelated mock classes with matching signatures, or refactor to interfaces for better testability.

Example legacy pattern:

```cpp
class MockPacketStream : public PacketStream {  // discouraged
 public:
  MOCK_METHOD(const Packet*, GetPacket, (size_t), (const));
  ...
};
```

Use instead:

```cpp
class MockPacketStream {
 public:
  MOCK_METHOD(const Packet*, GetPacket, (size_t), (const));
  ...
};
```

Then use template-based injection to switch implementations at compile time.

## Deprecated Default Mock Behavior

### Naggy Mocks as Default

By default, mock objects warn on uninteresting calls, termed "naggy".

**Upcoming change:** The default will change to **nice mocks** (which suppress warnings).

To prepare your tests:

- Use `NiceMock<T>` when you want to suppress warnings for uninteresting calls.
- Use `StrictMock<T>` to treat uninteresting calls as errors.

See [The Nice, the Strict, and the Naggy](gmock_cook_book.md#NiceStrictNaggy) for detailed guidance.

## Deprecated Flags and Configuration

- The flag `--gmock_catch_leaked_mocks` is planned for removal. Manage mock lifetime explicitly.

- `--gmock_verbose` values other than `info`, `warning`, or `error` are not supported and will fallback to `warning`. Ensure to specify valid verbosity levels.

## Deprecated Expectations and Actions Patterns

### Using `EXPECT_CALL` Without Proper Action Clauses

- Avoid specifying `EXPECT_CALL` without `.WillOnce()` or `.WillRepeatedly()` unless you explicitly want to verify call counts.

- Using `ON_CALL` is recommended for setting default behaviors without verification obligations.

### Legacy Action Macros

Old macros like `ACTION_P`, `ACTION_P2`, and others remain supported but complex new patterns should prefer C++11 lambda or functor-based actions for clarity and maintainability.

## Removing Support for Variadic Function Mocking

- Direct mocking of variadic functions (`...`) is not supported and will be **officially removed**. Prefer refactoring using overloads or abstract interfaces.

## Deprecated Usage Patterns in Sequences and Ordering

- Implicit call ordering without explicit sequences or `After` clauses may become less permissive.

- It is encouraged to use clear `InSequence` or `After` constraints to avoid brittle tests.

## Deprecation Timeline

| Feature / API                         | Deprecated Since | Planned Removal Version | Recommended Alternative                                                  |
|-------------------------------------|------------------|-------------------------|-------------------------------------------------------------------------|
| Old-style `MOCK_METHODn` macros      | v1.8.0 (2018)     | v3.x expected            | Use unified `MOCK_METHOD` macro                                         |
| Inheritance-based non-virtual mocks  | -                | TBD                     | Unrelated mock classes with matching signatures (Hi-perf DI)           |
| Naggy mock as default strictness     | Current default   | Future versions          | Use `NiceMock` as default; explicitly choose `NaggyMock` or `StrictMock`|
| Variadic function mock support        | Deprecated       | TBD                     | Refactor code to avoid variadic mocks                                  |
| `--gmock_catch_leaked_mocks` flag    | TBD              | TBD                     | Manage mock lifecycle manually or via RAII                             |

## Helpful Migration References

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — offers detailed recipes for modern mocking.
- [Legacy gMock FAQ](gmock_faq.md) — addresses many migration questions.
- [Mocking Reference](reference/mocking.md) — up-to-date macros and usage best practices.
- [Setting Expectations and Call Sequencing](api-reference/mocking-api/expectations-and-sequencing.md) — guidance on proper expectation patterns.

---

<Tip>
Deprecations are announced well in advance to give you ample time to adapt. Always check the latest release notes for detailed migration guides and to avoid broken builds.
</Tip>

<Tip>
Use compiler deprecation warnings and the `--gmock_verbose=info` flag during test runs to detect deprecated usage early.
</Tip>

---

## Summary

Staying current with deprecated features enables you to maintain stable test suites, improve test clarity, and leverage new framework capabilities. Actively migrate your tests and mocks following the official recommendations, removing legacy macros and patterns.

For detailed upgrade assistance, consult the [Upgrade Guides](changelog/upgrade-breaking-changes/upgrade-guides.mdx) and ensure all mock declarations and expectations follow the modern syntax and practices.

---

### Source Code & Additional Resources

- [GoogleMock GitHub Repository](https://github.com/google/googletest/tree/main/googlemock)
- [Mock Class Macros Reference](api-reference/mocking-api/mock-class-macros.md)
- [Matchers and Actions Reference](api-reference/mocking-api/matchers-actions.md)
- [gMock Cookbook](docs/gmock_cook_book.md)

---