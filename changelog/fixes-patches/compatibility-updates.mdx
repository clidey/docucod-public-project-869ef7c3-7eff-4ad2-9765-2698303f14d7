---
title: "Compatibility Updates"
description: "Details improvements for platform, compiler, and standard library compatibility. Includes any changes supporting Google's C++ support policies and build environments."
---

# Compatibility Updates

This page details recent improvements that ensure GoogleMock remains compatible and fully functional across evolving platforms, compiler versions, and standard libraries. It highlights changes that address platform-specific quirks, compiler restrictions, and align with Google's C++ support policies and build environments.

---

## Platform and Compiler Compatibility Enhancements

GoogleMock continues to extend support for modern and legacy platforms while enforcing a minimum compiler standard that aligns with current C++ practices.

- **Minimum Compiler Version Checks**:
  - Visual C++ compilers are required to be at least MSVC 2015 or later. Older versions now trigger early compile-time errors to warn about unsupported environments.

- **C++ Standards Compliance**:
  - GoogleMock mandates a C++17-compliant environment, reflecting Google's commitment to modern, safe, and performant C++ standards.

- **Conditional Inclusion of Platform-Specific Headers**:
  - To maximize portability and minimize unnecessary dependencies, the internal portability layer uses conditional compilation to include platform-specific headers like `<pthread.h>` only when available and necessary.

- **Abseil Library Integration**:
  - Where Abseil (`GTEST_HAS_ABSL`) is available and enabled, GoogleMock leverages Abseil's macros, flag APIs, and utilities for improved portability and maintainability.

## Build Environment and Flag Management Updates

- **Flag Definitions and Accessors**:
  - GoogleMock internally manages command-line flags for verbose logging and mock behavior defaults using a unified macro-based flag system.
  - This system transparently supports both native Google Test flags and Abseil flag definitions, enabling seamless integration with different build ecosystems.

- **Deprecated/Unsupported Platforms and Environments**:
  - Embedded or specialized platforms lacking filesystem support or threading capabilities are now explicitly flagged, ensuring GoogleMock’s features gracefully degrade or are disabled where support cannot be guaranteed.

- **Strict Compiler Warning and Deprecation Handling**:
  - Compiler-specific pragmas have been introduced to suppress deprecated warnings on supported compilers and handle compiler idiosyncrasies, like those of Clang on Windows.

## Thread Safety and Synchronization

- GoogleMock relies heavily on Google Test’s internal synchronization primitives to ensure thread safety.
- Mutex and thread-local storage implementations are selected based on platform and compiler capabilities.
- On platforms without threading support, dummy implementations ensure compilation without offering concurrency guarantees.

## One-Time and Static Initialization

- The compatibility layer uses linker-initialized static mutexes and thread-local storage with platform-specific implementations, ensuring safe static initialization across platforms.

## Practical Tips and Considerations for Users

- **Compiler Compatibility**:
  - Ensure your compiler supports C++17 or later and meets the minimum version requirements for Visual Studio (2015+).

- **Flag Usage**:
  - Prefer accessing GoogleMock flags (`--gmock_verbose`, etc.) via the provided macros to ensure compatibility with Abseil or other flag implementations.

- **Building on Embedded or Restricted Platforms**:
  - Recognize that on platforms missing filesystem or threading capabilities, full GoogleMock functionality may not be available; users should configure these features accordingly.

- **Platform-Specific Build Options**:
  - On Windows, consider special build flags like `gtest_force_shared_crt` to resolve runtime linkage issues.

## Troubleshooting Common Compatibility Issues

<Tip>
If you receive compiler errors related to unsupported Visual C++ versions, upgrade your build environment to meet the minimum requirements.
</Tip>

<Warning>
Embedding GoogleMock in restricted platforms without standard filesystem or threading support might produce limited or no mocking functionality. Verify feature macro definitions and build configuration.
</Warning>

<Note>
Abseil integration is optional but recommended where supported for improved flag handling and macro support.
</Note>

## Additional Information

Refer to the following documentation for broader context and implementation details:

- [Framework Portability and Internal Utilities](https://github.com/google/googletest/blob/main/include/gtest/internal/gtest-port.h)
- [Mock Strictness Wrappers](https://github.com/google/googletest/blob/main/include/gmock/gmock-nice-strict.h)
- [Initialization and Main Functions](https://github.com/google/googletest/blob/main/include/gtest/internal/gtest-port.h#L1000) on initialization patterns

---

## Code Snippet Example: MSVC Compiler Version Enforcement

```cpp
#if defined(_MSC_VER) && _MSC_VER < 1900
#error "At least Visual C++ 2015 (14.0) is required to compile Google Mock."
#endif
```

This prevents unsupported MSVC versions from compiling GoogleMock code.

## How This Page Fits Into the Documentation Hierarchy

- This page resides in the changelog group dedicated to fixes and maintenance, emphasizing refinements that sustain GoogleMock's operability across environments.
- It complements sections like [Build, Integration, and Compatibility Issues FAQ](../faq/troubleshooting/build-integration-faq.mdx) and the [Supported Platforms & Requirements](../getting-started/prerequisites-installation/supported-platforms-requirements.mdx) guide.
- For users planning their CI pipelines and platform support, consult also the [CI Integration Guide](../guides/integration-scenarios/ci-integration.mdx).

---

## Closing Recommendations

- Regularly update your build environment to ensure compliance with Google’s C++ support policies.
- Use the documented flag macros to adjust GoogleMock runtime behavior rather than modifying internal variables.
- When customizing GoogleMock on embedded or exotic platforms, review the portability macros and adjust build flags accordingly.

---

*Maintainers and users rely on this compatibility and portability layer to keep GoogleMock robust and easy to integrate across diverse build environments, compilers, and platforms—ensuring seamless mocking capabilities now and in the future.*