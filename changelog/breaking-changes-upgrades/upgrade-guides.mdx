---
title: "Upgrade Guides"
description: "Step-by-step instructions and best practices for upgrading between major releases, with actionable tips for adapting code and configurations. This resource streamlines migration and reduces risk for teams updating their test infrastructure."
---

# Upgrade Guides

GoogleTest evolves to keep your testing infrastructure robust, modern, and efficient. This page delivers clear, step-by-step guidance for upgrading between major GoogleTest releases. By focusing on user outcomes, this resource ensures your migration is smooth, minimizes disruption, and helps you leverage new features securely and confidently.

---

## Why Upgrade?

Upgrading between major releases is essential to maintain compatibility with evolving C++ standards (e.g., C++17 requirement from v1.17.x), benefit from bug fixes, security enhancements, and to access new test features like advanced parameterized tests and improved mocking capabilities.

However, major updates may introduce changes that require adapting your existing test code and configurations. This guide addresses those challenges with practical advice and actionable tips.

---

## Upgrade Workflow

GoogleTest Upgrade Guides are designed as a progressive journey from preparation to post-upgrade validation:

### 1. Review Release Notes

Before upgrading, carefully review the detailed release notes for the target version. Key information to check includes:

- New features that can enhance your testing lifecycle
- Deprecated or removed functionalities
- Known breaking changes requiring manual intervention

This step helps anticipate impact and plan necessary code or environment changes.

### 2. Prepare Your Environment

Ensure your build environment supports the minimum requirements:

- Confirm your compiler supports C++17 or later (required from v1.17.x onwards)
- Update your build tools if necessary (e.g., CMake 3.14+ for certain integration methods)
- Backup existing test projects and configurations to avoid data loss

### 3. Update Dependencies

If you use GoogleTest as part of your build system, update your dependencies accordingly:

- For CMake projects, update the version tag in your `FetchContent_Declare` or submodule to the new release.
- For manual builds, download and build the new version following updated instructions.

Refer to the [Installation & Setup](getting-started/installation-setup/installation-methods.md) page for details.

### 4. Adapt Test Code and Configurations

Check your existing test code for patterns or constructs that may have changed:

- Verify that `TEST`, `TEST_F`, `TEST_P`, and typed tests conform to the updated syntax and semantics.
- Review any use of `INSTANTIATE_TEST_SUITE_P` for parameterized tests and update as needed.
- Update deprecated macros or APIs according to the changelog.
- Modify fixture setup/teardown if lifecycle management has nuanced changes.

### 5. Rebuild and Run Tests

Compile your test suite against the new GoogleTest version.

- Pay attention to compiler warnings or errors indicating deprecated code or API mismatches.
- Run your test suite and monitor for unexpected failures.
- Use `--gtest_list_tests` to verify test discovery remains intact.

### 6. Validate Test Results and Reporting

- Compare XML or JSON test reports for consistency.
- Confirm that unexpected changes in test outcomes are investigated.
- Check new logging or event listener features if integrated.

### 7. Optimize and Leverage New Features

- Explore new assertion types, test macros, or mocking behaviors introduced.
- Consider refactoring tests to benefit from performance or clarity enhancements.

---

## Best Practices & Tips

- **Incremental Upgrades:** Upgrade major versions one step at a time rather than skipping versions to catch and fix compatibility issues easier.
- **Use CI Pipelines:** Automate tests with Continuous Integration to promptly capture regression issues caused by the upgrade.
- **Keep Dependencies Synchronized:** When using GoogleMock together with GoogleTest, upgrade both simultaneously to avoid mismatches.
- **Consult Official Documentation:** Leverage the GoogleTest [Testing Reference](docs/reference/testing.md), [Assertions Reference](api-reference/core-testing-apis/assertions.md), and [Parameterized Tests](api-reference/core-testing-apis/parameterized-typed-tests.md) to adjust your tests correctly.
- **Handle Deprecated APIs:** Search your code for deprecated macros or APIs called out in release notes and refactor to their supported replacements promptly.
- **Share Knowledge:** Coordinate team members through documentation and code reviews during the upgrade to ensure uniform adoption.

---

## Common Migration Scenarios

### Adapting to the C++17 Requirement

From v1.17.x onwards, GoogleTest requires C++17 support:

- Update your compiler toolchain (GCC 7+, Clang 5+, MSVC 2017+).
- Update your project's build settings (e.g., `-std=c++17` in CMake).
- Verify that third-party dependencies linked with tests also support C++17.

### Updating Parameterized and Typed Tests

- Review that your use of `INSTANTIATE_TEST_SUITE_P` matches the new recommended API, especially the naming conventions and parameter generator usage.
- Check that your `TEST_P`, `TYPED_TEST`, and `TYPED_TEST_P` macros follow the current syntax rules.

### Handling Deprecated Test Macros

- Replace any legacy macros or aliases deprecated in the new release.
- For example, ensure `TEST_CASE` is replaced by `TEST_SUITE` as per GoogleTest terminology transitions.

### Modifying Test Environment and Shared Fixtures

- Adjust usage of `SetUpTestSuite()` and `TearDownTestSuite()` methods if lifecycle behaviors changed.
- Confirm correct use of `Environment` objects registered globally using `AddGlobalTestEnvironment()`.

---

## Troubleshooting

### Tests Not Discovered After Upgrade

- Confirm test macros are not disabled or incorrectly spelled.
- Use `--gtest_list_tests` to verify detection.
- Check that your namespace and test suite names follow recommended conventions with no underscores.

### Unexpected Test Failures

- Review assertion messages for deprecated usage or changed semantics.
- Check if test dependencies or mocks have been affected by API changes.
- Use scoped trace features (`SCOPED_TRACE`) to isolate failure points.

### Build Issues

- Verify compiler version compatibility.
- Confirm C++ standard flags are set consistently.
- Resolve any macro clashes flagged by the compiler (check flag overrides like `-DGTEST_DONT_DEFINE_<MACRO>`).

---

## Additional Resources

- [GoogleTest Primer](docs/primer.md) - Essentials to writing and running your first tests.
- [Testing Reference](docs/reference/testing.md) - Comprehensive macro and fixture definitions.
- [Parameterized & Typed Tests](api-reference/core-testing-apis/parameterized-typed-tests.md) - Expanded use of test data structures.
- [Assertions Reference](api-reference/core-testing-apis/assertions.md) - All assertion styles and best practices.
- [Mocking Integration](faq/getting_started_faq/gmock_integration.md) - Using GoogleMock with GoogleTest.
- [Changelog and Release Notes](changelog/version-history/all-releases.md) - Detailed release-specific upgrade information.

<Check>
When upgrading, always ensure backups and CI pipelines are in place to rapidly detect issues.
</Check>

---

Maintaining your test infrastructure with up-to-date GoogleTest releases preserves your project's reliability and future-proofs your test codebase. Follow these guides closely, and your migration will be seamless and rewarding.
