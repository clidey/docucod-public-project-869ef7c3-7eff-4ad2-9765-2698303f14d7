---
title: "Breaking Changes & Migration Notes"
description: "Understand all breaking changes introduced in each major and minor release, with clear explanations and practical tips for code migration and compatibility."
---

# Breaking Changes & Migration Notes

This documentation provides a comprehensive overview of all breaking changes introduced through GoogleTest and GoogleMock's major and minor releases. Each section clarifies what changed, why it changed, and provides practical guidance to help developers update their codebases and maintain compatibility.

---

## 1. Introduction

GoogleTest and GoogleMock follow semantic versioning principles. Occasionally, new releases introduce breaking changes that require user attention. This document captures those changes, explains their impact, and guides migration.

Breaking changes typically accompany major versions or significant minor updates that alter APIs, default behaviors, or configuration mechanisms.

---

## 2. Understanding Breaking Changes

- ### API Changes
  Changes to public APIs including method signatures, macros, or namespace adjustments that require code modifications.

- ### Behavioral Changes
  Modifications in default behaviors such as mock handling, expectation evaluation, or assertion results.

- ### Build and Compiler Requirements
  Updated requirements for compiler versions, C++ standards, or build configurations affecting compatibility.

- ### Deprecations
  Features or APIs marked for removal in future versions, requiring transition away from deprecated usage.

---

## 3. Notable Breaking Changes by Version

### Version 1.17.0 (Released: YYYY-MM-DD)
- **Minimum C++ Standard**: Now requires C++17 or later. Projects using older standards must upgrade compiler settings.
- **Unified Repository**: GoogleTest and GoogleMock merged; build configurations must be updated accordingly.
- **Mock Method Macros**: The legacy `MOCK_METHODn` macros are deprecated; users should migrate to the generic `MOCK_METHOD` macro.
- **Flag Access Macros**: Replaced direct usage of flag variables with standard mechanisms (e.g., `GMOCK_FLAG_GET(name)`); adjust code referencing internal flags.
- **Stack Trace Depth**: Default stack trace depth in failure messages altered; adjust `--gtest_stack_trace_depth` flag if necessary.

### Migration Tips for 1.17.0
- Update compiler flags to enable C++17 (e.g., `-std=c++17` for GCC/Clang).
- Switch to using `MOCK_METHOD` instead of `MOCK_METHODn`.
- Update custom mocks and actions defined with older macros following [Mock Classes and Methods API](https://google.github.io/googletest/api-reference/mocking-actions/mock-classes-methods.html).
- Review all custom assertion or matchers for compatibility with new type traits and C++17 features.

---

### Earlier Versions
- When migrating from versions before 1.10, note that method qualifier handling and call type specifiers changed. For instance, the addition of support for `noexcept` and reference qualifiers requires updating mock method declarations.
- Behavioral defaults for mocks changed to reduce false positives on uninteresting callsâ€”consider reviewing usage of `NiceMock`, `NaggyMock`, and `StrictMock` behaviors.

---

## 4. Migration Workflow

When upgrading to a version with breaking changes, follow this workflow:

<Steps>
<Step title="Review Release Notes and Changelogs">
Check official release notes for a summary of breaking changes and new features.
</Step>
<Step title="Update Compiler and Build Settings">
Ensure your development environment supports needed C++ standards and compiler versions.
</Step>
<Step title="Modify Mock Classes and Tests">
Update mock class macros and method signatures, aligning with new best practices.
</Step>
<Step title="Refactor Code Using Modified APIs">
Refactor consumer code and test cases referencing deprecated or removed APIs.
</Step>
<Step title="Run and Validate Tests">
Perform comprehensive test runs with increased verbosity (`--gmock_verbose=info`) to detect subtle issues.
</Step>
<Step title="Consult Documentation for New Features and Recommendations">
Leverage updated documentation to implement beneficial new behaviors and remove workarounds.
</Step>
</Steps>

---

## 5. Common Migration Pitfalls

### Legacy `MOCK_METHODn` Macros
Usage of old-style macros can cause compilation failures or unexpected behavior. Refactor all mocks to use the generic `MOCK_METHOD` macro with the modern signature.

### Default Actions and Uninteresting Calls
Changing defaults around uninteresting calls may lead to new warnings or errors when using mocks without explicit `EXPECT_CALL`s. Adjust mock usage with `NiceMock` or specify expectations deliberately.

### Template Mock Classes
Templates with mocked methods may require explicit specification of qualified method signatures, especially for const and ref-qualified methods.

### Managing Flag Usage
Internal flag macros have changed. Avoid direct manipulation of internal flag variables; use provided macros consistently (`GMOCK_FLAG_GET` and `GMOCK_FLAG_SET`).

---

## 6. Best Practices for Upgrading

- **Incremental Migration**: Migrate one module or test suite at a time to pinpoint issues.
- **Use Verbose Logging**: Run tests with `--gmock_verbose=info` to trace expectations and mock invocations.
- **Leverage Documentation**: Consult the [Mocking Reference](https://google.github.io/googletest/docs/reference/mocking.md) and [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for updated patterns.
- **Engage Community Support**: Use GitHub issues and community forums when encountering migration blockers.

---

## 7. Deprecated and Removed Features

- **Legacy Mock Macros**: `MOCK_METHODn`, `MOCK_CONST_METHODn`, and related are deprecated.
- **Unsupported Compilers**: Compilers not supporting C++17 and above are no longer supported.
- **Internal Porting Macros**: Avoid use of internal-only macros and APIs from `gmock/internal/gmock-port.h`.

Refer to updated platform support and portability utilities for alternative approaches.

---

## 8. Troubleshooting

- **Compiler Errors on Mock Methods**
  Check method signatures and qualifiers; ensure use of `MOCK_METHOD` macro correctly matches overridden methods.

- **Unintended Failing Tests due to Expectation Mismatches**
  Use `--gmock_verbose=info` to inspect which calls satisfy which expectations.

- **Heap Checking Failures**
  Ensure mock objects have virtual destructors and are properly deleted.

- **Confusing Warnings on Uninteresting Calls**
  Explicitly control mock strictness with `NiceMock` or `StrictMock` wrapper types.

---

## 9. Further Reading and Resources

- [GoogleTest Semantic Versioning and Release Policy](https://github.com/google/googletest/blob/main/README.md)
- [Mocking Reference](https://google.github.io/googletest/docs/reference/mocking.md)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)

---

## 10. Summary

Breaking changes in GoogleTest and GoogleMock are carefully documented and accompanied by migration guidance. Developers should keep upstream dependencies current and rely on semantic versioning to plan timely upgrades. Using provided tooling, updated macros, and patterns enables efficient adaptation to API or behavioral changes.

---

For detailed release history, see [Release History](https://github.com/google/googletest/releases) and the [Latest Release Overview](https://google.github.io/googletest/changelog/release-history/latest-release.html).

---