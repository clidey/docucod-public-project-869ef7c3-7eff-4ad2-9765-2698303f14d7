---
title: "Breaking Changes & Deprecations"
description: "Summarizes breaking API changes, removed features, deprecated functionality, and shifts in build or runtime requirements (e.g., minimum supported compilers, C++ language standards, or external dependencies). Provides direct migration hints where relevant."
---

# Breaking Changes & Deprecations

This page summarizes significant changes that impact the GoogleTest API compatibility and usage, focusing specifically on breaking changes, deprecated features, and updates to build and runtime requirements. It helps you navigate shifts such as removed functions, altered behaviors, and minimum compiler or language standard requirements. Wherever possible, clear migration guidance is provided to ease the upgrade process.

---

## 1. Overview of Breaking Changes

Breaking changes encompass updates that alter the external behavior or API of GoogleTest in a way that existing user code might fail to compile or behave differently. Being aware of these is crucial to maintaining test stability and compatibility across versions.

### Common Types of Breaking Changes on This Page

- **Removed Features:** APIs or functionalities that were removed and are no longer available.
- **Deprecated Features:** Previously supported APIs now marked as deprecated, signaling their imminent removal.
- **Build and Runtime Requirements:** Changes to the minimum supported C++ language standard, compiler versions, or dependent libraries.
- **Behavioral Changes Impacting Tests:** Modifications that affect how assertions, death tests, or other test constructs behave.

## 2. Important Breaking Changes & Deprecations

### 2.1 C++17 Minimum Requirement

Starting with release 1.17.0, GoogleTest requires a minimum of **C++17** support from your compiler and build environment. This update ensures modern language features are available and maintained:

- All users *must* enable at least C++17 in their builds for GoogleTest to work correctly.
- Earlier standards (C++11, C++14) are no longer supported and will lead to build failures.

<Check>
Ensure your build system (e.g., CMake, Bazel) is configured to use C++17 or higher to avoid compatibility issues.
</Check>

### 2.2 Removal of Legacy Macros

Several macros and API components marked as deprecated in prior versions are now fully removed, requiring user code to be updated. Examples include:

- `INSTANTIATE_TEST_CASE_P` has been deprecated in favor of `INSTANTIATE_TEST_SUITE_P`. Please update your code accordingly.
- `TYPED_TEST_CASE` and `REGISTER_TYPED_TEST_CASE_P` are replaced by `TYPED_TEST_SUITE` and `REGISTER_TYPED_TEST_SUITE_P` respectively.

Migration Hint:
```cpp
// Old
INSTANTIATE_TEST_CASE_P(MyPrefix, MyTestSuite, MyTypes);
// New
INSTANTIATE_TEST_SUITE_P(MyPrefix, MyTestSuite, MyTypes);
```

### 2.3 Test Naming Conventions

Test suite and test names **must not contain underscores** (`_`). This restriction is enforced more strictly to avoid symbol name collisions and undefined behavior.

- Names starting or ending with underscores, or containing consecutive underscores, may cause compilation or runtime errors.
- This rule applies consistently to all tests to guarantee unique class naming internally.

Refer to the FAQ for detailed reasoning and examples: [Why should test suite names and test names not contain underscore?](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)

### 2.4 Fatal Assertions in Non-Void Functions

- GoogleTest continues to **disallow fatal assertions (`ASSERT_*`, `FAIL()`) in functions with non-void return types** due to the lack of exceptions.
- Attempting this will cause compilation errors such as `void value not ignored as it ought to be.`

Workaround:
- Use `EXPECT_*` macros for non-fatal assertions in such functions.
- Refactor logic to place fatal assertions only in `void` functions.

### 2.5 Death Test Behavior

- Death tests now run with enhanced thread-safety by default in many environments, affecting the way subprocesses are spawned.
- Thread-based test environments that rely on older `fork()` semantics may need adjustments.
- If your death tests fail unexpectedly or hang, consider explicitly setting the death test style flag:

```cpp
GTEST_FLAG_SET(death_test_style, "fast");  // or "threadsafe"
```

- Mocks used in death tests must allow leak detection to be suppressed (`Mock::AllowLeak`).

### 2.6 Removal of Deprecated Fixtures and APIs

- Legacy test case APIs such as `SetUpTestCase` and `TearDownTestCase` are replaced by `SetUpTestSuite` and `TearDownTestSuite`. Using old names will lead to deprecation warnings or breakage.

Example migration:
```cpp
// Deprecated
static void SetUpTestCase() { ... };
// Use instead
static void SetUpTestSuite() { ... };
```

## 3. Migration Guidance

Users updating from prior GoogleTest versions are encouraged to:

1. **Check C++ standard settings:** Confirm C++17 or later is enabled.
2. **Replace deprecated macros:** Switch to new test suite and instantiation macros.
3. **Rename test suites and tests:** Remove underscores from test suite and test names.
4. **Audit assertion usage:** Confirm no `ASSERT_*` in non-void functions.
5. **Review death tests:** Adjust death test style and mock leak allowances as needed.
6. **Update fixture setup/teardown methods:** Prefer `SetUpTestSuite` and `TearDownTestSuite`.

<Tip>
Running your test program with the `--gtest_help` flag can show current supported features and flags useful for debug and migration.
</Tip>

## 4. Build and Runtime Requirements Summary

- **Minimum C++ Standard:** C++17 (since 1.17.0)
- **Supported Compilers:** Refer to [Supported Platforms](../docs/platforms.md)
- **Thread-Safety:** Enabled where pthread or equivalent available
- **Dependencies:** Transition planned to depend on Abseil library in future releases

## 5. Deprecated and Removed Features

| Feature                         | Replacement / Note          |
|--------------------------------|----------------------------|
| `INSTANTIATE_TEST_CASE_P`       | `INSTANTIATE_TEST_SUITE_P`  |
| `TYPED_TEST_CASE`              | `TYPED_TEST_SUITE`          |
| `REGISTER_TYPED_TEST_CASE_P`   | `REGISTER_TYPED_TEST_SUITE_P`|
| `SetUpTestCase()` / `TearDownTestCase()`| `SetUpTestSuite()` / `TearDownTestSuite()` |

## 6. Troubleshooting Section

### Common Pitfall: Test Not Running or Failing to Build

- Verify your test suite and test names do not contain underscores.
- Ensure all fixture classes have a default constructor.
- Confirm your build enables C++17 or newer.
- Check for fatal assertions inside non-void functions and refactor as needed.

### Death Test Failures

- Use `GTEST_FLAG_SET(death_test_style, "threadsafe")` for thread-safe runs.
- Allow mock leak detection if mocks are used inside death tests.
- Minimize shared state to avoid race conditions.

## 7. Additional Notes

- GoogleTest continues to improve thread safety, which may introduce changes in test execution ordering and behavior.
- Deprecated features will be removed in upcoming releases; proactively migrate to avoid disruption.

---

For further details and examples, please see [GoogleTest Assertions Reference](reference/assertions.md) and the [GoogleTest Advanced Topics](docs/advanced.md).

---

## Cross-References

- [GoogleTest Primer](docs/primer.md): For basic test writing and fixture usage.
- [Assertions Reference](reference/assertions.md): For detailed assertion macros.
- [Death Tests and Error Handling](guides/core-test-design/death-tests-error-handling.mdx): For writing and migrating death tests.
- [Supported Platforms](docs/platforms.md): To verify compatibility with your setup.
- [FAQ](faq.md): For common issues including naming conventions, assertion errors, and test setup.
- [Integration & Ecosystem](overview/architecture-features/integration-and-dependencies.mdx): For build system integration guidance.

<Tip>
Consider subscribing to release announcements on the [GoogleTest GitHub Releases page](https://github.com/google/googletest/releases) to stay updated on all breaking changes and migration guides.
</Tip>
