---
title: "New Features & Improvements"
description: "Summaries and use-case oriented highlights of new or enhanced assertions, test runners, parameterization options, or integrations introduced in recent releasesâ€”enabling teams to take advantage of the latest capabilities."
---

# New Features & Improvements in GoogleTest

Welcome to the detailed overview of recent enhancements, new capabilities, and improvements introduced in GoogleTest. This documentation centers on augmentations related to assertions, test runners, parameterized testing, integration capabilities, and output customization that enable your team to write more robust, expressive, and efficient tests.

---

## 1. Expanded Assertion Capabilities

### Predicate Assertion Enhancements
GoogleTest now supports more expressive predicate assertions to let you write clearer and more informative tests. These include:

- **AssertionResult-Based Predicates:** You can now write predicate functions returning `testing::AssertionResult` instead of a simple `bool`. This approach enables detailed failure messages automatically without verbose code in each test.

```cpp
// Predicate returning AssertionResult with success/failure messages
testing::AssertionResult IsEven(int n) {
  if ((n % 2) == 0)
    return testing::AssertionSuccess() << n << " is even";
  else
    return testing::AssertionFailure() << n << " is odd";
}

EXPECT_TRUE(IsEven(4));  // Prints a message including "4 is even" on success.
```

- **Predicate-Formatter Assertions:** For complex scenarios or types that don't support `ostream` streaming, GoogleTest offers predicate-formatter macros (`EXPECT_PRED_FORMAT*`). They allow full control over message formatting, offering tailored diagnostics to suit custom data types.

### Extended Floating-Point Assertions
To avoid an unwieldy number of macros, less common floating-point comparison operations are implemented as predicate-format functions and can be combined with existing assertion macros like `EXPECT_PRED_FORMAT2`. For example:

```cpp
EXPECT_PRED_FORMAT2(FloatLE, val1, val2);  // Passes if val1 <= val2 or approximately equal
```

### String Matching via gMock Integration
GoogleTest expands string assertion abilities using gMock matchers. You can now perform expressive tests such as substring checks or regex matches with `EXPECT_THAT`:

```cpp
using ::testing::HasSubstr;
using ::testing::MatchesRegex;
...
ASSERT_THAT(my_string, HasSubstr("needle"));
EXPECT_THAT(another_string, MatchesRegex("\\w+\\d+"));
```

### Windows HRESULT Assertions
On Windows platforms, GoogleTest provides specialized assertions to verify `HRESULT` values clearly:

- `ASSERT_HRESULT_SUCCEEDED(expr)` and `EXPECT_HRESULT_SUCCEEDED(expr)` check that an expression returns a successful HRESULT.
- Corresponding failure macros are also available.

These assertions display human-readable messages along with hex codes when failures occur.

### Type Assertions for Templates
Compile-time type equality checks are supported via `StaticAssertTypeEq<T1, T2>()`. This triggers a compile error if the types differ, which is useful in template-heavy code to enforce type contracts early.

---

## 2. Test Execution Flow Improvements

### Skipping Tests Dynamically
GoogleTest introduces `GTEST_SKIP()`, enabling tests or test fixtures to be skipped at runtime based on dynamic conditions, such as unmet preconditions or environment constraints.

Use in tests or inside `SetUp()` methods for test fixtures or global test environments:

```cpp
TEST(MyTest, SkipExample) {
  GTEST_SKIP() << "Skipping this test.";
  // Remaining code won't execute
}

class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    if (!IsReady()) {
      GTEST_SKIP() << "Environment not ready";
    }
  }
};
```

This feature enhances test suite flexibility and robustness by allowing meaningful skips with user-defined messages.

### Global and Test-Suite Level Setup/TearDown
GoogleTest continues to enhance shared resource management by supporting:

- **Per-Test-Suite Setup/TearDown:** via `static SetUpTestSuite()` and `static TearDownTestSuite()` methods in test fixture classes.
- **Global Test Environment Setup/TearDown:** by subclassing `::testing::Environment` and registering environments before tests run.

These enable efficient resource utilization, reducing overhead for expensive setups shared across tests.

---

## 3. Advanced Parameterized Testing

### Value-Parameterized Tests
GoogleTest expands support for value-parameterized tests that allow running the same test logic over multiple input values without duplication:

- Define fixtures inheriting from `TestWithParam<T>`
- Define tests using `TEST_P`
- Instantiate tests using `INSTANTIATE_TEST_SUITE_P` with generators like `Values()`, `Range()`, `Combine()`, `Bool()`, and `ValuesIn()`

Example:

```cpp
class MyTest : public ::testing::TestWithParam<int> {};

TEST_P(MyTest, HandlesValues) {
  EXPECT_GT(GetParam(), 0);
}

INSTANTIATE_TEST_SUITE_P(PositiveNumbers, MyTest,
                         ::testing::Values(1, 2, 3, 5, 8));
```

Value-parameterized tests support advanced naming customizations and abstract test definitions for reusable test libraries.

### Typed and Type-Parameterized Tests
Typed tests allow repeating tests for multiple types, improving coverage for templated or polymorphic code:

- **Typed Tests:** Use `TYPED_TEST_SUITE` and `TYPED_TEST` to define a suite for a predefined type list.
- **Type-Parameterized Tests:** Use `TYPED_TEST_SUITE_P` and `TYPED_TEST_P` for more flexible, reusable patterns with registration and later instantiation via `INSTANTIATE_TYPED_TEST_SUITE_P`.

Example Typed Test:

```cpp
template <typename T>
class FooTest : public ::testing::Test { ... };

using MyTypes = ::testing::Types<int, double>;
TYPED_TEST_SUITE(FooTest, MyTypes);

TYPED_TEST(FooTest, DoesSomething) {
  TypeParam value = ...;
  EXPECT_TRUE(SomeOperation(value));
}
```

### Factory-Based and Programmatic Registration
For dynamic testing scenarios where parameters or tests aren't known at compile time, you can programmatically register tests using `::testing::RegisterTest`. This is useful for externally driven data inputs or plugin-style test generation.

---

## 4. Enhanced Test Output & Diagnostics

### Scoped Tracing
Failures inside helper functions or deep call stacks become easier to diagnose by using `SCOPED_TRACE` or `ScopedTrace`, which annotates failure outputs with a trail indicating the call context:

```cpp
void Helper(int value) {
  SCOPED_TRACE("Value: " + std::to_string(value));
  EXPECT_EQ(foo.Bar(value), expected);
}
```

This contextualizes assertion failures, helping pinpoint the exact scenario prompting the failure.

### Logging Additional Properties
`RecordProperty(key, value)` lets tests log arbitrary metadata to enrich XML or JSON outputs. This is valuable for tagging dynamic runtime info such as configuration parameters or test environment details for CI systems.

```cpp
RecordProperty("MaxConnections", 10);
RecordProperty("TestMode", "Performance");
```

### Output Formats
- XML and JSON test reports support detailed and structured information, including timing, failure messages, and properties.
- Colorized terminal output improves test readability.
- Options to suppress output or control verbosity help integrate with CI and local debugging workflows.

---

## 5. Improved Death Tests Support

GoogleTest enhances support for death tests which verify that certain code terminates as expected:

- Death tests verify process exit behavior and can check exit codes and stderr messages.
- Two styles, "fast" and "threadsafe", support different concurrency environments.
- Naming conventions (test suites named `*DeathTest`) help control execution order and isolation.

Example:

```cpp
TEST(MyDeathTest, DiesOnNull) {
  ASSERT_DEATH(Foo(NULL), "Null pointer detected");
}
```

Best practices and troubleshooting guidance ensure robust use of death tests even in multithreaded or resource-constrained conditions.

---

## 6. Extensibility and Customization

GoogleTest allows for deep customization of behavior and reporting through:

- Custom event listeners to plug into test lifecycle events for logging, GUIs, or databases.
- Value printers such as `AbslStringify()` or `PrintTo()` functions to enhance failure messages for your types.
- Facilities for catching assertion failures programmatically to test custom GoogleTest extensions.

Example of a minimal event listener:

```cpp
class CustomPrinter : public ::testing::EmptyTestEventListener {
  void OnTestStart(const ::testing::TestInfo& info) override {
    std::cout << "Starting test: " << info.name() << std::endl;
  }
};
```

---

## 7. Summary of New Features

| Feature Area                     | Highlights                                                                          |
|---------------------------------|-------------------------------------------------------------------------------------|
| Assertions                      | AssertionResult predicates, predicate-format macros, floating point predicates       |
| String Matching                | gMock matchers integration for substring and regex assertions                       |
| Test Flow                     | Dynamic skipping (`GTEST_SKIP()`), suite/global setup/teardown                      |
| Parameterized Tests            | Value-parameterized, typed and type-parameterized tests, programmatic registration   |
| Test Output                   | Scoped traces, properties logging, multiple output formats (XML, JSON), coloring     |
| Death Tests                   | Thread-safe and fast styles, usage guidelines, naming conventions                   |
| Extensibility & Customization | Event listeners, custom print formats, failure catching for testing GoogleTest tools |

---

For complete usage examples, troubleshooting, and extended discussions, consult the following related documentation:

- [Assertions Reference](../api-reference/core-testing-api/assertions.md)
- [Parameterized and Type-Parameterized Tests](../api-reference/core-testing-api/parameterized-and-type-parameterized-tests.md)
- [Death Tests API](../api-reference/specialized-testing-apis/death-tests.md)
- [Writing Clear and Effective Assertions Guide](../guides/integration-and-best-practices/writing-effective-assertions.md)
- [Advanced GoogleTest Topics](../docs/advanced.md)

---

Harness these improvements to create expressive, maintainable, and efficient C++ tests that empower your development lifecycle.


---

*For detailed API signatures, sample code, and architectural explanations, please refer to the official GoogleTest documentation site.*

---

<Info>
You can also explore the [Full Version History](../changelog/release-notes-history/full-version-history.md) to see version-specific changes and migration instructions.
</Info>
