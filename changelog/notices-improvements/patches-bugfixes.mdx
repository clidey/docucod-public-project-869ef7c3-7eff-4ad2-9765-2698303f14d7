---
title: "Bug Fixes & Patches"
description: "Summarizes all bug fixes and maintenance patches for each release, referencing affected modules and the functional impact for end users. Ensures teams remain aware of stability and security improvements."
---

# Bug Fixes & Patches

This page provides a comprehensive summary of bug fixes and maintenance patches for each GoogleTest and GoogleMock release. It emphasizes the functional impact for end users, referencing the affected modules clearly to maintain awareness of stability and security improvements.

---

## Understanding Bug Fixes and Maintenance Patches

Bug fixes address incorrect behavior in the mocking framework, assertion handling, test execution, and platform integrations that might affect test reliability or developer productivity. Maintenance patches improve stability, performance, and compatibility without adding new features.

This documentation focuses on the patches and fixes relevant to **GoogleMock's mocking functionality**, including how mock methods behave under different conditions and how expectations on mocks are verified and reported.

---

## Recent Bug Fix Highlights

### Mock Method Invocation and Call Matching

- **Robust handling of expected, unexpected, excessive, and uninteresting calls:**
  GoogleMock now reliably distinguishes between expected calls (which match declared expectations), unexpected calls (calls to methods with expectations but with mismatched arguments), excessive calls (calls beyond the expected cardinality), and uninteresting calls (calls without expectations).
  - _Example:_ If an `EXPECT_CALL` sets an expectation on `foo.Bar2(0, _)` and `foo.Bar2` is called with arguments not matching, a clear warning or failure is reported.

- **Improved support for void and non-void mock functions:**
  Expected calls on void-returning mock methods are properly tracked and excess calls are reported as warnings or errors.

- **Enhanced default action dispatch:**
  Calls not matching any `EXPECT_CALL` use the fallback behavior defined by `ON_CALL` defaults, if any, ensuring graceful handling of unexpected call arguments.

### Expectation Lifecycle

- **Support for RetiresOnSaturation:** Expectations with upper-bounded cardinalities marked with `.RetiresOnSaturation()` now retire correctly after being saturated, so excessive calls match lower-priority expectations instead of causing failures.

- **Handling of unsatisfied prerequisites and call ordering:**
  Calls that violate prerequisite expectations or are out-of-sequence based on `InSequence` and `After` clauses are properly detected and reported.

### Matcher and Argument Validation

- **Better diagnostics for argument mismatches:** When mocks are called with arguments that do not satisfy the defined matchers or `.With()` clauses, detailed messages explain which arguments failed to match with intuition-friendly information.

- **Support for Ref Matcher:** References passed in mock calls (e.g., via `Ref(s)`) are compared correctly to avoid false mismatch reports.

### Leaked Mock Detection

- **Detection of leaked mock objects:** GoogleMock has a mechanism enabled by default (controlled by `--gmock_catch_leaked_mocks`) that detects mocks allocated but not deleted, warning the user to avoid undetected expectation verification failures.

---

## Impacted Modules and Components

These fixes touch core GoogleMock modules such as:
- Mock method tracking and expectation management
- Mock object lifecycle and verification
- Matchers and argument validation
- Default action dispatching
- Test output and logging for verbose debugging (`--gmock_verbose`)

---

## Practical Benefits to Users

- **Reliability:** Tests fail quickly and clearly when expectations are violated.
- **Clarity:** Verbose logs (`--gmock_verbose=info`) provide detailed call and expectation traces to help debug unexpected behaviors.
- **Coverage:** Better handling of edge cases in mocking non-void and void functions.
- **Maintainability:** Detection of leaked mocks helps avoid false positive tests due to unverified mocks.

---

## How to Get the Latest Fixes

- Ensure your test binaries are linked with the latest GoogleMock version.
- Use `InitGoogleMock(&argc, argv)` to initialize GoogleMock flags properly.
- Utilize the `--gmock_verbose` flag to choose a verbosity level that suits your debugging needs:
  - `info`: Detailed call and expectation logging
  - `warning`: Warnings and errors (default)
  - `error`: Only errors

---

## Troubleshooting Common Issues

### Uninteresting Calls

If you encounter warnings about uninteresting calls (mocked methods called without expectations), consider:
- Using `NiceMock<T>` to suppress these warnings.
- Adding `.Times(AnyNumber())` to expectations on frequently called mocks.

### Excessive or Unexpected Calls

Verify that your `EXPECT_CALL` usage correctly describes the expected call arguments and counts. Use sequences or `.After()` clauses to model call order precisely.

### Leaked Mocks

If warnings about leaked mocks appear, ensure all mocks are properly deleted or use `Mock::VerifyAndClearExpectations()` explicitly in your teardown logic.

---

## Additional Examples

```cpp
// Expected call example
EXPECT_CALL(foo_, Bar2(0, _));
foo_.Bar2(0, 1);  // Matches expectation

// Unexpected call example
foo_.Bar2(1, 1);  // Warning or error if no matching expectation

// Retiring expectations
EXPECT_CALL(foo_, Bar2(_, _)).RetiresOnSaturation().Times(2);
EXPECT_CALL(foo_, Bar2(0, 0));
// Calls to Bar2 that match the first expectation twice will retire it,
// enabling the second expectation to match subsequent calls.

// Using default action
ON_CALL(foo_, Bar2(_, _)).WillByDefault(Return(true));
foo_.Bar2(3, 3);  // Returns true even without EXPECT_CALL
```

---

## References and Related Documentation

- [Mock Methods and Classes](https://google.github.io/googletest/reference/gmock_mocks.html#mock-methods-and-classes): Core mock definitions
- [Expectations, Actions, and Sequences](https://google.github.io/googletest/reference/gmock_expectations.html#expectations-actions-and-sequences): How to use expectations
- [Strictness Modes and Behaviors](https://google.github.io/googletest/reference/gmock_strictness.html#strictness-modes-and-behaviors): Handling uninteresting calls
- [Latest Release Notes](https://github.com/google/googletest/releases/latest): Stay updated with newest patches
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Practical mocking recipes

---

For more detailed release histories and migration guides, please consult [Full Version History](https://google.github.io/googletest/changelog/release-history/full-version-history.html) and [Breaking Changes & Upgrade Instructions](https://google.github.io/googletest/changelog/breaking-changes-upgrade/).

---