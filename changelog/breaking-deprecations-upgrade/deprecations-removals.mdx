---
title: "Deprecations & Removals"
description: "A running record of deprecated features, APIs, or configuration patterns, their recommended replacements, and target removal timelines. Users rely on this page to proactively update their code and maintain long-term compatibility."
---

# Deprecations & Removals

This page serves as an essential resource for tracking deprecated features, APIs, and configuration patterns within GoogleTest and GoogleMock. It provides actionable guidance on recommended replacements and outlines timelines for the removal of deprecated elements. By staying informed here, users can proactively update their codebases to maintain compatibility with future GoogleTest versions and avoid breaking changes.

---

## Understanding Deprecations in GoogleTest

Deprecations are formal notifications that certain features or APIs are no longer recommended for use and will be removed in upcoming versions. Typically, deprecated elements have safer, more efficient, or clearer replacements that align better with modern testing patterns.

GoogleTest encourages users to migrate away from deprecated constructs to maintain clean, maintainable, and future-proof test suites.

---

## Common Deprecated Patterns and Their Replacements

### 1. Mock Strictness Wrappers: `NiceMock`, `NaggyMock`, and `StrictMock`

GoogleTest provides three mock strictness wrappers that alter the behavior of mock objects regarding uninteresting calls:

- **`NiceMock<T>`**: Suppresses warnings for uninteresting calls, making tests less noisy.
- **`NaggyMock<T>`**: Prints warnings for uninteresting calls. Currently the default mock behavior.
- **`StrictMock<T>`**: Treats all uninteresting calls as test failures.

> **Future Change Notice:**
> The default behavior for mock objects will transition from Naggy (warning on uninteresting calls) to Nice (suppressing such warnings) to promote more maintainable tests. When this change happens, `MockFoo` will behave like `NiceMock<MockFoo>` rather than `NaggyMock<MockFoo>`.

**Migration Tip:**
- To suppress uninteresting call warnings explicitly, wrap your mock object with `NiceMock`.
- To enforce that no unexpected calls happen, use `StrictMock`.
- Avoid nesting these wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) as it is unsupported.

**Known Limitations:**
- Strictness wrappers only affect mock methods defined directly in the mock class via the `MOCK_METHOD` macros. Methods inherited from base classes may not adhere to strictness modifiers.
- Correct behavior requires mock classes to have virtual destructors.

---

## Removal Timelines

Deprecated features or APIs are maintained for several releases before removal to allow users sufficient time to migrate. Specific timelines are communicated via:

- Release notes and changelog entries.
- Migration guides detailing step-by-step replacement instructions.

Users should consult the **Breaking Changes & Migrations** documentation to understand detailed plans and prepare for upgrades.

---

## Best Practices for Managing Deprecations

- **Stay Informed:** Regularly review this page and official release notes for deprecation announcements.
- **Adopt Recommended Replacements:** Use the advised alternatives promptly to avoid technical debt.
- **Run Tests Frequently:** Validate that your use of deprecated features does not cause issues with new versions.
- **Avoid Deprecated APIs in New Code:** Write tests using the latest supported APIs and patterns to minimize future migration effort.

---

## Practical Examples

### Upgrading Mock Strictness Usage

**Before (Naggy default behavior):**

```cpp
MockFoo mock_foo;
EXPECT_CALL(mock_foo, DoThis());
...
```

- May generate warnings for uninteresting calls (calls without expectations).

**After (Explicitly use NiceMock):**

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());
...
```

- Warnings for uninteresting calls are suppressed.
- Encouraged for cleaner and more maintainable test output.

### StrictMock for Enforcing Exact Call Expectations

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());
// Any uninteresting call will fail the test
```

- Ideal when test purity is required.

---

## Troubleshooting Deprecation Issues

- **Warnings About Deprecated Usage:**
  When running tests with elevated verbosity or compilation warnings, note messages suggesting replacement APIs.

- **Unexpected Behavior in Mock Strictness:**
  Confirm mock classes have virtual destructors and direct use of `MOCK_METHOD` macros to ensure strictness wrappers operate correctly.

- **Migration Difficulties:**
  Consult migration guides and the Breaking Changes & Migrations documentation for examples and detailed guidance.

---

## Related Documentation

- [Mocking Reference](../docs/reference/mocking.md): Comprehensive guide to mocking APIs including `NiceMock`, `StrictMock`, and `NaggyMock`.
- [Writing Mock Expectations](../guides/mocking-with-googlemock/writing-mock-expectations.md): How to set up expectations with mocks.
- [Advanced Mocking Techniques](../guides/mocking-with-googlemock/advanced-mocking-techniques.md): Deep dives into controlling mock behavior and strictness.
- [Breaking Changes & Migrations](../changelog/breaking-deprecations-upgrade/breaking-changes-migrations.md): Detailed migration paths for breaking changes.
- [Release Highlights](../changelog/version-history-release-notes/release-highlights.md): Summaries of major and minor releases, including deprecated features.

---

## Summary

This page provides a consolidated record of all deprecated features within GoogleTest, their recommended replacements, and removal timelines. It empowers users to adapt their testing suites proactively, minimizing disruption during upgrades. Clear migration advice and best practices facilitate seamless transitions and help maintain test robustness.

---

## Additional Resources

For community support, migration tips, and more, refer to:

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Legacy gMock FAQ](../docs/gmock_faq.md)

---