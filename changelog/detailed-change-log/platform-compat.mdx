---
title: "Platform & Compiler Compatibility"
description: "Version-by-version notes on supported platforms and compilers, including new support or dropping of support as per Google’s C++ support policy. Critical for teams maintaining cross-platform test suites."
---

# Platform & Compiler Compatibility

This document provides detailed, version-by-version notes on the platforms and compilers supported by GoogleTest, following Google's C++ support policies. It is an essential resource for teams managing cross-platform test suites, ensuring compatibility and smooth operation of GoogleTest across diverse environments.

---

## Overview

GoogleTest is designed to be portable and configurable to support a wide variety of operating systems and compilers. This page summarizes which platforms and compilers are supported for each release, along with any changes such as new additions or discontinued support. Understanding this compatibility helps developers maintain and extend test suites that run reliably in their specific environments.


## Supported Platforms

GoogleTest supports numerous platforms, with particularly stable support on the following major operating systems:

- **Linux** (including variants like Android Linux)  
- **macOS**  
- **Windows** (including Desktop, MinGW, and Mobile variants)
- 
Other platforms receive varying degrees of support, which may be less stable and require user feedback or patches from the community. These include BSD variants (FreeBSD, NetBSD, OpenBSD, DragonFly), AIX, Solaris, HP-UX, GNU/Hurd, Fuchsia, Native Client, z/OS, and embedded system platforms like ESP32, ESP8266, Xtensa, and Qualcomm QN9090.

### Platform Detection Macros

GoogleTest employs a set of internally defined macros to detect the compilation platform automatically, allowing user code to conditionally compile features based on platform capabilities. These include but are not limited to:

- `GTEST_OS_LINUX`, `GTEST_OS_LINUX_ANDROID`
- `GTEST_OS_MAC`, `GTEST_OS_IOS`
- `GTEST_OS_WINDOWS`, and subcategories like `GTEST_OS_WINDOWS_DESKTOP`, `GTEST_OS_WINDOWS_MINGW`, `GTEST_OS_WINDOWS_MOBILE` and others
- `GTEST_OS_FREEBSD`, `GTEST_OS_NETBSD`, `GTEST_OS_OPENBSD`, `GTEST_OS_DRAGONFLY`
- `GTEST_OS_AIX`, `GTEST_OS_SOLARIS`, `GTEST_OS_HPUX`, `GTEST_OS_FUCHSIA`

These macros are defined automatically by GoogleTest’s internal configuration headers and should not be defined manually by users. They enable selective compilation of platform-specific features and ensure consistent behavior.


## Compiler Requirements and C++ Standard

GoogleTest requires an environment supporting at least **C++17**, complying with modern standards for safer and more expressive code.

### Compiler Support

- **MSVC**: Minimum version Visual Studio 2017 Update 3 (MSVC >= 19.11). Supports feature-test macros like `__has_include`.
- **GCC**: Versions supporting C++17 with appropriate feature-test macros. Note: Special handling exists for versions prior to 4.3.2 regarding RTTI detection.
- **Clang/LLVM**: From versions supporting C++17 and feature detection macros.
- Other compilers such as IBM VisualAge, SunPro, HP aCC, and Intel LLVM are supported according to their compliance with C++17 and availability of necessary features.

GoogleTest enforces C++17 at compile-time, producing an error if an older standard is used.


## Feature Detection and Portability Macros

GoogleTest uses macros to indicate the availability of runtime and compiler features on a given platform and compiler. These allow conditional compilation and ensure the framework behaves correctly across environments.

Key feature macros you may encounter include:

- `GTEST_HAS_EXCEPTIONS`: Set to 1 if exceptions are enabled.
- `GTEST_HAS_PTHREAD`: Indicates availability of POSIX threads.
- `GTEST_HAS_CLONE`: Indicates clone(2) syscall support (Linux specific).
- `GTEST_HAS_RTTI`: Set based on whether RTTI is enabled.
- `GTEST_HAS_STD_WSTRING`: Whether `std::wstring` is usable.
- `GTEST_HAS_FILE_SYSTEM`: Whether the platform has a file system.
- `GTEST_HAS_SEH`: Whether Structured Exception Handling is supported (MSVC Windows).
- `GTEST_HAS_STREAM_REDIRECTION`: Whether output stream redirection using system calls like `dup()` is supported.
- `GTEST_HAS_DEATH_TEST`: Whether death tests are supported based on platform and file system availability.
- `GTEST_HAS_TYPED_TEST` and `GTEST_HAS_TYPED_TEST_P`: Support for typed and type-parameterized tests.

These enable portable features like death tests, typed tests, and exception handling.


## Thread Safety and Synchronization

GoogleTest detects and adapts to available threading models:

- On POSIX-compliant systems with pthreads, synchronization primitives like `Mutex` and `ThreadLocal` use pthread constructs.
- On Windows, internal wrappers are implemented for mutexes and thread locals compatible with the Windows API.
- When threading or synchronization isn't available, GoogleTest falls back to dummy implementations allowing single-threaded execution.

The macro `GTEST_IS_THREADSAFE` is defined to 1 on platforms that support thread safety.


## Platform-Specific Behavior and Limitations

- On **Windows**, special considerations are made to avoid including `<windows.h>` unnecessarily for cleaner headers.
- For Windows Mobile and embedded systems like **ESP8266**, **Xtensa**, and **QuRT**, support may be limited or partially implemented, for example, no file system or no environment variables.
- Platforms with unusual file systems or missing features may disable tests or features like death tests or stream redirection.


## Build and Linker Settings Impacting Compatibility

GoogleTest’s build system presets compiler and linker flags to enforce desired behavior:

- Compiler flags are tweaked for stricter warnings and static vs. shared runtime linkage.
- Pthread detection is automated; linking with pthreads library is configured when detected.
- Definitions like `-DGTEST_HAS_PTHREAD=1` or `0` are added to enable or disable threading explicitly.
- Flags for exception handling and RTTI are set depending on build configuration.

Using GoogleTest as a shared library requires defining `GTEST_CREATE_SHARED_LIBRARY=1` when building the library, and `GTEST_LINKED_AS_SHARED_LIBRARY=1` when building tests against it.


## Package Configuration (pkg-config) Impact

GoogleTest provides `.pc` (pkg-config) files that describe include paths, macro definitions, and libraries required for compilation and linkage.

- These pkg-config files include flags such as `-DGTEST_HAS_PTHREAD=1` and `-lpthread` where appropriate.
- They facilitate smooth integration into build systems, especially in cross-compilation environments.
- Users must set `PKG_CONFIG_SYSROOT_DIR` and `PKG_CONFIG_LIBDIR` properly when cross-compiling to ensure correct paths.


## Common Pitfalls and Best Practices

- Always ensure your compiler supports **C++17**; builds will fail if not.
- If threading detection is incorrect, override via `-DGTEST_HAS_PTHREAD=0` or `1`.
- When using shared libraries on Windows, define `GTEST_CREATE_SHARED_LIBRARY` and `GTEST_LINKED_AS_SHARED_LIBRARY` correctly.
- Be aware that wide string support (`std::wstring`) may be limited on some embedded or niche platforms.
- Death tests require a working file system; if you get errors, verify if your platform supports it.


## Troubleshooting Compatibility Issues

If you encounter issues related to platform or compiler compatibility:

- Review the detected macros in your build logs and verify they match your target system.
- Consult the GoogleTest GitHub issues for platform-specific quirks.
- Adjust compiler and linker flags to enforce exceptions and RTTI as needed.
- When cross-compiling, carefully configure sysroot and pkg-config paths.


## Additional Resources

For comprehensive guidance on build systems, platform environments, and system requirements, users should consult:

- [Getting Started: Prerequisites and System Requirements](/getting-started/essentials/prerequisites-requirements)
- [Installation on Major Platforms](/getting-started/essentials/installation-platforms)
- [Build, Linking, and Compiler Issues FAQ](/faq/troubleshooting-optimization/build-link-errors)
- [Integration with Build Systems and CI](/guides/integration-advanced-optimization/build-systems-and-integration)
- [pkg-config Usage and Cross-Compilation Guide](docs/pkgconfig.md)

---

## Example: Detecting Platform in User Tests

To write portable tests or conditionally compile code based on platform, use GoogleTest's predefined macros, for example:

```cpp
#if defined(GTEST_OS_WINDOWS_DESKTOP)
  // Windows desktop-specific code
#elif defined(GTEST_OS_LINUX)
  // Linux-specific code
#elif defined(GTEST_OS_MAC)
  // macOS-specific code
#else
  // Other platforms
#endif
```

This enables tailoring test features, skip unsupported tests, or enable platform optimizations.


## Summary

This page summarizes the critical information about GoogleTest's platform and compiler compatibility. It emphasizes automatic detection via internal macros, required C++17 support, threading and synchronization models, and platform-specific behavior. It also highlights build system considerations and common pitfalls. Maintaining awareness of these compatibility notes ensures that users can build and run GoogleTest reliably across all supported environments.


---

For detailed technical definitions, detection code, and build configurations, consult the [internal `gtest-port.h` header](https://github.com/google/googletest/blob/main/googletest/include/gtest/internal/gtest-port.h) and [platform architecture header `gtest-port-arch.h`](https://github.com/google/googletest/blob/main/googletest/include/gtest/internal/gtest-port-arch.h).


---

<Check>
Maintaining this knowledge helps teams reliably build cross-platform C++ test suites, avoid common build errors, and select compatible compiler versions. Always verify your environment meets minimum C++17 standards and consult macro definitions when troubleshooting.
</Check>


---

### Sample Build Flag Override

If you encounter threading detection issues, you can explicitly override in your build:

```bash
# Force enable pthread support if auto-detection fails
-DGTEST_HAS_PTHREAD=1

# Or disable if your platform doesn't support it
-DGTEST_HAS_PTHREAD=0
```

---

### Platform Compatibility Table (Example Summary)

| Platform           | Notable Macro               | Typical Support Level |
|--------------------|-----------------------------|-----------------------|
| Linux              | `GTEST_OS_LINUX`             | Stable                |
| Android            | `GTEST_OS_LINUX_ANDROID`     | Stable                |
| macOS              | `GTEST_OS_MAC`               | Stable                |
| iOS                | `GTEST_OS_IOS`               | Less stable           |
| Windows            | `GTEST_OS_WINDOWS`           | Stable                |
| Windows Desktop    | `GTEST_OS_WINDOWS_DESKTOP`   | Stable                |
| Windows Mobile    | `GTEST_OS_WINDOWS_MOBILE`     | Partial               |
| FreeBSD            | `GTEST_OS_FREEBSD`           | Partial               |
| NetBSD             | `GTEST_OS_NETBSD`            | Partial               |
| OpenBSD            | `GTEST_OS_OPENBSD`           | Partial               |
| DragonFlyBSD       | `GTEST_OS_DRAGONFLY`         | Partial               |
| AIX                | `GTEST_OS_AIX`               | Partial               |
| Solaris            | `GTEST_OS_SOLARIS`           | Partial               |
| Fuchsia            | `GTEST_OS_FUCHSIA`           | Experimental          |
| Embedded (ESP32, etc.) | Various                     | Limited               |


---

# End of Platform & Compiler Compatibility Documentation
