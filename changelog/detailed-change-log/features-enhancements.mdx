---
title: "New Features & Enhancements"
description: "An itemized list of all new features and enhancements for each release, mapped to their user impact. Designed for users who need a deep understanding of the product's expansion."
---

# New Features & Enhancements

This documentation provides a detailed, itemized overview of all new features and enhancements introduced in each release of GoogleMock. It is tailored for users who require a deep understanding of how the product has evolved, with a focus on the impact such changes have on user workflows and test coding practices within the mocking framework.

---

## Understanding New Features & Enhancements

Each release of GoogleMock advances the capabilities available to C++ developers for mocking and testing, improving expressiveness, usability, and integration. This page catalogs these improvements in an accessible format, associating them with concrete user outcomes such as easier mocking, enhanced customization, and performance gains.

Our goal is to help you quickly identify relevant enhancements that empower your testing strategies and code quality.

---

## Highlighted Feature Areas

### 1. Mock Method Definition Enhancements

- **Unified `MOCK_METHOD` Macro**: Replacing the old `MOCK_METHODn` macros, the unified `MOCK_METHOD` macro simplifies mocking by enabling a consistent syntax supporting qualifiers like `const`, `override`, `noexcept`, `Calltype`, and reference qualifiers. This improvement streamlines the declaration of mock methods including complex cases such as overloaded and templated methods.

- **Improved Handling of Method Qualifiers**: Users can now define mocks for methods with qualifiers smoothly, ensuring mock behavior matches production code accurately.

- **Better Support for Move-only Types**: Mocking methods that accept or return move-only types (like `std::unique_ptr`) is now supported natively, facilitating modern C++ style mocking without cumbersome workarounds.

### 2. Strictness Modifiers: NiceMock, NaggyMock, StrictMock

- These classes respectively suppress warnings for uninteresting calls, warn by default (current default), or treat uninteresting calls as test failures, enhancing control over mock behavior strictness.

- Strictness modifiers inherit constructors from their base mock class, allowing seamless substitution.

- Note on compatibility: only mocks defined directly with `MOCK_METHOD` macros can be wrapped in strictness modifiers reliably.

### 3. Actions and Custom Actions

- **Expanded Built-in Actions**: GoogleMock ships with a rich set of built-in actions such as `Return()`, `ReturnRef()`, `ReturnPointee()`, `DoAll()`, `SetArgPointee()`, `Invoke()`, `InvokeWithoutArgs()`, and `InvokeArgument<N>()` which let you precisely simulate behavior of mocked interfaces.

- **Custom Action Templates**: Via `ACTION_TEMPLATE()` macros, users can create parameterized action templates with explicit template parameters that the compiler cannot infer automatically, allowing sophisticated behavior simulation for complex test scenarios.

- **Lambda and Functor Support**: Actions can be defined using lambda expressions and functors, providing a flexible and concise syntax for defining mock function behaviors and side effects.

- **Combining Actions with `DoAll()`**: Users can chain multiple actions together, for example, to set output arguments followed by returning a value.

### 4. Matchers and Matchers API

- Enhanced expressive power to match arguments precisely, including support for:
  - Composite and parameterized matchers
  - Safe matcher casting
  - Predicate-based matchers, enabling complex argument validations

- Facilities for writing custom matchers with detailed control over matching logic and descriptive diagnostics.

### 5. Expectation Control and Call Ordering

- Support for:
  - Partial order of mock calls using `Sequence` objects and `InSequence` clauses, reflecting complex call dependencies.
  - Retiring expectations automatically when saturated using `.RetiresOnSaturation()` to reduce stickiness of expectations and ease complex interaction modeling.

- Detailed guidance on precedence of expectations and interactions between `EXPECT_CALL`, `ON_CALL`, and their associated actions.

### 6. Verbosity and Debugging Features

- Enhanced `--gmock_verbose` flag levels (`info`, `warning`, `error`) to control the verbosity of GoogleMock messages for fine-tuned debugging and diagnostics.

- Detailed tracing of matcher evaluations and call matching available under verbose modes, assisting developers in diagnosing subtle matching and expectation issues.

### 7. Thread Safety and Multi-threaded Testing

Guidance on safely using GoogleMock mocks in multithreaded environments, including the execution context of actions and necessary synchronization to avoid race conditions.

### 8. Performance and Compilation Improvements

- Recommendations on reducing compile times by moving constructor and destructor definitions of mock classes to `.cc` files.

- Clarifications on which features may induce slower compilation.

---

## Tips and Best Practices

- Use the unified `MOCK_METHOD` macro for all new mocks to benefit from enhanced qualifiers and cleaner syntax.

- Prefer `ON_CALL` for setting default mock behavior and reserve `EXPECT_CALL` for calls you intend to verify explicitly, avoiding brittle and overly constrained tests.

- Use `NiceMock` for mocks when you want to avoid warnings on uninteresting calls without failing tests, and `StrictMock` to enforce strong call expectations.

- Use `ACTION_TEMPLATE` macros to create flexible custom actions, particularly when generic templates or explicit template parameters are required.

- Control call order precisely with sequences or `InSequence` blocks to avoid flaky tests due to unexpected invocation orders.

- Take advantage of verbose modes (`--gmock_verbose=info`) when diagnosing matching or expectation failures.

- Safely handle move-only types in mock methods using lambda-based actions or directly mocking with the new API support.

- Verify mock expectations early using `Mock::VerifyAndClearExpectations` when mock objects’ lifetimes are managed externally.

---

## Example Snippet: Using `InvokeArgument` Action

The `InvokeArgument<N>(...)` action calls the N-th argument of a mock function, which must itself be a callable, with supplied parameters. This enables simulating callbacks or delegating control flow within tests.

```cpp
using ::testing::InvokeArgument;

EXPECT_CALL(mock, DoSomething(_, _))
    .WillOnce(InvokeArgument<1>(5, std::string("Hello"), std::ref(my_obj)));
```

Here, when `DoSomething` is called, the second argument (index 1) is invoked with three parameters, mixing value and reference semantics.

---

## Further Reading & References

For in-depth guidance on many of the above topics, please consult the following key documentation pages:

- [Defining Mock Methods and Classes](../api-reference/core-mocking-api/mock-methods-and-classes)
- [Configuring Mock Behavior with Actions](../api-reference/core-mocking-api/mock-behavior-actions)
- [Setting Call Expectations and Cardinalities](../api-reference/core-mocking-api/call-expectations-and-cardinalities)
- [Matchers Reference](../api-reference/matchers-and-assertions/using-built-in-matchers)
- [gMock Cookbook](../docs/gmock_cook_book.md)
- [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md)
- [Breaking Changes Guidance](../changelog/breaking-changes-guidance/breaking-changes)

---

This page serves as the comprehensive catalog for all users striving to stay abreast of GoogleMock’s evolving feature set, enabling more powerful, maintainable, and clear mock-based C++ testing.

---

<Check>
To get the most from this changelog section, also review the [Breaking Changes](../changelog/breaking-changes-guidance/breaking-changes) and [Deprecations & Removals](../changelog/breaking-changes-guidance/deprecations-removals) documentation for migration tips and warnings about features that will be removed.
</Check>

---

⌨️ Happy Testing with gMock!

---

[Go to Changelog Overview](../changelog/release-history/latest-release)

[Back to GoogleMock Overview](../googlemock/README.md)
