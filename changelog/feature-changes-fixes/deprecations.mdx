---
title: "Deprecations & Removals"
description: "Keep ahead of deprecated APIs, features, and planned removals—empowering you to plan future-proof test code and avoid technical debt."
---

# Deprecations & Removals

Stay informed about the GoogleMock APIs and features that are deprecated or scheduled for removal. This page helps you plan your test code's evolution proactively, avoiding technical debt and ensuring compatibility with future versions.

---

## Overview of Deprecations and Removals

As GoogleMock evolves, some APIs and functionalities may be deprecated or removed to improve the framework's stability, maintainability, or usability. Keeping ahead of these changes ensures your tests remain robust and your codebase is future-proof.

This page focuses specifically on deprecated features and removals within GoogleMock's mocking mechanisms and related utilities.

## Key Deprecated Features

### Old-Style MOCK_METHODn Macros

- The `MOCK_METHODn` macros (e.g., `MOCK_METHOD1`, `MOCK_CONST_METHOD1`) have been superseded by the new, generalized `MOCK_METHOD` macro introduced in 2018.
- Although still supported for backward compatibility, migration to `MOCK_METHOD` is highly recommended.
  
**Migration Tips:**
- Switch to `MOCK_METHOD(ReturnType, MethodName, (Args...), (Specs...))`.
- Specify qualifiers such as `const` or `override` in the optional fourth `(Specs...)` parameter.
- Address argument types with commas using parentheses or type aliases, as described in the [gMock Cookbook](docs/gmock_cook_book.md#mocking-basics).

### Legacy `ACTION*` Macros

- `ACTION`, `ACTION_P`, and related macros for defining custom actions have been largely replaced by callable objects, lambdas, or implementations of `ActionInterface`.
- Using modern C++ lambda expressions and polymorphic actions is encouraged for clarity, better compiler diagnostics, and greater flexibility.

**Alternatives:**
- Use lambdas or functors as actions in `WillOnce` or `WillRepeatedly` clauses.
- Implement polymorphic actions via `MakePolymorphicAction()` for actions usable across multiple mock function types.

### Discontinued Support for Non-virtual Static Methods and Free Functions

- Direct mocking of static or free functions is not supported by GoogleMock.
- Users are encouraged to introduce interfaces and dependency injection to abstract such functions for mocking.
- In cases where tighter coupling exists, consider refactoring towards interface-driven design.

### Deprecated Verbose Flags and Warning Controls

- GoogleMock's verbosity behavior is now standardized around three levels: `info`, `warning` (default), and `error`.
- Older or redundant verbosity flags may be removed; use `--gmock_verbose` as documented.

## Removals Scheduled or Completed

### Removal of Legacy `MOCK_METHODn` Macros

- Future versions will remove legacy `MOCK_METHODn` macros.
- Transition your mock classes by replacing these with modern `MOCK_METHOD` usage.

### Removal of Old License and Build Scripts (Contextual)

- Some legacy build support, especially around older compilers or C++ standards less than C++17, is deprecated.
- GoogleMock now requires a C++17-compliant compiler and environment (see [Prerequisites & System Requirements](getting-started/setup-installation/prerequisites-system-requirements)).

## Best Practices for Handling Deprecation

- **Regularly consult the changelog and migration notes** to identify deprecated features before upgrading.
- **Replace old macro usages with current equivalents** as soon as possible to avoid technical debt.
- **Use the new matcher and action APIs** as described in the [gMock Cookbook](docs/gmock_cook_book.md) for cleaner test code.
- **Favor interface-driven design** to mock dependencies instead of static or free functions.
- **Run tests with `--gmock_verbose=info`** during migration to get detailed mock call matching insights.

<Tip>
If you encounter compiler warnings or test failures related to deprecated APIs, consult the latest [gMock Cookbook](docs/gmock_cook_book.md) and [Mocking Reference](docs/reference/mocking.md) for updated patterns and sample code.
</Tip>

## Planning for Future-Proof Test Code

To avoid surprises with API changes:

1. **Review your mock class definitions:** Replace any legacy `MOCK_METHODn` usage with `MOCK_METHOD` as soon as practical.
2. **Audit usage of custom actions:** Prefer lambdas and polymorphic actions over legacy `ACTION` macros.
3. **Avoid non-virtual functions in mocks:** Use interface abstractions whenever possible for loose coupling.
4. **Monitor the GoogleTest/GoogleMock repository:** Watch release notes and changelogs.
5. **Use proper versioning and migration guides:** Validate your build and runtime environment matches requirements.

By aligning your tests with the current GoogleMock best practices, you protect your test suite against issues stemming from deprecated or removed features.

## Additional Resources

- [gMock Cookbook](docs/gmock_cook_book.md): Practical recipes for mocking, expectations, actions, and migration.
- [Mocking Reference](docs/reference/mocking.md): Comprehensive API details for mock classes and methods.
- [Legacy gMock FAQ](docs/gmock_faq.md): Answers to frequently asked questions, including deprecated usage.
- [Changelog: Breaking Changes & Upgrades](changelog/breaking-changes-upgrades/breaking-changes): Guidance on migration.

---

_For historical context, see also [Legacy gMock FAQ](docs/gmock_faq.md), which highlights older clinical issues and recommended modern approaches._

---

© Google, released under BSD license.
