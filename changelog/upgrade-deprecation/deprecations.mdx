---
title: "Deprecation Notices"
description: "Summary of deprecated features, components, and APIs, along with timelines for removal and recommended alternatives. This helps teams proactively adjust usage and future-proof their test suites."
---

# Deprecation Notices

GoogleTest and GoogleMock maintain a commitment to evolving the framework while ensuring backward compatibility and a smooth transition for users. This page provides an authoritative overview of deprecated features, components, and APIs within the testing framework, outlines their planned removal timelines, and recommends alternatives to help teams future-proof their codebase.

---

## 1. Overview of Deprecations

Over time, certain features and APIs in GoogleTest and GoogleMock become outdated due to changes in C++ standards, improved APIs, or replacement with better mechanisms. This document summarizes such deprecated items explicitly related to mocking and expectation declarations, guiding users to modern alternatives.

Users are encouraged to avoid deprecated features and migrate existing code following the guidelines here to minimize technical debt and ensure compatibility with future releases.

---

## 2. Deprecated Mock Declaration Macros

### 2.1 Legacy MOCK_METHODn Macros

The family of macros `MOCK_METHODn`, `MOCK_CONST_METHODn`, and their variants are deprecated in favor of the unified `MOCK_METHOD` macro.

**What's deprecated:**

```cpp
MOCK_METHOD0(MethodName, ReturnType());
MOCK_CONST_METHOD1(MethodName, ReturnType(ArgType));
MOCK_METHOD1_WITH_CALLTYPE(CallType, MethodName, ReturnType(ArgType));
```

**Why deprecated:**

- They lack the flexibility and extensibility of the newer `MOCK_METHOD` macro.
- `MOCK_METHOD` supports qualifiers, call types, and reference qualifiers in a single concise form.

**Alternative:** Use the `MOCK_METHOD` macro introduced in 2018, with the following syntax:

```cpp
MOCK_METHOD(ReturnType, MethodName, (Args...), (specifiers));
```

**Example:**

```cpp
// Deprecated
MOCK_CONST_METHOD1(Foo, int(int));

// Recommended
MOCK_METHOD(int, Foo, (int), (const, override));
```

**Migration tip:** Wrap complex return types or argument types containing commas in parentheses or use `using` aliases for readability.


---

## 3. Deprecated Mock Strictness Wrappers

The macros `NaggyMock` and `StrictMock` continue to be valid but usage scenarios have evolved with clarified meaning:

- `NaggyMock` is the current default behavior and effectively warns on uninteresting calls.
- `StrictMock` enforces strict test failures on unexpected calls, useful for guaranteeing test completeness but prone to brittleness.

**Note:** Nesting these wrappers (e.g., `NiceMock<StrictMock<...>>`) is **not supported** and considered deprecated practice.

Use strategic choice of mock strictness considering test maintenance trade-offs.

---

## 4. Deprecated Expectation Specification Patterns

### 4.1 Implicit Cardinality Inference (Legacy Behavior)

Legacy behavior where cardinalities are inferred implicitly may lead to confusion. Explicit use of `.Times()` is now recommended.

```cpp
// Legacy, may be deprecated
EXPECT_CALL(mock, Foo()).WillOnce(Return(1));

// Preferred
EXPECT_CALL(mock, Foo()).Times(1).WillOnce(Return(1));
```

### 4.2 Deprecated Use of Non-Chainable Configuration in Expectation Setup

Some older patterns where `With()`, `Times()`, and `WillOnce()` clauses are used out of order or multiple times are deprecated in favor of enforced clause sequencing:

```cpp
// Deprecated
EXPECT_CALL(mock, Foo()).Times(1).With(_).WillOnce(Return(1)); // 'With' must be first

// Correct
EXPECT_CALL(mock, Foo()).With(_).Times(1).WillOnce(Return(1));
```

Check the [Mocking Reference](../api-reference/core-apis/mocking-and-methods) for current syntax rules.

---

## 5. Deprecated Actions and Macros

### 5.1 Legacy ACTION and ACTION_P Macros

Macros such as `ACTION`, `ACTION_P`, `ACTION_P2`, ..., used for defining new actions are supported but considered legacy.

**Recommendation:** Prefer using modern C++ lambdas or functors with `Invoke()`, `WillOnce()`, or `WillRepeatedly()` to define custom actions.

Example:

```cpp
// Legacy
ACTION(MyAction) { return arg0 + 1; }
EXPECT_CALL(mock, Foo()).WillOnce(MyAction());

// Modern
EXPECT_CALL(mock, Foo()).WillOnce([](int x) { return x + 1; });
```

### 5.2 Using `IgnoreResult()` on Void Actions

Applying `IgnoreResult()` to an action that already returns `void` is discouraged and known to cause confusing compiler errors.

Use `IgnoreResult()` only on actions that return non-void results where the result is otherwise unused.

---

## 6. Timelines and Removal Plans

While deprecations signal a path forward, GoogleTest and GoogleMock projects aim to maintain backward compatibility for several major releases.

Features marked as deprecated may continue to function for multiple releases but will issue warnings if enabled in verbose modes or when building with updated SDK versions.

**Planned removal:**
- Legacy `MOCK_METHODn` macros will be removed in a major future release.
- Deprecated usage patterns in `EXPECT_CALL` and `ON_CALL` may cause compilation errors post removal.

Users should routinely consult release notes and upgrade guides:

- [Breaking Changes & Migration Notes]( /changelog/upgrade-deprecation/breaking-changes)  
- [Step-by-Step Upgrade Guide]( /changelog/upgrade-deprecation/upgrade-guide)

---

## 7. Recommended Migration Strategies

- Replace old `MOCK_METHODn` macros with `MOCK_METHOD` macro including qualifiers.
- Avoid deprecated method invocation patterns; always use clauses in the prescribed chaining order.
- Replace legacy `ACTION` macros with C++ lambdas or function objects.
- Regularly run your test suite with `--gmock_verbose=info` to catch deprecated usages early.
- Review the [Mocking Reference](../api-reference/core-apis/mocking-and-methods) and [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for updated best practices.

### Example Migration of MOCK_METHOD Usage

```cpp
// Before (deprecated)
MOCK_CONST_METHOD1(Foo, int(int));

// After (recommended)
MOCK_METHOD(int, Foo, (int), (const, override));
```

---

## 8. Additional Resources

- **[Mocking Reference](../api-reference/core-apis/mocking-and-methods.md):** Comprehensive guide on mock methods and expectations.
- **[gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html):** Practical recipes and migration tips.
- **[Breaking Changes & Migration Notes]( /changelog/upgrade-deprecation/breaking-changes):** Detailed breaking changes with instructions.
- **[Upgrade Guide]( /changelog/upgrade-deprecation/upgrade-guide):** Step-by-step instructions for major upgrades.
- **[Legacy gMock FAQ]( /docs/gmock_faq.md):** Insights into older behaviors and common pitfalls.

<Tip>
To ensure your tests remain robust and maintainable, plan migration as part of your regular development cycles. Monitor your build output for deprecation warnings, and refactor accordingly.
</Tip>

<Warning>
Do NOT continue using deprecated APIs in new code. They may be removed at any major release, causing breakage.
</Warning>

---

## 9. Summary

This document lists deprecated APIs and features primarily around mocking macro usage and expectation configuration in GoogleMock. It outlines recommended modern replacements and encourages proactive migration to prevent future compatibility issues. By following the best practices and leveraging modern C++ features, developers gain clearer, safer, and more maintainable test code.

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/upgrade-deprecation/deprecations.md", "range": "1-92"}]} />
