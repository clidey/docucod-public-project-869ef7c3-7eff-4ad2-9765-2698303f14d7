---
title: "New Features & Improvements"
description: "Highlights newly introduced capabilities, enhancements to existing features, and performance improvements. Learn how to leverage the latest additions to streamline your test workflows."
---

# New Features & Improvements

Welcome to the detailed overview of the latest capabilities, enhancements, and performance improvements introduced in GoogleTest and GoogleMock. This page is your essential guide to understanding what’s new and how these updates can help you write cleaner, faster, and more reliable tests.

---

## 1. Enhanced Mocking Capabilities

GoogleMock continues to evolve, providing richer, more intuitive tools for mocking and interaction verification:

- **Improved Support for Move-Only Types**: Mock methods can now seamlessly handle move-only types like `std::unique_ptr` for both parameters and return values. This allows more natural mocking of modern C++ interfaces involving resource management.

- **Flexible Matchers and Actions**: Enjoy expanded power with matchers such as polymorphic and composite matchers, enabling you to express complex argument expectations succinctly. Actions now support invoking arbitrary callables including lambdas, functors, and member functions, improving flexibility in specifying mock behaviors.

- **Simplified Mock Class Definitions**: New syntax enhancements and macro usage improvements make defining mock classes more straightforward, especially for overloaded methods, const methods, and methods with complex signatures.

> **Example:**
>
> ```cpp
> class MockFoo : public Foo {
>  public:
>    MOCK_METHOD(std::unique_ptr<Buzz>, MakeBuzz, (StringPiece text), (override));
>    MOCK_METHOD(void, Process, (int count), (override));
>    MOCK_METHOD(int, GetValue, (), (const, override));
> };
> ```

## 2. More Expressive Expectation Control

Refinements to expectation clauses empower you to precisely define test dynamics:

- **Cardinality Inference and Control**: GoogleMock smartly infers call counts from action clauses (`WillOnce` and `WillRepeatedly`), reducing boilerplate. You can also implement custom cardinalities for tailored call count semantics.

- **Ordered and Partially-Ordered Call Sequences**: The `InSequence` and `After` clauses support strict and DAG-based ordering, giving you granular control over expected call order during tests.

- **Retiring Saturated Expectations**: Expectations can be configured to retire automatically when fully satisfied with `.RetiresOnSaturation()`, preventing over-matching and easing complex sequence management.

## 3. Robust Default Behavior and Uninteresting Call Handling

Get more control and cleaner test outputs with enhanced default action configuration:

- **Default Actions with `ON_CALL`**: Set graceful default responses to mock calls without explicit expectations, ensuring tests continue without noise.

- **Strictness Modifiers – Nice, Naggy, Strict Mocks**:
  - *NiceMock*: Suppresses warnings on uninteresting calls, reducing output clutter while allowing flexibility.
  - *NaggyMock*: The default, alerts on uninteresting calls to catch potential issues.
  - *StrictMock*: Treats all uninteresting calls as errors, helping enforce precise test contracts.

- **Leak Management**: Use `Mock::AllowLeak()` to deliberately relax verification on certain mock objects, useful in special ownership scenarios.

## 4. Improved Diagnostic and Logging Features

Debugging and understanding mock interactions has become easier:

- **Verbose Logging Controls**: The `--gmock_verbose` flag can be set to `info`, `warning`, or `error` to control the granularity of mock call logging, including argument and return value printing and stack traces.

- **Detailed Failure Messages**: When expectations fail (due to wrong arguments, call counts, or order), GoogleMock provides comprehensive explanations, including argument mismatches, unsatisfied pre-requisites, and retired expectations.

- **Stack Traces on Expectations**: Enabling verbose info-level logging adds stack traces at mock call sites to accelerate root cause analysis.

## 5. Performance and Compilation Enhancements

To streamline development workflows:

- **Mock Class Compilation Optimization**: By moving mock class constructors and destructors to `.cc` files, compilation times can be substantially reduced for large test suites.

- **Better Integration with Build Systems**: GoogleTest and GoogleMock support smoother integration with CMake and Bazel, including examples and recommended practices for linking and configuration.

---

## Practical Tips for Leveraging New Features

- Use `ON_CALL` to specify default mock behaviors that suit most test cases, reserving `EXPECT_CALL` for interactions you want to verify explicitly.
- Employ `NiceMock` to declutter your test outputs during early development or when uninteresting calls are safe.
- Organize expectations using `InSequence` or `After` to mirror real interaction protocols and avoid fragile tests.
- Define custom matchers and actions when built-in ones don’t fully capture your intent.
- Enable verbose logging (`--gmock_verbose=info`) during test failures to get detailed diagnostics.

## Troubleshooting Common Issues

- **Uninteresting Call Warnings**: If warnings about unexpected calls appear, consider adding appropriate expectations or switching to `NiceMock`.
- **Excessive Calls**: Use `.RetiresOnSaturation()` or sequences to prevent errors from calling a mock method too many times.
- **Compilation Errors with Complex Types**: Wrap argument or return types containing commas in parentheses or define type aliases to resolve macro parsing issues.

## Where to Go Next

To deepen your understanding and mastery of the new features described here, consult:

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Recipes for advanced mocking patterns and custom behaviors.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Detailed API and macro usage.
- [Matchers and Actions API](https://google.github.io/googletest/reference/matchers.html): For powerful argument validation.
- [Basic Mocking with GoogleMock](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly introduction to mocking.
- [Setting up GoogleTest](https://github.com/google/googletest/tree/main/docs/getting-started): For installation and build system integration.

---

For a broader context on GoogleTest’s continual improvements, explore recent release overviews in the Changelog section. This page sits within the Changelog’s Detailed Changelog segment, complementing the Version Timeline and Breaking Changes pages.

{/*
Navigation Map Context
*/}

Explore related pages for foundational and practical insights:

- [Feature Overview](https://google.github.io/googletest/overview/essentials-and-concepts/feature-overview)
- [Basic Mocking with GoogleMock](https://google.github.io/googletest/gmock_for_dummies.html)
- [Test Discovery and Execution](https://google.github.io/googletest/guides/essential-workflows/test-discovery-execution.html)

---