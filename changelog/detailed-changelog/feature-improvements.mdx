---
title: "New Features & Improvements"
description: "Comprehensive entries summarizing new feature introductions, expanded APIs, and usability enhancements in each version. Each point references relevant components, guiding users to deeper technical details."
---

# New Features & Improvements

This page provides a comprehensive catalog of new feature introductions, API expansions, and usability enhancements across GoogleTest and GoogleMock versions. Each entry is designed to guide developers and testers through the latest capabilities added to the framework, enabling better test design, richer mocking behaviors, and refined test execution control.

---

## Highlights of Recent Feature Enhancements

### Enhanced Mocking Capabilities

- **Unified MOCK_METHOD Macro**
  - GoogleMock’s `MOCK_METHOD` macro now supports a consistent and expressive syntax for mocking any method—including overloaded, template, and const-qualified methods.
  - Qualifiers like `const`, `override`, `noexcept`, call type (`Calltype()`), and reference qualifiers (`ref(&)`, etc.) can be specified to closely model real method signatures.
  - Complex argument types with commas require parentheses or typedef aliases, ensuring proper parsing and less boilerplate.

- **Mocking Non-Virtual and Template Methods**
  - Support for mocking non-virtual methods via standalone mock classes and templates enables high-performance dependency injection without inheritance.
  - Mock class templates are fully supported, allowing mocking of generic interfaces seamlessly.

- **Advanced Mock Behavior Control**
  - Strict, nice, and naggy mocks let users control warnings and failures on uninteresting call scenarios, tailoring verbosity and test strictness.
  - Expectations can enforce call order via sequences, partial ordering with `After()`, and grouped sequences with `InSequence`.
  - Multi-argument matching and complex matchers empower users to specify exact, fuzzy, or composite argument expectations.

- **Default Behavior and On-Call Support**
  - Default actions using `ON_CALL` enable specifying baseline behaviors without enforcing expectations, reducing test fragility.
  - Users are encouraged to use `ON_CALL` for default behavior and reserve `EXPECT_CALL` for true verification.

### Improved Actions and Matchers API

- **Flexible Actions**
  - Built-in actions such as `Return()`, `ReturnRef()`, `DoAll()`, and `Invoke()` allow composing sophisticated mock responses, including side effects like setting output arguments.
  - Support for complex scenarios including delegation to fakes, real objects, or parent class implementations.
  - Ability to mock side effects on output parameters and asynchronous behaviors.

- **Rich Custom Matcher API**
  - New facilities to define polymorphic and monomorphic matchers using `MATCHER`, `MATCHER_P*`, and matcher classes.
  - Matchers can validate nested container contents, pointer pointees, and use combinators like `AllOf()`, `AnyOf()`, and `Not()`.
  - Users can write expressive, reusable matchers that improve test clarity and maintainability.

- **Support for Move-Only Types**
  - Official support for mocking methods with move-only arguments (e.g., `std::unique_ptr`) allows testing modern C++ idioms without hacks.
  - Guidance and patterns are provided for returning and accepting move-only types properly in mocks.

### Usability and Performance Improvements

- **Simplified Interface Patterns**
  - Users can implement adapter-style mock classes that expose trimmed or simpler method signatures for easier test maintenance.
  - Delegating calls to real or fake objects minimizes duplication and tightly couples tests with desired behaviors.

- **Compilation Optimization Tips**
  - Moving mock class constructor and destructor definitions into source files drastically speeds up compilation for large mock classes.

- **Inspection and Debugging Enhancements**
  - The `--gmock_verbose` flag controls logging levels from errors-only to detailed informational traces.
  - Runtime introspection of mock calls, including stack traces on failures, assists in debugging.
  - Facilities for forcibly verifying mocks before destruction ensure reliable test failures in the face of leaks.

### Practical Examples & Use Case Guidance

- Step-by-step mock class creation using `MOCK_METHOD` and managing method overrides
- Setting diverse expectations using `EXPECT_CALL` modifiers including `Times()`, `WillOnce()`, `WillRepeatedly()`, and order enforcement
- Using sequences and partial order specifications for complex interaction verifications
- Crafting custom matchers and actions to fit domain-specific validation
- Implementing asynchronous test flows and thread safety considerations with mocks

---

## Best Practices and Recommendations

- **Use `ON_CALL` for default behaviors, `EXPECT_CALL` for strict expectations** to avoid test brittleness.
- **Prefer NiceMocks by default** for less noisy output; use StrictMocks for rigorous verification when needed.
- **Write focused expectations** verifying one property per test to maximize test maintainability.
- **Leverage sequences and partial ordering constructs** instead of relying on implicit call order.
- **Avoid mocking concrete classes unnecessarily; define interfaces** where practical for better test abstraction.
- **Utilize existing matchers and actions before writing custom ones**, but embrace custom matchers to improve readability when needed.
- **Remember to verify and clear mock expectations** early in tests when objects persist beyond natural scopes.

---

## Related Documentation and Links

- [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md) — Practical recipes for common and advanced mocking scenarios
- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md) — Comprehensive API details on mock macros, expectation modifiers, and default actions
- [gMock for Dummies](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md) — Introductory guide to mocking concepts and usage flows
- [Matchers Reference](https://github.com/google/googletest/blob/main/docs/reference/matchers.md) — Detailed reference of available matchers and guidelines for composing new ones
- [Actions Reference](https://github.com/google/googletest/blob/main/docs/reference/actions.md) — Built-in actions and techniques to customize mock behavior
- [Breaking Changes & Migration Guides](https://github.com/google/googletest/blob/main/docs/changelog/breaking-changes-migrations/upgrade-guides.md) — Instructions for upgrading across versions

---

For a holistic understanding, also review these complementary areas:

- Writing first tests and organizing tests ([Writing Your First Test](../guides/core-workflows/writing-your-first-test.md), [Organizing and Running Tests](../guides/core-workflows/organizing-and-running-tests.md))
- Advanced mocking techniques and strictness modifiers ([Strictness & Mock Behavior Modifiers](../api-reference/mocking-framework/strictness-and-behavior-modifiers.md))
- Continuous integration best practices to integrate mocks effectively

---

This page is continuously updated to reflect ongoing improvements and emerging best practices in GoogleTest and GoogleMock development. We encourage users to explore the referenced guides and experiment with new features to build robust, maintainable, and expressive tests.
