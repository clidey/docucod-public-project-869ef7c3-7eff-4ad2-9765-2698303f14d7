---
title: "Breaking Changes & Migration Notes"
description: "Details any changes in each release that could break backward compatibility, including required code updates and removal of deprecated APIs. Provides concrete migration strategies and references to updated APIs."
---

# Breaking Changes & Migration Notes

This page details any changes in each release of GoogleTest and GoogleMock that could break backward compatibility. It provides concrete migration strategies, outlines required code updates, and points to relevant updated APIs for a smooth transition.

---

## What Are Breaking Changes?

Breaking changes are modifications to the API or behavior of GoogleTest and GoogleMock that could cause existing tests or test setups to stop compiling or functioning correctly without modifications. These are typically introduced during major or sometimes minor version releases and require user action to adapt.

### Why Pay Attention to Breaking Changes?

When you upgrade to a newer version of GoogleTest, ignoring breaking changes may lead to:

- Test failures due to API incompatibility.
- Compilation errors arising from removed or altered interfaces.
- Unexpected test behavior due to changes in default mock object strictness or assertion semantics.

Being aware of these changes ensures your test suite remains reliable and maintainable.

## Identifying Breaking Changes in Releases

Each release announcement highlights any breaking changes along with the recommended path to migrate your code.

### Typical Breaking Change Categories

- **API Removals or Renames**: Deprecated functions, macros, or classes removed or renamed.
- **Behavioral Changes**: Modification of default behaviors that might affect tests.
- **Build System Updates**: Changes to build requirements or supported C++ standards.
- **Mocking API Changes**: Alterations in MOCK_METHOD macro usage or mock strictness.

## Migration Strategies

To ease migration, use the following approaches:

### 1. Review Release Notes Diligently

Before upgrading, thoroughly read the release notes for the new GoogleTest version, focusing on Breaking Changes sections. These usually include:

- Description of the change
- Impact analysis
- Migration steps and code examples

### 2. Update Deprecated API Usages

Where APIs are removed or renamed, update your code accordingly. For instance:

- Replace deprecated assertions with their recommended alternatives.
- Adjust mock class definitions if the `MOCK_METHOD` macro signature changes.

### 3. Adapt to New Language Requirements

Since the GoogleTest 1.17.x branch requires at least C++17, ensure your project is configured accordingly. Some examples:

- Update your compiler flags to enable C++17.
- Remove usages incompatible with C++17 or adapt them.

### 4. Manage Mock Strictness Changes

If the default behavior of mock objects changes (e.g., from NaggyMock to NiceMock or StrictMock), explicitly specify mock strictness in your mocks:

```cpp
using ::testing::NiceMock;
using ::testing::StrictMock;

NiceMock<MyMock> mock;  // Suppresses uninteresting call warnings
StrictMock<MyMock> mock; // Treats uninteresting calls as failures
```

### 5. Verify Test Behavior Post-Migration

Run your entire suite after migration. Pay close attention to:

- Compile errors or warnings
- New test failures
- Changes in test output formatting or reporting

Use verbose modes and debug assertions to assist.

### 6. Utilize migration examples and tools

Some breaking changes have automated migration scripts or code samples available in the community or official repositories. Incorporate those where possible.

## Common Breaking Changes and their Migration

### Major Version: 1.17.0 (and related branches)

- **C++17 Minimum Required**: The compiler must fully support C++17.
    - _Migration_: Configure your build system accordingly.

- **Unified Mock Macro Signature**: `MOCK_METHOD` replaces older macro forms.
    - _Migration_: Refactor mock classes to use `MOCK_METHOD(ReturnType, MethodName, (Args...), (Qualifiers))`.

- **Explicit Test Suite Naming for Death Tests**
    - _Migration_: Rename death test suites to follow the `*DeathTest` suffix convention.

- **Underscore Restriction in `TEST` Names**
    - _Migration_: Avoid underscores in test suite and test names to prevent name clashes.

## Deprecated APIs and Features

### Deprecated Assertions

Check release notes and remove deprecated assertions, substituting with new alternatives such as `EXPECT_THAT` with matchers instead of custom `EXPECT_PRED*` where applicable.

### Mocking API Deprecations

- Avoid old-style `MOCK_METHODn` macros in favor of `MOCK_METHOD` for better maintainability.

### Flag and Environment Variable Updates

Flags like `--gtest_death_test_style` may have evolved in supported values and defaults. Verify your test runners and build configurations.

## Troubleshooting Post-Migration

- **Unexpected test failures**: Use verbose mode (`--gtest_verbose=info`) for detailed logs.
- **Compilation failures**: Review API changes and build settings, especially C++ standard flags.
- **Mock-related warnings or errors**: Check mock strictness and expectation configurations.

## Practical Migration Examples

Consider the following example where code uses old macros and deprecated naming:

```cpp
// Old style MOCK_METHOD
class OldMock : public Foo {
  MOCK_METHOD1(Bar, void(int x));
};

// After migration
class NewMock : public Foo {
  MOCK_METHOD(void, Bar, (int x), (override));
};
```

Handling test suite naming for death tests:

```cpp
// Legacy death test naming
TEST_F(FooTest, BarDeath) { ASSERT_DEATH(...); }

// Recommended
class FooDeathTest : public FooTest {};
TEST_F(FooDeathTest, Bar) { ASSERT_DEATH(...); }
```

## References to Updated APIs

- **Assertions**: Refer to the [Assertions Reference](api-reference/core-apis/assertions.md) that includes updated macros and how to use them.
- **Mocking**: Read the [Mocking Reference](api-reference/mocking/mock-objects.md) for the latest on mock class declarations and expectations.
- **Matchers**: The [Matchers Reference](api-reference/advanced-testing/matchers.md) provides improved flexible assertions.

## Additional Resources

- [GoogleTest Primer](docs/advanced.md#primer) for foundational concepts.
- [Migration Guide and Release Notes](https://github.com/google/googletest/releases) for version-specific changes.

---

<Tip>
Always maintain a backup branch before performing upgrades and test runs. Automate your tests in CI systems to catch regression early.
</Tip>

<Tip>
Use the `SCOPED_TRACE` macro to aid debugging when migrating complex tests with nested subroutines.
</Tip>

# Frequently Asked Questions

### Can I skip migration steps?
No, breaking changes require attention to prevent test failures.

### How do I handle deprecated EXPECT_PRED* usage?
Transition to using `EXPECT_THAT` with matchers or write predicate-format assertions.

### What if my death tests fail after upgrade?
Ensure your death tests use the current death test style and suite naming conventions.

### Who to contact for help?
Reach out to the [GoogleTest community](https://groups.google.com/g/googletestframework).

---

## Sample Migration Workflow

<Steps>
<Step title="Backup Your Current Codebase">
Make sure you have a version-controlled snapshot of your current tests.
</Step>
<Step title="Review Release Notes">
Read the release notes for the target GoogleTest version, focusing on breaking changes.
</Step>
<Step title="Upgrade Build Configurations">
Set your compiler to support C++17 or later.
</Step>
<Step title="Refactor Mock Classes">
Replace deprecated `MOCK_METHODn` macros with `MOCK_METHOD`.
</Step>
<Step title="Rename Death Test Suites">
Apply `*DeathTest` suffix to test fixture classes containing death tests.
</Step>
<Step title="Test All Code">
Run your test suite, analyze failures, and fix issues iteratively.
</Step>
</Steps>

---

## Conclusion

Upgrading GoogleTest requires attention to breaking changes especially related to mocking API, test naming conventions, and build configurations. This guide equips you with knowledge and actionable steps to upgrade smoothly while ensuring your tests remain robust and maintainable.

---

## See Also

- [GoogleTest Release History & Highlights](/changelog/release-history/feature-highlights)
- [GoogleTest Installation and Environment Setup](/guides/getting-started/setup-installation)
- [Assertions Reference](/api-reference/core-apis/assertions)
- [Mocking Reference](/api-reference/mocking/mock-objects)
- [Matchers Reference](/api-reference/advanced-testing/matchers)
- [GoogleTest FAQ](/faq/getting-started-faq/installation-integration-faq)

---

<Info>
For version-specific migration instructions, consult the GitHub releases page and consider subscribing to community discussions.
</Info>