---
title: "Breaking Changes & Deprecations"
description: "Clearly outlines functionality that has changed incompatibly, deprecated APIs, and removed features. Calls out specific migration challenges and offers references to alternatives, helping teams avoid pitfalls during upgrades."
---

# Breaking Changes & Deprecations

This page clearly outlines GoogleTest's breaking changes, deprecated API elements, and removed features. It aims to guide users by highlighting incompatibilities introduced in versions, specific migration challenges, and suggestions for replacement or alternative approaches. By understanding these changes, teams can plan upgrades confidently and avoid integration pitfalls.

---

## 1. Overview of Breaking Changes

GoogleTest maintains a strong commitment to backward compatibility but occasionally introduces breaking changes to improve design, correctness, or security. This section summarizes those changes relevant to users and developers, focusing particularly on alterations in API behavior, signature, or expected usage patterns.

- **Test Suite and Test Fixture Compatibility**: Tests within a single test suite must share the same test fixture class. Mixing tests with different fixtures (e.g., `TEST` and `TEST_F`) in the same suite is now strictly prohibited and will cause runtime failures. This prevents subtle test conflicts and unstable behavior.

- **Flag and Command-Line Interface Modifications**: Some flags have changed behavior or naming conventions, and deprecated flags may emit warnings or be removed in future releases.

- **Regular Expression Engine Consistency**: The regex implementation used depends on platform and configuration; mismatches or deprecated regex syntax should be avoided.

- **Assertion Macro Behavior**: Assertion macros now enforce evaluation and streaming rules more consistently. For example, streaming messages in `ASSERT_*` macros is constrained by function return types and exception support.

- **Death Test Execution**: The handling of death tests in thread-safe or fork-based modes may vary. Test suites containing death tests should be named with a `*DeathTest` suffix and run before others to avoid concurrency issues.

---

## 2. Deprecated APIs and Practices

To evolve GoogleTest safely, some older API components and practices have been deprecated. Users are encouraged to migrate toward supported alternatives.

- **Legacy Test Case API**: The old `TestCase` naming and API are deprecated; please use `TestSuite` and associated new APIs instead.

- **Typed Test Macros**: Old `TYPED_TEST_CASE` and `TYPED_TEST_CASE_P` macros have been replaced by `TYPED_TEST_SUITE` and `TYPED_TEST_SUITE_P` respectively. Use the new macros for future compatibility.

- **Flagfile Support**: The flagfile mechanism has evolved with new file parsing semantics, and old flagfile flags or methodologies may be phased out.

- **Streaming Test Result Output**: The legacy streaming output channels have been superseded by improved listener-based implementations.

- **Test Discovery in Parameterized Tests**: Defining parameterized tests (`TEST_P`) without instantiation (`INSTANTIATE_TEST_SUITE_P`) now causes explicit failure with guidance, unless marked with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.

---

## 3. Removed Features

Deprecated features will eventually be removed. Current removals include:

- **Support for Identifiers with Trailing or Leading Underscores in Test Names**: Due to C++ naming rules and internal class name generation, test suite or test names containing underscores at critical positions are disallowed.

- **Old Macros for Parameterized Tests**: `INSTANTIATE_TEST_CASE_P`, `REGISTER_TYPED_TEST_CASE_P` and related have been removed; switch to newer suite-based macros.

- **Unsupported Platforms and Builds**: Some legacy or niche platform support has been dropped due to maintenance overhead.

- **Deprecated Exception Handling Macros**: Exception handling integration has been refined, and some older compatibility wrappers have been removed.

---

## 4. Migration Guidance and Common Challenges

### Mixing `TEST` and `TEST_F` in the Same Suite

Issue: Mixing tests using different fixture types in the same suite leads to runtime errors.

Solution: Group all related tests into unique suites with consistent fixtures. If sharing setup code is desired, use fixture inheritance and create separate suites for each derived fixture.

Example:
```cpp
class BaseTest : public ::testing::Test {
  // Shared setup
};
class FooTest : public BaseTest {};
class BarTest : public BaseTest {};

TEST_F(FooTest, Test1) { ... }
TEST_F(BarTest, Test2) { ... }
```

### Transition from Deprecated Macros

- Replace `TYPED_TEST_CASE` by `TYPED_TEST_SUITE`.
- Replace `INSTANTIATE_TEST_CASE_P` by `INSTANTIATE_TEST_SUITE_P`.
- Replace `REGISTER_TYPED_TEST_CASE_P` by `REGISTER_TYPED_TEST_SUITE_P`.

See the [Parameterized and Typed Tests Guide](../guides/core_testing_patterns/parameterized_tests.md) for detailed migration.

### Handling Death Tests in Multithreaded Environments

Death tests require special consideration. Always name suites with death tests ending with `DeathTest` and run them before other tests to avoid threading issues. Prefer the "threadsafe" death test style when concurrency is present.

More detail: see the [Death Tests Guide](../guides/advanced_usage_best_practices/death_tests.md).

### Reserved Keys in `RecordProperty`

Avoid using reserved XML attribute keys such as `name`, `status`, `time`, `classname`, `type_param`, and others when recording properties in tests to avoid silent failure or ignored entries.

### UTF-8 and Wide String Handling

GoogleTest prints and streams Unicode messages carefully with UTF-8 encoding. Avoid assumptions about output format and switch to portable methods for string comparisons and prints.

---

## 5. Best Practices and Recommendations

- Ensure that test names and suites do not start or end with underscores to avoid name collisions.
- Adopt new macros and APIs early to minimize migration overhead.
- Separate test suites logically according to fixture types.
- Use explicit instantiation of parameterized tests to prevent silent failures.
- Adopt event listeners for customizing test reporting.

---

## 6. References and Related Documentation

- [Test Macros and Suite Framework](../api-reference/core-testing-api/test-macros-framework.md) – Recommended for test structure and naming conventions.
- [Assertions Reference](../docs/reference/assertions.md) – For detailed info on assertion macros.
- [Parameterized and Typed Tests](../api-reference/core-testing-api/parameterized-and-typed-tests.md) – For migration from deprecated macros.
- [Death Tests Guide](../guides/advanced_usage_best_practices/death_tests.md) – For proper usage of death tests.
- [FAQ on Naming and Test Discovery](../docs/faq.md) – Covers common pitfalls and rationale regarding test naming.
- [Migration and Upgrade Instructions](./upgrade-instructions.md) – Covers step-by-step upgrade flow.

---

## 7. Troubleshooting

- **Unexpected Runtime Errors When Mixing Fixtures**: Review test suite organization; check if fixtures are consistent.
- **Missing Tests Due to Lack of Instantiation**: Always instantiate parameterized tests.
- **Assertion Macro Errors in Non-Void Functions or Constructors**: Place fatal assertions in `SetUp`/`TearDown` or void-returning helper functions.
- **Death Test Failures in Multithreaded Contexts**: Use the "threadsafe" death test style and properly isolate death tests.

---

## 8. Example Migration Scenario

```cpp
// Old Usage (DEPRECATED)
TYPED_TEST_CASE(MyTypedTest, MyTypes);

INSTANTIATE_TEST_CASE_P(MyInstantiation, MyTypedTest, MyTypes);

// New Usage (Recommended)
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

INSTANTIATE_TEST_SUITE_P(MyInstantiation, MyTypedTest, MyTypes);
```

Ensure your test suite and test names avoid underscores in critical positions to prevent internal name conflicts.

---

By adhering to these guidelines and understanding the breaking changes and deprecated APIs, developers will maintain robust and future-proof test codebases.

---

_Last updated: see [Version Overview](version-overview.md) page for exact versioning._
