---
title: "Deprecation Notices"
description: "An overview of APIs, features, or behaviors scheduled for removal or already deprecated, including timelines and recommended alternatives. Keeps codebases forward-compatible and maintainable."
---

# Deprecation Notices

This page provides a clear, user-centric overview of the APIs, features, or behaviors in GoogleTest and GoogleMock that are either scheduled for removal or have already been deprecated. Keeping your test codebase forward-compatible is essential for maintainability and smooth upgrades. Here, you'll find guidance on what to avoid, timelines for removal, and recommended best-practice alternatives.

---

## Understanding Deprecation in GoogleTest

Deprecation is a formal indication that certain features are obsolete and will be removed in a future release. This process allows you to transition your tests or mocks smoothly to more current APIs and avoids disruption when upgrading.

### What Happens When a Feature Is Deprecated?
- The feature remains functional but may emit compiler warnings or notices.
- Documentation and migration guides will indicate the preferred replacements.
- The feature will be removed in a subsequent major release.

### Why Care About Deprecations?
- Avoid compilation warnings and possible build failures.
- Benefit from improved functionality, performance, and API clarity.
- Reduce technical debt in your testing suite.

---

## Known Deprecated Features and Alternatives

This section highlights important APIs and usage patterns that have been deprecated, what users should do to prepare, and what alternatives exist.

### Legacy MOCK_METHODn Macros

The older `MOCK_METHODn` macro family has been deprecated in favor of the unified `MOCK_METHOD` macro introduced in 2018. Although `MOCK_METHODn` macros are still supported,
transitioning to the newer syntax is recommended.

#### Why Switch?
The new `MOCK_METHOD` supports:
- Unified syntax for all method signatures.
- Better handling of const, noexcept, and calling conventions.
- Improved compatibility with modern C++ features including move-only argument support.

#### Migration Example:

**Deprecated syntax:**
```cpp
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD1(Bar, int(int));
```

**Recommended syntax:**
```cpp
MOCK_METHOD(bool, Foo, (int));
MOCK_METHOD(int, Bar, (int), (const));
```

#### Tips for Migration:
- Use parentheses around complex return types or arguments to avoid parsing errors.
- Update all mock classes incrementally to reduce disruption.

### Deprecated Flag and Macro Names

Some internal macros and flags have been renamed or replaced, particularly those related to feature toggles and build configuration.

#### What Affected:
- Macros with `_` suffix intended for internal use should not be used in user code.
- Flag references should use `GTEST_FLAG(name)` and `GMOCK_FLAG(name)` instead of internal or legacy variants.

#### Recommended Practice:
- Avoid using internal macros ending with `_`.
- Access flags through the public APIs.

### Old Actions and Matchers Macros

The legacy `ACTION` and `MATCHER` macros still function but lack the type safety and expressiveness of newer polymorphic matchers and actions.

#### Recommended Approach:
- Define custom matchers using `MATCHER` and `MATCHER_P` macros with descriptive strings and explicit `AssertionResult` if needed.
- Use polymorphic matchers to seamlessly support multiple types without explicit templates.

### Synchronization Primitives

GoogleTest's internal threading and synchronization utilities have evolved. Using the internal classes and macros (e.g., `Mutex`, `MutexLock`, `ThreadLocal`) directly outside of GoogleTest is deprecated and unsupported.

#### User Guidance:
- Rely on GoogleTest's thread safety automatically provided in test executions.
- Avoid direct use of internal synchronization macros and classes in your tests.

---

## Deprecation Timelines and Upgrade Path

### Immediate Actions
- Replace all uses of `MOCK_METHODn` with the new `MOCK_METHOD` syntax.
- Avoid direct use of internal macros ending with `_` in your test code.

### Upcoming Removals
- `MOCK_METHODn` macros will be removed in a major future release; plan upgrades accordingly.
- Internal synchronization macros and classes may also be removed; switch to public APIs.

### Keeping Up to Date
- Regularly consult the GoogleTest release notes.
- Use static analyzers or build warnings as early indicators of deprecated usage.
- Monitor compiler warnings about deprecated declarations.

---

## Best Practices to Avoid Deprecation Issues

- Prefer public APIs over internal headers and macros.
- Use the combined `MOCK_METHOD` macro for mock declarations.
- Utilize matchers and actions from `gmock/gmock.h` rather than legacy equivalents.
- Subscribe to the official release channels to be informed about upcoming removals.

---

## Troubleshooting Deprecated Feature Warnings

If you encounter compiler warnings or build messages about deprecated features:

1. Identify the deprecated API from the warning message.
2. Locate all references in your test code or mock classes.
3. Update the usage following the migration recommendations on this page.
4. Rebuild and verify no warnings remain.

---

## Additional Resources

- [GoogleTest Migration Guide for Breaking Changes](./breaking-changes.md)
- [gMock Cookbook: Mocking Best Practices](../gmock_cook_book.md)
- [Assertions Reference](../reference/assertions.md) for current assertion macros
- [Matchers Reference](../reference/matchers.md) for recommended matcher usage
- [GoogleTest Primer](../guides/getting-started/writing-first-test.md) for foundational concepts

---

Maintaining a clean, warning-free, and modern GoogleTest codebase ensures reliability and longevity. Start upgrading deprecated constructs today to safeguard your testing infrastructure from future disruptions.
