---
title: "Upgrade Checklist & Migration Guide"
description: "Stepwise instructions and best practices for upgrading your project to the latest GoogleTest and GoogleMock. Covers backup, dependency verification, code adaptation, and test validation."
---

# Upgrade Checklist & Migration Guide

Upgrading your project to the latest versions of GoogleTest and GoogleMock is essential to leverage new features, improvements, and maintain compatibility with modern C++ standards. This guide provides a structured approach with best practices to help you smoothly transition your tests and mocks, minimize disruptions, and maximize upgrade benefits.

---

## 1. Preparation and Backup

### 1.1. Backup Your Existing Tests

Before beginning the upgrade, create a complete backup of your current test source files, configuration scripts, and build files. This safety net allows you to revert quickly in case of unexpected issues.

### 1.2. Review Existing Dependencies

- Verify which version of GoogleTest and GoogleMock your project currently uses.
- Confirm your toolchain’s compatibility with the minimum C++ standard required by the latest versions (C++17 as of recent releases).
- Check integration points such as build systems (CMake, Bazel) and dependency management.

<Note>
Upgrading to the latest GoogleTest requires a compiler and build environment supporting C++17.
</Note>

---

## 2. Dependency Update

### 2.1. Obtain the Latest Source Code or Libraries

- Download the most recent release from the [official GitHub repository](https://github.com/google/googletest).
- Alternatively, use package managers or your build system’s integration methods to fetch the latest stable version.

### 2.2. Adjust Build System Configurations

- Update references to GoogleTest and GoogleMock libraries or include paths.
- If using CMake, ensure the `find_package(GTest)` command is updated and points to the new installation.
- For Bazel users, update the Bazel WORKSPACE and BUILD files accordingly.

### 2.3. Verify Platform and Compiler Support

The latest GoogleTest versions officially support:
- Linux, Windows, Mac OS
- Compilers compliant with C++17

<Warning>
Older platforms or compilers not supporting C++17 may cause build failures or undefined behavior.
</Warning>

---

## 3. Code Adaptation

### 3.1. Transition from Deprecated APIs

- Replace deprecated macros such as `TEST_CASE` with their recommended replacements (e.g., `TEST_SUITE` or `TEST`).
- Switch from the old `TestCase` terminology to the preferred `TestSuite` API.

### 3.2. Migration of Mock Methods

- Migrate any mock method declarations using legacy `MOCK_METHODn` macros to the unified `MOCK_METHOD` macro.
- Review mock method qualifiers (`const`, `override`, `noexcept`) to ensure correctness.

### 3.3. Update Test Fixture Code

- Confirm that constructors, destructors, and setup/teardown methods (`SetUp()`, `TearDown()`) follow current best practices.
- Fix any misuse of assertions inside constructors or destructors; such assertions should be moved to `SetUp()` or `TearDown()`.

<Tip>
Remember that `ASSERT_*` macros cause early return from the current function. Use `EXPECT_*` when multiple checks should continue after failure.
</Tip>

### 3.4. Ensure Compliance with Naming Conventions

- Avoid underscores in test suite and test names to prevent name mangling and conflicts.
- For parameterized and typed tests, verify that instantiations and names adhere to the updated conventions.

---

## 4. Test Validation

### 4.1. Build and Run Existing Tests

- Perform a clean build using the updated GoogleTest/GoogleMock installation.
- Run your full test suite and observe test outcomes.

### 4.2. Address Failures or Warnings

- Carefully read new error messages or warnings; they may indicate deprecated API usage or missing migration steps.
- Use provided migration warnings in compiler output as guidance.

### 4.3. Leverage New Features Gradually

- Integrate advanced features like typed tests, value-parameterized tests, or custom matchers to improve coverage.
- Adopt modern best practices such as better use of assertions and event listeners.

---

## 5. Best Practices for Upgrades

### 5.1. Use Semantic Versioning Awareness

- Keep track of major, minor, and patch versions to understand the impact of upgrades.
- Major version upgrades might include breaking changes; carefully review release notes.

### 5.2. Stay Informed on API Deprecations

- Refer to the [Deprecation Notices](changelog/migration-guidance/deprecations) to anticipate future removals.

### 5.3. Incorporate Continuous Integration

- Automate test builds and runs with CI pipelines to catch issues early.

### 5.4. Consult Official Documentation and Community Resources

- Leverage the [GoogleTest Primer](docs/primer.md) for foundational concepts.
- Refer to the [Testing Reference](docs/reference/testing.md) and [Mocking Reference](docs/reference/mocking.md) for detailed API guidance.
- Engage with community forums and mailing lists for support.

---

## 6. Troubleshooting Common Issues

### 6.1. Build Failures Related to C++ Version

Ensure your compiler flags enable C++17. For example, add `-std=c++17` or equivalent.

### 6.2. Linker Errors due to Mixing Library Versions

Confirm that your project links against a consistent version of GoogleTest and GoogleMock.

### 6.3. Test Discovery Problems

Check that test suites and test names follow naming conventions. Avoid name collisions caused by underscores.

### 6.4. Assertion or Macro Misuse

Review failed tests for improper use of `ASSERT_*` macros in non-void functions or constructors.

---

## 7. Example Migration Scenario

Suppose your project uses `MOCK_METHOD1` and `TEST_CASE` macros from an older GoogleTest version.

Steps:

1. Replace all `MOCK_METHODn` with `MOCK_METHOD` specifying argument types explicitly.

```cpp
// Old style
MOCK_METHOD1(Foo, void(int x));

// New style
MOCK_METHOD(void, Foo, (int x), (override));
```

2. Replace `TEST_CASE` with `TEST_SUITE` or `TEST` as appropriate.

```cpp
// Old style
TEST_CASE(FooTest, "Does bar") {
  ...
}

// New style
TEST(FooTest, DoesBar) {
  ...
}
```

3. Rebuild and run your tests; fix any arising errors or warnings.

<Tip>
Use the `--gtest_list_tests` flag to verify test discovery before running.
</Tip>

---

## 8. Additional Resources

- [GoogleTest Primer](docs/primer.md)
- [GoogleTest Testing Reference](docs/reference/testing.md)
- [GoogleMock Mocking Reference](docs/reference/mocking.md)
- [GoogleTest Advanced Topics](docs/advanced.md)
- [GoogleTest FAQ](docs/faq.md)
- [Changelog - Breaking Changes and Deprecations](changelog/migration-guidance/breaking-changes.md)
- [Changelog - Deprecation Notices](changelog/migration-guidance/deprecations.md)

Use these resources to deepen your understanding and address advanced upgrade scenarios.

---

When upgrading, always balance adopting new improvements with stability. Continuous testing and validation help ensure your test suite remains reliable and maintainable.



