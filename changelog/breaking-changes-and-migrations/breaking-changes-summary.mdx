---
title: "Breaking Changes Summary"
description: "Outlines changes that may require user action, such as API removals, behavioral changes, or configuration shifts. Each item is presented with clear before-and-after context and actionable recommendations, helping developers plan seamless upgrades."
---

# Breaking Changes Summary

This document outlines all recognized breaking changes in GoogleTest that may require your action. Each change includes explanation of previous and new behavior, potential impacts, and steps to update your code or configuration accordingly. Use this guide to ensure smooth upgrades and maintain compatibility with the latest GoogleTest releases.

---

## 1. Test Suite Fixture Consistency Enforcement

### Change Description
GoogleTest now strictly requires that all tests within the *same test suite* use the exact same test fixture class.

### Previous Behavior
Tests within the same suite could erroneously mix `TEST()` and `TEST_F()` or use different fixture classes with the same suite name without immediate compilation or runtime errors.

### New Behavior
An explicit fatal failure occurs if tests in the same test suite are registered with different fixture classes or a mix of `TEST()` and `TEST_F()`. This is intended to avoid subtle runtime errors and restore test suite consistency.

### Impact on Users
- Tests mixing `TEST()` and `TEST_F()` in the same suite will fail to run.
- Suites reusing the same name but different fixtures across namespaces or translation units become invalid.

### Recommended Action
- Ensure consistent use of fixture classes per test suite.
- Rename test suites that require distinct fixtures.
- Prefer typedefs/`using` aliases to share fixture base class safely.

### Example
```cpp
// Invalid - different fixtures in the same suite
TEST_F(FixtureA, Test1) { ... }
TEST(FixtureA, Test2) { ... }  // Causes failure

// Correct way
class FooTest : public ::testing::Test {};
using FooDeathTest = FooTest;
TEST_F(FooTest, TestNormal) { ... }
TEST_F(FooDeathTest, TestDeath) { ... }
```

---

## 2. Restrictions on Underscores in Test and Suite Names

### Change Description
GoogleTest now more strongly warns and documents restrictions on underscores in test suite and test names.

### Previous Behavior
Underscores at the start or end of test or suite names could lead to undefined or unexpected behavior, including name collisions and compiler errors.

### New Behavior
Users are firmly advised to avoid underscores in the beginning or end of test suite and test names, and generally discouraged from using underscores altogether to avoid ambiguous class-name generation.

### Impact on Users
- Tests with names containing leading or trailing underscores may fail to compile or exhibit duplicate test class issues.
- Names with multiple underscores may cause collisions.

### Recommended Action
- Rename test suites and tests to avoid underscore prefixes or suffixes.
- Avoid underscores altogether for simplicity and forward compatibility.

### Reference
See the detailed reasoning in [GoogleTest FAQ on underscores in test names](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

---

## 3. Flag Parsing and Help Message Behavior

### Change Description
Flag parsing now fully removes recognized GoogleTest flags from `argv` and sets a global help flag if unrecognized flags or `--help` is present.

### Previous Behavior
Some flags were not fully removed from `argv`, and help message printing behavior was inconsistent.

### New Behavior
- Known flags are parsed and removed from command line arguments exclusively before GoogleTest initialization.
- The `--help` flag or unrecognized GoogleTest flags now reliably trigger a help output and cause the test to avoid running.

### Impact on Users
- Custom command line argument parsers may no longer see GoogleTest flags.
- Users must ensure to call `InitGoogleTest` to get correct behavior.

### Recommended Action
- Call `::testing::InitGoogleTest()` as early as possible.
- Avoid conflict with flags starting with `--gtest_`.

---

## 4. More Strict Environment and Test Filtering

### Change Description
GoogleTest now enforces stricter checks on test filtering and environment setups.

### Previous Behavior
- Uninstantiated `TEST_P` and type-parameterized tests would silently skip tests or cause warnings.
- Tests would silently run no tests if filters matched none.

### New Behavior
- If no tests are selected by filters (including due to sharding), the framework can be configured to fail with `--gtest_fail_if_no_test_selected` flag.
- Uninstantiated parameterized tests produce clear errors, unless suppressed.

### Impact on Users
- Missing instantiations of parameterized or typed tests now cause test failures during runs.
- Test runners may fail upon filters matching no tests.

### Recommended Action
- Use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST()` macro for parameterized test suites where omission is intentional.
- Review test filters and sharding environment variables to ensure tests execute as expected.

---

## 5. Death Test Style Configuration

### Change Description
GoogleTest added a configurable death test execution mode, supporting two styles: "fast" and "threadsafe".

### Previous Behavior
Default death tests used a single style optimized for environments without multi-threading issues.

### New Behavior
Users can set `--gtest_death_test_style=threadsafe` to enable a slower but safer test style suitable for multi-threaded programs.

### Impact on Users
- Existing death tests may run differently or slower if the style is changed.
- Recommended for tests running in multi-threaded environments.

### Recommended Action
- Set appropriate death test style flag according to your program's threading model.

```cpp
GTEST_FLAG_SET(death_test_style, "threadsafe");
```

---

## 6. Improved Output Formats and Failures Reporting

### Change Description
Added support for JSON output format alongside traditional XML format.

### Previous Behavior
Only XML output was supported for test results reporting.

### New Behavior
- JSON output format supported via `--gtest_output=json[:path]`
- Failure messages include richer information for better diagnostics.

### Impact on Users
- You can choose JSON format for integration with modern tools.
- XML output behavior remains the same.

### Recommended Action
- Use `--gtest_output=json:path_to_file` if JSON report preferred.

---

## 7. Flag Behavior Changes and Additions

### Notable Flags Added or Changed

| Flag                           | Description & Behavior Changes                               |
|--------------------------------|-------------------------------------------------------------|
| --gtest_fail_fast              | Stops test execution on first failure; previously unreliable |
| --gtest_fail_if_no_test_linked | Fails if no tests linked in executable                      |
| --gtest_fail_if_no_test_selected| Fails if no tests match filters (strict test scaling)       |

---

## 8. ScopedTrace and Assertion Improvements

### Change Description
`SCOPED_TRACE` now propagates multiple trace messages in a nested fashion, making diagnosing failures in called subroutines easier.

### Previous Behavior
Failure messages didnâ€™t include contextual traces for nested calls.

### New Behavior
- Assertions inside subroutines report all active traces, in reverse nesting order.

### Impact on Users
- Easier to identify failure context in complex test code.

### Recommended Action
- Use `SCOPED_TRACE` or `ScopedTrace` in complex or nested test helpers for clearer diagnostics.

---

## 9. Restrictions on Fatal Assertions in Constructors and Destructors

### Change Description
Fatal assertions (`ASSERT_*` and `FAIL()`) are not allowed inside constructors or destructors.

### Previous Behavior
Usage led to confusing compile errors or undefined behavior.

### New Behavior
- GoogleTest enforces this constraint and encourages moving fatal failure checks to `SetUp()`/`TearDown()`.

### Impact on Users
- Fatal assertions in constructors/destructors cause compilation errors.

### Recommended Action
- Move fatal assertions to `SetUp()` and `TearDown()` methods.
- Use `EXPECT_*` for non-fatal checks if necessary in constructors/destructors.

---

## 10. Environment Objects Ownership

### Change Description
GoogleTest always assumes ownership of `Environment` objects registered via `AddGlobalTestEnvironment()`.

### Previous Behavior
Users might have managed environment lifetime manually, causing potential leaks.

### New Behavior
- GoogleTest deletes environment objects automatically after tests run.

### Impact on Users
- Do not delete environment objects manually if passed to GoogleTest.

### Recommended Action
- Register environments only via `AddGlobalTestEnvironment()`.
- Avoid manual deletion to prevent double deletion.

---

## 11. Deprecated Legacy APIs and Naming

### Change Description
GoogleTest phases out legacy test case APIs in favor of standardized test suite APIs.

### Previous Behavior
Legacy `OnTestCaseStart/End` and corresponding APIs remained in use.

### New Behavior
- New APIs named with `TestSuite` are primary; legacy APIs may be removed.

### Impact on Users
- Existing code using legacy APIs should migrate to new `TestSuite` APIs.

### Recommended Action
- Update event listeners and custom test runners to use `OnTestSuite*` callbacks.

---

## References and Further Information

- [Naming Restrictions on Tests and Suites](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Death Tests Guide](../guides/real-world-workflows/death-tests.md)
- [Parameterized Tests Guide](../guides/real-world-workflows/parameterized-tests.md)
- [Event Listener API](../guides/advanced.md#extending-google-test-by-handling-test-events)
- [Flags and Options Documentation](../advanced.md#running-test-programs-advanced-options)

---

For detailed migration instructions, see the [Upgrade & Migration Guides](migration-guides.md).

---

If you encounter issues not resolved by this guide, please refer to the
[Common Errors FAQ](../../faq/troubleshooting-and-optimization/common-errors.md) and
[Where to Get Help](../../faq/community-and-support/where-to-get-help.md).

---

{/* This page is auto-generated; do not edit directly. */}