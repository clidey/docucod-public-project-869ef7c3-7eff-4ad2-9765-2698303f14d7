---
title: "Breaking Changes"
description: "Explicitly highlights all breaking changes introduced across releases, with contextual explanations and details on which workflows or APIs are affected. Ensures users are aware of changes that may disrupt existing integrations."
---

# Breaking Changes

The **Breaking Changes** page is your essential guide to understanding all backward-incompatible modifications introduced across GoogleTest and GoogleMock releases. It clearly identifies which specific workflows, APIs, or behaviors have changed in ways that might disrupt your existing integrations. This focused documentation ensures you can anticipate and adapt your tests effectively, maintaining seamless test execution and integration.

---

## Understanding Breaking Changes

Breaking changes are deliberate modifications to existing functionality that may cause previously working code or tests to fail without adjustments. In the context of GoogleMock and GoogleTest, these changes typically involve:

- Altered behavior of mock strictness modes or wrappers,
- Changes to mock class or method macros,
- Updated flag parsing and default values,
- Modifications to expected mock call behaviors.

This page helps you identify these critical updates with contextual details and practical guidance.

## Recent Breaking Changes Highlights

### Mock Strictness Wrapper Transitions

One notable breaking change involves the default behavior of mock strictness modes:

- Historically, mocks were **naggy** by default — they issued warnings on uninteresting calls.
- The transition moves towards **nice** mocks being the default, which suppress these warnings instead.

This change affects how your tests handle calls to mock methods without explicit `EXPECT_CALL` specifications. If your tests rely on naggy behavior to catch unexpected calls, you will need to adjust by either explicitly using `NaggyMock` or updating your expectations.

### Constructor Inheritance for NiceMock, NaggyMock, and StrictMock

The wrappers `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` inherit constructors from their underlying mock class `T`. While this improves usability, it imposes restrictions:

- These wrappers only apply correctly to methods declared *directly* with `MOCK_METHOD` in class `T`. Methods inherited from base classes might not respect the strictness modifiers.
- Nesting these wrappers (e.g., `NiceMock<StrictMock<T>>`) is explicitly unsupported.

If your previous tests relied on nested mock wrappers or mocked base class methods with strictness modifiers, you'll need to refactor accordingly.

### Flag Parsing and Initialization Changes

Improved flag parsing in GoogleMock initialization affects command-line arguments like `--gmock_verbose=`:

- Flags are parsed and removed from `argv` during `InitGoogleMock()`, which can alter the visible arguments.
- The order in which multiple flags are specified affects default behaviors, such as `default_mock_behavior`.

Tests or environments that manipulate flags manually or depend on the order of flag processing should verify their integration code and adjust as necessary.

## Workflows and APIs Affected

- **Mock Object Creation**: Use of `NiceMock`, `NaggyMock`, `StrictMock` wrappers should be reviewed to align with updated default behaviors and constructor semantics.

- **Expectations on Mock Methods**: Expectations on inherited mock methods may behave differently; consider defining mock methods directly in subclasses.

- **Command-line Initialization**: Systems initializing GoogleMock flags must observe the updated parsing logic to avoid surprises.

- **Verbose Logging and Uninteresting Call Handling**: Users controlling mock verbosity and uninteresting call warnings/error conversion need to verify their logging settings (`--gmock_verbose`) and adapt test expectations where warnings might now be suppressed or promoted to errors.

## Migration and Mitigation Tips

### Transitioning to NiceMock Defaults

If your test relies on naggy behavior (warnings for uninteresting calls), explicitly switch to `NaggyMock`:

```cpp
using ::testing::NaggyMock;
NaggyMock<MyMock> mock;
```

Alternatively, add explicit expectations or set verbose flags to control warnings.

### Refactoring for Constructor Inheritance

For mock classes with complex constructors, ensure that when wrapping with `NiceMock`, `NaggyMock`, or `StrictMock`, you pass the expected constructor parameters. Avoid nested wrappers.

### Reviewing MOХK_METHOD Usage

Verify that all mock methods you expect strictness modifiers on are declared *directly* in the mock class using `MOCK_METHOD`. Move or add declarations if needed.

### Adapting to Flag Handling

When using `InitGoogleMock()`:

- Pass command-line flags meant for GoogleMock explicitly;
- Remove or adjust flags that conflict or no longer behave as expected due to improved parsing.

## Common Pitfalls

- Assuming default mock behavior remains **naggy** may cause tests to miss warnings. Explicit wrappers are necessary when the old behavior is desired.

- Nested usage of `NiceMock` and `StrictMock` wrappers leads to undefined behavior or compilation errors.

- Mock methods declared only in base classes might not respond to strictness wrappers, making uninteresting call handling inconsistent.

- Expectation verification might differ when default actions change or when multiple expectations' order matters due to breaking changes.

## Troubleshooting

If tests unexpectedly fail after upgrading:

- Use the `--gmock_verbose=info` flag to trace mock expectation matching and uninteresting call warnings.

- Confirm that your mock class constructors align with new wrapper inheritance expectations.

- Check for nested wrappers or incompatible mock method declarations inherited across class hierarchies.

- Examine command-line flag usage and initialization procedures.

---

## Summary

The Breaking Changes page explicitly identifies all backward-incompatible modifications introduced across GoogleTest and GoogleMock releases. By outlining the affected workflows—particularly mock strictness wrappers and flag parsing—this documentation equips you to anticipate, detect, and adapt to changes that may disrupt your integration or tests.

For smooth migration:

- Explicitly specify mock strictness wrappers.
- Refactor mock classes to declare mocked methods directly.
- Review and update flag initialization in test setups.

This page complements other documentation covering mocking practices, expectations, and flag usage, ensuring you stay informed and prepared.

---

## Related Documentation

- [Mock Behaviors and Strictness Modes](../api-reference/mocking-matching-actions/mock-behaviors.md) — deeper dive into `NiceMock`, `NaggyMock`, and `StrictMock` usage.

- [Mock Class and Method Macros](../api-reference/mocking-matching-actions/mock-class-macros.md) — details on `MOCK_METHOD` usage relevant for compatibility.

- [Expectations, Calls, and Cardinalities](../api-reference/mocking-matching-actions/expectations-calls.md) — for managing expectations in light of breaking changes.

- [Initialization and Flags](../getting-started/setup-installation/configuration-setup.md) — guidance on initialization and flag configuration.

- [GoogleMock Cookbook](../guides/mocking-techniques/gmock_cook_book.md) — best practices and patterns affected by changes.

---

## Example Scenario: Impact of Strictness Default Change

Suppose you have a test using a default `MockFoo` instance:

```cpp
MockFoo mock;
EXPECT_CALL(mock, DoSomething());
... // test code ...
```

Previously, uninteresting calls to `mock` generated a warning. After the breaking change:

- `MockFoo` behaves as a `NiceMock<MockFoo>` suppressing the warning.
- If you want the old warning behavior, you must change the test to:

```cpp
NaggyMock<MockFoo> mock;
```

Failing to do so means uninteresting calls may silently pass, possibly hiding bugs.

---

This page is your vital reference to stay synchronized with evolving behaviors, ensuring your tests remain accurate, maintainable, and effective as GoogleTest and GoogleMock develop.
