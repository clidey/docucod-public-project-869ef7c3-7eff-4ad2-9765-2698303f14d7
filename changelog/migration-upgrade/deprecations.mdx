---
title: "Deprecations & Sunset Notices"
description: "Documents features and APIs that are deprecated in each release, with planned removal timelines and recommended alternatives. Helps users proactively refactor test code before removals."
---

# Deprecations & Sunset Notices

This page documents all features, APIs, and behaviors that have been deprecated in each GoogleTest and GoogleMock release. It includes planned removal timelines and recommended alternatives, helping users proactively identify parts of their tests that need refactoring to maintain compatibility with future versions.

---

## Understanding Deprecation and Sunset Notices

Deprecation signals that a feature or API is no longer recommended for use and may be removed in a future release. GoogleTest and GoogleMock use deprecation notices to communicate upcoming removals well in advance, giving you ample time to migrate your test code.

Sunset notices indicate the planned timeline for removal, allowing you to plan your upgrades and refactoring accordingly.

This page is your authoritative source to track these changes and ensure your tests remain up to date and maintain stability.

## Why Pay Attention to Deprecations?

- **Future-proof your tests:** Avoid build breaks and runtime errors caused by removed or disabled features.
- **Leverage improved APIs:** Transition to newer, better-supported features that provide enhanced capabilities and maintainability.
- **Maintain clean and maintainable test code:** Remove reliance on obsolete patterns that complicate test understanding and evolution.

## How to Use This Page

- **Review release-specific deprecations:** Check deprecations linked with each release to identify features you currently use.
- **Identify removal deadlines:** Each deprecated item includes an indicated version or timeframe for removal.
- **Explore recommended alternatives:** Wherever possible, alternatives or migration suggestions are provided.
- **Plan refactoring:** Organize your test code updates based on sunset timelines to ensure smooth transitions.

---

## Overview of Notable Deprecations and Migration Paths

### 1. Mock Method Macros

Since the 2018 unified update, the legacy `MOCK_METHODn` macros are deprecated in favor of the newer `MOCK_METHOD` macro for defining mock methods.

#### Migration

```cpp
// Old style (deprecated)
MOCK_METHOD1(Foo, bool(int));

// New style (preferred)
MOCK_METHOD(bool, Foo, (int));
```

Using the new `MOCK_METHOD` macro simplifies mock definitions, supports move-only argument types, and ensures better compiler diagnostics.

[See the Mocking Reference](docs/reference/mocking.md#MOCK_METHOD) for details.

---

### 2. Uninteresting Call Warnings

By default, gMock issues warnings for uninteresting calls (mock method calls without expectations).

#### Alternatives

- Use `NiceMock` to suppress these warnings when calls are irrelevant to the test:

```cpp
NiceMock<MockFoo> mock_foo;
```

- Use `StrictMock` to treat uninteresting calls as errors for stricter test contracts:

```cpp
StrictMock<MockFoo> mock_foo;
```

Refer to [Nice, Strict, and Naggy Mocks](api-reference/mocking-apis/nice-strict-mocks.md) for guidance.

---

### 3. Testing Private and Protected Members

Directly testing private or protected class members is discouraged and may be deprecated in favor of better design involving interfaces and internal namespaces.

#### Recommended Migration Path

- Move private implementation details to `internal` namespaces and headers (e.g. `foo-internal.h`), which tests can include but client code cannot.
- Use `FRIEND_TEST()` macros in classes to specifically grant access to test cases.

---

### 4. Support for Move-Only Types in Mock Methods

Previous versions required workarounds to mock methods with move-only argument or return types. Native support is now provided in the unified `MOCK_METHOD` macro.

#### Legacy Workaround (Deprecated)

```cpp
class MockBuzzer : public Buzzer {
 public:
  MOCK_METHOD(bool, DoShareBuzz, (Buzz* buzz, Time timestamp));
  bool ShareBuzz(std::unique_ptr<Buzz> buzz, Time timestamp) override {
    return DoShareBuzz(buzz.get(), timestamp);
  }
};
```

Users should migrate to the new style which supports move-only types directly.

---

### 5. Flag Macros and Abseil Integration

GoogleMock and GoogleTest support flag macros for command-line options. The older manual flag declaration macros may be deprecated in favor of Abseil flag usage where supported.

```cpp
#if defined(GTEST_HAS_ABSL)
#define GMOCK_DEPRECATE_AND_INLINE() ABSL_DEPRECATE_AND_INLINE()
// Use ABSL_FLAG and ABSL_DECLARE_FLAG macros
#else
#define GMOCK_DEPRECATE_AND_INLINE()
// Legacy no-op
#endif
```

Consult the porting headers for recent best practices.

---

## Practical Migration Tips

- Refactor `MOCK_METHODn` usage to `MOCK_METHOD` to gain better template support and cleaner syntax.
- Review all warnings about uninteresting mock calls and explicitly use `NiceMock` or update expectations accordingly.
- Avoid reliance on deprecated private member testing techniques; restructure code for testability.
- For mock methods with move-only parameters or results, adopt the new `MOCK_METHOD` syntax.
- Transition flag macros to use Abseil's flag APIs when the build system supports it.

---

## Troubleshooting Common Deprecation Issues

- **Missing MOCK_METHOD macro usage?** Legacy macros may not be supported and could fail compilation; switch to new macro.
- **Unexpected uninteresting call warnings?** Confirm if you are intentionally allowing such calls; if so, wrap mocks in `NiceMock`.
- **Linker errors on default return values?** Ensure you're not using deprecated default value mechanisms incompatible with recent releases.

---

## Upcoming Removals and Timelines

GoogleTest and GoogleMock provide advance notice of removals, typically deprecating features for multiple releases before removing.

Please monitor the release notes and migration guides for your version. Staying current avoids last-minute breakages.

---

## Additional Resources

- [Mocking Reference](docs/reference/mocking.md): Complete details on mock method usage.
- [Mocking Cookbook](docs/gmock_cook_book.md): Practical recipes for mocking patterns and migration.
- [Nice, Strict, and Naggy Mocks](api-reference/mocking-apis/nice-strict-mocks.md): Guidance on mock strictness.
- [Specifying Expectations and Actions](guides/mocking-and-behavior-verification/specifying-expectations-and-actions.mdx): Deep dive on expectations.
- [GoogleTest FAQ](docs/faq.md): Answers to common issues during upgrades.

---

## Getting Help and Reporting Issues

If you encounter deprecation-related challenges, consult the community forums and issue trackers.

Report bugs or request help using the official [GoogleTest GitHub repository](https://github.com/google/googletest).

---

## Summary

Being attentive to deprecations and sunset notices ensures your tests are robust, maintainable, and future-compatible. Use this page as your ongoing reference point for deprecations in GoogleTest and GoogleMock releases.

---

*This documentation is maintained alongside the GoogleTest project and is updated with each release to reflect latest deprecations and migration guidance.*
