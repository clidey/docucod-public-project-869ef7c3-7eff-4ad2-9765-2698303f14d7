---
title: "Breaking Changes & Deprecations"
description: "A regularly updated list of changes that may require user action, such as removed APIs, altered behaviors, and deprecated features. Each entry includes migration recommendations and relevant rationale."
---

# Breaking Changes & Deprecations

This page provides a regularly updated list of significant changes, deprecated features, and removed APIs in GoogleTest that may impact your existing tests or integration workflows. Each entry highlights what has changed, explains the rationale behind it, and offers practical migration advice to smooth your upgrade experience.

---

## 1. Removed Support for C++ Standards Below C++17

GoogleTest now requires a C++17-capable compiler and environment. Attempts to build with earlier standards will fail.

- **What Changed?**
  - Support for compilers that do not fully support C++17 has been dropped.
  - This ensures using modern language features and improves library maintainability.

- **Impact on Users**
  - You must ensure your project is configured to compile with C++17 or higher.

- **Migration Steps**
  1. Set your compiler flags or build system configuration (`CMAKE_CXX_STANDARD` or equivalent) to 17 or above.
  2. Verify that your compiler toolchain supports C++17.

- **Reference:** See the [System Requirements](getting-started/prerequisites-installation/system-requirements) page for detailed platform and compiler support.


## 2. Assertions That Generate Fatal Failures Only Allowed in `void`-Returning Functions

GoogleTest restricts the use of fatal assertions (`ASSERT_*()`, `FAIL()`) such that they can only be used in functions whose return type is `void`.

- **Why?**
  - GoogleTest does not use exceptions internally; fatal assertions abort the current function early. Using them in non-`void` functions causes compilation errors.

- **What This Means for Your Tests?**
  - You cannot place fatal assertions in constructors or destructors, or any function that returns a value.

- **Migration Recommendations**
  1. Replace fatal assertions in non-void functions with non-fatal assertions (`EXPECT_*()`), or refactor your code to use `void` functions if fatal assertions are necessary.
  2. For constructors/destructors, move fatal checks into `SetUp()` or `TearDown()` methods.

- **Further Details:** See the section [Assertion Placement](docs/advanced.md#assertion-placement).


## 3. Enforced Naming Restrictions on Test Suites and Test Names Regarding Underscores

GoogleTest reserves the underscore (`_`) character for internal macro expansion and recommends avoiding underscores in test suite or test names.

- **Problem:**
  - Underscores can cause naming collisions or invalid generated class names, which might result in compiler errors or undefined behavior.

- **Guidelines:**
  - Avoid underscores at the start, end, or repeated consecutively in the names.
  - Prefer using alphanumeric characters only.

- **Migration Advice:**
  1. Rename any test suites or test cases to remove underscores.
  2. This is important both for compatibility and to prevent confusing test failures.

- **Read More:** See [Why should test suite names and test names not contain underscore?](docs/faq.md#Why should test suite names and test names not contain underscore)


## 4. Mandatory Uniform Fixture Class per Test Suite

GoogleTest requires that all tests within the same test suite use the **same fixture class**.

- **What Happens if Violated?**
  - Runtime errors are reported indicating conflicting fixtures within one test suite.

- **Common Causes:**
  - Defining tests in different namespaces or translation units with the same test suite name but different fixture classes.
  - Mixing `TEST` and `TEST_F` macros in the same suite.

- **How to Fix:**
  1. Ensure all tests under a suite share the exact same fixture class definition.
  2. Use distinct test suite names if fixtures differ.
  3. Avoid mixing `TEST` and `TEST_F` in the same test suite.

- **More Info:** See the FAQ section titled [Is it OK if I have two separate `TEST(Foo, Bar)` test methods defined in different namespaces?](docs/faq.md)


## 5. Isolation of Death Tests into Separate Test Suites Named `*DeathTest`

To ensure proper ordering and avoid interference, GoogleTest strongly recommends placing death tests in test suites suffixed with `DeathTest`.

- **Reason:**
  - Death tests fork subprocesses and have special execution semantics, which require separation from normal tests.

- **How to Use:**

```cpp
class FooTest : public ::testing::Test { ... };

using FooDeathTest = FooTest;

TEST_F(FooTest, RegularTest) { ... }
TEST_F(FooDeathTest, SomeDeathTest) { EXPECT_DEATH(...); }
```

- **Note:** This approach prevents interleaving normal and death tests that can cause flaky results.

- **Reference:** See [Death Tests and Threads](docs/advanced.md#death-tests-and-threads).


## 6. Deprecation of `EXPECT_NE(NULL, ptr)` and `ASSERT_NE(NULL, ptr)` Support

While `EXPECT_EQ(NULL, ptr)` is supported, the negated equality with `NULL` is not. Instead, users should use `nullptr` or the matcher framework.

- **Why?**
  - Supporting `NULL` in both `EXPECT_EQ` and `EXPECT_NE` increases template complexity without enough benefit.

- **Recommended Migration:**
  - Use `nullptr` over raw `NULL`.
  - Use `EXPECT_TRUE(ptr != nullptr)` or `EXPECT_THAT(ptr, Ne(nullptr))` instead.

- **See also:** [Why does GoogleTest support EXPECT_EQ(NULL, ptr) but not EXPECT_NE(NULL, ptr)?](docs/faq.md)


## 7. Removal of GTest's Simple Regex in Favor of RE2 or POSIX Regex

GoogleTest dropped the custom simple regex engine and now requires either RE2 (with Abseil) or POSIX regular expressions for pattern matching in death tests and matcher usages.

- **Impact:**
  - Regex match patterns may need adjustment to comply with POSIX or RE2 syntax standards.

- **Migration:**
  1. Verify all regex used in death tests adhere to POSIX or RE2 syntax.
  2. Avoid unsupported constructs in Windows simple regex (like union, grouping, brackets).

- **Details:** See [Regular Expression Syntax](docs/advanced.md#regular-expression-syntax).


## 8. Restrictions on Assertions Within Constructors and Destructors

- **Fatal assertions** (`ASSERT_*()` and `FAIL()`) cannot be used inside constructors or destructors.

- **Workarounds:**
  - Use `SetUp()` and `TearDown()` instead.
  - If a check is mandatory during construction, consider calling `abort()` explicitly.

- **Rationale:**
  - Fatal assertions abort the current function, but constructors and destructors cannot handle early returns safely.

- **Reference:** See [Assertion Placement](docs/advanced.md#assertion-placement).


## 9. JSON Test Report Format is Subject to Change

GoogleTest provides a JSON test report format as an alternative to XML. However, the exact JSON schema is still considered evolving.

- **Note:** Do not rely on the JSON format structure as stable for automated parsers.

- **Recommendation:**
  - Validate your JSON parsing logic against the latest GoogleTest release.
  - Prefer the XML report format for CI integrations requiring stable schema.

- **More Info:** See [Generating a JSON Report](docs/advanced.md#generating-a-json-report).


## 10. Renamed Macros to Avoid Naming Conflicts

GoogleTest offers an option to prefix certain macros with `GTEST_` to avoid clashing with other libraries.

- **How to Enable:**
  - Define `-DGTEST_DONT_DEFINE_TEST=1` to rename `TEST` macro to `GTEST_TEST`.
  - Similarly applies to other common assertion macros.

- **Reason:**
  - Macro collisions are common in large projects; renaming macros prevents name conflicts.

- **Migration:**
  1. For codebases experiencing collisions, switch to the prefixed version.
  2. Adjust your test code accordingly.

- **Details:** See [Generic Build Instructions - Avoiding Macro Name Clashes](googletest/README.md).

---

## Troubleshooting & Common Pitfalls

- **Mixing TEST and TEST_F in one suite:** Causes runtime errors; ensure consistent use per suite.
- **Failure to instantiate parameterized tests:** Without `INSTANTIATE_TEST_SUITE_P`, test suites with parameterized tests fail.
- **Use of fatal assertions in constructors:** Leads to confusing compilation errors; migrate to `SetUp()`.
- **Death tests failing or hanging:** Avoid threads running outside death tests; consider using `threadsafe` death test style.

---

## Useful Migration Tips

- Run your test suite after upgrading and enable verbose logging to discover deprecated or changed behaviors.
- Review your use of all assertion macros to comply with expected usage.
- Adjust test names to comply with naming rules.
- Separate death tests into dedicated suites.
- Review your regex patterns used in tests, update to POSIX/RE2 syntax.

---

## Additional Resources

- [Migration & Upgrade Guide](changelog/migration-upgrade/upgrade-instructions)
- [Assertions Reference](api-reference/core-testing-api/assertions)
- [Death Tests Guide](guides/core-workflows/death-tests)
- [Test Macros and Fixtures](api-reference/core-testing-api/test-macros-and-fixtures)
- [Parameterized and Typed Tests](api-reference/core-testing-api/parameterized-and-typed-tests)
- [FAQ: Installation and Setup Issues](faq/getting-started-faq/installation-issues)
- [FAQ: Troubleshooting First Failing Tests](faq/getting-started-faq/first-test-failures)

---

## Contact & Contribution

For further assistance, inquiries, or to contribute fixes related to breaking changes or migration guidance, refer to the project's [CONTRIBUTING.md](https://github.com/google/googletest/blob/main/CONTRIBUTING.md) and issue tracker on GitHub.

---