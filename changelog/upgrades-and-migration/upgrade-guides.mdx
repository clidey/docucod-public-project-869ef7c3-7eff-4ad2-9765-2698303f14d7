---
title: "Upgrade Guides"
description: "Step-by-step instructions for upgrading from previous GoogleTest versions, addressing platform requirements, configuration updates, and migration best practices. Reduce friction and downtime during upgrades."
---

# Upgrade Guides

Upgrade Guides provide clear, step-by-step instructions to help users migrate from earlier versions of GoogleTest to newer releases. This focuses explicitly on changes affecting users during the upgrade process, including platform requirements, configuration updates, and best practices to ensure a smooth transition with minimal friction and downtime.

---

## 1. Verify Platform and Compiler Requirements

### Minimum C++ Standard

- Starting from GoogleTest release 1.17.0, your environment must support **at least C++17**. Older standards like C++11 or C++14 are no longer supported.
- Ensure your compiler and build toolchain are updated accordingly.

### Supported Platforms

Refer to the [Supported Platforms](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md) matrix to confirm your operating system and compiler version meet the supported baseline requirements.

<Tip>
Attempting to build GoogleTest on unsupported platforms or with earlier C++ standards will likely cause build failures. Updating your toolchain before upgrading GoogleTest prevents wasted effort.
</Tip>

## 2. Update Build Configuration

### Using CMake

- When upgrading to version 1.17 or later, add the C++17 standard specification explicitly in your CMake configuration:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- For users incorporating GoogleTest as a subdirectory or via FetchContent, verify your main project honors or configures C++17 accordingly.

- To build only GoogleTest without GoogleMock, use:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### Other Build Systems

- Adjust compiler flags to enable C++17 features, e.g. `-std=c++17` for GCC/Clang, or `/std:c++17` for MSVC.

- Verify linking and include paths still correctly reference the upgraded source and headers.

<Check>
If there are custom macro definitions or compiler flags that override standard features, review them to avoid conflicts with new requirements.
</Check>

## 3. Adjust for Changes in GoogleMock and Mocking APIs

If you are using GoogleMock, note that important breaking changes may have occurred in recent releases.

- Consolidation of all mocking macros into the single `MOCK_METHOD` macro requires updating mock declarations.

- Qualifier usage such as `const` and `override` in `MOCK_METHOD` declarations is now strictly enforced.

- The order of actions specified in expectations (`ON_CALL` and `EXPECT_CALL`) now follows a well-defined precedence that may differ from prior versions.

- To ease migration, refer to the [Breaking Changes & Migration Notes](https://google.github.io/googletest/changelog/upgrades-and-migration/breaking-changes.html) documenting mock API changes in detail.

<Tip>
Starting migration with a small subset of mocks and building up incrementally helps catch issues early and reduces frustration.
</Tip>

## 4. Review Deprecated Features

- Review the list of deprecated features slated for removal in future releases.
- Avoid using deprecated APIs and follow alternative approaches as described.
- See the [Deprecation Notices](https://google.github.io/googletest/changelog/upgrades-and-migration/deprecations.html) page for full details and migration recommendations.

## 5. Follow Best Practices for Migration

### Step-by-Step Migration Flow:

1. **Backup your project and tests**.
2. **Update your toolchain to support C++17.**
3. **Upgrade your GoogleTest source code via your package manager or repository.**
4. **Update your build files to specify C++17 and reflect any GoogleMock macro changes.**
5. **Rebuild your tests and fix compilation errors related to API updates.**
6. **Run your full test suite and verify all tests pass.**
7. **Address any warnings or deprecations flagged during compilation or test run.**

<Tip>
Automate steps 5 and 6 with continuous integration to quickly spot broken tests or issues caused by the upgrade.
</Tip>

## 6. Troubleshooting Common Issues

### Compilation Errors Related to MOCK_METHOD

- Make sure all mock methods use the new `MOCK_METHOD` macro.

- Specify all required qualifiers explicitly, e.g., `(const, override)`.

- Watch for mismatch in method signatures caused by incorrect parameter types or qualifiers.

### Linking Problems

- Confirm that the updated GoogleTest libraries are correctly linked.

- On Windows with Visual Studio, ensure `gtest_force_shared_crt` CMake option is set appropriately to match your project’s runtime linkage.

### Test Failures After Upgrade

- Some failure messages may become more verbose or detailed due to improved diagnostics.

- If new warnings appear about uninteresting mock calls, consider adjusting your mocks to `NiceMock` or explicitly specify `EXPECT_CALL` with `Times(AnyNumber())`.

- Use `--gmock_verbose=info` for enhanced test invocation tracing when debugging failures.

## 7. Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — for writing and understanding tests
- [Breaking Changes & Migration Notes](https://google.github.io/googletest/changelog/upgrades-and-migration/breaking-changes.html) — mock API changes
- [Deprecation Notices](https://google.github.io/googletest/changelog/upgrades-and-migration/deprecations.html) — deprecated APIs
- [Integration and Ecosystem](https://google.github.io/googletest/overview/integration-and-ecosystem/platform-support.html) — platform and build system support
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — detailed mocking patterns

---

### Summary

Upgrading GoogleTest requires careful verification of your platform and compiler prerequisites, particularly the mandatory C++17 standard from release 1.17.0 onward. Build system configurations, especially CMake files and compiler flags, need updates to reflect these requirements and any changes in GoogleMock’s mocking macros and behaviors. This guide steers users through a systematic migration path, highlights common pitfalls, and points to relevant changelogs, deprecation notices, and best practice documents to reduce friction and downtime. For detailed API changes, mock usage refinements, and build integration nuances, users should consult the dedicated migration notes and related GoogleTest documentation.