---
title: "Bug Fixes & Patches"
description: "Documents resolved defects, behavioral corrections, and reliability improvements. Helps users identify whether existing pain points or issues have been addressed in recent versions."
---

# Bug Fixes & Patches

This page documents resolved defects, behavioral corrections, and reliability improvements in GoogleTest and GoogleMock. It enables users to identify whether previously reported issues, pain points, or unexpected behaviors have been addressed in recent versions, helping them maintain confidence in their test suites and upgrade schedules.

---

## Understanding Bug Fixes & Reliability Improvements

Bug fixes and patches reflect the commitment of the GoogleTest team to delivering a robust and stable testing framework. This section helps you track resolved problems, subtle behavioral changes, and enhanced reliability features that improve your testing experience.

### Why This Matters to You

Imagine running a comprehensive test suite only to have flaky or misleading failures caused by edge cases in the framework itself. The Bug Fixes & Patches documentation helps you:

- Identify if a particular problem you've encountered has an official fix.
- Understand behavioral changes that may affect test outcomes.
- Learn about reliability enhancements that improve mock stability and test correctness.


## Recent Fixes and Corrections Summary

Detailed release notes include:

- Corrections to mock method handling that prevent unintentional false positives or negatives.
- Fixes that resolve issues with expectation ordering and invocation count verification.
- Patches improving support across diverse platforms and compiler environments.
- Updates enhancing error messages to provide clearer diagnostics.

For instance, fixes around `EXPECT_CALL` and `ON_CALL` behaviors enhance the reliability of mock call expectations, avoiding pitfalls where calls could be misinterpreted or ignored unexpectedly.


## How to Verify Your Tests Post-Fix

When upgrading to a version that contains these fixes, consider the following steps:

1. **Audit Your Mock Definitions and Expectations**: Ensure your mocks correctly declare methods and set expectations to match the new behaviors.
2. **Run Comprehensive Test Suites**: Pay special attention to tests involving complex sequences of mock calls or those that previously suffered from warnings about uninteresting calls.
3. **Leverage Verbose Mode for Debugging**: Use the `--gmock_verbose=info` flag to get detailed logs of mock interactions when diagnosing differences after upgrades.

<Tip>
Keeping your mocking code clean and explicit—for example, by using `NiceMock`, `NaggyMock`, or `StrictMock` wrappers appropriately—helps you avoid subtle surprises from fixed behaviors.
</Tip>

## Common Pitfalls Addressed

Several user pain points have been resolved, ensuring smoother mock management:

- **Mock Method Declaration Issues**: Problems with parsing complex argument types involving commas have been addressed by encouraging users to wrap those in parentheses or use `using` for type aliases.
- **Uninteresting Call Warnings**: Users can now better control mock strictness to avoid unexpected warnings.
- **Expectation Order Enforcement**: Improvements clarifying partial and strict order expectation handling reduce test flakiness.


## Best Practices Arising from Bug Fixes

With these fixes applied, we recommend:

- Always declaring mock methods in the `public` section, even if the base method is protected or private.
- Specifying expectation order explicitly using `InSequence` or `After` clauses to avoid ambiguity.
- Prefer using `ON_CALL` to define default behaviors separately from `EXPECT_CALL` which sets expectations.
- Using `RetiresOnSaturation()` to manage expectations that should be retired after usage, preventing sticky mismatches.


## Troubleshooting

If you encounter leftover issues or unexpected behavior after upgrading:

- Double-check that your mock classes use proper `MOCK_METHOD` declarations with appropriate qualifiers.
- Review your `EXPECT_CALL` and `ON_CALL` usage to ensure expectations align with new internal matching logic.
- Consider running tests with `--gmock_verbose=info` to get call traces and diagnose which expectation matched (or did not match) mock calls.


## Additional Resources

- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Comprehensive guide to mocks, including macros like `EXPECT_CALL` and `ON_CALL`.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Step-by-step recipes for common mocking patterns, including fixes and workarounds.
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly tutorial emphasizing best practices.


---

*To explore the full details of specific bug fixes, related release notes and version histories are located in the [Recent Releases & Highlights](../version-history/recent-releases.md) and [Full Changelog](../version-history/full-changelog.md) pages.*

<Check>
Ensure you have verified mock strictness settings and expectation declarations after applying patches.
</Check>

<Note>
If you rely on advanced mocking features like sequencing or move-only type support, reviewing the latest gMock Cookbook section on [Mocking Side Effects and Actions](../advanced-usage-patterns/mocking-actions-and-matchers.md) will solidify your understanding of recent reliability improvements.
</Note>

---

### Example Change Impact

Suppose you faced intermittent failures where expectations were violated due to unexpected extra calls. Recent corrections have improved how `EXPECT_CALL` handles upper-bound violations and retirement of expectations.

By adding `.RetiresOnSaturation()`, you signal that once an expectation is met, it should no longer match subsequent calls, reducing confusion:

```cpp
EXPECT_CALL(my_mock, Foo(7))
    .Times(2)
    .RetiresOnSaturation();
```

This prevents the problem where call #3 unexpectedly matches the same expectation.


---

## Summary

Bug Fixes & Patches in GoogleTest focus on resolving subtle issues in mock method declarations, call expectations, and framework reliability. This documentation ensures test authors can adapt their code with confidence, maintain robust test behaviors, and leverage the latest fixes for a smoother testing experience.

---

<AccordionGroup title="Additional Information and Related Topics">
<Accordion title="Understanding EXPECT_CALL and ON_CALL">
Explore the distinctions and best practices of setting behaviors (`ON_CALL`) versus expectations (`EXPECT_CALL`).
</Accordion>
<Accordion title="Managing Mock Strictness Levels">
Learn about `NiceMock`, `NaggyMock` (default), and `StrictMock` wrappers to control warning and failure behaviors upon uninteresting calls.
</Accordion>
<Accordion title="Best Practices for Mock Method Declarations">
Details on correct usage of the `MOCK_METHOD` macro, handling argument commas, and method qualifiers.
</Accordion>
<Accordion title="Controlling Expectation Order and Retirement">
Deep dive into clauses like `InSequence`, `After`, and `RetiresOnSaturation` to precisely express call ordering and expectation lifespan.
</Accordion>
</AccordionGroup>

---

[Back to Full Changelog](../version-history/full-changelog.md)  |  [Recent Release Highlights](../version-history/recent-releases.md)