---
title: "New Features"
description: "Highlights major additions such as new matchers, actions, or framework options. Empowers users to take advantage of recent advances in the framework’s capabilities."
---

# New Features in GoogleTest

This document highlights the major new features recently added to the GoogleTest framework, empowering you to leverage the latest capabilities for writing expressive, maintainable, and powerful C++ tests. Whether you are looking to extend your assertion toolkit, improve test parameterization, or tap into advanced testing options, this guide presents the key additions and how they impact your testing workflows.

---

## 1. Enhanced Assertion Macros and Matchers

GoogleTest continues to extend its rich set of assertion macros and matchers, providing users with more options to express test conditions clearly and succinctly.

- **Full Suite of Predicate Assertion Macros**: Now includes `EXPECT_PRED*` and `ASSERT_PRED*` macros with support for up to five arguments, enabling detailed predicate checks with informative failure messages.

- **Predicate-Formatter Assertions**: Predicate-format macros (e.g., `EXPECT_PRED_FORMAT*`) allow complete control over assertion failure formatting for complex validation scenarios.

- **New Matcher Support**: Integration with GoogleMock matchers extends assertive power, letting you write expressive assertions such as `EXPECT_THAT(value, MatchesRegex("pattern"))` and more.

- **Exception Assertions**: Facilitates verification of exception throwing and absence via `EXPECT_THROW()`, `EXPECT_ANY_THROW()`, and `EXPECT_NO_THROW()`, improving test coverage for exception-safe code.

- **Windows HRESULT Assertions**: Adds specific macros like `EXPECT_HRESULT_SUCCEEDED()` and `EXPECT_HRESULT_FAILED()` to verify Windows COM HRESULT results concisely.

### Example
```cpp
EXPECT_PRED2(MutuallyPrime, a, b);
ASSERT_PRED_FORMAT2(AssertMutuallyPrime, x, y);
EXPECT_THROW(CallFunction(), std::runtime_error);
EXPECT_THAT(response, MatchesRegex("OK.*"));
```

These enhancements allow you to write more readable tests with precise failure diagnostics, making debugging faster and test intent clearer.

## 2. Value-Parameterized Tests Improvements

To increase test coverage and reduce code duplication, GoogleTest has introduced advancements in value-parameterized testing support:

- **Comprehensive Parameter Generators**: Functions such as `Range()`, `Values()`, `ValuesIn()`, and `Bool()` generate sequences from ranges, explicit values, containers, and boolean combinations.

- **Cartesian Product Combinations**: `Combine()` facilitates exhaustive testing across multiple parameters by creating the Cartesian product of parameter sequences.

- **Custom Parameter Name Generators**: You can specify custom lambdas or functors to generate meaningful test names for each parameter combination.

- **`ConvertGenerator` Support**: Enables conversion of parameter values into desired types, supporting cases where implicit conversions are insufficient.

### Sample Usage
```cpp
class MyParamTest : public ::testing::TestWithParam<std::tuple<int, bool>> {};
TEST_P(MyParamTest, HandlesCombination) {
  auto [num, flag] = GetParam();
  EXPECT_TRUE(MyFunction(num, flag));
}

INSTANTIATE_TEST_SUITE_P(Combinations, MyParamTest,
                         Combine(Range(1, 4), Bool()));
```

This framework expansion empowers you to easily test across multiple parameter dimensions, ensuring comprehensive validation.

## 3. Typed and Type-Parameterized Tests Enhancements

Writing tests over a cohort of types becomes cleaner and more maintainable with:

- **Typed Tests (`TYPED_TEST_SUITE`) Support**: Instantly repeat tests over a fixed type list.

- **Type-Parameterized Tests (`TYPED_TEST_SUITE_P`)**: Build reusable abstract test patterns instantiated with different type sets later.

- **Custom Type Name Generators**: Define classes providing explicative names for your types to improve test reporting clarity.

### Illustrative Example
```cpp
template <typename T> class BufferTest : public ::testing::Test {
 public:
   // fixture code ...
};
using BufferTestTypes = ::testing::Types<uint8_t, uint16_t>;
TYPED_TEST_SUITE(BufferTest, BufferTestTypes);

TYPED_TEST(BufferTest, InitializesCorrectly) {
  TypeParam value = 0;
  EXPECT_EQ(SomeFunction(value), expected);
}
```

With these features, your tests become more scalable as you add new data types without rewriting test logic.

## 4. Death Test Styles and Support

GoogleTest augments death test reliability and flexibility by exposing two styles of death tests:

- **Fast Style**: Executes death test logic immediately after forking.

- **Threadsafe Style**: Re-executes the test binary in a subprocess, important for multi-threaded environments.

Users can select styles via the `--gtest_death_test_style` flag or programmatically, ensuring better compatibility with thread-heavy applications.

Example to set style programmatically:
```cpp
GTEST_FLAG_SET(death_test_style, "threadsafe");
```

## 5. Convenient Test Skipping Support

The framework now supports runtime test skipping using `GTEST_SKIP()`:

- Can be invoked in tests or setup methods to skip tests based on conditions (e.g., missing prerequisites).

- Supports streaming of custom skip messages.

Example:
```cpp
TEST(MyTestSuite, SometimesSkips) {
  if (!IsEnvironmentReady()) {
    GTEST_SKIP() << "Required environment is not ready.";
  }
  // Rest of test ...
}
```

This enables more flexible testing workflows adaptable to dynamic test conditions.

## 6. Custom Value Printing Extensions

GoogleTest provides mechanisms to customize how your types appear in test output:

- Define `AbslStringify()` for rich string formatting leveraging Abseil's formatting facilities.

- Alternatively, define `PrintTo()` functions for simple, test-specific printing needs.

- Use `testing::PrintToString()` internally to obtain string representations.

Example `PrintTo()`:
```cpp
namespace my {
class Point { /*...*/ };
void PrintTo(const Point& p, std::ostream* os) {
  *os << "(" << p.x << ", " << p.y << ")";
}
}
```

This extensibility improves the clarity of failure messages involving user-defined types.

## 7. Event Listener APIs for Extended Reporting

GoogleTest includes an event listener mechanism allowing advanced users to:

- Subscribe to comprehensive test lifecycle events (start/end of tests, test parts, suites, etc).

- Customize test output formats.

- Generate reports beyond default text or XML outputs.

Example minimal listener:
```cpp
class SimpleListener : public ::testing::EmptyTestEventListener {
  void OnTestStart(const ::testing::TestInfo& info) override {
    std::cout << "Starting: " << info.test_suite_name() << "." << info.name() << std::endl;
  }
  void OnTestEnd(const ::testing::TestInfo& info) override {
    std::cout << "Finished: " << info.test_suite_name() << "." << info.name() << std::endl;
  }
};

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  auto& listeners = ::testing::UnitTest::GetInstance()->listeners();
  delete listeners.Release(listeners.default_result_printer());
  listeners.Append(new SimpleListener);
  return RUN_ALL_TESTS();
}
```

Use this to tailor test reporting to your project's needs.

---

## Best Practices to Leverage These Features

- Use the new assertion macros and matchers to make your tests expressive and failure messages insightful.

- Adopt value-parameterized tests to cover multiple input combinations without duplicating test code.

- When testing template classes or functions, utilize typed tests to automatically validate all required types.

- Select death test styles compatible with your concurrency model for reliable termination tests.

- Use `GTEST_SKIP()` to manage conditional test execution cleanly.

- Implement custom printing for your complex types to enhance readability of test output.

- Consider creating custom event listeners to integrate GoogleTest with your IDE or CI reporting.

---

## Troubleshooting and Common Pitfalls

- **Parameter Generators Evaluation**: Parameter sequences are evaluated at GoogleTest initialization (`InitGoogleTest()`), ensure any parameter values you generate are valid at that time.

- **Test Naming Restrictions**: Test suite and test names must be valid C++ identifiers and generally avoid underscores to fit GoogleTest conventions.

- **Death Test Limitations**: Death tests cannot safely use certain concurrency features unless using the threadsafe style.

- **Skipping Side Effects**: Code after a `GTEST_SKIP()` call won’t execute; do not rely on side effects after skipping.

- **Custom Printer Conflicts**: If you define both `AbslStringify()` and `PrintTo()`, GoogleTest prioritizes `PrintTo()`.

- **Listener Conflicts**: Removing the default printer disables all default console output; ensure your custom listener provides sufficient output.

---

## Additional Resources

- [Assertions Reference](reference/assertions.md) — Complete API coverage of assertions.
- [Advanced Topics](advanced.md) — Detailed guide on advanced GoogleTest features.
- [Parameterized and Typed Tests](concepts/advanced-data-models/parameterized-and-typed-tests.mdx) — In-depth explanation of parameterized and typed tests.
- [Death Tests Guide](advanced.md#death-tests) — Comprehensive death test usage.
- [Event Listener API](reference/testing.md#TestEventListener) — For customizing test execution notification.
- [GoogleTest Primer](primer.md) — Introductory overview and basics.

---

For the latest updates and community discussions, visit the [GoogleTest GitHub repository](https://github.com/google/googletest).

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/reference/assertions.md", "range": "1-400"},{"path": "docs/advanced.md", "range": "1-500"}]} />
