---
title: "Breaking Changes and Migrations"
description: "Highlights changes in each release that may affect compatibility, including removed APIs, updated behaviors, and unsupported platforms or compilers. Provides practical migration tips and code samples to help users address disruptions caused by upgrades."
---

# Breaking Changes and Migrations

This page highlights the changes in each GoogleTest release that may affect backward compatibility, including removed or modified APIs, updated behaviors, and unsupported platforms or compilers. It empowers users to understand potential disruptions caused by upgrades and offers practical migration tips and code examples to help seamlessly transition between versions.

---

## 1. Overview of Breaking Changes

GoogleTest and its mocking extension, GoogleMock, evolve continuously to improve functionality, performance, and maintainability. Occasionally, some releases introduce changes that may break existing tests or require code modifications.

The key areas where breaking changes might occur include:

- API changes: removal or signature changes of public functions, macros, or classes
- Behavioral changes: modifications in default values, failure modes, or semantics
- Platform and compiler support: deprecation or removal of support for legacy systems

Understanding these changes is critical for avoiding unexpected test failures and minimizing maintenance effort during upgrades.

---

## 2. Categories of Breaking Changes

### 2.1 API Removals and Modifications

- Deprecated APIs may be removed in later releases. For example, macros or functions replaced by more modern alternatives.
- Changes in method signatures require updating mock or test code accordingly.

### 2.2 Behavioral Changes

- Changes in default behaviors, such as death test styles or mock call strictness modes, may alter test results.
- Adjustments in error handling or reporting might affect how failures manifest.

### 2.3 Platform and Compiler Support

- Newer versions of GoogleTest require at least C++17.
- Support for some older platforms or build tools may be dropped.

---

## 3. Migration Strategies and Tips

To smoothly upgrade to a newer GoogleTest version, follow this recommended approach:

### 3.1 Review Release Notes

- Carefully examine the release notes and changelog for breaking changes that affect you.

### 3.2 Update Code for Deprecated Features

- Replace deprecated macros or API uses with current equivalents.
- Adjust method signatures and test patterns to match new expectations.

### 3.3 Use Compatibility Macros and Wrappers

- Where available, leverage compatibility layers provided in releases to ease migration.

### 3.4 Incremental Upgrade

- Upgrade to intermediate versions first if jumping multiple releases.
- Test functionality thoroughly at each step.

### 3.5 Use Code Search and Refactoring Tools

- Identify and replace problematic usages across the codebase.

### 3.6 Leverage Automated Migration Tools (if any)

- Stay updated on GoogleTest migration utilities.

---

## 4. Practical Migration Examples

### 4.1 Updating Death Test Style

In versions starting with 1.10.0, the `--gtest_death_test_style` flag introduced a new "threadsafe" mode to address issues with multi-threaded death tests.

Earlier code using death tests may require setting this flag explicitly:

```cpp
// Example: Set death test style programmatically.
GTEST_FLAG_SET(death_test_style, "threadsafe");
```

Or via command line:

```
./my_test --gtest_death_test_style=threadsafe
```

### 4.2 Handling Mock Strictness Modes

GoogleMock introduced `NiceMock`, `NaggyMock`, and `StrictMock` to control the behavior of uninteresting calls.

Migration may involve:

- Changing mock definitions from raw mocks to `NiceMock` or `StrictMock` for controlling warnings and failures.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock;  // Generate test failures on unexpected calls
```

- Adjusting `EXPECT_CALL` and `ON_CALL` to correctly specify behaviors and expectations to avoid spurious warnings or failures.

### 4.3 Replace Deprecated Macros

Older macros like `MOCK_METHODn` have been replaced by the generic `MOCK_METHOD`. Update mock classes accordingly.

```cpp
// Old:
MOCK_METHOD1(Foo, bool(int));

// New:
MOCK_METHOD(bool, Foo, (int));
```

### 4.4 Removing Underscores in Test Names

Avoid underscores in test suite or test names because of internal naming conflicts and reserved usage in GoogleTest. Rename test suites/tests to remove leading, trailing, or double underscores.

```cpp
// Bad
TEST(Foo_Bar, Baz_) { ... }

// Good
TEST(FooBar, Baz) { ... }
```

Refer to the [GoogleTest FAQ on underscores](../faq/common-usage-questions/using-googlemock-features.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for details.

---

## 5. Handling Platform and Compiler Support Changes

Recent versions of GoogleTest require at least C++17. Ensure your build environment uses a compatible compiler.

Remove or update code relying on deprecated platforms or unsupported compilers as documented in the [Supported Platforms](../docs/platforms.md) page.

---

## 6. Troubleshooting Common Migration Issues

### 6.1 Test Fixture Default Constructor Errors

If a test fixture class has no default constructor (especially when user-defined constructors exist), tests using `TEST_F` may fail to compile. Add a default constructor or use `typedef` aliases to conform to GoogleTest requirements.

### 6.2 Linking Errors on Static Const Members

Define static const integral members outside class definition to avoid linker errors.

### 6.3 Mock Method Uninteresting Call Warnings

Suppress by using `NiceMock` or appropriately configuring `EXPECT_CALL` statements with `.Times(AnyNumber())`.

### 6.4 Death Test Failures or Flakiness

Ensure death tests run in isolation, and configure death test style to "threadsafe" if required. Avoid multithreading outside of death tests.

### 6.5 Mixed Fixture or Test Suite Names

Do not mix tests with different fixtures but the same suite names. Rename test suites or fixtures per [Test Suite and Fixture Guidelines](../faq/common-usage-questions/writing-and-running-tests.md#my-compiler-complains-about-object-construction).

---

## 7. Useful References

- Detailed [Release Notes](release-notes.md) for each version.
- [Breaking Changes and Upgrade Guides](upgrade-guides.md).
- [FAQ](../faq.md) for common migration-related questions.
- [Supported Platforms](../docs/platforms.md) for environment requirements.
- [Using Mocks in Unit Tests](../guides/mocking-and-advanced-testing/using-mocks-in-unit-tests.md) for mock behavior changes.
- [Matchers Reference](../api-reference/assertions-and-matchers/core-matchers.md) for matcher compatibility.

---

## 8. Summary

When upgrading GoogleTest, always review the detailed release notes and changelogs for breaking changes that may impact your tests. Pay particular attention to API updates, new default behaviors, and support for your build environment. Use the recommended migration patterns and tools to update your codebase carefully, maintaining test reliability. When in doubt, consult the FAQ and guides for practical tips.

---

*For more information and step-by-step guides, explore related documents in the [Changelog](../changelog/index.md) and [Upgrade Guidance](../changelog/upgrading/upgrade-guides.md) sections.*
