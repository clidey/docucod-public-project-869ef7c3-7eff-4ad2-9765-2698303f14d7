---
title: "Upgrade Guides"
description: "Step-by-step guides for upgrading from older versions to the latest release, including advice on handling deprecated features, new requirements (e.g., C++17), and configuration file updates. Tailored for both incremental and major version upgrades."
---

# Upgrade Guides

GoogleTest's "Upgrade Guides" provide users with clear, step-by-step instructions for smoothly transitioning from older GoogleTest releases to the latest version. These guides address both incremental and major upgrades, ensuring your testing environment stays current, secure, and compatible.

---

## What You Will Achieve

- Seamlessly update your GoogleTest installations without disrupting your build or tests
- Understand and handle deprecated or removed features to future-proof your tests
- Adapt your build environment and configuration files to meet new compiler and platform requirements
- Gain confidence with practical instructions and troubleshooting tips for common upgrade pain points

---

## Understanding the Upgrade Context

Starting from version 1.17.0, GoogleTest requires at least C++17 support from your compiler. This represents a key prerequisite that impacts your build configuration and may require updates if you're upgrading from versions prior to 1.17.x.

The guides cover both incremental updates (e.g., 1.16.x to 1.17.x) and major version jumps, reflecting changes in platform support, compiler requirements, and API behaviors.

---

## Upgrade Paths

### 1. Preparing Your Build Environment

GoogleTest now requires C++17. Ensure that your project’s build configuration enables this standard. For example, if you use CMake, specify:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

If your environment or build system does not allow directly setting the C++ standard, add appropriate compiler flags manually, such as `-std=c++17` for GCC or Clang.

### 2. Review and Update Configuration Macros

Several compiler flags and macros control GoogleTest's behavior:

- **Threading Support**: GoogleTest detects pthread availability automatically, but in some environments (embedded platforms), you may need to define `-DGTEST_HAS_PTHREAD=0` or `1` explicitly.
- **Shared Library Builds**: If you build or link GoogleTest as a shared library, ensure you define
  
```cpp
-DGTEST_CREATE_SHARED_LIBRARY=1  // When building gtest shared library
-DGTEST_LINKED_AS_SHARED_LIBRARY=1  // When using tests with shared gtest
```

- **Avoid Macro Name Clashes**: If your project or third-party code clashes with GoogleTest macros like `TEST` or `ASSERT_EQ`, you can disable these macro definitions by defining, e.g.,

```cpp
-DGTEST_DONT_DEFINE_TEST=1
```

Then you will need to prefix GoogleTest macros with `GTEST_` (e.g., `GTEST_TEST`).

### 3. Update Build Scripts to Use Latest GoogleTest

#### Standalone Build with CMake

To upgrade, clone the latest release tag from GitHub:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
```

Follow the standard build steps:

```bash
mkdir build
cd build
cmake ..  # Add -DBUILD_GMOCK=OFF if you don't want GoogleMock
make
sudo make install
```

Make sure your projects link against the newly installed GoogleTest libraries.

#### Integration Into Your Project

For embedded or shared builds, you may use CMake's FetchContent to pull in GoogleTest as part of your project's build:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # On Windows, to match runtime
FetchContent_MakeAvailable(googletest)

add_executable(mytest mytest.cpp)
target_link_libraries(mytest gtest_main)
add_test(NAME mytest COMMAND mytest)
```

### 4. Handle Deprecated and Removed Features

Upgrade guides alert you to removed APIs or changed behaviors. For instance:

- Older APIs named *TestCase* are replaced with *TestSuite* — update your test definition macros accordingly.
- The default RTTI and exception support states may have changed in your environment, impacting how GoogleTest compiles and runs.
- Certain internal macros or control macros may be deprecated or renamed.

Refer to the relevant sections in the release notes and breaking changes documentation for details and migration tips.

### 5. Verify and Troubleshoot Your Upgrade

After upgrading:

- Rebuild your tests and ensure they compile against the latest GoogleTest headers.
- Run your test suite and confirm that tests behave as expected.
  - Any failing tests potentially impacted by deprecated APIs should be updated.
- If build errors mention missing C++17 features or threading issues, revisit your compiler configuration.
- Pay special attention to linkage errors on Windows platforms involving the runtime library; enabling `gtest_force_shared_crt` can resolve mismatches.

---

## Best Practices for Successful Upgrades

- **Backup and Source Control**: Always commit your current working state before starting an upgrade.
- **Incremental Testing**: Upgrade one component or module at a time to isolate issues quickly.
- **Consult Release Notes**: Use the detailed release notes alongside these guides to understand functional changes.
- **Keep Dependencies Updated**: Ensure your compiler and build tools support C++17 fully before upgrading GoogleTest.
- **Use FetchContent or Submodules for Integration**: These approaches make it easier to keep GoogleTest updated in your project.

---

## Summary

Upgrading GoogleTest is a crucial activity to leverage improvements, security patches, and the latest C++ standards support. The process involves updating your build environment for C++17, adjusting configuration macros, rebuilding the library, and verifying compatibility of your tests with new APIs and features. The upgrade guides ensure this journey is smooth, reduce friction, and help maintain a robust testing infrastructure.

---

## Troubleshooting Common Upgrade Issues

<AccordionGroup title="Common Upgrade Challenges">
<Accordion title="Compiler Does Not Support C++17">
If your compiler complains about missing C++17 support:
- Check your compiler version against [GoogleTest's Supported Platforms](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).
- Upgrade your compiler to a version supporting C++17.
- Ensure your build scripts pass the appropriate flags (e.g., `-std=c++17`).
</Accordion>
<Accordion title="Linker Errors on Windows with Runtime Library Conflicts">
You may see errors like:
```
gtest.lib(gtest-all.obj): error LNK2038: mismatch detected for 'RuntimeLibrary'
```
To fix:
- Enable the CMake option `gtest_force_shared_crt` when building GoogleTest.
- Match your project's runtime library settings (dynamic or static) with GoogleTest's.
</Accordion>
<Accordion title="Macro Name Collisions">
If you have conflicts with `TEST`, `ASSERT_*`, or other macros:
- Use the `DGTEST_DONT_DEFINE_XXX=1` flags to rename macros.
- Update your test code to use `GTEST_`-prefixed versions.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- [Release Notes and Version Timeline](/changelog/release-history/release-notes)
- [Breaking Changes and Migrations](/changelog/upgrading/breaking-changes)
- [Installation and Setup Guide](/getting-started/setup-and-installation/prerequisites-and-system-requirements)
- [Building GoogleTest with CMake](googletest/README.md)
- [Configuring Your Project](/getting-started/setup-and-installation/configuring-your-project)

---

For detailed migration examples, consult the release-specific upgrade notes and the extensive [changelog documentation](https://github.com/google/googletest/tree/main/docs/changelog). Always cross-reference with your project requirements and test coverage to plan and execute your upgrade effectively.

---

_This page focuses solely on upgrade procedures to the latest GoogleTest release. For help with specific new features or test writing practices, consult the guides and API reference sections of the documentation._
