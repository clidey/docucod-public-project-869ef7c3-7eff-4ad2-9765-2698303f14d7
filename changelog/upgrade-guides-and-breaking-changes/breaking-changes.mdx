---
title: "Breaking Changes & Deprecations"
description: "A clear, action-oriented summary of changes that may impact code compatibility or require user intervention. This includes removed features, changed APIs, or altered defaults, as well as a timeline for deprecated elements. Ideal for users who need to assess upgrade risks or plan proactive maintenance."
---

# Breaking Changes & Deprecations

A focused summary of updates to the GoogleTest and GoogleMock frameworks that may affect your existing test code compatibility or require adjustments. This page empowers you to evaluate upgrade risks, identify deprecated features, and plan remediation steps during transitions between versions.

---

## Understanding Breaking Changes

Breaking changes are modifications that alter expected behaviors, APIs, or defaults in a way that may cause your existing test code to fail compilation, runtime execution, or change test outcomes unexpectedly.

Users upgrading to newer GoogleTest versions should carefully review this section to avoid surprises and ensure a smooth upgrade.

**Key considerations:**

- **Avoid surprises:** Review and adapt your tests if the framework alters behavior or API.
- **Migration support:** Follow detailed migration guides where provided.
- **Version compatibility:** Assess how breaking changes impact various GoogleTest releases.


## Common Categories of Breaking Changes

- **Removed or changed API macros and functions:** Some macros, like deprecated test utilities or flag behaviors, may be removed or renamed.
- **Altered default behavior:** Defaults for mock strictness, assertion handling, or test discovery may change.
- **Deprecation of features:** Warnings or removed support for legacy constructs, such as older mock macros or certain matcher patterns.


## Timeline of Deprecations and Removals

GoogleTest's approach balances progress with stability. Deprecated features receive advance warning and coexist with new alternatives for at least one major version.

- **Announcement:** Feature marked deprecated, with documentation and compiler warnings.
- **Grace period:** Time for users to migrate away from deprecated APIs or patterns.
- **Removal:** Deprecated feature is removed in a major release.

Refer to the [Migration & Upgrade Guide](/changelog/upgrade-guides-and-breaking-changes/migration-and-upgrade-guide) for specific timelines and step-by-step instructions.


## Examples of Notable Breaking Changes

### Removal of Old-Style Mocking Macros

The legacy `MOCK_METHODn` macros were replaced with the unified `MOCK_METHOD` in 2018.

```cpp
// Legacy (deprecated):
MOCK_METHOD1(Foo, bool(int));

// Preferred modern form:
MOCK_METHOD(bool, Foo, (int), (override));
```

Users should migrate all older mock macros to the modern `MOCK_METHOD` form.

### Changes to Test and Suite Naming Conventions

To avoid undefined behavior and clashes, underscores `_` are disallowed in test suite or test names. For example:

```cpp
// Avoid:
TEST(My_Suite, TestName) { ... }  // Deprecated, breaks naming internal

// Use:
TEST(MySuite, TestName) { ... }
```

See the [FAQ on Underscore Usage](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for details and rationale.

### Strict Mock Behavior Becoming Default

Older versions defaulted to "naggy" mocks that issue warnings for uninteresting calls. Recent versions have shifted toward "nice" or stricter defaults to improve test robustness.

If your tests started printing more warnings or failing due to uninteresting calls on mocks, consider explicitly marking mocks as `NiceMock<T>` or adjusting `EXPECT_CALL`s accordingly.

### Assertion Macro Enhancements

New API forms like `EXPECT_THAT(value, matcher)` became preferred for expressive tests. Older `EXPECT_EQ` with `NULL` arguments requires using `nullptr` now to avoid template ambiguities.


## Breaking Change Policy

GoogleTest follows a disciplined process to ensure users have clear guidance:

- **Communication:** Breaking changes are announced in advance via release notes.
- **Compatibility:** Each major release documents breaking changes explicitly.
- **Migration Paths:** Detailed migration guides and examples are provided to smooth upgrades.
- **Deprecation Warnings:** Deprecated APIs emit compile-time notices before removal.


## Common Pitfalls and How to Avoid Them

1. **Ignoring Return Value of RUN_ALL_TESTS()**
   - Always return `RUN_ALL_TESTS()` from your `main()` to properly propagate test results.

2. **Using `ASSERT_*` in non-void Functions or Constructors**
   - `ASSERT_*` macros cause early return only in `void` functions; avoid in constructors and non-void functions.

3. **Mock Object Lifetimes**
   - Ensure mocks have virtual destructors and are correctly destroyed to avoid heap check errors.

4. **Test Discovery Failures due to Naming or Macros**
   - Avoid underscores and ensure macros like `TEST` and `TEST_F` are used properly.

5. **Death Tests in Multi-threaded Context**
   - Name death test suites with `*DeathTest` suffix and prefer the "threadsafe" death test style.


## Recommendations for Upgrade

- **Audit Usage:** Search for deprecated macros (`MOCK_METHODn`, underscores in test names).
- **Add Explicit Mocks Behavior:** Use `NiceMock`, `StrictMock`, or explicit `EXPECT_CALL` with `.Times(AnyNumber())` to express intent.
- **Use Modern Assertions:** Prefer expressive `EXPECT_THAT` and avoid legacy comparison patterns.
- **Run Tests with Verbose Output:** Use `--gmock_verbose=info` to debug mock call matching.
- **Consult Migration Guides:** Follow documented upgrade paths in the [Migration & Upgrade Guide](/changelog/upgrade-guides-and-breaking-changes/migration-and-upgrade-guide).


## Troubleshooting Breaking Changes

- **Test Not Running?** Verify test naming rules and macro usage.
- **Mock Calls Not Being Matched?** Use `--gmock_verbose=info` for detailed mock call tracing.
- **Compilation Errors?** Check for removed or renamed macros and update accordingly.
- **Unexpected Assertion Failures?** Review new default behaviors and adapt mocks and expectations.


## Additional Resources

- [Migration & Upgrade Guide](/changelog/upgrade-guides-and-breaking-changes/migration-and-upgrade-guide)
- [Detailed Release Notes](/changelog/version-history-and-release-notes/detailed-release-notes)
- [Mocking Reference](docs/reference/mocking.md)
- [FAQ on Underscore Usage](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Advanced GoogleTest Topics](docs/advanced.md)


<Callout title="Tip">
Always lock your test framework version after upgrading and integrate the breaking changes documentation into your development process to minimize disruption.
</Callout>

---

**For real-time support or community discussion, see:**
- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest and GoogleMock Discussion Forums and Stack Overflow](https://stackoverflow.com/questions/tagged/googletest)


---

<Note>
This page focuses exclusively on breaking changes, deprecations, and removals. For full feature updates, fixes, and improvements, please refer to the [Detailed Release Notes](/changelog/version-history-and-release-notes/detailed-release-notes).
</Note>
