---
title: "Deprecations and Safe Upgrade Paths"
description: "Lists all deprecated features and provides timelines for removal, plus targeted advice for upgrading across significant versions. Ensures users have a clear checklist for preparing their code for future-proof support."
---

# Deprecated Features and Safe Upgrade Paths

This page offers a comprehensive overview of deprecated features within GoogleTest and GoogleMock. It provides clear timelines for their removal and targeted advice to assist developers in upgrading their code bases safely and efficiently. Preparing your tests and mocks with these guidelines ensures continued compatibility and benefits from ongoing improvements without disruption.

---

## Understanding Deprecations

Deprecation means that certain features, APIs, or behaviors are marked for removal in future versions. While currently available, relying on deprecated elements risks breakage upon upgrades. This page guides you to identify deprecated features, understand their impact, and adopt migration strategies.

### Why Pay Attention to Deprecations?
- **Maintain Future Compatibility:** Avoid unexpected test failures during upgrades.
- **Leverage Improvements:** Deprecated features often have replacements that improve performance, clarity, or safety.
- **Reduce Technical Debt:** Keeping code up-to-date prevents accumulation of fragile, outdated constructs.

<Tip>
Always review GoogleTest's changelogs and deprecation notices before upgrading major versions to plan migration accordingly.
</Tip>

---

## Key Deprecated Features in GoogleMock

### 1. Old-Style `MOCK_METHODn` Macros

Prior to the introduction of the generic `MOCK_METHOD` macro in 2018, mocking methods required using a family of `MOCK_METHODn` macros. Though still supported, these macros are deprecated in favor of the more flexible and readable `MOCK_METHOD` approach.

#### Migration Tips:
- Replace `MOCK_METHODn(MethodName, ReturnType(Args))` with `MOCK_METHOD(ReturnType, MethodName, (Args))`.
- Add qualifiers such as `(const)` or `(override)` as required.
- See the [Mocking API Reference](https://google.github.io/googletest/reference/mocking.md#mocking) for detailed examples.

### 2. Use of NaggyMock by Default

By default, mocks behave as `NaggyMock`, printing warnings on uninteresting calls. Plans are in place to switch to `NiceMock` as the default behavior in future releases to reduce noise.

#### Migration Tips:
- Explicitly wrap mocks with `NiceMock` to suppress warnings on uninteresting calls now:

```cpp
using ::testing::NiceMock;
NiceMock<MockClass> mock_obj;
```

- Continue using `StrictMock` when you want uninteresting calls to cause test failures.

### 3. Legacy Ways of Handling Move-Only Types

Legacy workarounds for mocking move-only types involved delegating real methods to non-move-only mock methods. Since April 2017, native support for move-only mocks is available through generic `MOCK_METHOD` macros.

#### Migration Tips:
- Use `MOCK_METHOD` directly with move-only types like `std::unique_ptr`.
- Refactor any wrapped delegation code to leverage this direct support.

### 4. Deprecated Macros and Patterns

Avoid deprecated macros and patterns that have safer, clearer modern replacements. For instance, the `MOCK_CONST_METHODn` macros are replaced by `MOCK_METHOD` with a `(const)` specifier.

---

## Deprecation Timeline and Removal Schedule

| Deprecated Feature               | Introduced | Deprecated Since | Planned Removal |
| --------------------------------|------------|------------------|-----------------|
| Old-style `MOCK_METHODn` macros | Before 2018| 2019             | Tentative future major version |
| Default Naggy Behavior           | Current    | Will change soon | Next major version|
| Legacy Move-Only Workarounds    | Pre-2017   | 2018             | Next major version|

<Tip>
Monitor release notes and migration guides at the [Changelog Overview](./version-summary) and [Breaking Changes & Migration Steps](./breaking-migrations) pages.
</Tip>

---

## Safe Upgrade Practices

### 1. Audit Your Mock Definitions

- Replace old `MOCK_METHODn` macro usage with the generic `MOCK_METHOD` style.
- Add explicit qualifiers (`const`, `override`) to mock methods to ensure override correctness.

### 2. Explicitly Specify Mock Strictness

- If your tests rely on the current naggy warnings, intentionally wrap mocks in `NaggyMock`.
- For quieter behavior, wrap mocks in `NiceMock`.
- For stricter enforcement, use `StrictMock`.

### 3. Review Default Actions and Expectations

- Adjust your `ON_CALL` and `EXPECT_CALL` usage if you observe unexpected warning or error behavior changes.
- Set `EXPECT_CALL(...).Times(AnyNumber())` to explicitly allow uninteresting calls you want to ignore.

### 4. Update Tests Handling Move-Only Types

- Simplify tests by using direct mock methods with move-only arguments and return types.
- Remove delegation layers or legacy wrappers that complicate test logic.

### 5. Verify and Clear Expectations When Needed

Use `Mock::VerifyAndClearExpectations()` and `Mock::VerifyAndClear()` appropriately in your tests to avoid leaking mock objects or stale expectations, especially when upgrading or refactoring tests.

---

## Troubleshooting Common Migration Issues

### Problem: Unexpected Uninteresting Call Warnings or Errors

Ensure you:
- Use the correct mock strictness wrapper (`NiceMock`, `NaggyMock`, `StrictMock`).
- Set appropriate expectations or default actions for the mock methods.
- Verify that the upgraded GoogleTest version matches your strictness assumptions.

### Problem: Compilation Errors After Migrating MOCK_METHOD Macros

- Check for missing parentheses for argument lists containing commas.
- Confirm qualifiers match those in base classes.
- Use type aliases for complex argument or return types.

### Problem: Errors Around Move-Only Types

- Remove legacy wrapper mocks and rely on direct `MOCK_METHOD` support.
- Use lambdas or callables with `WillOnce` or `WillRepeatedly` for complex behaviors.

---

## Additional Resources

- [Breaking Changes & Migration Steps](./breaking-migrations) — Detailed guides for specific version upgrades.
- [Mocking API Reference](../api-reference/core-apis/gmock-mocking-api) — Comprehensive usage of mock methods.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Practical recipes for test mocking.
- [Mock Strictness Control](../api-reference/core-apis/gmock-nice-strict-api) — Explanation of mock strictness wrappers.
- [GoogleTest Changelog Overview](./version-summary) — Release notes summary.

<Tip>
Keep your tests clean, clearly specify expectations, and use the modern `MOCK_METHOD` syntax for best long-term compatibility and readability.
</Tip>

---

## Summary

This document outlines all deprecated features affecting GoogleMock users, their planned removal timelines, and explicit advice for safe migration. Focus on replacing old method macros, managing mock strictness behavior explicitly, and leveraging native move-only type support, while verifying expectations for stable testing with latest GoogleTest versions. Careful adherence ensures forward compatibility and test reliability.

---

**For faster onboarding:** consult the [Mocking Basics Guide](../../guides/core-workflows/mocking-basics) and the [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html).

---

<Check>
If you encounter difficulties, set the `--gmock_verbose=info` flag during test runs to receive detailed call traces aiding debugging.
</Check>