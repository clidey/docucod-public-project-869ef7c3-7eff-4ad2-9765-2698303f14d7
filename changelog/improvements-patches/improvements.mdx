---
title: "Improvements"
description: "Highlights recent upgrades—such as performance optimizations, platform compatibility increases, and usability tweaks—to demonstrate continued project investment and encourage upgrades."
---

# Improvements

The Improvements page highlights the ongoing enhancements made to GoogleMock, showcasing performance optimizations, expanded platform compatibility, and usability improvements that continuously refine the mocking framework. These updates reflect the project’s commitment to providing developers with reliable and efficient tools to simplify mock creation and testing workflows.

---

## Performance Enhancements

Recent improvements focus on reducing compilation times and runtime overhead when using mocks, especially for complex or template-heavy mock classes. The following optimizations have been introduced:

- **Deferred Constructor and Destructor Generation:** Moving mock class constructors and destructors out of class bodies into source files to minimize compile-time costs when headers are included in multiple translation units.

- **Optimized Matcher and Action Objects:** Reductions in internal state copying and smarter move semantics in action and matcher implementations, which lower runtime costs when using chained `WillOnce` and `WillRepeatedly` clauses.

- **Lazy Evaluation of Default Actions:** Default return value computations for mock methods are deferred until necessary, avoiding unnecessary construction.

These changes enable tests using GoogleMock to build faster and execute more efficiently, facilitating a smoother development experience.

## Platform Compatibility and Requirements

GoogleMock continues to expand support and compatibility across platforms and compiler versions while ensuring adherence to modern C++ standards:

- **Minimum C++17 Standard:** The library now requires C++17 or later, ensuring the use of more robust language features and improved compiler diagnostics.

- **Compiler Version Requirements:** For Visual C++, a minimum of Visual Studio 2015 (version 14.0) is required, aligning GoogleMock with supported toolchains that improve stability and standard compliance.

- **Conditional Integration with Abseil:** Where available, GoogleMock integrates with Abseil's flag and macro libraries for enhanced flag management and deprecation notices.

- **Cross-Platform Support Enhancements:** Utilities and macros in `gmock-port.h` streamline platform abstractions, improving porting to various operating systems without burdening the user with platform-specific concerns.

By tightening compatibility, GoogleMock offers developers a consistent and dependable environment across diverse development setups.

## Usability and API Refinements

Ongoing refinements to the public API and internal behaviors optimize the developer experience with mocks:

- **Enforced Usage Patterns:** Stringent requirements that `MOCK_METHOD` invocations reside in `public` sections of mock classes prevent common compilation pitfalls and enhance clarity.

- **Improved Strictness Controls:** Enhanced support for `NiceMock`, `NaggyMock`, and `StrictMock` wrappers refine how uninteresting calls are handled, giving users fine-grained control over test strictness and verbosity.

- **Enhanced Diagnostics and Verbosity Flags:** New and updated command-line flags such as `--gmock_verbose` empower developers to control the detail of warnings and informational messages, facilitating faster debugging and reduced noise.

- **Expanded Matchers and Actions:** Continuous updates to the set of built-in matchers and actions provide more expressive tools for specifying expectations and behaviors.

- **Expanded Documentation and Examples:** The documentation, including the gMock Cookbook, now offers more comprehensive recipes and troubleshooting advice, enabling users to harness the full power of GoogleMock effectively.

These improvements lower the barrier to entry and advance the precision of test authoring with GoogleMock.

---

## Additional Resources and Cross-References

- [GoogleMock Basic Usage and Examples](docs/gmock_for_dummies.md): Learn fundamental mocking concepts and simple examples.
- [API Reference - Mock Methods](api-reference/mocking-and-matcher-api/mock-methods-api.mdx): Deep dive into mock method declarations and usage.
- [gMock Cookbook](docs/gmock_cook_book.md): Extensive recipes for mocking different patterns and techniques.
- [Mock Strictness Wrappers](api-reference/mocking-and-matcher-api/nice-naggy-strict-mock-api.mdx): Control and customize mock behavior strictness.
- [Breaking Changes and Migration Guides](changelog/breaking-changes-migrations/): Understand necessary changes when upgrading versions.
- [Matchers and Actions Reference](api-reference/mocking-and-matcher-api/matchers-api.mdx, api-reference/mocking-and-matcher-api/actions-api.mdx): Explore matchers to specify expectations and actions to control mock behavior.

---

Maintaining awareness of these improvements and related guidance ensures a successful upgrade path and optimal use of GoogleMock in your projects.

<Check>
Stay up-to-date with the latest changes to maintain fast and reliable test suites.
</Check>

<Info>
Planning to upgrade? Consult the Migration Guides and Breaking Changes documentation before proceeding.
</Info>

<Warning>
Ensure your code adheres to the new minimum C++17 requirement and compiler compatibility to prevent build errors.
</Warning>

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googlemock/include/gmock/internal/gmock-port.h", "range": "1-100"}]} />

---

### Example: Optimized Mock Method Declaration

```cpp
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetSize, (), (const, override));
  MOCK_METHOD(void, Process, (const std::string& input), (override));

  // Constructor and destructor declared in header,
  // defined in .cc file to reduce compile-time overhead.
  MockFoo();
  ~MockFoo() override;
};
```

---

### Usage Notes

- Move mock method definitions out of header files where possible to reduce compile-time costs.
- Prefer `NiceMock` wrapper when you want to suppress warnings for uninteresting calls.
- Use `StrictMock` for rigorous confidence ensuring no unexpected calls slip through.
- Leverage verbose flags (`--gmock_verbose`) while debugging to gain insight into mock interactions.

---