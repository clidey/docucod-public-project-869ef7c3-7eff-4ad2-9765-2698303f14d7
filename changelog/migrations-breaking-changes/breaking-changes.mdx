---
title: "Breaking Changes & Deprecation Notices"
description: "Summarize all breaking changes and deprecated functionality across releases, offering warning and context for affected features. Users rely on this page to prevent regressions and future-proof their test suites."
---

# Breaking Changes & Deprecation Notices

This page provides a comprehensive summary of all breaking changes and deprecated features introduced across the lifecycle of GoogleTest and GoogleMock releases. Its primary purpose is to help users anticipate, understand, and adapt their test suites to changes that could impact compatibility, enabling smoother upgrades and future-proofing.

---

## Understanding Breaking Changes

Breaking changes refer to modifications in functionality, interfaces, or behavior that may cause existing tests or integrations to fail without modification. Recognizing these early helps maintain uninterrupted test workflows and ensures your testing code remains effective.

**Common causes of breaking changes include:**

- Removal or alteration of APIs or macros.
- Changes in method signatures or expected behaviors.
- Updates in default mock object behaviors, such as stricter call verification.
- Modifications in how mocking features like `EXPECT_CALL` and `ON_CALL` interpret expectations.

When a breaking change occurs, detailed migration guidance or alternative approaches will be provided whenever possible to facilitate updates.

## Deprecated Features

Deprecation marks features or APIs scheduled for removal in future releases. Continued usage is discouraged and often accompanied by compiler or runtime warnings.

Transitioning away from deprecated features promptly will minimize disruption upon upgrading to newer versions.

---

## Notable Breaking Changes By Release

### Version 1.12.1 and Later

- **Minimum C++ Version Requirement**: Minimum compiler support updated to C++17 to leverage modern language features and improve portability. Test environments must ensure C++17 compliance to use recent versions.

- **Mock Method Definitions**: The old `MOCK_METHODn` family macros are deprecated in favor of the newer, more flexible `MOCK_METHOD` macro, which supports qualifiers like `const`, `override`, `noexcept`, and call types (`Calltype`).

  - Example Transition:

    ```cpp
    // Deprecated:
    MOCK_CONST_METHOD1(Foo, bool(int));

    // Preferred:
    MOCK_METHOD(bool, Foo, (int), (const));
    ```

- **Mocking Private/Protected Methods**: Mock methods must be declared in the `public:` section of mock classes regardless of their base class access level, ensuring `EXPECT_CALL` and `ON_CALL` can reference them appropriately.

- **Default Actions and Expectations Behavior**:

  - `ON_CALL` defines mock method behavior without setting call expectations.
  - `EXPECT_CALL` sets behavior *and* the call expectations.
  - Newer versions strictly differentiate uninteresting calls (no matching `EXPECT_CALL`) from unexpected calls (arguments do not match expectations), with more explicit warnings and errors.

- **Strictness Modes (`NiceMock`, `NaggyMock`, `StrictMock`) Clarification**:

  - These wrappers now strictly affect ***uninteresting*** calls only.
  - `NiceMock` suppresses warnings on uninteresting calls.
  - `NaggyMock` (default) emits warnings on uninteresting calls.
  - `StrictMock` treats uninteresting calls as test failures.

  Using these modes no longer affects unexpected call behavior, ensuring consistent semantics.

- **Matcher and Action API Updates:**

  - Matchers and actions must be purely functional with no side-effects to ensure consistent behavior during repeated evaluations.
  - `SafeMatcherCast<T>()` was introduced to handle safe casting of matchers when argument types differ.
  - Consistent support for mocking methods with move-only types like `std::unique_ptr` was enhanced.

- **Ordering and Cardinality Enhancements:**

  - Sequences (`InSequence`) and partial orders (`After`) can now more expressively define complex expectation order constraints.
  - Added support for `.RetiresOnSaturation()` to deactivate expectations automatically once call count limits are reached.

- **Mock Method Expectations Evaluation Order:**

  - Later `EXPECT_CALL` statements override earlier ones, enabling layered mocking configurations.
  - This allows setting common behavior upfront and specializing behavior later.

### Version 1.11.0 and Earlier

- Minimal or no support for move-only types in mock methods.
- Less differentiation between uninteresting and unexpected calls, often generating warnings where not needed.
- Legacy `MOCK_METHODn` macro family was the primary mocking method.

---

## Deprecation Notices

- **`MOCK_METHODn` Macros**: While supported for legacy reasons, these macros are deprecated in favor of the generalized `MOCK_METHOD` macro.

- **Usage of Unqualified `const` in Parameters**: Due to compiler inconsistencies, top-level `const` qualifiers in parameter types (e.g. `const int`) in mock method declarations should be avoided or removed, as they are ignored in C++ and may trigger warnings.

- **Legacy Matchers and Actions Macros**: The `ACTION` and `ACTION_P` macro-based action definitions remain supported but skew towards newer, cleaner lambda or functor-based actions for clarity and safety.

- **Warning Controls**: The `--gmock_verbose` flag supersedes previous ad-hoc logging mechanisms.

---

## Migration Best Practices

1. **Review Your Mock Classes:**
   - Prefer using `MOCK_METHOD` with explicit qualifiers.
   - Ensure all mock methods are declared in the `public:` section.

2. **Adjust Your Expectations:**
   - Use `ON_CALL` for setting default behaviors without enforcing expectations.
   - Reserve `EXPECT_CALL` for methods where call frequency and arguments must be verified.
   - Avoid over-specifying expectations; prefer flexibility to improve test maintenance.

3. **Leverage Strictness Modes Thoughtfully:**
   - Use `NiceMock` to suppress warnings on uninteresting calls when valid.
   - Reserve `StrictMock` for cases where unwanted calls should fail tests.

4. **Update Matchers and Actions:**
   - Remove side effects from matchers.
   - Use `SafeMatcherCast` when required.
   - Replace deprecated macros with lambdas or `Invoke` where possible.

5. **Test Thoroughly After Upgrading:**
   - Run tests with `--gmock_verbose=info` to get detailed mock call traces.
   - Address all warnings about uninteresting or unexpected calls.
   - Verify mock lifecycles and cleanup with `Mock::VerifyAndClearExpectations`.

---

## Common Pitfalls and Troubleshooting

- **Unintended Unexpected Calls:** Test failures often arise from unexpected calls due to argument mismatches. Using detailed matchers and running with verbose logging helps diagnose these.

- **Incorrect Reference Qualification:** Ensure that overridden mock methods use proper qualifiers (`const`, `override`, `noexcept`) to match base declarations closely.

- **Overly Strict or No Expectations:** Overusing `EXPECT_CALL` can cause test brittleness, while too few expectations may allow silent errors; use `ON_CALL` judiciously.

- **Move-only Type Handling:** Always prefer lambdas or functors for mocking methods with move-only arguments or return values to ensure proper behavior.

- **Destructor Mocks:** To mock destructor behavior, add a dedicated mock method (commonly `Die()`) called within the destructor, as `MOCK_METHOD` cannot mock destructors directly.

---

## References and Related Documentation

- [Mocking Reference](/docs/reference/mocking.md): In-depth explanation of mock class definitions and macros.
- [gMock Cookbook](/docs/gmock_cook_book.md): Practical recipes for mocking strategies and patterns.
- [Matchers Reference](/api-reference/core-apis/matchers-api.md): Guide to matchers for flexible argument validation.
- [Actions Reference](/api-reference/core-apis/actions-api.md): Details on mocking method behaviors and actions.
- [Mock Object Strictness Modes](/guides/advanced-and-integrations/mock-object-strictness.md): Guidance on NiceMock, StrictMock, and NaggyMock usage.
- [Upgrade & Migration Guides](/changelog/migrations-breaking-changes/upgrade-guides.md): Hands-on instruction for upgrading across versions.
- [Assertions Reference](/docs/reference/assertions.md): Base for validation in testing.

---

## Summary

Understanding breaking changes and deprecated features is critical for maintaining a stable and effective test suite as GoogleTest and GoogleMock evolve. This page empowers users to identify potential issues ahead of upgrade cycles, offering clear descriptions, practical migration advice, and contextual warnings.

Regular consultation of this page alongside migration guides and reference documentation will ensure your tests remain robust, maintainable, and in alignment with best practices.

<Tip>
Always back up your test suite before upgrading frameworks, and incrementally apply changes to detect issues early.
</Tip>

---

## Troubleshooting Examples

<AccordionGroup title="Common Issues Related to Breaking Changes">
<Accordion title="Unintended Uninteresting Call Warnings">
If you see warnings like "Uninteresting mock function call encountered", it often means a method was called without an `EXPECT_CALL` expectation.

### How to fix:
- Add an `EXPECT_CALL` with `.Times(AnyNumber())` for methods you wish to ignore.
- Use `NiceMock` wrapper to suppress such warnings globally.
- Reduce unexpected calls by verifying your test setup.
</Accordion>
<Accordion title="Failing Due to Changed Mock Method Signatures">
Updating to use the new `MOCK_METHOD` syntax may cause compile errors if method qualifiers do not precisely match base class methods.

### How to fix:
- Compare base method signature qualifiers.
- Include `const`, `override`, `noexcept`, and `Calltype()` qualifiers as necessary.
</Accordion>
<Accordion title="Tests Failing Because of Call Order Enforcement">
Use of `InSequence` or `.After()` constraints may now be strictly enforced causing failures.

### How to fix:
- Review all call sequences and modify test code to ensure calls occur in correct order.
- Consider relaxing order constraints if not critical.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- GoogleTest and GoogleMock GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- Issue Tracker for Reporting Breakage: https://github.com/google/googletest/issues
- Community Discussions and Help: Stack Overflow tagged [googletest](https://stackoverflow.com/questions/tagged/googletest)

---

_Last Updated: June 2024_
