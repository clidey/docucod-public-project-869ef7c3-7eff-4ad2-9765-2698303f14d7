---
title: "Deprecation Notices"
description: "Summarizes all APIs, features, or parameters scheduled for removal or replacement, with advice for migrating to supported alternatives."
---

# Deprecation Notices

This page provides a comprehensive summary of all GoogleTest APIs, features, and parameters that are scheduled for removal or replacement. It also offers practical advice and guidance on migrating to supported alternatives to keep your test suite current, maintainable, and compatible with future releases.

---

## Understanding Deprecation

Deprecation is the process of marking certain features as obsolete and signaling that they will be removed in a future release. This ensures that the framework can evolve, improve, and maintain quality over time without carrying legacy baggage.

**Key points for users:**

- Deprecated features **remain available** during a transition period but their use is **strongly discouraged**.
- Using deprecated features may trigger compiler warnings or runtime notices.
- Migration is highly recommended to avoid future breakage.

---

## Common Scenarios Leading to Deprecation

1. **Simplification and modernization:** Older APIs replaced by clearer, safer, or more expressive alternatives.
2. **Performance and correctness:** Updates to improve test execution or fix subtle bugs.
3. **Consistency:** Aligning the API with common C++ idioms, language standards (e.g., mandatory C++17 usage).
4. **Maintenance burden:** Removing rarely used or problematic extensions.

---

## Notable Deprecated APIs and Features

### 1. Old-Style `MOCK_METHODn` Macros

- **Deprecated:** The family of macros like `MOCK_METHOD1`, `MOCK_CONST_METHOD2`, etc.
- **Replacement:** Use the unified `MOCK_METHOD` macro, which has a cleaner syntax and supports all common qualifiers.


#### Why Migrate?
- The unified `MOCK_METHOD` macro provides clearer code with explicit syntax for qualifiers like `const` and `noexcept`.
- Improves maintainability and consistency across mock definitions.

#### Migration Example
```cpp
// Old way (deprecated)
MOCK_METHOD1(Foo, bool(int));

// New preferred way
MOCK_METHOD(bool, Foo, (int));
```

### 2. Legacy Action Macros

- Macros such as `ACTION`, `ACTION_P`, and their variants are being supplanted by **functor-based actions and lambdas**.
- **Preferred:** Use lambda expressions or callable objects providing `operator()` for defining actions.

#### Benefits
- Improves readability and flexibility.
- Allows capturing local variables naturally.
- Simplifies type safety and error messages.

#### Example Transition
```cpp
// Legacy macro-based action
ACTION(IncrementArg1) { return ++(*arg1); }

// Modern lambda-based action
EXPECT_CALL(mock, Foo(_))
    .WillOnce([](int* arg1) { return ++(*arg1); });
```

### 3. Mocking Non-Virtual Methods Patterns

- GoogleMock traditionally requires mocking virtual methods.
- New patterns allow mocking non-virtual methods via unrelated mock classes and template-based dependency injection.

While not deprecated outright, older approaches that tried to make concrete classes virtual to enable mocking are discouraged in favor of interface-based design.

---

## Parameters and Flags Scheduled for Removal

- Some **compiler flags and control macros** related to pre-C++17 standards are deprecated due to the mandatory C++17 requirement for building GoogleTest.
- Macros or flags suppressing warnings that conflict with enhanced type safety and diagnostics may be removed.

---

## Migration Guidance and Best Practices

### Updating Mock Macros

1. **Replace** all usages of old `MOCK_METHODn` macros with the new `MOCK_METHOD` syntax.
2. **Wrap argument types containing commas** in parentheses or use `using` type aliases to avoid parsing issues.

### Modernizing Actions

- Prefer lambdas for inline action definitions.
- Use `Invoke`, `DoAll`, and other compositional actions provided in the gMock API.

### Handling Strictness Modifiers

- When using `NiceMock`, `StrictMock`, or `NaggyMock`, prefer consistent use to control uninteresting call handling.
- Avoid deprecated nested strictness modifiers which are unsupported.

### Reviewing Test Fixtures and Setups

- Confirm that test fixture constructors and destructors do not contain fatal assertions (`ASSERT_*`). Use `SetUp()` and `TearDown()` methods instead.

### General Migration Tips

- **Use the latest C++17 standard and compatible toolchains.**
- **Leverage `EXPECT_THAT` with matchers** as a modern assertion style, replacing legacy `EXPECT_EQ`/`ASSERT_EQ` variants over time.
- Enable verbose logging (`--gmock_verbose=info`) during migration to diagnose uninteresting or unexpected calls.

---

## Practical Tips and Common Pitfalls

- **Avoid multiple EXPECT_CALLs on the same mock method without clear ordering or specificity,** as this can lead to brittle tests and migration complexity.
- **Refrain from mixing old and new API styles in the same test codebase to minimize confusion.**
- When deprecations impact your continuous integration or build system, thoroughly test all upgrades in isolated branches before merging.

---

## Troubleshooting Deprecation Issues

### Common Problem: Compilation Errors Related to Legacy Macros

- Occurs when old `MOCK_METHODn` macros clash with newer GoogleTest versions.
- **Solution:** Migrate to `MOCK_METHOD` by updating mock class declarations.

### Unexpected Behavior with Mock Strictness

- Symptoms: Tests fail unexpectedly due to uninteresting calls treated differently.
- **Solution:** Verify that `NiceMock` or `StrictMock` usage aligns with current recommendations.

### Deprecated Flags or Macros in Build Environment

- Symptoms: Warnings or errors from build scripts referencing removed flags.
- **Solution:** Remove deprecated flags and update build setup following the latest installation and configuration guides.

---

## Additional Resources

- **[GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)** — Recipes and guidance for mocking best practices and migration.
- **[Mocking Reference](../reference/mocking.md)** — Detailed API reference useful when adapting to new mocking conventions.
- **[Upgrade & Migration Guides](../changelog/migrations-upgrades/upgrade-migration-guides)** — Step-by-step instructions for moving between major GoogleTest versions.
- **[Breaking Changes Overview](../changelog/migrations-upgrades/breaking-changes)** — Catalog of incompatible changes requiring developer attention.

---

For the most seamless experience, regularly review deprecation indicators in compiler warnings and unit test outputs. Proactively updating your test codebase will ensure long-term stability and leverage the full power of GoogleTest and GoogleMock's latest features.