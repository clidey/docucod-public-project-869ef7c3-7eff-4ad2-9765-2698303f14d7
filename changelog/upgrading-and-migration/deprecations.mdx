---
title: "Deprecations & Removal Notices"
description: "Documents deprecated features, APIs, and upcoming removals, signaling to users what functionality will vanish in future releases. Useful for planning code maintenance and avoiding technical debt."
---

# Deprecations & Removal Notices

This page documents deprecated features, APIs, and upcoming removals in GoogleTest and GoogleMock. It serves as a vital resource for developers planning code maintenance and refactoring, helping to avoid technical debt and ensure compatibility with future releases.

---

## Overview

GoogleTest and GoogleMock evolve continuously to improve functionality, performance, and usability. As part of this process, certain features and APIs are deprecated or removed following established deprecation policies. Staying informed about these changes allows you to keep your codebase modern, secure, and compatible with newer versions.

This page outlines:

- Deprecated APIs and behaviors you should avoid.
- Features scheduled for removal in upcoming releases.
- Guidance for migrating away from deprecated elements.

---

## Deprecated Features and APIs

### 1. Older Mocking Macros

The legacy `MOCK_METHODn` macros (such as `MOCK_METHOD0`, `MOCK_CONST_METHOD1`, and their `_WITH_CALLTYPE` variants), previously used to mock methods in GoogleMock, are now deprecated in favor of the unified and more expressive `MOCK_METHOD` macro.

**Key points:**

- The unified `MOCK_METHOD` macro offers improved syntax and better support for qualifiers such as `const`, `noexcept`, and `override`, as well as call types on Windows.
- Legacy macros remain supported for backward compatibility but should be phased out in favor of `MOCK_METHOD`.
- Example migration:

```cpp
// Legacy style (deprecated)
MOCK_METHOD1(DoSomething, bool(int x));

// Preferred modern style
MOCK_METHOD(bool, DoSomething, (int x), (override));
```

Refer to the [Mocking Reference](docs/reference/mocking.md#MOCK_METHOD) for detailed usage.

### 2. Unnecessary Expectation Redundancies

Using redundant `EXPECT_CALL` clauses simply to suppress uninteresting call warnings is discouraged. Instead, apply _nice mocks_ (`NiceMock<T>`) to suppress warnings when calls are not of interest.

Example:

```cpp
using ::testing::NiceMock;

NiceMock<MockClass> mock;
EXPECT_CALL(mock, ImportantMethod());
// Calls to other methods won't generate warnings.
```

### 3. Deprecated Death Test Styles

The death test style flag `--gtest_death_test_style` defaults to "fast" but users are strongly encouraged to use "threadsafe" style wherever practical.

- The "fast" style is deprecated due to concurrency issues, especially with multithreaded tests.
- You can opt in to the recommended style programmatically before test execution:

```cpp
GTEST_FLAG_SET(death_test_style, "threadsafe");
```

See [Death Test API](api-reference/gtest-api/death-tests.md) and [Death Tests Outcomes Guide](guides/scenarios-and-best-practices/death-tests-outcomes.md) for more.

### 4. Use of Underscores in Test and Suite Names

Test suite and test names should avoid underscores `_` due to naming conflicts with internal GoogleTest mechanisms and generated symbol names. Violations can cause compilation or runtime errors.

Guidance:

- Do not start or end test names or suites with `_`.
- Avoid underscores anywhere in names to prevent symbol clashes.

Reference: [GoogleTest FAQ on Underscores](faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

---

## Planned Removals

### Removal of Legacy Mock Macros

In subsequent releases, all `MOCK_METHODn` and related legacy macros will be fully removed, requiring migration to the `MOCK_METHOD` macro.

### Deprecated Features in Synchronization and Threading

GoogleTest is moving towards standard C++17 threading features. Older platform-specific threading utilities and macros in `gtest-port.h` marked as internal or deprecated will be removed. Users should rely on standard synchronization primitives and GoogleTestâ€™s officially supported threading.

### Removal of Non-Standard and Platform-Specific Extensions

Some platform-specific macros or extensions (e.g. related to `STDMETHODCALLTYPE` on Windows) may be deprecated or refactored for simplification.

---

## Migration and Upgrade Guidance

To keep your code current and avoid breakage due to removals, follow these best practices:

- **Migrate from `MOCK_METHODn` family to `MOCK_METHOD`.** Consult the latest mocking guide and references to update signatures accordingly.

- **Use NiceMock, StrictMock, or NaggyMock wrappers as appropriate** to control warning verbosity and strictness instead of redundant expectations.

- **Adjust death test styles to "threadsafe".** Modify your test entry point or global test configuration to set the recommended death test style.

- **Ensure test and suite names do not contain underscores `_`.** Rename existing tests and suites to meet naming guidelines.

- **Replace any usage of deprecated or internal threading utilities** with standard C++17 threading or verified abstractions recommended by GoogleTest.

Refer to the [Breaking Changes & Migration](changelog/upgrading-and-migration/breaking-changes.md) page for detailed step-by-step migration instructions.

---

## Troubleshooting Deprecation Issues

If your build or tests start failing with errors related to deprecated usage:

- Check compiler warnings and errors during build for hints about deprecated API usage.
- Review your mocks for usage of legacy `MOCK_METHODn` macros and update them.
- Adjust death test styles and verify test names comply with naming rules.
- Make sure no code depends on internal macros or utilities marked as private or deprecated in `gtest-port.h`.

If problems persist, consult the [Supported Platforms & Compatibility](faq/getting-started-help/supported-platforms-compatibility.mdx) page for platform-specific notes, or seek help through support channels listed in [Where to Get Help](faq/support-community/where-to-get-help.mdx).

---

## Useful Practices for Maintaining Forward Compatibility

- Always consult GoogleTest release notes and changelogs before upgrading.
- Prefer the latest recommended macros and patterns, especially for mocking and death tests.
- Annotate and isolate deprecated usage in your test code and plan regular upgrades.
- Keep GoogleTest and GoogleMock versions aligned to avoid API mismatches.

---

## Additional Resources

- [Mocking Reference](docs/reference/mocking.md): Detailed reference on mocking APIs and macros.
- [Breaking Changes & Migration](changelog/upgrading-and-migration/breaking-changes.md): For comprehensive migration instructions.
- [GoogleMock Cookbook](docs/gmock_cook_book.md): Recipes on mocking patterns, including legacy migration.
- [Death Test API](api-reference/gtest-api/death-tests.md): Information on death test styles and usage.
- [FAQ on Underscores](faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore): Explanation of naming restrictions.

---

Keeping your test suites up-to-date with these deprecation and removal notices ensures robust, maintainable test code that leverages the strengths of GoogleTest and GoogleMock effectively. Please review relevant guides and start migration early to smoothly transition to upcoming versions.
