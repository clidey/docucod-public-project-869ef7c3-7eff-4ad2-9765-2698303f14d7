---
title: "Bug Fixes & Minor Updates"
description: "Summarizes bug fixes, ongoing maintenance, and minor improvements that enhance stability, compatibility, and developer experience."
---

# Bug Fixes & Minor Updates

This page provides detailed information on the recent bug fixes, maintenance activities, and minor improvements that enhance the stability, compatibility, and developer experience of GoogleMock. These updates ensure smoother usage of mock objects, improved warnings and error handling, and better developer ergonomics without introducing major feature changes.

---

## Overview

GoogleMock rigorously maintains compatibility with a wide range of compilers and platforms, while continuously refining the internal behavior of mocks. The changes documented here focus exclusively on small fixes and behind-the-scenes improvements that help prevent test fragility and misdiagnosis during test failures.

The updates primarily affect the handling of mock strictness (NiceMock, NaggyMock, StrictMock), better diagnostics on uninteresting and unexpected calls, and constructor support for mocks with non-default constructors and move-only types.

This page documents the fixes and tweaks that users benefit from by upgrading, helping users understand the improvements that affect daily test writing and debugging workflows.

---

## Key Bug Fixes and Improvements

### Improved Handling of Mock Strictness Wrappers

- **Consistent Behavior for Uninteresting Calls**: Fixes ensure that `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` behave exactly as documented when suppressing warnings, printing warnings, or treating uninteresting calls as errors respectively.
- **Support for Mocks with Non-default Constructors**: These wrappers now reliably support mock classes with constructors requiring one or multiple arguments—allowing users to continue using strictness wrappers seamlessly with complex mocks.
- **Move-only Types Compatibility**: Updates enable nice, naggy, and strict wrappers to work with mocks whose constructors take move-only parameters, enhancing flexibility for modern C++ idioms.

### Refined Diagnostics and Output

- **Warning Logs and Verbose Output Control**: Improved control over uninteresting call warnings, with options to finely tune verbose output (`--gmock_verbose=info|warning|error`) aiding developers in diagnosing mock invocations.
- **Uninteresting Call Diagnostics**: Stability enhancements ensure that deleting a mock inside an uninteresting call does not cause errant warnings or crashes.
- **Unexpected Call Failures**: Tests now consistently report failures on unexpected calls even when using different mock strictness wrappers, reducing confusion during test failures.

### Minor API and Usability Enhancements

- **Static Assertions Prevent Nested Wrappers**: Compile-time checks now prevent nested application of NiceMock, NaggyMock, and StrictMock wrappers on the same mock class hierarchy, preventing undefined behavior and user confusion.
- **Constructor Subclassing Behavior**: Strict enforcement that strictness wrappers do not add padding or change the memory layout of mock classes, ensuring lightweight and predictable mock behavior.
- **Leak Allowance and Verification**: Support improvements for explicitly allowing leaked mocks in tests to avoid false positives from improperly scoped mock lifetimes.

---

## Practical Impact for Users

These fixes and updates translate into:

- More **predictable test outcomes** when using strictness wrappers in complex test setups.
- Enhanced **developer experience** through clearer warnings and error messages when mocks are misused or expectations are violated.
- Increased **compatibility** with modern C++ features such as move semantics and complex constructor argument lists.
- Reduced **test flakiness** associated with lifecycle issues of mocks during uninteresting calls and deletion.

Users adopting these changes can expect their tests to be more maintainable, easier to diagnose when failing, and less prone to subtle runtime issues.

---

## Additional Resources and References

For users seeking a deeper understanding or further guidance related to the bug fixes and minor updates, consider the following documentation:

- [NiceMock, NaggyMock, StrictMock Controls](../api-reference/mock-behavior-extensions/nice-naggy-strict-mocks)
- [gMock Cookbook: The Nice, Strict, and Naggy Mocks](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mock Method Definition (`MOCK_METHOD`)](../api-reference/core-mocking-api/mock-method-definition)
- [Setting Expectations and Actions](../api-reference/core-mocking-api/setting-expectations-actions)
- [GoogleTest and GoogleMock Troubleshooting](../../getting-started/configuration-validation/troubleshooting-common-issues)
- For code-level insight, see [gmock-nice-strict.h](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h) and the test suite [gmock-nice-strict_test.cc](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc)

---

## Troubleshooting

### Common Scenarios

- **Uninteresting call warnings still appear despite using `NiceMock`**
  - Ensure that mocked methods are defined using `MOCK_METHOD` *directly* in the mock class; methods inherited from base classes may not be affected.
  - Check that the destructor of your mock class is virtual to avoid unexpected behavior.

- **Unexpected calls are not reported as failures in strict mocks**
  - Confirm the correct use of `EXPECT_CALL` and that no catch-all `EXPECT_CALL`(e.g., with `_`) supersedes the strict expectations.

- **Mock with move-only constructor arguments fails to compile with strictness wrappers**
  - Upgrade to the latest version supporting move-only constructors with `NiceMock`, `NaggyMock`, and `StrictMock`.

- **Warnings or runtime errors occurring when mocks delete themselves during callbacks**
  - Updated fixes stabilize these behaviors; review your call schedule and consider deferring mock destruction if possible.

---

## Best Practices

- Use **`NiceMock`** as the default wrapper for mocks to suppress noise from uninteresting calls and make tests less brittle.
- Reserve **`StrictMock`** for critical mocks where every unexpected call should fail the test immediately.
- Avoid nesting `NiceMock`, `NaggyMock`, or `StrictMock` wrappers; the API enforces this usage.
- When mocking classes with complex constructors or move-only parameters, explicitly use strictness wrappers that support these features.
- Adjust `--gmock_verbose` at runtime or during test execution to control output verbosity and better understand mock invocation sequences.

---

## Summary

This page compiles the ongoing bug fixes, maintenance, and minor improvements made in GoogleMock related to mock strictness wrappings, diagnostic output, and constructor compatibility without introducing new features. These changes underscore GoogleMock’s commitment to improving test reliability, developer clarity, and broad compatibility.

Upgrading to versions that include these updates ensures your test suite enjoys cleaner output, fewer false warnings, and safer use of mock wrappers in modern C++ contexts.

---