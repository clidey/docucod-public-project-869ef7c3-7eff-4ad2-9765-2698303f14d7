---
title: "Compatibility & Platform Support"
description: "Document changes in supported platforms, compilers, or dependencies. Key for users working across different environments or planning to upgrade toolchains alongside GoogleTest and GoogleMock."
---

# Compatibility & Platform Support

This document details recent updates to the supported platforms, compilers, dependencies, and environment features specifically affecting GoogleTest and GoogleMock. It is critical for users working across various operating systems or upgrading their toolchains alongside these testing frameworks to understand these compatibility considerations.

---

## Environment and Platform Macros

GoogleTest and GoogleMock rely on environment-describing macros to detect and adapt to different platforms and system features. These macros are automatically defined by the build environment but can also be overridden by users to address special cases.

### Platform Identification

GoogleTest defines macros for various operating systems and platforms such as:

- Windows variants (Desktop, Mobile, MinGW, Phone, WinRT)
- POSIX-based systems including Linux, Mac OS X, FreeBSD, Solaris, and others
- Embedded and specialized platforms such as Android, Native Client, and RTOS variants

This diverse platform set reflects GoogleTest's broad portability goals and ensures that test code behaves correctly across environments.

### Feature Indicators

Macros also indicate feature availability, including:

- Threading support (e.g., `GTEST_HAS_PTHREAD`)
- Exception handling support (`GTEST_HAS_EXCEPTIONS`)
- Regular expression support (POSIX, RE2, or simple regex implementations)
- Run-time type information (`GTEST_HAS_RTTI`)
- Wide string support (`GTEST_HAS_STD_WSTRING`)
- Stream redirection capabilities

These feature macros help users write portable tests that can conditionally compile or execute based on available functionality.

## Compiler and Language Standards Compatibility

GoogleTest mandates use of a C++17 compatible environment, clearly rejecting builds with earlier C++ standards. This ensures consistent use of modern language features and reliable behavior across compilers that meet this requirement.

The framework also detects compiler capabilities, such as exception handling, RTTI, and inclusion of feature-test macros, to adapt accordingly.

## Threading and Synchronization Support

Where available, GoogleTest enables multi-threading support using either the platform-native threading APIs or the pthreads library. This can be controlled by defining `GTEST_HAS_PTHREAD` explicitly.

Thread-local storage and synchronization primitives like mutexes and locks are implemented in a platform-specific manner to provide correct concurrent behavior when using GoogleTest's thread-safe features.

For platforms lacking such support, GoogleTest provides dummy implementations that disable multi-threading features but allow compilation.

## File System and I/O Functions

GoogleTest abstracts file system access and I/O calls to handle platform-specific differences. For example, file operations on Windows and POSIX systems have corresponding wrappers that normalize behavior and names of system calls.

This ensures that operations like directory management, file opening, and checking terminal output are portable and work as expected across environments.

## Building GoogleTest and GoogleMock

### C++ Standard and Compiler Flags

You must compile GoogleTest and GoogleMock with a C++17 standard or later. Compiler flags and warnings are managed carefully to ensure compatibility. For example:

- MSVC requires at least version 19.11 (Visual Studio 2017 Update 3) in GoogleTest, and 19.00 (VS 2015) for Google Mock.
- Clang and GCC versions supporting the necessary language features are targeted.
- Compiler-specific pragmas are used to suppress benign warnings in third-party or system headers.

### Pthreads and Threading Library Linking

When pthread support is enabled (usually on Linux or POSIX systems), the build system automatically links with pthread libraries if available and enabled, otherwise disables threading.

### Shared Libraries and DLLs

To build GoogleTest or GoogleMock as shared libraries (DLLs on Windows), define the `GTEST_CREATE_SHARED_LIBRARY` or `GTEST_LINKED_AS_SHARED_LIBRARY` macros to ensure proper exporting or importing of symbols.

### CMake Integration

GoogleTest provides CMake scripts that handle the detection of compilers and platform features, enabling seamless cross-platform builds.

## Practical Considerations for Users

- **Confirm your compiler supports C++17 or newer** before building GoogleTest or GoogleMock.
- Ensure your platform is among the officially supported operating systems or check for any known limitations.
- If your environment lacks pthreads or threading support, be aware that GoogleTest disables thread safety.
- In constrained or embedded environments without file system support, features like death tests or stream redirection will be limited or unavailable.
- For Windows builds, pay attention to runtime library linkage to avoid conflicts, especially around the dynamic vs static CRT.
- When planning to use GoogleTest or GoogleMock as shared libraries, explicitly define the related macros.

## Troubleshooting Compatibility Issues

- If GoogleTest fails to detect threading or exceptions properly, manually define the corresponding macros on the compiler command line.
- Unsupported or experimental platforms might require customization in `gtest-port.h` or build configurations.
- Consult the [Supported Platforms](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md) matrix and the Google [Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support) for detailed compiler and platform requirements.

## References and Further Reading

- [GoogleTest Internal Portability Layer (gtest-port.h)](https://github.com/google/googletest/blob/main/googletest/include/gtest/internal/gtest-port.h) — key source of platform and feature detection macros.
- [Supported Platforms Document](docs/platforms.md) — lists currently supported platforms and compilers.
- [Building with CMake](googletest/README.md#generic-build-instructions) — guidance on building and configuring GoogleTest and GoogleMock in a cross-platform manner.
- [GoogleTest Primer](docs/primer.md) — introduction including platform availability notes.
- [Supported Platforms and Environments Documentation](overview/workflow-integration/supported-platforms) — overview of OS and compiler support with practical tips.

---

*This page is part of the larger compatibility and platform support documentation to help users successfully build, integrate, and run GoogleTest and GoogleMock across diverse environments.*