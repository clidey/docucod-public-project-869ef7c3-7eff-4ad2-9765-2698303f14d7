---
title: "Deprecation & Removal Notices"
description: "Track functions, features, and workflows that are deprecated or scheduled for removal, along with their timelines and recommended alternatives. This page helps teams future-proof their codebases and plan for upcoming changes."
---

# Deprecation & Removal Notices

The **Deprecation & Removal Notices** page serves as a vital resource for developers and teams aiming to maintain resilient, future-proof codebases using GoogleMock. It tracks functions, features, and workflows that are deprecated or scheduled for removal, providing clear timelines and recommended alternatives to facilitate seamless planning and migration.

---

## 1. Understanding Deprecation in GoogleMock

Deprecation marks features or APIs that are still available but considered obsolete and planned for removal in future releases. This page helps you:

- Identify deprecated features early to avoid complications.
- Learn recommended alternative approaches to replace deprecated functionality.
- Understand timelines to schedule code updates effectively.

By proactively following these notices, teams can reduce technical debt and avoid last-minute surprises that disrupt development or CI/CD processes.

---

## 2. Featured Deprecations and Scheduled Removals

### Legacy `MOCK_METHODn` Macros

- **Status**: Deprecated since 2018, replaced by the new generic `MOCK_METHOD` macro.
- **Impact**: Old macros such as `MOCK_METHOD0`, `MOCK_CONST_METHOD1`, and their template and calltype variants continue to work but will be removed in a future major release.
- **Recommendation**: Migrate to the newer `MOCK_METHOD` syntax which enables greater flexibility and uniformity in mock method declarations.

<Callout>
For details on migrating away from legacy macros and the benefits of `MOCK_METHOD`, refer to the [`gMock Cookbook`](https://google.github.io/googletest/gmock_cook_book.html#Old-Style-MOCK_METHODn-Macros).
</Callout>

### Mock Method Declaration Access Levels

- **Previous Practice**: Users sometimes declared mock methods (`MOCK_METHOD`) in `protected` or `private` sections.
- **Current Requirement**: All `MOCK_METHOD` declarations **must** be in the `public` section of mock classes.
- **Reason**: This ensures that GoogleMockâ€™s expectation-setting macros (`EXPECT_CALL`, `ON_CALL`) can correctly access and manipulate the mock methods.

Failing to comply with this will lead to compilation errors or runtime issues.

---

## 3. Timeline and Versioning for Removals

GoogleMock uses semantic versioning in releases, and deprecation evolutions align with this strategy:

- **Deprecations announced in minor or patch releases.**
- **Removal scheduled for major releases only.**
- **Transition periods** allow users multiple releases to migrate.

Explicit schedules and version numbers for each removal are communicated on this page when available.

---

## 4. Planning Your Migration

### Step-by-Step Guidance

1. **Identify deprecated APIs and features in your code:** Monitor this page and release notes.
2. **Evaluate alternatives suggested by GoogleMock:** Typically new macros, interfaces, or patterns.
3. **Update your mocks and tests:** Prefer the new `MOCK_METHOD` macro; place mocks in `public` sections.
4. **Test thoroughly:** Use the enhanced verification and strictness features to ensure behavior remains consistent.
5. **Track progress and update documentation:** Maintain internal tracking to cover all deprecated usages.

<Tip>
It is best to migrate incrementally, starting with the most critical or frequently used mocks. Using CI pipelines with warnings enabled (`--gmock_verbose=info`) can help detect deprecated usage early.
</Tip>

---

## 5. Recommended Alternatives

### The Generic `MOCK_METHOD` Macro

Introduced in 2018, the modern `MOCK_METHOD` macro supersedes the older `MOCK_METHODn` family:

```cpp
class MyMock {
 public:
  MOCK_METHOD(ReturnType, MethodName, (Args...));
  MOCK_METHOD(ReturnType, MethodName, (Args...), (const, override));
};
```

- Supports method qualifiers like `const`, `override`, `noexcept`.
- Handles overloaded methods gracefully.
- Eliminates parsing issues caused by unprotected commas in template arguments.

Migrating to this macro simplifies declarations, improves compiler diagnostics, and ensures compatibility with future GoogleMock versions.

### Public Access for Mock Methods

Mock methods must reside in the public section to allow proper visibility by expectation mechanisms (`EXPECT_CALL`, `ON_CALL`). This means:

- Move existing `MOCK_METHOD` declarations out of `protected` or `private` into `public`.
- Access control logic should be managed in test design, not by restricting mock method visibility.

---

## 6. Troubleshooting Common Migration Issues

### Compilation Failures

- **Cause**: Declaring `MOCK_METHOD` in non-public sections.
- **Fix**: Move the declarations into the `public` area.

### Parsing Errors with Templates

- **Cause**: Unprotected commas in template parameters within `MOCK_METHOD`.
- **Fix**: Wrap complex types with extra parentheses or use `using` aliases.

Example:

```cpp
using BoolAndInt = std::pair<bool, int>;
MOCK_METHOD(BoolAndInt, GetPair, ());
```

### Unexpected Mock Behavior

- **Cause**: Combining legacy macros with new syntax or mixed visibility.
- **Fix**: Standardize on the modern `MOCK_METHOD` macro and public access.

<Tip>
Enable verbose mock output by running tests with `--gmock_verbose=info` to gain insights on mock calls and matcher interactions.
</Tip>

---

## 7. Additional Resources

- [gMock Cookbook - Old-Style MOCK_METHODn Macros](https://google.github.io/googletest/gmock_cook_book.html#Old-Style-MOCK_METHODn-Macros): Deep dive on migrating from old to new mock macros.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html#MOCK_METHOD): Official API reference on mock method declarations.
- [Strictness and Mock Call Control](https://google.github.io/googletest/api/gmock_cardinality.html#strictness-and-mock-call-controls): Managing mock object behavior and warnings.
- [Changelog: Breaking Changes & Migrations](../detailed-release-notes/breaking-changes.md): Timeline and instructions for breaking API changes.

---

## 8. Summary

This page is essential for developers maintaining GoogleMock-based test suites. It enables informed decision-making for updating deprecated patterns and ensures smooth transitions before deprecated features are removed. By keeping this information handy and integrating migration steps into your workflow, your tests will remain robust, maintainable, and compatible with the latest GoogleMock releases.

---