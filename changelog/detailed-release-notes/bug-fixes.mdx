---
title: "Bug Fixes & Resolved Issues"
description: "Lists addressed defects, stability patches, and security updates in each version to track risk mitigation and quality improvements for the overall project."
---

# Bug Fixes & Resolved Issues

This page provides a focused record of bug fixes, stability patches, and resolved defects that have been addressed in GoogleTest and GoogleMock over time. Tracking these changes helps users understand improvements, mitigated risks, and maintained quality in the framework's testing and mocking functionality.

## Overview

GoogleTest and GoogleMock maintain rigorous test suites to guarantee reliability and correctness. Throughout various releases, many bugs and issues have been identified and resolved, improving usability, compatibility, and test correctness. This changelog section documents the key defect fixes as they relate explicitly to the testing frameworkâ€™s core behaviors and mock interaction semantics.

---

## Recent Bug Fix Highlights

- **Fixes for Test Fixture and Suite Naming Collisions:** Addressed errors caused by using different test fixtures under the same test suite names, which prevented tests from running properly and caused unexpected runtime failures.

- **Corrections to Expectation Matching Logic:** Improvements on how `EXPECT_CALL` statements are matched in reverse order have enhanced reliability by ensuring the correct expectation is matched first, preventing spurious failures or warnings.

- **Memory Leak and Destruction Order Handling:** Resolved issues around destruction of mock objects and ensured that destructors (via `Die()` mock method calls) correctly report and verify expectations, avoiding hidden leaks and dangling references.

- **Thread Safety in Death Tests and Mock Calls:** Fixed race conditions and thread unsafety in death tests, especially with threaded environments. Introduced guidelines and safer defaults when running tests involving threads and process forking.

- **Handling of Virtual and Non-Virtual Methods:** Corrected cases where non-virtual methods were mocked directly without proper handling, improving support for high-performance dependency injection in mocks.

- **Compiler Warning and Compatibility Fixes:** Various fixes for compiler-specific warnings such as MSVC warnings related to const parameters and method overriding, along with improved flag handling in CMake for Windows and other platforms.

- **Uninteresting and Unexpected Calls Behavior:** Clarified and refined the strictness policies in mock objects for uninteresting (no expectation set) versus unexpected (expectations set but unmatched calls) calls to reduce noise and false positives in tests.

- **Improvements in Action Handling and Callbacks:** Bug fixes for actions related to invoking callable arguments, chained actions, and returning move-only types, enhancing mock method behavior customization.

- **Correction of Matchers and Assertion Messages:** Fixed issues that caused confusing or duplicate failure messages during assertion checks, enabling clearer diagnostic output on test failures.

---

## Notable Resolved Test Failures (from internal test suite logs)

From the integration and GoogleTest internal tests, the following failure classes have been addressed or documented:

- Mismatches in expected and actual values in `EXPECT_EQ` and related assertions.
- Failures due to mixing test macros (`TEST` vs `TEST_F`) in the same test suite.
- Issues with parameterized and typed tests when declarations or instantiations are missing or inconsistent.
- Failures in Scoped Trace tests due to incorrect trace attachments or expectations.
- Crashes or unexpected behavior in death test scenarios and nonfatal/fatal failure handling.
- Fixes in logging tests where interleaving logging and assertions caused unexpected failures.

Many of these bugs were caused by mishandling of expectation lifecycle and verification, test registration errors, or platform-specific pitfalls.

---

## Best Practices Reinforced by Bug Fixes

- **Always use virtual destructors in base classes intended for mocking.** This prevents leaks and unresolved destruction issues.

- **Set expectations before exercising the mocks.** Late or out of order expectations can cause undefined behaviors.

- **Avoid mixing `TEST_F` and `TEST` macros in the same test suite.** Consistency avoids runtime errors related to test suite fixture conflicts.

- **Use C++17 or higher compiler standards.** Modern features improve mock support and guard against known compiler bugs.

- **Use `NiceMock` and `StrictMock` wrappers thoughtfully.** Understanding their behavior regarding uninteresting calls prevents noisy logs or brittle tests.

- **Be explicit with sequence and order when relevant.** Use sequences or `.RetiresOnSaturation()` to avoid sticky expectations causing test failures.

- **Name test suites and test cases carefully.** Avoid trailing or leading underscores to prevent reserved name conflicts.

---

## Troubleshooting Common Issues

- If you encounter warnings about uninteresting calls, evaluate whether you have set necessary `EXPECT_CALL` or use `NiceMock` to suppress noise.

- For failures indicating mixing different fixtures in one test suite, ensure consistent use of one test fixture class per test suite.

- If `EXPECT_THROW` or death test macros behave unexpectedly, review that exceptions and signals are correctly handled and the test environment meets requirements.

- When working on Windows, verify your compiler settings and CMake flags to suppress spurious compile warnings related to exception handling and runtime libraries.

- For verbose call traces to debug mock call matching, use the `--gmock_verbose=info` flag to see detailed expectation matches.

---

## Known Resolutions from Code Internals

- Fixes in `googletest/cmake/internal_utils.cmake` ensure more precise compiler and linker flag configuration for building GoogleTest and GoogleMock, reducing build warnings and runtime issues.

- The internal porting utilities (`gtest-port.h`) now handle platform differences for threading, file system, and environment so that tests run more consistently across platforms.

- Enhancements to synchronization primitives and thread-unsafe features improve multi-threaded test reliability and fix deadlocks.

---

## Going Forward

Users should always upgrade to the latest stable GoogleTest releases to benefit from these fixes and quality improvements. Consult the following documentation for migration and best practices:

- [Migration Tips](https://github.com/google/googletest/blob/main/changelog/migration-and-upgrade-guides/migration-tips.mdx)
- [Breaking Changes](https://github.com/google/googletest/blob/main/changelog/migration-and-upgrade-guides/breaking-changes.mdx)
- [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md)
- [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md)

Taking advantage of these fixes enhances test stability and developer productivity.

---

For comprehensive details on resolved issues and bug fixes, check the complete test outputs and logs distributed with GoogleTest releases, as well as the project's issue tracker on GitHub.


---
### References
- [GoogleTest Official Repository](https://github.com/google/googletest)
- [Mocking Best Practices & Pitfalls (FAQ)](/faq/core-issues/mocking-questions)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [Migration Tips](changelog/migration-and-upgrade-guides/migration-tips.mdx)
- [Breaking Changes & Deprecations](changelog/migration-and-upgrade-guides/breaking-changes.mdx)