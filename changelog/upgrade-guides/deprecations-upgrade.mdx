---
title: "Deprecation Notices & Upgrade Recommendations"
description: "Official list of deprecated symbols, APIs, or build targets, including effective sunset timelines and recommended migration approaches to future-proof your usage."
---

# Deprecation Notices & Upgrade Recommendations

This page serves as the authoritative source for all deprecated symbols, APIs, and build targets within GoogleMock. It provides clear sunset timelines and pragmatic migration guidance, helping you keep your codebase future-proof and aligned with the latest framework standards.

---

## Understanding Deprecations

GoogleMock evolves continuously to improve usability, maintainability, and compatibility. As part of this process, certain APIs and macros become deprecated to pave the way for better alternatives. Using deprecated features may work today but can lead to compilation errors or unexpected behaviors in future releases.

This document helps you recognize deprecated elements promptly and guides you through migration paths with concrete examples, minimizing disruption.

---

## Key Deprecated Items and Recommended Replacements

### 1. Legacy `MOCK_METHODn` Macros

#### Overview
The older family of macros named `MOCK_METHODn` (e.g., `MOCK_METHOD1`, `MOCK_CONST_METHOD2_T`) are deprecated in favor of the unified and more expressive `MOCK_METHOD` macro.

#### Why Migrate?
- The generic `MOCK_METHOD` macro offers cleaner and more consistent syntax.
- It supports qualifiers such as `const`, `override`, `noexcept`, and reference qualifiers uniformly.
- It resolves complex method signatures with better reliability.

#### Migration Approach
Replace:
```cpp
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD1(Bar, int() const);
```

With:
```cpp
MOCK_METHOD(bool, Foo, (int), (override));
MOCK_METHOD(int, Bar, (), (const, override));
```

#### Additional Notes
Ensure that mocked methods are declared public in your mock class as before.

---

### 2. Mock Methods Accessibility Requirements

#### Overview
Mock methods must be declared in the `public` section of your mock classes, regardless of whether the corresponding methods in the base class are `public`, `protected`, or `private`.

#### Reason
This access level enables `ON_CALL` and `EXPECT_CALL` macros to function correctly, allowing external test code to configure behavior and expectations.

#### What Changed?
In prior versions, some internal implementations tolerated mocking with different access specifiers, but this practice is deprecated and may cause compilation failures or undefined behavior.

#### Migration Advice
Always declare mocked methods as public.

---

### 3. Strictness Control Wrappers: NiceMock, NaggyMock, and StrictMock

#### Deprecated Practices
Directly suppressing uninteresting call warnings or ignoring uninteresting calls by other means is discouraged since it leads to brittle or noisy tests.

#### Current Recommended Usage
Wrap your mock types in `NiceMock<T>` or `StrictMock<T>` to explicitly control how uninteresting calls are handled:
- `NiceMock<T>` suppresses warnings on unexpected calls but does not fail tests.
- `StrictMock<T>` elevates warnings to test failures, enforcing stricter validation.

#### Usage Example
```cpp
NiceMock<MyMock> mock;  // Suppresses warnings
StrictMock<MyMock> strict_mock;  // Fails on uninteresting calls
```

#### Migration Tips
Avoid mixing `NiceMock` or `StrictMock` with mock classes where mock methods are defined in a base class rather than directly. This pattern may not be fully supported.

---

### 4. Deprecation of Direct Mocking of Non-virtual Functions

Although not outright unsupported, mocking non-virtual functions directly via inheritance is discouraged due to limitations in C++ and expected instability.

#### Recommended Pattern
Leverage the high-performance dependency injection technique, where the mock class is unrelated but defines matching signatures using `MOCK_METHOD` without `override`.

Example:
```cpp
class RealClass {
 public:
  void Func();  // Non-virtual
};

class MockClass {
 public:
  MOCK_METHOD(void, Func, (), ());  // No override
};
```

Use templates or interfaces to switch between real and mock types at compile time.

---

### 5. Decommissioning Deprecated Macros for Flags

Older flag macros specific to GoogleMock internal ports, such as `GMOCK_DEFINE_bool_` without Abseil flags support, are phased out.

#### Current Practice
Use Abseil flags integration exclusively where available, as managed in `gmock-port.h`.

If Abseil flags are not enabled, direct variable definitions remain but may be removed eventually.

---

## Sunset Timeline and Migration Planning

- **Effective Immediately (Since v1.10.0+):** Begin migrating from `MOCK_METHODn` macros to `MOCK_METHOD`.
- **Next Major Release:** Remove legacy `MOCK_METHODn` macros and non-public mock method accessibility.
- **Future Releases:** Strict enforcement of wrapper class usage (`NiceMock`, `StrictMock`) for mock strictness control.

It's crucial to audit your codebase regularly, replacing deprecated patterns ahead of these deadlines to maintain compatibility.

---

## Practical Migration Workflow

### Step 1: Audit Your Mock Classes
Search for usage of deprecated `MOCK_METHODn` macros or mock methods declared outside the public section.

### Step 2: Update Mock Method Declarations
Convert `MOCK_METHODn` macros to `MOCK_METHOD`:
```cpp
// From old
MOCK_METHOD2(Foo, bool(int, const std::string&));

// To new
MOCK_METHOD(bool, Foo, (int, const std::string&), (override));
```
Ensure mocked methods are public.

### Step 3: Replace Strictness Control Calls
If you rely on flags to suppress warnings or change strictness, refactor your tests to use `NiceMock` or `StrictMock` wrappers explicitly.

### Step 4: Verify Test Behavior
Run tests with `--gmock_verbose=info` to monitor mock interactions and catch any mismatches early.

### Step 5: Consult the Official gMock Guides
Leverage these key documents to understand recommended usage:
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Mocking Core API Reference](../api-reference/core-apis/mocking-core-api.md)
- [Legacy gMock FAQ](../docs/gmock_faq.md)

---

## Common Pitfalls and Troubleshooting

<AccordionGroup title="Typical Migration Challenges">
<Accordion title="Compilation Errors After Replacing MOCK_METHODn">
Switching from `MOCK_METHODn` to `MOCK_METHOD` requires adjusting the syntax carefully, especially wrapping argument lists in parentheses and specifying qualifiers like `(override)` explicitly. Failure to do so will cause compilation failures.
</Accordion>
<Accordion title="Unintended Access Errors on Mock Methods">
Declaring mock methods under `private` or `protected` sections triggers linker or access errors at runtime or during expectation setup. Always declare mocked methods as `public`.
</Accordion>
<Accordion title="Warnings About Uninteresting Calls After Changes">
If you see warnings after migration, consider using `NiceMock` to suppress irrelevant warnings or add explicit expectations for catch-all cases to control expected behavior.
</Accordion>
</AccordionGroup>

---

## Resources and Further Reading

- [API Reference: Mocking Core API](../api-reference/core-apis/mocking-core-api.md) 
- [gMock Cookbook with Recipes and Examples](https://google.github.io/googletest/gmock_cook_book.html)
- [Legacy gMock FAQ](../docs/gmock_faq.md)
- [Strictness Management Guide (Nice, Naggy, Strict)](/guides/mocking-advanced-testing/strictness-niceness)
- [Configuring Expectations and Actions Guide](/guides/mocking-advanced-testing/configuring-expectations-actions)

---

## Feedback and Community Engagement

If you encounter difficulties migrating or have use cases requiring legacy features, report issues on the [GoogleTest GitHub repository](https://github.com/google/googletest/issues) or engage via Google Testing forums. Staying up-to-date via official release notes and changelogs will also prevent surprises.

---

Thank you for keeping your tests healthy and future-proof by following these deprecation notices and upgrade recommendations.