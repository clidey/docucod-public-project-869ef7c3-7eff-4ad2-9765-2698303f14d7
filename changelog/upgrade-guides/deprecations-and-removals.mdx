---
title: "Deprecations & Removals"
description: "Lists features, APIs, or behaviors that have been deprecated, flagged for future removal, or recently eliminated from the framework. Serves to warn users of upcoming changes and encourage timely migration."
---

# Deprecations & Removals

This page serves as a dedicated resource to inform users about deprecated features, APIs, behaviors flagged for removal, and those recently eliminated from the GoogleTest and GoogleMock frameworks. Its primary role is to provide clear, actionable warnings and guidance that help users transition their codebases seamlessly and avoid unexpected breaks.

---

## Understanding Deprecations and Removals

As GoogleTest and GoogleMock evolve, some features become outdated or replaced by improved alternatives. This page specifically lists those elements that:

- Are **deprecated**, meaning they remain available but are discouraged and planned for future removal.
- Have been **flagged for removal** in upcoming releases, urging users to migrate.
- Have been **recently removed**, potentially causing build or runtime failures if still in use.

Providing this information helps you anticipate and prepare for changes before upgrading your framework version.

## How to Use This Page

- **Review regularly:** Before upgrading GoogleTest or GoogleMock, consult this page to identify deprecated usages.
- **Plan migrations early:** For any deprecated or soon-to-be-removed feature, update your code to avoid disruption.
- **Understand reasoning:** Often, deprecations occur to improve API clarity, enhance performance, or increase safety.

## Key Deprecated APIs and Features

### Migration from Old MOCK_METHODn Macros to New MOCK_METHOD

Previously, GoogleMock used a family of macros `MOCK_METHODn` for mocking methods with `n` arguments. As of recent updates, these macros are deprecated in favor of a unified and more flexible `MOCK_METHOD` macro.

**What changed?**
- The new syntax is:

```cpp
MOCK_METHOD(ReturnType, MethodName, (Args...), (Qualifiers));
```

- This replaces macros like `MOCK_METHOD1`, `MOCK_CONST_METHOD2`, etc.

**Why migrate?**
- The modern `MOCK_METHOD` macro simplifies mock declarations, supports move-only types, and better handles qualifiers such as `const` and `noexcept`.
- Usage of old `MOCK_METHODn` macros may cause compiler warnings or errors in future releases.

**Example Transition:**

Old (deprecated):

```cpp
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD2(Bar, void(int, double));
```

New (recommended):

```cpp
MOCK_METHOD(bool, Foo, (int));
MOCK_METHOD(void, Bar, (int, double), (const));
```

### Usage of NiceMock, NaggyMock, and StrictMock Wrappers

The classes `NiceMock`, `NaggyMock`, and `StrictMock` aid in controlling the behavior of uninteresting calls to mocks.

**Current status:**
- These wrappers are stable and actively recommended for managing mock strictness.
- There are no deprecations related here, but be aware that nesting these wrappers is not supported.

### Deprecation of Legacy Flag Parsing APIs

GoogleMock's initialization and flag parsing have evolved to use improved mechanisms for command-line flag processing through Abseil flags or internal flag handling.

**Action:**
- Use `::testing::InitGoogleMock(int* argc, char** argv)` as the supported entry point.
- Avoid outdated custom flag parsing methods that might be removed soon.

## Deprecated Behavior Details

### Uninteresting Mock Call Warnings and Their Control

By default, uninteresting mock calls (calls to mock methods without explicit expectations) generate warnings. This behavior is controlled by the above-mentioned wrappers.

**Important:**
- Explicit use of `NiceMock` suppresses these warnings, while `StrictMock` treats them as errors.
- Delegating mock default behaviors should be carefully managed to avoid unintended deprecations or warnings.

### C++ Language Standard Requirement

GoogleTest and GoogleMock now require C++17 or later to compile.

**What to do:**
- Ensure your build environment and compiler support C++17.
- Older language standard support has been deprecated and removed.

## Removed Features

While not an exhaustive list, the following notable removals warrant immediate attention when upgrading:

- Completely deprecated `MOCK_METHODn` macros are removed.
- Internally used macros and APIs that do not end with an underscore (`_`) are subject to removal; such usage outside the framework is not supported.
- Removal of support for older, unsupported platforms as defined by their platform-detection macros.

## Troubleshooting Deprecated and Removed Features

- **Compiler warnings on macro use:** Replace deprecated macros with their modern equivalents.
- **Test code breaks on upgrade:** Check this page first for any deprecated APIs you use.
- **Unrecognized flags during initialization:** Use only the documented `InitGoogleMock` methods.
- **Unexpected mock behavior:** Confirm whether you are using `NiceMock`, `NaggyMock`, or `StrictMock` as intended to control mock warnings.

## Best Practices for Migration

- Keep an eye on this page before every major version upgrade.
- Replace deprecated macros and APIs promptly.
- Use the unified `MOCK_METHOD` macro consistently.
- Adopt `NiceMock` or `StrictMock` wrappers to manage mock strictness effectively.
- Upgrade your compiler and build configuration to target C++17 or later.

## Where to Get More Help

- Consult the [Mocking Reference](../../api-reference/mocking-api/mock-class-creation) for up-to-date mock class and method creation syntax.
- Review the [Mock Behavior Customization](../../api-reference/mocking-api/mock-behavior-customization) to handle warnings and errors on uninteresting calls.
- Visit the [Breaking Changes](../changelog/upgrade-guides/breaking-changes) page for comprehensive migration instructions.
- Use the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for practical migration tips and sample code.

---

<Check>
âœ… To ensure smooth upgrades and maintain test stability, always verify your mock declarations align with the current `MOCK_METHOD` syntax and manage expectations using approved wrappers.
</Check>

<Note>
Users relying on deprecated features should plan incremental refactoring, starting with macro updates and verifying test pass rates to minimize regressions.
</Note>

---

## Summary

As GoogleTest and GoogleMock continue to advance, this page provides a vital checkpoint listing deprecated and removed APIs, behaviors, and practices. Early awareness and adherence to the guidance here guarantees reliable and maintainable testing infrastructure.

For migration and detailed usage, refer to the provided cross-links and explore the comprehensive mocking recipe guides.

---

### Source

[GoogleTest and GoogleMock GitHub Repository](https://github.com/google/googletest)

[Breaking Changes Documentation](../changelog/upgrade-guides/breaking-changes)

[gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)

[Mocking Reference](../../api-reference/mocking-api/mock-class-creation)

[Mock Behavior Customization](../../api-reference/mocking-api/mock-behavior-customization)

---

