---
title: "Deprecation Notices"
description: "Lists deprecated features, APIs, and compatibility layers, along with recommended alternatives and projected removal versions. Empowers users to proactively update their code and stay on supported paths."
---

# Deprecation Notices

This page provides a comprehensive list of **deprecated features, APIs, and compatibility layers** within GoogleTest and GoogleMock, along with **recommended alternatives** and the **expected timelines for removal**. By reviewing these deprecations proactively, developers can update their codebases to ensure compatibility with future releases and maintain clean, modern test suites.

---

## Overview of Deprecated Elements

The deprecation notices here address areas such as old macro forms, legacy compatibility layers, obsolete infrastructure, and APIs superseded by improved patterns and conventions. Each deprecated item is clearly described, along with guidance on how to migrate to supported alternatives.

### Key Deprecation Categories

- **Legacy Mock Method Macros**: The older set of `MOCK_METHODn` macros, formerly used to define mock methods, are deprecated in favor of the more versatile, unified `MOCK_METHOD` macro. Transitioning to the new macro improves code clarity and flexibility, especially when dealing with qualifiers and move-only types.

- **Deprecated Mock Class Wrappers**: Some outdated mock class wrappers or compatibility wrappers have been phased out or replaced by clearer behaviors such as `NiceMock`, `StrictMock`, and `NaggyMock` templates that control mock strictness levels and warnings.

- **Obsolete Action Macros and Interfaces**: Legacy `ACTION` and `ACTION_P` macros, while still supported, are superseded by modern action templates and callable-based actions that leverage C++11 lambdas and function objects for richer expression and type safety.

- **Deprecated Matcher Constructs**: Some older matcher forms and internal utilities have been replaced by the generation-friendly `MATCHER` and `MATCHER_P` macros, allowing for cleaner custom matcher definitions with better error reporting.

### Recommended Alternatives

For each deprecated element, users are encouraged to adopt newer APIs:

- Use **`MOCK_METHOD`** instead of the `MOCK_METHODn` family.
- Prefer **`NiceMock`**, **`StrictMock`**, or **`NaggyMock`** to manage mock object strictness.
- Adopt **lambda expressions** or functors for user-defined actions instead of legacy macros.
- Leverage **`MATCHER` family macros** for crafting custom matchers with rich message support.

<br/>

## Migration Guidelines

To update your tests and mocks from deprecated features:

1. **Identify Deprecated Usages**
   - Review your code for use of `MOCK_METHODn`, legacy action macros, and older mock wrappers.
   - Check for deprecated internal flags or compatibility macros if any.

2. **Update Mock Methods**
   - Replace old `MOCK_METHODn` calls with the unified `MOCK_METHOD` macro by adjusting the signature accordingly.

3. **Adjust Mock Object Declarations**
   - Wrap mocks with `NiceMock<T>`, `StrictMock<T>`, or `NaggyMock<T>` as needed.

4. **Refactor Custom Actions and Matchers**
   - Rewrite action definitions using lambdas, functors, or modern `ACTION_TEMPLATE` constructs.
   - Replace custom matcher classes or legacy macro usages with `MATCHER`/`MATCHER_P` macros for simplicity and better diagnostics.

5. **Test Thoroughly**
   - Run tests with `--gmock_verbose=info` to inspect matching and expectations.
   - Fix any warnings or errors from unexpected calls introduced by stricter mock behavior.

<Tip>
Migrating away from deprecated features ahead of their removal ensures smoother upgrades and better long-term maintainability of your test suites.
</Tip>

---

## Deprecated Mock Method Macros

Previously, GoogleMock provided a family of macros for mocking methods by argument count, such as `MOCK_METHOD1`, `MOCK_CONST_METHOD1`, and variations with call types or templates. These macros are now deprecated and replaced by the unified `MOCK_METHOD` macro.

### Why Migrate to `MOCK_METHOD`?

- **Unified Syntax**: Single macro handles const, noexcept, call types, and reference qualifiers.
- **Better Parsing**: New macro handles complex argument types requiring parentheses more gracefully.
- **Improved Compatibility** with move-only types and modern C++ features.

### Migration Example

**Old Macro Usage:**
```cpp
class MockFoo {
 public:
  MOCK_METHOD1(Foo, bool(int));
  MOCK_CONST_METHOD2(Bar, void(int, const std::string&));
  MOCK_METHOD1_WITH_CALLTYPE(STDMETHODCALLTYPE, Baz, void(HRESULT));
};
```

**Updated Macro Usage:**
```cpp
class MockFoo {
 public:
  MOCK_METHOD(bool, Foo, (int), (override));
  MOCK_METHOD(void, Bar, (int, const std::string&), (const, override));
  MOCK_METHOD(void, Baz, (HRESULT), (Calltype(STDMETHODCALLTYPE), override));
};
```


---

## Deprecated Mock Class Wrappers

GoogleMockâ€™s current design for handling uninteresting and unexpected calls favors `NiceMock`, `NaggyMock`, and `StrictMock` wrappers.

**Deprecated:** Older wrappers or naming schemes for managing mock behavior that preceded this clear distinction are removed or discouraged.

**Use Instead:**
- `NiceMock<T>` to silence warnings on uninteresting calls.
- `NaggyMock<T>` for default behavior with warnings.
- `StrictMock<T>` to enforce failures on unexpected calls.

These wrappers automatically inherit constructors from `T` and work seamlessly with mocks defined via `MOCK_METHOD`.

---

## Deprecated Action Macros and Interfaces

Legacy `ACTION` and `ACTION_P` macros for defining actions are still available but have been supplanted by more powerful and flexible approaches leveraging:

- **C++11 Lambdas and Functors**: More expressive, easier to read, and better type-checked.
- **`ACTION_TEMPLATE`**: For complex, parameterized custom actions with explicit template parameters.

### Migration Example

**Old Style Action:**
```cpp
ACTION(IncrementArg1) { return ++(*arg1); }
...
EXPECT_CALL(mock, Foo).WillOnce(IncrementArg1());
```

**Modern Replacement:**
```cpp
EXPECT_CALL(mock, Foo).WillOnce([](int* ptr) {
  return ++(*ptr);
});
```

Use lambdas especially where actions need to capture variables or express small callables inline.

---

## Deprecated Matcher Constructs

Older matcher definitions requiring manual `MatcherInterface` implementation are replaced by the succinct `MATCHER`, `MATCHER_P`, and related macros.

### Advantages of Modern Matcher Macros

- Cleaner syntax to define matchers.
- Built-in support for custom failure descriptions.
- Ability to embed parameter values in error messages.
- Polymorphic matching across types without boilerplate.

### Migration Example

**Legacy Matcher:**
```cpp
class DivisibleBy7Matcher : public MatcherInterface<int> {
  bool MatchAndExplain(int n, std::ostream* os) const override {
    return (n % 7) == 0;
  }
  void DescribeTo(std::ostream* os) const override {
    *os << "is divisible by 7";
  }
  ...
};

Matcher<int> DivisibleBy7() {
  return MakeMatcher(new DivisibleBy7Matcher());
}
```

**Modern Matcher Macro:**
```cpp
MATCHER(IsDivisibleBy7, "") { return (arg % 7) == 0; }

// Usage:
EXPECT_CALL(mock, Foo(IsDivisibleBy7()));
```

This simpler syntax is recommended for all new custom matcher implementations.

---

## Deprecated Compatibility Layers

Some internal compatibility macros and shims that helped GoogleTest/GoogleMock adapt to older platforms or compilers have been removed. Users targeting modern environments should ensure compiler flags and builds meet minimum requirements (such as C++17 and pthread availability).

Refer to the **System Requirements** and **Configuring GoogleTest** pages for up-to-date guidance.

---

## Removal Timeline

Google announces deprecation in advance, with at least one minor release cycle before removal. Users should monitor the official release notes and upgrade guides to stay current.

---

## Additional Advice and Best Practices

- Always refer to the latest GoogleTest and GoogleMock documentation for updated usage patterns.
- Use `NiceMock`, `StrictMock`, and `NaggyMock` to control mock strictness explicitly.
- Prefer `MOCK_METHOD` for declaring mock methods, avoid legacy macros.
- Use lambdas and `MATCHER` macros to improve test clarity and maintainability.
- Consult migration guides and changelogs regularly to preempt breaking changes.

---

## Related Documentation

- [Setting Mock Expectations](../api-reference/mocking-apis/expect-call-and-on-call)
- [Mock Method Definition](../api-reference/mocking-apis/mock-methods)
- [Using Mocks: Patterns and Best Practices](../guides/mocking-and-advanced-techniques/using-mocks)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [Breaking Changes and Migration](../changelog/upgrade-migration-notices/breaking-changes)

---

For detailed migration instructions and practical examples, refer to the [Breaking Changes and Migration](../changelog/upgrade-migration-notices/breaking-changes) page.

---

_Last updated with guidance from GoogleTest v1.17.0 and associated documentation._