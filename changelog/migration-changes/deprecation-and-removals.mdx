---
title: "Deprecations and Feature Removals"
description: "Lists deprecated or soon-to-be-removed features, details any transitional workarounds, and links to equivalent or replacement APIs. Keeps users informed to avoid technical debt and plan for future-proofing their tests."
---

# Deprecations and Feature Removals

This page keeps you informed of features and APIs in GoogleTest and GoogleMock that are deprecated, planned for removal, or have already been removed. It presents transitional workarounds where relevant and points you to equivalent or replacement mechanisms to help future-proof your tests and avoid accumulating technical debt.

---

## Overview of Deprecated Features

Over time, GoogleTest and GoogleMock evolve to improve usability, maintainability, and compatibility. As part of ongoing maintenance, some features become obsolete and are marked deprecated before eventual removal. Keeping up with these changes helps you:

- Maintain compatibility with the latest versions of the framework.
- Reduce maintenance overhead caused by obsolete test patterns.
- Adopt improved APIs providing clearer intent and better integration.

We recommend reviewing this page when upgrading your GoogleTest/GoogleMock dependency or refactoring tests.

---

## Common Deprecations in GoogleMock

### 1. Legacy `MOCK_METHODn` Macros

Previously, mock methods were created using a set of macros like `MOCK_METHOD0`, `MOCK_CONST_METHOD1`, etc. These macros are now deprecated in favor of the unified `MOCK_METHOD` macro, which offers clearer syntax and better support for qualifiers.

**Transitional Steps:**

Replace old macros:

```cpp
// Old-style (deprecated)
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD0(Bar, int());

// New-style preferred usage
MOCK_METHOD(bool, Foo, (int), (override));
MOCK_METHOD(int, Bar, (), (const, override));
```

This change clarifies method signatures and qualifiers.

---

### 2. Manual Mocks vs. AUTOMOCK

Manually written mock implementations have been largely superseded by auto-generated mocks with `MOCK_METHOD`. Since the mocking macros handle tedious boilerplate and improve reliability, manual mocks may be deprecated.

**Recommendation:** Prefer defining mock classes using `MOCK_METHOD` macros. For legacy codebases, incrementally migrate manual mocks to use `MOCK_METHOD`.

---

### 3. Mocking Non-Virtual Methods Using Templates

While gMock supports mocking non-virtual methods using templates in some scenarios, this pattern is advanced and can be error-prone. No plans exist to remove this feature yet, but users are encouraged to prefer mocking via virtual interfaces.

See the [MockingNonVirtualMethods](docs/gmock_cook_book.md#MockingNonVirtualMethods) recipe for best practices and alternatives.

---

### 4. Deprecated Default Actions and Flag APIs

Some older internal macros and flag definitions have been improved or replaced by more consistent implementations, especially in the `gmock-port.h` header and extensions under `custom/` directory. If you manage custom configurations, please refer to the latest flag declaration macros:

- `GMOCK_DECLARE_bool_()`
- `GMOCK_DEFINE_bool_()`
- `GMOCK_FLAG_GET()` and `GMOCK_FLAG_SET()`

Avoid using older internal macros directly; prefer documented public API macros.

---

## Removal of Old Compilers and Language Versions

Support for legacy compilers and older C++ standards has been phased out over time. GoogleMock now requires C++11 (or later) support. Attempts to build on compilers without adequate C++11 support will be rejected.

**Action:** Update your compiler to at least Visual C++ 2015 or an equivalent modern compiler.

---

## Workarounds for Removed Features

If you rely on features that are deprecated or removed, you may use these general workarounds:

- **Legacy `MOCK_METHODn` Macros:** Replace with `MOCK_METHOD` macro using up-to-date syntax in public `mock` classes.
- **Manual Mock Migration:** Gradually refactor manual mocks into `MOCK_METHOD` definitions.
- **Overloaded Method Disambiguation:** Use `Const(mock_obj)` or `TypedEq<Type>()` matchers to select among overloads instead of old techniques.

Refer to respective [Mocking Reference](docs/reference/mocking.md) and [gMock Cookbook](docs/gmock_cook_book.md) for recipes on replacements.

---

## Links to Alternatives and Replacement APIs

- **MOCK_METHOD Macro:** The unified and recommended way for defining mock methods. See [Defining Mock Methods (MOCK_METHOD & Macros)](/api-reference/core-mocking-apis/mock-method-macros).
- **EXPECT_CALL and ON_CALL Macros:** Preferred APIs for setting expectations and default behaviors on mocks. See [Declaring Expectations (EXPECT_CALL & ON_CALL)](/api-reference/core-mocking-apis/expectations-on-call).
- **NiceMock, NaggyMock, StrictMock:** Control mock object behavior regarding uninteresting calls. See [Mock Object Behaviors](/api-reference/core-mocking-apis/mock-object-behaviors).
- **Custom Matchers and Actions:** For extending gMock’s capabilities instead of workarounds relying on deprecated code. See [Creating Custom Matchers and Actions](/guides/advanced-testing-patterns/custom-matchers-actions).

---

## Summary

Keeping your test code aligned with the latest stable GoogleMock APIs and avoiding deprecated or removed features is essential for sustainable, maintainable tests. Always prefer the consolidated and more expressive macros and avoid legacy alternatives that complicate maintenance.

For full migration guides and detailed changelogs, always monitor the official release notes and *Breaking Changes* documentation.

---

## Additional Resources

- [Mocking Reference](docs/reference/mocking.md)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [Breaking Changes and Migration Guides](changelog/migration-changes/breaking-changes.md)
- [MOCK_METHOD Macro Guide](api-reference/core-mocking-apis/mock-method-macros.md)
- [EXPECT_CALL & ON_CALL Usage](api-reference/core-mocking-apis/expectations-on-call.md)

---

<Tip>
Keep your GoogleMock usage current by regularly checking this document with every upgrade to avoid technical debt.
</Tip>

<Warning>
Do not continue using deprecated macros like `MOCK_METHODn` in new code—they are removed in recent versions and will break your builds.
</Warning>

<Note>
Always mock virtual methods declared in interfaces or base classes. Avoid mocking non-virtual methods unless absolutely necessary, as this complicates your test design.
</Note>

---

###### Last Updated: 2024-06
