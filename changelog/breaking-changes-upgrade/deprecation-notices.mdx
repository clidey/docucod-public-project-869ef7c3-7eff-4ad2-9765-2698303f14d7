---
title: "Deprecation Notices"
description: "Lists features, macros, or APIs that are deprecated, the timeline for their removal, and recommended alternatives. This page helps developers proactively adapt their codebases before removals occur."
---

# Deprecation Notices

## Overview

This page details features, macros, and APIs within GoogleTest and GoogleMock that are deprecated and scheduled for removal. Developers are advised to proactively adapt their codebases to avoid disruption from future removals. Alongside each deprecated item, this documentation provides timelines for removal and recommended alternatives to facilitate smooth migration.

---

## Why Pay Attention to Deprecations?

As GoogleTest evolves, certain constructs become obsolete, replaced by improved patterns or removed due to architectural changes. Using deprecated features may lead to build warnings or errors in future versions. Adapting early ensures your test code remains compatible, maintainable, and benefits from the latest framework enhancements.

---

## Key Areas of Deprecation

### 1. Legacy Mocking Macros

- **Deprecated:** The family of `MOCK_METHODn` macros (e.g., `MOCK_METHOD1`, `MOCK_CONST_METHOD1_T`, `MOCK_METHOD1_WITH_CALLTYPE`) used for defining mock methods.

- **Removal Timeline:** Planned for removal in an upcoming major or minor release. Users should migrate as soon as possible.

- **Recommended Alternative:** Use the unified `MOCK_METHOD` macro:

  ```cpp
  // Old style
  MOCK_METHOD1(Foo, bool(int));

  // New recommended style
  MOCK_METHOD(bool, Foo, (int));

  // For const methods
  MOCK_METHOD(bool, Foo, (int), (const));
  ```

  This modern macro supports qualifiers and is more robust, enabling consistent mocking of const, noexcept, and other special methods.

### 2. Deprecated Macros and Namespaces

- **Deprecated:** Use of older names or macros without explicit namespaces (e.g., older internal macros without the `GTEST_` or `GMOCK_` prefix).

- **Alternative:** Use official public macros and symbols as documented, such as `EXPECT_CALL`, `MOCK_METHOD` (in `testing` namespace), and avoid using internal or underscore-suffixed macros.

### 3. Deprecated Flag Usage

- Users should avoid referencing deprecated flag macros directly. Instead, use the documented flags with the appropriate prefix and updated macros.

- Flags exposed through Abseil integration are preferred, including: `GMOCK_DEFINE_bool_()`, `GMOCK_DEFINE_int32_()`, and related Abseil flag macros.

### 4. Test Suite API

- Legacy test suite APIs, such as `TestCase` (deprecated in favor of `TestSuite`), should be updated to the current API usage.

- Legacy API removal may require updating test registration and suite setup/teardown methods.

---

## Recommendations for Migration

To ensure your code remains stable and compatible:

- **Replace `MOCK_METHODn` Macros:** Transition all legacy mock method macros to the single modern `MOCK_METHOD` macro, preserving any qualifiers needed (`const`, `override`, `noexcept`, `Calltype`, or `ref`).

- **Use Public APIs Only:** Avoid internal or underscore-suffix APIs that are implementation details and subject to change without notice.

- **Update Test Suite Code:** Shift from any legacy test suite constructs toward the recommended modern `TestSuite` APIs and conventions.

- **Flag Usage:** When configuring or querying flags, use the current documented flag macros and avoid deprecated direct flag variable usage.

- **Consult Upgrade & Migration Guides:** See [Upgrade & Migration Guides](/changelog/breaking-changes-upgrade/upgrade-migration-guides) for step-by-step instructions and best practices.

---

## Practical Example: Migrating `MOCK_METHODn` to `MOCK_METHOD`

```cpp
// Before (legacy mock macro)
class MockFoo : public Foo {
 public:
  MOCK_METHOD1(DoSomething, bool(int));
  MOCK_CONST_METHOD1(GetValue, int() const);
};

// After (modern, unified macro)
class MockFoo : public Foo {
 public:
  MOCK_METHOD(bool, DoSomething, (int), (override));
  MOCK_METHOD(int, GetValue, (), (const, override));
};
```

Tips:
- Wrap complex return or argument types with additional parentheses to avoid macro parsing issues.
- Always place `MOCK_METHOD` macros in the public section, regardless of original method access.

---

## Troubleshooting Deprecation Issues

If after migrating:

- You encounter compiler warnings about deprecated usage, review your mocks and test definitions against the modern macro patterns.
- Broken builds involving flags or macros may require investigating imports and replacing internal macro usage with documented public APIs.
- If unsure about migration impact, consult [Breaking Changes](/changelog/breaking-changes-upgrade/breaking-changes) for detailed descriptions and examples.

---

## Resources for Next Steps

- [Upgrade & Migration Guides](/changelog/breaking-changes-upgrade/upgrade-migration-guides) — Step-by-step transition instructions
- [Breaking Changes](/changelog/breaking-changes-upgrade/breaking-changes) — Details of breaking changes impacting tests
- [Defining and Using Mocks](/api-reference/mocking-framework-apis/defining-mocks) — Updated modern mocking guidance
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Practical mocking recipes
- [GoogleTest Primer](overview/introduction-overview/product-welcome) — Foundational understanding

---

## Summary

Proactive migration from deprecated macros, APIs, and flag usage in GoogleTest and GoogleMock is essential to maintain compatibility with future releases. The most critical change is moving from legacy `MOCK_METHODn` macros to the unified `MOCK_METHOD` macro for defining mock methods. Using supported public APIs and following documented upgrade paths ensures your tests remain stable, maintainable, and take advantage of ongoing framework improvements.

---

<Tip>
Always test your entire suite after migration to catch any subtle issues. Incremental migration with some automated refactoring tools can help.
</Tip>

<Warning>
Do not rely on internal or underscore-suffix macros; these are for GoogleTest's internal use only and subject to unexpected changes.
</Warning>
