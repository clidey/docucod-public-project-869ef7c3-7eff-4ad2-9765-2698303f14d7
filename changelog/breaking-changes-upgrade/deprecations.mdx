---
title: "Deprecations"
description: "Lists deprecated features or APIs, clarifying their continued support period and recommended alternatives. Helps users future-proof their test codebases."
---

# Deprecations

This page details GoogleTest and GoogleMock deprecated features and APIs, clarifying their continued support duration and recommending alternatives. It guides you in identifying outdated constructs in your test codebase, understanding the transition timelines, and adopting modern, supported practices to future-proof your tests.

---

## 1. Overview of Deprecated Features

GoogleTest has evolved with improvements in API design and usability. To maintain backward compatibility while encouraging best practices, certain features remain supported but are deprecated and will be removed in future releases.

This document helps you:
- Identify deprecated APIs within the GoogleMock mocking framework.
- Understand the differences between legacy and current mocking macros.
- Learn recommended migration paths to the newer APIs.

---

## 2. Legacy MOCK_METHODn Macros

Before 2018, mocked methods were declared using a family of macros named `MOCK_METHODn` or `MOCK_CONST_METHODn`, where `n` represents the number of arguments.

```cpp
// Old style macro examples
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD2(IsEqual, bool(const T&, const T&));
```

### Differences from Modern `MOCK_METHOD`
- The old macros combined method name and signature in a single argument.
- Required specifying the argument count explicitly in the macro name.
- Const methods required special `MOCK_CONST_METHODn` variants.

### Current Recommendation

Transition your mocks to the modern `MOCK_METHOD` macro, which provides:
- Clear separation of return type, method name, and argument list.
- Flexible qualifiers such as `const`, `override`, `noexcept` via an optional fourth parameter.
- Improved handling of template classes and overloaded methods.

### Migration Example

| Old Style | New Style |
|-----------|------------|
| `MOCK_METHOD1(Foo, bool(int))` | `MOCK_METHOD(bool, Foo, (int))` |
| `MOCK_CONST_METHOD1(Foo, bool(int))` | `MOCK_METHOD(bool, Foo, (int), (const))` |
| `MOCK_METHOD1_T(Foo, bool(int))` | `MOCK_METHOD(bool, Foo, (int))` |

_Note_: The modern style enhances readability and maintainability while simplifying complex signatures.

---

## 3. Using Strict, Nice, and Naggy Mocks

GoogleMock offers wrapper templates to control the strictness of mocks regarding uninteresting calls.

- `NiceMock<T>`: suppresses warnings on uninteresting calls.
- `NaggyMock<T>`: default mock behavior; generates warnings on uninteresting calls.
- `StrictMock<T>`: treats uninteresting calls as errors, causing test failures.

### Usage Note

These wrappers only affect mock methods defined **directly** in the mock class using `MOCK_METHOD`. Mock methods inherited from base classes may not be affected consistently.

_Example_

```cpp
NiceMock<MockClass> mock;
EXPECT_CALL(mock, DoSomething());
// No warnings printed if other methods are called

StrictMock<MockClass> strict_mock;
EXPECT_CALL(strict_mock, DoSomething());
// Test fails if other methods without expectations are called
```

---

## 4. Recommended Alternatives

Whenever you encounter deprecated features or old-style macros, the recommended approach is:

- Replace `MOCK_METHODn` family macros with the modern `MOCK_METHOD` macro.
- Use `ON_CALL` to define default behaviors instead of setting expectations on every call.
- Wrap mocks with `NiceMock` or `StrictMock` as appropriate to control verbosity and strictness.
- For mocking move-only types, use the modern `MOCK_METHOD` syntax with lambda actions or `WillOnce()`.

Following best practices helps reduce test brittleness and improves maintainability.

---

## 5. Tips and Best Practices

- Always declare mock methods in the `public:` section to allow `EXPECT_CALL` and `ON_CALL` to work correctly.
- To mock overloaded functions, declare all overloaded variants or selectively bring hidden base methods into scope using `using` declarations.
- When mocking move-only types, consider returning new instances within lambdas to avoid state invalidation.
- Avoid mixing `NiceMock` and `StrictMock` wrappers (e.g., `NiceMock<StrictMock<T>>`) as this is unsupported.

---

## 6. Troubleshooting Deprecated Usage

If you experience compilation errors or warnings related to mocking macros, verify:

- That you are not using `MOCK_METHODn` macros in new code.
- That move-only type arguments are mocked using the `MOCK_METHOD` macro with appropriate `WillOnce` or lambda actions.
- That your mocks are not mixing or nesting incompatible strictness wrappers.

For issues related to legacy codebases, plan gradual migration focusing on critical tests first.

---

## 7. Further Reading and References

- [GoogleMock Mock Methods API](../api-reference/mocking-matchers-actions/mock-methods-api.md): Complete reference for `MOCK_METHOD` and mocking techniques.
- [Using GoogleMock Effectively](../guides/mocking-and-advanced-testing/using-googlemock-effectively.md): Best practices and advanced usage.
- [Breaking Changes & Upgrade Guide](../changelog/breaking-changes-upgrade/upgrade-guide.md): Migration steps for users moving between versions.
- [gMock Cookbook](../docs/gmock_cook_book.md): Practical recipes and examples.

---

For a holistic test design, consider exploring documentation on assertions, matchers, and test execution to complement your understanding of mocking.


---

## Summary

This documentation equips you with the knowledge to identify deprecated GoogleMock features, understand the rationale for their deprecation, and confidently migrate to current recommended APIs. It emphasizes the modern `MOCK_METHOD` macro for mocking, details on controlling mock strictness with `NiceMock` and `StrictMock`, and guidelines for handling move-only types.

By following these recommendations, you ensure your codebase remains robust, maintainable, and compatible with future GoogleTest/GoogleMock releases.

---

<Check>
Keep your mocking code clean and modern by replacing legacy `MOCK_METHODn` macros with `MOCK_METHOD`, leverage strictness wrappers thoughtfully, and avoid deprecated patterns to prevent surprises during upgrades.
</Check>

---

<Note>
For additional migration help, consult the Breaking Changes documentation and the Upgrade Guide. Regularly review the release notes to stay informed of future deprecations.
</Note>
