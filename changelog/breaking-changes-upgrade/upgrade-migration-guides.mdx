---
title: "Upgrade & Migration Guides"
description: "Step-by-step instructions for upgrading to the latest version, addressing changes in build requirements, migrating assertion macros, or adapting new configuration practices. These guides are essential for ensuring project continuity as the frameworks evolve."
---

# Upgrade & Migration Guides

Ensure a smooth transition to the latest GoogleTest versions with these detailed upgrade and migration guides. They provide step-by-step instructions to address changes in build requirements, assertion macro usage, configuration practices, and compatibility updates critical for maintaining project continuity.

---

## 1. Introduction to Upgrading GoogleTest

Upgrading GoogleTest to a newer version often involves adapting to changes that improve functionality, enforce modern standards, or fix compatibility issues. This guide is focused on helping you understand these changes and migrate your test code and build environment efficiently.

These instructions are essential for developers maintaining long-term projects to avoid disruptions in test execution and harness the latest features and improvements.


## 2. Build Environment and Compiler Requirements

### C++ Standard Requirement
- Starting from version 1.17.0, GoogleTest requires a minimum of C++17 support.
- Ensure your compiler and build system are configured accordingly. For CMake, add:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### Build System Integration
- Continue integrating GoogleTest via CMake or Bazel as usual, but verify that your build process complies with increased C++ standard requirements.
- For CMake, you can add GoogleTest as a subdirectory or via FetchContent for automatic downloading and integration.

### Shared Library Flags
- When building GoogleTest as a shared library (DLL on Windows):
  - Add `-DGTEST_CREATE_SHARED_LIBRARY=1` when building GoogleTest.
  - Add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your tests that link to the shared GoogleTest library.

### Threading Support
- GoogleTest detects pthread availability automatically but can be overridden with `-DGTEST_HAS_PTHREAD=1` or `0` if necessary.


## 3. Assertion Macros and API Changes

### Recommended API Usage
- Use the `TEST()`, `TEST_F()`, `TEST_P()`, and `TYPED_TEST()` macros for defining tests and fixtures.
- Avoid usage of older deprecated macros like `TEST_CASE`.

### Assertion Macro Adjustments
- All assertion macros (`ASSERT_*`, `EXPECT_*`, etc.) are now guaranteed to require C++17 or newer compilers.
- When facing macro name clashes with other libraries, use the `-DGTEST_DONT_DEFINE_<MACRO>=1` builds define flags to rename conflicting macros (e.g., `-DGTEST_DONT_DEFINE_TEST=1`).

### Migration of Parameterized Tests
- For value-parameterized tests use `TEST_P()` combined with `INSTANTIATE_TEST_SUITE_P()`.
- Use `ConvertGenerator<>` for explicit parameter type conversions when parameter types differ from generated types.


## 4. Configuration and Initialization

### InitGoogleTest()
- Always call `testing::InitGoogleTest(&argc, argv)` before running tests to parse GoogleTest flags
- Support is provided for both `char**` and `wchar_t**` argument types.

### Command Line Flags
- Flag syntax remains consistent. Notable flags include:
  - `--gtest_filter` to select tests to run.
  - `--gtest_color` to toggle output colors.
  - `--gtest_output` for XML output.
- Deprecated flag `ParseGUnitFlags()` replaced with `InitGoogleTest()`.


## 5. Addressing Breaking Changes

### Minimum Compiler Support
- Older compilers not supporting C++17 will no longer compile recent GoogleTest releases.

### Fixture Usage and Test Suite Naming
- Transition fully to `TestSuite` naming API. The legacy `TestCase` alias remains for backward compatibility but is deprecated.

### Death Tests
- Enhanced platform support requires following new recommended patterns for death test macros (`EXPECT_DEATH`, `ASSERT_DEATH`).
- Refer to the [Death Tests guide](../guides/performance-and-specialized-use-cases/writing-and-using-death-tests.md) for migration details.


## 6. Step-by-Step Migration Example

### Updating a Legacy Test Fixture

```cpp
// Old style using TEST_CASE and TEST_ELEMENT
// Before:
TEST_CASE(FactorialTest, "Handles zero input") {
  EXPECT_EQ(Factorial(0), 1);
}

// After:
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### Migrating Parameterized Tests

```cpp
// Old style
TEST_P(MyTestFixture, TestName) {
  ...
}
INSTANTIATE_TEST_SUITE_P(Instantiation, MyTestFixture, testing::Values(1, 2, 3));
```

### Build Configuration

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProject CXX)
set(CMAKE_CXX_STANDARD 17)
add_subdirectory(googletest)

add_executable(MyTests test.cpp)
target_link_libraries(MyTests gtest_main)
```


## 7. Troubleshooting Tips

- If your test binary fails to build due to C++ standard errors, check your compiler supports C++17 and your build system specifies it.
- For DLL/shared library linkage errors, verify the presence of the shared library flags as described above.
- If test discovery does not reflect new tests, ensure test registration macros are updated, and `InitGoogleTest` is called correctly.
- Use the `--gtest_list_tests` flag to confirm that tests are correctly registered.


## 8. Best Practices for Smooth Upgrades

- Always back up your existing working test code before migrating.
- Upgrade dependencies like Abseil in tandem if your setup uses it.
- Run tests immediately after making upgrade changes to catch issues early.
- Consult [Detailed Release Notes](../changelog/release-history/detailed-release-notes.md) for version-specific guidance.


## 9. Additional Resources

- [Breaking Changes Guide](../changelog/breaking-changes-upgrade/breaking-changes.md)
- [Version Highlights](../changelog/release-history/version-highlights.md)
- [Installation Guide](../getting-started/setup-installation/installation-guide.md)
- [Writing Your First Test](../getting-started/first-steps-validation/write-your-first-test.md)

---

By following these Upgrade & Migration Guides, you ensure reliable ongoing testing with GoogleTest, unlock improvements in performance and capabilities, and maintain compatibility with the evolving C++ ecosystem and tooling.


---