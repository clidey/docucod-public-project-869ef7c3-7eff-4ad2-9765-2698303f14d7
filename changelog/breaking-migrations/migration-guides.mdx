---
title: "Migration Guides"
description: "Step-by-step walkthroughs to help users update their codebases when migrating across major releases. These guides emphasize actionable advice and highlight tools or scripts that assist in upgrading."
---

# Migration Guides

GoogleTest’s Migration Guides provide you with clear, step-by-step instructions tailored to update your existing test codebases when moving across major GoogleTest releases. These guides focus on helping you achieve a smooth transition, minimizing disruptions and reducing the time spent adapting to breaking changes.

---

## Why Use Migration Guides?

Migrating between major versions of GoogleTest often involves changes to APIs, macro usage, or build configurations that can break your existing tests. This page empowers you to:

- Identify and understand incompatible changes that affect your code
- Adopt updated patterns and macros to maintain compatibility
- Leverage automation tools and scripts that facilitate bulk upgrades
- Avoid common migration pitfalls by following best practices

Migrating early ensures your tests continue to run reliably and take advantage of the latest features and fixes.

---

## How to Use These Guides

Our migration guides are designed as logical workflows from discovery to resolution:

1. **Review Breaking Changes**
   - Start by understanding which parts of your test code and mocks are impacted. For example, changes to test naming rules, mock method macros, or death test conventions.

2. **Analyze Your Codebase**
   - Inventory tests and mocks that use deprecated or incompatible APIs.

3. **Use Provided Scripts and Tools**
   - GoogleTest often ships with or points to scripts that automate common migration tasks, such as updating macro names or fixing test fixture constructors.

4. **Apply Manual Fixes Where Needed**
   - Follow detailed instructions on how to modify your code to meet new API requirements.

5. **Validate Your Migration**
   - Run your tests after migration to confirm compatibility and catch any residual issues.

---

## Key Migration Scenarios Covered

### Test Naming and Fixtures

Major releases have modified the expectations around test and test fixture naming:

- Ensure your test names do not contain invalid characters.
- Add explicit default constructors to test fixtures, especially if the major release requires it.

### Mock Method Macros

Migrating from older mock macros to `MOCK_METHOD` is commonly required:

```cpp
// Old style
MOCK_METHOD0(Foo, int());

// New style
MOCK_METHOD(int, Foo, (), ());
```

This change enhances clarity and flexibility but requires deliberate refactoring.

### Death Tests

Changes in death test styles and naming conventions ensure thread-safety and correctness in complex environments. Adopt updated conventions such as:

- Using `ASSERT_DEATH` and `EXPECT_DEATH` with recommended death test styles.
- Refactoring legacy death tests to the threadsafe style.

### Build Configuration Updates

Some major versions mandate minimum C++ standards (e.g., C++17) and introduce new CMake options:

- Adjust your build scripts accordingly.
- Adopt updated CMake integration patterns for GoogleTest and GoogleMock.

---

## Tools and Scripts to Assist Migration

Where available, GoogleTest provides command-line scripts or third-party utilities to automate common migration steps.

- These tools scan your code for deprecated macros and patterns.
- They can automatically update macro invocations to the new syntax.
- Always review automated changes carefully and test your code after running these tools.

If no script exists for your situation, follow the manual migration steps closely.

---

## Best Practices for a Smooth Migration

- **Backup Your Code**: Always ensure you have a version-controlled snapshot before starting.
- **Migrate Incrementally**: If possible, migrate one test module or directory at a time.
- **Run Continuous Tests**: Run existing test suites after each migration step to catch issues early.
- **Read Release Notes**: Consult the [Breaking Changes](breaking-changes.md) page for in-depth context on what changed.
- **Leverage Community Resources**: Search or ask in community forums and GitHub issues for tips on tricky migrations.

---

## Common Migration Pitfalls

- Missing required default constructors on test fixtures causing build failures.
- Incorrect macro syntax resulting in confusing compile-time errors.
- Unupdated death test patterns causing unreliable test results.
- Build scripts not updated to reflect C++ standard requirements.

Avoid these by carefully following migration instructions and verifying changes.

---

## Related Documentation

- [Breaking Changes](breaking-changes.md) — Details the specific changes that break backward compatibility and require migration.
- [GoogleTest Primer](../primer.html) — Refresh your understanding of test basics while migrating.
- [Mocking Reference](../reference/mocking.html) — For guidance on mock-related migration.
- [Installation Guide](../getting-started/setup-overview/installation-guide.html) — To align your build environment.


---

## Get Started Now

Embrace the latest GoogleTest capabilities and future-proof your tests. Begin migrating by reviewing the detailed [Breaking Changes](breaking-changes.md) and then apply the step-by-step instructions here. Use automated tools when available and always verify with your test suite.

For assistance, visit our community forums or check the [Community-Created Documentation](community_created_documentation.html).

Happy migrating!

---

<Info>
For code transformation tools referenced, view and contribute on the official repository:
https://github.com/google/googletest
</Info>

---

# Example Migration Workflow

<Steps>
<Step title="Step 1: Prepare Your Code">
Review your current test and mock code for usage of outdated macros or patterns.
</Step>
<Step title="Step 2: Use Migration Script">
Run provided scripts (if any) to automatically update mock macros and test naming.
</Step>
<Step title="Step 3: Fix Fixture Constructors">
Add default constructors to test fixtures that lack them to meet new requirements.
</Step>
<Step title="Step 4: Update Death Tests">
Refactor death tests to use updated macros and styles for thread safety.
</Step>
<Step title="Step 5: Update Build Configuration">
Adjust your CMake or build system for required standards and options.
</Step>
<Step title="Step 6: Run Tests and Validate">
Run your full test suite to verify that migration succeeded without regressions.
</Step>
</Steps>