---
title: "Breaking Changes"
description: "Highlights any breaking changes introduced in recent versions, their impact on existing code, and direct guidance for adapting tests and mocks to maintain compatibility."
---

# Breaking Changes

This page outlines the breaking changes introduced in recent versions of GoogleTest. Understanding these changes is essential to ensure your existing test code and mocks remain compatible and to provide straightforward guidance on how to migrate and adapt tests accordingly.

---

## 1. Overview of Breaking Changes

GoogleTest commits to stability but occasionally introduces changes that affect existing codebases. These breaking changes typically arise from enhancements in test naming conventions, fixture behavior, or internal enforcement of consistency to improve overall test reliability and maintainability.

Breaking changes might manifest as:

- Compilation errors due to stricter fixture usage rules.
- Runtime errors or test failures when using deprecated naming patterns.
- Changes in macro or API behavior necessitating test code updates.

## 2. Key Breaking Changes and Their Impact

### Test Suite and Fixture Naming Consistency

GoogleTest enforces that all tests within a test suite use the **same fixture class**. Failure to comply results in a runtime failure indicating that mixed fixture usage is illegal.

For example, the following mixing is **not allowed**:

```cpp
namespace foo {
class CoolTest : public ::testing::Test {};
TEST_F(CoolTest, DoSomething) { ... }
}

namespace bar {
class CoolTest : public ::testing::Test {};
TEST_F(CoolTest, DoSomething) { ... }
}
```

GoogleTest will emit a failure indicating that the test suite `CoolTest` has tests using different fixtures.

#### Migration Guidance:

- Ensure unique test suite names for fixtures, especially when they share the same class name but reside in different namespaces.
- Consider renaming or splitting test suites to avoid fixture clashes.
- Avoid mixing `TEST()` and `TEST_F()` macros in the same suite.

### Underscore Restrictions in Test and Suite Names

Test suite names and test names must not contain underscores (`_`). This restriction prevents name collisions in the internally generated test classes.

**What breaks:** Tests with underscores in suite or test names may cause:

- Unexpected runtime errors.
- Ambiguous test class name collisions.

**Example:**

```cpp
TEST(Time, Flies_Like_An_Arrow) { ... }
TEST(Time_Flies, Like_An_Arrow) { ... }
```

Both produce the same internal class name, causing conflicts.

#### Migration Guidance:
- Remove or replace underscores in test suite and test names.
- Use CamelCase or PascalCase naming conventions.

### Default Constructor Requirement for Fixtures

Fixtures **must have a default constructor** so GoogleTest can instantiate a fresh fixture object per test.

If your fixture class has user-declared constructors, you must define a default constructor explicitly.

#### Symptoms:

- Compilation errors like `no matching function for call to 'FooTest::FooTest()'` when using `TEST_F`.

#### Migration Guidance:

- Add an explicit default constructor if any other constructor exists:

```cpp
class FooTest : public ::testing::Test {
 public:
  FooTest() = default;
  FooTest(int x) { ... }
};
```

### Fatal Assertions Placement Constraints

Fatal assertions (`ASSERT_*`, `FAIL()`) are not allowed in fixture constructors or destructors.

This restriction stems from C++'s language rules and GoogleTest's internal error propagation.

#### Symptoms:

- Compilation errors or unexpected behavior when placing `ASSERT_*` macros in constructors or destructors.

#### Migration Guidance:

- Move setup logic requiring assertions to `SetUp()`.
- Move teardown logic requiring assertions to `TearDown()`.
- For early failures in constructors, consider using non-fatal assertions or explicitly abort the test.

### Changes in Death Test Suite Naming and Order

Test suites with names ending in `DeathTest` are now run before other test suites. This affects test execution order.

#### Migration Guidance:

- Follow the convention to name death test suites with the `DeathTest` suffix.
- If a fixture is shared between normal and death tests, define a type alias for the death tests, as illustrated:

```cpp
class FooTest : public testing::Test { ... };
using FooDeathTest = FooTest;

TEST_F(FooTest, NormalTest) { ... }
TEST_F(FooDeathTest, DeathTest) { ... }
```

## 3. Common Breaking Change Scenarios

### Mixing `TEST` and `TEST_F` in the Same Suite

GoogleTest requires that all tests in a test suite use the same type of fixture.

**Problem:** Mixing `TEST` and `TEST_F` leads to runtime failures.

**Fix:** Convert all to use either:`TEST` or `TEST_F` consistently.

### Missing Default Constructor in Fixture

**Problem:** Failing to provide a default constructor if other constructors exist.

**Fix:** Add an explicit default constructor.

### Test Name Collisions Due to Underscores

**Problem:** Naming tests or suites with underscores causes ambiguous internal class names.

**Fix:** Rename tests and suites to avoid underscores.

## 4. How to Adapt Your Tests and Mocks

- Verify all test suite names and test names comply with the naming rules, avoiding underscores.
- Ensure fixture classes have default constructors.
- Check test suite consistency of fixture usage.
- For death tests, follow naming conventions and separate fixtures if needed.
- Use `SetUp()` and `TearDown()` for assertions that could fail fatally.

## 5. Troubleshooting and Error Messages

### Common Error:

> All tests in the same test suite must use the same test fixture class.

This indicates mixing fixtures or macros in a suite.

### Common Error:

> no matching function for call to `FooTest::FooTest()`

Indicates missing default constructor.

### Common Error:

> Duplicate test class generated due to underscores in test/suite names

Fix by renaming.

## 6. Additional Notes

GoogleTest provides the macro `FRIEND_TEST(TestSuite, TestName)` for testing private members, but this does not affect fixture consistency requirements.

When in doubt, consult the [FAQ section on test naming](../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for underscore constraints and fixture construction.

## 7. Related References

- [GoogleTest FAQ](../faq.md)
- [GoogleTest Primer](../primer.md)
- [Advanced GoogleTest Topics](../advanced.md)
- [Assertions Reference](../reference/assertions.md)
- [Test Suite Structure & Execution Flow](../concepts/architecture-core-models/test-suite-and-execution-flow.md)

---

For a smoother migration, start by scanning your test suite and test names for underscores and remove them. Then validate all fixtures have default constructors and consistent usage. Run your test program to identify failing tests caused by mixing fixtures or missing constructors, and fix accordingly.


---

*This documentation is maintained to help you understand breaking changes related to test suite and fixture usage, naming conventions, and fatal assertion placements that impact your GoogleTest code compatibility.*


---

<Check>
Always ensure your test suites use a consistent fixture class and remove underscores from test and suite names to avoid conflicts.
</Check>

<Callout>
For detailed migration examples and best practices, refer to the FAQ and Primer sections linked above.
</Callout>

---