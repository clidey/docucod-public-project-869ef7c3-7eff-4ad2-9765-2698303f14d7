---
title: "Deprecations & Removals"
description: "Lists deprecated features, APIs, or macros that are scheduled for removal or have been removed. Explains alternatives and best practices for future-proofing your code using GoogleTest and GoogleMock."
---

# Deprecations & Removals

This page lists deprecated features, APIs, and macros that have been or are scheduled for removal from GoogleTest and GoogleMock. It provides guidance on alternatives and best practices to help you future-proof your test code and maintain compatibility with the latest framework versions.

---

## Understanding Deprecations in GoogleTest and GoogleMock

Over its evolution, GoogleTest and GoogleMock occasionally remove older features and APIs that have been superseded by better designs or improved alternatives. This process is vital to maintaining the framework’s robustness, simplicity, and modern C++ standards compliance.

Deprecations indicate that certain functionality is planned for removal and should be avoided or replaced in new and existing code. Ignoring deprecation notices may lead to compilation or runtime failures in future releases.

---

## Common Deprecated Items and Alternatives

### 1. Old-Style Mocking Macros

The family of macros `MOCK_METHODn` (e.g., `MOCK_METHOD0`, `MOCK_CONST_METHOD1`) has been deprecated in favor of the unified `MOCK_METHOD` macro:

```cpp
// Deprecated style
MOCK_METHOD1(Foo, bool(int));

// Preferred modern style
MOCK_METHOD(bool, Foo, (int));
```

**Why the change?** The new macro simplifies syntax, supports C++11 and beyond, and better accommodates qualifiers like `const`, `override`, `noexcept`, and call types. Migrating to `MOCK_METHOD` is strongly recommended to ensure forward compatibility.

---

### 2. Using `NULL` in Assertions

Assertions like `EXPECT_EQ(NULL, ptr)` remain supported for backward compatibility but GoogleTest encourages replacing `NULL` with `nullptr` for safer and clearer code:

```cpp
// Deprecated pattern
EXPECT_EQ(NULL, ptr);

// Recommended
EXPECT_EQ(nullptr, ptr);
```

Beware that `EXPECT_NE(NULL, ptr)` and similar negations with `NULL` are **not** supported. Use `nullptr` instead.

---

### 3. Test Suite and Test Case Naming Restrictions

Underscores (`_`) in test suite or test names are deprecated due to conflicts and potential name collisions in internally generated classes, as detailed in the FAQ. To future-proof tests:

- Avoid names that start or end with an underscore.
- Avoid consecutive underscores.
- Prefer simple, alphanumeric test suite and test names without underscores.

Example:

```cpp
// Avoid
TEST(Time_Flies, Like_An_Arrow) { ... }

// Prefer
TEST(TimeFlies, LikeAnArrow) { ... }
```

Refer to the FAQ "Why should test suite names and test names not contain underscore?" for detailed rationale.

---

### 4. Mixing TEST and TEST_F Macros for the Same Test Suite

GoogleTest requires consistent use of test macros per test suite (fixture). Mixing `TEST()` and `TEST_F()` in the same test suite is deprecated and will cause errors or undefined behavior.

Always use one style per test suite to maintain coherence and ensure reliable test registration and execution.

---

### 5. Deprecated Death Test Styles

GoogleTest originally only supported "fast" style death tests, which rely on `fork()` or `clone()` for POSIX and `CreateProcess()` on Windows. To mitigate issues with multithreaded environments, a safer "threadsafe" death test style is now recommended and can be enabled using:

```cpp
GTEST_FLAG_SET(death_test_style, "threadsafe");
```

This mode re-executes the test binary to isolate death tests and avoid threading hazards. The legacy "fast" style will eventually be deprecated.

---

## Best Practices for Handling Deprecations

- **Update Your Mocks:** Migrate all `MOCK_METHODn` macros to `MOCK_METHOD` with qualifiers where needed.
- **Prefer `nullptr`:** Always use `nullptr` for pointer assertions instead of `NULL`.
- **Rename Tests:** Remove underscores from test suite and test names. Follow GoogleTest naming rules strictly.
- **Use Consistent Test Macros:** Don't mix `TEST()` with `TEST_F()` in the same suite.
- **Adopt "threadsafe" Death Tests:** For safest test execution, especially in complex or multithreaded codebases.

---

## What to Do If Your Code Uses Deprecated Features

1. **Identify Deprecated APIs:** Consult warning messages, changelogs, and the FAQ for clues.
2. **Search for Alternatives:** The [Assertions Reference](reference/assertions.md), [Mocking Reference](docs/reference/mocking.md), and [gMock Cookbook](docs/gmock_cook_book.md) offer modern approaches.
3. **Refactor Incrementally:** Start with the most impactful deprecations like mock macros and assertion pointer constants.
4. **Run Tests Frequently:** Ensure behavior consistency while updating mocks and assertions.
5. **Stay Updated:** Keep track of GoogleTest release notes and changelogs for upcoming removals.

---

## Related Documentation

- [Assertions Reference](reference/assertions.md) — Learn modern assertion macros and usage.
- [Mocking Reference](docs/reference/mocking.md) — Updated ways to define mocks and expectations.
- [gMock Cookbook](docs/gmock_cook_book.md) — Practical mocking recipes and best practices.
- [FAQ](docs/faq.md) — Clarifies deprecation rationales.
- [Breaking Changes](changelog/upgrade-breaks/breaking-changes) — Details breaking changes and migration.

---

## Summary

In this page, you've found a concise directory of deprecated elements in GoogleTest and GoogleMock, with actionable advice on migrating to current, supported APIs. Adhering to these recommendations ensures your test code remains robust, maintainable, and compatible with future framework releases.

Continuous attention to deprecation notices and timely code updates is key to leveraging GoogleTest's powerful and evolving capabilities effectively.

---

<Tip>
For the latest information on deprecations and removals, always review the official [GoogleTest GitHub release notes](https://github.com/google/googletest/releases) and subscribe to update announcements.
</Tip>

---

# Contact & Contributions

If you discover undocumented deprecated features or need help with migration, consider reaching out on the [googletestframework@googlegroups.com](mailto:googletestframework@googlegroups.com) mailing list or contributing improvements to the documentation on the project’s GitHub repository.
