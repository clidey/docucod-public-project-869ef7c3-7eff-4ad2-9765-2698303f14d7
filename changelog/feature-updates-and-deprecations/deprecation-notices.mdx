---
title: "Deprecation Notices"
description: "Notifies users of features, APIs, or behaviors that are deprecated, including planned removal timelines and recommended alternatives. Empowers users to keep their codebase up-to-date and compliant with future releases."
---

# Deprecation Notices

This page provides essential information about deprecations in GoogleTest's GoogleMock framework. It informs users about features, APIs, or behaviors that are deprecated, outlines removal timelines, and offers recommended alternatives. Staying informed on deprecations ensures your codebase remains up-to-date, maintainable, and compatible with future releases.

---

## Understanding Deprecation in GoogleMock

Deprecations mark features or APIs that are considered outdated and are scheduled to be removed in future versions. GoogleMock communicates deprecations early, giving you ample time to migrate your code.

### Why Pay Attention to Deprecations?

- Avoid build or runtime breakages when upgrading GoogleMock.
- Benefit from improved APIs and workflows designed for better reliability and usability.
- Keep your tests clean, maintainable, and aligned with best practices.


## Deprecated Features and Recommended Alternatives

### Transition to the Unified `MOCK_METHOD` Macro

GoogleMock has deprecated old-style `MOCK_METHODn` macros in favor of a single, unified `MOCK_METHOD` macro:

```cpp
// Old-style (deprecated):
MOCK_METHOD1(Foo, bool(int));

// Modern style (recommended):
MOCK_METHOD(bool, Foo, (int));
```

**Why switch?** The unified macro simplifies mock class definitions, handles const, noexcept, and overridden methods in a consistent way, and supports complex argument types more robustly.

**Migration step:** Convert your existing mocks to the `MOCK_METHOD` syntax as soon as possible to align with the latest standards.


### Correct Clause Order in `EXPECT_CALL` and `ON_CALL`

GoogleMock enforces a strict order of modifier clauses in both `EXPECT_CALL` and `ON_CALL` statements, which must be adhered to:

- For `EXPECT_CALL`:
  1. `.With()` (at most once, must be first)
  2. `.Times()` (at most once)
  3. `.InSequence()` (any number)
  4. `.After()` (any number)
  5. `.WillOnce()` (any number)
  6. `.WillRepeatedly()` (at most once)
  7. `.RetiresOnSaturation()` (at most once, must be last)

- For `ON_CALL`:
  1. `.With()` (at most once, must be first)
  2. `.WillByDefault()` (exactly once)

Non-compliance with the correct clause order can lead to compilation errors or runtime warnings. Update your test code to match this ordering rigorously.


### Moved or Removed Old Mocking Macros

Some older mocking macros, particularly those predating the generic `MOCK_METHOD`, are deprecated and will be removed in upcoming releases. Instead, use the modern macro suite documented in the [Mocking Reference](../docs/reference/mocking.md#MOCK_METHOD).


### Move-Only Types Support

Support for mocking methods with move-only types as arguments or return values was introduced in recent releases. Older workarounds that delegate calls to helper mock methods without move-only types should be replaced with the direct use of `MOCK_METHOD` with move-only parameters.


### Mock Destructors and `Die()` Method Replacement

Direct mocking of destructors is not supported. To test mock object destruction behavior, add a mock method such as `Die()` and call it within the destructor.

```cpp
class MockFoo : public Foo {
 public:
  MOCK_METHOD(void, Die, ());
  ~MockFoo() override { Die(); }
};
```

This pattern replaces any deprecated practices around destructor mocking.


### Default Actions and Warning Suppression

GoogleMock emits warnings on "uninteresting calls" by default, even if you have set default behaviors using `ON_CALL`. To suppress these warnings explicitly, use the `NiceMock` wrapper or add explicit `EXPECT_CALL(...).Times(AnyNumber())`.

Avoid suppressing uninteresting call warnings by blindly adding `EXPECT_CALL` without clear intent.


## Planned Removal Timelines

GoogleMock adheres to semantic versioning and provides deprecation warnings well before any feature or API is removed. It is strongly recommended to regularly consult this page and the associated changelogs to stay informed.

**General guidance:**
- Features marked deprecated in minor releases may be removed in the next major release.
- Code using deprecated APIs should be refactored promptly to avoid breakage.


## Practical Tips for Managing Deprecations

- Regularly update your GoogleTest and GoogleMock versions.
- Review the changelogs, breaking changes summaries, and migration guides.
- Utilize automated refactoring tools or scripts when migrating mock macros.
- Take advantage of the [Mocking Reference](../docs/reference/mocking.md) for the recommended modern practices.
- Use the verbosity and warning flags (`--gmock_verbose`) to detect deprecated usage and warnings effectively.


## Troubleshooting Deprecated Usage

If your tests:
- Fail to compile with errors related to mock method macros or clauses order,
- Produce warnings about uninteresting calls despite default behaviors,
- Expose warnings suggesting deprecated or removed APIs,

then review your mocking code for compliance with the modern API usages highlighted here. Correct as necessary.

For detailed help, consult:
- The [gMock Cookbook](../docs/gmock_cook_book.md) for migration recipes.
- The [Legacy gMock FAQ](../docs/gmock_faq.md) to understand common pitfalls.
- Community forums and the GitHub issue tracker for specific upgrade assistance.


## Summary

By monitoring and adapting to deprecated features and patterns on this page, you ensure your GoogleMock-based tests remain robust, interpretable, and compatible with future GoogleTest releases.


---

## Related Resources

- [Mocking Reference](../docs/reference/mocking.md) — Definitive guide for mock definitions and expectations.
- [gMock Cookbook](../docs/gmock_cook_book.md) — Practical how-to with examples and recipes.
- [Breaking Changes Summary](../changelog/breaking-changes-and-migration/breaking-changes-summary) — Details on incompatible changes.
- [Migration Guides](../changelog/breaking-changes-and-migration/migration-guides) — Step-by-step upgrade instructions.
- [Mocking Best Practices](../guides/mocking-best-practices/mocking-best-practices) — Advice to avoid brittle tests and pitfalls.


<Tip>
Keep your mocking syntax and expectations aligned with the latest GoogleMock standards to maximize test reliability and future proofing. This page is your hub for such updates.
</Tip>

<Note>
Deprecation notices are focused on user-visible features and APIs. Internal implementation details are not covered here.
</Note>

<Warning>
Ignoring deprecation warnings may lead to test failures and maintenance overhead during upgrades.
</Warning>

---

## Example Migration: From Old MOCK_METHODn to New MOCK_METHOD

```cpp
// Deprecated old-style mock method
MOCK_METHOD1(Foo, bool(int x));

// Recommended new-style mock method
MOCK_METHOD(bool, Foo, (int x));
```

Use `MOCK_METHOD` with a consistent clause ordering and qualifiers as needed.

---

## Controlling Flag for Verbosity and Warning Behavior

GoogleMock offers the `--gmock_verbose` flag to control warning verbosity:

| Level    | Description                                   |
| -------- | --------------------------------------------- |
| info     | Prints all informational messages and warnings, including stack traces (most verbose).
| warning  | Prints warnings and errors without stack traces (default).
| error    | Prints only errors, suppresses warnings.

Set the flag via command line or programmatically:

```cpp
GMOCK_FLAG_SET(verbose, "error");
```

This helps manage noise from deprecated or uninteresting call warnings during transition.

---

## Keeping Up-to-Date

Regularly monitor the [All Releases Overview](../changelog/version-history-and-release-notes/all-releases-overview) and [Detailed Release Notes](../changelog/version-history-and-release-notes/detailed-release-notes) for upcoming deprecations and to understand new recommended patterns.


---

# Further Assistance

For questions or community support, visit the [Community Help FAQ](../faq/advanced-usage-and-support/community-help). Report bugs or seek help via the GoogleTest GitHub repository: [googletest](https://github.com/google/googletest).