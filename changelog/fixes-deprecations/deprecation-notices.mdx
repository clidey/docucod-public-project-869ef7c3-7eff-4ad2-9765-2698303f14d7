---
title: "Deprecation Notices"
description: "Lists all deprecated APIs, configuration options, and usage patterns, specifying their recommended replacements and end-of-support timelines. This helps users future-proof their tests and avoid legacy features."
---

# GoogleTest Deprecation Notices

This page provides a comprehensive list of deprecated APIs, configuration options, and usage patterns within the GoogleTest framework. It guides you through recommended replacements and important end-of-support timelines, empowering you to keep your tests future-proof and free from legacy dependencies.

---

## 1. Overview of Deprecations

As GoogleTest evolves, certain features and APIs become obsolete or replaced by better alternatives. This page documents these deprecations explicitly, helping you identify outdated constructs in your codebase and transition smoothly to supported counterparts.

Maintaining awareness of deprecations is critical to ensuring your tests:

- Continue to compile and run without warnings
- Leverage improved functionality and performance
- Remain compatible with future GoogleTest releases


## 2. Deprecated APIs and Their Replacements

### 2.1. MOCK_METHODn Macros

- The older `MOCK_METHODn` family of macros (such as `MOCK_METHOD0`, `MOCK_METHOD1`, etc.) has been deprecated.
- **Use the new unified `MOCK_METHOD` macro**, which provides a simpler and more flexible way to declare mock methods.

**Example Replacement:**

```cpp
// Deprecated:
MOCK_METHOD1(Foo, bool(int));

// Recommended:
MOCK_METHOD(bool, Foo, (int));
```

> This unified syntax supports const-qualification and other specifiers, enabling cleaner and more maintainable mocking declarations.


### 2.2. Use of Fatal Assertions Outside Void-returning Functions

- Fatal assertions such as `ASSERT_*` and `FAIL()` must only be used in functions returning `void`.
- Using fatal assertions in constructors, destructors, or non-void functions is deprecated and will cause compilation errors.
- **Recommended practice:** Place fatal assertions inside `SetUp()` and `TearDown()` methods or redesign helper functions to return `void` when asserting failure conditions.


### 2.3. `ON_CALL()` Without `WillByDefault()` Clause

- Each `ON_CALL()` must be followed by exactly one `WillByDefault()` action.
- Omitting `WillByDefault()` results in undefined behavior and is deprecated.


### 2.4. Test Naming Conventions for Death Tests

- Test suites containing death tests should end with the suffix `DeathTest`.
- Failure to follow this naming convention is deprecated and may result in ordering or execution issues in multithreaded environments.


## 3. Configuration Option Deprecations

Some flags and command-line options have been deprecated or superseded:

- Flags for death test styles have been standardized; use `--gtest_death_test_style=fast|threadsafe` exclusively.
- Verbosity flags such as `--gmock_verbose` are preferred for controlling mock output instead of legacy environment variables.


## 4. Deprecated Usage Patterns

### 4.1. Chaining Multiple `EXPECT_CALL` on the Same Method Without Ordering

- Setting multiple `EXPECT_CALL` statements for the same method without specifying ordering sequences can cause fragile, error-prone tests.
- Though not strictly deprecated, the best practice is to use:
  - Chained `WillOnce()` calls on a single `EXPECT_CALL` for sequential behaviors.
  - The `InSequence` helper to enforce call order.


### 4.2. Testing Private Members Without Friends or Accessors

- Directly accessing private members for testing without using `FRIEND_TEST` or appropriate accessors is discouraged.


## 5. End-of-Support Timelines

While specific sunset dates may be communicated in release notes, users are advised to:

- Migrate away from deprecated macros and APIs promptly.
- Monitor official release notes for upcoming removals.


## 6. Migration Guidance

To future-proof your tests, follow these steps:

1. **Identify Deprecated Usages:** Search your codebase for deprecated macros like `MOCK_METHODn`, use of fatal assertions in invalid contexts, and improper `ON_CALL` usage.

2. **Refactor to Recommended APIs:** Replace deprecated calls with supported `MOCK_METHOD` macros, correct assertion usage, and add missing `WillByDefault()` clauses on `ON_CALL`.

3. **Validate Tests:** Run tests using the latest GoogleTest versions with warnings enabled to catch deprecated usage.

4. **Follow Naming Conventions:** Rename DeathTest suites to end with `DeathTest`.

5. **Consult Migration Guides:** Review official migration guides for detailed code samples and best practices.


<Tip>
Always keep your test code aligned with the current GoogleTest APIs. Not only will this avoid build warnings and errors during upgrades, but it will also leverage the latest improvements and avoid running into subtle bugs caused by deprecated constructs.
</Tip>


## 7. Related Documentation and Resources

- [Mocking Reference](../api_reference/mocking_api/mock_object_basics) — Definitive guide on mock object declaration and usage.
- [Advanced GoogleTest Topics](../docs/advanced.md) — Covers best practices around assertions, including deprecations.
- [Migration & Upgrade Guides](../changelog/migrations-breakages/migration-guides) — Step-by-step migration instructions.
- [Breaking Changes](../changelog/migrations-breakages/breaking-changes) — Overview of incompatible changes and deprecations.
- [GoogleTest Primer](../overview/intro-core-concepts/what-is-googletest) — Foundational concepts and terminology.

---

Maintaining your tests up-to-date ensures robust, maintainable, and highly performant test suites. This page serves as your ongoing reference point to identify and address GoogleTest deprecations efficiently.


---

*Last updated: consult the latest [GoogleTest release notes](../changelog/releases-highlights/version-history) for current deprecations and support timelines.*