---
title: "Notable Improvements"
description: "Details enhancements to core testing capabilities, new platform or compiler support, and performance or reliability improvements introduced in recent releases."
---

# Notable Improvements

This page highlights significant enhancements made to GoogleTest and GoogleMock's core testing capabilities, compiler and platform support, and improvements to performance and reliability introduced in recent releases. These improvements are essential for users aiming to leverage the latest advancements in test writing, mocking, and execution efficiency.

---

## 1. Enhanced Mocking Macros and Improved Usability

- **Expanded `MOCK_METHOD` Macro Capabilities**: The `MOCK_METHOD` macro continues to evolve, supporting complex method declarations with qualifiers such as `const`, `override`, `noexcept`, and platform-specific calling conventions like `Calltype`. Recent improvements allow seamless mocking of methods with:
  - Multiple qualifiers, including reference qualifiers via `ref(&)` or `ref(&&)`.
  - Types containing commas, with user-friendly solutions such as wrapping types in parentheses or using type aliases.

- **Legacy Macro Support and Encouragement to Migrate**: While older `MOCK_METHODn` macros remain supported for backward compatibility, users are encouraged to adopt the generic `MOCK_METHOD` for simpler syntax and greater flexibility.

- **Better Mocking of Edge Cases**:
  - Non-virtual method mocking via compile-time template techniques.
  - Mocking of overloaded methods with proper disambiguation through `using` declarations.
  - Support for mocking class templates and handling const and noexcept overloads correctly.

- **Strictness Control for Mocks**: Introduction and refinement of `NiceMock`, `NaggyMock`, and `StrictMock` wrappers to tailor uninteresting call behaviorâ€”ranging from suppressing warnings to treating uninteresting calls as test failures, providing users with better control over test strictness and diagnostics.

---

## 2. Expanded Platform and Compiler Support

- **Cross-platform Compatibility**: Improved build and runtime support for a broad range of platforms, including but not limited to:
  - Various Windows compilers (MSVC, MinGW)
  - Linux distributions and Android
  - macOS and iOS targets
  - BSD variants and embedded platforms with partial feature sets

- **Better Handling of Compiler-Specific Warnings and Behaviors**:
  - MSVC-specific warning management improvements for mocking const parameters.
  - Support for compilers conforming to C++17 and beyond.
  - Workarounds that enable compiling large mock classes efficiently, reducing memory and time overhead by moving constructor and destructor definitions out of headers.

- **Thread Safety and Multithreading Enhancements**: Improved synchronization and lock management for mocks in concurrent tests, ensuring consistent and deadlock-free behavior in multi-threaded testing scenarios.

---

## 3. Performance and Reliability Improvements

- **Default Action Enhancements**: Improved semantics and usability of default actions via `ON_CALL()` that define behavior without imposing expectations, encouraging better test design and less brittle tests.

- **Advanced Action Capabilities**:
  - Support for complex return types including move-only types such as `std::unique_ptr`.
  - Support for actions returning references with `ReturnRef()` and live values with `ReturnPointee()`.
  - Combination of multiple actions via `DoAll()` for side effects coupled with return values.

- **Robust Expectation Handling**:
  - Cardinality inference mechanisms that default to intuitive call counts when `Times()` is omitted.
  - Improved detection and messaging when the number of specified actions does not match the expectation cardinality.
  - Support for partial and total ordering of calls via `InSequence`, `After`, and `Sequence` abstractions enabling fine-grained control of call order.

- **Diagnostic and Debugging Improvements**:
  - Enhanced verbose logging with `--gmock_verbose=info` flag for detailed call tracing.
  - Stack traces on warnings and errors to aid troubleshooting of unexpected or uninteresting calls.
  - Detailed failure messages explaining mismatches, call ordering violations, and expectation saturations.

- **Support for Custom Matchers and Actions**:
  - Macros and class interfaces to rapidly define custom matcher and action types, including parameterized and polymorphic versions.
  - Facilities to implement rich domain-specific checks and behavior extensions without compromising performance.

---

## 4. More Usability Enhancements and Best Practices

- **Improved Documentation and Guidance**:
  - Clear recommendations to use `ON_CALL` to specify default mock behavior and `EXPECT_CALL` to specify explicit expectations, reducing test fragility.
  - Guidelines to avoid over-specifying expectations to keep tests resilient to implementation changes.
  - Best practice emphasis on expression of intent through correctly scoped expectations and sequences.

- **Test Lifecycle and Mock Verification**:
  - Automatic verification of expectations upon mock object destruction.
  - New APIs for explicit verification and clearing expectations mid-test, useful for managing mocks with dynamic lifetime.

- **Compilation Time Optimizations**:
  - Recommendations to define mock constructors and destructors outside headers to reduce repeated compilation overhead.

- **Legacy Features Clarified and Managed**:
  - Handling of variadic functions and free functions through interface wrapping or std::function mocking.
  - Advice on when to avoid mocking concrete classes directly to reduce tight coupling and test maintenance overhead.

- **Miscellaneous Enhancements**:
  - Ability to mock destructors via explicit `Die()` methods for complex order verification.
  - Support for `SaveArg` actions for capturing and validating complex argument data separately.
  - Detailed control on argument matching, including complex multi-argument and tuple matchers.

---

For deeper understanding and usage details, please refer to resources such as the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html), [Mocking Reference](https://google.github.io/googletest/reference/mocking.html), and the guides on [mock strictness control](../guides/mocking-masterclass/mock-class-strictness) and [custom matchers and actions](../api-reference/extension-and-internals/custom-matchers-and-actions).

---

**Note:** This page focuses explicitly on notable improvements enhancing GoogleMock's testing and mocking capabilities; for a comprehensive list of version history and release notes, please consult the [Latest Release Notes](../version-history/latest-release).
