---
title: "Deprecations & Removal Notices"
description: "Informs users about deprecated features, macros, or APIs, offering alternatives and grace period information. Guides teams to future-proof usage and adopt recommended practices."
---

# Deprecations & Removal Notices

This page informs you about deprecated features, macros, and APIs in GoogleTest and GoogleMock. It guides how to recognize deprecated elements, transition away from them, and understand the timelines and alternatives offered. By following these notices, you can future-proof your test code, avoid unexpected breakages in new releases, and adopt supported, recommended practices.

---

## Understanding Deprecation in GoogleTest and GoogleMock

Deprecation is a formal announcement indicating that certain features, macros, or APIs are planned for removal in future releases. While deprecated features currently remain functional, they should no longer be used in new code and existing usage should be migrated promptly.

GoogleTest and GoogleMock maintain backward compatibility carefully but signal deprecations to allow teams to adopt improved or safer APIs. These notices appear in releases and documentation.

### Why You Should Care

- Deprecated features might be removed in upcoming major versions.
- Continuing to use deprecated APIs could lead to warnings or test failures.
- Migration ensures ongoing compatibility and lets you take advantage of improvements.

### How Deprecations Are Communicated

- Documentation pages such as this one.
- Release notes highlighting newly deprecated features.
- Warning messages during compilation or runtime in some cases.

You should monitor these sources regularly, especially when upgrading.

## Commonly Deprecated Features and What to Do

### Legacy `MOCK_METHODn` Macros

Older GoogleMock macros like `MOCK_METHOD0`, `MOCK_CONST_METHOD1`, etc., are deprecated in favor of the newer unified `MOCK_METHOD` macro.

#### What Changed

- New syntax is: `MOCK_METHOD(return_type, method_name, (args...), (qualifiers));`
- The older macros are less flexible and harder to use with complex qualifiers.

#### Migration

Replace: 

```cpp
MOCK_METHOD1(Foo, bool(int));
MOCK_CONST_METHOD2(Bar, int(int, double));
```

With:

```cpp
MOCK_METHOD(bool, Foo, (int));
MOCK_METHOD(int, Bar, (int, double), (const));
```

Refer to [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md#MOCK_METHOD) for detailed examples.

---

### Unprotected Commas in `MOCK_METHOD`

Argument or return types that contain commas must be properly wrapped in extra parentheses or aliased.

Incorrect:

```cpp
MOCK_METHOD(std::pair<bool, int>, GetPair, ());
```

Correct:

```cpp
MOCK_METHOD((std::pair<bool, int>), GetPair, ());
```

Or use type aliases as shown in the mocking reference.

### Deprecated Macros and Flags

Certain macros related to internal threading, build, or environment configurations might be deprecated or removed. Always consult the release notes and upgrade guides in the [Changelog](https://github.com/google/googletest/blob/main/CHANGELOG.md) for the most current status.

---

## Grace Periods and Removal Timelines

GoogleTest follows semantic versioning and maintains backward compatibility within major versions, but reserves the right to remove deprecated features in major releases.

### What to Expect

- Deprecated APIs remain available for at least one major release.
- Users are encouraged to migrate promptly upon seeing deprecation notices.
- Deprecated features are clearly documented here and in release notes.

## Alternatives and Recommended Practices

Whenever a feature or API is deprecated, GoogleTest provides:

- Replacement macros or method signatures.
- Updated usage patterns to improve clarity, efficiency, or safety.
- Guidance for migration through documentation and example code.

For instance, switch from `MOCK_METHODn` family macros to the modern `MOCK_METHOD` macro to enable better compatibility with current and future GoogleMock versions.

## How to Adapt Your Code

Follow these steps to future-proof your test suites:

1. Identify deprecated usages by reading compiler warnings and this documentation.
2. Consult the related deprecation and migration guides.
3. Refactor your mocks and tests to use recommended APIs.
4. Run your tests to verify correctness.
5. Remove all deprecated macros and features before upgrading to the next major version.

If encountering difficulties, consult community support as described in [Reporting Issues](https://github.com/google/googletest/blob/main/docs/faq/community-support/reporting-issues.mdx).

## Troubleshooting

### Unrecognized Deprecated Macro Errors

If your build starts failing after an upgrade or you see warnings about deprecated macros:

- Make sure you have updated all mock class definitions from old to new mock method macros.
- Check your build system isn’t caching stale code.
- Confirm your third-party or vendor libraries using GoogleTest have also upgraded.

### Compilation Errors Due to Deprecated Features

- Review [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md) for correct macro usage.
- Replace deprecated macro usage as documented.

## Further Reading and Resources

- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md) — details on macro usage and mocking techniques.
- [Changelog & Release Notes](https://github.com/google/googletest/blob/main/Changelog.md) — monitor this for deprecation announcements and removal schedules.
- [Migration Guide](https://github.com/google/googletest/blob/main/docs/guides/integration-and-scenarios/migration-guide.mdx) — practical advice for moving between versions smoothly.
- [Legacy gMock FAQ](https://github.com/google/googletest/blob/main/docs/gmock_faq.md) — contains reasons and solutions related to legacy macros.

---

## Summary

GoogleTest proactively informs you of deprecated macros and APIs, especially around mocking. Upgrading existing mock classes to use the unified `MOCK_METHOD` macro is crucial. Always consult this page and linked resources for staying current.

Adopt the recommended replacements quickly to avoid disruptions from future removals, improve your test code quality, and take advantage of improved GoogleTest and GoogleMock features.

---

### Example Migration Snippet

```cpp
// Before
class MockFoo {
 public:
  MOCK_CONST_METHOD1(Bar, bool(int));
};

// After
class MockFoo {
 public:
  MOCK_METHOD(bool, Bar, (int), (const));
};
```

---

_Last updated: Refer to the latest release notes and changelog for current deprecations._

---

For more help, see [reporting issues](https://github.com/google/googletest/blob/main/docs/faq/community-support/reporting-issues.mdx) or [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/overview/introduction-and-value/product-overview.mdx).

---

[GoogleTest GitHub Repository](https://github.com/google/googletest)

[Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)

[Migration Guide](https://github.com/google/googletest/blob/main/docs/guides/integration-and-scenarios/migration-guide.mdx)


