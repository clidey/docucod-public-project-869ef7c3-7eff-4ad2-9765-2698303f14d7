---
title: "Breaking Changes & Migration Notes"
description: "A clear summary of breaking changes introduced in each major and minor version. This page highlights API changes, removed features, and essential migration strategies for maintaining compatibility during upgrades."
---

# Breaking Changes & Migration Notes

This page provides a clear and concise summary of the breaking changes introduced in each major and minor version of GoogleTest and GoogleMock. It highlights critical API changes, removed features, and essential migration strategies designed to help you maintain compatibility and ensure a smooth upgrade process.

---

## 1. Understanding Breaking Changes

Breaking changes complicate upgrading your test framework but are sometimes necessary to improve API consistency, fix design flaws, or remove deprecated behaviors. This page focuses solely on changes that may impact your existing tests, mocks, or build configurations.

> **Why it matters:** Ignoring breaking changes during upgrades leads to compilation errors, test failures, or silent behavioral changes that undermine your test reliability.


## 2. Overview of Breaking Change Types

- **API Signature Changes:** Modifications in function signatures, e.g., changing parameters, adding or removing qualifiers like `const` or `override`.
- **Removed or Renamed Features:** Discontinuation of functions, macros, or options previously supported.
- **Behavioral Changes:** Changes in default behaviors, such as how mock strictness or uninteresting call warnings are handled.
- **Build and Integration Adjustments:** Requirements on C++ standards, compiler flag changes, or dependency upgrades.


## 3. Major Version Upgrades

### From 1.x to 2.x (Example)

- **Core Assertion Macros:** Some assertion macros have altered parameter ordering or semantics. Verify usage against the new API.
- **Mock Method Definitions:** The old `MOCK_METHODn` macros are deprecated; prefer the generalized `MOCK_METHOD` syntax to define mocks more reliably.
- **Death Test Naming Conventions:** Test suites containing death tests must be explicitly named with the suffix `DeathTest` to guarantee correct test ordering and isolation.
- **Default Build Requirement:** C++17 or newer is now mandatory; compilers without full C++17 support are unsupported.

### Migration Strategy
- Review all your `MOCK_METHODn` usages; migrate them to the new `MOCK_METHOD` macro specifying all required qualifiers explicitly.
- Ensure test suites containing death tests are renamed or aliased to conform to the `*DeathTest` suffix convention.
- Adjust your build environment to ensure C++17 compliance and update compiler flags as needed.


## 4. Minor Version Upgrades

Minor releases occasionally introduce smaller breaking changes, often for tightening API contracts or fixing behavioral inconsistencies.

- **Default Mock Strictness Adjustments:** Starting from version X.Y, `NaggyMock` is the default behavior instead of `NiceMock`; if your tests depend on the previous default, explicitly wrap mocks in `NiceMock` or `StrictMock`.
- **Matchers and Actions:** Some matcher combinators and actions may have slight API changes or require explicit qualification due to increased type safety.
- **Flag and Command Line Options:** Some flags may be renamed or deprecated; ensure any scripts or CI configurations reflect updated flag names.


## 5. Important API Changes Related to Mocking

### MOCK_METHOD Macro

- Use the new `MOCK_METHOD` macro instead of the legacy `MOCK_METHODn` macros. It offers better template inference, supports move-only types, and accepts explicit qualifiers like `const`, `override`, and `noexcept`.


```cpp
// Example of new MOCK_METHOD usage
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, Bar, (int x), (const, override));
};
```


### Managing Uninteresting Calls

- To suppress warnings on uninteresting calls, use `NiceMock<MockFoo>`.
- To treat unexpected or uninteresting calls as failures, use `StrictMock<MockFoo>`.


### Expectation Ordering and Retirement

- Expectations (`EXPECT_CALL`) have become "sticky" to improve matching robustness; use `.RetiresOnSaturation()` to retire expectations after they're saturated if required.
- Use `InSequence` or `Sequence` objects to enforce call order instead of relying on implicit order.


## 6. Handling Deprecations and Removed Features

- Deprecated methods or flags will be removed in the next major release. Users should refer to this page regularly.
- Substitute deprecated features with recommended alternatives as documented in their respective API references.


## 7. Migration Best Practices

- **Backup Your Code:** Always maintain a working baseline before upgrading.
- **Incremental Upgrades:** Prefer upgrading through minor versions sequentially before moving to a major release.
- **Review Release Notes:** In addition to this breaking changes overview, consult detailed release notes for your target version.
- **Run Full Test Suites:** Validate your entire test suite after upgrading to catch subtle API or behavior issues early.
- **Use Compiler Errors as Guidance:** Changes will often result in clear compiler errors directing you to needed fixes.
- **Consult Community and Support:** For complex migrations or unexpected failures, seek help through the official discussion forums or issue trackers.


## 8. Example Migration Scenario

Suppose you are upgrading from GoogleMock version 1.10 to 1.12, and your mocks were defined using `MOCK_METHOD1`.

**Step 1:** Replace legacy mock macros with the new `MOCK_METHOD` macro.

```cpp
// Old:
MOCK_METHOD1(Foo, bool(int));

// New:
MOCK_METHOD(bool, Foo, (int), (override));
```

**Step 2:** If you use uninitialized mocks that print warnings due to uninteresting calls, wrap those mocks with `NiceMock`.

**Step 3:** Adjust expectation setup to use `.RetiresOnSaturation()` if you rely on exhausting expectations to suppress errors.

**Step 4:** Verify that your build uses C++17 or newer compiler; update CMake or Bazel build rules accordingly.

**Step 5:** Run your test suite to confirm that all tests pass or edit expectations to fix failures.


## 9. Troubleshooting Upgrade Issues

- **Compilation Errors:** Usually indicate API signature mismatch or missing qualifiers.
- **Unexpected Warning Messages:** Check for uninteresting or unexpected mock calls; consider adjusting mock strictness or adding catch-all expectations.
- **Link-Time Errors:** Verify you are linking against the correct version of GoogleTest and GoogleMock libraries.
- **Behavioral Test Failures:** Review recent API changes in matchers, actions, or mocking behavior that might affect test logic.


## 10. Additional Resources and Migration Aids

- Refer to the [Mocking Reference](../api-reference/gmock-mocking-api/mock-object-definition.md) for up-to-date syntax and best practices.
- See [Migration and Breaking Changes Overview](../changelog/version-history/full-version-history.md) for detailed history.
- Use the [Getting Started Guides](../../getting-started/getting-started-next-steps.md) to refresh your understanding of recommended workflows.
- Leverage troubleshooting tips from the [Common Issues](../../faq/common-usage-issues/faq-troubleshooting.md).


---

## Summary

This page centralizes critical information regarding API-breaking changes across GoogleTest and GoogleMock releases, empowering you to proactively manage upgrades without surprises. It focuses particularly on changes impacting mock definitions, expectations, build requirements, and test behaviors, supplemented with practical migration steps and troubleshooting guidance.

---

## Contributing to Better Upgrades

We encourage users to report any unforeseen upgrade blockers or suggestions for improving migration ease through the [GoogleTest GitHub issue tracker](https://github.com/google/googletest/issues).

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "README.md", "range": "1-100"},{"path": "docs/faq.md", "range": "1-1200"}]} />

---