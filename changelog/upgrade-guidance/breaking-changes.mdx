---
title: "Breaking Changes and Migration Notes"
description: "Detail all API, behavior, or compatibility changes that can impact existing test code. Concisely enumerate what was removed, changed, or is no longer supported, and provide migration instructions or workarounds as needed."
---

# Breaking Changes and Migration Notes

This page outlines critical API, behavior, and compatibility changes in GoogleTest that may affect existing test code. It consolidates all breaking changes introduced across versions, explains what has been removed or changed, and provides clear migration guidance to help developers update their tests efficiently and avoid disruptions.

---

## 1. API Changes

### Removal and Deprecation of Legacy APIs
- The older `TestCase` API and related macros are deprecated and replaced by `TestSuite` and updated naming conventions.
- Macros such as `INSTANTIATE_TEST_CASE_P` and `TYPED_TEST_CASE_P` are deprecated in favor of `INSTANTIATE_TEST_SUITE_P` and `TYPED_TEST_SUITE_P`. Use the newer macros to avoid warnings and ensure future compatibility.

### Changes in Test Fixture Naming and Registration
- Test fixtures must now conform strictly to having a unique default constructor or explicitly define one to avoid registration errors.
- GoogleTest requires all tests in the same test suite to use the same test fixture class. Mixing `TEST` and `TEST_F` within one suite will generate failures. Refactor tests to maintain fixture-class consistency.

### Enhanced Strictness in Test Name and Suite Naming Conventions
- Test suite and test names should avoid underscores (`_`) due to reserved internal naming. This prevents name collisions and linker errors.
- Avoid starting or ending test names with underscores and do not use double underscores anywhere in names.

## 2. Behavioral Changes

### Fatal Failure Propagation and Test Flow
- Assertion macros that generate fatal failures (`ASSERT_*` and `FAIL()`) abort the current function only, not the entire test. Users should use helper macros like `ASSERT_NO_FATAL_FAILURE()` or check `HasFatalFailure()` to propagate failures properly.
- `GTEST_SKIP()` introduced for conditionally skipping tests at runtime in test cases and environments.

### Repetition and Shuffling of Tests
- The `--gtest_repeat` flag now supports negative counts for infinite test repetitions.
- Shuffling of tests via `--gtest_shuffle` randomizes test and test suite order, while still ensuring death tests run first.

### Death Tests Execution
- Death tests must be grouped in test suites named with the suffix `DeathTest` to guarantee orderly execution before non-death tests.
- New `death_test_style` flag (`fast` vs `threadsafe`) governs death test behavior, impacting process spawning and thread safety.

## 3. Compatibility and Platform Support

### Minimum C++ Standard
- Starting with version 1.17.0, GoogleTest requires a minimum of C++17 standard. Users must upgrade compiler settings accordingly.

### Platform and Compiler Support
- Some platform-specific behaviors changed to improve consistency and stability, such as avoiding pop-up dialogs on Windows during assertion failures.

### Exception Handling
- When exceptions are enabled, GoogleTest respects catching and reporting them as test failures. Toggle this behavior with `--gtest_catch_exceptions`.

## 4. Migration Instructions

### Transitioning from Deprecated Macros
- Replace `INSTANTIATE_TEST_CASE_P` with `INSTANTIATE_TEST_SUITE_P`.
- Replace `TYPED_TEST_CASE` and `TYPED_TEST_CASE_P` with `TYPED_TEST_SUITE` and `TYPED_TEST_SUITE_P`.

### Updating Test Naming
- Remove or avoid underscores in test and suite names to prevent conflicts.
- If mixing `TEST` and `TEST_F` in the same suite, separate tests into distinct suites or unify their fixtures.

### Handling Test Fixture Constructors
- If your fixture has only non-default constructors, add a default constructor to enable GoogleTest's automatic creation.
- Avoid fatal assertions in constructors or destructors; use `SetUp()`/`TearDown()` methods for test preparation and cleanup instead.

### Adjustments for Death Tests
- Name death test suites with the `DeathTest` suffix for proper ordering.
- For thread-safety, consider using the `threadsafe` death test style flag.

## 5. Common Pitfalls and Remediation

- Failing to use the return value of `RUN_ALL_TESTS()` leads to incorrect test result reporting.
- Using assertions in non-void-returning functions must be done carefully, avoiding fatal assertions in such contexts.
- Mixing test fixtures inadvertently can cause runtime failures with confusing error messages.
- Death tests run in sub-processes; state changes do not propagate back to the parent process.

## 6. Examples

### Migrating Deprecated Macros

```cpp
// Old
INSTANTIATE_TEST_CASE_P(MyPrefix, MyTestSuite, ::testing::Values(1,2,3));
// New
INSTANTIATE_TEST_SUITE_P(MyPrefix, MyTestSuite, ::testing::Values(1,2,3));
```

### Proper Test Naming

```cpp
// Avoid underscores in names
TEST(MyTestSuite, HandlesSimpleCase) { ... }

// Separate death test suites
class FooTest : public ::testing::Test { ... };
using FooDeathTest = FooTest;

TEST_F(FooDeathTest, FailsCorrectly) { ASSERT_DEATH(...); }
```

### Handling Fatal Failures in Subroutines

```cpp
void Helper() {
  ASSERT_TRUE(SomeCondition());
  // Further code - will be skipped if assertion fails
}

TEST(MyTest, UsesHelper) {
  Helper();
  if (HasFatalFailure()) return;  // Abort test due to fatal failure in Helper
  ...
}
```

## 7. References and Related Documentation

- [Version Timeline and Major Releases](version-timeline)
- [Notable Features and Improvements](notable-features)
- [Upgrade Guides and Best Practices](upgrade-instructions)
- [API Reference - Test Definition & Lifecycle](api-reference/core-test-api/test-definition-and-lifecycle)
- [Advanced Guide - Migrating Existing Tests](guides/getting-started/migrating-existing-tests)

---

This page empowers developers to confidently upgrade to newer GoogleTest versions while preserving test stability and taking advantage of improved features. Ensure you read the linked upgrade guides and best practices to fully leverage the frameworkâ€™s advances without regressions.