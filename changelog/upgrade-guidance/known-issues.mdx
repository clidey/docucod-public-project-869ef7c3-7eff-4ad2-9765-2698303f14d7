---
title: "Known Issues & Workarounds in Upgrades"
description: "Review known pain points and workarounds encountered during recent upgrades, including platform-specific issues, newly unsupported features, or integration pitfalls."
---

# Known Issues & Workarounds in Upgrades

Upgrading GoogleTest and GoogleMock to newer versions can introduce unforeseen challenges due to evolving feature support, platform-specific changes, or integration nuances. This document collates known pain points encountered in recent upgrades along with practical workarounds to help you navigate these obstacles smoothly, ensuring your test suite remains stable and functional.

---

## 1. Platform-Specific Issues

### 1.1 Thread Safety Conflicts on Windows

Some advanced GoogleTest features like assertions from multiple threads are currently not supported on Windows platforms. This limitation can affect the behavior of tests using multi-threaded assertions or listener events.

**Workaround:**
- Avoid triggering assertions from multiple threads concurrently on Windows.
- For concurrency tests, prefer isolating tests or using thread-safe patterns on supported platforms.
- Refer to the [Advanced GoogleTest Topics](docs/advanced.md) for guidance on thread safety and alternatives.

### 1.2 Compiler Compatibility and C++17 Requirement

GoogleTest and GoogleMock require a C++17-compliant compiler. Upgrading may expose incompatibilities with older compiler versions or configurations.

**Workaround:**
- Verify your toolchain meets the minimum compiler standards (C++17 or newer).
- Use documented supported compilers as outlined in the [Supported Platforms](overview/getting-to-know-googletest/supported-platforms.mdx) documentation.
- Update build tools or compilers as necessary before upgrading GoogleTest.

## 2. Deprecated or Removed Features

### 2.1 Legacy MOCK_METHODn Macros Removal

Older code bases may use the legacy `MOCK_METHODn` macros (e.g., `MOCK_METHOD0`, `MOCK_METHOD1`). Recent GoogleMock versions have removed these macros in favor of the generic `MOCK_METHOD` macro supporting all signatures.

**Workaround:**
- Migrate all legacy mock method declarations to the new `MOCK_METHOD` syntax.
- Update mock methods to also be declared with public visibility, as required in newer versions.
- Review detailed migration steps in the [Deprecation & Removal Notices](changelog/detailed-release-notes/deprecation-notices.mdx).

### 2.2 Explicit Public Access Requirement for Mock Methods

Previously, mock methods could be declared with any access modifier. Newer versions require mock methods to be public.

**Workaround:**
- Change mock method declarations to `public` inside your mocks.
- Use strictness wrappers (e.g., `NiceMock`, `NaggyMock`, `StrictMock`) as a recommended pattern for managing uninteresting calls and verbosity.
- Consult [Breaking Changes & Migrations](changelog/detailed-release-notes/breaking-changes.mdx) for detailed guidance.

## 3. Integration Pitfalls

### 3.1 Inconsistent Test Fixture Definitions Within Test Suites

Defining tests in the same test suite with different fixture classes or mixing `TEST` and `TEST_F` macros with identical test suite names is illegal and causes runtime errors.

**Workaround:**
- Ensure all tests in the same test suite use the exact same fixture class.
- Avoid naming collisions across namespaces and translation units.
- Where multiple fixture types are needed, use different test suite names to separate them.

### 3.2 Uninstantiated Parameterized or Typed Test Suites

Parameterized tests defined with `TEST_P` or typed tests with `TYPED_TEST_SUITE_P` must be explicitly instantiated using `INSTANTIATE_TEST_SUITE_P` or `INSTANTIATE_TYPED_TEST_SUITE_P`. Failing to do so results in tests never running and runtime failures.

**Workaround:**
- Confirm that every parameterized or typed test suite has matching instantiation.
- For test suites where it’s intentional not to instantiate, suppress warnings using:
  ```cpp
  GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(YourTestSuite);
  ```
- Check the [Parameterized and Type-Parameterized Tests](guides/advanced-testing-patterns/parameterized-type-tests.mdx) guide for best practices.

### 3.3 Mixing `TEST` and `TEST_F` in the Same Test Suite

Using `TEST` and `TEST_F` macros within the same test suite name is disallowed as `TEST_F` associates tests with a fixture class.

**Workaround:**
- Use `TEST_F` exclusively if fixture data is shared; otherwise, rename tests to ensure separation.
- Review your test suite organization to avoid overlap and unintended mixing.

## 4. Test Execution and Assertion Issues

### 4.1 Fatal Assertions in Non-void Functions

GoogleTest forbids the use of fatal assertion macros (`ASSERT_*`, `FAIL()`) inside non-void returning functions, including constructors and destructors.

**Workaround:**
- Refactor functions to be `void` if they must contain fatal assertions.
- Use the `SetUp()` and `TearDown()` methods for initialization and cleanup that require assertions.
- For constructors or destructors, avoid fatal assertions, or invoke `abort()` explicitly if critical.
- See [Assertion Placement](docs/advanced.md#assertion-placement) for additional details.

### 4.2 Side Effects in Death Tests Are Not Observable

Death tests are run in a child process, so changes to in-memory state do not persist to the parent process.

**Workaround:**
- Structure death tests such that you do not rely on observable side effects after the death test completes.
- Place any `EXPECT_CALL` setups inside the death tests themselves.
- Consult the [Death Tests](docs/advanced.md#death-tests) section for practical advice.

### 4.3 Flaky or Intermittent Failures Due to Test Ordering or State Sharing

The order of test execution is undefined. Tests sharing mutable global or static state can cause flaky failures.

**Workaround:**
- Avoid sharing mutable state between tests.
- Use `SetUpTestSuite()` and `TearDownTestSuite()` cautiously to share immutable or resettable resources.
- Carefully restore shared state before exiting each test.
- Use `--gtest_shuffle` to detect dependency problems.
- See [Performance and Scalability Best Practices](guides/real-world-guidance/performance-best-practices.mdx) for optimization.

## 5. Common Build and Link Issues

### 5.1 Missing Default Constructors for Test Fixtures

`TEST_F` requires the fixture class to have a default constructor. If a non-default constructor is declared without providing a default one, you will get compiler errors.

**Workaround:**
- Define explicit default constructors for your fixture classes if other constructors exist.
- For fixtures with `const` non-static members, initialize them correctly in your constructor initializer list.

### 5.2 Linking Undefined References for Static Const Members

Static `const` members declared inside classes but not defined outside can cause linking errors.

**Workaround:**
- Define static const members in a `.cc` file without initializers.
- If declared `constexpr`, the inline definition inside the class suffices.

## 6. Output and Logging Considerations

### 6.1 GoogleTest Output Mixed With LOG Messages

GoogleTest outputs to stdout while logging usually outputs to stderr, which can intermingle and clutter test output.

**Workaround:**
- Redirect output streams to separate files to analyze GoogleTest results cleanly.
- For example, run: `./my_test > gtest_output.txt` to capture GoogleTest output separately.

### 6.2 Disabled Tests Warnings

Tests or test suites prefixed with `DISABLED_` are compiled but not run, and GoogleTest prints a summary banner about their presence.

**Workaround:**
- Use the `--gtest_also_run_disabled_tests` flag to run disabled tests if needed.
- Monitor disabled tests and plan to re-enable or fix them appropriately.

## 7. Known Limitations Inherent to GoogleTest

- Thread-safety mechanisms are platform-dependent; assertions from multiple threads are reliably supported only on POSIX platforms with pthreads.
- Certain failure-catching macros (`EXPECT_FATAL_FAILURE`, etc.) only monitor the current thread.
- GoogleTest does not log messages from a death test’s child process unless the test fails.


## References and Further Reading

- See [Breaking Changes & Migrations](changelog/detailed-release-notes/breaking-changes.mdx) for detailed instructions on upgrading.
- Consult the [Deprecation & Removal Notices](changelog/detailed-release-notes/deprecation-notices.mdx) for managing deprecated features.
- For practical usage and advanced tactics, see [Advanced GoogleTest Topics](docs/advanced.md).
- Platform support details are in [Supported Platforms](overview/getting-to-know-googletest/supported-platforms.mdx).
- For integrating GoogleTest into your build environment, see [Project Integration](guides/real-world-guidance/project-integration.mdx).

---

<Tip>
Always keep your toolchain updated and verify test behavior incrementally when upgrading GoogleTest to detect integration issues early.
</Tip>

<Warning>
Mixing test fixtures improperly or skipping required test suite instantiations are common sources of confusing runtime errors—strictly adhere to test suite- and fixture-related best practices.
</Warning>

<Check>
Review all fixture constructors for default availability and ensure no fatal assertions reside in non-void functions, including constructors and destructors.
</Check>