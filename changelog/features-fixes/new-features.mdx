---
title: "New Features & Enhancements"
description: "Lists all major and minor features added in each update, with context and usage tips. Ensures users are aware of fresh capabilities that might streamline or expand their test coverage."
---

# New Features & Enhancements

The **New Features & Enhancements** page offers a thorough catalog of significant new capabilities introduced in each update of GoogleTest. By presenting features with context and practical usage tips, this page empowers users to discover improvements that can streamline their testing workflows and broaden their test coverage with ease.

---

## How to Use This Page

Users typically browse this page to:  
- Stay informed about major functionalities added in recent releases.  
- Understand how new features can be applied to their existing test suites.  
- Identify enhancements that may simplify test writing or improve test maintainability.

We organize the content in reverse chronological order, focusing on user-centric descriptions rather than implementation specifics.

---

## Latest Features Overview

### Value-Parameterized Tests

GoogleTest continues to enhance value-parameterized tests, enabling testing the same logic over varied inputs without redundancy:

- **Writing and Instantiating Parameterized Tests:** Define test patterns with `TEST_P` and provide parameters via `INSTANTIATE_TEST_SUITE_P`, using generators like `Values`, `Range`, and `Combine`.

- **Customizing Parameter Names:** Use custom functors or built-in `PrintToStringParamName` to produce meaningful names for test instances.

- **Abstract Tests Support:** Write reusable parameterized test definitions separately from instantiations for flexible sharing.

> **Tip:** Employ parameterized testing to dramatically cut down test duplication while covering extensive input domains.

### Typed and Type-Parameterized Tests

To test multiple data types against common test logic, GoogleTest provides the following features:

- **Typed Tests:** Use `TYPED_TEST_SUITE` and `TYPED_TEST` to run the same tests over a fixed list of types.

- **Type-Parameterized Tests:** Define templates with `TYPED_TEST_SUITE_P` and `TYPED_TEST_P` allowing separate registration and instantiation for greater flexibility.

> **Best Practice:** Typed tests help ensure consistency across type-variant implementations, improving confidence in template-based code.

### Enhanced Assertions and Matchers

GoogleTest now enables more expressive and clear test validations:

- **Predicate Assertions:** Use predicate functions returning `AssertionResult` for richer diagnostic messages in complex validation scenarios.

- **Floating-Point Comparisons:** Employ specialized predicate-format functions like `FloatLE` and `DoubleLE` to capture approximate equality with contextual failure details.

- **gMock Matchers Integration:** Leverage string and custom matchers in assertion macros such as `EXPECT_THAT` for fine-grained checks on container contents, strings, or user-defined types.

> **Example:** `EXPECT_THAT(foo_string, HasSubstr('needle'));` ensures `foo_string` contains the specified substring.

### Death Tests

Support for testing expected program termination behavior is extended:

- **ASSERT_DEATH and EXPECT_DEATH Macros:** Write tests that verify crash or exit conditions with specified messages or exit codes.

- **Threadsafe Death Test Style:** Choose between `fast` and `threadsafe` styles to balance speed with robustness in multithreaded environments.

- **Best Practices for Death Tests:** Follow naming conventions by appending `DeathTest` to the test suite for better test suite ordering and isolation.

> **Warning:** When using mocks in death tests with leak detection, allow leaks to avoid false errors.

### Test Suite and Fixture Enhancements

- **Sharing Expensive Test Resources:** Use `SetUpTestSuite()` and `TearDownTestSuite()` for per-suite resource management, minimizing redundant setup overhead.

- **Global Test Environments:** Define global fixtures by subclassing `Environment` and registering via `AddGlobalTestEnvironment()` for setup/teardown across all tests.

- **Scoped Traces:** Use `SCOPED_TRACE` and `ScopedTrace` to attach contextual information to assertions, making failures easier to diagnose.

### Test Filtering and Execution Control

- **Test Filtering Syntax:** Run subsets of tests by name patterns with positive and negative glob-style filters.

- **Sharding Support:** Distribute test execution across multiple machines or processes using `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` environment variables.

- **Repeat and Shuffle Options:** Use flags like `--gtest_repeat` and `--gtest_shuffle` to detect flaky tests and hidden test order dependencies.

- **Disabling and Enabling Tests:** Temporarily exclude tests using the `DISABLED_` prefix, optionally enabling them for selective runs.

> **Tip:** Combine these options to optimize test execution during development and CI workflows.

### Reporting and Output Features

- **XML and JSON Reports:** Generate detailed results in machine-readable formats, facilitating integration with CI systems and coverage tools.

- **Colored Terminal Output:** Improve visibility of test results using color-enabled output, configurable via `--gtest_color`.

- **Brief Mode:** Reduce noise by displaying only test failures.

- **UTF-8 Text Support:** Smart handling of UTF-8 characters in output for clearer messages across locales.

### Extensibility and Debugging

- **Event Listener API:** Attach custom listeners to track test execution, customize reporting, or augment diagnostic output.

- **Custom Value Printers:** Enhance failure messages by teaching GoogleTest how to print your custom types using `AbslStringify()` or `PrintTo()`.

- **Failure Catching in Tests:** Use macros like `EXPECT_FATAL_FAILURE` to verify that your test utilities report failures correctly.

### Integration and Build

- **C++17 Requirement:** GoogleTest now mandates a C++17 compatible compiler and standard library.

- **CMake Support and Options:** Leverage provided CMake functions and options for smooth incorporation and linking, including options for building shared vs static libraries.

- **Visual Studio Runtime Selection:** Use `gtest_force_shared_crt` option to resolve runtime conflicts in Visual Studio builds.

---

## Detailed User Workflows

### Writing Parameterized Tests

```cpp
class FooTest : public testing::TestWithParam<int> {};

TEST_P(FooTest, WorksForAllParams) {
  int param = GetParam();
  EXPECT_TRUE(Foo(param).Calculate() > 0);
}

INSTANTIATE_TEST_SUITE_P(
    PositiveValues, FooTest,
    testing::Values(1, 2, 3, 4));
```

> This example runs the same test with input values 1 through 4.

### Using Typed Tests

```cpp
template <typename T>
class NumericTest : public testing::Test {
 public:
  T value_ = T();
};

using NumericTypes = ::testing::Types<int, float, double>;
TYPED_TEST_SUITE(NumericTest, NumericTypes);

TYPED_TEST(NumericTest, DefaultIsZero) {
  EXPECT_EQ(this->value_, 0);
}
```

> This runs the `DefaultIsZero` test for each type listed.

### Adding Scoped Trace for Better Debugging

```cpp
void CheckVector(const std::vector<int>& v) {
  SCOPED_TRACE("Inside CheckVector");
  EXPECT_EQ(v.size(), 3);
}

TEST(TraceTest, Basic) {
  CheckVector({1, 2, 3});
  CheckVector({1, 2});  // Fails with trace in message.
}
```

> The trace adds the scope context to failure messages.

### Skipping Tests at Runtime

```cpp
TEST(FooTest, MaySkip) {
  if (!SystemSupportsFeature()) {
    GTEST_SKIP() << "Feature not supported";
  }
  EXPECT_TRUE(FeatureWorks());
}
```

> Use `GTEST_SKIP()` to gracefully skip tests when preconditions arenâ€™t met.

---

## Common Pitfalls and Best Practices

- Avoid underscores (`_`) in test suite and test names to ensure compatibility with filtering and reporting.
- Use `EXPECT_` macros when possible to allow multiple failures in one test.
- Use per-test-suite setup/teardown when expensive resources are shared and immutable.
- Follow naming conventions for death tests (test suite names ending with `DeathTest`).
- Use `ScopedTrace` or `SCOPED_TRACE` to improve failure diagnostics in helper functions.
- Carefully manage parameters in typed and parameterized tests to avoid dangling references.

---

## Troubleshooting

- If tests do not run as expected, verify filters and shard environment variables.
- For flaky tests, repeat and shuffle test runs to diagnose order dependencies.
- Ensure your compiler supports C++17 or later per GoogleTest requirements.
- Use `EXPECT_FATAL_FAILURE` constructs to verify your custom test utilities.

---

## Related Documentation

- [GoogleTest Primer](primer.md): Getting started with test writing basics.
- [Advanced GoogleTest Topics](advanced.md): Deep dives on test fixtures, assertions, death tests.
- [Value-Parameterized Tests Guide](advanced.md#value-parameterized-tests): Detail on parameterized tests.
- [Typed Tests Guide](advanced.md#typed-tests): Using typed and type-parameterized tests.
- [Assertions Reference](reference/assertions.md): Comprehensive assertion macros.
- [Mock Object Construction](api-reference/gmock-api/mock-object-construction.mdx): For mocking with GoogleMock.
- [Test Lifecycle](concepts/core-architecture/test-lifecycle): Understanding test execution flow.

---

## External Resources

- GitHub Repository: https://github.com/google/googletest
- Official Documentation Site: https://google.github.io/googletest/

---

Users expanding their GoogleTest usage will gain immediate value from this page by aligning their test suites with the freshest capabilities. For seamless upgrade paths, consult the [Upgrade Tips & Best Practices](changelog/upgrade-guidance/upgrade-tips.mdx) and the [Breaking Changes & Migrations](changelog/upgrade-guidance/breaking-changes.mdx) documents.

---

*This page is integral to the **Changelog** tab in the documentation and harmonizes with the broader **Guides** and **API Reference** sections for a comprehensive learning journey.*