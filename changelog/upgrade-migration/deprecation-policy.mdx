---
title: "Deprecations & Removal Schedule"
description: "A clear listing of deprecated features, timeline to removal, and recommended alternatives. Enables proactive remediation and futureproofing of user test suites."
---

# Deprecations & Removal Schedule

This page provides a clear and actionable listing of features within GoogleTest and GoogleMock that have been deprecated, the timeline for their removal, and recommended alternatives. It empowers users to proactively update their test suites, ensuring long-term compatibility and leveraging the latest improvements in the framework.

---

## Understanding Deprecations

Features and APIs may be deprecated to improve the frameworkâ€™s design, performance, and usability. Deprecation means these features are **still supported but discouraged** and will be removed in a future release. Continuing to rely on deprecated features risks breaking tests as the code base evolves.

### Why You Should Track Deprecations

- **Maintain Forward Compatibility**: Keep your code ready for upcoming releases.
- **Reduce Technical Debt**: Avoid accumulating legacy constructs that are harder to maintain.
- **Leverage Improved APIs**: Benefit from newer, improved, and more robust replacements.


## Feature Deprecation Timeline

| Feature               | Deprecated In | Scheduled Removal Version | Suggested Alternative                                                  |
|-----------------------|---------------|---------------------------|------------------------------------------------------------------------|
| **Old-style MOCK_METHODn macros** | v1.10.0       | v2.0.0                   | Use the new `MOCK_METHOD` macro introduced since v1.10.0             |
| **Unprotected use of `NULL` in EXPECT_NE/ASSERT_NE** | v1.12.0       | v2.0.0                   | Use `nullptr` or use `EXPECT_THAT` with matchers                     |
| **Non-virtual destructors in mocks** | Ongoing       | Ongoing                   | Ensure your mock classes have virtual destructors                    |
| **Test names with underscores (`_`) leading or trailing** | Documentation Update | N/A                       | Avoid `_` at start/end; see [Test Naming](../docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)  |


## Deprecated Feature Details

### Old-Style MOCK_METHODn Macros

Older `MOCK_METHODn` macros have been superseded by the more versatile and consistent `MOCK_METHOD` macro. They lack support for some newer qualifiers and may have parsing issues with argument lists containing commas.

**User Impact:**
- Continue to work currently but will be removed by v2.0.0.
- Migration should occur to `MOCK_METHOD` as soon as practical.

**Action:**
- Refactor mock method definitions following the new syntax:

```cpp
// Old:
MOCK_METHOD1(Foo, bool(int));

// New:
MOCK_METHOD(bool, Foo, (int));
```

Learn more from [Mocking Reference](../docs/reference/mocking.md#MOCK_METHOD) and [gMock Cookbook](../docs/gmock_cook_book.md).

### Use of `NULL` in Pointer Assertions

GoogleTest allowed using `NULL` in some assertion macros like `EXPECT_EQ`, but support for `NULL` in `EXPECT_NE` and `ASSERT_NE` was never provided due to language limitations.

**User Impact:**
- Prefer `nullptr` instead of `NULL` for pointer comparisons.
- Consider switching to matcher-based assertions using `EXPECT_THAT` for expressive clarity.

Example:

```cpp
EXPECT_EQ(ptr, nullptr);
EXPECT_THAT(ptr, testing::NotNull());
```

See detailed explanation in [FAQ](../docs/faq.md#why-does-google-test-support-expect_eqnull-but-not-expect_ne-null).

### Virtual Destructors in Mock Classes

Mock classes must have virtual destructors to avoid undefined behavior and memory leaks when deleted through a base pointer.

**User Impact:**
- If your mock classes do not have virtual destructors, you may encounter runtime errors or memory leaks.

**Action:**
- Always declare virtual destructors in your mock classes.

Example:

```cpp
class MockFoo : public Foo {
 public:
  virtual ~MockFoo() override = default;
  MOCK_METHOD(void, Bar, (), (override));
};
```

### Test Suite and Test Naming Conventions

Using underscores `_` leading or trailing in test suite names or test names can cause collisions and undefined behavior due to C++ naming conventions used internally.

**User Impact:**
- It can cause compiler issues or test registration conflicts in your test binary.

**Action:**
- Avoid leading or trailing underscores in `TEST` or `TEST_F` names.
- See [Test Naming FAQ](../docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).


## Recommended Migration Path

1. **Audit your test suites and mocks** for use of deprecated features.
2. **Refactor mock method declarations** to use the newer `MOCK_METHOD` macro.
3. **Update pointer comparison assertions** to use `nullptr` or matchers instead of `NULL` in restrictive contexts.
4. **Ensure all mock classes have virtual destructors.**
5. **Rename tests and suites** if they violate underscore conventions.
6. **Leverage `ON_CALL` and `EXPECT_CALL` appropriately** to refine mock behavior without over-constraining your tests.


## Proactive Remediation Tips

- Use compile-time checks and static analyzers to catch deprecated constructs early.
- Enable verbose warnings in your build system for GoogleTest and GoogleMock.
- Gradually update your codebase alongside GoogleTest releases rather than large batch upgrades.
- Review release notes and breaking changes documented in [Breaking Changes & Migration Notes](../changelog/upgrade-migration/breaking-changes) regularly.


## Future Removal Plan

We follow a **semantic versioning** policy with clear deprecation schedules:

- Major releases (e.g., v2.0.0) remove features deprecated in prior minor releases.
- Minor releases introduce new deprecations with considerable user notice.

For updated removal timelines, always consult the official release notes and upgrade checklists.


## Troubleshooting Common Issues with Deprecated Features

- **Mock method not recognized or fails to compile**: Verify you use the current `MOCK_METHOD` macro with correct syntax.
- **Unexpected behavior with pointer comparisons**: Replace `NULL` with `nullptr` and verify matcher usage.
- **Memory leaks involving mocks**: Check for missing virtual destructors.
- **Test registration conflicts or failures**: Inspect test names for improper underscores.

Use the [GoogleTest FAQ](../docs/faq.md) and [Mocking Best Practices](../guides/mocking-and-test-doubles/mocking-best-practices.mdx) for further help.


## Resources

- [Mocking Reference: MOCK_METHOD](../docs/reference/mocking.md#MOCK_METHOD)
- [FAQs: Test Names and Assertions](../docs/faq.md)
- [Breaking Changes & Migration Notes](../changelog/upgrade-migration/breaking-changes)
- [GoogleMock Cookbook](../docs/gmock_cook_book.md)
- [GoogleTest Primer](../guides/getting-started/writing-basic-tests.mdx)

---

This page is part of the [Changelog & Upgrade Guidance section](/changelog/upgrade-migration/).

<Info>
Keep this page bookmarked and refer to it before upgrading your GoogleTest/GoogleMock versions to stay ahead of deprecated features and ensure smooth migration.
</Info>
