---
title: "Breaking Changes"
description: "Carefully review changes that are not backward compatible. The page breaks down what has changed, why it matters, and which actions users must take to ensure compatibility with the latest release."
---

# Breaking Changes

As GoogleTest evolves, certain modifications may not maintain backward compatibility. This page outlines the breaking changes introduced in recent versions, explains their impacts, and provides guidance for migrating your tests to work seamlessly with the latest release.

---

## 1. Overview of Breaking Changes

Breaking changes may affect your existing tests, build scripts, or test fixtures. Understanding these changes early helps prevent unexpected test failures and integration issues.

The GoogleTest team prioritizes stability but occasionally must introduce breaking changes for long-term improvements, API clarity, or technical necessities.

---

## 2. Common Categories of Breaking Changes

- **Test Macro Restrictions:** Naming conventions or usage restrictions enforced on test suite and test names.
- **Fixture Behavior Changes:** Adjustments in test fixture lifecycle or usage rules.
- **Assertion and Matcher APIs:** Modifications affecting assertion macros or matcher usage.
- **Build and Runtime Requirements:** Updated compiler or platform requirements.
- **Deprecations Leading to Removals:** Features deprecated in earlier versions now removed.

---

## 3. Key Breaking Changes in Recent Releases

### 3.1 Underscore Restrictions in Test and Test Suite Names

GoogleTest now enforces stricter rules restricting the use of underscore characters (`_`) in test suite and test names used with `TEST` and `TEST_F` macros. This change prevents naming collisions and reserved identifier conflicts caused by generated class names.

#### Reasoning and Examples:
- The underscore character is reserved by the C++ standard for identifiers used by the implementation.
- GoogleTest's internal mechanism generates class names by combining test suite and test names with underscores. If either contains underscores, name collisions or reserved identifier usage can occur.

#### What You Must Do:
- Avoid using underscores in `TestSuiteName` and `TestName` in `TEST` and `TEST_F`.
- Use alphanumeric characters without underscore as a best practice.

#### Example Problematic Code:
```cpp
TEST(My_TestSuite, Some_Test) { ... }  // May cause collisions
```

#### Correct Usage:
```cpp
TEST(MyTestSuite, SomeTest) { ... }
```

For full rationale, see the note on naming restrictions in the [GoogleTest FAQ](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore).

---

### 3.2 Removal of Support for `EXPECT_NE(NULL, ptr)` and `ASSERT_NE(NULL, ptr)`

While GoogleTest supports `EXPECT_EQ(NULL, ptr)` and `ASSERT_EQ(NULL, ptr)` to maintain backward compatibility,
it does not support using `EXPECT_NE(NULL, ptr)` or `ASSERT_NE(NULL, ptr)` due to technical and maintenance reasons.

#### What Changed:
- Using `EXPECT_NE(NULL, ptr)` or `ASSERT_NE(NULL, ptr)` will not compile or work as expected.
- Instead, use `EXPECT_NE(ptr, nullptr)` or employ `EXPECT_TRUE(ptr != NULL)`.

#### Why:
- Supporting negative pointer comparisons with NULL would complicate template meta-programming.
- The recommended modern C++ usage is to use `nullptr` rather than `NULL`.

Refer to the detailed explanation in [FAQ: Why does GoogleTest support EXPECT_EQ(NULL, ptr) but not EXPECT_NE(NULL, ptr)?](docs/faq.md#why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr)

---

### 3.3 Test Fixture Constructors and Assertion Placement

GoogleTest no longer permits fatal assertions (e.g., `ASSERT_*()`, `FAIL()`) inside test fixture constructors and destructors.

#### Implications:
- Fatal assertions must be placed in `SetUp()` and `TearDown()` methods rather than constructors or destructors.
- Assertion macros like `EXPECT_*()` that generate non-fatal failures still have some flexibility.

#### Migration Steps:
- Move any fatal assertions out of constructors and destructors.
- Use `SetUp()` for initialization that can fail with assertions.
- Use `TearDown()` for clean-up that may fail gracefully.

This change ensures reliable behavior and compatibility with exception handling policies.

For more guidance, see the FAQ on [Choosing between constructor/destructor and SetUp/TearDown](docs/faq.md#CtorVsSetUp).

---

### 3.4 Test Suite Naming for Death Tests

GoogleTest enforces that test suites containing death tests use names ending with `DeathTest`.

#### Impact:
- Test suites that contain death tests (e.g., using `EXPECT_DEATH`) must be named accordingly.
- This naming helps GoogleTest run death tests in a separate phase to avoid interference and threading issues.

#### Workaround:
- If you want to share fixtures between death and non-death tests, create an alias fixture:

```cpp
class FooTest : public ::testing::Test { ... };
using FooDeathTest = FooTest;

TEST_F(FooTest, NormalTest) { ... }
TEST_F(FooDeathTest, DeathTest) { EXPECT_DEATH(...); }
```

See the [Advanced GoogleTest Topics - Death Tests](docs/advanced.md#death-tests) and FAQ entries for detailed rationale.

---

### 3.5 Changes in Typed and Parameterized Tests

Several updates enforce stricter naming conventions and fixture requirements for typed and value-parameterized tests.

#### What Changed:
- `SetUpTestSuite()` and `TearDownTestSuite()` must be declared `public` (not `protected`) if used in parameterized tests.
- Test suite and test names in parameterized tests should avoid underscores.
- Missing instantiation of parameterized tests now results in a failing test suite by default.

Refer to the [Advanced GoogleTest Topics](docs/advanced.md#value-parameterized-tests) and [FAQ on Parameterized Type Tests](faq/feature-usage-behavior/parameterized-type-tests-faq.md) for usage and migration guidance.

---

### 3.6 Removal or Deprecation of Obsolete APIs

In line with modern C++ standards and to reduce maintenance overhead, some older GoogleTest APIs and macros have been deprecated or removed.

#### What to Watch For:
- Deprecated assertion macros or flag options.
- Removal of support for compilers or platforms not meeting minimum requirements (C++17 or later required as of version 1.17.0).

Stay updated with the release notes and upgrade guides to know which APIs may be affected.

---

## 4. Migration Guidance

To maintain compatibility and leverage improvements, follow these practices when upgrading:

- Review your test names and ensure no underscores or invalid identifiers.
- Replace `NULL` with `nullptr` in assertions.
- Shift fatal assertions out of constructors/destructors and into `SetUp()`/`TearDown()`.
- Rename death test suites to end with `DeathTest`, or use fixture aliases.
- Update your parameterized and typed tests according to visibility and naming constraints.
- Verify that your build system uses at least C++17 standard.

If you encounter build or runtime errors related to these changes, consult relevant FAQ and guides for detailed remediation steps.

---

## 5. Example: Updating Test Names

Before:

```cpp
TEST(Foo_Bar, Baz_Qux) {
  EXPECT_EQ(1, 1);
}
```

After:

```cpp
TEST(FooBar, BazQux) {
  EXPECT_EQ(1, 1);
}
```

This simple renaming avoids clashes due to underscore interpretation in generated class names.

---

## 6. Additional Resources

- [GoogleTest FAQ - Naming Restrictions and Best Practices](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Advanced GoogleTest Topics](docs/advanced.md) including Death Tests and Parameterized Tests
- [Assertions Reference](docs/reference/assertions.md) for updated assertion usage
- [GoogleTest Migration Guide](changelog/upgrade-migration/migration-guide.md) for release-specific instructions

---

## 7. Contact and Feedback

If you experience issues migrating or require clarifications, please report via the [GoogleTest GitHub Issues](https://github.com/google/googletest/issues) with specific details.

Your feedback helps us improve GoogleTest with clearer migration paths and minimized disruption.

---

*This breaking changes documentation will be updated alongside major and minor releases. Please review it regularly to keep your test suites compliant and efficient.*
