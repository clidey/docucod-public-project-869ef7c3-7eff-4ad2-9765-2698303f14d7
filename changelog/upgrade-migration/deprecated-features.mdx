---
title: "Deprecation Notices"
description: "Lists current and upcoming deprecated features, macros, and APIs, including removal timelines and recommended alternatives for sustained compatibility."
---

# Deprecation Notices

GoogleTest and GoogleMock continually evolve to provide modern, safe, and performant testing frameworks for C++ developers. This document lists current and upcoming deprecated features, macros, and APIs within the GoogleMock framework, along with recommended alternatives and guidance to ensure your tests remain compatible and maintainable.

---

## Why Pay Attention to Deprecation?

Deprecation signals that a feature is planned for removal in future releases. It allows you to prepare your code ahead of time and migrate smoothly without surprises. Ignoring deprecation warnings may lead to broken tests or compilation errors in subsequent versions.

---

## Current Deprecated Features and APIs

### 1. Old-Style `MOCK_METHODn` Macros

GoogleMock initially provided a family of macros like `MOCK_METHOD0`, `MOCK_CONST_METHOD1`, etc., to declare mock methods. These macros have been superseded by the generic `MOCK_METHOD` macro introduced in 2018.

- **Deprecated:** `MOCK_METHODn`, `MOCK_CONST_METHODn`, `MOCK_METHODn_T`, and their `_WITH_CALLTYPE` variants
- **Why Deprecated:** The generic `MOCK_METHOD` macro supports qualifiers, calltypes, and templated usage more clearly and consistently.
- **Recommended Alternative:** Use the new `MOCK_METHOD` macro with the signature:

```cpp
MOCK_METHOD(ReturnType, MethodName, (Args...), (Qualifiers));
```

- **Migration Advice:** Replace old `MOCK_METHODn` lines with a corresponding `MOCK_METHOD` syntax. For most cases, the migration is a matter of switching from:

```cpp
MOCK_METHOD1(Foo, bool(int));

// to

MOCK_METHOD(bool, Foo, (int));
```

- See the [Mock Methods documentation](../api-reference/mocking-framework/mock-methods.md) and [gMock Cookbook](../docs/gmock_cook_book.md#Legacy-macros) for detailed migration examples.

---

### 2. Legacy Action Macros

The pre-C++11 `ACTION`, `ACTION_P`, and related macros for defining actions are still supported but discouraged.

- **Deprecated:** Legacy action macros in favor of callable objects such as lambdas, functors, or the C++11 `std::function` with `Invoke()` usage.
- **Why Deprecated:** Modern C++ features provide clearer syntax, better type safety, and more flexibility.
- **Recommended Alternative:** Define actions using lambdas or functors, for example:

```cpp
EXPECT_CALL(mock, Foo(_))
  .WillOnce([](int param) { return param + 10; });
```

- Refer to the [gMock Cookbook section on New Actions](../docs/gmock_cook_book.md#Writing-New-Actions) for guidance.

---

### 3. Unchecked Multiple Bindings in `EXPECT_CALL`

Older versions allowed setting expectations out of order or after exercise, which led to undefined behavior.

- **Deprecated:** Setting new expectations on mocks after their methods have been called or after transferring ownership.
- **Recommended Best Practice:** Always set all expectations before code under test invokes mock methods.

See [Using Mocks in Tests](../docs/gmock_for_dummies.md#Using-Mocks) and the [Legacy gMock FAQ](../docs/gmock_faq.md#expectation-ordering) for reasoning.

---

### 4. Non-Virtual Mocking Patterns Without Explicit Template Usage

Mocking non-virtual methods through unrelated mocks without specifying templates is fragile and discouraged.

- **Deprecated:** Implicit mocking of non-virtual methods without using template-based mocks.
- **Recommended Alternative:** Use the explicit template or interface-based design to ensure correct mocking behavior.

Refer to the [gMock Cookbook on Mocking Non-virtual Methods](../docs/gmock_cook_book.md#Mocking-Non-virtual-Methods) for alternatives.

---

## Planned Removals Timeline

Features listed as deprecated above will be removed in a future major release. It is strongly recommended to:

- Update your mocks and tests to use the modern `MOCK_METHOD` macro.
- Replace legacy action macros with lambdas or callable objects.
- Avoid setting expectations after exercising mocks.
- Transition non-virtual mocking to explicit template usage or interfaces.

Check the [All Release Notes](../changelog/releases-version-history/all-versions-overview.md) and [Breaking Changes & Migration Guide](../changelog/upgrade-migration/breaking-changes-migration.md) for precise versioning and migration timing.

---

## How to Identify Deprecated Usages

- Build your tests with the latest GoogleMock version.
- Enable compiler warnings or `--gmock_verbose=info` for detailed diagnostics.
- Use static analysis tools that can scan for deprecated macros or practices.

---

## Recommended Migration Workflow

<Steps>
<Step title="Audit Mock Classes and Tests">
Review your mock class declarations and tests to identify usages of deprecated macros and patterns.
</Step>
<Step title="Replace `MOCK_METHODn` with `MOCK_METHOD`">
Update all mock method declarations to use the modern `MOCK_METHOD` syntax.
</Step>
<Step title="Replace Legacy Action Macros">
Switch action implementations to use C++11 lambdas or callable objects instead of `ACTION` macros.
</Step>
<Step title="Verify Expectation Placement">
Ensure all `EXPECT_CALL` and `ON_CALL` statements precede any calls to the mock methods.
</Step>
<Step title="Run Tests with Verbose Logs">
Run your tests with `--gmock_verbose=info` to catch any unintentional deprecated usage or warnings.
</Step>
<Step title="Consult Documentation for Complex Cases">
If your mocks involve advanced features like non-virtual mocking or complex legacy patterns, consult the [gMock Cookbook](../docs/gmock_cook_book.md) and [Breaking Changes & Migration Guide](../changelog/upgrade-migration/breaking-changes-migration.md).
</Step>
</Steps>

---

## Tips and Best Practices

- Start new projects directly with the modern `MOCK_METHOD` macro.
- Avoid multi-level template or macro wrappers that complicate migration.
- Always mock virtual methods to ensure compatibility.
- Utilize `NiceMock` and `StrictMock` wrappers mindfully, as they influence uninteresting calls behavior.
- Keep your mocks and fixtures small and focused to reduce complexity.
- Regularly review release notes and migration guides when upgrading GoogleMock.

---

## Troubleshooting Deprecated Feature Issues

<Accordion title="Compilation Errors After Removing `MOCK_METHODn` Macros">
If your test fails to compile after switching macros, ensure you have fully updated the macro usage including qualifiers and parentheses around argument lists with commas.
</Accordion>

<Accordion title="Unexpected Behavior After Changing Action Definitions">
Verify that your new lambdas or callable objects match the mock method signature exactly and that lifetimes of captured variables are sufficient.
</Accordion>

<Accordion title="Warnings About Setting Expectations After Calls">
Review the test flow to confirm all expectations are declared before exercising mocks; reorganize test code if necessary.
</Accordion>

---

## Additional Resources

- [Mocking Reference](../docs/reference/mocking.md)
- [gMock Cookbook](../docs/gmock_cook_book.md)
- [Breaking Changes & Migration Guide](../changelog/upgrade-migration/breaking-changes-migration.md)
- [Mock Methods API Reference](../api-reference/mocking-framework/mock-methods.md)
- [gMock for Dummies](../docs/gmock_for_dummies.md)

---

## Stay Updated

GoogleTest and GoogleMock recommend following the [GitHub repository](https://github.com/google/googletest) and release notes regularly to anticipate upcoming deprecations and leverage new features that enhance test robustness and developer experience.
