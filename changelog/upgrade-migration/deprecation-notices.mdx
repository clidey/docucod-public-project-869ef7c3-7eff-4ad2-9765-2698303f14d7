---
title: "Deprecations & Removals"
description: "Lists features, flags, or APIs slated for removal or officially deprecated. Explains timelines, recommended alternatives, and impact on user projects."
---

# Deprecations & Removals

This documentation page details the features, flags, APIs, and components within GoogleTest and GoogleMock that are officially deprecated or slated for removal in future releases. Understanding these deprecations and removals is essential for maintaining compatibility and ensuring smooth migration of your test code.

---

## Overview

GoogleTest and GoogleMock strive to maintain a stable and usable API while evolving to support modern C++ standards and user needs. From time to time, certain legacy features or less efficient APIs are deprecated and eventually removed to streamline the framework, improve reliability, and reduce maintenance overhead.

This page provides:

- A clear list of deprecated features and APIs associated with mocking.
- Timelines and policies regarding their removal.
- Recommended alternatives and migration advice.
- Impact considerations to help you plan your upgrade path.

---

## Deprecated Mocking APIs and Features

### Old-Style `MOCK_METHODn` Macros

**Status:** Deprecated and slated for removal in future major versions.

GoogleMock originally provided a family of macros named `MOCK_METHODn` (e.g., `MOCK_METHOD1`, `MOCK_CONST_METHOD1`, etc.) for defining mock methods. These are superseded by the more powerful and simpler generic `MOCK_METHOD` macro, which better supports qualifiers, call types, attributes, and modern C++ features.

**Why Deprecated:**

- The old macros require specifying the arity as part of the macro name, making mocks more verbose and error-prone.
- Less flexible with recent C++ features like reference qualifiers and `noexcept`.

**Recommended Alternative:**

Use the generic `MOCK_METHOD` macro consistently:

```cpp
// Old style (deprecated):
MOCK_METHOD1(Foo, bool(int));

// New style (recommended):
MOCK_METHOD(bool, Foo, (int));
```

Please wrap argument or return types containing commas in extra parentheses or use type aliases to avoid parsing issues with complex types.

**Migration Tips:**

- Replace all instances of `MOCK_METHODn` macros with the appropriate `MOCK_METHOD` calls.
- Review usages with const, noexcept, and reference qualifiers — add the corresponding qualifiers in the fourth argument to `MOCK_METHOD`.

---

### Strictness Modifiers Wrappers: `NiceMock`, `NaggyMock`, and `StrictMock`

**Status:** Not deprecated but usage guidance has evolved.

While these wrappers are still fully supported, it is recommended to use them judiciously:

- **NiceMock:** Suppresses warnings on uninteresting calls. Recommended as the default choice for most tests.
- **NaggyMock:** Prints warnings on uninteresting calls (the current default). Use during test development or debugging.
- **StrictMock:** Treats uninteresting calls as test failures. Should be used sparingly to avoid brittle tests.

**Best Practices:**

- Favor `NiceMock` in your tests to reduce noise while preserving correct behavior verification.
- Use `NaggyMock` temporarily to debug unexpected uninteresting calls.
- Reserve `StrictMock` for critical interfaces where any unexpected call is absolutely an error.

---

## Deprecated Features to Be Removed

### Mocking Non-virtual Methods Technique

Previously, the high-performance dependency injection technique, which mocks non-virtual methods by defining an unrelated mock class with the same method signatures, was considered advanced and is maintained for compatibility. Although not formally deprecated, users are encouraged to adopt interface-based design, which enhances testability and design clarity.

### Delegating Calls to Fakes or Real Objects Pattern

Supported and recommended but may be replaced or enhanced in future versions with more direct mechanisms. No immediate removal planned.

### Old-Style Action Macros (`ACTION`, `ACTION_P`, etc.)

While still supported, these macros are discouraged in favor of more readable and explicit C++11 (and later) style lambdas and functors for defining actions, providing better type safety and maintainability.


---

## Removal Timeline and Policy

GoogleTest and GoogleMock adhere to semantic versioning. Official API deprecations are propagated with advisory warnings for at least one minor release before removal in a future major release.

- Deprecated `MOCK_METHODn` macros will continue to generate compiler warnings until removed in a future major release.
- Users are encouraged to migrate promptly to prevent build breaks during upgrades.

For any deprecation, check the release notes and upgrade guides for specific version-related timelines and instructions.

---

## Migration Strategy and Best Practices

When confronted with a deprecated or removed feature, we advise the following user flow:

1. **Identify Usage:** Search your codebase for deprecated APIs or macros.
2. **Assess Impact:** Review how extensively each is used and note any complex usage (e.g. with overloads or templates).
3. **Replace with Recommended API:** For mocking methods, shift from old `MOCK_METHODn` macros to `MOCK_METHOD`. For actions, prefer C++ lambdas and `Invoke` over old `ACTION` macros.
4. **Test Thoroughly:** After migration, run your full suite with `--gmock_verbose=info` to detect unexpected behavior.
5. **Suppress Warnings Temporarily:** Where necessary, use `NiceMock` or specific `EXPECT_CALL().Times(AnyNumber())` to avoid noise during transition.
6. **Review Strictness Settings:** Choose mock strictness wrappers (`NiceMock`, `StrictMock`) wisely to balance robustness and maintenance overhead.

---

## Common Pitfalls and Troubleshooting

- **Parsing Errors with `MOCK_METHOD`:** Ensure types with commas are wrapped in extra parentheses or use type aliases.
- **Mock Method Accessibility:** Always place `MOCK_METHOD` macros within the `public:` section, even if the original method is private or protected.
- **Overloads:** When mocking overloaded methods, mock all variants or bring unmocked overloads into scope with `using BaseClass::Method` to avoid hiding base class methods.
- **Destructor Mocking:** Since destructors cannot be mocked directly, use a proxy mock method like `Die()` called from the destructor and set expectations on that.
- **Uninteresting Calls:** If you see warnings about uninteresting calls, consider whether they are expected or require an added `EXPECT_CALL` or `NiceMock` usage.

---

## References and Further Reading

- [`gMock Cookbook`](https://google.github.io/googletest/gmock_cook_book.html) — detailed recipes for mocking including modern APIs and best practices.
- [`Mock Objects and Methods`](../api-reference/mocking-actions-matchers/mock-objects-and-methods.md) — API reference for defining mocks and mock methods.
- [`Breaking Changes`](../changelog/upgrade-migration/breaking-changes.md) — important notices about API changes and migration.
- [`Mocking Strategies and Strictness`](../concepts/mocking-strategies-extensibility/strictness-and-behavior.md) — conceptual overview of mock strictness modes.
- [`Troubleshooting Setup`](../getting_started/first_test_and_validation/troubleshooting_setup.md) — common issues including deprecated constructs.


---

<center>--- End of Deprecations & Removals ---</center>
