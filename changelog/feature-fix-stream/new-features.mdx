---
title: "What's New"
description: "Showcases recent innovations—from new matchers and assertions to improved integration options—highlighting how these features enhance developer productivity and testing confidence."
---

# What's New

Welcome to the What's New page, your go-to destination for discovering the latest enhancements in GoogleTest and GoogleMock. Here, we spotlight recent innovations—from new matchers and assertions to improved integration options—that empower you to write more expressive tests, strengthen confidence in your testing outcomes, and accelerate your development workflow.

---

## Recent Feature Highlights

### 1. Expanded and More Expressive Matchers
The matcher library has been enriched with several new built-in matchers that enable you to specify expectations more precisely while keeping tests clean and readable. These include compound matchers and advanced container matching helpers like `ElementsAre`, `UnorderedElementsAre`, and multi-argument tuple matchers. You can now effortlessly describe complex argument conditions using intuitive matchers, drastically improving both the quality and maintainability of your tests.

**Example:**
```cpp
EXPECT_CALL(mock_obj, ProcessData(ElementsAre(1, Gt(5), _)));  // Matches container with first element 1, second element > 5, third any.
```

### 2. Enhanced Assertion Capabilities
New assertion macros and improvements have been introduced to provide more expressive and granular verification in your tests. Leveraging matchers within assertions (`EXPECT_THAT`) allows flexible and readable checks against complex data structures or custom types.

### 3. Improved Integration Options
The integration story with build systems and continuous integration (CI) platforms has been made smoother. For instance, tighter support for CMake and Bazel configurations facilitates easier incorporation of GoogleTest and GoogleMock into diverse project setups. This improvement helps you focus on writing tests without friction.

### 4. Better Mocking Semantics and Tools
We've introduced refinements in mocking behaviors, including stricter and nicer mocks to help control uninteresting and unexpected calls effectively. Features such as `NiceMock`, `NaggyMock`, and `StrictMock` simplify management of mock strictness levels, giving you flexibility to balance between test strictness and convenience.

Moreover, new support for mocking move-only types (like `std::unique_ptr`) and improved handling of overloaded methods adds robustness to your mocking strategy.

### 5. Usability Enhancements and Debugging Aids
Verbose logging modes and richer messages when expectations fail help you quickly pinpoint issues. Activating `--gmock_verbose=info` gives you detailed call traces including argument values and stack traces, making test debugging intuitive and efficient.

---

## What's New in Test Writing and Expectations

### Defining Mock Classes with Improved Macros
Use the streamlined `MOCK_METHOD` macro to declare mock methods in your mock classes. The macro supports qualifiers like `const`, `override`, `noexcept`, and calling conventions for platform-specific needs.

Example:
```cpp
class MockCalculator : public Calculator {
 public:
  MOCK_METHOD(int, Add, (int a, int b), (override));
  MOCK_METHOD(void, Reset, (), (override));
};
```

### Setting Expectations with Flexible Argument Matching
Utilize `EXPECT_CALL(mock, Method(matchers))` to declare your expectations before exercising the mock. Counters such as `.Times()`, ordering through `.InSequence()`, partial ordering via `.After()`, and flexible argument matchers (like `_`, `Ge()`, `Ne()`) make your tests precise yet resilient.

Example with cardinalities and ordering:
```cpp
Sequence s;
EXPECT_CALL(mock, Connect(_)).Times(1).InSequence(s);
EXPECT_CALL(mock, Send(_)).Times(AtLeast(2)).InSequence(s);
```

### Default Behavior vs Expectations
`ON_CALL` allows you to specify default behaviors for mock methods without imposing strict call expectations. This is particularly useful for methods whose invocation is not the focus of your test.

Example:
```cpp
ON_CALL(mock, GetData(_)).WillByDefault(Return(default_value));
```

### Advanced Mock Actions
You can define custom actions using lambdas or function objects to simulate complex behaviors or side effects. Chaining actions with `DoAll`, returning references with `ReturnRef`, and invoking callables passed as mock arguments using `Invoke` or `InvokeArgument` add great flexibility.

### Controlling Strictness
Choose between `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` to fine-tune whether uninteresting calls generate warnings or errors, enabling you to write tests at the right level of strictness for your needs.

---

## Practical Tips and Best Practices

- **Write Clear Expectations Early:** Always put your `EXPECT_CALL` statements before exercising mock objects to avoid undefined behavior.
- **Use Matchers Judiciously:** Specify only necessary matchers to avoid brittle tests. Use wildcard matcher `_` when argument values are irrelevant.
- **Manage Mock Object Lifetimes:** Verify expectations promptly using `Mock::VerifyAndClearExpectations` if managing mock ownership is complex.
- **Utilize Sequences and Ordering Only When Needed:** Overly strict order requirements can make tests fragile; prefer partial order (`After`, `InSequence`) for meaningful order enforcement.
- **Leverage Verbose Mode for Debugging:** Use `--gmock_verbose=info` to trace mock calls, arguments, matched expectations, and stack traces to quickly diagnose issues.

---

## Troubleshooting Common Issues

### Unexpected Call Failures
If your test reports unexpected calls, check that your `EXPECT_CALL`s cover all possible scenarios and that matchers correctly reflect intended argument constraints.

### Uninteresting Call Warnings
These occur when mock methods are called but no `EXPECT_CALL` or `ON_CALL` covers them. Suppress with `NiceMock`, or add a catch-all `EXPECT_CALL(method).Times(AnyNumber())`.

### Errors on Mocking Overloaded Methods
Disambiguate overloads using `Const()` for const-qualified methods or specify argument types explicitly with `Matcher<T>` or `TypedEq<T>()`.

### Return Types and Default Actions
For methods returning references, use `ReturnRef()`. For move-only types like `std::unique_ptr`, use lambdas to return new instances on each call.

---

## Conclusion
This What's New page is designed to keep you up to speed with the latest GoogleTest and GoogleMock features specific to mocking, matchers, assertions, and integration. Leveraging these enhancements will refine your testing workflows, elevating both productivity and test confidence.

For more detailed information, refer to the sections below and cross-referenced documents.

---

<AccordionGroup title="Detailed Sections">
<Accordion title="Defining and Using Mock Classes">
Learn to use `MOCK_METHOD` macro to create mock classes that simulate dependencies with virtual functions. Explore techniques for handling overloaded and move-only methods.
</Accordion>
<Accordion title="Setting Expectations with EXPECT_CALL">
Set detailed call expectations including argument matching, call counts (`Times`), ordering (`InSequence`, `After`), and controlling behavior through actions like `WillOnce` and `WillRepeatedly`.
</Accordion>
<Accordion title="Specifying Default Behavior with ON_CALL">
Define default actions for mock methods that apply when no expectations are specified, allowing more flexible and less brittle tests.
</Accordion>
<Accordion title="Working with Matchers">
Use built-in and custom matchers to specify flexible argument matching. Utilize container matchers like `ElementsAre` and multi-argument matchers for complex scenarios.
</Accordion>
<Accordion title="Mock Strictness - Nice, Naggy, and Strict">
Control how uninteresting calls are handled through `NiceMock`, `NaggyMock`, and `StrictMock` to tailor the balance between warnings and failures.
</Accordion>
<Accordion title="Custom Actions and Lambdas">
Extend mock behaviors with custom actions, including lambdas and functors, to simulate real-world side effects and complex function call results.
</Accordion>
<Accordion title="Debugging and Verbosity Settings">
Use the `--gmock_verbose` flag (`info`, `warning`, `error`) to gain insight into mock call matching, argument values, and failure diagnostics.
</Accordion>
<Accordion title="Integration and Build System Improvements">
Info on recent improvements supporting smooth integration with CMake, Bazel, and CI pipelines for seamless test automation.
</Accordion>
</AccordionGroup>

---

## Related Documentation

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Beginner-friendly guide to mocking concepts.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Comprehensive reference on mocking macros, matchers, and actions.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html): Quick syntax and usage overview.
- [Migration & Upgrade Guides](https://google.github.io/googletest/changelog/breaking-migrations/migration-upgrade.html): Instructions for upgrading versions with breaking changes.
- [Setting Up and Configuring GoogleTest](https://google.github.io/googletest/guides/core-workflows/setup-basics.html): Guide for initial setup and build integration.

---

## Final Tips

Remember to always write your expectations before exercising the mocks, use matchers thoughtfully to avoid brittle tests, utilize sequences only when ordering is critical, and employ verbose logging when debugging unexpected test behaviors. Keeping your test design clean and interaction-focused unlocks the full power of GoogleTest and GoogleMock to deliver robust, maintainable test suites.
