---
title: "Breaking Changes & Migration Notes"
description: "Details breaking changes in recent releases, including incompatible API adjustments, required compiler/tool upgrades, or deprecated functionality. This page empowers users to anticipate and resolve disruptions by clearly outlining what has changed and why."
---

# Breaking Changes & Migration Notes

This documentation details notable breaking changes introduced in recent GoogleTest and GoogleMock releases. It serves to prepare users for incompatible API modifications, deprecated features, necessary compiler or tooling upgrades, and other adjustments that may disrupt existing test suites. By reviewing this guide, users can proactively adapt their code and maintain seamless integration with the latest framework versions.

---

## Understanding Breaking Changes in GoogleTest & GoogleMock

Breaking changes are updates to the framework that alter or remove existing behaviors, APIs, or expected conventions, requiring users to modify their code to maintain compatibility. These can arise from design improvements, bug fixes that narrow behavior ambiguities, or removal of deprecated functionality.

This page focuses specifically on breaking changes affecting the mocking framework and related constructs, empowering developers to anticipate adverse effects and follow recommended migration paths.

---

## Typical Types of Breaking Changes

### 1. API Adjustments
- Modifications to existing macros such as `MOCK_METHOD` affecting signature declarations.
- Changes in acceptable qualifier usage (e.g., explicit requirement of `override`, or different handling of `const`, `noexcept`, and reference qualifiers).
- Updates to macro argument parsing, especially for complex return types or argument lists with commas. Users should verify and adjust their mock method declarations accordingly.

### 2. Compiler and Tooling Requirements
- Newer releases may require updated compiler versions with support for C++17 features crucial to the mocking implementation.
- Changes in behavior that rely on improved template or lambda capabilities might break code compiled with older toolchains.

### 3. Deprecation and Removal
- Deprecated APIs or macros, like the legacy `MOCK_METHODn` variants, may be removed after extended deprecation periods.
- Certain internal flags or behavior control mechanisms might be phased out or replaced with new idiomatic patterns.

### 4. Behavioral Changes
- Modifications in default mock object behavior, such as the default strictness or handling of uninteresting calls, which might affect existing tests.
- Changes in expectation matching order or precedence rules to align with clearer semantics.

### 5. Interaction with Other Components
- Updates that affect interactions with commonly used extensions or integration points (e.g., CMake or Bazel build rules).
- Adjustments to logging, diagnostic, or failure reporting behavior that may impact custom reporting or plugins.

---

## Migration Guidelines

To smoothly transition your tests and mocks to newer GoogleTest versions:

### A. Examine Your Mock Method Declarations
- Wrap complex return types and arguments containing commas in parentheses as required by the updated `MOCK_METHOD` macro parsing rules.
- Confirm all mocked methods use the proper qualifier lists: include `override` when overriding virtual methods and correctly specify `const`, `noexcept`, or reference qualifiers.

### B. Upgrade Your Toolchain
- Ensure your compiler and standard libraries fully support C++17 or newer, as required.
- Check your build system configurations against updated installation guidelines.

### C. Review Use of Strictness Modes
- Understand the consequences of using `NiceMock`, `NaggyMock`, and `StrictMock`. Verify that your mocks reflect intended behavior, especially given changes in uninteresting call treatment.

### D. Address Deprecated APIs
- Replace legacy counting macros (`MOCK_METHODn`) with the unified `MOCK_METHOD` syntax.
- Adopt new pinning or flagging APIs where older versions have been removed.

### E. Rerun and Validate Tests
- Use increased verbosity settings (e.g., `--gmock_verbose=info`) to debug changes in mock call matching and find unexpected call failures.
- Utilize new or updated diagnostic messages to adjust expectation clauses.

---

## Example Migration: Correcting `MOCK_METHOD` Usage

If your mocked method uses a complex return type or argument type involving commas, like `std::pair<bool, int>`, prior code may fail to compile on updated versions:

```cpp
class MyMock {
 public:
  // Prior code that won't compile:
  // MOCK_METHOD(std::pair<bool, int>, GetPair, ());

  // Corrected by adding parentheses (recommended):
  MOCK_METHOD((std::pair<bool, int>), GetPair, ());

  // Or use a type alias:
  using BoolAndInt = std::pair<bool, int>;
  MOCK_METHOD(BoolAndInt, GetPair, ());
};
```

Always verify your mocks according to new macro rules for your release.

---

## Important Notes

- Breaking changes are documented per release in the [Releases Overview](../../changelog/version-history/releases-overview) and [Notable Features & Improvements](../../changelog/version-history/notable-features-improvements) pages.
- Always consult the [Mocking Reference](../../api-reference/mocking-and-behavior-specification/mocking.md) for updated macro and API usage.
- Leverage CI builds with upgraded GoogleTest to catch breaking changes early.

---

## Troubleshooting

> **Problem:** Unexpected failures after upgrading to a new GoogleTest version.

- Verify that your `MOCK_METHOD` macros comply with the new syntax and qualifiers.
- Check compiler compatibility with the required C++17 features.
- Review test output with `--gmock_verbose=info` for detailed call matching information.

> **Problem:** Legacy macro `MOCK_METHODn` no longer available.

- Refactor to use `MOCK_METHOD` with updated parameter syntax.

> **Problem:** Unexpected strict mock failures.

- Confirm that mocks are intended to be strict. Switch to `NiceMock` if uninteresting calls should be ignored.

For more help, visit the [Where to Get More Help](../../faq/support-community/where-to-get-help) page.

---

## Further Reading and Related Documentation

- [Mocking Reference](../../api-reference/mocking-and-behavior-specification/mocking.md) — Comprehensive guide to mocking macros and APIs.
- [gMock Cookbook](../../docs/gmock_cook_book.md) — Practical recipes and detailed mocking patterns.
- [Notable Features & Improvements](../../changelog/version-history/notable-features-improvements) — Highlights of recent enhancements.
- [Installation Guide](../../getting-started/setup-requirements-installation/installing-googletest) — Ensuring correct setup and environment.
- [Setup & Integration](../../guides/getting-started/setup-integration) — Incorporating GoogleTest into your project with best practices.

---

This page is part of the GoogleTest documentation ecosystem and fits within the migration and upgrade workflow alongside release notes and version histories.

---