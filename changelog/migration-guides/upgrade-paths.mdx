---
title: "Upgrade Guides"
description: "Step-by-step guidance to upgrade from previous versions to newer ones, with a special focus on environment requirements (such as C++17 migration), configuration changes, and third-party dependency integration like Abseil."
---

# Upgrade Guides

GoogleTest's Upgrade Guides provide focused, step-by-step assistance for migrating your existing tests and build environments smoothly to newer releases. This documentation emphasizes critical aspects such as updating environment requirements (notably the mandatory move to C++17), adjusting build configurations, and integrating new third-party dependencies, including Abseil.

---

## 1. Transitioning to C++17

Starting from version 1.17.0, GoogleTest requires support for at least C++17 as a minimum language standard. This requirement reflects improvements in the language and tooling that GoogleTest leverages to provide reliable and modern testing capabilities.

### Why Upgrade Your Environment?

- **Compiler Compatibility:** Ensure your compiler version supports C++17 fully. Refer to the [Supported Platforms & Build Systems](../overview/integration-ecosystem/supported-platforms) for the list of officially supported compiler versions.
- **Build System Adjustments:** Set your project’s C++ standard to at least C++17 in your build system configuration. For example, with CMake:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

### Practical Tips

- Before upgrading, validate your environment supports C++17 by consulting the [Platform & Portability Model](../concepts/integration_and_scalability/platform_and_portability_model) documentation.
- Older projects may need explicit compiler flags or toolchain updates.

### Common Pitfalls

- Skipping this upgrade will cause build failures with newer GoogleTest versions.
- Mixing object files compiled with different C++ standards can cause undefined behavior.

---

## 2. Configuration and Build-System Changes

With GoogleTest’s evolution, some build configurations and options have changed, especially regarding third-party integrations and platform-specific tweaks.

### Key Changes

- **Abseil Dependency:** Newer releases introduce a dependency on [Abseil](https://github.com/abseil/abseil-cpp) for utility functions such as string formatting and type traits. Your build must link and include Abseil appropriately.
- **Compiler and Linker Flags:** To properly support these dependencies and C++17 features, update your build scripts accordingly.

### CMake Integration

- When building GoogleTest standalone or as part of a larger project, use the updated `FetchContent` or add_subdirectory mechanism:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/v1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_test test_main.cpp)
target_link_libraries(my_test gtest_main absl::base absl::strings)
```

- Ensure `absl::base` and `absl::strings` are included as GoogleTest propagates these as dependencies.

### Visual Studio Runtime Linking

- To avoid conflicts related to the C runtime (CRT), consider using the `gtest_force_shared_crt` option:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "")
```

This aligns CRT linkage between your tests and GoogleTest.

### Troubleshooting Build Failures

- Ensure Abseil is properly installed and discoverable by your build system.
- Verify that no older GoogleTest headers or libraries are conflicting in your include and link paths.
- Use the detailed build integration guide ([Build Integration](../guides/advanced-scenarios/build-integration)) to align your environment.

---

## 3. Third-Party Dependency Integration: Abseil

GoogleTest now depends on parts of Abseil, a collection of core C++ libraries designed by Google.

### Why Abseil?

- Provides well-tested utility components to improve reliability.
- Enables GoogleTest to focus on test logic while relying on Abseil’s robust implementations.

### Action Points for Users

- Add Abseil libraries to your build dependencies when compiling and linking tests.
- Refer to Abseil’s official documentation for installation and usage: https://abseil.io/

### Example

In a Bazel environment or CMake with FetchContent, ensure absl modules such as `absl::base` and `absl::strings` are part of your target’s link libraries.

---

## 4. Migration Workflow

Taking a practical step-by-step approach helps ensure a seamless upgrade:

<Steps>
<Step title="Validate C++17 Support">
Check your compiler version, build tools, and flags support C++17.
</Step>
<Step title="Update Build Configuration">
Modify your build system (e.g., CMake) to set the standard to C++17 and include Abseil.
</Step>
<Step title="Rebuild Dependencies">
Clean and rebuild GoogleTest and dependencies to prevent ABI conflicts.
</Step>
<Step title="Run Tests and Confirm">
Run tests to confirm no regressions or linking issues occur.
</Step>
<Step title="Consult Documentation">
Review linked documentation pages to resolve any issues and optimize configuration.
</Step>
</Steps>

---

## 5. Additional Considerations

### Deprecations and Breaking Changes

Upgrading GoogleTest often involves adapting to updated macros and APIs as detailed in the [Breaking Changes](../changelog/migration-guides/breaking-changes) and [Deprecations](../changelog/migration-guides/deprecations) pages.

### Continuous Integration (CI) Environments

Ensure your CI pipeline uses the upgraded environment with C++17 support and has Abseil correctly installed and linked.

### Compatibility

If your project depends on multiple third-party libraries, verify that all dependencies are compatible with C++17 and Abseil usage.

---

## 6. Troubleshooting

If you encounter upgrade-related issues:

- Inspect compiler and linker error messages for clues about C++ standard mismatches or missing dependencies.
- Refer to the [Troubleshooting Common Setup Issues](../getting-started/validation-troubleshooting/common-issues) guide for common patterns.
- Double-check environment variables and build flags for correctness.
- Validate that no conflicting older GoogleTest includes or binaries remain in your build environment.

---

## 7. Useful Links

- [Supported Platforms & Build Systems](../overview/integration-ecosystem/supported-platforms)
- [Build Integration Guide](../guides/advanced-scenarios/build-integration)
- [Breaking Changes](../changelog/migration-guides/breaking-changes)
- [Deprecations](../changelog/migration-guides/deprecations)
- [Abseil Library](https://abseil.io/)
- [Getting Started Installation](../getting-started/core-setup/installation-platforms)

---

By closely following this Upgrade Guide, you can confidently migrate your GoogleTest environment and test suites to leverage the latest features, improved maintainability, and enhanced dependency management facilitated by the mandatory adoption of C++17 and Abseil.

---

*This page is part of the GoogleTest external documentation, available at* [https://github.com/google/googletest](https://github.com/google/googletest).