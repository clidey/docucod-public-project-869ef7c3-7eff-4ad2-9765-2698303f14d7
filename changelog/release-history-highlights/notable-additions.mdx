---
title: "Notable Additions & Improvements"
description: "Summarizes headline features, enhancements, and performance improvements introduced in each release. Use this as a quick reference for what's new and to assess the value of each upgrade."
---

# Notable Additions & Improvements

This page summarizes key features, enhancements, and performance improvements introduced in recent GoogleMock and GoogleTest releases. Use this as a quick reference to understand the evolving value of each upgrade and make informed decisions about upgrading.

---

## Key Features Introduced

### Enhanced Mocking Capabilities

- **Flexible Mock Method Definitions:** Continued support for the modern `MOCK_METHOD` macro that enables mocking of complex method signatures, including `const`, `override`, `noexcept`, and calling conventions.

- **Support for Mocking Move-Only Types:** Added support to mock methods taking or returning move-only types like `std::unique_ptr`, with examples illustrating safe use patterns.

- **Advanced Argument Matching:** Expanded built-in and custom matcher support, allowing expressions over multiple arguments, member variables, and container contents.

### Rich Actions & Behavioral Control

- **Comprehensive Action Model:** Fine-grained control of mock behavior through `EXPECT_CALL` clauses such as `.WillOnce()`, `.WillRepeatedly()`, `.RetiresOnSaturation()`, and chaining actions like `DoAll()`.

- **Delegation Patterns:** Recipes to delegate default actions to real objects or fakes, helping keep tests focused and maintainable.

- **Custom Actions and Matchers:** Support for easily defining new matchers and actions through macros or by implementing interfaces, with polymorphic options for maximum flexibility.

### Strictness and Verbosity Controls

- **Strictness Wrappers:** Introduction and evolution of `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` to control how uninteresting calls are treated (silent, warnings, or failures), improving test robustness and diagnostics.

- **Verbosity Flags:** Enhanced `--gmock_verbose` flag to adjust the amount of information reported during test execution, helping isolate issues quickly.

### Expectation Ordering and Partial Orders

- **Sequencing Support:** Ability to specify ordered expectations using `InSequence` blocks or explicit `Sequence` objects.

- **Partial Order (DAG) Specification:** Fine control over call ordering with the combination of `InSequence` clauses, `After` clauses, and `ExpectationSet` objects, yielding flexible interaction verifications.

### Verification & Cleanup

- **Explicit Verification:** Methods like `Mock::VerifyAndClearExpectations()` and `Mock::VerifyAndClear()` enable forced verification and cleanup of mocks when destruction timing is uncertain.

- **Leak Allowance:** `Mock::AllowLeak()` lets users opt out of verification for specified mocks, managing test scenarios involving leaked mocks.

### Improved Diagnostics & Testing Utilities

- **Enhanced Warning and Failure Messages:** Detailed messages when expectations are unmet, or when excessive or unexpected calls happen.

- **Support for Testing Asynchronous Behavior:** Patterns and examples for synchronizing asynchronous calls within unit tests.

---

## Practical Usage Scenarios

- When creating mock classes, use the `MOCK_METHOD` macro in the `public:` section, regardless of the base class method's access level, to ensure all mocking features are enabled.

- For methods with overloaded variants or non-trivial argument types, use casts or type aliasing to resolve ambiguities.

- Prefer `ON_CALL` for setting default behaviors without enforcing call expectations, reserving `EXPECT_CALL` for explicit interaction verification.

- Use `NiceMock` to suppress benign warnings, `NaggyMock` for verbose warnings (default currently), or `StrictMock` to fail on uninteresting calls, adjusting test strictness to your need.

- Control call order precisely when necessary using `InSequence` or `After` clauses; avoid over-specifying when the call order is irrelevant.

- Use `RetiresOnSaturation()` strategically to prevent sticky expectations that can cause test flakiness.

- When mocking methods returning move-only types, use `WillOnce` with lambdas to safely return freshly constructed values.

- Leverage `Mock::VerifyAndClearExpectations()` if your mock's lifetime is managed externally or if the destructor may not get called.

- Adjust verbosity with `--gmock_verbose` to balance between noisiness and helpful diagnostics during test development.

---

## Troubleshooting & Best Practices

- Avoid setting expectations after a mock method may already have been called to prevent undefined behavior.

- Understand the difference between *uninteresting* calls (no matching `EXPECT_CALL`) and *unexpected* calls (no matching expectation among several), and the behaviors enforced by strictness wrappers.

- When facing warnings like "Uninteresting function call encountered," validate if a `NiceMock` wrapper or explicit `EXPECT_CALL(...).Times(AnyNumber())` clauses can reduce noise.

- Use `EXPECT_CALL` with precise matchers and cardinalities to avoid fragile tests that are prone to failure on unrelated changes.

- Refer to verbose trace outputs with `--gmock_verbose=info` to fix misconfigured or unmet expectations by understanding mock call flows.

- Use sequencing and expectation sets carefully to avoid brittle tests while ensuring interaction correctness.

---

## Further Learning & References

- [Mocking Basics: Using GoogleMock](https://google.github.io/googletest/gmock_for_dummies.html)

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for recipes and best practices.

- [Mocking Reference](https://google.github.io/googletest/reference/mocking-framework/mocking.html) for detailed API explanations.

- [Actions and Stubbing](https://google.github.io/googletest/reference/mocking-framework/actions-and-stubbing.html) to master modifying mock behaviors.

- [Call Cardinalities and Strictness Controls](https://google.github.io/googletest/reference/mocking-framework/cardinalities-strictness.html) to fine-tune interaction verification.

- [Release History & Highlights](../release-history-highlights/version-timeline) for comprehensive changelogs.

- Consult [Troubleshooting Mock Issues](../../faq/troubleshooting-and-best-practices/mocking-issues) if you face unexpected mock failures.

---

## Navigation

Visit related pages for foundational learning, practical usage, or advanced patterns:

| Section                     | Link                                                  |
|-----------------------------|-------------------------------------------------------|
| Getting Started & Tutorials  | /guides/getting-started/writing-your-first-test       |
| Everyday Workflows           | /guides/everyday-workflows/assertions-matchers        |
| Mocking & Advanced Techniques | /guides/mocking-and-advanced-techniques/mocking-basics |
| API Reference               | /api-reference/mocking-framework/mocking.html         |
| Breaking Changes & Migration | /changelog/breaking-changes-migrations/breaking-changes |

---

This page ensures you are aware of the ongoing evolutions in GoogleMock and GoogleTest, enabling you to leverage powerful mocking and testing capabilities effectively with every release.