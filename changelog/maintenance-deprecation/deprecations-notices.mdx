---
title: "API Deprecations & Removal Notices"
description: "Lists all deprecated features, APIs, or behaviors, along with removal schedules and migration alternatives. Keeps users informed about changes that may impact existing tests and provides clear timelines for necessary adaptations."
---

# API Deprecations & Removal Notices

This page provides a comprehensive list of all deprecated features, APIs, and behaviors in GoogleTest and GoogleMock. It includes clear timelines for when deprecated items will be removed and outlines migration alternatives to help you adapt your tests effectively. Staying informed through this page ensures your test suites remain functional and up-to-date with current best practices.

---

## Understanding Deprecations

Deprecation is a formal notice that a feature, API, or behavior should no longer be used and may be removed in future releases. This page helps you identify deprecated elements that could impact your existing tests, understand the rationale behind their deprecation, and provides explicit guidance on how to migrate away from them.

GoogleTest and GoogleMock prioritize backward compatibility but also evolve with improvements and modern C++ standards. Managing deprecated APIs is essential to maintain robust and maintainable test code.

---

## Deprecation Categories

### 1. Deprecated Test Macros and APIs

- **Old-style Mock Macros (`MOCK_METHODn`)**: 
  Deprecated in favor of the generic `MOCK_METHOD` macro which, due to its improved syntax and flexibility, supports qualifiers and works better with complex argument types.

  **Migration**: Replace `MOCK_METHODn` with `MOCK_METHOD` as shown below:

  ```cpp
  // Old
  MOCK_METHOD1(Foo, bool(int));

  // New
  MOCK_METHOD(bool, Foo, (int));
  ```

  This change improves clarity and reduces boilerplate in your mocks.

### 2. Deprecated Test Suite and Test Naming Conventions

- **Avoid underscore (`_`) in `TestSuiteName` and `TestName`**:
  GoogleTest reserves underscore for internal purposes, and names containing underscores can lead to naming collisions or unexpected test failures, particularly when generating internal test classes.

  **Migration**: Rename test suites and tests to exclude leading, trailing, or multiple underscores. Instead of `TEST(Time_Flies, Like_An_Arrow)`, prefer names without underscores:

  ```cpp
  TEST(TimeFlies, LikeAnArrow) { ... }
  ```

- **Special prefixes like `DISABLED_` should be used only for temporary test disabling.**
  Long-term dependencies on disabled tests should be removed or replaced.

### 3. Deprecated Matchers and Assertion Usage

- **Use `nullptr` when comparing pointers instead of `NULL`**:

  `NULL` is an integer literal and can cause type-related issues. Prefer `nullptr` in all assertions for clarity and correctness.

  ```cpp
  EXPECT_EQ(ptr, nullptr);
  ASSERT_NE(ptr, nullptr);
  ```

- **Avoid using `EXPECT_NE(NULL, ptr)` / `ASSERT_NE(NULL, ptr)`**:

  These macros are not supported due to template metaprogramming complexity. Use `EXPECT_TRUE(ptr != nullptr)` or `EXPECT_NE(ptr, nullptr)` instead.

- **Switch to `EXPECT_THAT` with matchers for more expressive, maintainable tests.**

### 4. Deprecated Practices in Test Fixture Usage

- **Avoid using assertions inside constructors and destructors**:
  GoogleTest does **not** allow fatal assertions (`ASSERT_*` and `FAIL()`) inside constructors or destructors because they cannot abort tests properly there.

  **Migration**: Use `SetUp()` and `TearDown()` methods instead. If fatal error must be detected early, call `abort()`.

- **Legacy use of `SetUpTestCase` / `TearDownTestCase`**:
  These are deprecated in favor of `SetUpTestSuite` and `TearDownTestSuite`.

  **Migration**: Rename these methods in your fixtures to avoid warnings and future issues.

### 5. Deprecated Mocking Practices

- **Mocking non-virtual methods by making them virtual**:
  This weakens code design and should be avoided. Instead, prefer interfaces or alternative testing strategies.

- **Avoid complex overloads without `using` declarations**:
  Failing to bring base class overloads into scope can cause hidden method warnings and unexpected behavior.

- **Manage uninteresting calls with mock wrappers (`NiceMock`, `StrictMock`) instead of suppressing errors with expectations with any argument.**

---

## Removal Schedules and Timelines

Deprecated features will be removed following official release guidance. Typically:

- Minor deprecations in a release are maintained for at least 2 subsequent major releases to provide sufficient migration time.
- Removal is clearly marked in release notes and documented migration steps provided.

Always consult the release notes for the GoogleTest version you are targeting to check for active deprecations.

---

## Migration Alternatives and Best Practices

| Deprecated Feature                  | Recommended Alternative                                  | Notes                                               |
|-----------------------------------|---------------------------------------------------------|-----------------------------------------------------|
| `MOCK_METHODn` macros             | `MOCK_METHOD` macro                                     | Supports qualifiers, overloads, and templates elegantly |
| `NULL` pointer comparisons        | Use `nullptr`                                          | Safer and less error-prone                            |
| `EXPECT_NE(NULL, ptr)`             | `EXPECT_NE(ptr, nullptr)` or `EXPECT_TRUE(ptr != nullptr)` | Resolves complex template issues                      |
| Assertion in constructor           | Move to `SetUp()` or call `abort()`                    | Ensures proper test termination                       |
| `SetUpTestCase`/`TearDownTestCase`| Use `SetUpTestSuite`/`TearDownTestSuite`               | New standard naming                                   |
| `_` in test names                 | Replace underscores with camel case or remove           | Avoids naming collision; improves readability        |

---

## Troubleshooting Deprecated API Usage

If you encounter warnings or errors due to deprecated APIs, consider these steps:

1. Run your tests with `--gtest_verbose=info` to locate deprecated usages.
2. Check your mock class definitions for old macros or patterns.
3. Review test suite and test case names for underscores or reserved prefixes.
4. Update your `ON_CALL` and `EXPECT_CALL` statements to align with current matcher usage.
5. Refactor test fixture lifecycle methods to use new naming conventions.

If you find your tests failing due to deprecated behaviors, the migration tables above provide a solid starting point.

---

## Additional Resources

- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Recipes on modern mocking practices
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — In-depth API details
- [Matchers Reference](https://google.github.io/googletest/reference/matchers.html) — Use of matchers including deprecation notes
- [Release Notes & Upgrade Guides](https://github.com/google/googletest/releases) — Tracking breaking changes and migrations
- [Expectations and Behaviors](https://google.github.io/googletest/reference/mocking_api/expectations_and_behaviors.html) — Best practices for setting expectations, including deprecated practices

---

Staying current with API deprecations and removal notices will help you maintain clean, efficient, and robust tests. Regularly refer to this page to avoid surprises during upgrades and maximize the longevity and clarity of your test suites.


<AccordionGroup title="Common Deprecation Examples & Migration Tips">
<Accordion title="Replacing Old MOCK_METHODn with MOCK_METHOD">
Replace all instances like:

```cpp
MOCK_METHOD1(Foo, bool(int));
```

with:

```cpp
MOCK_METHOD(bool, Foo, (int));
```

This improves readability and enables usage of qualifiers like `(const, override)`.
</Accordion>
<Accordion title="Avoid Using NULL in Pointer Comparisons">
Use `nullptr` in assertions instead of `NULL`:

```cpp
EXPECT_EQ(ptr, nullptr);
EXPECT_NE(ptr, nullptr);
```

This avoids template metaprogramming pitfalls and is aligned with modern C++.
</Accordion>
<Accordion title="Renaming Tests to Avoid Underscores">
Underscores in `TestSuiteName` and `TestName` can cause collisions. Rename as:

```cpp
TEST(MyTestSuite, TestNameWithoutUnderscores) {
  ...
}
```

This prevents unexpected class name conflicts during test code generation.
</Accordion>
<Accordion title="Use SetUp()/TearDown() for Per-Test Initialization">
Avoid placing assertions or fatal failures inside constructors or destructors. Instead, do:

```cpp
void SetUp() override {
  ...
}

void TearDown() override {
  ...
}
```

This ensures proper handling of fatal failures.
</Accordion>
</AccordionGroup>

---