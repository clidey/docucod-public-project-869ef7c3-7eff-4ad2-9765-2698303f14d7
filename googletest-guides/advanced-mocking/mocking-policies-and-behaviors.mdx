---
title: "Mocking Policies and Behaviors: Nice, Strict, and Naggy"
description: "Describes policy classes that control handling of unexpected mock calls, showing when to use NiceMock, StrictMock, or NaggyMock. Offers advice for robust and predictable test design."
---

# Mocking Policies and Behaviors: Nice, Strict, and Naggy

## Overview

This page explains the policy classes provided by GoogleMock that control how your mock objects handle *uninteresting calls* — that is, calls to mock methods for which you have not explicitly set an expectation using `EXPECT_CALL`. The three primary policy wrappers, `NiceMock`, `StrictMock`, and `NaggyMock`, let you shape your tests’ robustness and verbosity to your needs.

You will learn when to choose each wrapper and how it influences test behavior, enabling you to write predictable, maintainable, and clear tests.

---

## What Are "Uninteresting Calls"?

In GoogleMock, when a mocked method is called:

- **Expected calls** are calls that match an active expectation declared with `EXPECT_CALL`.
- **Uninteresting calls** are calls to mock methods without any matching `EXPECT_CALL` set.
- **Unexpected calls** are calls where expectations exist but the arguments do not satisfy any `EXPECT_CALL` specification.

By default, uninteresting calls trigger a warning. These policies control whether such calls are silently allowed, warned about, or treated as errors.

---

## Policy Classes

GoogleMock provides three template wrappers that modify the behavior of mock objects regarding uninteresting calls:

### 1. NiceMock<T>

- **Behavior:** Suppresses warnings for uninteresting calls.
- **Use When:** You want quiet tests where calls not explicitly expected are allowed and simply ignored.

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomething());
// Calls to other methods won’t generate warnings.
```

- This allows tests to focus only on what matters without noise.

### 2. NaggyMock<T>

- **Behavior:** (Default) Prints warnings when uninteresting calls occur but does not fail the test.
- **Use When:** You want visibility on possibly accidental calls to methods you haven’t explicitly expected but do not want to fail the test.

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomething());
// Uninteresting calls generate warnings.
```

- This is the default behavior for mocks (i.e., `MockFoo` behaves like `NaggyMock<MockFoo>`).

### 3. StrictMock<T>

- **Behavior:** Treats all uninteresting calls as errors, causing test failures.
- **Use When:** You want strict enforcement so that every call to a mock method is explicitly expected.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomething());
// Any call to mock methods beyond those EXPECT_CALLed will fail the test.
```

- Ideal for critical interfaces where unexpected interactions must be detected immediately.

---

## How These Wrappers Work

Each wrapper class inherits from the mock class (`T`) and modifies how uninteresting calls are handled internally:

- `NiceMock` registers itself to *allow* uninteresting calls.
- `NaggyMock` (the default mock) registers itself to *warn* on uninteresting calls.
- `StrictMock` registers itself to *fail* on uninteresting calls.

They inherit constructors from the underlying mock class, so you can create these wrappers with the same constructor arguments your mock requires:

```cpp
NiceMock<MockFoo> nice_mock(42, "hello");
StrictMock<MockFoo> strict_mock;
```

---

## When to Use Which

| Policy        | Behavior on Uninteresting Calls                            | When to Use                                            |
| ------------- | ---------------------------------------------------------- | ----------------------------------------------------- |
| `NiceMock`    | Silently ignores uninteresting calls                      | In most regular tests that only care about specific interactions. Minimizes test flakiness and clutter. |
| `NaggyMock`   | Issues warnings on uninteresting calls (default)          | When developing or debugging tests to catch possibly unintended calls without immediate test failures. |
| `StrictMock`  | Causes test failures on uninteresting calls                | When interface usage must be strictly verified; when unexpected interactions are bugs you want to catch immediately. |

### Best Practices

- Prefer `NiceMock` during development for less noisy test runs.
- Move to `NaggyMock` if you want warnings about unexpected calls.
- Use `StrictMock` sparingly, as it can lead to brittle tests that require updating even for harmless refactorings.

---

## Important Considerations

- **Scope of Effect:** These wrappers affect only *uninteresting* calls (mock methods *without* expectations). Calls that are *unexpected* (methods with expectations but called with unmatched arguments) still always cause test failures regardless of wrapper.

- **Limitations:**
  - Wrappers only affect mock methods defined *directly* using the `MOCK_METHOD` macro in the mock class `T`. Methods defined in base classes may ignore the wrapper policy.
  - Wrapping mock types that already have strictness wrappers nested (e.g., `NiceMock<StrictMock<MockFoo>>`) is **not supported**.
  - Wrappers require the destructors of mock classes to be virtual to work correctly.

---

## Example Usage

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::StrictMock;

class MockDatabase {
 public:
  MOCK_METHOD(bool, Connect, (), ());
  MOCK_METHOD(void, Disconnect, (), ());
};

// Test with NiceMock to ignore uninteresting calls.
TEST(DatabaseTest, ConnectWorks) {
  NiceMock<MockDatabase> mock_db;
  EXPECT_CALL(mock_db, Connect()).Times(1);
  // Disconnect called without expectation is silently ignored.
  mock_db.Connect();
  mock_db.Disconnect();
}

// Test with StrictMock to enforce all calls.
TEST(DatabaseTest, AllCallsStrict) {
  StrictMock<MockDatabase> mock_db;
  EXPECT_CALL(mock_db, Connect());
  EXPECT_CALL(mock_db, Disconnect());
  mock_db.Connect();
  mock_db.Disconnect();
  // If Disconnect() was called without EXPECT_CALL, test would fail.
}
```

---

## Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Unwanted Warnings from Uninteresting Calls">
If you receive warnings about uninteresting calls that clutter logs:

- Consider wrapping the mock with `NiceMock` to suppress these warnings.
- Alternatively, add a catch-all `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` to suppress warnings on specific methods.
</Accordion>
<Accordion title="Unexpected Calls Still Pass in NiceMock">
Remember, `NiceMock` does not make unexpected calls (calls that fail argument matchers) pass; those always cause failures. Use `NiceMock` only to suppress warnings on uninteresting calls.
</Accordion>
<Accordion title="NiceMock or StrictMock Not Working For Base Class Methods">
`
These wrappers only affect mock methods declared directly in the mock class. If your mock inherits methods from base classes with `MOCK_METHOD`, wrapper behavior might not apply properly. Consider moving the mock methods into the subclass or restructuring your mocks.
</Accordion>
</AccordionGroup>

---

## Summary

GoogleMock offers `NiceMock`, `NaggyMock`, and `StrictMock` template wrappers that modify the behavior of mock objects with respect to uninteresting calls. Proper use of these wrappers provides control over warning verbosity and test strictness, allowing users to tune test feedback to their needs without prematurely failing tests or missing unwanted interactions.

---

## Related Topics & Further Reading

- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Detailed API reference on mocking facilities.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) — Practical guidance on using Nice, Strict, and Naggy mocks.
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks-in-tests) — Introduction and usage patterns for mocks.
- [EXPECT_CALL](https://google.github.io/googletest/reference/mocking.html#EXPECT_CALL) — How to set expectations on mock methods.

---

## Tips

- Start tests with `NiceMock` to reduce noise, switch to `NaggyMock` or `StrictMock` as confidence in tests grows.
- Use `StrictMock` only when you expect your code to strictly honor all mock interfaces, as it can lead to fragile tests.
- Remember that default GoogleMock mocks behave like `NaggyMock` for now but may become `NiceMock` by default in the future.

---

## Reference

### Key Code Snippet for Using StrictMock, NiceMock, NaggyMock

```cpp
using ::testing::StrictMock;
using ::testing::NiceMock;
using ::testing::NaggyMock;

struct MockFoo {
  MOCK_METHOD(void, DoSomething, (), ());
};

int main() {
  StrictMock<MockFoo> strict_mock;
  NiceMock<MockFoo> nice_mock;
  NaggyMock<MockFoo> naggy_mock;

  EXPECT_CALL(strict_mock, DoSomething());
  EXPECT_CALL(nice_mock, DoSomething());
  EXPECT_CALL(naggy_mock, DoSomething());

  strict_mock.DoSomething();
  nice_mock.DoSomething();
  naggy_mock.DoSomething();
}
```

---

This page complements the [Mocking Reference](docs/reference/mocking.md) and [gMock Cookbook](docs/gmock_cook_book.md#TheNiceStrictNaggy).


