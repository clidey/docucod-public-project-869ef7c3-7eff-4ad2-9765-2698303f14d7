---
title: "Using Parameterized and Typed Tests"
description: "A practical tutorial on value-parameterized and type-parameterized tests in GoogleTest, with common use cases and step-by-step implementation guidance. This empowers users to write concise, data-driven tests for functions with multiple inputs or templated behaviors."
---

# Using Parameterized and Typed Tests in GoogleTest

A practical tutorial on value-parameterized and type-parameterized tests in GoogleTest, with common use cases and step-by-step implementation guidance. This empowers you to write concise, data-driven tests for functions with multiple inputs or templated behaviors.

---

## 1. Overview of Parameterized Testing

### What are Parameterized Tests?

Parameterized tests allow you to write a single logical test that runs multiple times with different inputs, instead of duplicating similar tests repeatedly. They boost test coverage, reduce boilerplate, and make maintenance easier.

GoogleTest offers two main forms:

- **Value-Parameterized Tests:** Test the same logic with different **values** as input.
- **Type-Parameterized (Typed) Tests:** Test the same logic against different **types**, useful when testing templated code.

### When to Use Parameterized and Typed Tests

- Use **Value-Parameterized Tests** when you want to verify your code’s behavior with multiple input values or input combinations.
- Use **Typed Tests** when your tests need to verify behavior that changes depending on the type parameter, such as template class behavior.

### Expected Outcome

At the end of this tutorial, you will be able to:

- Define value-parameterized test fixtures and tests.
- Instantiate tests with diverse sets of parameters.
- Define typed test suites for testing similar behavior across types.
- Understand key macros and best practices for writing robust parameterized and typed tests.

### Prerequisites

- Familiarity with basic GoogleTest usage, including writing simple tests and fixtures.
- C++17 or later environment configured with GoogleTest installed.

### Time Estimate

Approximately 20–30 minutes to read and implement the examples.

### Difficulty Level

Intermediate (developers with some testing experience).

---

## 2. Value-Parameterized Tests

### Step 1: Define a Parameterized Test Fixture

Create a test fixture class derived from `::testing::TestWithParam<T>`, where `T` is the type of the input parameter.

```cpp
#include <gtest/gtest.h>

class MyMathTest : public ::testing::TestWithParam<int> {
  // Add fixture setup/teardown or members if needed
};
```

### Step 2: Write Parameterized Test(s)

Use the `TEST_P` macro instead of `TEST_F`. Inside the test body, access the parameter via `GetParam()`.

```cpp
TEST_P(MyMathTest, ReturnsTrueForEvenNumbers) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0) << "Parameter " << n << " is not even.";
}
```

### Step 3: Instantiate the Test Suite with Parameters

Use `INSTANTIATE_TEST_SUITE_P` to instantiate your parameterized test suite with different values.

```cpp
INSTANTIATE_TEST_SUITE_P(
    EvenNumbersInput,  // Instantiation name (can be any unique identifier)
    MyMathTest,       // Test fixture class
    ::testing::Values(2, 4, 6, 8));  // Set of parameter values
```

This will create and run tests `EvenNumbersInput/MyMathTest.ReturnsTrueForEvenNumbers/0`, ... `/3`.

#### Alternative Generators

GoogleTest provides useful parameter generators:

- `Values(v1, v2, ..., vN)`: List of values.
- `ValuesIn(container)`: Values from containers or arrays.
- `Range(begin, end[, step])`: Sequences in a range (end exclusive).
- `Bool()`: Yields `{false, true}`.
- `Combine(g1, g2, ..., gN)`: Produces the Cartesian product of argument generators.

Example:

```cpp
INSTANTIATE_TEST_SUITE_P(
    CustomInput,
    MyMathTest,
    ::testing::Range(0, 10, 2));  // Even numbers from 0 to 8
```

### Step 4: Running and Using Parameters

When tests run, GoogleTest creates independent instances of the test fixture for each parameter.

Parameters are accessible only through `GetParam()`.

---

## 3. Typed (Type-Parameterized) Tests

### Use Case

Typed tests are meant for verifying that a suite of tests passes for multiple **types** (templates).

### Step 1: Define a Class Template Test Fixture

Derive a class template from `::testing::Test`.

```cpp
template <typename T>
class StackTest : public ::testing::Test {
 protected:
  StackTest() : stack_() {}
  Stack<T> stack_;
};
```

You define any helpers and members you need inside this fixture.

### Step 2: Define a List of Types

Define a type list with the types you want to test.

```cpp
using StackTypes = ::testing::Types<int, double, std::string>;
TYPED_TEST_SUITE(StackTest, StackTypes);
```

### Step 3: Write Typed Tests

Use `TYPED_TEST` macro instead of `TEST_F`. Inside test bodies, `TypeParam` refers to the current type parameter.

```cpp
TYPED_TEST(StackTest, IsInitiallyEmpty) {
  EXPECT_TRUE(this->stack_.IsEmpty());
}

TYPED_TEST(StackTest, CanPushAndPop) {
  this->stack_.Push(TypeParam{});
  EXPECT_FALSE(this->stack_.IsEmpty());
}
```

### Step 4: Run Typed Tests

GoogleTest creates one test instance per type parameter in the list, running it with the fixture class specialized for that type.

Example output test names: `StackTest/0.IsInitiallyEmpty` for `int`, `StackTest/1.IsInitiallyEmpty` for `double`, etc.

---

## 4. Type-Parameterized Tests (TYPED_TEST_P) - Defining Reusable Typed Test Patterns

GoogleTest supports *type-parameterized* tests where the test suite and tests are written independently of any specific types and can be instantiated multiple times.

### Step 1: Define a Type-Parameterized Test Suite

```cpp
template <typename T>
class MyContainerTest : public ::testing::Test {
  // Test members
};

TYPED_TEST_SUITE_P(MyContainerTest);
```

### Step 2: Define the Tests with TYPED_TEST_P

You write tests using `TYPED_TEST_P`. Use `TypeParam` for the type param.

```cpp
TYPED_TEST_P(MyContainerTest, SupportsEmpty) {
  EXPECT_TRUE(this->container_.empty());
}

TYPED_TEST_P(MyContainerTest, SupportsInsert) {
  this->container_.insert(typename TypeParam::value_type{});
  EXPECT_FALSE(this->container_.empty());
}
```

### Step 3: Register the Tests

```cpp
REGISTER_TYPED_TEST_SUITE_P(MyContainerTest, SupportsEmpty, SupportsInsert);
```

### Step 4: Instantiate with Types

```cpp
using MyContainerTypes = ::testing::Types<std::set<int>, std::vector<int>>;
INSTANTIATE_TYPED_TEST_SUITE_P(MyInstantiations, MyContainerTest, MyContainerTypes);
```

---

## 5. Practical Tips and Best Practices

- Always choose clear and unique instantiation names when using `INSTANTIATE_TEST_SUITE_P`.
- Use `ValuesIn()` when you have a container or array of parameters.
- Combine multiple parameter generators with `Combine()` to test multidimensional input spaces.
- Use typed tests to verify generic template code for multiple types efficiently.
- When writing typed tests, prefer to use `this->` to access fixture members.
- Avoid overly complex parameter combinations that lead to explosion in test count.
- Use descriptive test names and custom parameter name generators to make outputs clear.
- Utilize GoogleTest’s ability to run a subset of tests via filter flags to manage large parameterized test suites.

---

## 6. Common Pitfalls and Troubleshooting

### Test Registration Errors

- Forgetting to instantiate parameterized tests with `INSTANTIATE_TEST_SUITE_P` will cause silent failures or no tests to run.
- For typed tests, failing to register tests with `REGISTER_TYPED_TEST_SUITE_P` and instantiate them will cause no tests to run.

### Parameter Type Issues

- Ensure parameter type `T` in `TestWithParam<T>` is copyable.
- For non-copyable types, use pointers or smart pointers, and manage lifetime appropriately.

### Compiler Errors with Templates

- Typename scoping can require prefixing types with `typename TestFixture::` inside typed tests.
- Use `static_assert` or explicit casts if your template parameters cause ambiguous calls.

### Test Naming Issues

- Instantiation names must be valid C++ identifiers without spaces or special characters.
- Custom param name functions must generate valid test suffixes containing only alphanumerics and underscores.

---

## 7. Complete Code Examples

### Example 1: Simple Value-Parameterized Test

```cpp
#include <gtest/gtest.h>

class IsEvenTest : public ::testing::TestWithParam<int> {};

TEST_P(IsEvenTest, ReturnsTrueForEvenNumbers) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0) << "Number " << n << " is not even.";
}

INSTANTIATE_TEST_SUITE_P(
    EvenValues, IsEvenTest, ::testing::Values(2, 4, 6, 8));
```

### Example 2: Typed Test for Template Container

```cpp
#include <gtest/gtest.h>
#include <vector>
#include <list>

template <typename T>
class ContainerTest : public ::testing::Test {
 protected:
  T container_;
};

using ContainerTypes = ::testing::Types<std::vector<int>, std::list<int>>;
TYPED_TEST_SUITE(ContainerTest, ContainerTypes);

TYPED_TEST(ContainerTest, IsEmptyInitially) {
  EXPECT_TRUE(this->container_.empty());
}

TYPED_TEST(ContainerTest, CanAddElements) {
  this->container_.push_back(42);
  EXPECT_FALSE(this->container_.empty());
}
```

### Example 3: Type-Parameterized Test Suite Definition and Instantiation

```cpp
#include <gtest/gtest.h>
#include <set>
#include <vector>

template <typename T>
class SetVectorTest : public ::testing::Test {
 protected:
  T container_;
};

TYPED_TEST_SUITE_P(SetVectorTest);

TYPED_TEST_P(SetVectorTest, IsInitiallyEmpty) {
  EXPECT_TRUE(this->container_.empty());
}

TYPED_TEST_P(SetVectorTest, CanInsertElement) {
  this->container_.insert(typename TypeParam::value_type());
  EXPECT_FALSE(this->container_.empty());
}

REGISTER_TYPED_TEST_SUITE_P(SetVectorTest, IsInitiallyEmpty, CanInsertElement);

using MyTypes = ::testing::Types<std::set<int>, std::vector<int>>;
INSTANTIATE_TYPED_TEST_SUITE_P(My, SetVectorTest, MyTypes);
```

---

## 8. Additional Resources

- [Value-Parameterized Tests documentation](../advanced.md#value-parameterized-tests)
- [Typed and Type-Parameterized Tests documentation](../advanced.md#typed-tests)
- [googletest/include/gtest/gtest-param-test.h](https://github.com/google/googletest/blob/main/googletest/include/gtest/gtest-param-test.h) — detailed internal examples
- [googletest/include/gtest/gtest-typed-test.h](https://github.com/google/googletest/blob/main/googletest/include/gtest/gtest-typed-test.h) — typed tests internals
- [GoogleTest Primer](docs/primer.md) — good starting point for test writing basics
- [GoogleTest Reference — Testing Macros](docs/reference/testing.md)

---

## 9. Summary

Parameterized and typed tests in GoogleTest enable powerful, reusable test patterns that promote thorough testing across a broad set of inputs and types. By defining test fixture templates and instantiating them with parameter lists or type lists, you dramatically reduce test duplication while increasing clarity and coverage.

Mastering these features lets you write maintainable and scalable test suites adapted to evolving codebases, especially those using templates and extensive inputs.

Use the provided macros (`TEST_P`, `INSTANTIATE_TEST_SUITE_P`, `TYPED_TEST`, `TYPED_TEST_SUITE`) along with generators (`Values`, `Range`, `Combine`) to unlock these capabilities.

---