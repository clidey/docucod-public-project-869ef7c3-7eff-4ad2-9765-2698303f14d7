---
title: "Quickstart with Bazel"
description: "Step-by-step guide for integrating GoogleTest into a Bazel build system, configuring test targets, and executing tests. Optimized for users in modern, scalable C++ environments."
---

# Quickstart: Building with Bazel

This guide walks you through integrating GoogleTest into a Bazel build system. You'll learn how to set up a Bazel workspace, configure test targets, and build and run your tests step-by-step. This is optimized for developers working in modern, scalable C++ environments looking to leverage GoogleTest with Bazel.

---

## Prerequisites

Before starting, ensure you have the following ready:

- A supported operating system such as Linux, macOS, or Windows.
- A C++ compiler that supports at least C++17.
- Bazel version 7.0 or higher installed on your system. If Bazel is not yet installed, refer to the [Bazel installation guide](https://bazel.build/install).

> Note: The terminal commands below assume a Unix shell but will also work from the Windows command line.

---

## 1. Set Up a Bazel Workspace

A Bazel workspace is the root directory where you keep your source code and build configuration. To create a workspace:

1. Open your terminal.
2. Create and enter a new directory for your workspace:

```bash
mkdir my_workspace && cd my_workspace
```

3. Create a `MODULE.bazel` file in the root directory to declare your GoogleTest dependency. Using Bazel Central Registry, add this content to `MODULE.bazel`:

```python
# MODULE.bazel

# Replace "1.17.0" with the latest version from
# https://registry.bazel.build/modules/googletest
bazel_dep(name = "googletest", version = "1.17.0")
```

This declaration enables Bazel to fetch and manage GoogleTest automatically.

---

## 2. Create Your Test Source File

Write a simple test that uses GoogleTest features:

1. In your workspace directory, create a file named `hello_test.cc`.
2. Add the following C++ test code:

```cpp
#include <gtest/gtest.h>

// Simple test demonstrating basic GoogleTest assertions.
TEST(HelloTest, BasicAssertions) {
  // Assert the two strings are not equal.
  EXPECT_STRNE("hello", "world");
  // Assert arithmetic equality.
  EXPECT_EQ(7 * 6, 42);
}
```

This test verifies basic GoogleTest assertions and is a great starting point.

---

## 3. Write the Bazel BUILD File

Define how Bazel should build and link your test:

1. In the same directory as your test, create a file named `BUILD`.
2. Paste the following Bazel build rule into it:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

Explanation:

- `cc_test`: Bazel rule for compiling C++ test binaries.
- `name`: The target name; used to run the test.
- `size`: Categorizes the test size (e.g., small, medium, large).
- `srcs`: Source code files for the test.
- `deps`: External dependencies, here pointing to GoogleTest libraries.

This configuration tells Bazel to link your test with GoogleTest and the accompanying `main()` function.

---

## 4. Build and Run the Test

Build and execute your test using Bazel commands:

1. To build and test, run:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- `--cxxopt=-std=c++17` ensures GoogleTest compiles with C++17 standards.
- `--test_output=all` prints test output details.
- `//:hello_test` specifies the root target.

2. Observe the console output, which should indicate:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

3. The command completes successfully if your test passes.

---

## Troubleshooting Tips

- **Compiler Errors**
  - Ensure your compiler supports C++17.
  - For MSVC, adapt `--cxxopt` to `/std:c++17`.

- **Bazel Fails to Fetch GoogleTest**
  - Verify internet connectivity.
  - Check that the version in `MODULE.bazel` matches one available on [BazelCentral Registry](https://registry.bazel.build/modules/googletest).

- **Test Does Not Run or Output Missing**
  - Double-check that `cc_test` target dependencies include both `@googletest//:gtest` and `@googletest//:gtest_main`.
  - Confirm source files are in the correct location relative to `BUILD`.

---

## Best Practices

- Use descriptive test names and suite names to organize your tests logically.
- Prefer linking against `gtest_main` to avoid writing your own `main()`.
- Utilize Bazel's caching and parallelism for scalable test builds.
- Keep test targets small and focused to speed up execution.

---

## Next Steps

Congratulations! You've integrated GoogleTest into a Bazel build and run your first test.

To deepen your understanding and capabilities, consider:

- Reading the [GoogleTest Primer](primer.md) to learn how to write diverse and meaningful tests.
- Exploring [Writing Your First Test](getting-started/first-test-execution/writing-your-first-test) for foundational test writing.
- Reviewing [Running & Validating Tests](getting-started/first-test-execution/running-tests) for test execution and interpretation.
- Checking out other build integrations like the [Quickstart with CMake](quickstart-cmake.md) if you use different build tools.

