---
title: "Strictness Modes and Policies"
description: "Details the NiceMock, NaggyMock, and StrictMock wrappers, highlighting their impact on test reliability and debuggability. Demonstrates when and how to apply each mode, and how to interpret errors arising from unexpected mock method calls."
---

# Strictness Modes and Policies

GoogleMock provides three modes of mock object strictness to control how uninteresting calls (calls to mock methods without explicit expectations) are handled in tests: **NiceMock**, **NaggyMock**, and **StrictMock**. These wrappers alter the behavior of mock instances to improve test reliability and debuggability according to your needs.

---

## Overview of Strictness Modes

| Mode         | Behavior on Uninteresting Calls                          | Typical Use Case                                    |
|--------------|----------------------------------------------------------|----------------------------------------------------|
| **NiceMock** | Suppresses warnings; uninteresting calls are silently ignored | When you want clean test output and don't care about uninteresting calls |
| **NaggyMock**| Prints warnings on uninteresting calls                    | Default mode; useful during development to detect missing expectations |
| **StrictMock**| Treats uninteresting calls as test failures              | Enforces strict verification; helpful to catch unwanted calls early |

By default, mock objects behave like **NaggyMock**, printing warnings for any uninteresting calls. This may change to **NiceMock** in future releases to favor maintainability.


## Using NiceMock, NaggyMock, and StrictMock

These templates wrap your mock class to change its strictness behavior without modifying the mock class itself.

### Basic Usage

Given a mock class `MockFoo`, you can create modified mocks as follows:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Uninteresting calls ignored quietly.
NaggyMock<MockFoo> naggy_foo;    // Uninteresting calls print warnings.
StrictMock<MockFoo> strict_foo;  // Uninteresting calls cause test failures.
```

All three behave like subclasses of `MockFoo` and accept the same constructor arguments, including those for mocks with non-default constructors:

```cpp
NiceMock<MockFoo> nice_foo(5, "arg");
StrictMock<MockFoo> strict_foo("config");
```

### Behavior Illustration

```cpp
class MockFoo {
 public:
  MOCK_METHOD0(DoSomething, void());
};

TEST(ExampleTest, UsingDifferentStrictnessModes) {
  NiceMock<MockFoo> nice;
  nice.DoSomething();        // No warning or failure

  NaggyMock<MockFoo> naggy;
  naggy.DoSomething();       // Prints warning about uninteresting call

  StrictMock<MockFoo> strict;
  // strict.DoSomething();   // Fails test due to uninteresting call
}
```

## When to Use Each Mode

- **NiceMock**: Use when your test should focus only on specific interactions and ignore irrelevant calls to keep output clean.
- **NaggyMock**: Useful during active test development where all unplanned calls should be flagged to improve expectations coverage.
- **StrictMock**: Best for strict validation environments or critical code, where every unexpected call indicates a regression or missing mock setup.

## Interaction with Mock Methods

- These wrappers only affect **uninteresting calls** — calls to mock methods that have no matching `EXPECT_CALL`.
- **Unexpected calls** (calls that don’t match any expectations but have some `EXPECT_CALL`s defined) always cause errors regardless of mode.
- Strictness wrappers affect only methods **defined directly** via the `MOCK_METHOD` macro in the mock class. Methods inherited from base classes may not reflect these behaviors.

## Constructor Behavior

`NiceMock`, `NaggyMock`, and `StrictMock` inherit constructors from the wrapped mock class, allowing seamless substitution. They ensure that strictness registration occurs before mock construction and deregistration after destruction, preserving strictness throughout the mock’s lifetime.

## Example: Suppressing Warnings with NiceMock

```cpp
using ::testing::NiceMock;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string&), ());
};

TEST(PrinterTest, UsesNiceMock) {
  NiceMock<MockPrinter> printer;

  // No warnings about uninteresting calls
  printer.Print("hello");

  EXPECT_CALL(printer, Print("expected"));
  printer.Print("expected");
}
```

## Example: StrictMock Causes Failures for Uninteresting Calls

```cpp
using ::testing::StrictMock;

class MockSensor {
 public:
  MOCK_METHOD(int, ReadValue, (), ());
};

TEST(SensorTest, FailsOnUnexpectedCall) {
  StrictMock<MockSensor> sensor;

  EXPECT_CALL(sensor, ReadValue()).Times(1);
  sensor.ReadValue();  // OK

  sensor.ReadValue();  // Test fails here: uninteresting call
}
```

## Controlling Strictness Precision

- You can also apply `Mock::AllowLeak()` on mocks wrapped by strictness modifiers to avoid verification failures if the mock is leaked.

- Since only mock methods defined with `MOCK_METHOD` are affected, combining the wrappers with older or hand-coded mocks may yield unexpected behavior.

## Troubleshooting Strictness Mode Issues

### Common Pitfalls

- **Uninteresting calls warnings or errors appear unexpectedly:** Check if you have forgotten to define `EXPECT_CALL` for relevant methods or switch to `NiceMock` if warnings are noise.
- **No effect on methods from base classes:** Ensure methods are declared as `MOCK_METHOD` in the top-level mock class.
- **Destructors not virtual:** Lack of virtual destructor on the mock class can cause undefined behavior with strictness wrappers.

### Resolving Unintended Failures

- Use `NiceMock` when unsure to silence unnecessary warnings.
- Gradually tighten to `NaggyMock` and then `StrictMock` as you add expectations to your mocks.


## Summary

The strictness wrappers `NiceMock`, `NaggyMock`, and `StrictMock` let you control how GoogleMock reports uninteresting calls, aiding test clarity and correctness enforcement. These wrappers seamlessly subclass your mock classes, making them easy to adopt and switch during development. They are essential tools for reliable and maintainable interaction-based testing in C++.

---

## Additional References

- [Mocking Reference - NiceMock, NaggyMock, StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock Cookbook - Nice, Strict, and Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [gMock Cheat Sheet - Creating Nice and Strict Mocks](https://google.github.io/googletest/gmock_cheat_sheet.html#MockClass)
- [gMock for Dummies - Using Mocks](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks)

---

## Notes

- By default, mock objects are **naggy**, printing warnings on uninteresting calls.
- `StrictMock` treats uninteresting calls as test failures to tightly validate your mocks.
- `NiceMock` suppresses warnings for uninteresting calls, making tests less noisy.
- These wrappers only affect mock methods defined using `MOCK_METHOD` macros directly in the mock class.
- Virtual destructors in mock classes are strongly recommended for proper behavior.

---

> For comprehensive details, see the [Strictness Modes and Policies Test Implementation](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc) and [Strictness Wrapper Headers](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h).

---