---
title: "Nice, Naggy, and Strict Mocks"
description: "Explains the enforcement styles for treating uninteresting calls in mocks, detailing NiceMock, NaggyMock, and StrictMock wrappers to control warning and error behavior."
---

# Nice, Naggy, and Strict Mocks

This documentation explains the three variants of mock classes provided by GoogleMock to control how uninteresting calls—calls to mock methods without explicit expectations—are reported and handled. These wrappers, `NiceMock`, `NaggyMock`, and `StrictMock`, enable you to tune the verbosity and strictness of your mocks to suit your testing needs.

---

## Overview

GoogleMock defines three key templates to modify the default behavior of mocks around uninteresting calls:

- **`NiceMock<MockClass>`** — Allows uninteresting calls silently without warnings or errors.
- **`NaggyMock<MockClass>`** — Generates warnings for uninteresting calls but allows them.
- **`StrictMock<MockClass>`** — Treats any uninteresting call as an error, causing test failures.

By default, mock objects behave as `NaggyMock` (naggy behavior). However, this will change in the future to default to `NiceMock` behavior, promoting more maintainable and less noisy tests.

These wrappers subclass your mock class, inheriting all its constructors and interfaces, thus they can be used interchangeably with the underlying mock class.

---

## Motivation: Handling Uninteresting Calls

When a mock function is called without a matching `EXPECT_CALL`, it is considered an **uninteresting call**:

- By default, GoogleMock prints a warning message to notify you that the call was not expected.
- You may want to **suppress** these warnings when uninteresting calls are acceptable.
- Alternatively, you may want to **turn warnings into failures** to enforce stricter testing.

The Nice/Naggy/Strict mock templates let you express these preferences on a per-mock-object basis.

---

## Behavior Details

| Mock Wrapper       | Uninteresting Call Behavior                      | Typical Use Case                              |
| ------------------ | ----------------------------------------------- | -------------------------------------------- |
| `NiceMock`         | Silently ignores uninteresting calls; no output | Tests prefer to ignore irrelevant calls      |
| `NaggyMock`        | Warns on uninteresting calls; does not fail test | Default behavior; helpful during test development |
| `StrictMock`       | Fails test on uninteresting calls                  | Strict validation when uninteresting usage is a sign of errors |

Uninteresting calls with return values:

- `NiceMock` will silently apply the default action (returning default-constructed value or what `ON_CALL` defines).
- `NaggyMock` behaves similarly, but prints warnings.
- `StrictMock` causes tests to fail immediately on uninteresting calls.

---

## Using NiceMock, NaggyMock, and StrictMock

### Syntax

Use the wrappers as template classes, passing your mock class as the parameter:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;
NaggyMock<MockFoo> naggy_foo;
StrictMock<MockFoo> strict_foo;
```

These wrappers inherit all constructors of the underlying mock class, so you can pass arguments as usual:

```cpp
NiceMock<MockBar> nice_bar("argument");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 1, 2, "e", "f", true, false);
```

### Interchangeability

Because these are subclasses of your mock class, you can use them wherever the mock class is expected.

---

## Detailed Behavior and Limitations

- **Wrappers only affect uninteresting calls.** Calls that match an existing expectation but fail that expectation (unexpected calls) behave identically regardless of the strictness wrapper.

- **Only Mock Methods Defined with `MOCK_METHOD` Are Affected:**
  - If the mock method is inherited from a base class, strictness wrappers may not have effect depending on the compiler.
  - Nested wrappers like `NiceMock<StrictMock<MockFoo>>` are **not supported**.

- **Destructor Behavior:**
  - Strictness wrappers require the mock class to have a virtual destructor to work correctly.

- **Default Behavior:**
  - Currently, mock classes are naggy by default (behave like `NaggyMock`).
  - The default will switch to nice in the future to reduce noise.

- **Construction and Destruction:**
  - Wrappers register and deregister themselves with GoogleMock’s internal mocking system to set the strictness level for the instance's lifetime.

---

## Example Usage

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

// Using NaggyMock (default behavior): Warns on uninteresting calls
NaggyMock<MockFoo> naggy_foo;
naggy_foo.DoThis();  // No explicit EXPECT_CALL, prints warning

// Using NiceMock: Suppresses warnings on uninteresting calls
NiceMock<MockFoo> nice_foo;
nice_foo.DoThis();  // No warning

// Using StrictMock: Fails on uninteresting calls
StrictMock<MockFoo> strict_foo;
strict_foo.DoThis();  // Test failure: unexpected call

// Setting expectations
EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis();  // OK
```

---

## Best Practices

- Prefer `NiceMock` as the default, especially when you do not want your tests to be brittle due to irrelevant mock interactions.
- Use `NaggyMock` for development and debugging to get warnings about unexpected calls that may indicate missing or incorrect expectations.
- Reserve `StrictMock` for very precise testing scenarios where any unanticipated call indicates a genuine error.

---

## Troubleshooting

- **Unexpected warnings or failures:** Ensure you are using the correct strictness wrapper for your test intention.
- **Mock not behaving strictly or nicely as expected:** Verify that mock methods are defined with `MOCK_METHOD` **directly** in the mock class.
- **Issues with constructors:** Wrappers inherit constructors, but if you encounter issues, explicitly specify construction parameters.
- **Destructor-related problems:** Ensure destructors of mock classes are virtual to prevent undefined behavior with wrappers.

---

## References and Further Reading

- See [GoogleMock Cookbook - The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) for practical guidance.
- API Reference section on [Mocking Framework - Strictness Modes](https://google.github.io/googletest/reference/mocking-framework/strictness-modes).
- Overview of [Mocking Techniques](https://google.github.io/googletest/guides/mocking-techniques/creating-mocks) for foundational knowledge on mocks.

---