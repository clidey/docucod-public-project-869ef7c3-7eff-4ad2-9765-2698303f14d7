---
title: "Strictness and Mock Behavior Modes"
description: "Reference for configuring the response of mocks to unexpected or uninteresting calls—using NiceMock, NaggyMock, and StrictMock wrappers. Clarifies how to control test noise and enforce stricter test double behaviors."
---

# Strictness and Mock Behavior Modes

This reference documents how to control the behavior of mock objects in GoogleMock when methods without explicit expectations are called — often called *uninteresting calls*. GoogleMock provides three wrappers for mock classes to manage these calls:

- `NiceMock<T>`: suppresses warnings on uninteresting calls.
- `NaggyMock<T>`: logs warnings on uninteresting calls (this is the default behavior for raw mocks).
- `StrictMock<T>`: treats uninteresting calls as test failures.

Understanding and configuring these wrappers helps you balance between test noise and strictness, enabling reliable and maintainable tests.

---

## Overview of Mock Strictness

When you create a mock object of type `MockFoo`, and call a method on it without an explicit expectation set via `EXPECT_CALL()`, GoogleMock considers this an *uninteresting call*. 

By default, uninteresting calls generate a warning message but do not fail the test, which means your tests will continue running but may be noisy.

GoogleMock lets you customize this behavior:

| Wrapper          | Behavior on Uninteresting Calls                | Typical Use Case                             |
|------------------|------------------------------------------------|---------------------------------------------|
| `NaggyMock<T>`   | Logs warnings (default behavior)                | Development, debugging                       |
| `NiceMock<T>`    | Suppresses warnings, silent on uninteresting calls | Production-like tests or when warnings are distracting |
| `StrictMock<T>`  | Treats uninteresting calls as test failures     | Enforcing strict correctness and catching unexpected behavior early |

These wrappers subclass your original mock class `T` and "inherit" constructors to allow seamless substitution.


<Check>
**Check:** Your mock class methods should be defined using `MOCK_METHOD` macros *directly* in the mock class for these wrappers to work correctly. Wrapping mocks that inherit mocked methods via base classes may not produce the expected strictness behavior.
</Check>

---

## Using Strictness Wrappers

Suppose you have a mock class:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (int x), ());
};
```

### NaggyMock (Default)

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> foo;

foo.DoThis();  // No expectations set, logs a warning about uninteresting call
```

Naggy mocks generate notifications but allow uninteresting calls.

### NiceMock

Suppress warnings for uninteresting calls:

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> foo;

foo.DoThis();  // No warnings or failures
```

This is useful when uninteresting calls are expected and safe.

### StrictMock

Make uninteresting calls cause test failures:

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> foo;

foo.DoThis();  // Will generate a test failure for uninteresting call
```

Use this when you want to ensure your tests do not overlook unexpected method calls.

---

## Behavior Summary

| Call Type                | Default Mock (`MockFoo`) | `NiceMock<MockFoo>`   | `NaggyMock<MockFoo>` | `StrictMock<MockFoo>`   |
|--------------------------|--------------------------|----------------------|----------------------|-------------------------|
| Uninteresting call       | Warning                  | No warning           | Warning              | Test failure             |
| Unexpected call (no match to any `EXPECT_CALL`) | Test failure | Test failure        | Test failure        | Test failure             |
| Expected call (matches an `EXPECT_CALL`) | Runs expectation action | Runs expectation action | Runs expectation action | Runs expectation action |

<Note>
Uninteresting calls are to methods *without* any `EXPECT_CALL` expectations.
Unexpected calls are to methods with `EXPECT_CALL` expectations but with arguments not matching any.
</Note>

---

## Applying Wrappers

You can wrap any mock class `MockFoo` to tune uninteresting call behavior:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock(args...);
NaggyMock<MockFoo> naggy_mock(args...);
StrictMock<MockFoo> strict_mock(args...);
```

They behave as subclasses of `MockFoo` and can be passed where `MockFoo` is expected.


---

## Constructor Forwarding

Strictness wrappers "inherit" constructors of the mock class. You can create wrapped mocks using any constructor signature of the underlying mock:

```cpp
// If MockBar has these constructors:

class MockBar {
 public:
  MockBar(const std::string& name);
  MockBar(int x, int y, const std::string& z);
  ...
};

using ::testing::NiceMock;

NiceMock<MockBar> mock1("my_mock");
NiceMock<MockBar> mock2(1, 2, "test");
```

This facilitates easy migration.

---

## Special Considerations

- Wrappers only affect mock methods defined *directly* in the mock class via `MOCK_METHOD`. Methods mocked in base classes may not obey wrapper behavior.

- The mock class destructor should be virtual for wrappers to work correctly.

- Stacking wrappers is not supported (e.g., `NiceMock<StrictMock<MockFoo>>` is disallowed).

---

## Diagnosing Behavior

GoogleMock's `--gmock_verbose` flag helps control logging:

- `info`: logs all calls, including expected and uninteresting calls.
- `warning` (default): logs warnings on uninteresting calls only.
- `error`: logs only failures.

Switch these to monitor how your tests interact with mocks.


## Examples

### Suppressing warnings with NiceMock

```cpp
class MockDatabase {
 public:
  MOCK_METHOD(void, Connect, (), ());
  MOCK_METHOD(int, Query, (const std::string& query), ());
};

void TestFunction(MockDatabase* db) {
  db->Connect();  // Uninteresting call if no EXPECT_CALL
}

TEST(DatabaseTest, NiceMockExample) {
  NiceMock<MockDatabase> db;
  // No EXPECT_CALL - no warnings
  TestFunction(&db);
}
```

### Failing on uninteresting calls with StrictMock

```cpp
using ::testing::StrictMock;

TEST(DatabaseTest, StrictMockExample) {
  StrictMock<MockDatabase> db;
  // This will fail because Connect is called without expectation
  EXPECT_ANY_THROW(TestFunction(&db)); // Or test framework fails test
}
```

### Allowing warnings with NaggyMock

```cpp
using ::testing::NaggyMock;

TEST(DatabaseTest, NaggyMockExample) {
  NaggyMock<MockDatabase> db;
  TestFunction(&db);  // Logs warning but test does not fail
}
```

---

## Best Practices & Recommendations

- **Use NiceMock for most cases:** Allows clean tests with minimal noise but still verifies expectations on methods you care about.

- **NaggyMock for debugging:** Useful if you want to detect unexpected uninteresting calls without failing tests.

- **StrictMock when enforcing strict interaction contracts:** Use sparingly to ensure no unexpected calls are made; helps catch undesired side effects.

- Prefer explicit expectations with `EXPECT_CALL()` for calls you want to verify.

- If needed, use catch-all expectations with `EXPECT_CALL(...).Times(AnyNumber())` to manage known uninteresting calls.

- Always verify that your mock classes have virtual destructors.

- Avoid stacking different strictness wrappers on the same mock class.

---

## Troubleshooting

### Unexpected warnings or failures for uninteresting calls

- Verify whether you accidentally called a mock method with no matching `EXPECT_CALL`.

- Consider if you want to treat such calls as warnings (`NaggyMock`), ignored (`NiceMock`), or failures (`StrictMock`).

- Use `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` for known harmless calls.

- Use `--gmock_verbose=info` to get detailed logs of mock calls.

### Wrappers not suppressing warnings as expected

- Ensure that the mock methods are defined *directly* in the mock class with `MOCK_METHOD`.

- If the wrapped mock inherits mocks, warnings may still show.

- Confirm the mock class destructor is virtual.

---

## Related Documentation

- [Using Mocks](https://google.github.io/googletest/api/gmock_cook_book.html#Using-Mocks)
- [EXPECT_CALL and ON_CALL Reference](../reference/mocking.md#EXPECT_CALL)
- [Understanding Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#KnowsWhenToExpect)
- [Mocking Best Practices and Advice](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)

---

## Summary

This page clarifies how GoogleMock’s `NiceMock`, `NaggyMock`, and `StrictMock` wrappers control mock behavior towards uninteresting calls, helping you manage test noise and enforce call expectations according to your test’s strictness requirements.