---
title: "Strict, Nice, and Naggy Mocking Modes"
description: "Explains the strictness controls for mocks—how to treat unexpected calls, warnings, and errors—using NiceMock, NaggyMock, and StrictMock. Helps users choose and implement the appropriate level of verification for their tests."
---

# Strict, Nice, and Naggy Mocking Modes

GoogleMock empowers you to control the strictness level of your mock objects, enabling fine-grained handling of unexpected or uninteresting method calls during testing. This page explains the distinctions among the three primary mocking modes: **NiceMock**, **NaggyMock**, and **StrictMock**. Understanding these modes helps you tailor mock behavior to match your testing goals—whether that is focusing on essential interactions, being warned about overlooked calls, or detecting every deviation as a failure.

---

## Understanding Mock Strictness

Mocks in GoogleMock are by default **naggy**. When a mock method is called without any matching `EXPECT_CALL` (an *uninteresting call*), the default behavior is to:

- Perform the default action, returning default-constructed values for return types if applicable.
- Print a **warning** message indicating that an uninteresting call occurred.

This balance ensures that tests do not break unnecessarily while alerting you when your mock is invoked in unanticipated ways.

However, you often want more or less verbosity or strictness depending on your test context. GoogleMock provides wrappers to adjust this behavior:

- `NiceMock<T>`: Suppresses warnings on uninteresting calls, allowing them quietly.
- `NaggyMock<T>`: Keeps warnings on uninteresting calls (default behavior).
- `StrictMock<T>`: Treats uninteresting calls as errors, causing test failures.


## Why Adjust Mock Behavior?

Choosing the appropriate strictness level aligns your test design with your intent:

- Use **NiceMock** when you want to ignore interactions not explicitly expected, reducing clutter in test logs and avoiding brittle tests.
- Use **NaggyMock** to get notified via warnings about calls you may have forgotten to expect, helping prevent oversights.
- Use **StrictMock** to enforce tight verification, ensuring your code only calls the mock’s methods as expected.

The default naggy behavior strikes a middle ground but may change to nice mocks by default in the future.


## Using `NiceMock`, `NaggyMock`, and `StrictMock`

Each of these is a *template wrapper* around your mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
  MOCK_METHOD(int, Compute, (int x), ());
};

// Nice mock: suppresses warnings on uninteresting calls
NiceMock<MockFoo> nice_mock;

// Naggy mock: emits warnings on uninteresting calls (default)
NaggyMock<MockFoo> naggy_mock;

// Strict mock: treats uninteresting calls as errors
StrictMock<MockFoo> strict_mock;
```

> **Important:** These wrappers work only for mock methods defined **directly** using the `MOCK_METHOD` macro in your mock class. Methods mocked in base classes may not respect the strictness modifiers.

> Also, nesting these wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) is **not supported**.


### Behavior Details

| Mock Type     | Uninteresting Calls | Unexpected Calls           | Default Action Behavior              |
| ------------- | ------------------- | --------------------------| ---------------------------------- |
| `NiceMock<T>` | **No warnings**     | Errors (fails test)        | Default actions invoked silently   |
| `NaggyMock<T>`| **Warnings shown**  | Errors (fails test)        | Default actions invoked, warnings  |
| `StrictMock<T>`| **Errors (fails test)** | Errors (fails test)    | Default actions invoked, failures  |


## Common Usage Scenarios

### 1. Suppress Noise When You Don’t Care

Sometimes a mock has many methods, but your test is only interested in some. Using a plain mock or `NaggyMock` will print a warning for all uninteresting calls, creating noisy output.

Wrap your mock in `NiceMock`:

```cpp
NiceMock<MockFoo> foo;
// Only expect calls you care about
EXPECT_CALL(foo, DoSomething());
// Uninteresting calls to other methods cause no warnings
foo.SomeOtherMethod();  // No warning
```

This keeps your tests focused and outputs clean.

### 2. Get Warned About Forgotten Expectations

During test development or debugging, you may want to be notified when your code calls mock methods without an explicit expectation. `NaggyMock` emits warnings for such calls but does not fail the test.

This is the default for plain mocks:

```cpp
MockFoo foo;  // Behaves like NaggyMock
foo.SomeMethod();  // Warning printed: uninteresting call
```

Enabling verbosity `--gmock_verbose=warning` controls this as well.

### 3. Enforce Strict Verification

If you want to guarantee that your mock object is called *only* as specified (no other calls), use `StrictMock`:

```cpp
StrictMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis()).Times(1);
// Calling Any other method fails the test immediately
foo.DoThat();  // Fails: uninteresting call is an error
```

This is essential in tests where you want zero tolerance for unintended interactions.


## Summary of Important Points

- **Uninteresting calls** are calls to mock methods without matching `EXPECT_CALL`. By default, these cause warnings but not failures.
- **Unexpected calls** are calls with arguments that don't match any existing expectation for that method. These always cause failures.
- Use `NiceMock<T>` to silence warnings on uninteresting calls.
- Use `NaggyMock<T>` to print warnings on uninteresting calls (default behavior).
- Use `StrictMock<T>` to treat uninteresting calls as errors.
- These wrappers inherit constructors of your mock class, so you can pass constructor arguments transparently.
- Restrict usage of these wrappers to mock classes with virtual destructors to avoid undefined behavior.


## Implementation Details (Behind the Scenes)

Internally, these wrappers manage how uninteresting calls are handled by registering with GoogleMock’s mock object registry:

- `NiceMock` registers to **allow** uninteresting calls silently.
- `NaggyMock` registers to **warn** on uninteresting calls.
- `StrictMock` registers to **fail** on uninteresting calls.

When the wrapper is constructed, it sets this behavior for the mock instance. The behavior is automatically cleaned up when the mock is destroyed.


## Best Practices & Troubleshooting

- **Use strictness thoughtfully.** Excessive strictness can make tests brittle and require frequent maintenance.
- **Prefer `NiceMock` during development** to reduce noise, especially when many mock methods are not asserted.
- **Switch to `StrictMock` selectively** when verifying critical interactions.
- **Do not mix strictness wrappers arbitrarily.** Mixing or nesting them leads to undefined behavior.
- If you get warnings about uninteresting calls unexpectedly, consider adding `EXPECT_CALL(...).Times(AnyNumber())` for those methods, or use `NiceMock`.
- Ensure your mock class and all virtual methods have proper virtual destructors to avoid heap check failures.


## Example: Using NiceMock, NaggyMock, and StrictMock

```cpp
#include <gmock/gmock.h>

class Foo {
 public:
  virtual ~Foo() = default;
  virtual void Bar() = 0;
  virtual int Baz(int x) const = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(void, Bar, (), (override));
  MOCK_METHOD(int, Baz, (int x), (const, override));
};

// Create a nice mock that suppresses warnings for uninteresting calls
NiceMock<MockFoo> nice_mock;

// Create a naggy mock (default behavior) that warns on uninteresting calls
NaggyMock<MockFoo> naggy_mock;

// Create a strict mock that fails on uninteresting calls
StrictMock<MockFoo> strict_mock;

void TestFunction(Foo* foo) {
  foo->Bar();         // Expected or uninteresting calls handled per mock type
  foo->Baz(42);      // Same
}

int main() {
  EXPECT_CALL(naggy_mock, Bar());  // Expect Bar to be called
  TestFunction(&naggy_mock);       // Calls Bar - no error

  TestFunction(&nice_mock);        // No warning or error

  // TestFunction(&strict_mock);   // Fails if any uninteresting call occurs

  return 0;
}
```


## Related Topics

- [Using Mocks in Tests](gmock_cook_book.md#using-mocks-in-tests) — How to create and use mocks in test code.
- [Understanding Uninteresting vs Unexpected Calls](docs/gmock_for_dummies.md#uninteresting-vs-unexpected) — Understanding different call categories.
- [Basics of Mocking Functions and Classes](guides/mocking-best-practices/basics-of-mocking.mdx) — Introductory guide on mocking.
- [Expectations API](api-reference/gmock-api/expectations-api.mdx) — Using `EXPECT_CALL` and `ON_CALL`.
- [Mock Methods Reference](api-reference/gmock-api/mock-methods.mdx) — Details on mocking class methods.


## Troubleshooting Tips

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Uninteresting Call Warnings Keep Appearing">
If your test logs warnings for uninteresting calls you expected to ignore, consider:

- Wrapping your mock in `NiceMock`.
- Supplying a catch-all `EXPECT_CALL(foo, Method(_)).Times(AnyNumber())`.
- Verifying that all `EXPECT_CALL`s are set before the mock methods are called.
</Accordion>
<Accordion title="Unexpected Call Failure">

If your test fails due to unexpected calls:

- Check that your `EXPECT_CALL` matches the actual arguments.
- Use `--gmock_verbose=info` to get detailed traces of calls and match attempts.
- Confirm call order if using sequences.

</Accordion>
<Accordion title="StrictMock Causes Too Many Failures">

If `StrictMock` causes your tests to fail frequently:

- Review the expectations for completeness.
- Consider using `NaggyMock` or `NiceMock` if you want more lenient behavior.
- Use `.Times(AnyNumber())` on some expectations to tolerate additional calls.

</Accordion>
</AccordionGroup>


---

**With control over strictness, GoogleMock enables both lenient and rigorous testing styles. Choose the mode that best fits the intent and stability of your tests.**


<Source url="https://github.com/google/googletest" paths={[{"path": "googlemock/include/gmock/gmock-nice-strict.h", "range": "1-178"},{"path": "googlemock/test/gmock-nice-strict_test.cc", "range": "1-382"}]} branch="main" />
