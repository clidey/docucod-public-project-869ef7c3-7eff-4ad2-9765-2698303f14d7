---
title: "Mock Object Behaviors: Nice, Naggy, Strict"
description: "Outlines the available wrappers to control how uninteresting or unexpected interactions with mock objects are handled. Describes the behaviors of NiceMock, NaggyMock, and StrictMock, providing practical guidance for choosing the right level of enforcement."
---

# Mock Object Behaviors: Nice, Naggy, Strict

GoogleMock offers three predefined wrappers to control how mock objects handle **uninteresting calls**—calls to mock methods that are invoked but not explicitly expected. Understanding these behaviors helps you balance test strictness, noise, and flexibility for your testing needs.

---

## Overview

When you create a mock object in GoogleMock, any call to a method without an expectation (`EXPECT_CALL`) is considered **uninteresting**. How GoogleMock treats these uninteresting calls depends on which wrapper you use:

| Wrapper            | Behavior on Uninteresting Calls              | Typical Use Case
|--------------------|----------------------------------------------|-----------------
| `NiceMock<T>`      | Suppresses warnings; calls proceed silently | General use, when uninteresting calls are permissible
| `NaggyMock<T>`     | Prints warnings on uninteresting calls       | Default, helpful to identify unplanned calls
| `StrictMock<T>`    | Fails test on uninteresting calls            | Enforce strict call compliance

These wrappers work by modifying the reaction of the mock object to uninteresting calls without affecting expectations that are explicitly set.

---

## Using the Wrappers

The wrappers `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` are **template** subclasses of your mock class `T`. They can be used anywhere your mock `T` would be accepted.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Example mock class
class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

// Using NiceMock: suppress warnings on uninteresting calls
NiceMock<MockFoo> nice_mock_foo;
EXPECT_CALL(nice_mock_foo, DoSomething());

// Using NaggyMock (the default mock behavior): warn on uninteresting calls
NaggyMock<MockFoo> naggy_mock_foo;
EXPECT_CALL(naggy_mock_foo, DoSomething());

// Using StrictMock: fail tests on uninteresting calls
StrictMock<MockFoo> strict_mock_foo;
EXPECT_CALL(strict_mock_foo, DoSomething());
```

**Note:** These wrappers inherit constructors from the wrapped class, so you can pass any constructor arguments used by `T`.

---

## Behavior Details

### NiceMock<T>
- **Suppresses warnings** for any uninteresting call to mock methods without expectations.
- Allows uninteresting calls to proceed quietly, performing the default action (e.g., returning default values).
- Useful for tests where uninteresting calls are expected and acceptable, reducing noise in test output.

### NaggyMock<T>
- The **default behavior** for plain mock objects.
- Prints a **warning message** every time an uninteresting call occurs.
- Warns you about potential unintended calls to mock methods without explicit expectations.
- Recommended when developing or debugging tests to catch unexpected mock interactions.

### StrictMock<T>
- Treats every uninteresting call as a **test failure**.
- If a mock method without an expectation is called, the test fails immediately.
- Useful when you want to **strictly verify** that no calls other than explicitly expected ones occur.
- Ideal for enforcing exact interaction contracts during testing.

---

## Practical Guidance

### When to Use Which

- Use **`NiceMock<T>`** to keep tests clean and focused when extra mock calls are benign or irrelevant to the validation.
- Use **`NaggyMock<T>`** if you want to be notified of unexpected calls but do not want tests to fail immediately.
- Use **`StrictMock<T>`** when ensuring no unmocked calls occur is critical, such as in highly strict unit tests.

### Controlling Behavior for Specific Methods

You can fine-tune uninteresting call behavior method by method by explicitly adding `EXPECT_CALL(...).Times(AnyNumber())` for methods you want to ignore warnings or errors on.

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_)).Times(AnyNumber());
```

This treats calls to `SomeMethod` as interesting, avoiding warnings.

### Limitations
- Wrappers only affect **methods defined with `MOCK_METHOD` directly in your mock class**. Inherited or indirectly defined mocks may not obey the wrapper behavior.
- The destructor of the mock class should be virtual for proper behavior.
- You **cannot nest** wrappers, e.g., `NiceMock<StrictMock<T>>` is unsupported.

---

## Common Usage Patterns

### Catch-All Expectations

Sometimes, to allow a method to be called with any arguments any number of times without warnings or failures, you add a general expectation:

```cpp
using ::testing::_;
using ::testing::AnyNumber;

EXPECT_CALL(mock_foo, MethodName(_)).Times(AnyNumber());
```

This approach is preferable to suppress warnings by default, especially if you do not want to use `NiceMock`.

### Example: Strict Enforcement

```cpp
class MockDatabase {
 public:
  MOCK_METHOD(void, Connect, (), ());
  MOCK_METHOD(void, Disconnect, (), ());
  MOCK_METHOD(bool, Query, (const std::string&), ());
};

StrictMock<MockDatabase> mock_db;

EXPECT_CALL(mock_db, Connect());
EXPECT_CALL(mock_db, Query("SELECT * FROM users"))
    .Times(1)
    .WillOnce(Return(true));
EXPECT_CALL(mock_db, Disconnect());

// Any other mock_db calls without expectations will cause a test failure.
```

This ensures that no unexpected calls slip by unnoticed.

---

## Troubleshooting

### Unexpected Uninteresting Call Warnings or Failures

- If your test outputs warnings about uninteresting calls, verify if you really intend to allow the method to be called without expectation. If so, add `EXPECT_CALL(...).Times(AnyNumber())` or use `NiceMock`.
- If your test fails due to uninteresting calls in `StrictMock`, reconsider your expectations or wrap the mock as `NaggyMock` or `NiceMock` if failure is too strict.

### No Effect of Wrapper Behavior

- Confirm that the mock methods are declared in the mock class directly using `MOCK_METHOD`. Methods inherited from a base mock class may not be influenced by the wrapper.
- Check that destructors in the mock class hierarchy are `virtual`.

---

## Summary

- `NiceMock<T>` suppresses uninteresting call warnings.
- `NaggyMock<T>` (default) prints warnings on uninteresting calls.
- `StrictMock<T>` treats uninteresting calls as test failures.
- Use wrappers by templating on your mock class.
- Control individual method behavior using `EXPECT_CALL(...).Times(AnyNumber())`.
- Proper virtual destructors and direct mock declarations are needed for wrappers to work.

---

## Related Documentation

- [EXPECT_CALL](reference/mocking.md#EXPECT_CALL) – Setting expectations and behaviors.
- [ON_CALL](reference/mocking.md#ON_CALL) – Setting default behaviors for mock methods.
- [Mocking Reference](docs/reference/mocking.md) – Comprehensive guide to GoogleMock mocking.
- [gMock Cookbook: The Nice, the Strict, and the Naggy](docs/gmock_cook_book.md#NiceStrictNaggy) – Practical examples and advice.
- [Matchers Reference](reference/matchers.md) – About argument matchers.

---

## Additional Tips

- Start with `NaggyMock` to identify unexpected calls during test development.
- Switch to `NiceMock` in mature tests to reduce noise from benign calls.
- Use `StrictMock` sparingly, mainly when verification of exact call sets is crucial.
- Always declare mock methods in the mock class with `MOCK_METHOD` for wrapper support.

---

With these behaviors at your fingertips, you have granular control over how strict your mocks are during testing, enabling both flexible and robust test suites tailored to your project's needs.
