---
title: "Mock Behaviors: Strict, Nice, Naggy"
description: "Explores configuring how mocks react to unexpected calls using NiceMock, StrictMock, and NaggyMock wrappers. Guides users in balancing strictness with test maintainability and diagnostics."
---

# Mock Behaviors: Strict, Nice, Naggy

GoogleMock provides powerful mechanisms for controlling how mocks behave when they receive unexpected or uninteresting calls. This page explains the three primary mock behaviors—**StrictMock**, **NiceMock**, and **NaggyMock**—and guides you on choosing the right level of strictness to balance test reliability, maintainability, and diagnostics.

---

## Understanding Uninteresting vs. Unexpected Calls

Before diving into mock behaviors, it's crucial to grasp the distinction between *uninteresting* and *unexpected* calls:

- **Uninteresting Calls** are invocations of mock methods that have **no `EXPECT_CALL` matcher set**. The test is not explicitly verifying these calls.
- **Unexpected Calls** occur when there **are** expectations set for a method, but a call’s arguments do **not** match any existing `EXPECT_CALL`.

> **Important:**
> - Unexpected calls are always errors.
> - Uninteresting calls are allowed by default but produce warnings to help detect potential issues.

---

## Mock Behavior Wrappers

GoogleMock supplies three wrapper templates to modify mock object behavior regarding uninteresting calls:

| Mock Type             | Behavior on Uninteresting Calls                            | Typical Use Case                              |
|-----------------------|------------------------------------------------------------|----------------------------------------------|
| `NiceMock<T>`         | Suppresses warnings; quietly allows uninteresting calls.   | When you prefer fewer distractions and want to 
|                       |                                                            | focus only on failing expectations.            |
| `NaggyMock<T>` _(default)_ | Prints warnings for uninteresting calls.                   | Default mock type; useful during test development 
|                       |                                                            | to detect unplanned calls.                      |
| `StrictMock<T>`       | Treats uninteresting calls as test failures.               | For precise verification and catching 
|                       |                                                            | unintended calls strictly.                       |

### General Usage Pattern

Using any of these is simple; they wrap any mock class `MockClass` and behave as a subclass.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// NiceMock example
NiceMock<MockClass> nice_mock;
EXPECT_CALL(nice_mock, DoSomething());

// NaggyMock (default) example
NaggyMock<MockClass> naggy_mock;
EXPECT_CALL(naggy_mock, DoSomething());

// StrictMock example
StrictMock<MockClass> strict_mock;
EXPECT_CALL(strict_mock, DoSomething());
```

Additionally, `NiceMock` and `StrictMock` transparently inherit constructors from the base mock class, so you can construct them with the same arguments.

---

## Behavior Details and Guidance

### NiceMock

- Suppresses all warnings about uninteresting calls.
- Useful to reduce noise when you only want to verify selected expectations.
- Uninteresting calls proceed with their default actions.
- Does **not** suppress errors on unexpected calls.

<Note>
NiceMock only affects mock methods defined **directly** with `MOCK_METHOD` in the wrapped mock class. Methods inherited from base classes might not be managed as expected.
</Note>

### NaggyMock

- The default behavior of mock objects.
- Uninteresting calls generate warnings.
- Helps catch unexpected calls you might have forgotten to set expectations for.
- Continues test execution after warnings.

### StrictMock

- Treats uninteresting calls as test failures.
- Forces precise expectation specification.
- Helps detect any unintended interaction during test execution.
- Useful for strict verification and when you require no surprises in mock interactions.

<Warning>
Use StrictMock sparingly. It can make tests brittle and difficult to maintain, especially if your production code undergoes refactoring without interface changes.
</Warning>

---

## Practical Tips for Choosing Mock Strictness

1. **Default to NiceMock** when writing robust tests that verify meaningful interactions but do not need to catch every trivial call.
2. **Use NaggyMock** (default) during active test development or debugging to get warnings for potentially overlooked calls.
3. **Reserve StrictMock** for critical interface contracts where every call must be exactly verified or where no extra calls should occur.

<Callout>
Carefully consider the trade-off between test maintainability and strictness. Excessive strictness can cause tests to fail from harmless internal changes, increasing maintenance effort.
</Callout>

---

## Addressing Common Scenarios

### How to Suppress Specific Uninteresting Call Warnings

If you want to keep NaggyMock behavior but suppress warnings for certain methods, explicitly allow any number of calls via `EXPECT_CALL` with `Times(AnyNumber())`:

```cpp
EXPECT_CALL(mock, SomeMethod(_)).Times(::testing::AnyNumber());
```

This combination tells GoogleMock that calls to `SomeMethod` are expected and should not issue uninteresting call warnings.

### What Happens if You Mix Wrappers?

Nesting wrappers like `NiceMock<StrictMock<MockClass>>` is **not supported** and will not behave correctly.

### Virtual Destructors Are Important

Mocks wrapped by NiceMock or StrictMock require the underlying mock class to have a **virtual destructor** to ensure proper behavior.

<Warning>
Mock classes lacking virtual destructors may exhibit undefined or incorrect behavior when used with `NiceMock` or `StrictMock`.
</Warning>

---

## Example: Using Different Mock Strictness Levels

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& text), ());
};

TEST(MockStrictnessTest, DemonstratesMockBehavior) {
  NiceMock<MockPrinter> nice_printer;
  NaggyMock<MockPrinter> naggy_printer;
  StrictMock<MockPrinter> strict_printer;

  // Set expected calls only for 'Print' method
  EXPECT_CALL(nice_printer, Print("hello"));
  EXPECT_CALL(naggy_printer, Print("hello"));
  EXPECT_CALL(strict_printer, Print("hello"));

  // Calling an uninteresting method 'Print' with an argument different than 'hello'
  nice_printer.Print("ignored");   // No warning, no failure
  naggy_printer.Print("ignored");  // Warning printed
  strict_printer.Print("ignored"); // Test failure

  nice_printer.Print("hello");
  naggy_printer.Print("hello");
  strict_printer.Print("hello");
}
```

---

## Troubleshooting

### Warning About Uninteresting Calls:
If you receive "Uninteresting mock function call" warnings,
  - Confirm whether you intended to allow the call.
  - Add a `EXPECT_CALL` with `Times(AnyNumber())` to suppress warnings for that method.
  - If you want to suppress all warnings, wrap the mock in `NiceMock`.

### Unexpected Calls Causing Failures:
If your test fails because of unexpected calls,
  - Verify that you have set expectations for all mock methods that should be called.
  - Use more general matchers or an `EXPECT_CALL` with `_` matcher and appropriate cardinality.

### StrictMock Not Working as Expected:
  - Check that the mock class has a virtual destructor.
  - Confirm the mock methods are declared with `MOCK_METHOD` in the class being wrapped.

---

## Additional Resources

- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [gMock Cookbook - Nice, Naggy, Strict Mocks](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Creating Mock Classes and Setting Expectations](https://google.github.io/googletest/guides/mocking.html#mock-classes-expectations)
- [Matchers Reference](https://google.github.io/googletest/reference/matchers.html)
- [Expectations and Actions](https://google.github.io/googletest/reference/mocking.html#expectations-actions)

---

Utilizing NiceMock, NaggyMock, and StrictMock effectively empowers you to craft tests that are clear, robust, and aligned with your verification goals. Choose the level of strictness that best fits your testing strategy to balance informative diagnostics with maintainable and expressive tests.

<Check>
- Prefer `NiceMock` for general testing scenarios to reduce noise.
- Use `NaggyMock` when developing or debugging tests to receive warnings.
- Resort to `StrictMock` only when you require enforcement that uninteresting calls must not occur.
</Check>
