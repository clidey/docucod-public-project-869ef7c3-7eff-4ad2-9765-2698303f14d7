---
title: "Strictness and Uninteresting Calls"
description: "Explains how to adjust mock object strictness using NiceMock, NaggyMock, and StrictMock wrappers. Describes how these impact tests with unexpected or uninteresting calls, and provides decision guidance for ensuring stable, readable test output."
---

# Strictness and Uninteresting Calls

This documentation explains how to control the strictness level of mock objects in GoogleMock using wrappers such as `NiceMock`, `NaggyMock`, and `StrictMock`. These wrappers influence how uninteresting and unexpected calls to mock methods are handled during test execution, enabling you to produce clearer, more maintainable, and stable test outcomes.

---

## Conceptual Overview

In GoogleMock, a **mock object** can receive calls to its mocked methods. These calls are categorized into:

- **Expected calls**: Those explicitly declared in the test using `EXPECT_CALL`.
- **Uninteresting calls**: Calls to methods that do not have any expectations set.
- **Unexpected calls**: Calls that match existing mocked methods but do not satisfy any of the declared expectations (e.g., wrong arguments or called too many times).

The strictness wrappers modulate how uninteresting calls are treated:

| Wrapper      | Behavior on Uninteresting Calls                          |
|--------------|---------------------------------------------------------|
| `NiceMock`   | Suppresses warnings. Uninteresting calls are ignored.  |
| `NaggyMock`  | (Default behavior) Prints warnings on uninteresting calls but allows them. |
| `StrictMock` | Treats uninteresting calls as test failures (errors).  |

Unexpected calls always result in test failures regardless of wrapper.

---

## Using Strictness Wrappers

### 1. `NiceMock`

Wrap your mock class inside `NiceMock` to suppress warnings about uninteresting calls. This is ideal when you only care about some calls and want to avoid noisy output.

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();      // Expected call, verified
mock_foo.DoThat(5);    // Uninteresting call, no warning
```

### 2. `NaggyMock`

This is the default behavior for mock objects. It prints warnings when uninteresting calls occur but does not fail the test. Useful during development or debugging.

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();      // Expected call
mock_foo.DoThat(5);    // Warning: Uninteresting call
```

### 3. `StrictMock`

Use `StrictMock` to fail the test immediately whenever an uninteresting call happens. This is recommended if you want very precise test coverage and catch accidentally called mock methods.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();      // Expected call
mock_foo.DoThat(5);    // Test failure: Uninteresting call
```

---

## Handling Constructor Arguments

The strictness wrappers inherit constructors from the underlying mock class, so you can construct them just as you would the original mock.

```cpp
NiceMock<MockBar> nice_bar("hello");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 1, 2, "e", "f", true, false);
```

---

## Determining the Strictness Type of a Mock Object

GoogleMock provides utilities to query a mock object's type:

- `Mock::IsNice(pointer)`
- `Mock::IsNaggy(pointer)`
- `Mock::IsStrict(pointer)`

Example:

```cpp
MockFoo foo;
EXPECT_TRUE(Mock::IsNaggy(&foo));  // Default mocks are naggy

NiceMock<MockFoo> nice_foo;
EXPECT_TRUE(Mock::IsNice(&nice_foo));

StrictMock<MockFoo> strict_foo;
EXPECT_TRUE(Mock::IsStrict(&strict_foo));
```

---

## Suppressing Leak Checks for Mocks

GoogleMock tracks mock objects to detect leaks. You can mark mocks to skip this check.

```cpp
NiceMock<MockFoo>* leaked = new NiceMock<MockFoo>;
Mock::AllowLeak(leaked);
```

---

## Best Practices and Recommendations

- Use `NiceMock` for general tests to reduce noise about uninteresting calls.
- Employ `StrictMock` sparingly where exact mock interaction is critical.
- Add catch-all expectations using wildcard matchers to avoid unexpected call errors, especially in strict mode:

```cpp
EXPECT_CALL(mock, Method(_)).Times(AnyNumber());
EXPECT_CALL(mock, Method(specific_arg)).WillRepeatedly(Return(value));
```

- Always set expectations **before** exercising the mock object to ensure correct matching and error reporting.

- Be aware that the strictness wrappers affect only *uninteresting* calls, not *unexpected* calls.

- Use the verbose flag (`--gmock_verbose`) with values `info`, `warning`, or `error` to control the logging level of mock call information.

---

## Troubleshooting

### Warning Messages for Uninteresting Calls

If your test outputs warnings like:

```
GMOCK WARNING: Uninteresting mock function call - returning default value.
```

Consider:

- Switching to `NiceMock` to suppress warnings if uninteresting calls are acceptable.
- Adding explicit `EXPECT_CALL(...).Times(AnyNumber())` for the method(s) you do expect but don't care about the arguments.
- Increasing the verbosity level to `info` if you want detailed call traces for debugging.

### Unexpected Call Failures

Unexpected calls (calls that do not match any existing expectation) always fail.

To fix:

- Ensure you write `EXPECT_CALL` for all methods that will be called.
- Use catch-all matchers to accept broad argument ranges.
- Review call sequences and argument matchers for correctness.

### StrictMock Causes Test Failures for Legacy Tests

If switching to `StrictMock` causes failures, it indicates your tests rely on ignoring some uninteresting calls. Adjust your expectations or revert to `NiceMock` for these tests.

---

## Summary

- `NiceMock`, `NaggyMock`, and `StrictMock` help you tune mock call strictness.
- Strictness affects warnings and failures on uninteresting calls.
- Unexpected calls always cause failures.
- Use catch-all expectations to support flexible test designs.
- Use constructors and `AllowLeak` seamlessly with wrappers.

---

## References

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference - Strictness and Uninteresting Calls](https://google.github.io/googletest/reference/mocking.html#NiceStrictNaggy)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html#uninteresting_calls)
- [GoogleTest GitHub](https://github.com/google/googletest)
