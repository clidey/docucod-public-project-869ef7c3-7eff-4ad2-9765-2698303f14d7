---
title: "Nice, Strict, and Naggy Mock Classes"
description: "API and usage reference for configuring how mock classes treat uninteresting calls via NiceMock, StrictMock, and NaggyMock wrappers. Guides users in choosing the right behavior for their use case, with examples of error/warning handling."
---

# Nice, Strict, and Naggy Mock Classes

Configure how your mock classes handle uninteresting calls using GoogleMock's `NiceMock`, `StrictMock`, and `NaggyMock` wrappers. This reference guides you in selecting the appropriate behavior for your testing needs, with practical usage examples and explanations of error and warning handling.

---

## Overview

When working with mock objects, you often face calls to mock methods that your test doesn't explicitly expect. How the mock reacts to these **uninteresting calls** significantly affects test output and failure behavior. GoogleMock offers three wrappers to control this:

- **`NiceMock<T>`**: Suppresses warnings on uninteresting calls.
- **`NaggyMock<T>`**: Logs warnings on uninteresting calls (default behavior).
- **`StrictMock<T>`**: Treats uninteresting calls as test failures.

Each wrapper inherits from your mock class `T` and can be used interchangeably where `T` is accepted. They take the same constructor arguments as `T`.

---

## Why Control Uninteresting Calls?

Uninteresting calls are method invocations on mocks that have no expectation (`EXPECT_CALL`) set on them. By default, such calls produce warnings to alert you of possibly missing or incomplete tests. But you may want to:

- Reduce noise by ignoring all uninteresting calls (`NiceMock`).
- Enforce strict checking that uninteresting calls lead to failures (`StrictMock`).

Choosing the right wrapper enforces how rigorously you verify the behavior of your mock in your tests.

---

## Usage Patterns

### 1. NaggyMock: Default Warning Behavior

`NaggyMock<T>` generates warnings for any uninteresting calls but doesn't cause test failures. This is the default behavior for straight mock classes (without wrapping).

```cpp
using ::testing::NaggyMock;

class MockClass {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

TEST(MyTest, Example) {
  NaggyMock<MockClass> mock_obj;

  EXPECT_CALL(mock_obj, DoSomething()); // Expected call

  // Calls not expected will warn but not fail.
  mock_obj.DoSomething();
  mock_obj.DoSomething(); // Warning here if no EXPECT_CALL
}
```

Generators of warnings help catch oversights without failing immediately.

### 2. NiceMock: Silencing Warnings

`NiceMock<T>` suppresses warnings for uninteresting calls, allowing tests to continue silently for unexpected invocations.

```cpp
using ::testing::NiceMock;

NiceMock<MockClass> mock_obj;
EXPECT_CALL(mock_obj, DoSomething());

mock_obj.DoSomething();  // OK
mock_obj.SomeOtherMethod();  // No warning or failure
```

Use this when uninteresting calls are acceptable or expected, reducing clutter.

### 3. StrictMock: Enforce Failures on Uninteresting Calls

`StrictMock<T>` turns uninteresting calls into failures, immediately flagging any unexpected interaction.

```cpp
using ::testing::StrictMock;

StrictMock<MockClass> mock_obj;
EXPECT_CALL(mock_obj, DoSomething());

mock_obj.DoSomething();      // OK
mock_obj.SomeOtherMethod();  // Test failure on uninteresting call
```

Apply strict mocks for the tightest verification when you want to ensure every interaction is explicitly declared.

---

## Creating Mocks with Nice, Naggy, and Strict Behaviors

Wrap your mock class using GoogleMock's class template wrappers:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(int, GetSize, (), (const, override));
  MOCK_METHOD(void, DoSomething, (), (override));
};

// Default — NaggyMock behavior
MockFoo naggy_mock;

// NiceMock suppresses warnings
NiceMock<MockFoo> nice_mock;

// StrictMock treats uninteresting calls as failures
StrictMock<MockFoo> strict_mock;
```

---

## Constructor Forwarding

These wrapper classes forward constructor arguments to the wrapped mock `T`:

```cpp
NiceMock<MockFoo> nice_mock(5, "hello");
StrictMock<MockBar> strict_mock(args...);
```

This means you can wrap mock classes with complex constructors without modification.

---

## Implementation Details and Caveats

- Wrap only **one level deep**; nesting is unsupported:
  ```cpp
  // Unsupported!
  NiceMock<StrictMock<MockFoo>> nested_mock;
  ```

- Only affects mock methods declared **directly** in the mock class `T` with `MOCK_METHOD`. If mock methods live in base classes, they may still emit warnings or errors regardless of the wrapper.

- Your mock class `T` should have a **virtual destructor** to ensure proper behavior of the wrappers.

---

## How Behavior Differs Under the Hood

The wrappers configure the reaction GoogleMock uses when an uninteresting call occurs on the mock instance:

| Wrapper       | Uninteresting Calls Handler       | Test Result on Uninteresting Call |
|---------------|----------------------------------|----------------------------------|
| `NiceMock<T>` | **Ignore / Allow**                | No warning, no failure            |
| `NaggyMock<T>`| **Warn (default if no wrapper)** | Warning only                     |
| `StrictMock<T>`| **Fail**                        | Test fails immediately            |

This centralizes uninteresting call reporting, providing flexible strictness levels.

---

## Selecting the Right Wrapper: User Advice

- **Default (NaggyMock)**: Warns about uninteresting calls to catch possible missing expectations.
- **NiceMock**: Use to silence noisy warnings from legacy code or when uninteresting calls are normal and unhelpful.
- **StrictMock**: Use when you want to enforce exact interaction specifications and catch any unexpected call as a test failure.

Be cautious about strict mocks — they can lead to fragile tests requiring frequent updates after implementation changes.

---

## Sample Scenario

Imagine you have a mock class `MockNetworkClient` with many methods. You only care about `SendRequest()` in your test.

- Using default (`NaggyMock`) or direct `MockNetworkClient` will warn about all calls to other methods.
- Wrapping with `NiceMock<MockNetworkClient>` suppresses unwanted warnings, focusing only on your expectations.
- Wrapping with `StrictMock<MockNetworkClient>` causes the test to fail if any unexpected method is called.

This choice controls test sensitivity and output verbosity according to your validation needs.

---

## Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Wrapper Usage">
<Accordion title="Unexpected warnings despite using NiceMock">
Ensure all mock methods with uninteresting calls are declared directly in the wrapped mock class `T` using `MOCK_METHOD`. Base class methods are not affected by NiceMock.
</Accordion>
<Accordion title="Destructor of mock class is not virtual">
Without a virtual destructor in `T`, the wrapper classes may not work properly, potentially causing compilation errors or runtime issues.
</Accordion>
<Accordion title="Failures on uninteresting calls with StrictMock">
This is expected behavior. To soften, use NaggyMock or NiceMock unless you want strict verification.
</Accordion>
<Accordion title="Nesting wrappers doesn’t work">
Wrapping a mock class with multiple behaviors is unsupported. Choose one wrapper based on your test’s strictness requirements.
</Accordion>
</AccordionGroup>

---

## Related API and Reference

- [`EXPECT_CALL` and `ON_CALL`](../expect-call-and-on-call.md) — Setting mock method expectations and default behaviors.
- [`MOCK_METHOD`](../mock-methods.md) — Declaring mock methods.
- [GoogleMock Cookbook](../../guides/mocking-and-advanced-techniques/using-mocks.md) — Practical usage guidance of mocks.

---

## Summary

The `NiceMock`, `StrictMock`, and `NaggyMock` wrappers allow flexible control of uninteresting call reporting in GoogleMock, enabling you to tailor test warnings and failures to your project’s rigor and verbosity preferences. Use these classes by wrapping your mock to cleanly and safely configure this behavior without changing existing mock class definitions.

---

## See Also

- [Mocking Reference — NiceMock, StrictMock, NaggyMock](../mock-methods.md#NiceMock)
- [gMock Cookbook — The Nice, the Strict, and the Naggy](../../guides/mocking-and-advanced-techniques/using-mocks.md#NiceStrictNaggy)
- [Understanding Uninteresting vs Unexpected Calls](../expect-call-and-on-call.md#uninteresting-vs-unexpected)

---

## Source Code

View implementation details in the GoogleMock source:

- [gmock-spec-builders.h](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-spec-builders.h#L260-L360)
- [gmock-spec-builders.cc](https://github.com/google/googletest/blob/main/googlemock/src/gmock-spec-builders.cc#L250-L350)

---