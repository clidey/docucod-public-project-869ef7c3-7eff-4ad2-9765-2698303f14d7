---
title: "Nice, Strict, and Naggy Mocks"
description: "Explains the purpose and usage of NiceMock, StrictMock, and NaggyMock for controlling the handling of unexpected and uninteresting calls in tests. Helps users choose the appropriate strictness for their use case."
---

# Nice, Strict, and Naggy Mocks

GoogleMock provides three specialized wrappers — `NiceMock`, `StrictMock`, and `NaggyMock` — to control how your mock objects respond to **uninteresting calls** (calls to mock methods without explicit expectations). Understanding and choosing between these wrappers empowers you to shape your test's strictness, improve test clarity, and reduce flaky or noisy test outputs.

---

## Why Do We Need Nice, Strict, and Naggy Mocks?

Imagine this scenario in your test:

```cpp
TEST(MyTest, Example) {
  MockFoo mock_foo;
  EXPECT_CALL(mock_foo, ImportantMethod());

  ... // exercise code that calls mock_foo's methods
}
```

If the tested code calls any method on `mock_foo` **other than** `ImportantMethod()`, GoogleMock treats it as an **uninteresting call**. By default, this results in a **warning message**, alerting you that some calls aren't explicitly expected.

While these warnings can be helpful, they can also clutter your test output or cause unwanted failures if you want to explicitly disallow or ignore such calls. This is where the specialized mock wrappers come into play.

## The Three Flavor Wrappers

| Wrapper     | Behavior on Uninteresting Calls                           | Use Case                             |
|-------------|-----------------------------------------------------------|------------------------------------|
| `NiceMock`  | Suppresses warnings on uninteresting calls. Allows them silently. | Use when you want to ignore unexpected method calls and only verify the expected ones. Great for most tests to keep output clean and focus on relevant interactions. |
| `NaggyMock` | Prints warnings on uninteresting calls (default behavior). | Default GoogleMock behavior. Useful when you want reminders about unmocked calls. |
| `StrictMock`| Treats uninteresting calls as **failures** (errors). Tests fail if unexpected calls occur. | Use when test correctness demands strict validation that only expected calls occur. Useful for identifying unintended usage or maintaining tight behavioral contracts. |

## Usage Patterns

All these wrappers are generic template classes that wrap your mock class, inheriting its interface and constructors. They can be used interchangeably wherever the original mock type is expected.

### Constructing Wrapped Mocks

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::StrictMock;
using ::testing::NaggyMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, GetValue, (int x), (const));
};

// Typical usage:
NiceMock<MockFoo> nice_mock;   // Ignores uninteresting calls with no warnings.
StrictMock<MockFoo> strict_mock; // Fails on uninteresting calls.
NaggyMock<MockFoo> naggy_mock;  // Warnings on uninteresting calls (default behavior).
```

You can construct them with any arguments the original mock class constructors support:

```cpp
NiceMock<MockFoo> nice_mock_with_args(arg1, arg2);
```

### Example: Suppressing Warnings with NiceMock

```cpp
TEST(FooTest, WorksWithNiceMock) {
  NiceMock<MockFoo> mock;

  EXPECT_CALL(mock, DoThis());

  mock.DoThis();         // Matches expectation.
  mock.GetValue(10);     // Uninteresting call, but no warning printed.
}
```

### Example: StrictMock Fails on Unexpected Call

```cpp
TEST(FooTest, FailsWithStrictMock) {
  StrictMock<MockFoo> mock;

  EXPECT_CALL(mock, DoThis());

  mock.DoThis();         // Expected, no problem.
  mock.GetValue(20);     // Unexpected call, test fails immediately.
}
```

### NaggyMock: Default Behavior Wrapper

By default, `MockFoo` behaves like `NaggyMock<MockFoo>`. It prints warnings for uninteresting calls but does not fail the test.

```cpp
TEST(FooTest, NaggyMockExample) {
  NaggyMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());

  mock.DoThis();         // Expected call
  mock.GetValue(5);      // Warning issued for unmocked call
}
```

## Important Considerations and Best Practices

- **Only affects uninteresting calls**: The wrappers affect **uninteresting** calls — methods with *no* `EXPECT_CALL` expectation. They have no effect on **unexpected** calls which are calls with arguments that do not match any expectation. Unexpected calls always cause failures.

- **Applicability**: The wrappers only affect mock methods defined **directly** in the wrapped class via `MOCK_METHOD`. Base class mock methods may not be affected due to C++ limitations.

- **Do not nest wrappers**: Combining wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported.

- **Virtual Destructors**: Ideally, your mock class should have a virtual destructor to avoid issues with these wrappers, especially during destruction.

- **Choosing the right wrapper**:
  - Use `NiceMock` to reduce test noise and allow harmless unmocked interactions.
  - Use `NaggyMock` if you’re developing or debugging tests and want to see warnings around unmocked calls.
  - Use `StrictMock` when you want to enforce strict adherence to specified mock interactions, catching unexpected calls as errors.

### Recommended Practice for Most Tests

Prefer using `NiceMock` to build resilient and maintainable tests that verify only what matters.

Switch to `StrictMock` only when verifying no unexpected calls is critical.

<Check>
Beware that strict mocks can introduce brittleness in tests, requiring updates after harmless refactoring. Use judiciously.
</Check>

## Internals: What Happens Behind the Scenes?

- When you create a `NiceMock<T>`, it internally registers itself to suppress warnings for uninteresting calls on that instance.
- `NaggyMock` registers to emit warnings (the current default).
- `StrictMock` registers to treat uninteresting calls as fatal failures.

<Info>
These behaviors are implemented in `gmock-nice-strict.h` but this detail is rarely needed unless extending GoogleMock itself.
</Info>

## Summary

| Feature                  | NiceMock                       | NaggyMock (default)          | StrictMock                    |
|--------------------------|--------------------------------|------------------------------|-------------------------------|
| Warnings on uninteresting calls | Suppressed                     | Printed                       | Test failure                  |
| Errors on unexpected calls      | Test failure                  | Test failure                 | Test failure                  |
| Suitable for                    | Most tests                    | Test development/debugging   | Strict contract enforcement  |
| Supports constructors with args | ✓                            | ✓                            | ✓                            |

## See Also

- [Defining Mocks](reference/mocking-apis/defining-mocks.md) — How to define mock classes and methods
- [Specifying Expectations and Actions](guides/mocking-and-behavior-verification/specifying-expectations-and-actions.md) — How to set expectations
- [Understanding Uninteresting vs Unexpected Calls in gMock](docs/gmock_cook_book.md#uninteresting-vs-unexpected) — Deep dive into call classifications
- [Example Test using NiceMock, StrictMock, NaggyMock](googlemock/test/gmock-nice-strict_test.cc) — GoogleMock’s own tests illustrating these classes

---

## Troubleshooting Common Issues

<AccordionGroup title="Common Pitfalls with Nice/Strict/Naggy Mocks">
<Accordion title="No Effect on Methods Defined in Base Mock Class">
If your mock methods are inherited from a base mock class, the strictness wrappers might not influence their behavior due to C++ compiler limitations.

**Solution:** Define `MOCK_METHOD`s directly in the class you apply the wrapper to.
</Accordion>
<Accordion title="Unexpected Calls Still Fail Even with NiceMock">
Remember, **unexpected** calls (calls with arguments that do not match expectations) always cause errors regardless of wrapper.

**Check:** You may need to add catch-all expectations or adjust your expectations.
</Accordion>
<Accordion title="Compiler Errors on Wrapper Usage">
The wrappers require the wrapped mock class to not itself be a wrapped class (`NiceMock<NaggyMock<T>>` is invalid) and for the mock methods to be defined with `MOCK_METHOD` macros.

**Tip:** Use the wrappers only on raw mock classes.
</Accordion>
</AccordionGroup>

<Tip>
Use `NiceMock` by default in your tests. It reduces noisy warnings and makes tests more maintainable. Switch to `StrictMock` only when your test requires strict enforcement.
</Tip>
