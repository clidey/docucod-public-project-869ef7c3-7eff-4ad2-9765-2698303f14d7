---
title: "Nice, Naggy, and Strict Mocks"
description: "Explains the different behaviors for handling unexpected calls (nice, naggy, strict), and shows how to choose or combine them to achieve desired test behavior control."
---

# Nice, Naggy, and Strict Mocks

GoogleMock provides three flavors of mock object strictness to help you control how your tests respond to *uninteresting* calls—calls to mock methods without explicit expectations. These flavors are the **NiceMock**, **NaggyMock**, and **StrictMock** templates. Choosing among them is a crucial step in crafting maintainable and robust tests by balancing feedback verbosity and strictness.

---

## Understanding Uninteresting Calls

An *uninteresting call* occurs when a mock method is invoked but no `EXPECT_CALL` specification matches it. Unlike *unexpected* calls—which violate explicit expectations—uninteresting calls are allowed by default but trigger different behaviors depending on the mock's strictness mode.

- **Nice mocks** silently accept and ignore uninteresting calls.
- **Naggy mocks** print warnings when such calls are made.
- **Strict mocks** treat them as errors, failing the test.

These behaviors help you calibrate how strictly you want your tests to validate interaction contracts.

---

## The Three Mock Strictness Modes

### NiceMock

`NiceMock<T>` is a subclass of your mock class `T` that *suppresses warnings* for uninteresting calls. This is the gentlest mode and is highly recommended for tests where you want to ignore extraneous interactions and focus only on what matters.

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
// Uninteresting calls will be silently ignored.
```

**Key properties:**
- No warnings for uninteresting calls.
- Still fails tests on unexpected call argument mismatches or calls violating expectations.
- Works with mock classes that define mock methods directly via `MOCK_METHOD`.
- Inherits all constructors of the base mock class.

### NaggyMock

`NaggyMock<T>` (the default mock behavior currently) *prints warnings* when uninteresting calls occur but does not fail the test. It is useful during development or debugging to catch possible oversights.

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
// Uninteresting calls generate warnings but won't cause failures.
```

**Key properties:**
- Emits warnings about uninteresting call invocations with stack traces (depending on verbosity flags).
- Does not cause test failures for uninteresting calls but still enforces expectations.
- Default behavior for mocks unless changed.

### StrictMock

`StrictMock<T>` enforces the *strictest* behavior by *treating uninteresting calls as errors*. It is ideal for scenarios where you want complete coverage of expected interactions and to catch any unexpected usage immediately.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
// Any uninteresting call causes immediate test failure.
```

**Key properties:**
- Fails tests on any uninteresting call.
- Helps ensure your mocks are fully specified and your code only makes expected calls.
- Inherits constructors just like NiceMock and NaggyMock.

---

## How to Use These Strictness Wrappers

The three classes—`NiceMock`, `NaggyMock`, and `StrictMock`—are *templates* that take your mock class as a parameter and generate subclasses with modified uninteresting call behaviors. Since they inherit constructors, you construct them just like your original mock.

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), (override));
  MOCK_METHOD(int, Calculate, (int x), (override));
};

// Usage examples:
NiceMock<MockFoo> nice_foo;    // suppresses warnings
NaggyMock<MockFoo> naggy_foo;  // warns (default behavior)
StrictMock<MockFoo> strict_foo; // errors on uninteresting calls
```

You may pass constructor arguments through these wrappers transparently:

```cpp
NiceMock<MockBar> nice_bar("hello", 42);
```

### Important Usage Caveats

- `NiceMock`, `NaggyMock`, and `StrictMock` only affect mock methods *defined directly* in the mock class using the `MOCK_METHOD` macros. They may not affect methods defined in base classes depending on compiler behavior.
- Nesting different strictness modifiers is not supported and will trigger static assertions.
- These wrappers require your mock’s destructor to be virtual for correct behavior.

---

## Practical Advice on Choosing Strictness

- Use **NiceMock** in production-level tests to minimize maintenance overhead by ignoring uninteresting calls.
- Use **NaggyMock** when developing or debugging tests to get feedback about unexpected unmocked methods.
- Use **StrictMock** sparingly for critical code paths where all interactions must be precisely specified.

Sometimes you may want more control than these modes offer. To specifically allow certain uninteresting calls, you can use:

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_)).Times(AnyNumber());
```

which allows that method to be called any number of times without warnings or errors.

---

## How They Work Internally

Each strictness wrapper registers with the internal GoogleMock infrastructure to alter mock behavior regarding uninteresting calls:

- `NiceMock` calls `AllowUninterestingCalls()` for its instance.
- `NaggyMock` calls `WarnUninterestingCalls()`.
- `StrictMock` calls `FailUninterestingCalls()`.

Upon object destruction, they automatically unregister to restore behavior.

This mechanism ensures that
uninteresting calls are handled consistently during the lifecycle of the mock.

---

## Example

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

TEST(MyTestSuite, ExampleNiceMock) {
  NiceMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());
  mock.DoThis();              // Expected call, no warnings on other calls
  mock.DoThat(true);          // Uninteresting call, silently allowed
}

TEST(MyTestSuite, ExampleNaggyMock) {
  NaggyMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());
  mock.DoThis();              // Expected call
  mock.DoThat(true);          // Uninteresting call, prints warning
}

TEST(MyTestSuite, ExampleStrictMock) {
  StrictMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());
  mock.DoThis();              // Expected call
  mock.DoThat(true);          // Uninteresting call, causes error
}
```

---

## Summary

These strictness modifiers help you tailor how GoogleMock reports on uninteresting calls, balancing test verbosity with strictness. They enable cleaner tests that focus precisely on interactions you care about, improving test maintainability, readability, and robustness.

---

## Troubleshooting & Best Practices

- **Unintended warnings?** Use `NiceMock` to suppress noise when you intentionally ignore some calls.
- **Tests failing due to extra calls?** Check if you should replace mocks with `NaggyMock` or `StrictMock` to detect unexpected usage.
- **Mock method not affected by strictness?** Confirm the method is directly declared in your mock class using `MOCK_METHOD`.
- **Nesting errors?** Avoid nesting strictness wrappers like `NiceMock<StrictMock<T>>`.


---

## Additional Resources

- See the [gMock Cookbook section on The Nice, Strict, and Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) for practical examples.
- Review the [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) to quickly get started with standard mock usage.
- Consult the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html#NiceMock) for detailed API specifications.

---

## Diagram: Mock Object Behavior with Strictness Modes

```mermaid
flowchart TD
    RawMock["MockFoo (Raw Mock)"]
    NiceMock["NiceMock<MockFoo>"]
    NaggyMock["NaggyMock<MockFoo>"]
    StrictMock["StrictMock<MockFoo>"]

    call["Mock Method Call"] -->|No EXPECT_CALL| checkUninteresting["Check if call is uninteresting"]

    subgraph UninterestingCallHandling
      checkUninteresting -->|NiceMock| allowCall["Allow call silently"]
      checkUninteresting -->|NaggyMock| warnCall["Print warning, allow call"]
      checkUninteresting -->|StrictMock| failCall["Fail test on call"]
      checkUninteresting -->|RawMock (default: NaggyMock behavior)| warnCall
    end

    subgraph ExpectedCallHandling
      call -->|Matches EXPECT_CALL| executeCall["Execute expected call normally"]
    end

    executeCall --> END["Continue Test"]
    allowCall --> END
    warnCall --> END
    failCall --> ERROR["Test Failure"]

    classDef success fill:#e0ffe0,stroke:#2d7f2d,stroke-width:2px;
    classDef error fill:#ffe0e0,stroke:#7f2d2d,stroke-width:2px;

    class executeCall,allowCall,warnCall success;
    class failCall,error error;
```
