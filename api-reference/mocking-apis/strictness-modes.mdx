---
title: "Nice, Naggy, and Strict Mocks"
description: "Explains how to control the strictness level of mocks—allowing, warning, or failing on unexpected calls—via the NiceMock, NaggyMock, and StrictMock templates. Offers best practices for choosing modes based on test intent."
---

# Nice, Naggy, and Strict Mocks

GoogleMock provides fine-grained control over how uninteresting calls—calls to mock methods with no explicitly set expectations—are treated in tests. This page explains the three main strictness modes available through the `NiceMock`, `NaggyMock`, and `StrictMock` class templates, guiding you to choose the appropriate mode depending on your testing intent and desired feedback level.

---

## Overview of Strictness Modes

Each mock object created with GoogleMock falls into one of these categories regarding how it handles uninteresting calls:

| Mock Template       | Behavior on Uninteresting Calls                          | Typical Use Case                              |
|--------------------|----------------------------------------------------------|-----------------------------------------------|
| `NiceMock<T>`      | Silently allows uninteresting calls, no warnings or errors | Common testing scenarios where unimportant calls should not distract |
| `NaggyMock<T>`     | Allows uninteresting calls but prints warnings            | Default; useful when you want to be notified about unanticipated calls |
| `StrictMock<T>`    | Treats uninteresting calls as test failures               | When verifying all mock interactions strictly and forbidding unexpected calls |


### What Are Uninteresting Calls?

Uninteresting calls happen when your code invokes a mocked method for which you have not set explicit expectations (`EXPECT_CALL`). By default, GoogleMock prints a warning if any such calls occur to help you spot potentially overlooked interactions.

- **NaggyMock** (default mock mode): Emits warnings but allows the call.
- **NiceMock**: Suppresses warnings for uninteresting calls, letting tests proceed quietly.
- **StrictMock**: Treats uninteresting calls as errors, causing test failures.

### Current Default Behavior

Right now, a bare mock object behaves like a `NaggyMock`, generating warnings for uninteresting calls. GoogleMock plans to change this in the future to make bare mocks behave like `NiceMock` to promote more maintainable tests.

---

## Using NiceMock, NaggyMock, and StrictMock

GoogleMock provides three class templates to take control of mock strictness. Suppose you have a mock class `MockFoo`.

### Constructing Mocks with Strictness Wrappers

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Uninteresting calls silently ignored.
NaggyMock<MockFoo> naggy_foo;    // Uninteresting calls produce warnings.
StrictMock<MockFoo> strict_foo;  // Uninteresting calls cause test failures.
```

**Key points:**

- These templates subclass the mock class, inheriting its constructors.
- They can wrap mocks with constructors requiring arguments:

```cpp
NiceMock<MockBar> nice_bar("init string");
NaggyMock<MockBar> naggy_bar(10, 'a');
StrictMock<MockBar> strict_bar(1, 2, 3);
```

- Wrapping is mutually exclusive - nesting (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported.

### Behavior in Action

| Scenario                                          | NiceMock  | NaggyMock   | StrictMock         |
|---------------------------------------------------|-----------|-------------|--------------------|
| Calls a mocked method with expectation            | Allowed   | Allowed     | Allowed            |
| Calls an uninteresting method (no expectation)   | Silently ignored | Warning printed | Test fails         |
| Calls an unexpected method (with expectation but unmatched arguments) | Test fails | Test fails  | Test fails         |


### Example

Consider a mock with a method `DoThis()`:

```cpp
class MockFoo {
public:
  MOCK_METHOD0(DoThis, void());
};

// Using NaggyMock (default behavior)
NaggyMock<MockFoo> foo;
foo.DoThis();  // Warning printed for uninteresting call.

// Using NiceMock
NiceMock<MockFoo> nice_foo;
nice_foo.DoThis();  // No warning, call allowed.

// Using StrictMock
StrictMock<MockFoo> strict_foo;
strict_foo.DoThis();  // Causes test failure for uninteresting call.
```

---

## Best Practices for Choosing Strictness Mode

To get the most out of GoogleMock while maintaining test clarity and stability, follow these guidelines:

### Use `NiceMock` for Most Tests

- When you don't care about calls except those explicitly expected.
- Suppresses distracting warnings about uninteresting calls.
- Encourages maintainable and resilient tests.

### Use `NaggyMock` During Development

- Helpful while writing tests to catch accidentally unmocked calls early.
- Provides verbose feedback.

### Use `StrictMock` for Critical Verification

- When it's essential that tests *fail* if unexpected interactions occur.
- Best for testing that your code does *only* what it is supposed to.
- Use sparingly to avoid brittle tests.

### Combine With Explicit Expectations

Regardless of strictness mode, always explicitly specify your expectations with `EXPECT_CALL`. This ensures precise control over method call constraints.

### Avoid Nesting Strictness Wrappers

Nesting `NiceMock`, `NaggyMock`, and `StrictMock` is not supported and may lead to undefined behavior. Apply one strictness modifier per mock instance.

---

## Implementation Notes

- The strictness wrappers internally register the mock instance with GoogleMock's runtime to alter its uninteresting-call handling behavior.
- Each wrapper corresponds to a specific internal registration method:
  - `NiceMock` allows uninteresting calls silently.
  - `NaggyMock` warns on uninteresting calls.
  - `StrictMock` fails on uninteresting calls.

## Common Pitfalls

- **Destructor Must be Virtual:** If the mock class destructor is not virtual, strictness wrappers may not function correctly.
- **Unmocked Base Class Methods:** Wrapping only affects mock methods defined directly in the mock class with `MOCK_METHOD`.
- **Unintended Test Failures:** Using `StrictMock` indiscriminately can cause maintenance overhead due to test breaks on harmless uninteresting calls.

---

## Troubleshooting

### Warning: "Uninteresting mock function call"

This warning indicates an uninteresting call was made on a `NaggyMock` or default mock. To address:

- Confirm if you intended the call to be unmocked.
- If yes, consider using `NiceMock` to silence warnings.
- If no, add an appropriate `EXPECT_CALL` or `ON_CALL`.

### Unexpected Test Failures with `StrictMock`

- Review test code for unintended calls to mock methods.
- Ensure all expected calls are explicitly specified.
- To ease test maintenance, resort to strict mocks only for critical scenarios.

### Unrecognized Strictness Behavior

- Check that the mock class methods being mocked are declared with `MOCK_METHOD` directly in that class.
- Verify the mock class has a virtual destructor.

---

## Summary

Using `NiceMock`, `NaggyMock`, and `StrictMock` controls how GoogleMock treats uninteresting calls in your tests, balancing feedback verbosity and strictness for interaction verification. Choose `NiceMock` for quiet tests, `NaggyMock` for warning visibility, and `StrictMock` for strict failure detection according to your testing goals.

---

## Further Reading and Links

- [Mocking Reference: NiceMock, NaggyMock, StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [gMock Cheat Sheet: Mock Classes, Strictness Wrappers](https://google.github.io/googletest/gmock_cheat_sheet.html#The_Nice_the_Strict_and_the_Naggy)
- [Mock Strictness Modes Guide](https://google.github.io/googletest/guides/mocking-scenarios/mock-strictness-best-practices.html)

---

## Code Example

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
};

// NiceMock example: no warnings for uninteresting calls
NiceMock<MockFoo> nice_foo;
nice_foo.DoThis();  // Allowed silently

// NaggyMock example: warnings for uninteresting calls
NaggyMock<MockFoo> naggy_foo;
naggy_foo.DoThis();  // Warning printed

// StrictMock example: test failure on uninteresting calls
StrictMock<MockFoo> strict_foo;
strict_foo.DoThis();  // Test fails

```
