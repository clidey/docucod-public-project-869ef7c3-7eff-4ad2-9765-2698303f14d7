---
title: "Strictness, Nice & Naggy Mocks"
description: "Describes the StrictMock, NiceMock, and NaggyMock wrappers to control how uninteresting calls are handled—silencing, warning, or failing on unexpected invocations. Includes behavioral comparison tables and usage tips."
---

# Strictness, Nice & Naggy Mocks

GoogleMock provides three primary mock wrapper classes—`NiceMock`, `NaggyMock`, and `StrictMock`—to control the behavior of uninteresting calls on mock objects. These wrappers let you decide whether calls to mock methods without explicit expectations should silently proceed, generate warnings, or cause test failures.

---

## Overview

When using a mock class generated with GoogleMock (e.g., `MockFoo`), calls to its methods typically fall into two categories:

- **Interesting calls:** Calls that match an `EXPECT_CALL` expectation.
- **Uninteresting calls:** Calls to mock methods that have no corresponding `EXPECT_CALL` set.

By default, uninteresting calls generate warnings to alert you to potentially unconsidered interactions, but they do not fail the test. The strictness wrappers let you refine this behavior:

- **`NiceMock<T>`**: Suppresses warnings for uninteresting calls, allowing them silently.
- **`NaggyMock<T>`**: (Default behavior) Prints warnings when uninteresting calls occur.
- **`StrictMock<T>`**: Treats uninteresting calls as errors and causes test failures.

Each of these is a subclass of the original mock class `T`, inheriting constructors and interface.

---

## Behavioral Differences

| Behavior on Uninteresting Calls | Description                                        | Example Use Case                        |
|---------------------------------|----------------------------------------------------|---------------------------------------|
| **Silent (NiceMock)**            | Ignores all uninteresting calls with no warnings. | When you expect many calls but only care about a few specific ones.
| **Warning (NaggyMock)**          | Logs a warning for each uninteresting call.        | Useful during test development or debugging to catch unexpected calls.
| **Error (StrictMock)**           | Treats uninteresting calls as failures.            | Validates strictly that all calls are expected; ensures test correctness.

By default, `T` (the raw mock) behaves like `NaggyMock<T>`, but future releases may switch the default to behave like `NiceMock<T>`.

---

## Usage

To use a strictness wrapper, simply wrap your mock type:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Silence warnings for uninteresting calls
NiceMock<MockFoo> nice_mock;

// Print warnings for uninteresting calls (default behavior)
NaggyMock<MockFoo> naggy_mock;

// Fail tests on any uninteresting calls
StrictMock<MockFoo> strict_mock;

EXPECT_CALL(nice_mock, DoThis());  // Set expectation as usual
nice_mock.DoThis();               // Matches expectation
nice_mock.DoThat(true);          // Uninteresting call, no warning

EXPECT_CALL(strict_mock, DoThis());  // Set expectation
strict_mock.DoThis();               // Matches expectation
strict_mock.DoThat(true);          // Test failure triggered here
```

---

## Constructor Inheritance

`NiceMock`, `NaggyMock`, and `StrictMock` inherit the constructors of the underlying mock class `T`. This means you can instantiate them just as you would `T`, passing any required constructor arguments:

```cpp
class MockBar {
 public:
  explicit MockBar(const std::string& name);
  MOCK_METHOD(void, This, (), ());
  MOCK_METHOD(std::string, That, (int x, bool y), ());
};

NiceMock<MockBar> nice_bar("my_mock");
nice_bar.This();
std::string result = nice_bar.That(42, true);
```

This inheritance also allows wrappers to work transparently where a `T` object is required.

---

## Important Notes & Caveats

- These wrappers only affect **uninteresting calls**, i.e., calls made to methods without any `EXPECT_CALL` set. They do *not* change the behavior for **unexpected calls** (calls that do not match any expectation).
- Wrappers only work correctly for mock methods defined *directly* in the mock class via the `MOCK_METHOD` family of macros. Methods inherited from base classes may not reflect the wrapper's strictness.
- Nesting wrappers (e.g., `NiceMock<StrictMock<T>>`) is **not supported** and will produce compile-time errors.
- Mock classes used with wrappers should have **virtual destructors** for correct behavior.

---

## How Strictness Wrappers Work Internally

Each wrapper registers the uninteresting call reaction when constructed:

- `NiceMock` calls into GoogleMock's `AllowUninterestingCalls` to silently allow uninteresting calls.
- `NaggyMock` registers to print warnings on uninteresting calls.
- `StrictMock` configures GoogleMock to fail tests on uninteresting calls.

When a wrapper object is destroyed, it unregisters itself to restore default behavior.

---

## Behavioral Comparison Table

| Aspect                    | Raw Mock (`T`) / NaggyMock<T> | NiceMock<T>               | StrictMock<T>             |
|---------------------------|-------------------------------|---------------------------|---------------------------|
| Uninteresting Calls       | Print warning                  | Silence warning           | Fail test immediately      |
| Expected Calls            | Must match expectations       | Must match expectations   | Must match expectations   |
| Unexpected Calls          | Fail test                     | Fail test                 | Fail test                 |
| Constructor inheritance   | Native to T                   | Inherited from T          | Inherited from T          |
| Effect on default actions | No effect                    | No effect                 | No effect                 |
| Nesting allowed           | Yes                           | No                        | No                        |

---

## Common Usage Tips

- Use `NiceMock` for tests where you only want to verify specific calls but don't want to be clogged with warnings about uninteresting calls.
- Use `NaggyMock` as the default during test development to surface unplanned mock calls.
- Use `StrictMock` when you want to enforce tight control over mocked interfaces, ensuring no unexpected calls occur.
- Remember you can suppress warnings on specific methods by configuring expectations with `EXPECT_CALL(...).Times(AnyNumber())`.

---

## Troubleshooting

- **Unexpected warnings despite using NiceMock:** Verify your mock methods are defined directly in the mock class using `MOCK_METHOD`. Inherited mock methods may cause warnings.
- **Compile errors applying wrappers:** Check you are not nesting wrappers or wrapping classes that already have a strictness modifier applied.
- **Warnings on calls in destructors:** If your mock calls mocked methods in destructors, you may still observe warnings or failures depending on strictness. Plan expectations accordingly.
- **Mock class without a virtual destructor:** This can cause undefined behavior with wrappers; always provide a virtual destructor in your mock classes.

---

## Example: Moving from Raw Mock to StrictMock

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

// Original raw mock (naggy behavior)
MockFoo raw_mock;
EXPECT_CALL(raw_mock, DoThis());
raw_mock.DoThis();        // Works fine
raw_mock.DoThat();        // Warning about uninteresting call

// Using StrictMock to ensure test failures on uninteresting calls
StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoThis());
strict_mock.DoThis();     // Works fine
strict_mock.DoThat();     // Test fails immediately
```

---

## References

- For details on defining mocks: [Creating Mocks & Basic Expectations](./mocking-basics.md)
- For controlling mock behaviors and expectations: [Actions, Sequences & Advanced Control](./actions-advanced.md)
- For understanding uninteresting vs unexpected calls: [Understanding Uninteresting vs Unexpected Calls](../gmock_cook_book.md#uninteresting-vs-unexpected)
- For a thorough tutorial and recipes: [gMock Cookbook](../gmock_cook_book.md#NiceStrictNaggy)

---

## Related Links

- [Mocking Reference](../reference/mocking.md#NiceMock)
- [GoogleTest Primer](../overview/introduction/product-overview.md)
- [Designing Clean and Maintainable Mocks](../guides/mocking-best-practices/designing-better-mocks.md)

---

## Implementation Source

The strictness wrappers are implemented via lightweight subclass templates that register the desired uninteresting call behavior upon construction and unregister on destruction. They rely on GoogleMock's internal mechanism to decide how to react to calls without expectations.

---

```cpp
// Example of creating a NiceMock instance:
NiceMock<MockFoo> nice_mock(5, "arg");   // passes args to MockFoo's constructor
EXPECT_CALL(nice_mock, DoThis());
nice_mock.DoThis();   // Works silently for uninteresting calls
```

---

By thoughtfully choosing the strictness wrapper, you gain precise control over how your tests handle unexpected or uninteresting mock calls, improving test readability, maintainability, and reliability.
