---
title: "Nice, Naggy, and Strict Mocks"
description: "Explain APIs for adjusting mock class strictness: allowing, warning, or failing on uninteresting calls. Learn when to use NiceMock, NaggyMock, or StrictMock wrappers for effective test outcomes."
---

# Nice, Naggy, and Strict Mocks

This page explains how to adjust the strictness of mock objects in GoogleMock to control behavior for uninteresting calls — calls to mock methods without explicit expectations. It guides you on when and how to use the `NiceMock`, `NaggyMock`, and `StrictMock` wrappers, enabling you to allow, warn, or fail on uninteresting calls effectively to achieve clear, maintainable test outcomes.

---

## Overview

When using mock objects in your tests, you often focus on a subset of interactions — the calls you expect your code to make. Calls to mock methods without matching `EXPECT_CALL` specifications are called **uninteresting calls**. By default, GoogleMock treats uninteresting calls with a warning to alert you to potentially missing expectations.

GoogleMock provides three wrappers to configure how uninteresting calls are handled on a per-mock basis:

| Wrapper         | Behavior on Uninteresting Calls                                  | Typical Use Case                              |
|-----------------|-----------------------------------------------------------------|-----------------------------------------------|
| `NiceMock<T>`   | Suppresses warnings; allows uninteresting calls silently        | When you don't care about some calls; most tests benefit from this |
| `NaggyMock<T>`  | Default behavior; warns about uninteresting calls               | Useful during test development or debugging   |
| `StrictMock<T>` | Fails the test immediately on uninteresting calls               | Ensures all calls are expected; strict contract enforcement |

Each wrapper subclasses your mock class and changes the handling of uninteresting calls accordingly.

<Callout>
**Note:** Currently, mock objects behave like `NaggyMock` by default. In the future, `NiceMock` may become the default due to its ability to promote more maintainable tests.
</Callout>

---

## Using NiceMock, NaggyMock, and StrictMock Wrappers

### Basic Usage

Suppose you have a mock class `MockFoo`:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (int), ());
};
```

You can adjust its strictness behavior by wrapping it: 

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Nice mock: uninteresting calls are silently allowed.
NiceMock<MockFoo> nice_foo;

// Naggy mock: warnings on uninteresting calls (default behavior).
NaggyMock<MockFoo> naggy_foo;

// Strict mock: uninteresting calls cause test failure.
StrictMock<MockFoo> strict_foo;
```

You may pass constructor arguments of `MockFoo` through the wrappers transparently:

```cpp
class MockBar {
 public:
  explicit MockBar(const std::string& label) { /* ... */ }
  MOCK_METHOD(void, DoWork, (), ());
};

NiceMock<MockBar> bar("example_label"); // Calls MockBar(const std::string&)
```

### Behavior Differences

- **NiceMock**: Calls to mock methods without `EXPECT_CALL` specifications do **not** produce warnings or errors. These calls perform the default action if provided (for example, returning default values).

- **NaggyMock**: (Same as default mock) Prints warnings on any uninteresting calls.

- **StrictMock**: Treats uninteresting calls as errors and fails the test immediately.

This affects how tolerant your tests are to unspecified calls and helps enforce test completeness or reduce noise during development.

### Example

```cpp
TEST(StrictMockExample, FailsOnUninterestingCall) {
  StrictMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());
  foo.DoThis();  // Expected

  foo.DoThat(42); // Fails test: uninteresting call
}

TEST(NiceMockExample, AllowsUninterestingCall) {
  NiceMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());
  foo.DoThis();          // Expected

  foo.DoThat(42);       // Allowed silently
}
```

---

## When to Use Each Wrapper

Choosing the correct mock strictness affects your tests' readability, maintainability, and robustness.

- **Use `NiceMock`** when:
  - You want to focus only on calls you care about without cluttering test output with warnings.
  - You expect many calls to helper methods or dependencies irrelevant to your test's intent.
  - Your tests should be resilient to irrelevant implementation changes.

- **Use `NaggyMock`** when:
  - You are actively developing or debugging tests and want to be warned about any unexpected or unanticipated calls.
  - You want moderate safety without strict failure on missing expectations.

- **Use `StrictMock`** when:
  - Your test is highly sensitive to behavior and must guarantee no call occurs without a matching expectation.
  - You need to enforce a strict interaction contract, such as testing protocols or precise call order.

<Warning>
Using strict mocks can make tests brittle and more difficult to maintain, as small refactorings can cause unexpected failures. Prefer starting with `NiceMock` and escalate to `StrictMock` only when you need stronger guarantees.
</Warning>

---

## Important Details and Known Limitations

- **Effect only on uninteresting calls:** The wrappers only affect calls to mock methods with *no* `EXPECT_CALL` set (uninteresting calls). Calls that are unexpected (calls with arguments not matching any expectation) are always errors regardless.

- **Only works for directly declared mock methods:** `NiceMock`, `NaggyMock`, and `StrictMock` influence methods declared with the `MOCK_METHOD` macro *directly* in your mock class `T`. If mock methods are inherited, the strictness modification may not apply.

- **No nesting:** Wrapping multiple times, e.g., `NiceMock<StrictMock<MockFoo>>`, is unsupported and will result in compile-time assertions.

- **Virtual destructor required:** For proper behavior, your mock class should have a virtual destructor. Without it, the wrappers may not suppress warnings or errors correctly.

- **Constructor forwarding:** These wrappers forward constructors of the mock class, so you can initialize mocks with arguments transparently.

---

## Checking Mock Strictness Programmatically

GoogleMock provides utility functions to check a mock object's current strictness:

```cpp
bool is_nice = testing::Mock::IsNice(&mock_obj);
bool is_naggy = testing::Mock::IsNaggy(&mock_obj);
bool is_strict = testing::Mock::IsStrict(&mock_obj);
```

This can be useful in complex test setups or for debugging.

---

## Best Practices

- Start by using `NiceMock` for most mocks; it reduces warning noise and promotes maintainability.

- Use `NaggyMock` when debugging to reveal unexpected calls.

- Reserve `StrictMock` for situations where strict enforcement of interaction contracts is essential.

- Consider combining catch-all expectations (`EXPECT_CALL(mock_method, _).Times(AnyNumber())`) with strict mocks to selectively allow some uninteresting calls without test failure.

- Avoid suppressing uninteresting call warnings by adding gratuitous `EXPECT_CALL`; this leads to brittle tests.

- Ensure your mock classes have virtual destructors.

- Do not nest strictness wrappers.

---

## Troubleshooting

<AccordionGroup title="Troubleshooting Uninteresting Call Behavior">
<Accordion title="I still get warnings from mocked base class methods even when using NiceMock.">
NiceMock affects only methods defined directly within the mock class using `MOCK_METHOD`. If you inherit mock methods from a base class, these may not be affected. Consider redefining such methods in the mock class or avoiding inheritance in mocks.
</Accordion>
<Accordion title="My test unexpectedly fails on uninteresting call with StrictMock.">
This is expected behavior for `StrictMock`. It treats uninteresting calls as errors. If the call is expected, add an explicit `EXPECT_CALL` or use `NaggyMock`/`NiceMock`.
</Accordion>
<Accordion title="Can I convert existing mock variables to use NiceMock or StrictMock?">
You must instantiate the mock as the desired wrapper type from the beginning.

Retrofitting existing mock variables requires changing their declaration, e.g., from `MockFoo foo;` to `NiceMock<MockFoo> foo;`.
</Accordion>
</AccordionGroup>

---

## References and Further Reading

- [Mocking Workflow with GoogleMock](../guides/mocking-best-practices/mocking-workflow.md)
- [gMock Cookbook — The Nice, the Strict, and the Naggy](../guides/mocking-best-practices/gmock_cook_book.md#The-Nice-the-Strict-and-the-Naggy)
- [Mocking Reference](../docs/reference/mocking.md#NiceMock)
- [MOCK_METHOD Macro](../api-reference/mocking-apis/mock-methods.md)
- [EXPECT_CALL Syntax](../api-reference/mocking-apis/call-expectations.md)

---

## Summary

This page empowers you to control mock object behavior on uninteresting calls using GoogleMock’s `NiceMock`, `NaggyMock`, and `StrictMock` wrappers. By tailoring warnings and failures, you create clearer, more maintainable tests with appropriate strictness.


---