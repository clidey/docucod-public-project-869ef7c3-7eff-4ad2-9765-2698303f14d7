---
title: "Assertions"
description: "Comprehensive reference to all major assertion macros for expressing expectations and verifying results in tests. Covers equality, inequality, floating-point, exception, fatal and non-fatal assertions, with clear examples and error-handling insight."
---

# Assertions Reference

This page provides a comprehensive reference to all major assertion macros offered by GoogleTest, designed to express expectations and verify results in your tests. It covers assertions for checking equality, inequality, floating-point comparisons, exception handling, as well as fatal and non-fatal assertion macros. Through clear explanations and real-world examples, you will learn how to use these assertions effectively and gain insights into error-handling behaviors.

> All assertions discussed here require including `#include <gtest/gtest.h>`.

---

## Explicit Success and Failure {#success-failure}

Assertions in this section generate explicit successes or failures, useful for controlling test flows where conditions are not easily expressed by boolean expressions.

### SUCCEED {#SUCCEED}

- **Macro:** `SUCCEED()`
- **Description:** Generates a success indication.

  > Does **not** make the overall test succeed, but acts as documentation. It currently produces no user-visible output but may in the future.

### FAIL {#FAIL}

- **Macro:** `FAIL()`
- **Description:** Generates a fatal failure which aborts the current function immediately.

  > This macro can only appear in void-returning functions (see [Assertion Placement](#assertion-placement)).

### ADD_FAILURE {#ADD_FAILURE}

- **Macro:** `ADD_FAILURE()`
- **Description:** Generates a non-fatal failure which logs the failure but allows the test to continue running.

### ADD_FAILURE_AT {#ADD_FAILURE_AT}

- **Macro:** `ADD_FAILURE_AT(file_path, line_number)`
- **Description:** Generates a non-fatal failure annotated with a specific file and line number.



## Generalized Assertion {#generalized}

GoogleTest allows verifying values against matchers, enhancing readability and diagnostics.

### EXPECT_THAT {#EXPECT_THAT}

- **Macros:**
  ```cpp
  EXPECT_THAT(value, matcher);
  ASSERT_THAT(value, matcher);
  ```
- **Description:** Verifies the given *`value`* matches the specified *`matcher`*.

Matchers provide expressive ways to specify complex expectations. For example:

```cpp
#include <gmock/gmock.h>

using ::testing::AllOf;
using ::testing::Gt;
using ::testing::Lt;
using ::testing::MatchesRegex;
using ::testing::StartsWith;

EXPECT_THAT(value1, StartsWith("Hello"));
EXPECT_THAT(value2, MatchesRegex("Line \\d+"));
ASSERT_THAT(value3, AllOf(Gt(5), Lt(10)));
```

If the assertion fails, diagnostic messages explicitly describe the mismatch between actual and expected.

See the [Matchers Reference](matchers.md) for a full list of built-in matchers.

---

## Boolean Conditions {#boolean}

Assertions to check boolean conditions succinctly.

### EXPECT_TRUE and ASSERT_TRUE {#EXPECT_TRUE}

- **Macros:**
  ```cpp
  EXPECT_TRUE(condition);
  ASSERT_TRUE(condition);
  ```
- **Description:** Asserts the specified *`condition`* evaluates to true.

### EXPECT_FALSE and ASSERT_FALSE {#EXPECT_FALSE}

- **Macros:**
  ```cpp
  EXPECT_FALSE(condition);
  ASSERT_FALSE(condition);
  ```
- **Description:** Asserts the specified *`condition`* evaluates to false.


## Binary Comparison {#binary-comparison}

Assertions to compare two values using standard operators, including equality and ordering.

> Arguments are evaluated **exactly once**, so side effects are safe but do not rely on order of evaluation.

### EXPECT_EQ and ASSERT_EQ {#EXPECT_EQ}

- **Macros:**
  ```cpp
  EXPECT_EQ(val1, val2);
  ASSERT_EQ(val1, val2);
  ```
- **Description:** Checks that *`val1 == val2`*.

  > When called on pointers, checks pointer equality.
  > For C strings, use `EXPECT_STREQ` for content comparison.
  > When comparing pointers to `NULL`, prefer `EXPECT_EQ(ptr, nullptr)`.

### EXPECT_NE and ASSERT_NE {#EXPECT_NE}

- **Macros:**
  ```cpp
  EXPECT_NE(val1, val2);
  ASSERT_NE(val1, val2);
  ```
- **Description:** Checks that *`val1 != val2`*.

  > When called on pointers, checks pointer inequality.
  > For C strings, use `EXPECT_STRNE` for content comparison.

### EXPECT_LT, EXPECT_LE, EXPECT_GT, EXPECT_GE and Their ASSERT Variants {#EXPECT_LT}

- **Macros:**
  ```cpp
  EXPECT_LT(val1, val2);
  ASSERT_LT(val1, val2);
  EXPECT_LE(val1, val2);
  ASSERT_LE(val1, val2);
  EXPECT_GT(val1, val2);
  ASSERT_GT(val1, val2);
  EXPECT_GE(val1, val2);
  ASSERT_GE(val1, val2);
  ```
- **Description:** Checks the specified *ordering* relations between the two values.


## String Comparison {#c-strings}

Assertions for comparing C-style strings (`char*` or `wchar_t*`) by content rather than by pointer.

> For `std::string` or `std::wstring`, use the binary comparison macros instead.

### EXPECT_STREQ and ASSERT_STREQ {#EXPECT_STREQ}

- **Macros:**
  ```cpp
  EXPECT_STREQ(str1, str2);
  ASSERT_STREQ(str1, str2);
  ```
- **Description:** Verifies that C strings *`str1`* and *`str2`* have identical content.

### EXPECT_STRNE and ASSERT_STRNE {#EXPECT_STRNE}

- **Macros:**
  ```cpp
  EXPECT_STRNE(str1, str2);
  ASSERT_STRNE(str1, str2);
  ```
- **Description:** Verifies that the strings do **not** have the same content.

### EXPECT_STRCASEEQ and ASSERT_STRCASEEQ {#EXPECT_STRCASEEQ}

- **Macros:**
  ```cpp
  EXPECT_STRCASEEQ(str1, str2);
  ASSERT_STRCASEEQ(str1, str2);
  ```
- **Description:** Case-insensitive content equality check for C strings.

### EXPECT_STRCASENE and ASSERT_STRCASENE {#EXPECT_STRCASENE}

- **Macros:**
  ```cpp
  EXPECT_STRCASENE(str1, str2);
  ASSERT_STRCASENE(str1, str2);
  ```
- **Description:** Case-insensitive inequality check for C strings.


## Floating-Point Comparison {#floating-point}

Due to floating-point rounding errors, exact equality checks on floats and doubles are unreliable. These assertions compare values approximately, either within a default tolerance defined by ULPs or a user-supplied absolute error.

### EXPECT_FLOAT_EQ and ASSERT_FLOAT_EQ {#EXPECT_FLOAT_EQ}

- **Macros:**
  ```cpp
  EXPECT_FLOAT_EQ(val1, val2);
  ASSERT_FLOAT_EQ(val1, val2);
  ```
- **Description:** Returns success if *`val1`* and *`val2`* are approximately equal within 4 Units in the Last Place (ULPs).

### EXPECT_DOUBLE_EQ and ASSERT_DOUBLE_EQ {#EXPECT_DOUBLE_EQ}

- **Macros:**
  ```cpp
  EXPECT_DOUBLE_EQ(val1, val2);
  ASSERT_DOUBLE_EQ(val1, val2);
  ```
- **Description:** Same as above but for `double` precision

### EXPECT_NEAR and ASSERT_NEAR {#EXPECT_NEAR}

- **Macros:**
  ```cpp
  EXPECT_NEAR(val1, val2, abs_error);
  ASSERT_NEAR(val1, val2, abs_error);
  ```
- **Description:** Checks if the absolute difference between *`val1`* and *`val2`* is within *`abs_error`*.

  > Special cases: If both values are infinity with the same sign, their difference is considered zero.


## Exception Assertions {#exceptions}

Requires exceptions to be enabled.

### EXPECT_THROW and ASSERT_THROW {#EXPECT_THROW}

- **Macros:**
  ```cpp
  EXPECT_THROW(statement, exception_type);
  ASSERT_THROW(statement, exception_type);
  ```
- **Description:** Verifies that *`statement`* throws an exception of type *`exception_type`*.

### EXPECT_ANY_THROW and ASSERT_ANY_THROW {#EXPECT_ANY_THROW}

- **Macros:**
  ```cpp
  EXPECT_ANY_THROW(statement);
  ASSERT_ANY_THROW(statement);
  ```
- **Description:** Verifies that *`statement`* throws an exception of **any** type.

### EXPECT_NO_THROW and ASSERT_NO_THROW {#EXPECT_NO_THROW}

- **Macros:**
  ```cpp
  EXPECT_NO_THROW(statement);
  ASSERT_NO_THROW(statement);
  ```
- **Description:** Verifies that *`statement`* does not throw any exception.


## Predicate Assertions {#predicates}

Enables testing of complex predicates with detailed failure messages.

### EXPECT_PRED* and ASSERT_PRED* {#EXPECT_PRED}

- **Macros:**
  ```cpp
  EXPECT_PRED1(pred, val1);
  EXPECT_PRED2(pred, val1, val2);
  ... up to 5 args ...

  ASSERT_PRED1(pred, val1);
  ASSERT_PRED2(pred, val1, val2);
  ... up to 5 args ...
  ```
- **Description:** Checks that the predicate *`pred`* returns `true` for the given arguments. Arguments are evaluated once and their values printed upon failure.

- **Usage Tips:**
  - For overloaded or templated predicates, specify the type explicitly to avoid ambiguities.

### EXPECT_PRED_FORMAT* and ASSERT_PRED_FORMAT* {#EXPECT_PRED_FORMAT}

- **Macros:**
  ```cpp
  EXPECT_PRED_FORMAT1(pred_formatter, val1);
  EXPECT_PRED_FORMAT2(pred_formatter, val1, val2);
  ... up to 5 args ...

  ASSERT_PRED_FORMAT1(pred_formatter, val1);
  ASSERT_PRED_FORMAT2(pred_formatter, val1, val2);
  ... up to 5 args ...
  ```
- **Description:** Uses a *predicate-formatter* function that returns an `AssertionResult`, enabling customized failure messages involving the expressions and values.

- **Predicate-formatter signature:**
  ```cpp
  testing::AssertionResult PredicateFormatter(const char* expr1, const char* expr2, ..., T1 val1, T2 val2, ...);
  ```


## Windows HRESULT Assertions {#HRESULT}

These assertions are for Windows COM programming to verify HRESULT values.

### EXPECT_HRESULT_SUCCEEDED and ASSERT_HRESULT_SUCCEEDED {#EXPECT_HRESULT_SUCCEEDED}

- **Macros:**
  ```cpp
  EXPECT_HRESULT_SUCCEEDED(expression);
  ASSERT_HRESULT_SUCCEEDED(expression);
  ```
- **Description:** Verifies that the *`expression`* evaluates to a success HRESULT.

### EXPECT_HRESULT_FAILED and ASSERT_HRESULT_FAILED {#EXPECT_HRESULT_FAILED}

- **Macros:**
  ```cpp
  EXPECT_HRESULT_FAILED(expression);
  ASSERT_HRESULT_FAILED(expression);
  ```
- **Description:** Verifies that the *`expression`* evaluates to a failure HRESULT.

- **Diagnostic:** The output includes the human-readable system error message corresponding to the HRESULT code.


## Death Assertions {#death}

Use these to test code that should cause process termination.

### EXPECT_DEATH and ASSERT_DEATH {#EXPECT_DEATH}

- **Macros:**
  ```cpp
  EXPECT_DEATH(statement, matcher);
  ASSERT_DEATH(statement, matcher);
  ```
- **Description:** Verifies that *`statement`* causes the process to terminate with a nonzero exit status and the output on `stderr` matches *`matcher`* (a string or a GoogleMock matcher). `matcher` is treated as `ContainsRegex` if a bare string.

- **Example:**
  ```cpp
  EXPECT_DEATH(DoSomething(42), "My error");
  ```

### EXPECT_DEATH_IF_SUPPORTED and ASSERT_DEATH_IF_SUPPORTED {#EXPECT_DEATH_IF_SUPPORTED}

- Same as above but only active if death tests are supported on the platform.

### EXPECT_DEBUG_DEATH and ASSERT_DEBUG_DEATH {#EXPECT_DEBUG_DEATH}

- Same as `EXPECT_DEATH` but effective only in debug builds; otherwise, runs `statement` normally.

### EXPECT_EXIT and ASSERT_EXIT {#EXPECT_EXIT}

- **Macros:**
  ```cpp
  EXPECT_EXIT(statement, predicate, matcher);
  ASSERT_EXIT(statement, predicate, matcher);
  ```
- **Description:** Verifies that *`statement`* causes the process to terminate with an exit status satisfying *`predicate`* and the `stderr` output matches *`matcher`*.

- **Common Predicates:**
  - `::testing::ExitedWithCode(code)` verifies normal exit with code.
  - `::testing::KilledBySignal(signal)` verifies termination by signal (POSIX only).


---

## Using Assertions in Sub-routines {#assertion-in-subroutines}

GoogleTest provides ways to include assertions inside helper functions, giving rich diagnostics and control.

- Use `SCOPED_TRACE(message);` to include context of assertion failures inside sub-routine calls.

- Use `HasFatalFailure()` to detect if assertions have failed in subroutines and return early if needed.

- Use `ASSERT_NO_FATAL_FAILURE(statement);` or `EXPECT_NO_FATAL_FAILURE(statement);` macros to verify that a subroutine call does not generate any fatal failures.


## Skipping Test Execution {#skipping}

Use `GTEST_SKIP()` to skip tests dynamically at runtime, including inside `SetUp()` or any test body:

```cpp
TEST(MyTestSuite, TestThatMaySkip) {
  if (!PreconditionMet()) {
    GTEST_SKIP() << "Precondition not met, skipping test.";
  }
  ... test logic ...
}
```


## Logging Additional Information {#logging-properties}

You can record key-value properties inside tests for output in XML/JSON reports.

```cpp
RecordProperty("KeyName", value);
```

- Must be called inside tests, `SetUpTestSuite()`/`TearDownTestSuite()` or test environments.
- The key must not conflict with reserved attribute names like `name`, `status`, `time`, etc.
- The latest value for a key is used.

Example:

```cpp
TEST_F(MyTestSuite, TestWithProperties) {
  RecordProperty("MaxValue", ComputeMax());
  RecordProperty("MinValue", ComputeMin());
}
```


## Assertion Placement {#assertion-placement}

- `EXPECT_` assertions generate *non-fatal* failures allowing the function to proceed.

- `ASSERT_` and `FAIL()` generate *fatal* failures and abort the current function.

- Fatal assertions can only be used in `void`-returning functions, not constructors or destructors.

- Use non-fatal assertions or `ADD_FAILURE()` in non-void functions.


## Best Practices & Tips

- Stream custom messages into assertions using `<<` to enhance diagnostics:
  ```cpp
  EXPECT_TRUE(my_condition) << "Condition failed because ...";
  ```

- Always consider using specialized macros for strings (`EXPECT_STREQ`), floating-point (`EXPECT_FLOAT_EQ`), exceptions (`EXPECT_THROW`), and predicates.

- For complex checks, use `EXPECT_PRED_FORMAT*` with custom predicate-formatters for detailed failure messages.

- When comparing floating-point numbers, prefer `EXPECT_FLOAT_EQ`, `EXPECT_DOUBLE_EQ`, or `EXPECT_NEAR` rather than raw `EXPECT_EQ`.

- For death tests, name test suites with `*DeathTest` suffix to segregate them and leverage behavior regarding test execution order and thread safety.

- Use `SCOPED_TRACE` to provide contextual information in failures originating from helper functions or loops.

- Record additional test properties to clearly annotate generated test reports.


## Common Pitfalls

- Using `ASSERT_` macros inside non-void functions causes compilation errors.

- Misusing `EXPECT_EQ` on C strings compares pointers, not content; use `EXPECT_STREQ`.

- Death tests do not propagate side effects to the parent process; be cautious when freeing resources in death tests.

- Multiple `EXPECT_DEATH` or `ASSERT_DEATH` macros on the same line cause compilation errors.

- If predicate assertions use overloaded or templated functions, explicit casting or specifying template parameters is necessary.


## Examples

### Basic Boolean Assertion

```cpp
EXPECT_TRUE(ptr != nullptr) << "Pointer must not be null";
```

### Equality Check (Integers)

```cpp
ASSERT_EQ(42, ComputeAnswer()) << "The answer was unexpected";
```

### String Content Equality

```cpp
EXPECT_STREQ("hello", GetGreeting().c_str());
```

### Floating-Point Approximate Equality

```cpp
EXPECT_DOUBLE_EQ(3.141592, GetPiApproximation());
```

### Exception Checking

```cpp
EXPECT_THROW(FunctionThatThrows(), std::runtime_error);
EXPECT_NO_THROW(FunctionThatWontThrow());
```

### Predicate Assertion

```cpp
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, value);
```

### Predicate Formatter Assertion

```cpp
::testing::AssertionResult IsEvenWithMessage(const char* expr, int n) {
  if (n % 2 == 0) return ::testing::AssertionSuccess();
  return ::testing::AssertionFailure() << n << " is odd";
}
EXPECT_PRED_FORMAT1(IsEvenWithMessage, value);
```

### Death Test

```cpp
EXPECT_DEATH({ AbortOnPurpose(); }, "Fatal error message");
```

### Skipping a Test

```cpp
TEST(FooTest, SkipIfNoNetwork) {
  if (!NetworkAvailable()) {
    GTEST_SKIP() << "Skipping this test because network is offline.";
  }
  // Rest of the test
}
```


---

## References

- Full macro list and details: [GoogleTest Assertions Reference](reference/assertions.md)
- Matchers Reference: [Matchers](matchers.md)
- Predicate Assertions: [Advanced Predicate Assertions](advanced.md#predicate-assertions)
- Death Tests Guide: [Death Tests](reference/assertions.md#death)
- Exception Assertions: [Exception Assertions](reference/assertions.md#exceptions)
- Logging test properties: [Test Properties](advanced.md#logging-properties)


<Callout title="Note">This document focuses only on assertion macros. For mock-related expectations, refer to the Mocking Reference.</Callout>

---

## Troubleshooting

- **Compilation Error on Fatal Assertions in Non-void Functions:**
  Use `EXPECT_` variants instead or change the function to return void.

- **Unexpected Pointer Comparisons:**
  Use `EXPECT_STREQ` instead of `EXPECT_EQ` for C strings.

- **Death Tests Fail to Detect Exit:**
  Ensure the code causes actual process termination (no catching exceptions).

- **Unclear Failure Messages in Predicate Assertions:**
  Use predicate-formatters (`EXPECT_PRED_FORMAT*`) for detailed diagnostics.

- **Flaky Floating-Point Comparisons:**
  Use `EXPECT_NEAR` with appropriate tolerances instead of `EXPECT_EQ`.

- **Skips Are Not Recorded:**
  Use `GTEST_SKIP()` with a message and place it at the correct point in the test or setup.


---

**End of Assertions Reference**
