---
title: "Error Handling & Status Codes"
description: "Outlines framework error reporting, status codes, and diagnostic output for failed assertions and internal failures. Guides users in interpreting error output and troubleshooting failing tests."
---

# Error Handling & Status Codes

GoogleMock provides detailed error reporting and status code semantics to help you identify, interpret, and troubleshoot issues encountered during test execution. Understanding how failures and errors are reported, the meaning of status codes, and how to read diagnostic outputs from assertions and internal failures is essential for debugging failing tests effectively.

---

## 1. Overview of Error Reporting

GoogleMock generates informative error messages whenever expectations are unmet, unexpected calls occur, or internal failures arise. These messages include:

- The expectation or mock method involved
- Actual vs expected invocation counts
- Argument mismatches
- Call order violations
- Stack traces (when verbosity is enabled)

The output is designed to clearly reflect the root cause of failures, enabling rapid diagnosis.

### Typical Error Message Components

- **Function call details:** The function name and actual arguments that triggered the failure.
- **Expectation state:** Whether calls were missing, excessive, or out of order.
- **Matching information:** How the supplied arguments differ from the expected matchers.
- **Stack trace:** When enabled, to locate the source of failure.

### Verbosity Levels

Control the level of detail in error reporting with the `--gmock_verbose` flag:

- `info`: Logs all info, warnings, and errors, printing stack traces for uninteresting calls.
- `warning` (default): Logs warnings and errors without stack traces.
- `error`: Only error messages are printed, minimizing noise.

Use `--gmock_verbose=info` during test development for comprehensive insight.

<Check>
Set `--gmock_verbose=info` to see detailed mock call traces and stack traces for better debugging.
</Check>

---

## 2. Error Types and Status Codes

GoogleMock primarily reports failures rather than system-style status codes, but it classifies outcomes as follows:

- **Success:** The test passed with all expectations satisfied.
- **Nonfatal Failure:** An assertion or expectation failed, but the test continues.
- **Fatal Failure:** A critical failure occurred, aborting the current test function.
- **Uninteresting Call Warning:** Calls to mock methods with no expectations warn about possible oversights.

Failures in mock expectations lead to Google Test `TestPartResult` nonfatal or fatal results, which testing frameworks can interpret as status codes.

---

## 3. Diagnosing Failed Assertions

When an assertion such as `EXPECT_CALL` or `ASSERT_CALL` fails, GoogleMock:

- Prints a message describing what was expected.
- Shows how many times the function was actually called.
- Lists argument mismatches along with actual vs expected values.
- Specifies if the call was unexpected, excessive, or missing.
- Includes diagnostic info about pre-requisites not satisfied or retired expectations.

### Example of a Failure Message

```
Mock function call count doesn't match expectation:
  Expected: to be called twice
  Actual: called once - unsatisfied and active
Function call: Bar(10, "test")
Argument #1: expected to be equal to "test"
           Actual: "fail"
``` 

### Common Failure Conditions

- **Unsatisfied expectation:** Expected call count not reached.
- **Excessive call:** Called more times than allowed.
- **Unexpected call:** Call received with no matching expectation.
- **Mismatched arguments:** Argument values do not match specified matchers.
- **Order violations:** Calls happen out of expected sequence.

<Warning>
Pay special attention to the order of `EXPECT_CALL`sâ€”newer expectations override older ones. Use sequences or `.InSequence()` to enforce call order.
</Warning>

---

## 4. Diagnostic Output for Internal Failures

Beyond user-defined expectations, GoogleMock internally detects:

- Calls to mocks without expectations (`uninteresting calls`)
- Calls with incorrect argument matches
- Failure to satisfy pre-requisite call ordering
- Exhausted explicit actions with no default specified

### Interpreting Diagnostic Output

- **Uninteresting calls** generate warnings by default (naggy behavior). Consider using `NiceMock` to silence these or `StrictMock` to treat them as errors.

- **Stack traces** accompany diagnostic messages depending on verbosity, assisting in pinpointing failure origins.

- **Expectation states** such as retired or unsatisfied are logged to explain why calls were rejected.

- **Default actions** are called when explicit behaviors run out; warnings are issued if this is unexpected.

Example diagnostic snippet for an uninteresting call:

```
GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: DoA(5)
NOTE: You can safely ignore the above warning unless this call should not happen.
```

---

## 5. Best Practices for Troubleshooting

- **Enable verbose logging:** Use `--gmock_verbose=info` during test development to see detailed traces of mock calls and matching decisions.

- **Use sequences and ordering constraints:** When call order matters, define sequences with `InSequence` or `.After()` to detect order violations clearly.

- **Distinguish between uninteresting and unexpected calls:** Use `NiceMock` to suppress warnings on uninteresting calls if they are not relevant.

- **Set default actions carefully:** Define `ON_CALL` behaviors to avoid spurious warnings about missing default actions.

- **Retire expectations when done:** Use `.RetiresOnSaturation()` to prevent sticky expectations causing confusing errors.

- **Check argument matching:** When failures indicate argument mismatches, verify your matchers align with actual argument types and values.

- **Verify mock lifetimes:** Ensure mocks are destroyed properly to trigger verification; use `Mock::AllowLeak()` for intentional leaks.

- **Use `--gmock_catch_leaked_mocks=1` flag:** Detects unreleased mocks that might hide expectation failures or leaks.

<Info>
When tests produce confusing duplicate failure messages, it may be that the same expectation is evaluated multiple times at different moments. This is normal and informative.
</Info>

---

## 6. Examples

### Setting an Expectation and Handling Failure

```cpp
using ::testing::Return;
using ::testing::_;

class MockFoo {
 public:
  MOCK_METHOD(int, Bar, (int, const std::string&), ());
};

TEST(MyTest, HandlesExpectationFailure) {
  MockFoo mock;

  EXPECT_CALL(mock, Bar(10, "test"))
      .Times(2)
      .WillRepeatedly(Return(99));

  // First call passes the expectation.
  EXPECT_EQ(99, mock.Bar(10, "test"));

  // Second call violates the expected times.
  // This will generate a failure with detailed diagnostic output.
  EXPECT_EQ(99, mock.Bar(10, "fail"));
}
```

### Handling Uninteresting Calls

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock;

// No EXPECT_CALL set, calls to mock.Bar produce no warnings.
mock.Bar(1, "hello");
```

---

## 7. Summary

GoogleMock's error handling and status reporting system is designed to provide clear, actionable feedback on expectation violations, unexpected calls, argument mismatches, and ordering issues. By leveraging verbosity controls, sequence constructs, and default actions, users can debug test failures efficiently and maintain robust, reliable test suites.

For further information, explore related documentation pages on [Assertions and Test Macros](/api-reference/gtest-core-apis/test-assertions), [Setting Expectations in Mocks](/docs/reference/mocking.md), and [Debugging Tips in gMock Cookbook](/docs/gmock_cook_book.md#GainingSuperVisionIntoMockCalls).

---

## References

- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [GoogleMock Cookbook: Debugging and Troubleshooting](https://google.github.io/googletest/gmock_cook_book.html#GainingSuperVisionIntoMockCalls)
- [GoogleTest Assertions Reference](https://google.github.io/googletest/reference/assertions.html)
- [Understanding NiceMock, NaggyMock, and StrictMock](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)

---

### Further Assistance

If you encounter persistent issues or unclear diagnostic messages:

- Run your tests with `--gmock_verbose=info` to see complete mock call traces.
- Use `EXPECT_CALL` and `ON_CALL` carefully and explicitly.
- Check call orders with `InSequence`.
- Consult the [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) for common pitfalls.

By mastering error reporting and status codes, you ensure reliable verification and faster resolution of test failures.