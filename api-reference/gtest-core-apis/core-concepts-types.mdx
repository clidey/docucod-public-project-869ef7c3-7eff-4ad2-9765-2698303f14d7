---
title: "Core Types & Fixtures"
description: "Documentation of test fixtures, parameterized and typed tests. Helps users extend testing scenarios and provides context for advanced test organization patterns."
---

# Core Types & Fixtures

This documentation presents the foundational types and fixtures used in GoogleTest, equipping you with the essential building blocks for writing robust and maintainable tests. It covers the design and usage of test cases, test fixtures, and core abstractions that enable effective unit testing in C++.

---

## Test Cases and Tests

### Understanding Tests and Test Cases

A **Test** represents a single unit of testing, encapsulating one specific scenario or feature to verify. A **Test Case** groups several related tests, typically sharing setup and teardown logic.

GoogleTest uses macros like `TEST()` and `TEST_F()` to define tests and test fixtures within test cases:

```cpp
// Simple test without a fixture
TEST(MyTestCase, MyTest) {
  EXPECT_EQ(1, 1);
}

// Test fixture
class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Code here will be called immediately after the constructor
    // (right before each test).
  }

  void TearDown() override {
    // Code here will be called immediately after each test
    // (right before the destructor).
  }

  // Objects declared here can be used by all tests in the test suite.
  int shared_resource_;
};

TEST_F(MyFixture, Test1) {
  shared_resource_ = 42;
  EXPECT_EQ(shared_resource_, 42);
}

TEST_F(MyFixture, Test2) {
  EXPECT_EQ(shared_resource_, 0);  // Fresh fixture for each test
}
```

> Note: `TEST_F()` associates a test with a fixture, which provides common setup and teardown.

## Test Fixtures

### Purpose and Benefits

Test fixtures encapsulate the setup and cleanup code required for multiple tests sharing the same environment, reducing duplication and improving code clarity.

Fixtures inherit from `::testing::Test` or related base classes and can override lifecycle hooks:

- **`SetUp()`**: Runs before each test
- **`TearDown()`**: Runs after each test

Additionally, you can override the constructor and destructor for fixture-level initialization if it doesn't need the googletest framework.

### Example: Using a Test Fixture

```cpp
class DatabaseTest : public ::testing::Test {
 protected:
  void SetUp() override {
    db_.Connect();
  }

  void TearDown() override {
    db_.Disconnect();
  }

  Database db_;
};

TEST_F(DatabaseTest, InsertRecord) {
  EXPECT_TRUE(db_.InsertRecord("record1"));
}

TEST_F(DatabaseTest, RemoveRecord) {
  db_.InsertRecord("record1");
  EXPECT_TRUE(db_.RemoveRecord("record1"));
}
```

### Fixture Best Practices

- Keep `SetUp()` and `TearDown()` lightweight for fast test execution.
- Avoid complex logic in fixture constructors.
- Prefer initializing fixtures through `SetUp()` to ensure correct behavior even if exception handling or test skipping occurs.
- Use fixture member variables for data shared across tests, ensuring isolation between tests (each test gets a fresh fixture instance).

## Parameterized and Typed Tests

### Extending Test Coverage

GoogleTest supports parameterized and typed tests which let you run a single test logic with different input values or types.

- **Parameterized tests** are templated over data parameters.
- **Typed tests** are templated over types, enabling testing behavior over multiple types.

### Parameterized Test Example

```cpp
class MyParamTest : public ::testing::TestWithParam<int> {};

TEST_P(MyParamTest, CheckEven) {
  int n = GetParam();
  EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyParamTest, ::testing::Values(2, 4, 6));
```

### Typed Test Example

```cpp
template <typename T>
class MyTypedTest : public ::testing::Test {
 public:
  T value;
};

using MyTypes = ::testing::Types<int, double, float>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, IsDefaultConstructible) {
  EXPECT_EQ(this->value, TypeParam{});
}
```

## Core Types Overview

### Important Types

- **`::testing::Test`**: Base class for test fixtures; users derive their fixtures from this.
- **`TestInfo`**: Object containing information about a test case, including its name and status.
- **`TestSuite`** (formerly known as `TestCase`): Groups tests sharing a fixture.
- **`TestEventListener`**: Interface for observing test progress and results.
- **`AssertionResult`**: Encapsulates the result of an assertion, supporting custom user assertions.

### Flow of Test Execution

GoogleTest registers tests and fixtures at static initialization time.
At runtime, test executors run each test, invoking `SetUp()`, the test body, and `TearDown()`. Results are recorded and reported. Failures terminate individual tests but leave others unaffected.

## Practical Tips

- Use fixtures to share expensive setup across multiple tests.
- Favor `TEST_F()` over `TEST()` if any setup is needed.
- Make each test independent by ensuring a fresh fixture instance.
- For varying inputs, leverage parameterized or typed tests.
- Always use assertions (`EXPECT_` or `ASSERT_`) to check conditions.

## Troubleshooting

- **Problem**: Tests erroneously share state
  - **Solution**: Verify that shared resources in fixtures are reset properly between tests.
- **Problem**: Fixture setup code runs multiple times or not as expected
  - **Solution**: Check `SetUp()` and constructor semantics; prefer `SetUp()` for setup logic.
- **Problem**: Tests fail with cryptic messages
  - **Solution**: Use descriptive test and fixture names; enable verbose output.

## Additional Resources

For more on writing and organizing tests, see:

- [Writing and Running Your First Test](https://google.github.io/googletest/primer.html#writes-first-test)
- [Using Assertions and Matchers](../guides/core-testing-workflows/using-assertions-and-matchers)
- [Working with Parameterized and Typed Tests](../guides/core-testing-workflows/working-with-parameterized-and-typed-tests)

For GoogleMock integration, see:

- [Test Doubles with GoogleMock](../guides/core-testing-workflows/test-doubles-with-googlemock)
- [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md)

---

### Mermaid.js Diagram: Test Lifecycle Flow

```mermaid
flowchart TD
  Start([Start Test Run]) --> Register[Test & Fixture Registration]
  Register --> Discover[Discover Test Cases & Tests]
  Discover --> Run[Test Execution Loop]
  subgraph Test Execution
    Run --> Setup[Fixture SetUp()]
    Setup --> Execute[Test Body]
    Execute --> TearDown[Fixture TearDown()]
    TearDown --> Verify[Verify Assertions & Expectations]
    Verify --> Report[Record & Report Results]
  end
  Report --> Decision{More Tests?}
  Decision -->|Yes| Run
  Decision -->|No| End([Tests Complete])
```

---

## Summary

This reference equips you to design and implement effective GoogleTest test cases and fixtures, along with advanced patterns such as parameterized and typed tests. It focuses on the core types, user idioms, fixture lifecycles, and troubleshooting common pitfalls to help you create maintainable and reliable C++ tests.

<CalloutNote>
Remember, each test runs with a fresh fixture instance ensuring test isolation. Utilize parameterized and typed tests to cover various inputs and types efficiently.
</CalloutNote>

---

<Info>
For detailed usage patterns and best practices, consult the [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md) and the [Core Testing Workflows Guide](../guides/core-testing-workflows/test-doubles-with-googlemock.mdx).
</Info>
