---
title: "Assertions"
description: "A full reference to GoogleTest's assertion macros and functions, enabling expressive validation of values, exceptions, and conditions. Provides practical examples, error reporting behaviors, and guidance on choosing between fatal and non-fatal assertions to improve test clarity and feedback."
---

# GoogleTest Assertions Reference

This documentation provides a comprehensive reference to GoogleTest's assertion macros and functions. It enables developers to perform expressive validations of values, exceptions, and conditions within their tests. Through clear examples, behavioral descriptions, and guidance on assertion types—fatal and non-fatal—it helps improve test clarity and feedback.

---

## 1. Assertion Overview

GoogleTest assertions are the foundation of writing test expectations. They are macros that resemble function calls and are designed to verify conditions during test execution.

There are two main categories:

- **Fatal Assertions** (`ASSERT_*` macros): Abort the current function immediately upon failure, preventing further execution. Use them when continuing would lead to meaningless or dangerous code execution.

- **Non-Fatal Assertions** (`EXPECT_*` macros): Report failures but allow the current function to continue, enabling multiple failures to be detected in a single test run.

**Custom messages** can be appended to all assertions using the streaming operator `<<` for clarity.

### Key Considerations

- Use `ASSERT_*` when test continuation after failure is unsafe or meaningless.
- Use `EXPECT_*` to gather multiple issues in one test pass.
- Assertions can check equality, inequality, ordering, exceptions, strings, floating-point approximations, predicates, death conditions, and more.

---

## 2. Explicit Success and Failure

These assertions are useful for cases where test flow control directly determines success or failure, rather than evaluating a Boolean.

### 2.1 SUCCEED()

```cpp
SUCCEED();
```

- Generates a success record.
- Does not make the overall test case pass by itself but serves as a documentation aid.

### 2.2 FAIL()

```cpp
FAIL();
```

- Generates a fatal failure.
- Must be used only in functions that return void (due to C++ language restrictions).
- Immediately aborts the current function.

### 2.3 ADD_FAILURE()

```cpp
ADD_FAILURE();
```

- Generates a non-fatal failure.
- Allows the current function to continue executing after reporting failure.

### 2.4 ADD_FAILURE_AT(file, line)

```cpp
ADD_FAILURE_AT("file_path.cc", 42);
```

- Generates a non-fatal failure at a specified source file and line.
- Useful for reporting unexpected conditions in helper functions or deeper in call stacks.

---

## 3. Boolean Condition Assertions

### 3.1 EXPECT_TRUE / ASSERT_TRUE

```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```

- Verify that a condition is `true`.
- Support predicate functions returning `bool` or `AssertionResult` for richer failure messaging.

### 3.2 EXPECT_FALSE / ASSERT_FALSE

```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```

- Verify that a condition is `false`.
- As above, supports rich predicate functions.

**Example:**

```cpp
EXPECT_TRUE(x > 0) << "Value must be positive";
ASSERT_FALSE(ptr == nullptr) << "Pointer must not be null";
```

---

## 4. Binary Comparison Assertions

These assertions compare two values and provide detailed failure messages showing the expected and actual values.

| Macro           | Meaning                          |
|-----------------|--------------------------------|
| `EXPECT_EQ(a, b)` / `ASSERT_EQ(a, b)`            | Check `a == b`                |
| `EXPECT_NE(a, b)` / `ASSERT_NE(a, b)`            | Check `a != b`                |
| `EXPECT_LT(a, b)` / `ASSERT_LT(a, b)`            | Check `a < b`                 |
| `EXPECT_LE(a, b)` / `ASSERT_LE(a, b)`            | Check `a <= b`                |
| `EXPECT_GT(a, b)` / `ASSERT_GT(a, b)`            | Check `a > b`                 |
| `EXPECT_GE(a, b)` / `ASSERT_GE(a, b)`            | Check `a >= b`                |

**Important Notes:**

- For pointer equality, `EXPECT_EQ` tests pointer identity, not content equality. Use string-specific assertions for C strings.
- Arguments are evaluated exactly once.
- Use `EXPECT_EQ(nullptr, ptr)` instead of `EXPECT_EQ(NULL, ptr)` for pointer null checks.

**Example:**

```cpp
EXPECT_EQ(42, MyFunction());
ASSERT_LT(size, max_size) << "Size must be less than maximum";
```

---

## 5. String Comparison Assertions

Designed for comparing **C strings** (`const char*` and `const wchar_t*`). For `std::string`, use `EXPECT_EQ` or `EXPECT_NE`.

| Macro                  | Meaning                                  |
|------------------------|------------------------------------------|
| `EXPECT_STREQ(s1, s2)` / `ASSERT_STREQ(s1, s2)`       | Check strings have the same content    |
| `EXPECT_STRNE(s1, s2)` / `ASSERT_STRNE(s1, s2)`       | Check strings have different content   |
| `EXPECT_STRCASEEQ(s1, s2)` / `ASSERT_STRCASEEQ(s1, s2)` | Check strings are equal ignoring case  |
| `EXPECT_STRCASENE(s1, s2)` / `ASSERT_STRCASENE(s1, s2)` | Check strings differ ignoring case    |

---

## 6. Floating-Point Comparison

Comparing floating-point values requires tolerance for rounding errors. GoogleTest provides specialized assertions:

### 6.1 EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ

- Verify that two `float` values are nearly equal within 4 units in the last place (ULP).

### 6.2 EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ

- Verify that two `double` values are nearly equal within 4 ULPs.

### 6.3 EXPECT_NEAR / ASSERT_NEAR

- Verify that the absolute difference between values does not exceed a specified error bound.

**Example:**

```cpp
EXPECT_FLOAT_EQ(3.1415f, computed_value);
ASSERT_NEAR(expected, actual, 0.001);
```

---

## 7. Exception Assertions

Require exceptions enabled in the environment. Allow verification that a statement throws or does not throw exceptions.

| Macro                         | Description                              |
|-------------------------------|------------------------------------------|
| `EXPECT_THROW(stmt, ex_type)` / `ASSERT_THROW(stmt, ex_type)`  | Verify `stmt` throws `ex_type`             |
| `EXPECT_ANY_THROW(stmt)` / `ASSERT_ANY_THROW(stmt)`             | Verify `stmt` throws any exception          |
| `EXPECT_NO_THROW(stmt)` / `ASSERT_NO_THROW(stmt)`               | Verify `stmt` does not throw                 |

Statements can be compound blocks.

**Example:**

```cpp
EXPECT_THROW({ DoDangerous(); }, std::runtime_error);
ASSERT_NO_THROW({ SafeCall(); });
```

---

## 8. Predicate Assertions: For Custom Condition Checks

Predicate assertions provide detailed failure messages by checking more complex conditions than simple Booleans, supporting functions or functors with richer feedback.

### 8.1 EXPECT_PREDn / ASSERT_PREDn

- Supports conditions involving up to 5 arguments.
- Predicate is a callable returning a `bool`.

**Example:**

```cpp
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, 4);  // passes
EXPECT_PRED2([](int a, int b) { return a < b; }, x, y);
```

### 8.2 EXPECT_PRED_FORMATn / ASSERT_PRED_FORMATn

- Predicate-formatters return a `testing::AssertionResult` with success/failure and custom message.
- Allow *full customization* of failure messages.

**Example:**

```cpp
testing::AssertionResult IsEven(const char* expr, int n) {
  if ((n % 2) == 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr << " is odd: " << n;
}
EXPECT_PRED_FORMAT1(IsEven, value);
```

---

## 9. ASSERT_NO_FATAL_FAILURE / EXPECT_NO_FATAL_FAILURE

These macros ensure that the wrapped statement does not generate any new fatal failures.

```cpp
ASSERT_NO_FATAL_FAILURE(Foo());
EXPECT_NO_FATAL_FAILURE(Bar());
```

- Useful for monitoring subroutines that use fatal assertions without aborting the entire test.

---

## 10. Generalized Matcher Assertions

`EXPECT_THAT(value, matcher)` / `ASSERT_THAT(value, matcher)` provide flexible value validation using GoogleMock matchers.

**Example:**

```cpp
EXPECT_THAT(my_string, StartsWith("Hello"));
ASSERT_THAT(vec, ElementsAre(1, 2, 3));
```

Matchers support complex comparisons like substring, regex, ranges, custom matcher logic.

---

## 11. Death Test Assertions

Special assertions to check that code causes the process to die (terminate) under specified conditions.

| Macro                      | Description                                                    |
|----------------------------|----------------------------------------------------------------|
| `EXPECT_DEATH(stmt, regex)` / `ASSERT_DEATH(stmt, regex)`     | Verifies `stmt` causes abnormal termination and stderr matches `regex`  |
| `EXPECT_DEATH_IF_SUPPORTED` / `ASSERT_DEATH_IF_SUPPORTED`     | Same as above but only if death tests are supported on platform    |
| `EXPECT_DEBUG_DEATH` / `ASSERT_DEBUG_DEATH`                   | Death assertion that only executes in debug mode                   |
| `EXPECT_EXIT(stmt, predicate, matcher)` / `ASSERT_EXIT`       | Verifies termination with an exit code satisfying predicate, stderr matches matcher |

**Example:**

```cpp
ASSERT_DEATH(DoCrash(), "Fatal error: .* out of range");
EXPECT_EXIT(ExitZero(), testing::ExitedWithCode(0), "success");
```

---

## 12. Tips and Best Practices

- Place fatal assertions only in `void`-returning functions.
- Use `SCOPED_TRACE` to add context when calling helper functions with assertions, making failures easier to diagnose.
- For complex predicates over complex data, write custom ASSERT_PRED_FORMAT predicates or custom GMock matchers.
- Distinguish when to use fatal (`ASSERT_*`) vs. non-fatal (`EXPECT_*`) assertions based on whether test continuation makes sense.
- Use death tests to verify that invariants and preconditions triggering program termination behave as expected.
- Streaming failure messages using `<<` improves debugging clarity.

---

## 13. Examples

### 13.1 Basic EXPECT_EQ with Custom Message

```cpp
TEST(MathTest, Addition) {
  int result = Add(2, 2);
  EXPECT_EQ(result, 4) << "Addition failed: expected 4 but got " << result;
}
```

### 13.2 Using ASSERT_TRUE Predicate With Detailed Explanation

```cpp
testing::AssertionResult IsPositive(int n) {
  if (n > 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << n << " is not positive";
}

TEST(NumberTest, PositiveCheck) {
  int value = -3;
  ASSERT_TRUE(IsPositive(value));  // Will print "-3 is not positive" on failure
}
```

### 13.3 EXPECT_THROW Example

```cpp
TEST(ExceptionTest, ThrowsOnInvalidInput) {
  EXPECT_THROW(CallFunction(-1), std::invalid_argument);
}
```

### 13.4 Death Test Example

```cpp
TEST(FatalErrorTest, AbortsOnInvalidArg) {
  ASSERT_DEATH({ DoDangerousStuff(-1); }, "Invalid argument");
}
```

---

## 14. Troubleshooting Common Assertion Issues

- **Fatal assertions in non-void functions:** Causes confusing compile errors. Solution: refactor functions to return void or use non-fatal assertions.

- **Assertions inside constructors/destructors:** Fatal asserts may not stop the test as expected. Prefer `SetUp`/`TearDown` methods or explicitly call `abort()`.

- **Multiple death test assertions on one line:** Cause compilation errors. Write each death assertion on a separate line.

- **Unhandled exceptions:** Ensure tests that expect exceptions use `ASSERT_THROW`/`EXPECT_THROW` to properly catch and verify.

- **Predicate assertion syntax errors:** Overloads or templates may require explicit cast or template argument specification.

---

## 15. References and Further Reading

- [GoogleTest Primer](../guides/getting-started/primer.md)
- [GoogleTest Advanced Usage](../docs/advanced.md)
- [Matchers Reference](matchers.md)
- [Mocking and Setting Expectations](../guides/core-testing-workflows/mocking-and-expectations.md)
- [Death Tests Guide](../guides/advanced-usage-and-optimization/death-tests.md)
- [Writing Effective Assertions Guide](../guides/core-testing-workflows/writing-assertions.md)

For full macro definitions and usage, see the [Assertions Reference](../docs/reference/assertions.md).

---

## 16. Navigation

This page is part of the [API Reference > GoogleTest Core APIs](../api-reference/gtest-core-apis/assertions.md) section.

Go back to:
- [Test Case Construction](../api-reference/gtest-core-apis/test-case-construction.md)
- [Parameterized and Typed Tests](../api-reference/gtest-core-apis/parameterized-tests.md)
- [Mocking APIs](../api-reference/gmock-mocking-apis/mock-object-definition.md)

Explore related concepts:
- [Writing Effective Assertions](../guides/core-testing-workflows/writing-assertions.md)
- [Death Tests](../guides/advanced-usage-and-optimization/death-tests.md)

---

_Last updated with GoogleTest main branch at [https://github.com/google/googletest](https://github.com/google/googletest)_

