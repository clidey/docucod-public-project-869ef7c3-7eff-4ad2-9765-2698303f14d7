---
title: "Assertions Reference"
description: "Comprehensive guide to all built-in GoogleTest assertions, including equality, floating-point, exception, and death test assertions. Users will learn the syntax, usage patterns, and return behaviors of each assertion macro, empowering them to write meaningful and robust checks within their tests."
---

# Assertions Reference

Comprehensive guide to all built-in GoogleTest assertions, covering equality, floating-point, exception, and death test assertions. This documentation explains the syntax, usage patterns, and behavior of each assertion macro, empowering you to write clear and robust checks in your tests.

---

## Table of Contents

- [Overview](#overview)
- [Explicit Success and Failure](#explicit-success-and-failure)
- [Boolean Conditions](#boolean-conditions)
- [Binary Comparison Assertions](#binary-comparison-assertions)
- [C-String/String Assertions](#c-string-string-assertions)
- [Floating-Point Comparison](#floating-point-comparison)
- [Exception Assertions](#exception-assertions)
- [Predicate Assertions](#predicate-assertions)
- [Generalized Assertions using Matchers](#generalized-assertions-using-matchers)
- [Windows HRESULT Assertions](#windows-hresult-assertions)
- [Death Assertions](#death-assertions)

---

## Overview

GoogleTest provides a rich suite of assertion macros, each coming in two variants:

- `EXPECT_`: Generates a nonfatal failure; test continues.
- `ASSERT_`: Generates a fatal failure; current function returns immediately.

All assertions support streaming custom messages via `<<` to provide context on failures.

Example:

```cpp
EXPECT_TRUE(my_condition) << "Condition failed because of X";
```


## Explicit Success and Failure

### `SUCCEED()`

Generates a *success marker* without affecting test outcome. Useful as documentation or to indicate that reaching a code path is considered successful.

```cpp
if (some_condition) {
  SUCCEED();
} else {
  FAIL() << "Unreachable code reached";
}
```

### `FAIL()`

Generates a fatal failure terminating the current **void-returning** function immediately.

```cpp
void TestFunc() {
  if (unexpected_case) {
    FAIL() << "Unexpected case hit";
  }
  // unreachable code below when failure occurs
}
```

### `ADD_FAILURE()` and `ADD_FAILURE_AT(file, line)`

Generate nonfatal failures allowing the current function to continue, optionally specifying failure location.


## Boolean Conditions

### `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`

Assert that the *condition* evaluates to `true`.

### `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`

Assert that the *condition* evaluates to `false`.


## Binary Comparison Assertions

These assertions compare two values using standard C++ operators.

All arguments are evaluated once and printed in case of failure â€” including values, not just expressions.

| Macro                  | Description                                                                                         |
|------------------------|-------------------------------------------------------------------------------------------------| 
| `EXPECT_EQ(val1, val2)`/`ASSERT_EQ` | Checks `val1 == val2`. Compares pointers by address, not content. Use string-specific macros for C-style strings.|  
| `EXPECT_NE(val1, val2)`/`ASSERT_NE` | Checks `val1 != val2`. Compares pointers by address.|  
| `EXPECT_LT(val1, val2)`/`ASSERT_LT` | Checks `val1 < val2`.  
| `EXPECT_LE(val1, val2)`/`ASSERT_LE` | Checks `val1 <= val2`.  
| `EXPECT_GT(val1, val2)`/`ASSERT_GT` | Checks `val1 > val2`.  
| `EXPECT_GE(val1, val2)`/`ASSERT_GE` | Checks `val1 >= val2`.  

**Example:**

```cpp
EXPECT_EQ(result, expected) << "Result did not equal expected value";
ASSERT_LT(value, 100);
```


## C-String/String Assertions

Specialized assertions for comparing C-style strings (`const char*`) and wide strings (`wchar_t*`). These assertions perform content comparison rather than pointer address comparison.

| Macro                  | Description                                        |
|------------------------|--------------------------------------------------|
| `EXPECT_STREQ(s1, s2)` / `ASSERT_STREQ` | Checks that *s1* and *s2* point to C strings with identical content. |
| `EXPECT_STRNE(s1, s2)` / `ASSERT_STRNE` | Checks that *s1* and *s2* point to different C string contents. |
| `EXPECT_STRCASEEQ(s1, s2)` / `ASSERT_STRCASEEQ` | Checks case-insensitive equality of strings. |
| `EXPECT_STRCASENE(s1, s2)` / `ASSERT_STRCASENE` | Checks case-insensitive non-equality. |

Example:

```cpp
EXPECT_STREQ("hello", actual_cstring);
ASSERT_STRCASEEQ("Hello", actual_cstring);
```


## Floating-Point Comparison

Floating-point equality is subtle due to rounding and precision issues. Use these macros to verify approximate equality.

| Macro                      | Description                                                |
|----------------------------|------------------------------------------------------------|
| `EXPECT_FLOAT_EQ(val1, val2)` / `ASSERT_FLOAT_EQ` | Compares two `float`s within 4 Units in the Last Place (ULPs).|
| `EXPECT_DOUBLE_EQ(val1, val2)` / `ASSERT_DOUBLE_EQ` | Compares two `double`s within 4 ULPs.                      |
| `EXPECT_NEAR(val1, val2, abs_error)` / `ASSERT_NEAR` | Asserts the absolute difference does not exceed *abs_error*.| 

**Example:**

```cpp
EXPECT_NEAR(computed_value, 3.1415, 0.0001);
EXPECT_FLOAT_EQ(0.1f + 0.2f, 0.3f);
```


## Exception Assertions

Require that exception support is enabled in your build.

### `EXPECT_THROW(statement, exception_type)` / `ASSERT_THROW`

Verifies that *statement* throws an exception of type *exception_type*.

### `EXPECT_ANY_THROW(statement)` / `ASSERT_ANY_THROW`

Verifies that *statement* throws an exception of any type.

### `EXPECT_NO_THROW(statement)` / `ASSERT_NO_THROW`

Verifies that *statement* does not throw any exception.

Example:

```cpp
EXPECT_THROW(Foo(0), std::invalid_argument);
EXPECT_NO_THROW(Foo(10));
```


## Predicate Assertions

Allow complex predicates to express conditions with informative failure messages.

### `EXPECT_PREDn(pred, val1, val2, ..., valn)` / `ASSERT_PREDn`

Evaluates predicate function *pred* with *val1...valn* as arguments expecting it to return `true`.

Example:

```cpp
bool IsPrime(int n);
EXPECT_PRED1(IsPrime, number);
```

Failure prints values of all arguments.

### `EXPECT_PRED_FORMATn(pred_formatter, val1, ..., valn)` / `ASSERT_PRED_FORMATn`


defines more detailed failure messages with predicate formatter functions returning `::testing::AssertionResult`.

Example:

```cpp
::testing::AssertionResult IsEven(int n) {
  if (n % 2 == 0) return ::testing::AssertionSuccess();
  else return ::testing::AssertionFailure() << n << " is odd";
}

EXPECT_PRED_FORMAT1(IsEven, number);
```

Provides richer feedback on failure.


## Generalized Assertions using Matchers

GoogleMock provides `EXPECT_THAT(value, matcher)` which lets you assert values against expressive, composable matchers.

Example:

```cpp
using ::testing::HasSubstr;
using ::testing::StartsWith;

EXPECT_THAT(my_string, StartsWith("Hello"));
EXPECT_THAT(log_message, HasSubstr("error"));
```

Matchers produce detailed failure messages describing mismatches.


## Windows HRESULT Assertions

For Windows development, assertions verify `HRESULT` success/failure.

- `EXPECT_HRESULT_SUCCEEDED(expression)` / `ASSERT_HRESULT_SUCCEEDED` verifies success.
- `EXPECT_HRESULT_FAILED(expression)` / `ASSERT_HRESULT_FAILED` verifies failure.

Example:

```cpp
CComPtr<IShellDispatch2> shell;
ASSERT_HRESULT_SUCCEEDED(shell.CoCreateInstance(L"Shell.Application"));
```


## Death Assertions

Used to verify code that causes process termination (e.g., fatal assertion failures).

They spawn a child process to run the test fragment.

| Macro                         | Description                                                                                       |
|-------------------------------|-------------------------------------------------------------------------------------------------|
| `EXPECT_DEATH(statement, matcher)` / `ASSERT_DEATH` | Verifies that *statement* causes process termination with nonzero exit code and *stderr* output matching *matcher*.
|
| `EXPECT_DEATH_IF_SUPPORTED` / `ASSERT_DEATH_IF_SUPPORTED` | Run death test if death tests are supported, no verification otherwise.
|
| `EXPECT_DEBUG_DEATH` / `ASSERT_DEBUG_DEATH` | Death assertion active only in debug mode.
|
| `EXPECT_EXIT(statement, predicate, matcher)` / `ASSERT_EXIT` | Verifies process exit with exit status satisfying *predicate* and matching *stderr* output.


Example:

```cpp
TEST(MyDeathTest, AssertFailure) {
  ASSERT_DEATH({ assert(false); }, "Assertion failed");
}

TEST(MyDeathTest, ExitWithCode) {
  EXPECT_EXIT(exit(0), testing::ExitedWithCode(0), "");
}
```

---

## Additional Guidelines and Notes

- Assertions that generate fatal failures (e.g., `ASSERT_*`, `FAIL()`) must appear only in `void`-returning functions.
- You can stream detailed explanations to assertions to improve failure messages.
- Use assertions judiciously to express contract verifications without over-specifying behavior.
- Consider using predicate and matcher assertions for expressive and maintainable test conditions.

---

## Practical Usage Tips

- When testing floating-point calculations, prefer `EXPECT_NEAR` or `EXPECT_FLOAT_EQ` over exact equality.
- Use `EXPECT_THROW` to verify exception-throwing code paths.
- Use `EXPECT_DEATH` and related macros only when testing behavior that causes process abort or exit.
- Use `EXPECT_THAT` with matchers to write understandable and flexible test conditions.
- Stream custom failure messages to pinpoint reasons for assertion failures.

---

For detailed examples, advanced topics, and extensions please refer to:

- [gMock Mocking Reference](reference/mocking.md)
- [Matchers Reference](reference/matchers.md)
- [Actions Reference](reference/actions.md)
- [Advanced GoogleTest Topics](docs/advanced.md)

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/reference/assertions.md", "range": "1-248"}]} />


