---
title: "Assertions"
description: "A detailed catalog of built-in test assertions, including equality, inequality, exception, and custom assertions. Learn assertion syntax, expected values, failure behavior, and best practices for reliable test validation."
---

# Assertions Reference

This page provides a comprehensive guide to the assertion macros in GoogleTest, enabling you to verify code behavior effectively and write robust tests. GoogleTest assertions come in pairs of `EXPECT_` and `ASSERT_` variants — nonfatal and fatal versions respectively — and allow for streaming custom failure messages. Learn how to use various assertion types including equality, inequality, exception checking, predicates, string and floating-point comparisons, and death tests.

---

## Explicit Success and Failure

These assertions generate explicit success or failure without testing any expressions, useful for controlling flow or marking unreachable code.

### SUCCEED

```cpp
SUCCEED();
```

- Generates a success marker.
- Does *not* guarantee the overall test to succeed; only marks a particular assertion as successful.
- Useful as documentation or to indicate intentional passing points.

### FAIL

```cpp
FAIL();
```

- Generates a fatal failure.
- Aborts the current function immediately.
- Must be used only in `void`-returning functions.

### ADD_FAILURE

```cpp
ADD_FAILURE();
```

- Generates a nonfatal failure.
- Allows the current function to continue running.

### ADD_FAILURE_AT

```cpp
ADD_FAILURE_AT("file_path", line_number);
```

- Generates a nonfatal failure at the specified file and line.


## Generalized Assertion

### EXPECT_THAT

```cpp
EXPECT_THAT(value, matcher);
ASSERT_THAT(value, matcher);
```

- Verifies that `value` matches the GoogleMock matcher `matcher`.
- Provides expressive, English-like assertions with descriptive failure messages.
- Supports a rich set of built-in matchers like `StartsWith()`, `HasSubstr()`, `MatchesRegex()`, and composite matchers like `AllOf()`.

Example:

```cpp
#include <gmock/gmock.h>

EXPECT_THAT(my_string, StartsWith("Hello"));
EXPECT_THAT(my_value, AllOf(Gt(5), Lt(10)));
```

## Boolean Conditions

Assertions for verifying boolean expressions.

### EXPECT_TRUE / ASSERT_TRUE

```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```

- Verifies that `condition` evaluates to `true`.
- `ASSERT_TRUE` aborts on failure.

### EXPECT_FALSE / ASSERT_FALSE

```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```

- Verifies that `condition` evaluates to `false`.


## Binary Comparison

Assertions to compare two values using relational operators. Arguments are evaluated exactly once.

### EXPECT_EQ / ASSERT_EQ

```cpp
EXPECT_EQ(val1, val2);
ASSERT_EQ(val1, val2);
```

- Verifies `val1 == val2`.
- For pointers, compares addresses; use string-specific macros for string content.

### EXPECT_NE / ASSERT_NE

```cpp
EXPECT_NE(val1, val2);
ASSERT_NE(val1, val2);
```

- Verifies `val1 != val2`.

### EXPECT_LT / ASSERT_LT

```cpp
EXPECT_LT(val1, val2);
ASSERT_LT(val1, val2);
```

- Verifies `val1 < val2`.

### EXPECT_LE / ASSERT_LE

```cpp
EXPECT_LE(val1, val2);
ASSERT_LE(val1, val2);
```

- Verifies `val1 <= val2`.

### EXPECT_GT / ASSERT_GT

```cpp
EXPECT_GT(val1, val2);
ASSERT_GT(val1, val2);
```

- Verifies `val1 > val2`.

### EXPECT_GE / ASSERT_GE

```cpp
EXPECT_GE(val1, val2);
ASSERT_GE(val1, val2);
```

- Verifies `val1 >= val2`.


## String Comparison

Assertions for comparing **C strings**, including narrow and wide strings. Use `EXPECT_EQ` for `std::string` objects.

### EXPECT_STREQ / ASSERT_STREQ

```cpp
EXPECT_STREQ(str1, str2);
ASSERT_STREQ(str1, str2);
```

- Verifies that `str1` and `str2` have the same contents.

### EXPECT_STRNE / ASSERT_STRNE

```cpp
EXPECT_STRNE(str1, str2);
ASSERT_STRNE(str1, str2);
```

- Verifies that `str1` and `str2` have different contents.

### EXPECT_STRCASEEQ / ASSERT_STRCASEEQ

```cpp
EXPECT_STRCASEEQ(str1, str2);
ASSERT_STRCASEEQ(str1, str2);
```

- Case-insensitive equality.

### EXPECT_STRCASENE / ASSERT_STRCASENE

```cpp
EXPECT_STRCASENE(str1, str2);
ASSERT_STRCASENE(str1, str2);
```

- Case-insensitive inequality.


## Floating-Point Comparison

Due to rounding errors, floating-point values are rarely exactly equal; use specialized assertions.

### EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ

```cpp
EXPECT_FLOAT_EQ(val1, val2);
ASSERT_FLOAT_EQ(val1, val2);
```

- Verifies that two `float` values are approximately equal, within 4 Units in the Last Place (ULPs).

### EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ

```cpp
EXPECT_DOUBLE_EQ(val1, val2);
ASSERT_DOUBLE_EQ(val1, val2);
```

- Verifies approximate equality for `double` values, also within 4 ULPs.

### EXPECT_NEAR / ASSERT_NEAR

```cpp
EXPECT_NEAR(val1, val2, abs_error);
ASSERT_NEAR(val1, val2, abs_error);
```

- Verifies that the difference between `val1` and `val2` does not exceed `abs_error`.
- Proper handling of infinity and NaN.


## Exception Assertions

Requires exceptions to be enabled in your build environment.

### EXPECT_THROW / ASSERT_THROW

```cpp
EXPECT_THROW(statement, exception_type);
ASSERT_THROW(statement, exception_type);
```

- Verifies that `statement` throws an exception of type `exception_type`.

### EXPECT_ANY_THROW / ASSERT_ANY_THROW

```cpp
EXPECT_ANY_THROW(statement);
ASSERT_ANY_THROW(statement);
```

- Verifies `statement` throws an exception of any type.

### EXPECT_NO_THROW / ASSERT_NO_THROW

```cpp
EXPECT_NO_THROW(statement);
ASSERT_NO_THROW(statement);
```

- Verifies `statement` does not throw any exception.


## Predicate Assertions

Used to verify complex predicates while providing clear failure messages.

### EXPECT_PRED{1..5} / ASSERT_PRED{1..5}

```cpp
EXPECT_PRED2(pred, val1, val2);
```

- Verifies that predicate `pred(val1, val2)` returns `true`.
- Predicate can be a function or functor.
- Arguments are evaluated exactly once.

Example:

```cpp
// Predicate returns true if m and n are mutually prime.
bool MutuallyPrime(int m, int n) { ... }

EXPECT_PRED2(MutuallyPrime, a, b); // Succeeds or fails accordingly
```

### EXPECT_PRED_FORMAT{1..5} / ASSERT_PRED_FORMAT{1..5}

```cpp
EXPECT_PRED_FORMAT2(pred_formatter, val1, val2);
```

- Like `EXPECT_PRED` but `pred_formatter` can customize failure messages.
- Should return `testing::AssertionResult`.

Example:

```cpp
testing::AssertionResult AssertMutuallyPrime(const char* m_expr,
                                             const char* n_expr,
                                             int m, int n) {
  if (MutuallyPrime(m, n)) return testing::AssertionSuccess();
  return testing::AssertionFailure() << m_expr << " and " << n_expr
      << " (" << m << " and " << n << ") are not mutually prime.";
}
EXPECT_PRED_FORMAT2(AssertMutuallyPrime, a, b);
```


## Windows HRESULT Assertions

For Windows development, to check HRESULT values.

### EXPECT_HRESULT_SUCCEEDED / ASSERT_HRESULT_SUCCEEDED

```cpp
EXPECT_HRESULT_SUCCEEDED(expression);
ASSERT_HRESULT_SUCCEEDED(expression);
```

- Verifies `expression` produces a success HRESULT.

### EXPECT_HRESULT_FAILED / ASSERT_HRESULT_FAILED

```cpp
EXPECT_HRESULT_FAILED(expression);
ASSERT_HRESULT_FAILED(expression);
```

- Verifies `expression` produces a failure HRESULT.


## Death Assertions

Verify that code terminates the process as expected. These spawn new processes to run the code.

### EXPECT_DEATH / ASSERT_DEATH

```cpp
EXPECT_DEATH(statement, matcher);
ASSERT_DEATH(statement, matcher);
```

- Verifies `statement` aborts the process with a nonzero exit status.
- Checks that `stderr` output matches `matcher` (regular expression or matcher).

Example:

```cpp
EXPECT_DEATH(DoSomething(42), "My error");
```

### EXPECT_DEATH_IF_SUPPORTED / ASSERT_DEATH_IF_SUPPORTED

- Behaves like `EXPECT_DEATH` if supported; otherwise does nothing.

### EXPECT_DEBUG_DEATH / ASSERT_DEBUG_DEATH

- Behaves like `EXPECT_DEATH` in debug builds.
- Otherwise runs `statement` normally.

### EXPECT_EXIT / ASSERT_EXIT

```cpp
EXPECT_EXIT(statement, predicate, matcher);
ASSERT_EXIT(statement, predicate, matcher);
```

- Verifies `statement` terminates with exit status satisfying `predicate`.
- Checks `stderr` output matches `matcher`.
- GoogleTest provides `ExitedWithCode(int)` and `KilledBySignal(int)` predicates.

Example:

```cpp
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

---

## Usage Tips

- Use `EXPECT_` variants when you want tests to continue after failure; use `ASSERT_` for blocking further execution.
- Stream custom failure messages with `<<` to add context.
- Use string-specific assertions for C strings (`EXPECT_STREQ` etc.) to compare contents, not pointer addresses.
- Floating-point assertions avoid pitfalls of imprecise comparisons.
- For exception checking, ensure exceptions are enabled; otherwise assertions will not work.
- Use predicate assertions to verify complex or custom conditions with detailed messages.
- Death tests require special handling but provide essential coverage for critical failures.

## Common Pitfalls

- Avoid using `EXPECT_EQ` or `ASSERT_EQ` on C strings if you want to compare their contents.
- Ensure that the death test code actually causes process termination; otherwise the test will fail.
- Be mindful of function evaluations having side effects; all assertion arguments are evaluated exactly once but evaluation order is undefined.
- When using predicate assertions with overloaded functions, you may need to explicitly cast to disambiguate.

---

For further learning, see the [GoogleTest Primer](primer.md) for foundational concepts, the [Matchers Reference](reference/matchers.md) for sophisticated matcher usage, and the [gMock Cookbook](gmock_cook_book.md) for mocking techniques that integrate with assertions.

