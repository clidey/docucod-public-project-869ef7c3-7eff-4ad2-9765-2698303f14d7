---
title: "Test Case and Suite Definition"
description: "Details the macros and main types needed to define test cases and test suites, including how tests are structured, registered, and executed. Explains common patterns for organizing tests and test fixtures, and how execution is managed across suites."
---

# Test Case and Suite Definition

GoogleTest provides a robust API for defining and organizing your tests into logical units called *test cases* (legacy term) or *test suites* (preferred). This page details the key macros and classes involved in creating tests and fixtures, as well as how GoogleTest manages their registration and execution.

---

## Understanding Tests, Test Suites, and Fixtures

### Test Suites

A **test suite** groups related tests that share logic and setup. This helps organize tests by feature or class and enables shared setup/teardown at the suite level.

- Test suites have unique names.
- They can contain multiple individual test cases/tests.
- They underpin GoogleTest’s test discovery and execution model.

### Test Cases / Individual Tests

An individual **test case** is a single test function verifying a particular behavior or condition.

- Identified by a combination of the test suite name and a test name.
- Contains test code and assertions that determine pass/failure.

### Test Fixtures

A **test fixture** is a C++ class derived from `testing::Test` that allows sharing common setup, cleanup logic, and state among multiple tests within the same test suite.

- Provides `SetUp()` and `TearDown()` lifecycle methods invoked before and after each test.
- Supports static `SetUpTestSuite()` and `TearDownTestSuite()` methods for expensive shared initialization/cleanup performed once per suite.
- Used with `TEST_F()` macros.


---

## Key Macros for Defining Tests

### TEST

Defines a simple test without a fixture.

```cpp
TEST(TestSuiteName, TestName) {
  ... // test code and assertions
}
```

- `TestSuiteName` must be a valid C++ identifier and ideally should not contain underscores to avoid name clashes.
- `TestName` identifies this test uniquely within the suite.
- GoogleTest automatically registers this test for execution.

### TEST_F

Defines a test that uses a test fixture.

```cpp
class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override { ... }
  void TearDown() override { ... }
  // shared data members
};

TEST_F(MyFixture, TestName) {
  ... // test code, which can access fixture members
}
```

- The test suite name is the fixture class name.
- A new fixture object is created for each test, with `SetUp()` / `TearDown()` called around it.
- Shared expensive setup can be done in static `SetUpTestSuite`.

### TEST_P and INSTANTIATE_TEST_SUITE_P

Support value-parameterized tests; covered elsewhere but relevant in structuring suites.

### FRIEND_TEST

Declares a test as a friend inside a class, allowing the test to access private members.

```cpp
class Foo {
  FRIEND_TEST(FooTest, PrivateTest);
  ...
};
```

Then define: 

```cpp
TEST_F(FooTest, PrivateTest) {
  // Can access Foo's private members
}
```


---

## Test Fixture Class: `testing::Test`

GoogleTest derives all fixtures from the abstract base class `testing::Test`.

### Lifecycle Methods

- **SetUp()**: Override to perform per-test setup.
- **TearDown()**: Override to perform per-test cleanup.
- **static SetUpTestSuite()**: Override to perform one-time setup before the first test in the suite runs.
- **static TearDownTestSuite()**: Override to perform one-time teardown after the last test in the suite runs.

### Properties

- Each test uses a fresh fixture object; no sharing of mutable state between tests unless via static members.
- Constructors and destructors should be used carefully; GoogleTest recommends `SetUp()`/`TearDown()` for setup requiring assertions.


---

## Test Registration and Execution

Every test defined with `TEST()` or `TEST_F()` is automatically registered with GoogleTest before `RUN_ALL_TESTS()` is called.

### Dynamic Registration with `RegisterTest`

You can dynamically register tests at runtime when macros are insufficient.

```cpp
::testing::RegisterTest(
    "TestSuiteName", "TestName", nullptr, nullptr,
    __FILE__, __LINE__, []() -> Test* { return new MyFixtureTest(); });
```

- The factory function creates new test objects that GoogleTest runs.
- The fixture type is automatically inferred for setup/teardown.

### Test and Test Suite Management

- GoogleTest manages a collection of `TestInfo` objects representing individual tests.
- Related tests are grouped into `TestSuite` objects.
- `RUN_ALL_TESTS()` runs all registered test suites and their tests sequentially.
- Test results, timing, and failures are tracked per test and suite.

---

## Naming Conventions and Restrictions

- Test suite and test names should be valid C++ identifiers.
- Avoid underscores (`_`) in names to prevent internal naming collisions.
- Follow consistent and descriptive naming to improve test output readability.

<Note>
Underscores in test suite or test names can lead to unexpected test name collisions and compiler errors because GoogleTest generates internal symbols by combining these names. Avoid underscores completely for stability.
</Note>


---

## Organizing Tests

- Group logically related tests together in the same test suite.
- Use fixtures (`TEST_F`) when multiple tests share setup or require common state.
- Use static `SetUpTestSuite()` to reduce expensive setup overhead which applies to all tests in the suite.
- Subclass fixtures to create hierarchies for shared setup reuse.


---

## TestSuite Class Overview

GoogleTest exposes the `TestSuite` class representing a collection of tests.

### Key Methods and Properties

- `name()`: Returns the suite name.
- `type_param()`: Returns the type name for typed/type-parameterized tests.
- `should_run()`: Indicates if any tests in the suite are scheduled to run.
- `successful_test_count()`, `failed_test_count()`, `skipped_test_count()`: Aggregated test results.
- `total_test_count()`: Count of all tests in the suite.
- `Run()`: Runs all contained tests.
- `GetTestInfo(int i)`: Access individual test info.

---

## TestInfo Class Overview

Each test in a suite is represented by a `TestInfo` object containing:

- Test suite and test names
- Source file and line
- Parameterization type and values
- Test result and status
- Internal factory for creating test objects

You can use `current_test_info()` to query information about the running test.

---

## Summary of Common Patterns

### Typical Fixture and Test Suite Example

```cpp
class FooTest : public testing::Test {
 protected:
  static void SetUpTestSuite() { ... }    // run once before suite
  static void TearDownTestSuite() { ... } // run once after suite

  void SetUp() override { ... }            // run before each test
  void TearDown() override { ... }         // run after each test

  // Shared fixture data
  int shared_data_;
};

TEST_F(FooTest, TestA) {
  EXPECT_EQ(shared_data_, ...);
}

TEST_F(FooTest, TestB) {
  EXPECT_TRUE(...);
}
```

### Defining Multiple Suites

Define separate fixture classes or use `TEST()` for tests without shared data.

### Dynamic Test Registration Example

```cpp
class MyFixture : public testing::Test {
 public:
  void TestBody() override {
    // test logic
  }
};

void RegisterMyTests(const std::vector<int>& data) {
  for (int val : data) {
    testing::RegisterTest(
      "MyFixture", ("Test" + std::to_string(val)).c_str(), nullptr, nullptr,
      __FILE__, __LINE__,
      [val]() -> MyFixture* {
        return new MyFixture();  // You could pass val if needed
      });
  }
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  RegisterMyTests({1,2,3});
  return RUN_ALL_TESTS();
}
```


---

## Best Practices and Tips

- Avoid underscores in test suite and test names.
- For expensive shared initialization, use `SetUpTestSuite()`.
- Each test runs on a fresh fixture instance to avoid side effects.
- Use `SCOPED_TRACE` to annotate failures in subroutines.
- Use `FRIEND_TEST` to test private members when needed.
- Always check the return value of `RUN_ALL_TESTS()` in your `main()`.

---

## Troubleshooting Common Issues

- **No default constructor error in TEST_F**: Ensure your fixture has a parameterless constructor.
- **Test names collisions**: Avoid underscores to prevent name mangling collisions.
- **Multiple definitions or missing registrations**: Use `RegisterTest` carefully and ensure tests are defined before `RUN_ALL_TESTS()`.
- **Asserting in constructors**: Use `SetUp()` instead due to C++ limitations.


---

This page has covered the essential macros and types needed to define test cases and test suites in GoogleTest, how tests are structured and registered, and common organizational patterns for maintaining robust and maintainable test code.

For in-depth guides on advanced test types like parameterized and typed tests, see the [Parameterized and Typed Tests](../core-testing-workflows/advanced-parameterized-tests.md) documentation.

---

## References & Further Reading

- [GoogleTest Primer](../primer.md) – foundational tutorial
- [Running and Writing Your First Test](../../getting-started/project-setup-validation/first-test.md)
- [Assertions Reference](../reference/assertions.md) – core assertion macros
- [Value-Parameterized Tests](../core-testing-workflows/advanced-parameterized-tests.md#value-parameterized-tests)
- [Typed Tests](../core-testing-workflows/advanced-parameterized-tests.md#typed-tests)
- [Dynamic Test Registration](../advanced.md#registering-tests-programmatically)

---

<Source url="https://github.com/google/googletest" paths={[{"path": "googletest/include/gtest/gtest.h", "range": "1-488"}]} />
<Source url="https://github.com/google/googletest" paths={[{"path": "docs/reference/testing.md", "range": "43-257"}]} />