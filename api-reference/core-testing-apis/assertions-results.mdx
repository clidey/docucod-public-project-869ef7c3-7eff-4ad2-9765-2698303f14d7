---
title: "Assertions and Results"
description: "Covers all assertion macros (EXPECT_*, ASSERT_*) and the flexible AssertionResult mechanism for detailed diagnostics. Users discover how to use built-in assertions, customize predicate outputs, and interpret rich failure messages. Includes edge cases and output formatting."
---

# Assertions and Results

This reference details the comprehensive set of assertion macros provided by GoogleTest, enabling you to verify the correctness of your C++ code with clear and informative diagnostics. Using these assertions, you can validate various conditions, equality, floating-point computations, string content, exception behavior, and predicates, tailoring your tests for precision and clarity.

All GoogleTest assertions come in pairs: `EXPECT_*` and `ASSERT_*` variants. `EXPECT_*` assertions generate nonfatal failures allowing a test to continue after failure, while `ASSERT_*` assertions generate fatal failures and abort the current function. Both support streaming custom failure messages for enhanced diagnostics.

---

## Table of Contents

- [Explicit Success and Failure](#explicit-success-and-failure)
- [Generalized Assertions with Matchers](#generalized-assertion)
- [Boolean Conditions](#boolean-conditions)
- [Binary Comparison Assertions](#binary-comparison)
- [String Comparison Assertions](#string-comparison)
- [Floating-Point Comparison](#floating-point-comparison)
- [Exception Assertions](#exception-assertions)
- [Predicate Assertions](#predicate-assertions)
- [Windows HRESULT Assertions](#windows-hresult-assertions)

---

## Explicit Success and Failure

### `SUCCEED()`

Generates an explicit **success** in your test. This assertion does not affect the overall test result. Use it for documentation purposes or when control flow explicitly determines success.

```cpp
SUCCEED();
```

### `FAIL()`

Generates a **fatal failure**, aborting the current function immediately. Use when execution should stop due to an unrecoverable condition.

```cpp
FAIL() << "Unexpected code path";
```

### `ADD_FAILURE()`

Generates a **nonfatal failure** allowing the test to continue. Useful to record a failure within test control structures without halting execution.

```cpp
if (condition) { ADD_FAILURE() << "Condition failed"; }
```

### `ADD_FAILURE_AT(file, line)`

Generates a nonfatal failure at the specified file and line number, useful for reporting failures in helper functions or callbacks.

```cpp
ADD_FAILURE_AT("my_file.cc", 42) << "Error in callback";
```

---

## Generalized Assertion

### `EXPECT_THAT(value, matcher)` / `ASSERT_THAT(value, matcher)`

Verifies that `value` satisfies a [GoogleMock matcher](matchers.md). Provides readable, English-like assertions and informative failure messages.

```cpp
#include <gmock/gmock.h>
using ::testing::StartsWith;
EXPECT_THAT(foo_string, StartsWith("Hello"));
```

If the assertion fails, the output clearly explains the mismatch.

---

## Boolean Conditions

### `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`

Verifies that `condition` is true.

```cpp
EXPECT_TRUE(is_valid_flag) << "Flag should be valid";
```

### `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`

Verifies that `condition` is false.

```cpp
EXPECT_FALSE(is_error) << "Expected no errors";
```

Both macros support streaming custom failure messages.

---

## Binary Comparison

These assertions compare two values using the specified relational operators:

- `EXPECT_EQ(val1, val2)` / `ASSERT_EQ(val1, val2)`: Checks `val1 == val2`.
- `EXPECT_NE(val1, val2)` / `ASSERT_NE(val1, val2)`: Checks `val1 != val2`.
- `EXPECT_LT(val1, val2)` / `ASSERT_LT(val1, val2)`: Checks `val1 < val2`.
- `EXPECT_LE(val1, val2)` / `ASSERT_LE(val1, val2)`: Checks `val1 <= val2`.
- `EXPECT_GT(val1, val2)` / `ASSERT_GT(val1, val2)`: Checks `val1 > val2`.
- `EXPECT_GE(val1, val2)` / `ASSERT_GE(val1, val2)`: Checks `val1 >= val2`.

**Important notes:**

- If pointers are involved, pointer equality is checked, not pointed values.
- To compare C strings, use [`EXPECT_STREQ`](#expect_streq) instead.
- When comparing pointers to `nullptr`, prefer `EXPECT_EQ(ptr, nullptr)` over `EXPECT_EQ(ptr, NULL)`.

**Example:**

```cpp
EXPECT_EQ(result, expected_value) << "Result did not match expected";
```

---

## String Comparison

GoogleTest provides specialized macros for comparing **C strings** (null-terminated character arrays). These macros handle content comparison, including wide strings, and generate clear failure messages.

- `EXPECT_STREQ(str1, str2)` / `ASSERT_STREQ(str1, str2)`
  - Verifies strings are equal in content.
- `EXPECT_STRNE(str1, str2)` / `ASSERT_STRNE(str1, str2)`
  - Verifies strings are not equal.
- `EXPECT_STRCASEEQ(str1, str2)` / `ASSERT_STRCASEEQ(str1, str2)`
  - Case-insensitive equality check.
- `EXPECT_STRCASENE(str1, str2)` / `ASSERT_STRCASENE(str1, str2)`
  - Case-insensitive inequality check.

**Example:**

```cpp
EXPECT_STREQ("hello", greeting) << "Greeting should be 'hello'";
```

If wide character strings (`wchar_t*`) are used, GoogleTest converts them to UTF-8 for display, ensuring readable diagnostics.

---

## Floating-Point Comparison

Floating-point operations are prone to rounding errors. GoogleTest provides assertions that compare floating-point numbers within a tolerance of Units in the Last Place (ULPs).

- `EXPECT_FLOAT_EQ(val1, val2)` / `ASSERT_FLOAT_EQ(val1, val2)`
  - Checks two `float` values approximately equal (about 4 ULPs).
- `EXPECT_DOUBLE_EQ(val1, val2)` / `ASSERT_DOUBLE_EQ(val1, val2)`
  - Same as above for `double` values.
- `EXPECT_NEAR(val1, val2, abs_error)` / `ASSERT_NEAR(val1, val2, abs_error)`
  - Checks that the difference between values does not exceed `abs_error`.

**Example:**

```cpp
EXPECT_FLOAT_EQ(computed_value, expected_value) << "Computation failed";
EXPECT_NEAR(signal, expected_signal, 0.01);
```

If both values are infinity with the same sign, they are considered equal. Special care is taken to provide helpful failure messages when the error tolerance is small.

---

## Exception Assertions

Use these assertions to verify whether a piece of code throws an expected exception.

- `EXPECT_THROW(statement, exception_type)` / `ASSERT_THROW(statement, exception_type)`
  - Verifies that `statement` throws an exception of type `exception_type`.
- `EXPECT_ANY_THROW(statement)` / `ASSERT_ANY_THROW(statement)`
  - Verifies that `statement` throws any exception.
- `EXPECT_NO_THROW(statement)` / `ASSERT_NO_THROW(statement)`
  - Verifies that `statement` does not throw any exception.

**Example:**

```cpp
EXPECT_THROW(DoSomething(-1), std::invalid_argument);
EXPECT_NO_THROW(DoSomething(0));
```

Compound statements can be used by bracing multiple statements.

---

## Predicate Assertions

Predicate assertions improve failure diagnostics for complex boolean expressions beyond simple `EXPECT_TRUE`. They are split into two styles:

### `EXPECT_PRED*` / `ASSERT_PRED*`

These macros verify that a custom predicate returns `true` when passed specified arguments.

- Macros exist for predicates with 1 to 5 arguments: `EXPECT_PRED1`, ..., `EXPECT_PRED5`.
- Arguments are evaluated exactly once.

**Example:**

```cpp
bool IsEven(int n) { return n % 2 == 0; }
EXPECT_PRED1(IsEven, 4); // Passes
EXPECT_PRED1(IsEven, 5); // Fails
```

If the predicate function is overloaded or templated, explicit casting or template argument specification is needed.

### `EXPECT_PRED_FORMAT*` / `ASSERT_PRED_FORMAT*`

These allow full control over failure message formatting.

- The predicate-formatter function takes the string expressions and their evaluated values, returns `::testing::AssertionResult`.

**Example:**

```cpp
testing::AssertionResult AssertIsEven(const char* expr, int n) {
  if ((n % 2) == 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr << " evaluates to " << n << ", which is not even.";
}
EXPECT_PRED_FORMAT1(AssertIsEven, 5); // Clear diagnostic on failure
```

---

## Windows HRESULT Assertions

To verify success or failure of Windows `HRESULT` return codes:

- `EXPECT_HRESULT_SUCCEEDED(expression)` / `ASSERT_HRESULT_SUCCEEDED(expression)`
  - Verifies that the HRESULT denotes success.
- `EXPECT_HRESULT_FAILED(expression)` / `ASSERT_HRESULT_FAILED(expression)`
  - Verifies that the HRESULT denotes failure.

Failure messages include the human-readable system error message.

**Example:**

```cpp
HRESULT hr = CoCreateInstance(...);
ASSERT_HRESULT_SUCCEEDED(hr);
```

---

## Using Custom Failure Messages

All assertion macros support streaming custom messages using the `<<` operator.

```cpp
EXPECT_EQ(result, expected) << "Failed at step " << step;
```

This feature helps pinpoint failures with contextual data.

---

## Important Notes and Best Practices

- Use `EXPECT_*` when you want the test to continue after failure to discover multiple issues.
- Use `ASSERT_*` when continuing after failure may cause undefined behavior or crashes.
- Assertions that generate fatal failures (`ASSERT_*`, `FAIL()`) can only be used inside void-returning functions.
- For comparing C string contents, avoid `EXPECT_EQ` and use `EXPECT_STREQ` instead.
- Custom predicate assertions greatly improve failure diagnostics for complex checks.
- Use `SCOPED_TRACE` to add contextual information to failures inside nested calls.
- Disabled tests (prefixed with `DISABLED_`) are compiled but not run, useful for temporarily disabling tests.

---

## References

- [Assertions Guide](../guides/core-workflows/assertions-matchers.md)
- [Matchers Reference](matchers.md)
- [Test Macros and Test Suites](api-reference/core-testing-apis/test-macros-suites.md)
- [Advanced Topics on Assertions](docs/advanced.md#more-assertions)
- [Exception Assertions](#exception-assertions)
- [Predicate Assertions](#predicate-assertions)

---

## Example: Multiple Assertion Types

```cpp
TEST(MathTest, BasicAssertions) {
  int val = ComputeValue();

  // Binary comparison
  EXPECT_EQ(val, 42) << "Value should be 42";

  // String comparison
  const char* result_str = GetResultString();
  EXPECT_STREQ(result_str, "OK") << "Result string mismatch";

  // Floating-Point comparison
  double pi = ComputePiApproximation();
  EXPECT_NEAR(pi, 3.14159, 0.0001) << "Pi approximation off";

  // Exception check
  EXPECT_THROW(RiskyOperation(), std::runtime_error);

  // Predicate assertion
  EXPECT_PRED1(IsPositive, val) << "Value must be positive";
}
```

---

This documentation equips you with a full spectrum of assertions to verify your code's behavior, providing rich, actionable feedback for every test failure.

---