---
title: "Assertions and Results"
description: "Details the assertions framework for expressing expectations within testsâ€”such as equality, exception checks, and death tests. Includes the assertion macros, their predicate variants, and explanations of assertion result reporting and severity (fatal vs non-fatal failures), with illustrative examples."
---

# Assertions and Results

This document details the assertion framework provided by GoogleTest, which allows you to express expectations within your tests. These assertions help verify program state, compare values, check for exceptions, validate death tests, and control test flow through explicit success and failure. The framework also supports predicate-based assertions for more sophisticated checks and provides meaningful failure reports.

---

## Table of Contents

- [Explicit Success and Failure](#explicit-success-and-failure)
- [Boolean Conditions](#boolean-conditions)
- [Binary Comparison](#binary-comparison)
- [String Comparison](#string-comparison)
- [Floating-Point Comparison](#floating-point-comparison)
- [Predicate Assertions](#predicate-assertions)
- [Windows HRESULT Assertions](#windows-hresult-assertions)
- [Death Assertions](#death-assertions)

---

## Explicit Success and Failure

These assertions directly generate success or failure without testing any value or expression. They are useful to control test flow or document the intention.

### SUCCEED

```cpp
SUCCEED();
```

Generates a success. This does not guarantee an overall test success but documents a success point. Currently, it produces no visible output.

### FAIL

```cpp
FAIL();
```

Generates a fatal failure which immediately aborts the current function. Must be used in functions returning `void`.

### ADD_FAILURE

```cpp
ADD_FAILURE();
```

Generates a non-fatal failure, allowing the current function to continue running.

### ADD_FAILURE_AT

```cpp
ADD_FAILURE_AT("path/to/file.cc", 42);
```

Generates a non-fatal failure at the specified file and line.

---

## Boolean Conditions

GoogleTest provides boolean condition checks, each with an `EXPECT_` (non-fatal failure) and `ASSERT_` (fatal failure abort) version.

### EXPECT_TRUE / ASSERT_TRUE

```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```

Verifies that the condition is `true`.

### EXPECT_FALSE / ASSERT_FALSE

```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```

Verifies that the condition is `false`.

---

## Binary Comparison

These assertions verify relations between two comparable values, with detailed failure messages including argument values. All arguments are evaluated exactly once.

### EXPECT_EQ / ASSERT_EQ

```cpp
EXPECT_EQ(val1, val2);
ASSERT_EQ(val1, val2);
```

Checks that `val1 == val2`. For pointers, checks pointer equality, not content equality. For C strings use `EXPECT_STREQ`. Prefer `EXPECT_EQ(ptr, nullptr)` over `EXPECT_EQ(ptr, NULL)`.

### EXPECT_NE / ASSERT_NE

```cpp
EXPECT_NE(val1, val2);
ASSERT_NE(val1, val2);
```

Verifies `val1 != val2`. Pointer comparison on pointers.

### EXPECT_LT / ASSERT_LT

```cpp
EXPECT_LT(val1, val2);
ASSERT_LT(val1, val2);
```

Checks `val1 < val2`.

### EXPECT_LE / ASSERT_LE

```cpp
EXPECT_LE(val1, val2);
ASSERT_LE(val1, val2);
```

Checks `val1 <= val2`.

### EXPECT_GT / ASSERT_GT

```cpp
EXPECT_GT(val1, val2);
ASSERT_GT(val1, val2);
```

Checks `val1 > val2`.

### EXPECT_GE / ASSERT_GE

```cpp
EXPECT_GE(val1, val2);
ASSERT_GE(val1, val2);
```

Checks `val1 >= val2`.

---

## String Comparison

These assertions compare **C strings** or wide C strings.

### EXPECT_STREQ / ASSERT_STREQ

```cpp
EXPECT_STREQ(str1, str2);
ASSERT_STREQ(str1, str2);
```

Verifies that `str1` and `str2` have equal content.

### EXPECT_STRNE / ASSERT_STRNE

```cpp
EXPECT_STRNE(str1, str2);
ASSERT_STRNE(str1, str2);
```

Verifies that `str1` and `str2` have different content.

### EXPECT_STRCASEEQ / ASSERT_STRCASEEQ

```cpp
EXPECT_STRCASEEQ(str1, str2);
ASSERT_STRCASEEQ(str1, str2);
```

Verifies equal strings ignoring case.

### EXPECT_STRCASENE / ASSERT_STRCASENE

```cpp
EXPECT_STRCASENE(str1, str2);
ASSERT_STRCASENE(str1, str2);
```

Verifies different strings ignoring case.

---

## Floating-Point Comparison

Due to inherent rounding errors, exact equality comparisons on floating-point values are unreliable. GoogleTest offers these specialized macros.

### EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ

```cpp
EXPECT_FLOAT_EQ(val1, val2);
ASSERT_FLOAT_EQ(val1, val2);
```

Verifies two `float` values are approximately equal within 4 ULPs (Units in the Last Place).

### EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ

```cpp
EXPECT_DOUBLE_EQ(val1, val2);
ASSERT_DOUBLE_EQ(val1, val2);
```

Verifies two `double` values approximately equal within 4 ULPs.

### EXPECT_NEAR / ASSERT_NEAR

```cpp
EXPECT_NEAR(val1, val2, abs_error);
ASSERT_NEAR(val1, val2, abs_error);
```

Verifies that the difference between `val1` and `val2` does not exceed `abs_error`. Supports infinite values appropriately.

---

## Predicate Assertions

Predicate assertions provide expressive and informative checks using custom or existing predicates, improving error messages significantly over plain boolean checks.

### EXPECT_PRED* / ASSERT_PRED*

Used to verify predicates that return a `bool` for up to 5 arguments:

```cpp
EXPECT_PRED2(Predicate, val1, val2);
ASSERT_PRED3(Predicate, val1, val2, val3);
```

If the predicate returns `false`, failure messages include the values of all arguments. Predicate functions can be overloaded or templated; explicit cast or template instantiation may be required.

### EXPECT_PRED_FORMAT* / ASSERT_PRED_FORMAT*

Used with *predicate-formatters* which return an `AssertionResult` to define custom failure messages:

```cpp
EXPECT_PRED_FORMAT2(MyPredicateFormatter, val1, val2);
```

A predicate-formatter signature is:

```cpp
testing::AssertionResult PredFmt(const char* expr1, ..., const char* exprN, T1 val1, ..., TN valN);
```

These produce very detailed, customizable failure messages on assertion failure.

---

## Windows HRESULT Assertions

GoogleTest offers specialized macros for verifying Windows HRESULT codes.

### EXPECT_HRESULT_SUCCEEDED / ASSERT_HRESULT_SUCCEEDED

Verifies the HRESULT value indicates success.

### EXPECT_HRESULT_FAILED / ASSERT_HRESULT_FAILED

Verifies the HRESULT value indicates failure.

Example usage:

```cpp
CComPtr<IShellDispatch2> shell;
ASSERT_HRESULT_SUCCEEDED(shell.CoCreateInstance(L"Shell.Application"));
```

Failure output prints the human-readable error message associated with the code.

---

## Death Assertions

Death tests verify that code causes the process to terminate in expected ways.

### EXPECT_DEATH / ASSERT_DEATH

```cpp
EXPECT_DEATH({ statement; }, matcher);
```

Verifies that `statement` causes the process to terminate with non-zero exit status and stderr matches `matcher`. `matcher` can be a string interpreted as a regex or a proper matcher.

Example:

```cpp
EXPECT_DEATH(DoSomething(42), "My error");
```

### EXPECT_DEATH_IF_SUPPORTED / ASSERT_DEATH_IF_SUPPORTED

Behaves as `EXPECT_DEATH` if death tests are supported; otherwise, does nothing.

### EXPECT_DEBUG_DEATH / ASSERT_DEBUG_DEATH

In debug mode, behaves like `EXPECT_DEATH`; otherwise just executes the statement.

### EXPECT_EXIT / ASSERT_EXIT

```cpp
EXPECT_EXIT(statement, predicate, matcher);
```

Verifies `statement` terminates with exit status satisfying `predicate` and stderr matches `matcher`.

Built-in predicates:
- `ExitedWithCode(code)`
- `KilledBySignal(signal)`

Example:

```cpp
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

---

## General Notes on Assertions

- All assertions support streaming custom failure messages via `<<` operator.
- Fatal assertions (`ASSERT_`) abort the current function, not the entire test.
- Use `EXPECT_` to continue testing after a failure.
- For assertions inside functions returning non-void, avoid fatal assertions or consider restructuring to void-returning functions.

---

## Examples

### Basic EXPECT_EQ Example

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### Predicate Assertion Example

```cpp
bool MutuallyPrime(int m, int n) { /*...*/ }

EXPECT_PRED2(MutuallyPrime, 3, 4);  // Passes
EXPECT_PRED2(MutuallyPrime, 4, 10); // Fails with message including values
```

### Custom Predicate-Formatter Example

```cpp
testing::AssertionResult AssertMutuallyPrime(const char* m_expr, const char* n_expr, int m, int n) {
  if (MutuallyPrime(m, n)) return testing::AssertionSuccess();
  return testing::AssertionFailure() << m_expr << " and " << n_expr << " are not mutually prime";
}

EXPECT_PRED_FORMAT2(AssertMutuallyPrime, a, b);
```

---

## Troubleshooting Tips

- Use `EXPECT_PRED_FORMAT*` when default messages are insufficient.
- Avoid mixing fatal assertions within non-void functions.
- Use `GTEST_SKIP()` to skip tests at runtime with explanations.
- For comparing floating-point numbers, prefer the `EXPECT_FLOAT_EQ` or `EXPECT_NEAR` macros.

---

For detailed usage patterns, examples, and advanced techniques, explore the [Assertions Reference](reference/assertions.md) and [Advanced GoogleTest Topics](guides/advanced.md).

---

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/reference/assertions.md", "range": "1-250"}]} />

