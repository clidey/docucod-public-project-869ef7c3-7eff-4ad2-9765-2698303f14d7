---
title: "Assertions Reference"
description: "Comprehensive API details and behavioral contracts for the suite of built-in assertions (such as equality, inequality, exceptions, floating point, and user-defined assertions). Covers both fatal and non-fatal failures, and demonstrates usage with code examples."
---

# Assertions Reference

This reference provides a detailed overview of the assertion macros provided by GoogleTest for verifying the behavior of your code. Included are both fatal (`ASSERT_`) and non-fatal (`EXPECT_`) assertion variants, which allow you to enforce correctness without abruptly stopping your tests when failures occur.

Assertions are the cornerstone of test verification, giving meaningful feedback when your code behaves unexpectedly.

---

## Key Concepts: Fatal vs Non-fatal Assertions

- **`EXPECT_` Assertions:** Generate nonfatal failures, allowing the test function to continue running. Use these when you want to keep testing even if a condition fails.
- **`ASSERT_` Assertions:** Generate fatal failures that abort the current function immediately. Use these when continuing the test is pointless after a failure.

You can append custom failure messages to any assertion using the streaming `<<` operator to improve test output clarity.

```cpp
EXPECT_TRUE(condition) << "Condition failed because X";
```

---

## Categories of Assertions

### 1. Explicit Success and Failure

- **`SUCCEED()`**: Indicates an explicit successful check (does not guarantee overall test success).
- **`FAIL()`**: Marks a fatal failure unconditionally (function must return `void`).
- **`ADD_FAILURE()`**: Inserts a nonfatal failure to mark unexpected code paths.
- **`ADD_FAILURE_AT(file, line)`**: Adds a nonfatal failure at specified source location.

---

### 2. Generalized Assertion Using Matchers

- **`EXPECT_THAT(value, matcher)`** / **`ASSERT_THAT(value, matcher)`**: Verify that `value` matches the provided GoogleMock-style matcher, enabling expressive and readable tests.

Example:

```cpp
EXPECT_THAT(str, StartsWith("Hello"));
EXPECT_THAT(num, AllOf(Gt(5), Lt(10)));
```

---

### 3. Boolean Condition Assertions

Verify Boolean conditions precisely.

| Macro              | Description                       |
| ------------------ | --------------------------------- |
| `EXPECT_TRUE(cond)` | Checks if `cond` is true.         |
| `EXPECT_FALSE(cond)`| Checks if `cond` is false.        |
| `ASSERT_TRUE(cond)` | Fatal variant of `EXPECT_TRUE`.   |
| `ASSERT_FALSE(cond)`| Fatal variant of `EXPECT_FALSE`.  |

---

### 4. Binary Comparisons

These verify relationships between two comparable values.

| Macro          | Relation | Description                          | Notes                                          |
| -------------- | -------- | ------------------------------------|------------------------------------------------|
| `EXPECT_EQ(a,b)` | `==`    | Checks `a == b`.                   | For pointers, compares addresses; use `EXPECT_STREQ` for C-strings. |
| `EXPECT_NE(a,b)` | `!=`    | Checks `a != b`.                   | For pointers, compares addresses; use `EXPECT_STRNE` for C-strings. |
| `EXPECT_LT(a,b)` | `<`     | Checks `a < b`.                    |                                                |
| `EXPECT_LE(a,b)` | `<=`    | Checks `a <= b`.                   |                                                |
| `EXPECT_GT(a,b)` | `>`     | Checks `a > b`.                    |                                                |
| `EXPECT_GE(a,b)` | `>=`    | Checks `a >= b`.                   |                                                |

Also available with fatal variants as `ASSERT_*`.

---

### 5. String Comparisons (C-strings)

Specialized for C-style strings (`const char*`, `wchar_t*`) to compare contents rather than pointer addresses.

| Macro             | Description                                   |
| ----------------- | ---------------------------------------------|
| `EXPECT_STREQ(a,b)` | Checks C-strings `a` and `b` have equal content. |
| `EXPECT_STRNE(a,b)` | Checks C-strings `a` and `b` have different content. |
| `EXPECT_STRCASEEQ(a,b)` | Checks equality ignoring case.            |
| `EXPECT_STRCASENE(a,b)` | Checks inequality ignoring case.          |

---

### 6. Floating-Point Comparisons

Due to rounding issues, specialized assertions compare with tolerances.

| Macro               | Description                                                            |
| ------------------- | ---------------------------------------------------------------------- |
| `EXPECT_FLOAT_EQ(a,b)` | Checks `float` a and b are approximately equal within 4 ULPs.          |
| `EXPECT_DOUBLE_EQ(a,b)`| Checks `double` a and b are approximately equal within 4 ULPs.         |
| `EXPECT_NEAR(a,b,abs_error)` | Checks that absolute difference between `a` and `b` is <= `abs_error`. |

For example:

```cpp
EXPECT_NEAR(actual, expected, 0.001);
```

---

### 7. Exception Assertions

Verify that code throws specific exceptions or not.

| Macro                 | Description                                        |
| --------------------- | ------------------------------------------------- |
| `EXPECT_THROW(stmt, ExceptionType)` | Checks that `stmt` throws an exception of type `ExceptionType`. |
| `EXPECT_ANY_THROW(stmt)` | Checks that `stmt` throws any exception.          |
| `EXPECT_NO_THROW(stmt)`  | Checks that `stmt` throws no exceptions.           |

Example:

```cpp
EXPECT_THROW(MyFunc(), std::runtime_error);
```

---

### 8. Predicate Assertions

Custom predicates for verifying complex logic with informative messages.

- `EXPECT_PREDn(Predicate, val1, ..., valn)` and `ASSERT_PREDn` variants.
- For predicates as predicate-formatters use `EXPECT_PRED_FORMATn` which receive expressions and evaluated values allowing precise failure descriptions.

Example:

```cpp
bool MutuallyPrime(int a, int b) { /*...*/ }
EXPECT_PRED2(MutuallyPrime, x, y);
```

---

### 9. Windows HRESULT Assertions

Specifically for COM HRESULT values.

| Macro                     | Description                                |
| --------------------------| ------------------------------------------|
| `EXPECT_HRESULT_SUCCEEDED(expr)` | Checks that `expr` yields success HRESULT. |
| `EXPECT_HRESULT_FAILED(expr)`    | Checks that `expr` yields failure HRESULT. |

---

### 10. Death Assertions

Verify that code causes process termination and error messages.

| Macro                  | Description                                                                        |
| ---------------------- | ---------------------------------------------------------------------------------- |
| `EXPECT_DEATH(stmt, regex)` | Asserts `stmt` causes process to terminate and outputs stderr matching `regex`.    |
| `EXPECT_DEATH_IF_SUPPORTED(stmt, regex)` | Like `EXPECT_DEATH`, but if unsupported, it's a no-op.                    |
| `EXPECT_DEBUG_DEATH(stmt, regex)` | Executes death test only in debug mode.                                     |
| `EXPECT_EXIT(stmt, predicate, regex)` | Verifies `stmt` process exit status matches predicate and output matches `regex`.

Examples:

```cpp
EXPECT_DEATH(DangerousFunction(), "Error on line .* of DangerousFunction");
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

---

## Practical Tips and Best Practices

- Use `EXPECT_` assertions when you can continue the test even if the condition fails.
- Use `ASSERT_` assertions when further test code depends on the outcome of the assertion.
- Append descriptive failure messages using `<<` to improve debuggability.
- When comparing floating points, prefer `EXPECT_NEAR` or `EXPECT_*_EQ` variants over `EXPECT_EQ`.
- Prefer matchers (`EXPECT_THAT`) when asserting complex conditions for better output clarity.
- Use explicit `EXPECT_DEATH` and related macros to validate fatal error conditions safely.
- Use `EXPECT_PRED_FORMATn` for advanced predicates to provide rich failure diagnostics.

---

## Example Usage

```cpp
#include <gtest/gtest.h>

TEST(MathTest, CompareValues) {
    int a = 5, b = 10;
    EXPECT_LT(a, b) << "Expected a to be less than b";
    EXPECT_EQ(a + b, 15);
}

TEST(StringTest, CompareCStrings) {
    const char* str1 = "hello";
    const char* str2 = "hello";
    EXPECT_STREQ(str1, str2);
}

TEST(FloatingPointTest, ApproxComparison) {
    double val = 0.1 + 0.2;
    EXPECT_NEAR(val, 0.3, 1e-9);
}

TEST(ExceptionTest, ThrowsExpected) {
    EXPECT_THROW(ThrowingFunction(), std::runtime_error);
}

TEST(PredicateTest, CustomCheck) {
    auto IsPositive = [](int x) { return x > 0; };
    EXPECT_PRED1(IsPositive, 10);
}

TEST(DeathTest, DeathOnNull) {
    EXPECT_DEATH(FunctionThatCrashesOnNull(nullptr), "null pointer");
}
```

---

For more information, explore the full [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md), and related guides on writing effective tests.

---

<Callout title="Note">
This page focuses exclusively on GoogleTest assertions. For mocking assertions and expectations related to GoogleMock, see the [Mocking Reference](reference/mocking.md).
</Callout>

---

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/reference/assertions.md", "range": "0-485"}]} />

