---
title: "Test Results and Reporting"
description: "Describes mechanisms for gathering and reporting test outcomes, customizing event listeners, and interpreting failures. Includes details on TestPartResult, output formats, and hooks for integrating with external tools."
---

# Test Results and Reporting

This section details how GoogleTest gathers and reports test outcomes, allows customization of event listeners for capturing test lifecycle events, and provides mechanisms to interpret failures. Understanding these facilities empowers you to integrate GoogleTest outputs with your tools, customize output formatting, and inspect detailed test results programmatically.

---

## Overview of Test Result Reporting

GoogleTest structures test reports around the concepts of **test parts**, **tests**, **test suites**, and the entire **unit test program**. Test results are comprehensive and include detailed information for each assertion, test, and suite.

### TestPartResult

A **TestPartResult** represents the outcome of an individual test part such as an assertion or an explicit call to `FAIL()`, `ADD_FAILURE()`, or `SUCCEED()`. 

Each TestPartResult has:
- A **Type** that indicates success, non-fatal failure, fatal failure, or skip.
- The source file and line number where it occurred.
- A detailed message including the failure description.

You can query the status of a TestPartResult using methods like `passed()`, `failed()`, `fatally_failed()`, and `skipped()`.


### TestResult

Each individual test records a **TestResult** which aggregates all its TestPartResults and any user-supplied properties logged during the test.

Key aspects include:
- The number of assertions and their outcomes.
- The elapsed run time and start timestamp.
- Methods to check if the test passed, failed, or was skipped.
- Accessors for all underlying test part results and properties.

This allows you to analyze fine-grained test outcomes programmatically.

### TestInfo and TestSuite

- **TestInfo** contains metadata and results for a single test.
- **TestSuite** aggregates multiple TestInfo objects and captures suite-level results including setup/teardown failures.

The test suite tracks counts of passing, failing, skipped, and disabled tests, and records elapsed execution times.

### UnitTest

The **UnitTest** singleton represents the entire test program. It manages the collection of test suites, tracks global counts and times, and provides access to listeners for event handling.


## Event Listener API

GoogleTest provides an extensive **event listener API** to observe test execution events and customize reporting.

### TestEventListener Interface

This interface exposes methods for every significant event in test execution:
- Program start and end
- Test iteration start and end
- Environment setup/teardown start and end
- Test suite start and end
- Individual test start, disabled, and end
- Test assertion results (`OnTestPartResult`)

By implementing this interface, you can hook into the test run and react accordingly.

### EmptyTestEventListener

A convenient base class that implements all methods as no-ops, providing an easy way to override only the events you care about.

### Managing Event Listeners

You can access the global `TestEventListeners` list via:

```cpp
::testing::UnitTest::GetInstance()->listeners();
```

To customize output:
- Use `Append()` to add new listeners (GoogleTest takes ownership).
- Use `Release()` to remove and take ownership of existing listeners (e.g., the default console printer).

**Important:** To prevent mixed output, if you add a custom listener, remove the default result printer first.

Example snippet:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  auto& listeners = ::testing::UnitTest::GetInstance()->listeners();

  // Remove default console output.
  delete listeners.Release(listeners.default_result_printer());

  // Add custom listener.
  listeners.Append(new MyCustomListener());

  return RUN_ALL_TESTS();
}
```


## Output Formats

### Console Output

By default, GoogleTest uses the `PrettyUnitTestResultPrinter` to:
- Show per-test pass/fail status with colored markers
- List failures with file locations and messages
- Summarize successes, failures, and skipped tests

Alternate built-in printer is `BriefUnitTestResultPrinter` to print only failures.

### XML Output

GoogleTest can emit detailed XML test reports conforming loosely to the JUnit XML format.

- Enabled by setting `--gtest_output=xml[:path]`.
- If path is a directory, files are generated with executable-based unique names.
- XML includes `<testsuites>`, `<testsuite>`, and `<testcase>` elements with properties capturing counts, times, and failure details.

Example snippet from generated XML:

```xml
<testsuites tests="3" failures="1" errors="0" time="0.035" timestamp="2011-10-31T18:52:42" name="AllTests">
  <testsuite name="MathTest" tests="2" failures="1">
    <testcase name="Addition" file="test.cpp" line="1" status="run" time="0.007">
      <failure message="Value mismatch ..."/>
    </testcase>
    ...
  </testsuite>
  ...
</testsuites>
```

### JSON Output

- Enabled via `--gtest_output=json[:path]` flag.
- Provides a hierarchical JSON report mirroring XML content.
- Includes test suite, tests, failure messages, timing, and properties.

### Streaming Output

On supported platforms, GoogleTest can stream test results in string form to a remote host and port, configured via `--gtest_stream_result_to=host:port`.


## Inspecting Results Programmatically

You can query the current test program state through the **UnitTest** singleton.

Example to get the currently running test name:

```cpp
const ::testing::TestInfo* current_test_info =
    ::testing::UnitTest::GetInstance()->current_test_info();

if (current_test_info != nullptr) {
  std::cout << "Currently running test: "
            << current_test_info->test_suite_name() << "."
            << current_test_info->name() << std::endl;
}
```

You can enumerate test suites and tests, and access their `TestResult` objects to get detailed failure information, time, and properties.


## Customizing Test Properties

Within tests or fixtures, you can log custom key-value properties using:

```cpp
::testing::Test::RecordProperty("key", "value");
```

These keys must be unique and not conflict with reserved XML attributes (
`name`, `status`, `time`, `classname`, `type_param`, `value_param`).

Recorded properties are included in XML and JSON reports, offering a way to record metadata or metrics.


## Handling Failures and Stack Traces

When an assertion fails, GoogleTest captures failure information:
- Failure message
- Source file and line
- Optional OS-level stack trace (configurable depth via flag `--gtest_stack_trace_depth`)

This information is accessible through TestPartResult and presented in output and reports to simplify debugging.


## Important Flags Related to Reporting

- `--gtest_list_tests` : Lists all test names without running them.
- `--gtest_output` : Controls output format (`xml`, `json`) and output location.
- `--gtest_brief` : Suppresses passing test messages; show only failures.
- `--gtest_print_time` : Toggle printing elapsed time per test.
- `--gtest_also_run_disabled_tests` : Includes disabled tests in runs and reports.
- `--gtest_filter` : Run subset of tests, affects which are reported.


## Common Pitfalls and Troubleshooting

- If no tests run, GoogleTest can emit warnings about missing tests or filters matching no tests.
- Conflicting event listeners may cause duplicated or unintelligible output; remove defaults if adding custom.
- Failing to record properties with valid keys results in warnings.
- The XML and JSON reporting require filesystem support enabled.


## Example: Adding a Custom Event Listener

```cpp
class MinimalistPrinter : public ::testing::EmptyTestEventListener {
 public:
  void OnTestStart(const ::testing::TestInfo& test_info) override {
    printf("*** Test %s.%s starting.\n", test_info.test_suite_name(), test_info.name());
  }

  void OnTestPartResult(const ::testing::TestPartResult& result) override {
    printf("%s in %s:%d\n%s\n",
      result.failed() ? "*** Failure" : "Success",
      result.file_name(),
      result.line_number(),
      result.summary());
  }

  void OnTestEnd(const ::testing::TestInfo& test_info) override {
    printf("*** Test %s.%s ending.\n", test_info.test_suite_name(), test_info.name());
  }
};

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  auto& listeners = ::testing::UnitTest::GetInstance()->listeners();

  // Remove default printer.
  delete listeners.Release(listeners.default_result_printer());

  // Add custom listener.
  listeners.Append(new MinimalistPrinter());
  return RUN_ALL_TESTS();
}
```

This example demonstrates how to replace the default console output with a minimalist custom listener.


---

## References

- [Test Part Result](reference/testing.md#TestPartResult)
- [Test Result](reference/testing.md#TestResult)
- [Test Event Listener API](reference/testing.md#TestEventListener)
- [Writing Custom Event Listeners](docs/advanced.md#extending-googletest-by-handling-test-events)
- [Running Tests and Output Options](docs/advanced.md#running-test-programs-advanced-options)

---

## Troubleshooting

- If expected test failures don’t appear in reports, check that tests matched your filters and that your event listeners are configured properly.
- If XML/JSON files aren’t generated, verify that `--gtest_output` is set correctly and your filesystem permissions.
- For detailed stack traces, adjust `--gtest_stack_trace_depth` flag.


---

By mastering test results and reporting in GoogleTest, you can integrate unit testing outputs seamlessly into your CI tools, debug failures efficiently, and customize the reporting to your needs.

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googletest/include/gtest/gtest-test-part.h", "range": "1-130"},{"path": "googletest/include/gtest/gtest.h", "range": "320-890"},{"path": "googletest/src/gtest.cc", "range": "200-1110"}]} />
