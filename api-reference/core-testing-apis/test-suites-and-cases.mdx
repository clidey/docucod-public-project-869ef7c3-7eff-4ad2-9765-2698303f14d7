---
title: "Test Suites and Test Cases"
description: "Defines the API for declaring and organizing test suites and test cases in GoogleTest. This includes the macros and patterns to set up test fixtures, group individual tests, and establish test hierarchies, forming the backbone of all GoogleTest workflows."
---

# Test Suites and Test Cases

This page defines the core API for declaring and organizing test suites and test cases in GoogleTest. It lays out the macros and patterns you use to set up test fixtures, group individual tests, and establish hierarchical relationships among tests. Understanding this backbone is essential for mastering all GoogleTest workflows.

---

## 1. Overview of Test Suites and Test Cases

GoogleTest structures tests primarily with **test suites** and **test cases** (now referred to as test suites). Each test suite groups together logically related tests, reflecting the organization of the code under test. Individual tests reside within these suites. This organization aids in clarity, maintainability, and selective test execution.

At the most basic level, a test case (or test) exercises a particular program path with specific input values and assesses the correctness of the results.

### Goals
- Group related tests for easier management
- Provide shared setup/teardown for collections of tests via *test fixtures*
- Enable isolated, repeatable, and maintainable tests

---

## 2. Defining Tests: The Macros

### 2.1 `TEST(TestSuiteName, TestName)`
- Defines a single, independent test without shared fixture data.
- Both `TestSuiteName` and `TestName` must be valid C++ identifiers without underscores.
- The test function contains your test logic and assertions.

**Example:**
```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### 2.2 `TEST_F(TestFixtureName, TestName)`
- Defines a test using a *test fixture* class named `TestFixtureName`.
- Your fixture class inherits from `testing::Test`.
- Provides shared objects, setup (`SetUp()`), and teardown (`TearDown()`) for multiple tests.
- Each test runs with a fresh fixture instance, ensuring independence.

**Example:**
```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
  }
  Queue<int> q1_;
};

TEST_F(QueueTest, DequeueWorks) {
  int* n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

---

## 3. Organizing Test Suites and Fixtures

### 3.1 Test Suites
- Use test suites to logically group tests.
- GoogleTest groups test runs and outputs results based on these suites.
- Tests in the same suite can share fixtures.

### 3.2 Test Fixtures
- Classes inheriting from `testing::Test` that encapsulate common setup and teardown.
- Provides:
  - Member variables for shared test data.
  - `SetUp()` and `TearDown()` functions to initialize and clean up after each test.
- GoogleTest creates a new fixture instance for each test to maintain isolation.

### 3.3 Value-Parameterized Tests (Brief Mention)
- Use `TEST_P` and related macros for running a test multiple times with different parameters.
- Organized similarly within suites, but with parameter values.

---

## 4. Example Workflow

<Steps>
<Step title="Define a Test Fixture">Define a class inheriting from `testing::Test`, declare shared members and override `SetUp()` if needed.</Step>
<Step title="Write Tests Using the Fixture">Use `TEST_F` to write multiple tests that reuse the fixture.</Step>
<Step title="Run the Tests">Use `RUN_ALL_TESTS()` to execute all registered tests; GoogleTest discovers and runs them automatically.</Step>
</Steps>

**Outcome:** Easy grouping and reuse, better test isolation, and clear, organized test code.

---

## 5. Naming Conventions and Restrictions

### Essential Rules
- Avoid underscores (`_`) in test suite and test names to prevent naming conflicts and reserved symbol issues.
- Both suite and test names must be valid C++ identifiers (start with alphabet or underscore but avoid reserved patterns).

### Why?
- GoogleTest transforms these names into class names for runtime registration.
- Underscores could lead to duplicate or conflicting generated class names.

---

## 6. Test Execution and Registration

- Tests defined with `TEST()` and `TEST_F()` macros automatically register themselves with GoogleTest's internal test registry.
- Running `RUN_ALL_TESTS()` executes *all* registered tests.
- The `main()` function typically initializes GoogleTest and invokes `RUN_ALL_TESTS()`.

---

## 7. Using Test Fixtures Effectively

### Setting Up Shared Data
Use the constructor or `SetUp()` method to initialize common objects. Prefer constructors when possible.

### Cleaning Up
Override destructor or preferably `TearDown()` for cleanup.

### Instance Per Test
GoogleTest creates a new fixture instance per test, guaranteeing tests do not affect each other.

### Best Practices
- Use `ASSERT_*` for assertions that must abort the test immediately.
- Use `EXPECT_*` to capture multiple failure conditions in one test run.

---

## 8. Advanced Test Declarations

### Typed Tests
- Use when you want to test template classes or generic code with multiple types.
- Use `TYPED_TEST_SUITE` and `TYPED_TEST`.

### Value-Parameterized Tests
- Use when tests need to run with different values rather than types.
- Use `TEST_P` and `INSTANTIATE_TEST_SUITE_P`.

---

## 9. Troubleshooting Common Issues

### Test Not Running
- Ensure `TEST()` or `TEST_F()` macros are correctly used.
- Verify the test names contain no invalid characters.

### Fixture Errors
- Confirm fixture class has a default constructor.
- Check `SetUp()` and `TearDown()` spelling and signatures.

### Naming Conflicts
- Avoid duplicate test suite and test names.
- Avoid underscore `_` in names.

---

## 10. Summary

The test suites and test cases API forms the foundation of GoogleTest's testing workflow. By structuring your tests into suites and creating reusable fixtures, you organize your tests logically and enable shared setup code while maintaining test isolation. Clear naming and proper use of `TEST()`, `TEST_F()`, and related macros allow GoogleTest to discover, register, and execute your tests reliably.

---

## References & Further Reading

- [GoogleTest Primer](../primer.md) — Comprehensive introduction to writing tests.
- [Organizing and Running Tests Guide](../guides/core-testing-workflows/organizing-and-running-tests.mdx) — How to group, run, and filter tests.
- [Test Execution and Discovery Reference](../docs/reference/testing.md#test-discovery) — Details on how tests are registered and run.
- [Typed and Parameterized Tests](../docs/reference/testing.md#typed-tests) — Extend your tests with type- or value-parameterization.
- [Troubleshooting Common Issues](../getting-started/first-test-validation/troubleshooting-common-issues.mdx) — Diagnosis and solutions for common problems.

---

## Sample Minimal Test Program

```cpp
#include <gtest/gtest.h>

// Simple test without fixture
TEST(MathTest, HandlesZeroInput) {
  EXPECT_EQ(0, 0);
}

// Test fixture example
class QueueTest : public ::testing::Test {
 protected:
  void SetUp() override {
    q_.Enqueue(1);
  }
  Queue<int> q_;
};

TEST_F(QueueTest, DequeueReturnsElement) {
  int* n = q_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---