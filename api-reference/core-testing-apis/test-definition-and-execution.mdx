---
title: "Test Definition and Execution"
description: "Learn how to define, organize, and execute tests and test suites using GoogleTest. This page details the fundamental macros for declaring tests, fixtures, and controlling test flow, as well as main entry points for running your tests. Includes practical usage patterns and links to the main API."
---

# Test Definition and Execution

Discover how to define, organize, and run your tests and test suites using GoogleTest’s rich macro system and control flow features. This guide helps you get started with the key building blocks for test creation, managing test fixtures, handling multiple tests, and executing them efficiently.

---

## 1. Writing Tests with GoogleTest Macros

GoogleTest uses simple, expressive macros to declare tests, test fixtures, and parameterized tests. These macros automatically register your tests to be discovered and executed by the framework.

### 1.1. Simple Tests

Use the `TEST(TestSuiteName, TestName)` macro to declare an individual test:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

- The first argument is the test suite name, grouping related tests.
- The second argument is the test name, describing the specific behavior.
- Test names and suite names must be valid C++ identifiers without underscores.

Each test is an independent function and the combination of test suite and test name forms the unique qualified name.

### 1.2. Test Fixtures

For tests that share common setup or teardown code, define a test fixture class derived from `testing::Test`:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Initialize queues
    q1_.Enqueue(1);
  }

  Queue<int> q0_;
  Queue<int> q1_;
};
```

Write tests using `TEST_F()` to access fixture members:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}
```

GoogleTest creates a fresh fixture object for each test, ensuring complete isolation.

### 1.3. Parameterized Tests

GoogleTest supports value-parameterized tests that run the same logic with different input values.

Define a fixture deriving from `testing::TestWithParam<T>`:

```cpp
class FooTest : public testing::TestWithParam<std::string> {};
```

Use `TEST_P()` to define tests:

```cpp
TEST_P(FooTest, HandlesArguments) {
  auto param = GetParam();
  EXPECT_TRUE(Process(param));
}
```

Instantiate the test suite with parameters:

```cpp
INSTANTIATE_TEST_SUITE_P(ExampleInstantiation, FooTest,
                         testing::Values("a", "b", "c"));
```

This runs `HandlesArguments` test for each of the parameters provided.

### 1.4. Typed and Type-Parameterized Tests

To test multiple implementations or types against the same logic, use typed and type-parameterized tests:

- **Typed Tests:** Define a fixture template and associate it with a type list.
- **Type-Parameterized Tests:** Define the fixture and test patterns separately, then register and instantiate them.

Example of typed tests:

```cpp
template <typename T>
class MyTypedTest : public testing::Test { ... };

using MyTypes = testing::Types<int, double, char>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);

TYPED_TEST(MyTypedTest, DoesSomething) {
  TypeParam value = ...;
  EXPECT_TRUE(Validate(value));
}
```

See advanced documentation for full details.

---

## 2. Execution and Control Flow

### 2.1. Running Tests

After defining your tests, the central entry point to execute them is:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` parses GoogleTest-related command-line flags.
- `RUN_ALL_TESTS()` runs all registered tests and returns `0` on success.

Use the test program's command-line options or environment variables to filter, repeat, or list tests without modifying your code.

### 2.2. Test Sorting and Filtering

- Run specific tests using `--gtest_filter=TestSuiteName.TestName`.
- Use wildcards and negative filters, e.g. `--gtest_filter=* -Debug*` excludes debug tests.
- Disabled tests prefixed with `DISABLED_` are skipped unless overridden with `--gtest_also_run_disabled_tests`.

### 2.3. Skipping Tests at Runtime

Use the `GTEST_SKIP()` macro to skip tests during execution based on runtime conditions:

```cpp
TEST(MySuite, ConditionalSkip) {
  if (!IsEnvironmentReady()) {
    GTEST_SKIP() << "Skipping due to missing environment";
  }
  // Test code
}
```

---

## 3. Organizing Tests

### 3.1. Test Suites and Fixtures

Test suites group related tests and optionally use fixtures to share data or code between them. Each test fixture corresponds to a test suite when using `TEST_F`.

### 3.2. Naming Conventions

- Avoid underscores in test suite and test names to prevent internal naming conflicts.
- Use descriptive suite and test names to clearly communicate intent.

### 3.3. Managing Shared Resources

- Use `SetUpTestSuite()` and `TearDownTestSuite()` static methods in fixtures for expensive shared setup/teardown.
- Be cautious about test order dependencies; tests run in undefined order.

---

## 4. Working with Test Information

GoogleTest provides APIs to access metadata about running tests, useful for dynamic behavior inside tests:

```cpp
const testing::TestInfo* info = testing::UnitTest::GetInstance()->current_test_info();
if (info != nullptr) {
  std::cout << "Running test: " << info->test_suite_name() << "." << info->name() << std::endl;
}
```

This aids in logging, diagnostics, or test-specific setups.

---

## 5. Best Practices and Pitfalls

- Always use `EXPECT_*` assertions unless stopping the test early is necessary (`ASSERT_*`).
- Ensure your test fixtures have default constructors.
- Avoid side effects that leak out of tests, rely on isolated fixture instances.
- When writing parameterized or typed tests, fully instantiate the test suites to avoid silent missing tests.
- Use `SCOPED_TRACE` for adding context information when multiple assertions or helper functions are involved.

---

## 6. Further Links and Next Steps

- [Assertions and Failure Handling](reference/assertions.md) for verifying test conditions.
- [Parameterized and Typed Tests](advanced.md#value-parameterized-tests)
- [Mocking with GoogleMock](guides/getting-started/googlemock-intro) to mock dependencies.
- [Advanced GoogleTest Topics](advanced.md) to deepen your mastery.

---

## 7. Summary Flow Diagram

```mermaid
graph TD
  Start([Write Test Code]) -->|Use TEST, TEST_F| DefineTests
  DefineTests --> RegisterTests{Tests Registered?}
  RegisterTests -- No --> FixDefs
  RegisterTests -- Yes --> InitGoogleTest[InitGoogleTest(argc, argv)]
  InitGoogleTest --> SetFlags[Parse Command-Line Flags]
  SetFlags --> RunAllTests[RUN_ALL_TESTS()]
  RunAllTests --> TestExecution[Execute Tests]
  TestExecution --> ReportResults[Report Pass/Fail]
  ReportResults --> End([Program End])
```

---

This overview equips you with the foundational knowledge to write, organize, and run tests using GoogleTest’s flexible macros and intuitive APIs. Embrace these practices to develop high-quality, maintainable C++ test suites with confidence and efficiency.
