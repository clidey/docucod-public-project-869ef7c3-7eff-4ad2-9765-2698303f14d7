---
title: "Running and Configuring Tests"
description: "Instructions and reference details for executing tests, configuring run parameters, and integrating with build tools or CI systems. Covers options for controlling test selection, execution order, parallelism, and environment variables."
---

# Running and Configuring Tests

This page is your essential guide to executing your GoogleTest and GoogleMock test suites efficiently, configuring test execution parameters, and integrating testing into your build and CI workflows. Whether you need to run all your tests, select a subset, control concurrency, or fine-tune environment variables, this documentation walks you through the necessary steps and options to achieve those goals confidently.

---

## 1. Running Your Tests

### Basic Test Execution

After writing your tests using the `TEST()`, `TEST_F()`, or `TEST_P()` macros, you execute them by calling the `RUN_ALL_TESTS()` macro in your `main()` function. This call runs **all** registered tests linked into your binary and yields the overall success or failure status.

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` parses command-line flags that control test behavior before execution.
- `RUN_ALL_TESTS()` executes every test, returning `0` if all tests pass, or `1` if any test fails.

### Running Tests Without `main()`

If you do not want to write your own `main()`, link against the `gtest_main` (or `gmock_main` for GoogleMock) library, which provides a default `main()` implementation.

### Isolating and Running Specific Tests

Often you want to run a subset of tests. Use the `--gtest_filter` flag to specify which tests to run by name, using patterns:

```sh
./my_test_binary --gtest_filter=FactorialTest.*
```

This runs all tests in the `FactorialTest` suite. You can include or exclude tests with more complex patterns:

```sh
./my_test_binary --gtest_filter=FactorialTest.HandlesZeroInput:-FactorialTest.HandlesPositiveInput
```

This runs only the `HandlesZeroInput` test, excluding `HandlesPositiveInput`.


## 2. Configuring Test Runs with Flags

GoogleTest supports extensive command-line flags to control test execution. Below are key flags to customize your test behavior.

### Essential Flags

| Flag                      | Description                                         |
| ------------------------- | ------------------------------------------------- |
| `--gtest_filter`          | Run tests matching this filter (e.g., `TestSuite.TestName`). Supports wildcards `*` and exclusion `-` |
| `--gtest_repeat=N`        | Repeat tests N times
| `--gtest_shuffle`         | Randomizes the order tests are run
| `--gtest_random_seed=N`   | Seed used by `shuffle` for reproducibility
| `--gtest_break_on_failure`| Break into debugger on first failure
| `--gtest_catch_exceptions`| Catch exceptions, use `false` to disable

### Output Formatting

| Flag                     | Description                                   |
| ------------------------ | --------------------------------------------- |
| `--gtest_output=xml[:path]` | Generate XML report at path, useful for CI systems |
| `--gtest_color=yes|no|auto` | Control colored output in the console

### Advanced Control

| Flag                              | Description                                 |
| --------------------------------- | ------------------------------------------- |
| `--gtest_throw_on_failure`        | Throw exceptions on test failures (rarely used) |
| `--gtest_internal_test_filter`    | Internal filtering mechanism

<Check>
Always use `testing::InitGoogleTest(&argc, argv);` in `main()` to enable these flags.
</Check>

## 3. Controlling Execution Order and Parallelism

GoogleTest runs tests sequentially by default. For large test suites, parallelization can greatly speed up execution. Here’s how to approach ordering and parallelism:

### Shuffling Test Order

Use `--gtest_shuffle` to randomize test execution order. This helps uncover accidental dependencies between tests.

### Controlling Test Repetition

Repeat tests to detect flaky tests statistically:

```sh
./my_test_binary --gtest_repeat=100
```

### Parallel Test Execution

GoogleTest itself does not currently provide built-in parallel test execution. Consider integrating with external test runners or tools such as:

- Build systems (e.g., Bazel) that support parallel test execution
- Third-party runners that split tests based on names or files

### Execution Order

Tests within a suite run in registration order. Use test dependencies and control mechanisms sparingly; it is better to design independent tests.

## 4. Environment Variable Configuration

Sometimes, you want to configure behavior via environment variables instead of (or in addition to) command-line flags. GoogleTest honors several environment variables:

| Variable                | Description                                |
| ----------------------- | ------------------------------------------ |
| `GTEST_FILTER`          | Equivalent to `--gtest_filter`             |
| `GTEST_REPEAT`          | Equivalent to `--gtest_repeat`             |
| `GTEST_SHUFFLE`         | Equivalent to `--gtest_shuffle`            |
| `GTEST_COLOR`           | Equivalent to `--gtest_color`              |
| `GTEST_BREAK_ON_FAILURE`| Equivalent to `--gtest_break_on_failure`  |

These variables can be useful in CI environments or scripts where adding flags is complicated.

## 5. Integrating Tests into Build Systems and CI

To make the most of GoogleTest, you want to integrate your test execution into your build and CI/CD pipelines.

### Build System Integration

GoogleTest works seamlessly with popular C++ build systems such as CMake and Bazel.

- With **CMake**, typically you add GoogleTest as a subdirectory or find it via `find_package(GTest)`. Define test targets and enable CTest to run tests.

- For **Bazel**, GoogleTest comes with build rules that handle compilation and test execution.

Remember to pass test executables to your build system's test runner components.

### Continuous Integration Setup

In CI, you want to:

- Use `--gtest_output=xml` to generate an XML test report consumable by CI services (Jenkins, GitHub Actions, GitLab, etc.).

- Use `--gtest_filter` to run subsets when needed.

- Monitor test repeatability and flakiness using `--gtest_repeat`.

- Adjust verbosity with `--gtest_verbose` if troubleshooting.

<Note>
Consult the [Integrating with CI/CD Pipelines](https://github.com/google/googletest/tree/main/docs/guides/integration-scaling/ci_integration.md) guide for detailed pipeline samples.
</Note>

## 6. Controlling GoogleMock-Related Test Execution

GoogleMock builds on GoogleTest and introduces the following considerations for running tests:

- Initialize GoogleMock instead of GoogleTest with `testing::InitGoogleMock(&argc, argv);`

- Use the same `RUN_ALL_TESTS()` macro to execute all registered tests.

- GoogleMock supports the same flags and environment variables as GoogleTest.

Example main for GoogleMock:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

## 7. Troubleshooting Common Test Execution Issues

### Tests Not Running or Detected

- Ensure tests are linked into your executable.
- Verify proper macro usage (`TEST()`, `TEST_F()`, `TEST_P()`).
- Always call `InitGoogleTest()` or `InitGoogleMock()`.

### Tests Not Responding to Filters

- Verify your filter patterns.
- Use `--gtest_list_tests` to list all test names.

### Debugging Failures

- Use `--gtest_break_on_failure` to launch debugger on first failure.

- Increase verbosity using `--gtest_verbose=info` for detailed logs.

### Flaky Tests

- Use `--gtest_repeat` to find intermittent failures.

- Design tests to be independent and avoid shared global state.

## 8. Example Test Execution Commands

```bash
# Run all tests
./my_tests

# Run all tests with verbose output
./my_tests --gtest_verbose=info

# Run only tests in the FactorialTest suite
./my_tests --gtest_filter=FactorialTest.*

# Run a specific test
./my_tests --gtest_filter=FactorialTest.HandlesZeroInput

# Repeat all tests 10 times
./my_tests --gtest_repeat=10

# Generate XML report
./my_tests --gtest_output=xml:report.xml

# Run tests with colored output forcibly enabled
./my_tests --gtest_color=yes

# Shuffle tests with a fixed seed
./my_tests --gtest_shuffle --gtest_random_seed=42
```

---

## Further Reading and Resources

- [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md) — Start here to understand the basics of test writing and execution.
- [Building and Running Tests Guide](https://github.com/google/googletest/tree/main/docs/guides/getting-started/build_and_run.md) — Detailed instructions on build and run workflows.
- [Integrating with CI/CD Pipelines](https://github.com/google/googletest/tree/main/docs/guides/integration-scaling/ci_integration.md) — Best practices for pipeline automation.
- [Common Setup Issues](https://github.com/google/googletest/tree/main/docs/getting-started/first-experience/common-setup-issues.md) — Troubleshooting setup difficulties.

---

<AccordionGroup title="Command Line Flags Quick Reference">
<Accordion title="Filtering Tests">
`--gtest_filter=TestSuiteName.TestName` - Run matching tests only
</Accordion>
<Accordion title="Repeating Tests">
`--gtest_repeat=N` - Repeat tests N times
</Accordion>
<Accordion title="Output Formatting">
`--gtest_output=xml[:path]` - Write XML report
</Accordion>
<Accordion title="Miscellaneous">
`--gtest_shuffle` - Shuffle test order
`--gtest_break_on_failure` - Break into debugger on failure
</Accordion>
</AccordionGroup>