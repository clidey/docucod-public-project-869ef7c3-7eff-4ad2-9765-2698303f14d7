---
title: "Test Results and Reporting"
description: "Describes how GoogleTest captures, structures, and reports test results—covering AssertionResult, test-part results, and result array APIs. Outlines mechanisms for reporting custom messages and test failure details."
---

# Test Results and Reporting

GoogleTest provides a comprehensive mechanism to capture, structure, and report test results in a detailed and user-friendly manner. This documentation explains the core classes and APIs involved in representing test outcomes, including `AssertionResult`, test-part results via `TestPartResult`, arrays of results, and facilities for logging custom messages and detailed failure information.

---

## Overview of Test Results

When you write tests with GoogleTest, each test produces a result based on assertions made during its execution. GoogleTest captures this information in a layered structure:

- **AssertionResult**: Represents the success or failure of an individual assertion.
- **TestPartResult**: Represents the result of a single test part, which could be an assertion or a macro like `FAIL()` or `ADD_FAILURE()`.
- **TestPartResultArray**: Contains multiple `TestPartResult` instances that occurred during a test.
- **TestResult**: Aggregates all `TestPartResult` objects and test properties for a single test.

This hierarchical capture allows GoogleTest to deliver detailed diagnostics for your tests, including where failures happened, what message was associated, and whether the failure was fatal or nonfatal.

---

## AssertionResult — Indicating Success or Failure

`testing::AssertionResult` is the fundamental class used internally and sometimes exposed to users for indicating whether an assertion succeeded or failed.

- Use `AssertionSuccess()` to represent a successful assertion.
- Use `AssertionFailure()` to represent a failure. You can stream additional failure information into it for richer messages:

```cpp
testing::AssertionResult MyCustomCheck(int value) {
  if (value % 2 == 0) {
    return testing::AssertionSuccess();
  } else {
    return testing::AssertionFailure() << "Value " << value << " is not even";
  }
}
```

When an assertion fails, `AssertionResult` carries a message retrievable by the `message()` method.

---

## TestPartResult — Capturing Individual Assertion or Failure Outcomes

`testing::TestPartResult` encapsulates the result of a test part, such as an assertion macro or explicit calls like `FAIL()`, `ADD_FAILURE()`, or `SUCCEED()`. This class is copyable and stores:

- The **type** of result, which may be one of:
  - `kSuccess` (assertion succeeded or `SUCCEED()` called)
  - `kNonFatalFailure` (nonfatal failure like `EXPECT_*` failure or `ADD_FAILURE()`)
  - `kFatalFailure` (fatal failure like `ASSERT_*` or `FAIL()`)
  - `kSkip` (test or part skipped via `GTEST_SKIP()`)

- The **source file name** and **line number** where the test part occurred.
- A **summary** string extracting the failure message without stack traces.
- The full **message** including any stack trace or additional detail.

#### Checking TestPartResult States

These helper methods clarify the status:

- `passed()` returns true if the test part succeeded.
- `failed()` is true if the test part was fatal or nonfatal failure.
- `fatally_failed()` is true only for fatal failures.
- `nonfatally_failed()` is true only for nonfatal failures.
- `skipped()` returns true if the test part was skipped.

#### Example of Creating a TestPartResult

```cpp
TestPartResult failure(
    TestPartResult::kFatalFailure, "file.cc", 123, "Expected true but was false");
if (failure.failed()) {
  std::cout << failure.file_name() << ":" << failure.line_number() << " "
            << failure.summary() << std::endl;
}
```

---

## TestPartResultArray — Aggregating Multiple Results

During a single test case, many assertions can fire. GoogleTest collects all these `TestPartResult` instances into a `TestPartResultArray`. This array provides:

- `size()` to get the number of recorded results.
- `Append()` to add a new result.
- `GetTestPartResult(int index)` to access each individual result by index.

Index values are zero-based, and accessing out-of-bounds indices will abort the program.

#### Example Usage

```cpp
TestPartResultArray results;
results.Append(TestPartResult(TestPartResult::kNonFatalFailure, "foo.cc", 42, "Mismatch detected"));
for (int i = 0; i < results.size(); ++i) {
  const TestPartResult& part = results.GetTestPartResult(i);
  std::cout << part.file_name() << ":" << part.line_number() << " " << part.summary() << std::endl;
}
```

---

## TestResult — Summary of a Single Test Run

A `testing::TestResult` holds all outcomes related to a single test method. It contains:

- The collection of all `TestPartResult` objects for the test.
- The elapsed time for the test execution.
- Testing properties recorded by users.

### Key Methods

- `total_part_count()` returns the total number of test part results recorded.
- `Passed()`, `Failed()`, `Skipped()` indicate the overall state of the test.
- `HasFatalFailure()`, `HasNonfatalFailure()` indicate failure modes.
- `GetTestPartResult(int index)` returns the specific test part result.
- `test_property_count()` and `GetTestProperty(int index)` provide access to user-recorded properties.
- `RecordProperty()` allows adding or replacing properties associated with the test.

### Recording Custom Test Properties

You can associate custom key-value pairs with tests using `RecordProperty()`, which helps report additional information in XML or JSON output.

Example:

```cpp
// Record maximum number of widgets used in this test.
RecordProperty("MaximumWidgets", std::to_string(max_widgets));
```

GoogleTest ensures that property keys do not clash with reserved XML attribute names such as `name`, `status`, `time`, etc.

### Thread Safety

`TestResult::RecordProperty()` is thread-safe and may be called concurrently.

---

## Streaming and Reporting Mechanisms

GoogleTest emits test results using a layered event listener API, which internally aggregates `TestPartResult` instances via reporters.

By default, GoogleTest uses:

- A **Pretty Unit Test Result Printer** that outputs test progress and failures to the console, using colors and structured formatting.
- An **XML or JSON Result Printer** if `--gtest_output=xml` or `json` flag is specified, generating detailed reports consumable by CI systems.
- A **StreamingListener**, when configured with `--gtest_stream_result_to=host:port`, streams real-time test results to a server.

The reporting APIs ensure that test outcomes, including failures, skips, and user messages, appear in a coherent, useful manner.

---

## Using Failures and Custom Messages

GoogleTest assertions, such as `EXPECT_*`, support attaching custom messages using the stream operator `<<`. When assertions fail, these messages are included in the corresponding `TestPartResult`.

Example:

```cpp
EXPECT_EQ(result, expected) << "Computation returned unexpected value at iteration " << i;
```

In addition, you can generate explicit failures not bound to expressions using `FAIL()` or `ADD_FAILURE()` macros. These failures are also captured in `TestPartResult` instances with the appropriate failure type.

---

## Skipping Tests

Tests can be skipped programmatically using `GTEST_SKIP()`. A skip generates a `TestPartResult` with type `kSkip`.

```cpp
TEST(MyTestSuite, SkipExample) {
  if (!IsNetworkAvailable()) {
    GTEST_SKIP() << "Skipping test as network is down";
  }
  // Normal test code follows
}
```

Skipped tests are reported separately and do not count as failures.

---

## Troubleshooting and Common Pitfalls

- **Accessing `TestPartResult` by invalid index**: Calling `GetTestPartResult()` outside valid bounds aborts the program.
- **Recording reserved property keys**: Attempting to record properties with names like `name`, `status`, `time`, or `classname` results in non-fatal failures.
- **Streaming special characters in messages**: The framework properly escapes special characters like `=`, `&`, `%`, and new lines when streaming results; failure to use proper escaping may cause output issues.

---

## Summary Diagram of Test Result Flow

```mermaid
flowchart TD
  A[Test Execution Starts] --> B[Assertions and Test Macros]
  B --> C{Assertion Outcome}
  C -->|Success| D[TestPartResult(kSuccess)]
  C -->|Nonfatal Failure| E[TestPartResult(kNonFatalFailure)]
  C -->|Fatal Failure| F[TestPartResult(kFatalFailure)]
  C -->|Skip| G[TestPartResult(kSkip)]
  D & E & F & G --> H[TestPartResultArray Append]
  H --> I[TestResult Aggregation]
  I --> J[Event Listeners Report Results]
  J --> K[Console, XML/JSON, Streaming Output]
```

This flow captures how assertions generate detailed outcomes that propagate into the test result structure and finally reach various output mechanisms.

---

## Related Classes and APIs

- [`testing::AssertionResult`](reference/testing.md#AssertionResult): The core class representing assertion success or failure.
- [`testing::TestPartResult`](reference/testing.md#TestPartResult): Represents outcomes of individual test parts, including assertion failures or skips.
- [`testing::TestResult`](reference/testing.md#TestResult): Aggregates results for a single test method.
- [`testing::Test`](reference/testing.md#Test): The base class for all tests, which manages test lifecycle and results.
- [`testing::TestEventListener`](reference/testing.md#TestEventListener): Interface to hook into test execution events and customize reporting.

---

## References

- [Assertions Reference](reference/assertions.md) — Detailed behaviors of assertion macros producing results.
- [Testing Reference](reference/testing.md) — Descriptions of core testing classes.
- [Advanced Topics: Logging Additional Information](docs/advanced.md#logging-additional-information) — Using `RecordProperty` and other reporting features.
- [Using Event Listeners](docs/advanced.md#extending-googletest-by-handling-test-events) — Customize how results are reported through listeners.

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googletest/include/gtest/gtest-test-part.h","range": "1-120"},{"path": "googletest/src/gtest.cc","range": "200-600"},{"path": "docs/reference/testing.md","range": "1-350"}]} />