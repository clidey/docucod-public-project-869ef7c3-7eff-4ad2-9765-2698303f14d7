---
title: "Assertions API"
description: "Detailed documentation on GoogleTest's assertion macros and functions, covering equality, inequality, exception, and fatal vs non-fatal assertions. Includes code samples to illustrate proper usage and nuanced behaviors."
---

# Assertions API Reference

This page provides detailed documentation on GoogleTest's assertion macros and functions, enabling you to write robust tests by verifying conditions in your code. The assertions API covers equality and inequality checks, exception testing, and the important distinction between fatal and non-fatal assertions. Throughout, you will find code examples illustrating proper usage and subtle behaviors to help you write clearer and more effective tests.

---

## 1. Overview of Assertions in GoogleTest

GoogleTest's assertions allow your tests to check conditions and report test results accordingly. They form the core mechanism for determining whether your code behaves as expected during testing.

There are two main types of assertions:

- **Fatal Assertions:** When these fail, they immediately abort the current function, preventing subsequent test code from executing.
- **Non-Fatal Assertions:** These report failure but allow the test function to continue running.

Choosing the appropriate assertion type helps you balance test thoroughness with readability and diagnosis of issues.

### Key Intent
- Verify values precisely, from simple equality to complex conditions.
- Check whether code throws expected exceptions.
- Control test flow on assertion failures using fatal vs non-fatal checks.

---

## 2. Fundamental Assertion Macros

The assertions API provides macros structured around common verification needs.

### 2.1 Equality and Inequality

- `EXPECT_EQ(val1, val2);`
- `ASSERT_EQ(val1, val2);`

Check whether two expressions are equal (`operator==`). `EXPECT_` continues the test on failure, while `ASSERT_` aborts.

Similarly:

- `EXPECT_NE(val1, val2);`
- `ASSERT_NE(val1, val2);`

Check inequality.

#### Example
```cpp
TEST(MathTest, SumIsCorrect) {
  int result = Sum(2, 3);
  EXPECT_EQ(result, 5); // Will report failure but continue
  ASSERT_NE(result, 0); // Aborts test if failed
}
```


### 2.2 Other Comparison Assertions

- `EXPECT_LT(a, b);`, `ASSERT_LT(a, b);` — less than
- `EXPECT_LE(a, b);`, `ASSERT_LE(a, b);` — less than or equal
- `EXPECT_GT(a, b);`, `ASSERT_GT(a, b);` — greater than
- `EXPECT_GE(a, b);`, `ASSERT_GE(a, b);` — greater than or equal

Use these to express meaningful relational expectations.

### 2.3 Boolean Assertions

- `EXPECT_TRUE(condition);`
- `ASSERT_TRUE(condition);`
- `EXPECT_FALSE(condition);`
- `ASSERT_FALSE(condition);`

Verify conditions that should evaluate to `true` or `false` explicitly.

---

## 3. Exception Assertions

Test code that is expected to throw or not throw exceptions.

- `EXPECT_THROW(statement, ExceptionType);`
- `ASSERT_THROW(statement, ExceptionType);`

Verify that `statement` throws an exception of a specified type.

- `EXPECT_ANY_THROW(statement);`
- `ASSERT_ANY_THROW(statement);`

Verify that `statement` throws any exception.

- `EXPECT_NO_THROW(statement);`
- `ASSERT_NO_THROW(statement);`

Verify that `statement` throws no exceptions.

#### Example
```cpp
TEST(FileTest, ThrowsOnBadFile) {
  File f;
  EXPECT_THROW(f.Open("nonexistent.txt"), std::runtime_error);
}
```

---

## 4. Fatal vs Non-Fatal Assertions: User Guidance

Understanding when to use `EXPECT_` and `ASSERT_` is critical.

- **Use `ASSERT_`** when the failure makes continuing the current test function not reasonable (e.g., a required setup or precondition failed).
- **Use `EXPECT_`** when you want to check multiple conditions within the same test and continue to gather more failure information.

**Tip:** Start tests using `ASSERT_` macros where subsequent steps depend strongly on the initial assertions. Use `EXPECT_` for independent checks.

---

## 5. Using Assertions in Tests: Step-by-Step Example

Consider you’re testing a function `Divide(a, b)` which divides two numbers, but throws an exception on division by zero.

<Steps>
<Step title="Step 1: Basic equality checks">
Write assertions to verify correct output for normal cases.
```cpp
EXPECT_EQ(Divide(10, 2), 5);
ASSERT_EQ(Divide(9, 3), 3);
```
</Step>
<Step title="Step 2: Check exception on invalid input">
Verify the code throws when expected.
```cpp
EXPECT_THROW(Divide(10, 0), std::invalid_argument);
```
</Step>
<Step title="Step 3: Multiple conditions with non-fatal asserts">
Check edge cases without aborting the test upon failure.
```cpp
EXPECT_GT(Divide(1, 1), 0);
EXPECT_FALSE(Divide(0, 1) < 0);
```
</Step>
<Step title="Step 4: Use `ASSERT_` to avoid invalid test execution">
If a critical precondition fails, abort to avoid misleading results.
```cpp
int divisor = GetDivisor();
ASSERT_NE(divisor, 0);
EXPECT_EQ(Divide(5, divisor), 5 / divisor);
```
</Step>
</Steps>

---

## 6. Common Pitfalls and Best Practices

### Pitfall: Mixing up argument order
Assertion macros like `EXPECT_EQ(a, b)` require arguments in the order `(expected, actual)` to generate meaningful error messages.

```cpp
// Wrong order - user intent could be obscured:
EXPECT_EQ(result, expected); // Use EXPECT_EQ(expected, result);
```

### Best Practice: Use `EXPECT_*` when test can continue
Allow tests to report multiple failures by preferring `EXPECT_*` for independent checks.

### Best Practice: Use `ASSERT_*` for critical failures
Prevent cascading failures by aborting tests on fatal failed assumptions.

### Tip: Use `EXPECT_THROW` to test exception safety
Leveraging expressive macros helps verify exceptional behavior clearly.

---

## 7. Troubleshooting Assertions

### Symptom: Assertion failure message shows unexpected values
- Verify argument order in the macro is `(expected, actual)`.
- Use [GoogleTest verbose flag](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#gaining-super-vision-into-mock-calls) for detailed logs.

### Symptom: Test aborts too early or continues undesirably
- Review use of `ASSERT_` and `EXPECT_` appropriately.

### Symptom: Exception assertions not catching thrown exceptions
- Confirm the exact exception type.
- Use `EXPECT_ANY_THROW` if multiple exception types possible.

---

## 8. Practical Code Examples

### Basic equality check
```cpp
TEST(SampleTest, ValuesAreEqual) {
  int computed = ComputeValue();
  EXPECT_EQ(42, computed);
}
```

### Testing exceptions
```cpp
TEST(SampleTest, ThrowsOnInvalidInput) {
  EXPECT_THROW(FunctionThatThrows(), std::runtime_error);
}
```

### Combining fatal and non-fatal assertions
```cpp
TEST(SampleTest, MixedAssertions) {
  int divisor = GetDivisor();
  ASSERT_NE(divisor, 0) << "Divisor must not be zero";

  int result = Divide(10, divisor);
  EXPECT_GT(result, 0);
  EXPECT_NE(result, 5);
}
```

### Matchers with assertions
Use more complex conditions with `EXPECT_THAT`:

```cpp
#include <gmock/gmock.h>
using ::testing::StartsWith;

TEST(ExampleTest, StringMatcher) {
  std::string greeting = GetGreeting();
  EXPECT_THAT(greeting, StartsWith("Hello"));
}
```

---

## 9. Related Documentation

- [Assertions Reference](reference/assertions.md) — Full list of assertion macros.
- [GoogleTest Core Concepts](overview/product-intro-core-concepts/core-terminology-concepts) — Understand testing fundamentals.
- [Mocking with GoogleMock](guides/mocking-advanced-testing/intro-mocking) — For interaction-based testing.
- [Writing Basic Tests Guide](guides/getting-started/writing-basic-tests) — To build foundational test writing skills.
- [Troubleshooting & FAQ](getting-started/first-steps/troubleshooting) — Resolving common testing issues.

---

## 10. Summary
GoogleTest's Assertions API equips you with reliable macros to verify test conditions precisely and control test flow based on assertion outcomes. Starting with simple equality checks, you can write detailed tests covering exceptions and conditional verification, leveraging both fatal and non-fatal assertions appropriately.

With clear examples and best practices, this documentation guides you from foundational assertions to exception handling and branching test flows, ensuring robust, readable tests.

---

<Note>
For further exploration, consider reviewing the [Matchers API](https://google.github.io/googletest/reference/matchers.html) to compose expressive assertions beyond built-in macros.
</Note>

---

<Info>
Ready-to-use code examples are provided throughout to allow quick copy-paste testing scenarios, speeding up your test development journey.
</Info>

---

For any issues understanding or applying assertions, refer to the [Troubleshooting & FAQ](getting-started/first-steps/troubleshooting) page in this documentation.
