---
title: "Assertions"
description: "Reference for all built-in and extensible assertion macros and functions provided by GoogleTest, including equality, type, exception, and fatal/non-fatal failure patterns. Learn how to verify code behavior with clear syntax and error reporting."
---

# Assertions Reference

This page lists the assertion macros provided by GoogleTest for verifying code behavior. To use them, include the header:

```cpp
#include <gtest/gtest.h>
```

Assertions are the central mechanism to verify that your code produces the expected results. GoogleTest provides a rich suite of assertion macros tailored to various verification needs.

## Overview of Assertions

Most assertions come in pairs of `EXPECT_` and `ASSERT_` variants:

- `EXPECT_` assertions generate **nonfatal failures**, allowing the current function to continue running.
- `ASSERT_` assertions generate **fatal failures**, which abort the current function immediately.

Use `EXPECT_` when it is safe to continue after a failure, and `ASSERT_` when further execution depends on the assertion passing.

All assertion macros support streaming custom failure messages with the `<<` operator, which can provide helpful context. For example:

```cpp
EXPECT_TRUE(my_condition) << "Condition was false but should be true";
```

### Types of Assertions

### 1. Explicit Success and Failure

- **SUCCEED()**

  Generates a success. Useful as documentation within the test logic.

  ```cpp
  SUCCEED();
  ```

- **FAIL()**

  Generates a fatal failure causing immediate return from the current void-returning function.

  ```cpp
  if (unexpected_condition) {
    FAIL() << "Unexpected condition encountered";
  }
  ```

- **ADD_FAILURE()**

  Generates a nonfatal failure, allowing continued execution.

  ```cpp
  ADD_FAILURE() << "Something's amiss but we continue";
  ```

- **ADD_FAILURE_AT(file, line)**

  Generates a nonfatal failure at the specified location, useful for reporting errors from helper functions.

  ```cpp
  ADD_FAILURE_AT("foo.cc", 123) << "Problem encountered in helper";
  ```

### 2. Generalized Assertion with Matchers

GoogleTest integrates by default with GoogleMock matchers, allowing rich assertions:

- **EXPECT_THAT(value, matcher)**

- **ASSERT_THAT(value, matcher)**

These verify that the `value` matches the matcher expression, generating detailed failure messages on mismatch.

Example:

```cpp
#include <gmock/gmock.h>
using ::testing::StartsWith;
using ::testing::AllOf;
using ::testing::Gt;
using ::testing::Lt;

EXPECT_THAT(my_string, StartsWith("Hello"));
EXPECT_THAT(value, AllOf(Gt(5), Lt(10)));
```

### 3. Boolean Condition Assertions

These test boolean conditions directly.

- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`

Example:

```cpp
EXPECT_TRUE(x > 0) << "x should be positive";
```

### 4. Binary Comparison Assertions

Check equality and ordering relations between two values. Requires the values to be comparable.

- Equality: `EXPECT_EQ(val1, val2)` / `ASSERT_EQ(val1, val2)` (checks `val1 == val2`)
- Inequality: `EXPECT_NE(val1, val2)` / `ASSERT_NE(val1, val2)`
- Less than: `EXPECT_LT(val1, val2)` / `ASSERT_LT(val1, val2)`
- Less or equal: `EXPECT_LE(val1, val2)` / `ASSERT_LE(val1, val2)`
- Greater than: `EXPECT_GT(val1, val2)` / `ASSERT_GT(val1, val2)`
- Greater or equal: `EXPECT_GE(val1, val2)` / `ASSERT_GE(val1, val2)`

**Note:** Pointer comparisons use pointer equality, not content equality. For C strings, see string comparison assertions below.

Example:

```cpp
EXPECT_EQ(result, expected_value);
EXPECT_LT(score, max_score);
```

### 5. String Comparison Assertions

Specialized for comparing C-style strings (null-terminated char arrays), handling value comparison rather than pointer comparison.

- `EXPECT_STREQ(str1, str2)` / `ASSERT_STREQ(str1, str2)` — expects strings to have the same contents.
- `EXPECT_STRNE(str1, str2)` / `ASSERT_STRNE(str1, str2)` — expects strings to differ in contents.
- `EXPECT_STRCASEEQ(str1, str2)` / `ASSERT_STRCASEEQ(str1, str2)` — expects strings to be equal ignoring case.
- `EXPECT_STRCASENE(str1, str2)` / `ASSERT_STRCASENE(str1, str2)` — expects strings to differ ignoring case.

Example:

```cpp
EXPECT_STREQ(cstr1, "Expected contents");
EXPECT_STRNE(cstr1, cstr2);
```

### 6. Floating-Point Comparison Assertions

Due to rounding errors, floating-point comparisons use approximate equivalence:

- `EXPECT_FLOAT_EQ(val1, val2)` / `ASSERT_FLOAT_EQ(val1, val2)` —
  Checks float values are approximately equal within 4 ULPs.

- `EXPECT_DOUBLE_EQ(val1, val2)` / `ASSERT_DOUBLE_EQ(val1, val2)` —
  Checks double-precision values within 4 ULPs.

- `EXPECT_NEAR(val1, val2, abs_error)` / `ASSERT_NEAR(val1, val2, abs_error)` —
  Checks values are within a specified absolute error.

Example:

```cpp
EXPECT_NEAR(computed, expected, 1e-6);
```

### 7. Exception Assertions

Require exceptions to be enabled in your build.

- `EXPECT_THROW(statement, exception_type)` / `ASSERT_THROW(statement, exception_type)` — Verifies `statement` throws an exception of the specified type.
- `EXPECT_ANY_THROW(statement)` / `ASSERT_ANY_THROW(statement)` — Verifies `statement` throws any exception.
- `EXPECT_NO_THROW(statement)` / `ASSERT_NO_THROW(statement)` — Verifies `statement` does not throw any exception.

Example:

```cpp
EXPECT_THROW(MyFunction(), std::runtime_error);
EXPECT_NO_THROW(AnotherFunction());
```

### 8. Predicate Assertions

Custom predicates can be tested with up to five parameters.

- `EXPECT_PRED1(pred, val1)`
- `EXPECT_PRED2(pred, val1, val2)`
- Up to `EXPECT_PRED5`

Predicates are functions or functors returning bool.

Example:

```cpp
bool IsEven(int n) { return (n % 2) == 0; }
EXPECT_PRED1(IsEven, 4);
```

### 9. Predicate Formatter Assertions

Provide detailed formatted failure messages.

- `EXPECT_PRED_FORMAT1(pred_formatter, val1)`
- Up to `EXPECT_PRED_FORMAT5`

`pred_formatter` functions accept expression strings and values, returning `AssertionResult`.

Example:

```cpp
testing::AssertionResult IsPositive(const char* expr, int val) {
  if (val > 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr << " is not positive";
}
EXPECT_PRED_FORMAT1(IsPositive, x);
```

### 10. Windows HRESULT Assertions

For testing Windows COM HRESULT values:

- `EXPECT_HRESULT_SUCCEEDED(expression)` / `ASSERT_HRESULT_SUCCEEDED(expression)`
- `EXPECT_HRESULT_FAILED(expression)` / `ASSERT_HRESULT_FAILED(expression)`

These assertions verify HRESULT success/failure and print human-readable error messages.

Example:

```cpp
ASSERT_HRESULT_SUCCEEDED(some_com_call());
```

### 11. Death Assertions

Verify that a statement causes process termination. Various macros exist to handle different modes.

- `EXPECT_DEATH(statement, matcher)` / `ASSERT_DEATH(...)`
- `EXPECT_DEATH_IF_SUPPORTED(...)`
- `EXPECT_DEBUG_DEATH(...)`
- `EXPECT_EXIT(statement, predicate, matcher)`

`matcher` can be a regex or matcher matching `stderr` output; `predicate` tests exit status.

Example:

```cpp
EXPECT_DEATH(DoSomethingDangerous(), "Error .* out of range");
```

---

# Practical Tips

- Use the `EXPECT_` variants when tests can sensibly continue after failure. Use `ASSERT_` otherwise.
- Stream informative messages with `<<` to simplify debugging failures.
- Use `EXPECT_THAT(value, matcher)` for expressive and clear assertions using GoogleMock matchers.
- Prefer `EXPECT_STREQ` over `EXPECT_EQ` when comparing C strings.
- For floating-point comparisons, use `EXPECT_FLOAT_EQ`, `EXPECT_DOUBLE_EQ`, or `EXPECT_NEAR` to avoid false failures due to precision issues.
- When testing exception throwing, ensure exceptions are enabled in your build.

---

For more detailed usage examples and best practices, refer to the [GoogleTest Primer](../../overview/product-intro-core-value/what-is-googletest), the [Matchers Reference](../api-reference/core-apis/matchers), and the [Mocking Workflow guide](../../guides/mocking-best-practices/mocking-workflow).

---

© GoogleTest 2024
