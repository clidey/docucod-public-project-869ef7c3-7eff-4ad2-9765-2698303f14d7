---
title: "Test Organization"
description: "Understand APIs for structuring and parameterizing tests. Covers test macros, test fixtures, parameterized and type-parameterized tests, grouping, and controlling test discovery. Highlights best practices for scalable test code."
---

# Test Organization

Understand APIs for structuring and parameterizing tests. This documentation covers GoogleTest's interfaces for test macros, test fixtures, parameterized and type-parameterized tests, grouping tests, and controlling test discovery. It highlights best practices to write scalable, maintainable test code.

---

## Overview of Test Organization

GoogleTest offers powerful APIs to help you organize your tests clearly and efficiently. Whether you need simple test cases, reusable test fixtures, or advanced parameterized and type-parameterized tests, these interfaces allow you to write tests that reflect your code's intent and scale as your codebase grows.

Using these APIs with an understanding of test discovery mechanisms enables predictable, maintainable test execution across diverse scenarios.

---

## Test Macros and Simple Tests

### TEST Macro

- Defines a basic test case.
- Syntax:

```cpp
TEST(TestSuiteName, TestName) {
  // test code
}
```
- Each test has a unique combination of `TestSuiteName` and `TestName`.

### TEST_F Macro

- Defines tests that use a test fixture class.
- Syntax:

```cpp
TEST_F(TestFixtureClass, TestName) {
  // test code using the fixture
}
```
- Fixture objects are constructed fresh for each test.

### Basic Usage

1. Use `TEST` when no shared setup or teardown is needed.
2. Use `TEST_F` to group tests sharing common context.

---

## Test Fixtures

Test fixtures allow grouping tests that share common objects or subroutines. They improve code reuse and organization.

### Defining a Test Fixture

- Derive a class from `testing::Test`.
- Provide `SetUp()` and `TearDown()` for initialization and cleanup.
- Declare shared objects as class members.

Example:

```cpp
class MyTestFixture : public testing::Test {
 protected:
  void SetUp() override {
    // initialize shared resources
  }

  void TearDown() override {
    // clean up
  }

  SomeClass shared_object_;  // Accessible in tests
};
```

### Using a Test Fixture

Use `TEST_F(MyTestFixture, TestName)` to write tests using the fixture.

---

## Parameterized Tests

Allows running the same test logic with different input values, increasing coverage and reducing code duplication.

### Defining Parameterized Tests

- Derive a class from `::testing::TestWithParam<T>`, where `T` is the parameter type.
- Define tests using `TEST_P` macro.

Example:

```cpp
class MyParamTest : public ::testing::TestWithParam<int> {};

TEST_P(MyParamTest, TestName) {
  int param = GetParam();
  // Test logic using param
}
```

### Instantiating Parameterized Tests

Use `INSTANTIATE_TEST_SUITE_P` to provide parameter values:

```cpp
INSTANTIATE_TEST_SUITE_P(InstanceName, MyParamTest, ::testing::Values(1, 2, 3));
```

---

## Type-Parameterized Tests

Use type-parameterized tests when the same test logic should be run for multiple types.

### Defining Type-Parameterized Tests

- Create a template test fixture class.
- Use `TYPED_TEST_SUITE` to register types.
- Define tests with `TYPED_TEST`.

Example:

```cpp
template <typename T>
class MyTypeTest : public testing::Test {
  // ...
};

using MyTypes = ::testing::Types<int, double>;
TYPED_TEST_SUITE(MyTypeTest, MyTypes);

TYPED_TEST(MyTypeTest, TestName) {
  TypeParam value{};
  // test logic
}
```

---

## Grouping Tests

Grouping tests into suites (via `TEST` or `TEST_F`) allows logical organization and scoped setup/teardown.

Good grouping improves test discovery, reporting, and maintainability.

---

## Controlling Test Discovery

GoogleTest discovers tests based on macro usage and naming conventions.

You can control which tests run via command-line flags such as:

- `--gtest_filter` to select specific tests/suites.
- `--gtest_disable_test` to ignore specific tests.

Use `GTEST_SKIP()` to skip tests programmatically.

---

## Best Practices for Scalable Test Code

- Use **test fixtures** to avoid duplication in setup code.
- Prefer **parameterized tests** to cover multiple inputs succinctly.
- Avoid over-specifying tests; focus expectations on behavior.
- Use **type-parameterized tests** for cross-type validation.
- Organize tests in suites reflecting the structure of your code.
- Leverage test naming conventions and filters for easy running and reporting.
- Keep individual tests focused and independent for parallel execution.

---

## Example: Putting It All Together

```cpp
class MyMathTest : public testing::TestWithParam<std::tuple<int, int>> {
 protected:
  int a_ = std::get<0>(GetParam());
  int b_ = std::get<1>(GetParam());
};

TEST_P(MyMathTest, SumIsCorrect) {
  EXPECT_EQ(a_ + b_, MySumFunction(a_, b_));
}

INSTANTIATE_TEST_SUITE_P(
    SumValues, MyMathTest, testing::Values(
        std::make_tuple(1, 2),
        std::make_tuple(3, 4),
        std::make_tuple(-1, 5)));
```

This example runs the `SumIsCorrect` test with multiple parameters, making your tests concise and maintainable.

---

## Troubleshooting Common Issues

### Problem: Tests Not Discovered

- Ensure all tests use the proper `TEST` or `TEST_F` macros.
- Verify test suites and test names are valid identifiers without underscores.
- Confirm tests are linked correctly in your test executable.

### Problem: Setup or TearDown Not Running

- In fixtures, make sure to override `SetUp()` and `TearDown()` correctly.
- Use `override` keyword to catch signature mistakes.

### Problem: Parameterized Tests Not Running All Cases

- Check `INSTANTIATE_TEST_SUITE_P` is called properly with all parameter values.
- Confirm type and parameter types match whatâ€™s used in the fixture.

### Problem: Tests Run in Unexpected Order

- Use sequences or explicit ordering only if necessary.
- By default, test order is not guaranteed; don't write tests relying on order.

---

For more detailed API reference, see the related pages on:

- [Test Macros and Fixtures](https://google.github.io/googletest/primer.html#test-fixtures-using-the-same-data-configuration-for-multiple-tests)
- [Parameterized and Typed Tests](https://google.github.io/googletest/primer.html#value-parameterized-tests)
- [Test Discovery and Filtering](https://google.github.io/googletest/googletest-filter-options.html)

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/primer.md", "range": "0-350"}]} />