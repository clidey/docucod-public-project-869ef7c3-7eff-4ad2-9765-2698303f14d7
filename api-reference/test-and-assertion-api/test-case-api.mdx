---
title: "Test Case Structure & Registration"
description: "Learn how to define, register, and organize test cases and test suites. This page details the primary test macros, execution flow, and test discovery system—enabling effortless setup and scalable organization of your test code."
---

# Test Case Structure & Registration

Learn how to define, register, and organize test cases and test suites. This page details the primary test macros, execution flow, and test discovery system—enabling effortless setup and scalable organization of your test code.

---

## Overview

GoogleTest provides a clear and scalable approach to structuring your test code by defining test cases and test suites with simple, expressive macros. Understanding how to correctly define, register, and organize tests enables you to build robust test executables with minimal effort.

This page focuses on the core test case macros (`TEST`, `TEST_F`, and their typed variants), explains how tests are automatically discovered and executed, and guides you through building extensible test suites.

---

## Test Case Definition and Registration Workflow

Writing tests in GoogleTest involves three key steps:

1. **Defining Tests Using Macros:** Use `TEST` and `TEST_F` macros to create individual test cases and fixtures, respectively.
2. **Linking and Compiling:** Compile your test source files into a test executable.
3. **Test Discovery and Execution:** Upon running, GoogleTest automatically discovers all registered tests and runs them according to specified filters or orders.

This workflow enables you to seamlessly scale from a single simple test to large and complex test suites.

---

## Defining Tests: Primary Test Macros

### `TEST(test_suite_name, test_name)`

This macro defines a simple test function within a test suite. It does not use fixtures and is suitable for independent tests.

- Each test is uniquely identified by its `test_suite_name` and `test_name`.
- The test body is enclosed within curly braces following the macro.
- GoogleTest automatically registers the test during static initialization.

**Example:**
```cpp
TEST(MathTest, SimpleAddition) {
  EXPECT_EQ(1 + 1, 2);
}
```

### `TEST_F(test_fixture_name, test_name)`

This macro defines a test that uses a test fixture class for setup and teardown.

- The fixture class should inherit from `::testing::Test`.
- It allows reusing common setup, teardown, and helper functions across multiple related tests.

**Example:**
```cpp
class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // code here will run before each test
  }

  void TearDown() override {
    // code here will run after each test
  }

  int shared_resource_;
};

TEST_F(MyFixture, TestWithFixture) {
  shared_resource_ = 42;
  EXPECT_EQ(shared_resource_, 42);
}
```

---

## Execution Flow and Test Discovery

GoogleTest discovers tests at runtime via the static registration mechanism implemented inside the macros.

When your test executable starts:

- GoogleTest enumerates all defined `TEST` and `TEST_F` instances.
- You can filter which tests to run by specifying command-line flags (e.g., `--gtest_filter=MathTest.*`).
- Tests run sequentially by default, with options to randomize or repeat runs.
- Results are reported with detailed logs.

This system requires no manual registration or configuration.

---

## Organizing Tests for Maintainability

### Test Suites

- Group related tests in logical test suites.
- Use descriptive suite names reflecting the component or feature under test.

### Test Fixtures

- Use fixtures (`TEST_F`) to share setup and teardown across tests.
- Keep fixture setup lightweight to improve test execution speed.

### Typed and Parameterized Tests

- For testing with multiple input types or parameters, GoogleTest supports typed tests and parameterized tests (covered in [Parameterized and Typed Test API](/api-reference/test-and-assertion-api/parameterized-testing-api)).

---

## Practical Tips and Best Practices

- **Name Tests Clearly:** Use meaningful names for test suites and tests to improve readability.
- **Minimize Test Dependencies:** Keep tests isolated to ensure reliability.
- **Use Fixtures Judiciously:** Only add shared setup when necessary.
- **Avoid Overly Complex Macros:** Stick with `TEST` and `TEST_F` for straightforward scenarios.
- **Leverage GoogleTest Assertions:** Use assertions for validation within tests, as detailed in [Assertion Macros and Custom Assertions](/api-reference/test-and-assertion-api/assertions-api).

---

## Troubleshooting Common Issues

- **Tests Not Discovered:** Verify that tests are defined with GoogleTest macros and that the test binary is built correctly.
- **Name Collisions:** Ensure unique test suite and test names.
- **Unexpected Test Ordering:** Use command-line flags or `InSequence` constructs to control execution order.
- **Fixtures Not Working:** Confirm your fixture class properly inherits from `::testing::Test` and uses `SetUp()`/`TearDown()` overrides.

---

## Example: From Simple to Fixture-Based Test

```cpp
#include <gtest/gtest.h>

// Basic test without fixture
TEST(SimpleTest, AddsTwoNumbers) {
  EXPECT_EQ(2 + 3, 5);
}

// Test fixture declaration
class CalculatorTest : public ::testing::Test {
protected:
  void SetUp() override {
    calculator.reset(new Calculator());
  }

  std::unique_ptr<Calculator> calculator;
};

// Tests that use the fixture
TEST_F(CalculatorTest, AdditionWorks) {
  EXPECT_EQ(calculator->Add(2, 2), 4);
}

TEST_F(CalculatorTest, SubtractionWorks) {
  EXPECT_EQ(calculator->Subtract(5, 3), 2);
}
```

---

## Additional References

- [Assertion Macros and Custom Assertions](/api-reference/test-and-assertion-api/assertions-api) — Compose tests with GoogleTest's assertion framework.
- [Parameterized and Typed Test API](/api-reference/test-and-assertion-api/parameterized-testing-api) — Advanced test patterns for different data and types.
- [What is GoogleTest?](/overview/product-intro/what-is-googletest) — Understand the overall goals and design of GoogleTest.
- [Writing Your First Test Case](/getting-started/first-test/writing-basic-test) — Step-by-step tutorial to get started quickly.

---