---
title: "Mock Strictness and Behavioral Modes"
description: "Configure how mocks handle unexpected (uninteresting) calls with NiceMock, NaggyMock, and StrictMock. Adjust mocking feedback for your test needs and enforce stricter interaction contracts as appropriate."
---

# Mock Strictness and Behavioral Modes

Configure how mocks handle unexpected (uninteresting) calls with **NiceMock**, **NaggyMock**, and **StrictMock**. Adjust mocking feedback for your test needs and enforce stricter interaction contracts as appropriate.

---

## Overview

GoogleMock enables fine-grained control over the behavior when mock methods are called unexpectedlyâ€”that is, *uninteresting calls* for which no explicit expectation (`EXPECT_CALL`) is set. By default, GoogleMock produces warnings on these uninteresting calls to help you find unexpected interactions.

To better tailor this feedback and the strictness of your tests, GoogleMock provides three wrappers that modify the behavior of mock objects:

- **NiceMock**: suppresses warnings for uninteresting calls.
- **NaggyMock**: (default) prints warnings for uninteresting calls.
- **StrictMock**: treats uninteresting calls as test failures.

These wrappers are templates that modify existing mock classes without requiring changes to the mock or production code.

---

## Why Control Mock Strictness?

Mock strictness levels help balance feedback verbosity and test strictness:

- Use **NaggyMock** (default) during development to get warnings about calls you didn't explicitly expect.
- Switch to **NiceMock** to reduce noise when uninteresting calls are known and acceptable.
- Use **StrictMock** to enforce a very tight contract, causing test failures if any unexpected calls occur.

This control helps maintain concise test output and ensures tests only fail when truly unexpected behavior arises.

---

## Using the Strictness Wrappers

### Basic Usage

Wrap your mock class with one of the strictness modifiers:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(int, DoThat, (int), ());
};

// Nice mock: no warnings on uninteresting calls
NiceMock<MockFoo> nice_foo;

// Naggy mock (default): warnings on uninteresting calls
NaggyMock<MockFoo> naggy_foo;

// Strict mock: failures on uninteresting calls
StrictMock<MockFoo> strict_foo;
```

These wrappers inherit constructors from your mock class, so any constructor arguments are passed through transparently:

```cpp
NiceMock<MockFoo> nice_foo(5);  // Calls MockFoo(5)
StrictMock<MockFoo> strict_foo("hello", 10);  // Calls MockFoo(string, int)
```

### Behavior Differences

- **NiceMock** suppresses all warnings for calls to methods with no expectations.
- **NaggyMock** prints warnings for such calls (same behavior as raw mocks by default).
- **StrictMock** treats uninteresting calls as test failures, generating fatal errors.

**Unexpected calls** (calls that do not match any expectation but expectation(s) exist) always cause errors regardless of strictness mode.

---

## When to Use Each Mode

| Wrapper     | Behavior on Uninteresting Calls                         | Recommended Usage                                 |
|-------------|---------------------------------------------------------|--------------------------------------------------|
| NiceMock    | Suppresses warnings                                     | Stable tests with known acceptable calls         |
| NaggyMock   | Prints warnings (default behavior)                      | Active development and debugging                   |
| StrictMock  | Converts warnings to errors (test failures)            | Enforcing strict interaction contracts            |

---

## Important Considerations

### Direct Effect Only on Uninteresting Calls

These wrappers only change behavior for *uninteresting* calls (methods with no `EXPECT_CALL`). Calls that are *unexpected* (no matching expectation for given arguments) still cause errors in all modes.

### Works Only With `MOCK_METHOD`-Defined Methods

The strictness modifiers only affect mock methods defined directly in the mock class using `MOCK_METHOD` and related macros. Methods mocked in base classes may not be affected.

### Virtual Destructors

For wrappers to work correctly, your mock classes should have virtual destructors.

### Interaction with Verbosity Flags

The verbosity of warnings and info logs can be controlled globally via the `--gmock_verbose` flag (`info`, `warning`, `error`). The strictness wrappers modify *whether* warnings appear as failures or not but logs can be further customized with this flag.

---

## How It Works Internally

Each wrapper registers its policy when constructed:

- **NiceMock** calls `Mock::AllowUninterestingCalls()` to allow calls silently.
- **NaggyMock** calls `Mock::WarnUninterestingCalls()` to enable warnings.
- **StrictMock** calls `Mock::FailUninterestingCalls()` to turn warnings into failures.

When destroyed, they unregister their policy.

This means wrapper inheritance order matters: the wrapper must inherit the mock class to ensure policy is set before mock setup.

---

## Examples

### Suppressing Uninteresting Call Warnings with NiceMock

```cpp
using ::testing::NiceMock;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& text));
};

TEST(LoggerTest, LogsCorrectly) {
  NiceMock<MockPrinter> printer;

  // No EXPECT_CALL set for Print, but NiceMock suppresses the warning
  printer.Print("Hello world");  // No warning
}
```

### StrictMock Fails on Uninteresting Calls

```cpp
using ::testing::StrictMock;

class MockService {
 public:
  MOCK_METHOD(int, GetValue, ());
};

TEST(ClientTest, FailsOnUnexpectedCall) {
  StrictMock<MockService> service;

  // No EXPECT_CALL, so this produces a failure
  EXPECT_NONFATAL_FAILURE(service.GetValue(), "Uninteresting mock function call");
}
```

### Passing Arguments to Constructors

```cpp
class MockConfig {
 public:
  explicit MockConfig(int id, const std::string& name);
  MOCK_METHOD(void, Reset, ());
};

NiceMock<MockConfig> nice_config(10, "TestConfig");
EXPECT_CALL(nice_config, Reset());
nice_config.Reset();
```

---

## Best Practices

- Prefer **NiceMock** for stable test suites where uninteresting calls are expected and safe to ignore.
- Use **NaggyMock** during active development to catch unexpected interactions early with warnings.
- Employ **StrictMock** when you want to enforce the tightest interaction contracts and avoid any unexpected behavior silently passing.
- Always set explicit `EXPECT_CALL`s for calls you want to verify. Use catch-all expectations with `.Times(AnyNumber())` to suppress warnings selectively when needed.
- Use the global `--gmock_verbose` flag alongside these wrappers to tune logging verbosity.
- Do not nest multiple strictness wrappers together (e.g., `NiceMock<StrictMock<T>>`) as it is unsupported.

---

## Troubleshooting

### No Warning or Error on Unexpected Calls?

- Check that your mock object is wrapped properly in one of the strictness modifiers.
- Verify that your mock methods are defined using `MOCK_METHOD` macros directly in the mocking class.
- Confirm your mock class has a virtual destructor.

### Uninteresting Calls Still Cause Failures in NiceMock?

- Ensure the uninteresting calls are truly uninteresting (no `EXPECT_CALL` for the method).
- Unexpected calls (with `EXPECT_CALL`s) always cause failures regardless of wrapper.

### Excessive Verbose Output?

- Adjust `--gmock_verbose` flag to `warning` or `error` to reduce noise.
- Combine with **NiceMock** to minimize warnings.

### Compilation Errors With Strictness Wrappers?

- Verify you do not already have strictness applied to the base mock class.
- Do not nest `NiceMock`, `NaggyMock`, or `StrictMock` repeatedly.

---

## Reference

### Templates

| Template Class          | Description                                               |
|------------------------|-----------------------------------------------------------|
| `NiceMock<T>`          | Suppresses warnings on uninteresting calls               |
| `NaggyMock<T>`         | (Default) prints warnings on uninteresting calls          |
| `StrictMock<T>`        | Fails on uninteresting calls                              |

### Methods

- Wrappers inherit mock constructors.
- Can be used anywhere mock objects are accepted.
- Do **not** change behavior of expected or unexpected calls.

---

## See Also

- [Mocking Reference](reference/mocking.md#the-nice-the-strict-and-the-naggy)
- [gMock Cookbook: The Nice, the Strict, and the Naggy](docs/gmock_cook_book.md#NiceStrictNaggy)
- [gMock for Dummies: Using Mocks in Tests](guides/getting-started/mock-basics.md#using-mocks)
- [gMock Cheat Sheet](docs/gmock_cheat_sheet.md#using-mocks-in-tests)

---

## Summary

GoogleMock allows you to configure the strictness of your mocks via `NiceMock`, `NaggyMock`, and `StrictMock` wrappers, enabling suppression, warning, or enforcement of uninteresting call detections. Choosing the appropriate strictness level helps maintain clean test logs and enforce interaction contracts as needed.

---

## Example Walkthrough: Controlling Behavior on Uninteresting Calls

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockDatabase {
 public:
  MOCK_METHOD(void, Connect, (), ());
  MOCK_METHOD(bool, Query, (const std::string& sql), ());
};

TEST(DatabaseTest, NiceMockAllowsUnexpectedCalls) {
  NiceMock<MockDatabase> db;
  // No expectation for Query yet this call is allowed silently.
  db.Query("SELECT * FROM users");
}

TEST(DatabaseTest, NaggyMockWarnsOnUnexpectedCalls) {
  NaggyMock<MockDatabase> db;

  testing::internal::CaptureStdout();
  db.Query("SELECT * FROM users");
  std::string output = testing::internal::GetCapturedStdout();

  EXPECT_NE(std::string::npos, output.find("Uninteresting mock function call"));
}

TEST(DatabaseTest, StrictMockFailsOnUnexpectedCalls) {
  StrictMock<MockDatabase> db;

  EXPECT_NONFATAL_FAILURE(db.Query("SELECT * FROM users"),
                         "Uninteresting mock function call");
}
```
