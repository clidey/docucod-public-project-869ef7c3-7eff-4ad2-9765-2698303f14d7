---
title: "Failure Reporting and Status Codes"
description: "Documents available error and status reporting APIs, explains how test and expectation failures are signaled, and the status codes used to interpret test results. Includes patterns for capturing, logging, or reacting to failures programmatically."
---

# Failure Reporting and Status Codes

GoogleTest provides comprehensive facilities to report errors, signal test expectations or failures, and communicate test result status. This page documents how failures and statuses are reported via APIs, the commonly used status codes during test execution, and patterns to capture, log, or programmatically react to test failures.

---

## 1. Overview

Failure reporting is crucial in understanding the reasons behind test successes or failures. GoogleTest and GoogleMock use a system of assertions, failure types, and status codes to clearly indicate test outcomes. This documentation helps you reliably identify, interpret, and act on test and expectation failures in your automated test runs.

Most users will interact primarily with assertion macros and test outcome status codes, but for building custom listeners, extensions, or diagnostic tools, a deeper understanding of failure reporting APIs and codes is important.


## 2. Signaling Test and Expectation Failures

### 2.1 Assertions and Failure Types

GoogleTest assertions come in two primary types:

- **Fatal Failures**: These (e.g., `ASSERT_*`, `FAIL()`) abort the current function and mark the test as failed immediately.
- **Nonfatal Failures**: These (e.g., `EXPECT_*`, `ADD_FAILURE()`) record the failure but allow test execution to continue.

Use fatal failures to immediately stop execution when continuing might produce misleading results, and nonfatal failures when it is beneficial to gather multiple failures in a single run.

Each failure has an associated message containing:
- The code location
- The failed expression or condition
- Custom user messages, if any
- Additional diagnostic information

Failures generate rich messages that include concrete values and context to streamline debugging.

### 2.2 Macros for Explicit Failure and Success

You can signal explicit successes or failures independently of a condition:

- `SUCCEED()` marks a success point but does not affect test outcome.
- `FAIL()` signals a fatal failure unconditionally.
- `ADD_FAILURE()` signals a nonfatal failure unconditionally.

These are useful for documenting control flow branches or unreachable code.

### 2.3 Catching and Reacting to Failures

GoogleTest enables specialized macros to *expect* failures as part of testing:

- `EXPECT_FATAL_FAILURE(statement, substring)` verifies that executing `statement` results in a fatal failure that includes `substring` in the message.
- `EXPECT_NONFATAL_FAILURE(statement, substring)` does the same for nonfatal failures.

These are essential for testing your own testing utilities or custom matchers.


## 3. Status Codes for Test Results

GoogleTest classifies test result outcomes with status codes that you can use to interpret the state of tests programmatically.

| Status Code       | Meaning                                                                                         |
|-------------------|------------------------------------------------------------------------------------------------|
| `kSuccess`        | Test executed and passed without any failures.                                                |
| `kNonFatalFailure`| Test had nonfatal failures but continued execution.                                            |
| `kFatalFailure`   | Test had fatal failures and was aborted.                                                      |
| `kSkip`           | Test was skipped via `GTEST_SKIP()`.                                                          |

These codes enable precise handling of test outcomes, especially in custom test runners, listeners, or integrations.


## 4. API Patterns for Failure Reporting and Logging

### 4.1 Accessing Failure Details

When a failure occurs, GoogleTest records details such as the file, line number, and summary message. You can access this information via:

- **TestPartResult** objects, available in listeners, provide methods such as:
  - `file_name()` and `line_number()`
  - `summary()` - short failure message
  - `message()` - detailed failure message
  - `failed()` - whether failure occurred

Example in a listener:
```cpp
void OnTestPartResult(const testing::TestPartResult& result) override {
  if (result.failed()) {
    std::cerr << result.file_name() << ":" << result.line_number()
              << ": Failure: " << result.summary() << std::endl;
  }
}
```

### 4.2 Writing Custom Failure Reporters

GoogleMock supports a `FailureReporterInterface` where failure reporting behavior can be overridden if needed. This advanced customization lets you redirect or augment failure output.

### 4.3 Logging Failure Messages

GoogleTest logs messages at severities INFO, WARNING, ERROR, and FATAL. Appropriate macros provide streaming to standard error and log flushing. Use logging to complement failure reports.


## 5. Interpreting Multi-Threading and Death Test Failures

Failures in multi-threaded environments or death tests (tests that expect process termination) have particular challenges:

- GoogleTest emits warnings or errors if a death test is run while multiple threads are active, as this can lead to deadlocks or hangs.
- Death test failures are reported separately and may include exit status predicates and output matchers.

For detailed usage, see the death tests guides and assertions references.


## 6. Best Practices

- Use **nonfatal assertions** to continue tests after recoverable failures and **fatal assertions** to abort when continuation could lead to false results.
- Stream detailed failure messages with `<<` for clarity.
- Use `SCOPED_TRACE` to add contextual stack traces in nested or helper functions.
- When using **death tests**, name suites with the suffix `DeathTest` to ensure proper ordering and thread-handling.
- To test your testing logic, use `EXPECT_FATAL_FAILURE` and `EXPECT_NONFATAL_FAILURE`.


## 7. Examples

### 7.1 Simple Failure Reporting
```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Nonfatal failure if false
  ASSERT_GT(Factorial(5), 0) << "Factorial should be positive";  // Fatal failure with message
}
```

### 7.2 Explicit Failure and Catching Failures
```cpp
void Helper() {
  if (some_error) {
    FAIL() << "This is an explicit failure.";
  }
}

TEST(MyTest, FailsAsExpected) {
  EXPECT_FATAL_FAILURE({ Helper(); }, "explicit failure");
}
```

### 7.3 Logging Failures Programmatically
```cpp
class LogListener : public testing::EmptyTestEventListener {
  void OnTestPartResult(const testing::TestPartResult& result) override {
    if (result.failed()) {
      // Log to file or elsewhere
      LogToFile(result.file_name(), result.line_number(), result.summary());
    }
  }
};
```

---

## 8. References

- [Assertions Reference](../../reference/assertions.md) — For detailed assertion macros
- [Death Assertions](../../reference/assertions.md#death) — To learn about death test failures
- [Mocking Reference](../../reference/mocking.md) — About failures and expectations in mocks
- [Event Listeners](../../guides/real-world-practices/best-practices.md#extending-google-test) — To handle failure reporting externally
- [GoogleTest Architecture Overview](../../overview/core-concepts-architecture/architecture-overview.mdx) — For understanding the flow of failures and reports

---