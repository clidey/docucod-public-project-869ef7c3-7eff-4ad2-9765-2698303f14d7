---
title: "Behavioral Control: Nice, Naggy, and Strict Mocks"
description: "Describes the mechanisms for controlling how mock objects respond to unexpected calls via NiceMock, NaggyMock, and StrictMock, empowering users to tailor feedback and error sensitivity during test execution."
---

# Behavioral Control: Nice, Naggy, and Strict Mocks

GoogleMock provides powerful mechanisms to customize how mock objects react to unexpected method calls during test execution. This page describes the three main mock object wrappers—`NiceMock`, `NaggyMock`, and `StrictMock`—enabling you to control the feedback and error sensitivity behaviors of your mocks. By choosing the appropriate mock wrapper, you tailor the strictness level of your tests, improving clarity, maintainability, and debugging effectiveness.

---

## Overview

Mock objects often receive calls that your test does not explicitly expect. How should your test respond to these "uninteresting" calls?

- Should it silently accept them?
- Should it warn you about them?
- Or should it treat them as errors and fail the test?

GoogleMock lets you control this behavior on a per-mock basis via three wrappers that inherit from your mock class:

- **NiceMock**: Silences all warnings about uninteresting calls, treating them as allowed.
- **NaggyMock**: Prints warnings for uninteresting calls but continues execution. This is the current default behavior for plain mocks.
- **StrictMock**: Treats uninteresting calls as test failures, enforcing strict call expectations.

Choosing the right level of strictness helps strike the balance between test reliability and noise.

---

## Behavior of Mock Wrappers

### 1. NaggyMock (Default Behavior)

A plain mock or a `NaggyMock`:

- Prints a **warning** for every uninteresting call (a call to a mock method that has **no matching** `EXPECT_CALL` spec).
- Continues test execution after the warning.

This behavior is useful during test development when you want to catch unexpected calls but not stop the entire test run.

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThat();  // Prints warning: uninteresting call
mock_foo.DoThis(); // Ok, expected call
```


### 2. NiceMock

A `NiceMock` suppresses warnings about uninteresting calls and silently allows them.

- Uninteresting calls are allowed without warnings or failures.
- Useful when you want to focus only on the interactions of interest and ignore irrelevant ones.

**Example:**

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThat();  // No warning; call is ignored silently.
mock_foo.DoThis(); // Ok, expected call
```

This can keep your test output clean, especially when dependencies contain numerous uninteresting interactions.


### 3. StrictMock

A `StrictMock` turns uninteresting calls into test failures.

- If a mock method is called **without a matching** `EXPECT_CALL`, the test fails immediately.
- Use when you want to enforce comprehensive and precise verification of mock interactions.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThat();  // Test fails: unexpected call
mock_foo.DoThis(); // Ok, expected call
```

Strict mocks help prevent situations where your code under test silently calls methods you didn’t expect or intend.

---

## How To Use NiceMock, NaggyMock, and StrictMock Wrappers

These classes work by subclassing your mock class. You construct an instance of these wrappers instead of the bare mock class.

### Syntax

```cpp
NiceMock<MockClass> nice_mock(args...);
NaggyMock<MockClass> naggy_mock(args...);
StrictMock<MockClass> strict_mock(args...);
```

They inherit all constructors from the underlying mock class, so initialization parameters can be forwarded.

### Example

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(void, DoThat, ());
};

TEST(FooTest, Example) {
  NiceMock<MockFoo> nice_mock;
  NaggyMock<MockFoo> naggy_mock;
  StrictMock<MockFoo> strict_mock;

  EXPECT_CALL(nice_mock, DoThis());
  EXPECT_CALL(naggy_mock, DoThis());
  EXPECT_CALL(strict_mock, DoThis());

  nice_mock.DoThat();   // Allowed silently.
  naggy_mock.DoThat();  // Prints warning.

  // strict_mock.DoThat();  // Would cause test failure on unexpected call.

  nice_mock.DoThis();
  naggy_mock.DoThis();
  strict_mock.DoThis();
}
```

**Note:** `NiceMock` and `StrictMock` currently only work for mock methods defined directly in your mock class using `MOCK_METHOD`. If mock methods come from a base class, these wrappers may not affect their strictness.

---

## Key Differences Between Wrappers

| Feature                 | NiceMock             | NaggyMock (Default)  | StrictMock            |
|-------------------------|---------------------|---------------------|-----------------------|
| Uninteresting calls     | Allowed silently     | Warning printed     | Test fails            |
| Unexpected calls        | Test fails          | Test fails          | Test fails            |
| Use case                | When you want quiet tests excluding irrelevant mocks | Default; useful during test dev and debugging | Enforce no unexpected calls; strict verification |

---

## Best Practices and Recommendations

- **Default wrapper:** Currently, plain mocks and `NaggyMock` share the same behavior.

- **Transition plan:** Future versions may make `NiceMock` the default to reduce noise.

- **Use `StrictMock`** when you want to avoid silent errors and enforce precise call verification.

- **Use `NiceMock`** when the test is focused on some interactions and you want to ignore uninteresting calls to reduce maintenance overhead.

- **Use `NaggyMock`** during development or debugging to get warnings about unexpected usage without failing immediately.

- Avoid nesting wrappers, e.g., `NiceMock<StrictMock<MockFoo>>`, which is unsupported.

- Make sure your mock class destructor is virtual for proper behavior.

---

## Troubleshooting

- **Uninteresting calls printing warnings when using `NiceMock`?**
  - Ensure all mock methods are defined directly in the mocked class, not inherited.

- **StrictMock not failing on unexpected calls?**
  - Check that you're not nesting wrappers and the mock methods are `MOCK_METHOD`-defined in the exact class.

- **Why does the default mock print warnings on calls without expectations?**
  - This helps detect missing expectations and unintended calls but can be suppressed with `NiceMock`.

- **Unexpected calls despite using `Expect_CALL`?**
  - Confirm that the `EXPECT_CALL` matches argument types and matchers exactly.

- **Memory leaks or verification not triggered?**
  - Make sure mock objects are properly destroyed and consider calling `Mock::VerifyAndClearExpectations()` explicitly.

---

## Summary

GoogleMock’s `NiceMock`, `NaggyMock`, and `StrictMock` wrappers empower you with fine-grained control over how uninteresting and unexpected calls on mock objects are handled. The choice of wrapper impacts test verbosity, feedback, and strictness, allowing you to tailor your testing strategy from lenient to rigorous.

By applying these wrappers conscientiously, you ensure that your tests provide meaningful feedback with appropriate sensitivity to unexpected behaviors.

---

## Additional Resources

- [Mocking Reference](../reference/mocking.md) — for a comprehensive view of mocking constructs.
- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) — practical advice and examples.
- [Expectations, Actions, Cardinalities, and Matchers](../mocking-actions/actions-and-expectations.md) — in-depth API details.
- [GoogleTest Primer](../../googletest-guides/getting-started/primer.md) — foundational concepts.

---

## Source Files

- `googlemock/include/gmock/gmock-nice-strict.h` contains the implementation and usage details of these wrappers.

---

## Diagram: Mock Object Behavioral Control Flow

```mermaid
flowchart TD
  Start([Test begins]) --> CreateMock["Create Mock Object"]

  CreateMock -->|Use NiceMock| Nice[NiceMock]
  CreateMock -->|Use NaggyMock| Naggy[NaggyMock (default)]
  CreateMock -->|Use StrictMock| Strict[StrictMock]

  subgraph Uninteresting Call Handling
    direction TB
    CallUninteresting["Uninteresting Mock Method Call"]
    CallUnexpected["Unexpected Mock Method Call"]
    CallExpected["Expected Mock Method Call"]
  end

  Nice --> CallUninteresting
  Naggy --> CallUninteresting
  Strict --> CallUninteresting

  CallUninteresting -->|NiceMock| AllowSilently["Allowed silently"]
  CallUninteresting -->|NaggyMock| Warn["Warning printed"]
  CallUninteresting -->|StrictMock| Fail["Test failure"]

  CallExpected --> AllowNormal["Allow as normal"]
  CallUnexpected --> Fail

  AllowSilently & Warn & Fail & AllowNormal --> Continue[Test continued or failed accordingly]
```
