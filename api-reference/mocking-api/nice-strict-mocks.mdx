---
title: "Mock Object Strictness Policies"
description: "Learn to apply NiceMock, NaggyMock, and StrictMock wrappers to control how uninteresting or unverified mock interactions are handled in your tests—allowing, warning, or error behaviors for improved test maintainability."
---

# Mock Object Strictness Policies

Control how your mock objects handle calls that are not explicitly expected by leveraging `NiceMock`, `NaggyMock`, and `StrictMock` wrappers. These wrappers adjust the behavior for uninteresting or unverified mock interactions in your tests — either allowing them silently, issuing warnings, or treating them as errors. This layered control improves test maintainability and clarity in mocking behavior.

---

## Understanding Mock Strictness Wrappers

When writing tests using GoogleMock, methods of your mock objects can be called in ways you might not explicitly care about or verify. These are called *uninteresting calls* — calls on mock methods without any `EXPECT_CALL` specifications. Handling these calls properly is crucial for test readability, noise reduction, and enforcing strictness policies.

There are three primary wrappers you apply to your mock class to modify this behavior:

### 1. `NiceMock`

- **Behavior:** Allows all uninteresting calls silently without warnings or failures.
- **Use case:** When you want clean test outputs and don’t care about calls besides those you explicitly expect.
- **How it works:** `NiceMock<MockFoo>` subclasses your mock class and silently allows uninteresting calls.

### 2. `NaggyMock`

- **Behavior:** Prints a warning on uninteresting calls but allows the test to continue.
- **Use case:** Useful when you want to see unexpected calls but not fail the test.
- **How it works:** `NaggyMock<MockFoo>` subclasses your mock class and emits warnings for uninteresting calls.

### 3. `StrictMock`

- **Behavior:** Treats any uninteresting calls as test failures.
- **Use case:** When you want to enforce strict test coverage, ensuring all calls are expected.
- **How it works:** `StrictMock<MockFoo>` subclasses your mock and fails the test on uninteresting calls.

Currently, raw mock objects (e.g., simply `MockFoo`) behave like `NaggyMock` by default. Future versions plan to make raw mocks behave like `NiceMock` instead, reducing noise by default.

## Constructing Strictness-Wrapped Mocks

The wrappers act like subclasses of your mock class that inherit constructors, allowing you to pass through any constructor arguments:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Assuming MockFoo has constructor MockFoo(int, const char*)
NiceMock<MockFoo> nice_mock(5, "example");
NaggyMock<MockFoo> naggy_mock(5, "example");
StrictMock<MockFoo> strict_mock(5, "example");
```

These wrappers strictly forbid nesting, for example, `NiceMock<StrictMock<MockFoo>>` is unsupported.

## Recommended Usage Patterns

- **Use `NiceMock`** for most cases to keep tests maintainable and reduce noise by ignoring uninteresting calls.
- **Use `NaggyMock`** during development or test debugging phases to see warnings about unexpected calls sans failures.
- **Use `StrictMock`** sparingly when you need exact call verification and want tests to fail on any unexpected interaction.

You can also explicitly mark which mock objects are allowed to leak without verification:

```cpp
Mock::AllowLeak(&mock_obj);
```

## Common Scenarios and Examples

### Suppressing Uninteresting Call Warnings with NiceMock

When you have methods that may be called but are not worth adding explicit expectations for, wrap your mocks like this:

```cpp
NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomethingImportant());

// Calls to other methods like mock_foo.SomeOtherMethod() won’t cause warnings.
```

### Warning About Uninteresting Calls with NaggyMock

```cpp
NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomethingImportant());

mock_foo.SomeOtherMethod();  // Prints warning but allows test to continue.
```

### Enforcing Strict Calls with StrictMock

```cpp
StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoSomethingImportant());

mock_foo.SomeOtherMethod();  // Test fails immediately with error.
```

### Wrapping Mocks With Non-Default Constructors

If your mock class has custom constructors, all wrappers support forwarding:

```cpp
class MockBar {
 public:
  explicit MockBar(const std::string& name);
  MOCK_METHOD(void, Foo, (), ());
};

NiceMock<MockBar> bar("TestName");
bar.Foo();
```

## Internals: How It Works

These wrappers inherit from GoogleMock's internal implementations that register the strictness policy with the mock system upon construction and unregister on destruction. This ensures that:

- The constructor and destructor of your mock class run with the assigned strictness.
- The size of the wrapper matches the base mock class (no padding).

They only affect mock methods defined directly in your mock class using `MOCK_METHOD` macros.

## What You Should Avoid

<Warning>
- Do **not** nest strictness wrappers (e.g., `NiceMock<StrictMock<T>>`) as this is unsupported.
- Avoid applying strictness wrappers to mock classes that already have one applied.
- Don't expect strictness wrappers to control base-class-defined mock methods in all compilers.
</Warning>

## Troubleshooting Tips

<AccordionGroup title="Common Issues with Mock Strictness Policies">
<Accordion title="Uninteresting calls still cause warnings with NiceMock">
Check if the mock method is defined in a base class instead of your mock class. Wrappers only affect mock methods directly defined in your mock class.
</Accordion>
<Accordion title="Nesting Wrappers Causes Compile-Time Errors">
Ensure you apply strictness wrappers only once. Wrap your mock class with exactly one of `NiceMock`, `NaggyMock`, or `StrictMock`.
</Accordion>
<Accordion title="Unexpected calls behave differently than uninteresting calls">
Only uninteresting calls (calls to methods with no expectations) are affected by wrappers. Unexpected calls (calls not matching any expectation) always lead to errors.
</Accordion>
</AccordionGroup>

## Additional Resources

- [Mock Object Definition](https://google.github.io/googletest/reference/mocking.html#mock-object-definition)
- [Using Mocks in Tests](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks-in-tests)
- [The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#nice-strict-naggy)
- [GoogleMock FAQ - When to use NiceMock or StrictMock](https://google.github.io/googletest/gmock_faq.html#nice-strict-mocks)

<Source url="https://github.com/google/googletest" paths={[{"path": "googlemock/include/gmock/gmock-nice-strict.h", "range": "1-163"}]} />

---

### How It Fits In The Bigger Picture

This page builds on mocking fundamentals from the [Mock Object Definition](https://google.github.io/googletest/api-reference/mocking-api/mock-object-definition) and the testing workflows outlined in [Using Mocks in Tests](https://google.github.io/googletest/guides/core-testing-workflows/mocking-basics). It is part of the Mocking API section of our API Reference.

By mastering strictness wrappers, you gain control over noise, test robustness, and flakiness, enabling you to tailor GoogleMock to your project's stability requirements.

---