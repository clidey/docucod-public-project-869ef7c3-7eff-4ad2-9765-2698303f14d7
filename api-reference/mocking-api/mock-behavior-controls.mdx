---
title: "Mock Behavior: Nice, Naggy, Strict Modes"
description: "Describes API classes and macros for controlling responses to uninteresting mock calls, including NiceMock, NaggyMock, and StrictMock. Enables users to precisely manage warnings and failures during test runs."
---

# Mock Behavior: Nice, Naggy, Strict Modes

Google Mock lets you finely control how your mock objects react to calls that you did not explicitly expect. This page documents the **NiceMock**, **NaggyMock**, and **StrictMock** API classes and macros, which provide user-friendly ways to configure how warnings and failures are generated for _uninteresting mock calls_. These controls help you manage test output to focus on real issues and avoid noise or missed errors.

---

## Understanding Uninteresting Mock Calls

When a mock method is called during a test, Google Mock classifies it as:

- **Expected Call:** The call matches an `EXPECT_CALL` expectation.
- **Uninteresting Call:** The call has no matching `EXPECT_CALL` expectation (no explicit expectation for that method/args).
- **Unexpected Call:** The call matches at least one expectation but none of these are currently active or it violates cardinality or argument matchers.

By default, **uninteresting calls generate warnings** during test execution to notify you that the mock was called unexpectedly, though the test itself will not fail.

Google Mock lets you modulate this behavior on a per-mock-object basis, using three modes that differ in their reactions to uninteresting calls:

| Mode         | Reaction to Uninteresting Calls                                              |
|--------------|-------------------------------------------------------------------------------|
| `NiceMock`   | **Suppresses warnings and errors for uninteresting calls.** Calls proceed silently with default actions. |
| `NaggyMock`  | **Default mode.** Issues warnings on uninteresting calls but allows test to continue.|
| `StrictMock` | **Fails the test immediately upon uninteresting calls.** Uninteresting calls are treated as errors. |


---

## Using NiceMock, NaggyMock, and StrictMock

These are template wrappers around a mock class:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
  MOCK_METHOD(int, Calculate, (int), ());
};

// NiceMock: Ignore warnings on uninteresting calls
NiceMock<MockFoo> nice_foo;

// NaggyMock: Default behavior, warn on uninteresting calls
NaggyMock<MockFoo> naggy_foo;

// StrictMock: Treat uninteresting calls as failures
StrictMock<MockFoo> strict_foo;
```

Each variant is a subclass of the original mock class, so it can be used wherever the mock type is accepted. You can also pass constructor arguments to these wrappers as needed, just like constructing the underlying mock.


### When to Use Each Mode

- Use **`NiceMock`** when you want to **silence all warnings** for uninteresting calls, usually to keep test logs clean where uninteresting calls are known and benign.
- Use **`NaggyMock`** (default) during test development or debugging, to receive warnings that can highlight missed expectations or unintended calls.
- Use **`StrictMock`** when you want to **fail tests immediately** on unexpected usages, ensuring tight control over interactions in sensitive or critical test scenarios.


### Important Notes

- These modes affect *only uninteresting calls* (methods called with *no* matching expectations). They do not suppress errors for *unexpected calls* (calls that don't match the argument expectations of existing `EXPECT_CALL`s).
- `NiceMock` and `StrictMock` currently only affect mock methods defined via `MOCK_METHOD` in the exact mock class `T`. Methods inherited or defined in base classes may not be subject to these behaviors.
- Nesting these modes is not supported (e.g., `NiceMock<StrictMock<MockFoo>>`).
- The mock class's destructor should be virtual for reliable behavior.

---

## Controlling Uninteresting Call Behavior Explicitly

Google Mock also provides API methods to control behaviors on a mock object:

| API Method                                    | Effect                                      |
|----------------------------------------------|---------------------------------------------|
| `Mock::AllowUninterestingCalls(mock_obj)`    | Allow uninteresting calls quietly (like NiceMock) |
| `Mock::WarnUninterestingCalls(mock_obj)`     | Warn on uninteresting calls (default NaggyMock behavior) |
| `Mock::FailUninterestingCalls(mock_obj)`     | Fail test on uninteresting calls (like StrictMock) |

These are lower-level APIs, usually wrapped by the template classes above.


---

## How Google Mock Reports Uninteresting Calls

- **NiceMock:** No warnings or failures are emitted. Calls proceed with default actions silently.
- **NaggyMock:** A warning message prefixed with `GMOCK WARNING` is printed, displaying the function call and default return value if applicable.
- **StrictMock:** A Google Test non-fatal failure is generated, failing the test but allowing it to continue. The message includes function call details.

You can adjust the verbosity of these messages further using the `--gmock_verbose` flag:

| Flag Value | Messages Shown               |
|------------|-----------------------------|
| `info`     | All informational, warnings, errors    |
| `warning`  | Only warnings and errors (default)     |
| `error`    | Only errors                          |


---

## Example Usage

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;
using ::testing::_;
using ::testing::Return;

class MockInterface {
 public:
  MOCK_METHOD(int, Foo, (int x), ());
};

TEST(MockBehaviorTest, NiceMockSuppressesWarnings) {
  NiceMock<MockInterface> nice_mock;
  EXPECT_CALL(nice_mock, Foo(42)).WillOnce(Return(1));

  int r = nice_mock.Foo(42);    // Matches expectation, no warnings
  r = nice_mock.Foo(17);       // Uninteresting call, silently allowed
  EXPECT_EQ(r, 0);             // Default return for int
}

TEST(MockBehaviorTest, NaggyMockWarnsOnUninterestingCalls) {
  NaggyMock<MockInterface> naggy_mock;
  EXPECT_CALL(naggy_mock, Foo(42)).WillOnce(Return(1));

  int r = naggy_mock.Foo(42);  // Matches expectation
  r = naggy_mock.Foo(17);      // Uninteresting call, emits warning
  (void)r;                    
}

TEST(MockBehaviorTest, StrictMockFailsOnUninterestingCalls) {
  StrictMock<MockInterface> strict_mock;
  EXPECT_CALL(strict_mock, Foo(42)).WillOnce(Return(1));

  int r = strict_mock.Foo(42);  // Matches expectation

  // The following call triggers a test failure due to uninteresting call
  // EXPECT_NONFATAL_FAILURE(strict_mock.Foo(17), "Uninteresting mock function");
}
```


---

## Related API Classes and Macros

### NiceMock

Represents a mock object that suppresses warnings on uninteresting calls.

__Usage:__
```cpp
NiceMock<MockClass> nice_mock;
```


### NaggyMock

Default mock behavior. Generates warnings on uninteresting calls.

__Usage:__
```cpp
NaggyMock<MockClass> naggy_mock;
```


### StrictMock

Similar to NaggyMock but treats any uninteresting call as test failure.

__Usage:__
```cpp
StrictMock<MockClass> strict_mock;
```


### Mock::AllowLeak()

Tells Google Mock not to treat a mock object as leaked (prevents failure from leak detection).

__Usage:__
```cpp
Mock::AllowLeak(&mock_obj);
```


### Mock::VerifyAndClearExpectations(void* mock_obj)

Verify all expectations on a mock object, clearing them afterward.

__Usage:__
```cpp
bool success = Mock::VerifyAndClearExpectations(&mock_obj);
```


### Selectors for Uninteresting Call Behavior on a Mock Object

| Method                        | Effect                                         |
|------------------------------|------------------------------------------------|
| `Mock::AllowUninterestingCalls` | Suppresses warnings and errors on uninteresting calls for that object |
| `Mock::WarnUninterestingCalls`  | Default mode (naggy) â€” warns on uninteresting calls |
| `Mock::FailUninterestingCalls`  | Treats uninteresting calls as failures (strict) |


---

## Best Practices

- Prefer using `NiceMock` or `StrictMock` wrappers rather than manipulating behaviors manually.
- Use **NaggyMock** (default) during development to catch unexpected calls while maintaining test flow.
- Avoid unnecessary use of `StrictMock` unless you want tests to be very strict about interaction.
- If uninteresting calls are expected but irrelevant, suppress warnings with `NiceMock` or use `EXPECT_CALL(...).Times(AnyNumber())` for those methods instead.
- Be cautious about mixing modes on the same mock object.
- Always define expectations (`EXPECT_CALL`) for calls you want verified; rely on `ON_CALL` for setting default behavior only.

---

## Troubleshooting and Tips

### Unexpected Warnings or Failures on Uninteresting Calls

- Make sure you understand whether the call is *uninteresting* (no matching expectation) or *unexpected* (argument mismatch).
- Add catch-all expectations using `_` matcher and `Times(AnyNumber())` to avoid warnings when uninteresting calls are legitimate.
- Use `NiceMock` to remove warnings if the test's focus doesn't require strict call verification.

### Mixing `MOCK_METHOD` in Base Classes

- `NiceMock`, `NaggyMock`, and `StrictMock` affect mocks defined with `MOCK_METHOD` in the exact mock class; if methods are in a base class, these wrappers might not work, and uninteresting calls may still warn or fail.

### Adjusting Verbosity

- Use the runtime flag `--gmock_verbose={info,warning,error}` to control the granularity of logged warnings and info messages.

### Stack Trace Details on Warnings

- At verbosity `info`, Google Mock includes stack traces for uninteresting calls; `warning` suppresses stack traces.

---

## Additional Resources

- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md)
- [gMock Cookbook: Nice, Strict, and Naggy](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#the-nice-strict-and-the-naggy)
- [Getting Started with Using Mocks](https://github.com/google/googletest/blob/main/docs/guides/mocking-and-advanced-testing/using-mocks-in-unit-tests.md)
- [Best Practices for Mock Usage](https://github.com/google/googletest/blob/main/docs/guides/mocking-and-advanced-testing/best-practices-for-mock-usage.md)
- [Setting Expectations, Actions, and Cardinalities](https://github.com/google/googletest/blob/main/docs/api-reference/mocking-api/expectations-actions-cardinalities.md)


---

For a holistic understanding of Google Mock behaviors and usage patterns, consult [Mocking and Matchers (Core Concepts)](/overview/core_fundamentals/mocking_and_matchers) and continue exploring the API references for defining mocks and setting expectations.


---

<Info>
Use `NiceMock`, `NaggyMock`, and `StrictMock` to tune your testing experience, balancing between noisy warnings and strict failure enforcement on unexpected mock calls.
</Info>

<Warning>
Do not overuse strict mocks as they can make tests brittle and tightly coupled to implementation details. Aim for clear, maintainable test contracts.
</Warning>