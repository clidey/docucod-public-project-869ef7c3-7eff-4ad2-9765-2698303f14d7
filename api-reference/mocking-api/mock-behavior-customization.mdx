---
title: "Mock Behavior Customization"
description: "Documentation on controlling mock behavior for uninteresting calls using NiceMock, NaggyMock, and StrictMock wrappers. Includes guidance on when and how to use strictness levels to surface test issues or reduce noise."
---

# Mock Behavior Customization

Control the behavior of mock objects in GoogleMock with regard to uninteresting calls—calls to mock methods that have no explicit expectations—using the `NiceMock`, `NaggyMock`, and `StrictMock` wrappers. This page guides you on when and how to select different strictness levels to either reduce warning noise or surface potential issues during testing.

---

## Understanding Uninteresting Calls and Mock Strictness

Uninteresting calls happen when your test code exercises mock methods without any `EXPECT_CALL` specifications for those methods. By default, GoogleMock treats mocks as "naggy", meaning it will allow these calls but emit warnings alerting you to them. However, sometimes this verbosity can be excessive, or conversely you may want to enforce strict checking of unexpected mock calls.

GoogleMock provides wrapper templates that customize this behavior on a per-mock-object basis:

- `NiceMock<MockClass>` — suppresses warnings for uninteresting calls, allowing them quietly.
- `NaggyMock<MockClass>` — (the default) warns when uninteresting calls are made.
- `StrictMock<MockClass>` — treats any uninteresting call as an error, failing the test.

Use these wrappers to express your intent clearly and to create more maintainable, focused tests.

---

## Choosing the Appropriate Mock Wrapper

### When to Use `NiceMock`

- When you want to avoid noisy warning messages for mock methods you do not care about in the current test.
- When your tests focus on specific interactions and you want to safely ignore "background" calls.
- When you want your test suite to be less brittle and easier to maintain during refactoring.

Example:

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());

// Calls to methods other than DoThis() will not generate warnings.
nice_foo.DoThis();
nice_foo.DoThat();  // No warning here
```

### When to Use `NaggyMock`

- When you want warnings if mock methods without expectations are called—helpful during test development or debugging.
- When you want the default GoogleMock verbosity.

Example:

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());

// Calls to uninteresting methods print warnings.
naggy_foo.DoThat();  // Warning generated
```

### When to Use `StrictMock`

- When you want to enforce that *all* mock calls are either expected or explicitly allowed.
- When you want your test to fail immediately on any unexpected interaction.
- When you require high confidence that no extraneous calls slip through unverified.

Example:

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());

// Calls to uninteresting methods cause test failure.
strict_foo.DoThat();  // Test fails here
```

---

## How to Create and Use Strictness Wrappers

These templates behave as transparent subclasses of your mock class, inheriting all constructors so you can pass constructor arguments through naturally.

```cpp
namespace testing {

template <typename MockClass>
class NiceMock : public MockClass {
 public:
  template <typename... Args>
  explicit NiceMock(Args&&... args)
      : MockClass(std::forward<Args>(args)...) {
    // Suppress warnings on uninteresting calls
  }
  // ...
};

template <typename MockClass>
class NaggyMock : public MockClass {
 public:
  template <typename... Args>
  explicit NaggyMock(Args&&... args)
      : MockClass(std::forward<Args>(args)...) {
    // Generate warnings on uninteresting calls
  }
  // ...
};

template <typename MockClass>
class StrictMock : public MockClass {
 public:
  template <typename... Args>
  explicit StrictMock(Args&&... args)
      : MockClass(std::forward<Args>(args)...) {
    // Treat uninteresting calls as test failures
  }
  // ...
};

}  // namespace testing
```

Just use these like your mock class to create mocks at the desired strictness level.

---

## Behavioral Differences Illustrated

### Warning Behavior

| Mock Type         | Behavior on Uninteresting Calls                                 |
|-------------------|-----------------------------------------------------------------|
| `NiceMock`        | Calls allowed silently without warnings                         |
| `NaggyMock` (default) | Calls allowed, emits warnings                                  |
| `StrictMock`      | Calls treated as errors, failing the test                       |

### Warning Example

Assuming a mock class `MockFoo` with method `DoThis()` and no expectation on `DoThat()`:

```cpp
NaggyMock<MockFoo> mock;
mock.DoThat();
// Output: Warning about uninteresting mock function call.
```

```cpp
NiceMock<MockFoo> nice_mock;
nice_mock.DoThat();
// No warnings, call quietly succeeds.
```

```cpp
StrictMock<MockFoo> strict_mock;
strict_mock.DoThat();
// Test failure: "Uninteresting mock function call".
```

---

## Practical Tips and Best Practices

- **Default Behavior:** Currently, mocks behave as `NaggyMock` by default; this may change to `NiceMock` in the future.
- **Suppressing Warnings Selectively:** Instead of making an entire mock `NiceMock`, use `EXPECT_CALL` with `.Times(AnyNumber())` on specific methods to indicate they are acceptable without explicit expectations.
- **No Nesting:** Do *not* nest `NiceMock`, `NaggyMock`, or `StrictMock` wrappers; they only operate correctly when applied directly.
- **Ensure Virtual Destructors:** The mock class should have a virtual destructor for correct behavior with these wrappers.
- **Choosing Strictness:** Use `StrictMock` sparingly to avoid brittle tests; prefer `NiceMock` for stability and maintainability.

---

## Code Examples

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(void, DoThat, (), ());
};

TEST(MockBehaviorTest, NiceMockSuppressesWarnings) {
  NiceMock<MockFoo> foo;
  EXPECT_CALL(foo, DoThis());

  foo.DoThis();
  foo.DoThat();  // No warning emitted
}

TEST(MockBehaviorTest, NaggyMockEmitsWarnings) {
  NaggyMock<MockFoo> foo;
  EXPECT_CALL(foo, DoThis());

  foo.DoThis();
  foo.DoThat();  // Warning about uninteresting call emitted
}

TEST(MockBehaviorTest, StrictMockTreatsUninterestingCallsAsErrors) {
  StrictMock<MockFoo> foo;
  EXPECT_CALL(foo, DoThis());

  foo.DoThis();
  foo.DoThat();  // Test failure: unexpected call
}
```

---

## Troubleshooting Common Issues

### Unexpected calls still occur with `StrictMock`
- Verify that your mock class methods are defined using `MOCK_METHOD` macros directly in the mock class.
- Ensure no nested `NiceMock` or `NaggyMock` wrappers exist around your `StrictMock`.

### Warnings appear even with `NiceMock`
- Warnings may still appear if mock methods are inherited from a base class. Only mock methods declared with `MOCK_METHOD` *directly* inside the class are controlled.
- Ensure your mock class has a virtual destructor to ensure correct wrapper behavior.

### Compiler errors with constructor forwarding
- Use the example constructor forwarding syntax or avoid complex constructor patterns inconsistent with the base mock class.

---

## Related Documentation

- [Using `NiceMock`, `NaggyMock`, and `StrictMock`](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#NiceStrictNaggy)
- [Mock Class Creation & `MOCK_METHOD`](../mocking-api/mock-class-creation.md)
- [Matchers Reference](../mocking-api/matchers-reference.md)
- [Actions & Cardinalities](../mocking-api/actions-and-cardinalities.md)

---

## Summary

Customizing mock strictness via `NiceMock`, `NaggyMock`, and `StrictMock` templates empowers you to control noise levels for uninteresting calls and enforce strict call verification. Use `NiceMock` for quieter tests, `NaggyMock` for default warning behavior, and `StrictMock` for rigorous checking of all mock interactions.

Integrate these wrappers thoughtfully in your tests to balance maintainability and correctness.

---