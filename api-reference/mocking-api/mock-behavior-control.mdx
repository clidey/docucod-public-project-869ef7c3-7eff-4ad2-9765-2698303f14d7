---
title: "Controlling Mock Behavior"
description: "Describes strategies for handling uninteresting calls through NiceMock, NaggyMock, and StrictMock. Guides users in selecting the proper strictness for mock usage and adjusting diagnostics for test needs."
---

# Controlling Mock Behavior

GoogleMock provides flexible control over mock objects' behaviors, especially when dealing with calls to mock methods that your tests might not explicitly care about — known as *uninteresting calls*. This page guides you through strategies to handle these calls gracefully using `NiceMock`, `NaggyMock`, and `StrictMock` wrappers, and helps you select the proper strictness to keep your tests clear, effective, and maintainable.

---

## Understanding Uninteresting Calls

An **uninteresting call** is a call to a mock method for which no explicit `EXPECT_CALL` expectation has been set. By default, GoogleMock treats such calls as allowed but prints a **warning**, alerting you that the test did not anticipate or explicitly expect this call.

Uninteresting calls differ from **unexpected calls**, which violate defined expectations (e.g., calls that do not match any `EXPECT_CALL`), causing test failures.


<Check>
**Tip:** Prefer to treat uninteresting calls deliberately, balancing noise reduction and test strictness based on your context.
</Check>

---

## Mock Wrappers: NiceMock, NaggyMock, and StrictMock

GoogleMock offers three wrapper templates to tailor behavior regarding uninteresting calls:

### 1. `NaggyMock<T>`

- **Default behavior**.
- Emits warnings whenever an uninteresting call occurs.
- Allows tests to proceed without failure.

### 2. `NiceMock<T>`

- Suppresses warnings on uninteresting calls.
- Useful when you expect many calls you don’t explicitly want to verify.
- Suitable for reducing noise in tests focusing on specific interactions.

### 3. `StrictMock<T>`

- Treats uninteresting calls as *test failures*.
- Enforces strict verification — any unexpected call signals an error immediately.
- Ideal for tests that require exact call validation.

### Usage

Wrap your mock class type inside these templates to adjust strictness:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Default (naggy) mock:
MockFoo mock1;

// Silence warnings for uninteresting calls:
NiceMock<MockFoo> mock2;

// Fail on any uninteresting calls:
StrictMock<MockFoo> mock3;
```

These wrappers inherit from the mock class, so you can use them seamlessly wherever the original mock is accepted.


<Note>
`NiceMock` and `StrictMock` only affect *uninteresting* calls. They do not influence *unexpected* calls (calls that violate expectations) — which always cause failures.
</Note>

---

## Choosing the Right Strictness Level

Selecting how strict your mocks should be depends on your testing goals:

- **Use `NiceMock`** when:
  - You want to suppress irrelevant warnings.
  - You only care about a few specific interactions.
  - You want cleaner test output and reduced flakiness.

- **Use `NaggyMock` (default)** when:
  - You want to be informed of calls your tests do not explicitly expect.
  - You are developing or debugging tests.

- **Use `StrictMock`** when:
  - It's critical to catch any unexpected calls.
  - You want maximum enforcement of call expectations.
  - Testing code with strict interface contracts.

<Warning>
Be cautious: strict mocks can make tests brittle and harder to maintain, especially when implementation details evolve.
</Warning>

---

## Controlling Diagnostic Verbosity

GoogleMock supports runtime control over the verbosity of diagnostic output related to mock calls via the `--gmock_verbose` flag or programmatically:

- **Levels:** `info`, `warning` (default), and `error`.

- **Effects:**
  - `info`: Prints detailed info for all calls, including stack traces.
  - `warning`: Prints warnings for uninteresting calls without stack traces.
  - `error`: Prints only errors, suppressing info and warnings.

Example:

```bash
test_binary --gmock_verbose=info
```

You can also set this flag inside tests:

```cpp
::testing::FLAGS_gmock_verbose = "error";
```

---

## Practical Examples

### Suppressing Uninteresting Call Warnings

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock;
EXPECT_CALL(mock, DoSomething());

// Calls to other methods produce no warnings.
mock.UnexpectedMethod();  // No warning printed.
```

### Enforcing Strict Call Verification

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock;
EXPECT_CALL(mock, DoSomething());

mock.DoSomething();  // Passes
mock.UnexpectedMethod();  // Test fails immediately
```

### Default Behavior with NaggyMock (the default behavior)

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock;
EXPECT_CALL(mock, DoSomething());

mock.DoSomething();                // Passes
mock.UnexpectedMethod();          // Warning printed but test continues
```

---

## Suppressing or Allowing Uninteresting Calls on Specific Methods

To suppress warnings on specific uninteresting methods without changing the mock wrapper, add:

```cpp
EXPECT_CALL(mock, SomeMethod(_)).Times(testing::AnyNumber());
```

This creates a catch-all expectation for `SomeMethod` that disables warnings for calls to it.

---

## Managing Mock Behavior Transitions

When you want expectations to retire after saturation, use `.RetiresOnSaturation()`:

```cpp
EXPECT_CALL(mock, Foo(42))
    .Times(2)
    .RetiresOnSaturation();
```

This means after two calls with the argument `42`, the expectation is no longer active, allowing other expectations to match subsequent calls.

---

## Troubleshooting Common Scenarios

<Accordion title="Uninteresting Calls Still Print Warnings With NiceMock">
If you see warnings despite using `NiceMock`, make sure all mock methods are defined using the `MOCK_METHOD` macro directly in the mocked class (not inherited).

Also, check if the mock class has a virtual destructor, as `NiceMock` may misbehave otherwise.
</Accordion>

<Accordion title="Unexpected Calls on StrictMock Failures">
Unexpected calls always cause test failures regardless of wrapper. Review your expectations and argument matchers to ensure they cover all allowed calls.
</Accordion>

<Accordion title="Reducing Verbosity in Noisy Tests">
Adjust `--gmock_verbose=error` or set verbosity inside tests to reduce the volume of messages you receive.
</Accordion>

---

## Summary

Controlling mock behavior using `NiceMock`, `NaggyMock`, and `StrictMock` is essential to managing test noise and correctness.

- Use **`NiceMock`** for quiet tests when uninteresting call warnings are unhelpful.
- Use **`NaggyMock`** (default) to receive warnings for uninteresting calls.
- Use **`StrictMock`** to enforce maximum strictness, turning uninteresting calls into errors.

Adjust verbose diagnostics with the `--gmock_verbose` flag to match your debugging needs.

---

## See Also

- [Basic Mocking with GoogleMock](../getting-started/configuration-and-first-use/using-googlemock-basics)
- [Setting Expectations and Actions](./expectations-actions)
- [Mocking Methods and Classes](./mock-methods)
- [gMock Cookbook](../guides/advanced-usage-and-integration/advanced-mocking)
- [Understanding Uninteresting vs Unexpected Calls](../docs/gmock_cook_book.md#NiceStrictNaggy)

---

## Further Tips

- Avoid blindly adding `EXPECT_CALL(...).Times(AnyNumber())` just to suppress warnings globally — prefer scoped use of `NiceMock` where applicable.
- Remember that strict mocks make tests more brittle; reserve them for critical interface verifications.
- Use verbosity levels strategically during debugging to get tracing info only when needed.
- Ensure your mock classes are correctly defined and destructors are virtual, for wrapper features to work reliably.

---
