---
title: "Mock Strictness Modes"
description: "Explanation and API for configuring mock behavior on uninteresting calls using NiceMock, NaggyMock, and StrictMock templates."
---

# Mock Strictness Modes

This page explains the mock strictness modes available in GoogleMock—specifically the **NiceMock**, **NaggyMock**, and **StrictMock** templates—and how they control the behavior of mock objects regarding uninteresting method calls. By understanding and applying these modes, you can configure the strictness level of your mock objects to best fit your testing needs, improving test maintainability and diagnostics.

---

## Overview

When writing tests with mock objects in GoogleMock, it's common to encounter calls to mock methods that are not explicitly expected by `EXPECT_CALL`—these are called *uninteresting calls*. The response to these uninteresting calls is controlled using three primary mock strictness modes:

- **NiceMock**: Silences warnings for uninteresting calls.
- **NaggyMock**: Warns about uninteresting calls (default behavior).
- **StrictMock**: Treats uninteresting calls as test failures.

Each mode provides a different balance between test strictness and usability, allowing you to select how strictly your mocks enforce method call expectations.

In GoogleMock, these are implemented as template wrappers around your mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Ignores uninteresting calls
NaggyMock<MockFoo> naggy_foo;    // Warns on uninteresting calls
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls
```


---

## Understanding Mock Strictness Modes

### 1. NiceMock

- **Behavior:** Suppresses warnings for any uninteresting calls (those with no matching `EXPECT_CALL`).
- **Use Case:** Use when you want your tests to ignore unimportant or irrelevant method calls without cluttering test logs.
- **Details:**
  - Allows uninteresting calls silently.
  - Still enforces expectations set with `EXPECT_CALL`.
  - Suitable for when you want to avoid warning noise.
  - Can be constructed with the same constructor arguments as the underlying mock.

**Example:**
```cpp
NiceMock<MockFoo> nice_mock("constructor_arg");
EXPECT_CALL(nice_mock, DoThis());
nice_mock.DoThis();     // Expected call passes
nice_mock.DoThat(true); // Uninteresting call, no warning or failure
```

---

### 2. NaggyMock

- **Behavior:** Generates warnings on uninteresting calls but allows tests to continue.
- **Use Case:** Useful during test development or debugging to alert about unexpected calls without stopping test execution.
- **Details:**
  - The default mode for mock objects created directly from mock classes.
  - Prints warnings with stack traces indicating the uninteresting call.
  - Helps identify unexpected interactions while not being as strict as `StrictMock`.

**Example:**
```cpp
NaggyMock<MockFoo> naggy_mock;
EXPECT_CALL(naggy_mock, DoThis());
naggy_mock.DoThis();     // Expected
naggy_mock.DoThat(true); // Warning emitted about uninteresting call
```

---

### 3. StrictMock

- **Behavior:** Treats all uninteresting calls as errors and fails the test immediately.
- **Use Case:** Apply when you want the most rigorous enforcement of expectations, preventing any unexpected interactions.
- **Details:**
  - Fails a test on any call with no matching `EXPECT_CALL`.
  - Useful to catch accidental or unintended code paths.
  - Should be used sparingly as this mode can make tests brittle.

**Example:**
```cpp
StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoThis());
strict_mock.DoThis();       // Passes
strict_mock.DoThat(true);   // Fails the test: unexpected uninteresting call
```

---

## How to Use Mock Strictness Modes

### Creating a Mock with Strictness Mode

Simply wrap your mock class with one of the strictness templates.

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

NiceMock<MockFoo> nice_foo;      // Ignores uninteresting calls
NaggyMock<MockFoo> naggy_foo;    // Warns on uninteresting calls
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls
```

If your mock has constructors with parameters, you can pass those parameters when constructing the strictness wrapper:

```cpp
NiceMock<MockBar> nice_bar("arg");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 5, 6, "e", "f", true, false);
```

### Identifying Strictness at Runtime

GoogleMock provides helper functions to identify the strictness level of an object:

- `Mock::IsNice(&mock)` returns true if the mock is a nice mock.
- `Mock::IsNaggy(&mock)` returns true if the mock is naggy.
- `Mock::IsStrict(&mock)` returns true if the mock is strict.

For example:

```cpp
MockFoo raw_foo;
EXPECT_TRUE(Mock::IsNaggy(&raw_foo)); // Raw mock defaults to NaggyMock behavior

NiceMock<MockFoo> nice_foo;
EXPECT_TRUE(Mock::IsNice(&nice_foo));

StrictMock<MockFoo> strict_foo;
EXPECT_TRUE(Mock::IsStrict(&strict_foo));
```

---

## What Happens on Uninteresting Calls?

| Mock Type  | Uninteresting Call Outcome               | Verbose Output                   |
|------------|----------------------------------------|---------------------------------|
| NiceMock   | No warning, call is silently allowed   | None                            |
| NaggyMock  | Warning logged, call proceeds           | Warning and stack trace logged  |
| StrictMock | Test failure recorded, call error       | Failure message and stack trace |


### Controlled by `--gmock_verbose` Flag

You can also control the verbosity of GoogleMock's logging for uninteresting calls using the flag:

- `--gmock_verbose=info` logs detailed info about calls including stack traces.
- `--gmock_verbose=warning` logs warnings (default).
- `--gmock_verbose=error` logs errors only.


---

## Common Usage Patterns

### Suppressing Warnings on Uninteresting Calls

When tests are noisy due to calls to uninteresting methods, prefer wrapping the mock in `NiceMock`:

```cpp
NiceMock<MockFoo> foo;
// No warnings even if an uninteresting method is called
```

### Enforcing Strict Call Expectations

Use `StrictMock` to catch any unexpected calls:

```cpp
StrictMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());
// Any call other than DoThis() causes failure
```

### Default Behavior Remains for Expected Calls

All modes enforce expectations set via `EXPECT_CALL`. Uninteresting calls are differentiated only by mode.

### Handling Non-Default Constructible Mocks

You can use strictness wrappers with constructors having parameters:

```cpp
NiceMock<MockBar> nice_bar("Hello");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 5, 6, "e", "f", true, false);
```

---

## Best Practices & Tips

- Choose **NiceMock** for less noisy and more maintainable tests by suppressing unimportant warnings.
- Use **NaggyMock** when developing tests or debugging to get warnings about unexpected calls without failing immediately.
- Reserve **StrictMock** for critical tests requiring precise control over code interactions.
- Define expectations carefully with `EXPECT_CALL` to correctly specify interesting interactions.
- Use catch-all expectations (`EXPECT_CALL(mock, Method(_)).Times(AnyNumber());`) to explicitly allow unexpected arguments.
- Be aware that `NiceMock` and `StrictMock` affect **only uninteresting calls**—unexpected calls (that mismatch expectations) always fail.
- Avoid nesting strictness wrappers (e.g., `NiceMock<StrictMock<MockFoo>>` is unsupported).
- Ensure that the mocked class has a **virtual destructor** to allow proper destruction when using strictness wrappers.

---

## Troubleshooting

### Unintended Test Failures Due to StrictMock

If you encounter failures caused by uninteresting calls:
- Check if all expected calls are specified.
- Add expectations or use `NiceMock` if you intend to ignore unrelated calls.

### Unwanted Warnings With Raw Mocks

Raw mock objects behave like `NaggyMock` by default. To silence, wrap the mock in `NiceMock`.

### Unexpected Exceptions with NiceMock and Non-Default Return Types

For mock methods returning types without default constructors, unexpected uninteresting calls can cause exceptions or test deaths. Always specify the expected behavior using `EXPECT_CALL` or provide default actions using `ON_CALL`.

### Interaction With Deletion in Mock Methods

Strictness modes handle uninteresting calls that delete the mock object specially by still issuing the appropriate warning or failure.

---

## Summary Diagram

```mermaid
flowchart TD
    user["User Instantiates MockObject"] --> strictnessMode
    subgraph Strictness Modes
      direction TB
      nice[NiceMock]
      naggy[NaggyMock]
      strict[StrictMock]
    end
    strictnessMode -->|Choose| nice
    strictnessMode -->|Choose| naggy
    strictnessMode -->|Choose| strict

    nice -->|Suppress Warning| uninteresting["Uninteresting Call"]
    naggy -->|Warn| uninteresting
    strict -->|Fail| uninteresting

    uninteresting -->|Perform Default Action| proceed["Call Proceeds"]
    proceed --> end["Test Continues"]

    strict -.->|Test Fails| fail["Test Fails on Uninteresting Call"]
```

---

## Additional Notes

- The strictness wrappers are thin subclasses that "inherit" the constructors of the underlying mock class, forwarding arguments to the base constructors.
- They only affect mock methods defined **directly** via `MOCK_METHOD` in the mock class; inherited mock methods might not respect the strictness modifier.
- Mixing multiple strictness wrappers is unsupported due to C++ inheritance restrictions.

---

## Links for Further Reading

- [Mock Strictness Modes Reference (this page)](/api-reference/mocking-api/strictness-modes)
- [gMock Cookbook - The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [gMock Cheat Sheet - Mock Strictness](https://google.github.io/googletest/gmock_cheat_sheet.html#MockStrictness)
- [Using Mocks in Tests (gMock for Dummies)](https://google.github.io/googletest/gmock_for_dummies.html#UsingMocks)

---

## Code Snippet Example

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

void Test() {
  NiceMock<MockFoo> nice_foo;
  StrictMock<MockFoo> strict_foo;

  // This will not warn about uninteresting calls
  nice_foo.DoThat(true);

  // This will cause a test failure if DoThat(true) has no expectation
  strict_foo.DoThat(true);

  EXPECT_CALL(strict_foo, DoThat(true));
  strict_foo.DoThat(true);  // Passes
}
```

---

## Summary

This document clarifies how to use GoogleMock's NiceMock, NaggyMock, and StrictMock templates to control warnings and failures triggered by uninteresting mock method calls. It shows usage examples, explains behavior differences, and advises on best practices for selecting the correct mode to balance test robustness, verbosity, and strictness.

---