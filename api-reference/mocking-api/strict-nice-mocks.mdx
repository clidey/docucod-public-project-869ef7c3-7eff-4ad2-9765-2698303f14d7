---
title: "Strict, Nice, and Naggy Mocks"
description: "Documents wrapper templates (NiceMock, NaggyMock, StrictMock) to control mock response to uninteresting calls, improving test flexibility and clarity for edge-case behaviors."
---

# Strict, Nice, and Naggy Mocks

GoogleMock provides three wrapper templates—`NiceMock`, `NaggyMock`, and `StrictMock`—which allow you to control how your mock objects handle *uninteresting calls*. These wrappers improve test flexibility and clarity by either suppressing warnings, emitting warnings, or treating uninteresting calls as errors.

---

## Overview

When you use a mock object without explicitly setting expectations (`EXPECT_CALL`) on all its methods, calls to methods with no such expectations are considered **uninteresting calls**. The default behavior for uninteresting calls is to perform the default action (often returning a default-constructed value or doing nothing) but also to emit a warning message. This can be noisy during tests if many such calls occur.

`NiceMock`, `NaggyMock`, and `StrictMock` modify how these uninteresting calls are treated:

| Mock Wrapper  | Behavior on Uninteresting Calls           | Typical Use Case                              |
|---------------|------------------------------------------|----------------------------------------------|
| `NiceMock`    | Silence warnings and allow the call silently | When uninteresting calls are expected and harmless |
| `NaggyMock`   | Warn on uninteresting calls (default)      | Default behavior, useful during test development |
| `StrictMock`  | Fail the test on uninteresting calls        | When you want to strictly enforce all interactions |

Note that all three wrappers are subclasses of your mock class, so they can be used anywhere your mock class instances are accepted.

---

## Usage

### Basic Example

Suppose you have a mock class `MockFoo`:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(int, Calculate, (int val));
};
```

You can instantiate wrapped mocks as:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock;
NaggyMock<MockFoo> naggy_mock;
StrictMock<MockFoo> strict_mock;
```

- `nice_mock` will ignore uninteresting calls silently.
- `naggy_mock` will print warnings for uninteresting calls.
- `strict_mock` will cause test failures on uninteresting calls.

All behave like `MockFoo` except for their strictness toward uninteresting calls.

### Constructors

These wrappers inherit the constructors of the underlying mock class. If your mock constructor takes arguments, the wrappers accept the same:

```cpp
NiceMock<MockBar> nice_bar("hello", 42);
StrictMock<MockBar> strict_bar('a', 'b', "data");
```

### Example Scenario

```cpp
TEST(MyTest, UsesNiceMock) {
  NiceMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());

  foo.DoThis();      // Expected call - passes
  foo.Calculate(10); // Uninteresting call - ignored silently
}

TEST(MyTest, UsesStrictMock) {
  StrictMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());

  foo.DoThis();      // Expected call - passes

  // The following uninteresting call causes failure:
  foo.Calculate(10); // Fails test due to strictness
}
```

---

## Details and Considerations

### What Are Uninteresting Calls?

An uninteresting call occurs when a mock method without an associated expectation is invoked. It means the test isn't currently interested in that call.

- If you *want* to allow occasional or unspecified calls, use `NiceMock` to silence the noise.
- If you want to catch unexpected interactions, use `StrictMock`.
- The default mock class behavior is naggy: uninteresting calls emit warnings.

### Unexpected vs Uninteresting Calls

- **Unexpected calls** occur when a call does not match *any* expectation at all and *there are* expectations on that method; these always cause test failures.
- **Uninteresting calls** occur when no expectation exists for the method called.

`NiceMock`, `NaggyMock`, and `StrictMock` affect *only* uninteresting calls, not unexpected calls.

### When to Use Each Wrapper

| Wrapper      | When to Use                                                    |
|--------------|----------------------------------------------------------------|
| `NiceMock`   | When you want clean tests, ignoring most uninteresting calls, especially during regular development. Ideal when you trust that only expected calls matter. |
| `NaggyMock`  | While developing tests, to know when unexpected calls happen indirectly. Can detect overlooked interactions. Default for raw mocks now. |
| `StrictMock` | When you want to lock down your test, ensuring only exactly specified calls occur. Useful in strict contract validation or high-risk systems. |

### Limitations

- These wrappers only affect mock methods defined *directly* within the mock class using `MOCK_METHOD`. They may *not* affect inherited mock methods, depending on the compiler.
- Nesting wrappers is **not supported**; for example, `NiceMock<StrictMock<MockFoo>>` is invalid.
- Mock classes should have *virtual destructors* to ensure correctness.

### Relationship with `EXPECT_CALL` and `ON_CALL`

- `EXPECT_CALL` sets required expectations and overrides uninteresting call policies for those calls.
- `ON_CALL` sets default behaviors without expectations and does not affect strictness.

### Best Practices

- Use `NiceMock` by default to reduce noise and maintenance overhead.
- Use `NaggyMock` when first developing tests to catch unexpected behaviors.
- Reserve `StrictMock` for final verification or when interaction strictness is critical.

---

## Code Examples

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, Calculate, (int val), ());
};

TEST(NiceMockExample, IgnoresUninterestingCalls) {
  NiceMock<MockFoo> nice_mock;

  EXPECT_CALL(nice_mock, DoThis());

  nice_mock.DoThis();       // Correctly expected, passes.
  nice_mock.Calculate(10);  // Uninteresting, silently ignored.
}

TEST(NaggyMockExample, WarnsUninterestingCalls) {
  NaggyMock<MockFoo> naggy_mock;

  EXPECT_CALL(naggy_mock, DoThis());

  naggy_mock.DoThis();       // Expected, passes.
  naggy_mock.Calculate(10);  // Uninteresting, warning emitted.
}

TEST(StrictMockExample, FailsUninterestingCalls) {
  StrictMock<MockFoo> strict_mock;

  EXPECT_CALL(strict_mock, DoThis());

  strict_mock.DoThis();       // Expected, passes.
  strict_mock.Calculate(10);  // Causes test failure due to strictness.
}
```

---

## Troubleshooting

### Q: My test emits warnings about "Uninteresting mock function call". How do I suppress them?

- Wrap your mock objects with `NiceMock`.
- Or add explicit expectations for those methods using `EXPECT_CALL(...).Times(AnyNumber())` if you intend to allow calls to these methods.

### Q: Why does `StrictMock` cause failures in my tests where the raw mock passes?

- `StrictMock` treats calls to methods without explicit expectations as errors. Add expectations or use `NiceMock` if you want to ignore these calls.

### Q: Will mixing `NiceMock` and `StrictMock` wrappers work?

- No, nesting these wrappers is unsupported and may cause unexpected behavior or compile-time errors.

### Q: Does wrapping a mock with `NiceMock` or `StrictMock` affect performance?

- The impact is minimal and only changes the handling of uninteresting calls.

---

## Summary

`NiceMock`, `NaggyMock`, and `StrictMock` provide flexible controls over how your mocks handle uninteresting calls:

- `NiceMock`: Suppresses warnings, to reduce noise and improve test maintainability.
- `NaggyMock`: Emits warnings on uninteresting calls (default behavior for raw mocks).
- `StrictMock`: Treats uninteresting calls as test failures, enforcing strict interaction contracts.

These wrappers fit naturally into typical testing workflows by allowing you to choose the desired level of strictness for your mocks, improving test clarity, maintenance, and robustness.

---

## References

- [gMock Cookbook: Nice, Strict, and Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [`EXPECT_CALL` Clause Reference](../reference/mocking.md#EXPECT_CALL)
- [`ON_CALL` Clause Reference](../reference/mocking.md#ON_CALL)
- [Mocking Reference](../reference/mocking.md)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)

---

## Implementation Details

These wrapper templates are implemented by inheriting from the original mock class and registering/deregistering with GoogleMock framework to change default behaviors on uninteresting calls. They preserve constructors of the base mock classes to allow seamless substitution.


<AccordionGroup title="Additional Notes and Tips">
  <Accordion title="Recommended Practices">
    <ul>
      <li>Prefer using <code>NiceMock</code> as default to reduce test noise.</li>
      <li>Use <code>StrictMock</code> when you must verify that no unexpected calls occur.</li>
      <li>Be cautious with <code>NaggyMock</code>, as warnings can cause brittle tests over time.</li>
      <li>Always mock methods you expect to call; unmocked calls are uninteresting and affected by these wrappers.</li>
    </ul>
  </Accordion>
  <Accordion title="Known Limitations">
    <ul>
      <li>Wrappers only affect mock methods declared directly with <code>MOCK_METHOD</code> in the mock class.</li>
      <li>Nesting wrappers (e.g. <code>NiceMock&lt;StrictMock&lt;T&gt;&gt;</code>) is unsupported.</li>
      <li>Mock classes need virtual destructors for wrapper correctness.</li>
    </ul>
  </Accordion>
</AccordionGroup>

---

## Related Pages

- [Defining Mocks and Mocked Methods](/api-reference/mocking-api/defining-mocks-and-methods)
- [Setting Expectations and Configuring Actions](/api-reference/mocking-api/setting-expectations-actions)
- [Matchers Reference](/api-reference/assertions-and-matchers/using-matchers)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)