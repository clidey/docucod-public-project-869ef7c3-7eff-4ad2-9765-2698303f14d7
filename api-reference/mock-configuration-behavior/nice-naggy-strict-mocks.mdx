---
title: "Nice, Naggy, and Strict Mocks"
description: "Describes wrapper APIs for controlling how uninteresting calls are treated in tests (silent, warn, or fail modes). Guides users on when and how to apply each behavioral strategy for robust testing."
---

# Nice, Naggy, and Strict Mocks

GoogleMock provides three wrapper templates—`NiceMock`, `NaggyMock`, and `StrictMock`—that control how mock objects respond to uninteresting calls during tests. These wrappers help you manage test noisiness, enforce stricter expectations, and balance robustness in your testing workflow by customizing mock behavior for calls without explicit expectations.

---

## Overview

When using GoogleMock, a **mock object** can receive calls to its methods that you have not explicitly specified expectations or behaviors for. These are called **uninteresting calls**. How these calls are handled can influence your test experience:

- Mock objects derived from `NiceMock` suppress warnings on uninteresting calls, allowing silent acceptance.
- Mock objects derived from `NaggyMock` warn about all uninteresting calls (this is currently the default behavior).
- Mock objects derived from `StrictMock` treat uninteresting calls as test failures.

Choosing the right mock wrapper helps you to maintain clean, useful test outputs and ensures your tests catch only relevant issues.

---

## When and Why to Use Each Wrapper

### 1. NiceMock

Use `NiceMock<T>` when you want your tests to **ignore uninteresting calls silently**. This is especially useful when:

- Certain mock methods don’t affect the test's outcome, and you don’t want warnings cluttering logs.
- Writing tests that focus on a specific interaction, allowing other calls to be overlooked safely.

**Example:**

```cpp
using ::testing::NiceMock;

class MockFoo : public Foo {
  MOCK_METHOD(void, DoSomething, (), (override));
  MOCK_METHOD(void, DoNotCare, (), (override));
};

NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, DoSomething());  // You only care about this call.

// Calls to DoNotCare() won't produce warnings.
nice_mock.DoNotCare();
```


### 2. NaggyMock

Use `NaggyMock<T>` to get **warnings on uninteresting calls**. This is the current default behavior and helps:

- Detect unexpected calls you're not explicitly testing but could indicate an underlying issue.
- Provide feedback during test development or debugging to catch accidental or unplanned interactions.

**Example:**

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_mock;
EXPECT_CALL(naggy_mock, DoSomething());

// Calling any other method without EXPECT_CALL will generate warnings.
naggy_mock.DoNotCare();  // Warning issued
```


### 3. StrictMock

Use `StrictMock<T>` when you want the most **rigorous behavior**, where **any uninteresting call results in a test failure**. This is appropriate when:

- You want full test coverage on interactions, ensuring no unexpected calls go unnoticed.
- You want to enforce strict contracts between components.

**Example:**

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoSomething());

// Any calls to methods without expectations fail the test.
strict_mock.DoNotCare();  // Fails the test
```

---

## Using the Wrappers

The wrappers work by deriving from your mock class. They “inherit” your mock's constructors, so you can create them just like the original mock, but gain the corresponding strictness or niceness.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Assume MockFoo is a mock class derived from Foo.
NiceMock<MockFoo> nice_foo;      // Ignores uninteresting calls.
NaggyMock<MockFoo> naggy_foo;    // Warns on uninteresting calls (default).
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls.
```

### Constructor Arguments

If your mock class has constructors, you can pass arguments through these wrappers seamlessly:

```cpp
NiceMock<MockBar> nice_bar("config");
NaggyMock<MockBar> naggy_bar(42);
StrictMock<MockBar> strict_bar('x', 10, "hello");
```

---

## Practical Considerations and Best Practices

- **Use `NiceMock` most of the time** when you do not need warnings to keep your test logs clean and your tests maintainable.
- **Use `NaggyMock` during development or debugging** to surface potential issues.
- **Reserve `StrictMock` for critical tests** where every interaction matters and unexpected calls must be caught.

> **Warning:** Overuse of strictness wrappers (`NaggyMock` and especially `StrictMock`) can lead to brittle tests that fail on harmless refactoring or innocuous behavior changes. Use them judiciously.

- Be aware that these wrappers **only affect uninteresting calls**, i.e., those for which you haven’t set any `EXPECT_CALL`. They do not suppress or change errors for unexpected calls—calls that don’t match any expectations.

- Wrappers only modify mock methods defined *directly* in the mock class with `MOCK_METHOD`. Mock methods in base classes may not be affected.

- Ensure your mock classes have virtual destructors for these wrappers to behave correctly.

---

## Example Flow: Adopting Strictness Levels in a Test

<Steps>
<Step title="Start with the default behavior">
Create mock objects as usual (e.g., `MockFoo`). Uninteresting calls generate warnings.
</Step>
<Step title="Switch to NiceMock to suppress warnings">
If warnings are too noisy or irrelevant, switch the mock type to `NiceMock<MockFoo>`.
</Step>
<Step title="Use NaggyMock to debug issues">
To detect unexpected usage without failing tests outright, switch to `NaggyMock<MockFoo>`.
</Step>
<Step title="Enforce strict interaction contracts">
If you want to catch all unexpected calls as errors, choose `StrictMock<MockFoo>`.
</Step>
</Steps>

---

## Troubleshooting

### Unexpected behavior with strictness modifiers

- If uninteresting calls still produce warnings or errors unexpectedly, verify whether the mock methods are defined directly in the mock class and if the destructor is virtual.

- Avoid nesting wrappers, e.g., `NiceMock<StrictMock<MockFoo>>` is not supported.

### Unexpected test failures with `StrictMock`

- Ensure that you have explicitly set expectations (`EXPECT_CALL`) for all methods being called.
- If you see failures due to calls you expect but didn't write `EXPECT_CALL` for, consider adding them or relaxing to a `NaggyMock` or `NiceMock`.

### No suppression of warnings

- Remember that `NiceMock` suppresses *only* uninteresting calls; unexpected calls and expectation mismatches still generate failures.

---

## Additional Notes

- The default mock object behavior in gMock is currently equivalent to `NaggyMock` but the default plan is moving towards `NiceMock` for better maintainability.

- You can still combine these wrappers with other gMock features like sequences, cardinalities, and default actions seamlessly.

---

## Summary

- `NiceMock`: Use to ignore uninteresting calls silently (quiet testing).
- `NaggyMock`: Use to warn on uninteresting calls (default, helpful during development).
- `StrictMock`: Use to fail tests on uninteresting calls (ensures strict interaction enforcement).

---

## References

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Using Mocks in Tests](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks-in-tests)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [Mocking APIs and Macros](../core-testing-apis/mocking-apis.md)

---

## Related Pages

- [Cardinalities and Call Expectations](../mock-configuration-behavior/cardinalities-reference.md)
- [Advanced Mocking Patterns and Best Practices](../../guides/core-workflows/advanced-mocking-patterns.md)
- [Troubleshooting Common Setup Issues](../../getting-started/troubleshooting-faq-support/common-setup-errors.md)

---

## Sample Code Snippet

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(void, DoThat, (), ());
};

// Nice mock: uninteresting calls are silent
NiceMock<MockFoo> nice;
EXPECT_CALL(nice, DoThis());
nice.DoThis();
nice.DoThat();  // No warning

// Naggy mock: uninteresting calls warn
NaggyMock<MockFoo> naggy;
EXPECT_CALL(naggy, DoThis());
naggy.DoThis();
naggy.DoThat();  // Warning printed

// Strict mock: uninteresting calls fail
StrictMock<MockFoo> strict;
EXPECT_CALL(strict, DoThis());
strict.DoThis();
strict.DoThat();  // Test fails
```

---