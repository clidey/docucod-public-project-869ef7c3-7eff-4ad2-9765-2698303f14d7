---
title: "Test Definitions and Execution"
description: "Reference on how to define and execute tests, including test macros, test suites, fixture support, and setup/teardown flows. Includes practical examples and explanations for structuring tests for maximum clarity and flexibility."
---

# Test Definitions and Execution

This reference page guides you through defining and executing tests in GoogleTest, focusing on test macros, test suites, fixture support, and the setup/teardown workflow. It provides clear examples and best practices for structuring your tests to maximize clarity, flexibility, and maintainability.

---

## 1. Overview of Test Definition

GoogleTest simplifies writing C++ tests by providing macros and structures that organize tests logically and efficiently. At its core, it offers **test cases**, **test suites**, and a **test runner** that automates execution and reporting.

### Key Concepts
- **TEST macro**: Defines a basic test function with a test suite and test name.
- **Test Suites and Cases**: Group related tests for easier management.
- **Test Fixtures**: Allow sharing of setup and teardown code among tests.

By structuring your tests properly, you enhance readability, reusability, and enable finer control over the testing process.

---

## 2. Defining Tests with the TEST Macro

The simplest way to define a test is using the `TEST` macro:

```cpp
TEST(TestSuiteName, TestName) {
  // Arrange - prepare test data or environment

  // Act - perform operation you want to test

  // Assert - verify expected outcomes using assertions
  EXPECT_EQ(actual, expected);
}
```

- The first parameter groups related tests.
- The second parameter identifies the test.

**User Flow Example:**

Suppose you are testing a function `Add(a, b)`:

```cpp
TEST(MathTests, Add_PositiveNumbers) {
  int result = Add(2, 3);
  EXPECT_EQ(result, 5);
}
```

Running this test will execute this function and report success or failure.

---

## 3. Organizing Tests with Test Suites and Fixtures

For more complex scenarios, especially when multiple tests share resources, use Test Fixtures.

### 3.1 Test Fixtures

Create a fixture class derived from `testing::Test`:

```cpp
class MyTestFixture : public testing::Test {
 protected:
  void SetUp() override {
    // Code to run before each test
  }
  void TearDown() override {
    // Code to run after each test
  }

  // Shared resources for tests
  int shared_resource;
};
```

Write tests using `TEST_F` macro which uses the fixture:

```cpp
TEST_F(MyTestFixture, TestOne) {
  shared_resource = 42;
  EXPECT_EQ(shared_resource, 42);
}
```

### 3.2 Setup/Teardown Flow

- **SetUp()** runs before each test.
- **TearDown()** runs after each test.

This flow ensures predictable and isolated test environments.

---

## 4. How Tests Are Executed

When tests run, GoogleTest discovers all defined tests, executes them, and reports results summarizing:

- Passed tests
- Failed tests with file location and failure notes
- Skipped or disabled tests

This automation reduces manual effort and provides immediate feedback.

---

## 5. Practical Examples

### 5.1 Simple Test Example

```cpp
#include <gtest/gtest.h>

int Add(int a, int b) {
  return a + b;
}

TEST(MathTest, AddSimple) {
  EXPECT_EQ(Add(1, 2), 3);
}
```

### 5.2 Test Fixture Example

```cpp
#include <gtest/gtest.h>

class DatabaseConnection {
 public:
  void Connect() { /* connect to DB */ }
  void Disconnect() { /* disconnect from DB */ }
  bool IsConnected() const { return connected_; }
 private:
  bool connected_ = true;
};

class DatabaseTest : public testing::Test {
 protected:
  void SetUp() override {
    db.Connect();
  }

  void TearDown() override {
    db.Disconnect();
  }

  DatabaseConnection db;
};

TEST_F(DatabaseTest, ConnectionWorks) {
  EXPECT_TRUE(db.IsConnected());
}
```

This test fixture establishes a valid database connection before each test
and tears it down afterwards.

---

## 6. Common Practices and Tips

- **Name Tests Clearly**: `TEST(MathTest, AddPositiveNumbers)` immediately communicates intent.
- **Use Fixtures for Shared Setup**: Prevent duplicate code and improve maintainability.
- **Keep Tests Independent**: Avoid dependencies between tests.
- **Use Assertions Effectively**: Choose the right assertion (`EXPECT_` vs `ASSERT_`) to control test flow.
- **Run Tests Frequently**: Catch regressions early.

---

## 7. Troubleshooting

- **Tests Not Running?** Ensure your test binary includes calls to `RUN_ALL_TESTS()`.
- **Setup Not Called?** Verify `SetUp()` is correctly overridden in your fixture.
- **Order Matters?** To enforce call order, consider integration with GoogleMock's sequences.

If you encounter issues, consult the [Troubleshooting Common Issues](../getting-started/troubleshooting-validation/troubleshooting-common-issues) guide.

---

## 8. Next Steps

Explore related documentation to deepen your test strategy:

- [Writing & Running Your First Test](../getting-started/project-setup-first-run/writing-running-first-test)
- [Test Organization and Suites](../guides/writing-tests/test-organization-suites)
- [Mocking Framework](../api-reference/mocking-framework/mock-methods)
- [Assertions and Expectations](../api-reference/core-api/assertions)

Leverage these resources to build robust, maintainable, and expressive tests with GoogleTest.

---

## 9. Additional Resources

- [gMock for Dummies](../gmock_for_dummies.md): Simplified introduction to mock objects.
- [Mocking Reference](../docs/reference/mocking.md): Details on mocking syntax and APIs.
- [gMock Cookbook](../docs/gmock_cook_book.md): Recipes for common mocking scenarios.
- [Example Test Flow Diagram](https://google.github.io/googletest/)

These documents complement understanding how tests are defined and executed in GoogleTest.
