---
title: "Configuration & Flags"
description: "Explains runtime and compile-time configuration options available, including command-line flags controlling test execution, output, and debugging. Covers environment variable overrides where applicable."
---

# Configuration & Flags in GoogleTest

GoogleTest offers a flexible and rich set of runtime and compile-time configuration options designed to tailor your test execution, output, and debugging experience. These configurations empower you to control everything from test selection and repetition to output formatting and failure handling, ensuring GoogleTest fits seamlessly into your development and CI workflows.

---

## 1. Overview of Configuration Options

GoogleTest configurations primarily revolve around command-line flags and corresponding environment variables that influence test execution behavior and output. At compile time, you can also tweak specific macros to enable or disable features to suit your platform or environment.

These options cover immediate user needs such as:

- Selecting which tests to run via filters
- Defining test repetition and shuffling
- Configuring output format (console, XML, JSON) and verbosity
- Controlling assertion and failure behaviors
- Fine-tuning debugging aids like stack traces and colors

The following sections guide you through the important options to get the most out of GoogleTest.

---

## 2. Command-Line Flags & Environment Variables

GoogleTest recognizes several flags prefixed either by `--gtest_` or their environment variable variants. When a flag is present both as a CLI option and environment variable, the CLI flag takes precedence.

### Key Flags Explained

| Flag | Type | Purpose | Environment Variable |
|-------|------|---------|--------------------|
| `--gtest_filter` | string | Colon-separated list of positive and negative glob patterns to select tests to run (e.g., `Foo*` or `Foo.*-Bar.*`). | `GTEST_FILTER` |
| `--gtest_repeat` | int32 | Number of times to repeat tests. Negative for infinite repetition. Useful for flaky test detection. | `GTEST_REPEAT` |
| `--gtest_shuffle` | bool | Randomizes test execution order on each run. | `GTEST_SHUFFLE` |
| `--gtest_random_seed` | int32 | Seed for randomizing test order. Use 0 (default) for a seed based on current time. | `GTEST_RANDOM_SEED` |
| `--gtest_output` | string | Specifies output format and file/directory (e.g. `xml:filename.xml` or `json::output_dir/`). Supports `xml` (default) and `json`. | `GTEST_OUTPUT` |
| `--gtest_color` | string | Controls colored output: `yes`, `no`, or `auto` (default). | `GTEST_COLOR` |
| `--gtest_brief` | bool | If true, only test failures are printed to the console, omitting successes. | `GTEST_BRIEF` |
| `--gtest_print_time` | bool | Enables or disables printing elapsed time per test (default `true`). | `GTEST_PRINT_TIME` |
| `--gtest_catch_exceptions` | bool | If set, GoogleTest catches C++ exceptions and classifies them as test failures. Default is `true`. | `GTEST_CATCH_EXCEPTIONS` |
| `--gtest_fail_fast` | bool | Stops testing on the first failure if set to `true`. | `GTEST_FAIL_FAST` |
| `--gtest_list_tests` | bool | Lists all discovered tests without executing them. | `GTEST_LIST_TESTS` |
| `--gtest_also_run_disabled_tests` | bool | Includes tests marked disabled in the run. | `GTEST_ALSO_RUN_DISABLED_TESTS` |
| `--gtest_recreate_environments_when_repeating` | bool | If enabled, recreates test environments on each repetition; otherwise, setup is done once per the entire repeat cycle. | `GTEST_RECREATE_ENVIRONMENTS_WHEN_REPEATING` |


### Sample usage:

```bash
./my_test_binary --gtest_filter="MathTest.*:StringTest.*" --gtest_repeat=5 --gtest_shuffle --gtest_color=yes
```


### Filtering Insights

- A pattern consists of wildcard characters `?` for single characters and `*` for any substring.
- Positive and negative patterns are separated by a `-` (e.g. `Foo* -Foo.Bar` runs all tests starting with "Foo" except `Foo.Bar`).
- Filters apply to the concatenation of the test suite and test name as <code>TestSuite.TestName</code>.

---

## 3. Test Execution Control

### Repetition & Skipping

Use `--gtest_repeat=N` to run the tests multiple times. This approach is ideal for detecting flaky tests by running them repeatedly in an automated fashion.


default behavior is to run tests once.

### Shuffling

Enable test order shuffling with `--gtest_shuffle=true`. Combine this with seeding (`--gtest_random_seed=1234`) to reproduce flaky tests by rerunning with the failing seed.

### Disabled Tests

Disabled tests (prefixed with `DISABLED_`) are skipped by default. Include them by passing `--gtest_also_run_disabled_tests`.

---

## 4. Output Formatting & Logging

GoogleTest offers configurable console output and machine-readable formats.

### Console Output

- Colored output is auto-detected by default; override with `--gtest_color=yes` or `--gtest_color=no`.
- Use `--gtest_brief` to display only failures, leaving out passed tests.
- Use `--gtest_print_time` to toggle elapsed time display per test.

### Machine-Readable Output

Generate structured reports with `--gtest_output=`:

- Format: `xml` or `json`
- Path: specify output file or directory. If directory, files are generated with names based on the test binary.

Examples:

```bash
--gtest_output=xml:results.xml
--gtest_output=json::/tmp/test_outputs/
```

These reports can be imported into CI systems or test result viewers.

### Streaming Output

On Linux and macOS, stream test results live to a remote host and port with `--gtest_stream_result_to=host:port`.

---

## 5. Failure & Debugging Behavior

Control how GoogleTest handles failures and exceptions.

### Fail-Fast

Stop the entire test run immediately when a failure occurs with `--gtest_fail_fast`.

### Exception Handling

By default, GoogleTest catches C++ exceptions during tests and treats them as failures.
Disable this with `--gtest_catch_exceptions=0` if you want exceptions to propagate.

### Stack Traces

Control the depth of stack traces shown on failure with `--gtest_stack_trace_depth=N`. Limit verbosity to what's helpful.

### Debugging Breaks

Use `--gtest_break_on_failure` to trigger a debugger breakpoint on assertion failure.

### Throw on Failure

Use `--gtest_throw_on_failure` to convert failures into C++ exceptions, for integration with other test frameworks.

---

## 6. Environment Variable Overrides

Most flags may be overridden by environment variables by uppercasing and replacing `--gtest_` with `GTEST_`. For example:

| Flag | Env Var |
|----------------------------|------------|
| `--gtest_filter`           | `GTEST_FILTER`           |
| `--gtest_repeat`           | `GTEST_REPEAT`           |
| `--gtest_output`           | `GTEST_OUTPUT`           |
| `--gtest_color`            | `GTEST_COLOR`            |

This allows for flexible configuration in CI pipelines and runtime environments.

---

## 7. Compile-Time Macros for Advanced Tweaking

You can tweak GoogleTest behavior at compile time by defining control macros via compiler flags, typically starting with `GTEST_`.

Examples include:

- `DGTEST_HAS_PTHREAD=1` or `0` to force pthread threading support.
- `DGTEST_CREATE_SHARED_LIBRARY=1` to build GoogleTest as a shared library.
- `DGTEST_LINKED_AS_SHARED_LIBRARY=1` to indicate tests link against shared library.
- Flags to avoid macro name clashes, e.g. `DGTEST_DONT_DEFINE_TEST=1` to rename `TEST` macro to `GTEST_TEST`.

See the source [internal/gtest-port.h](https://github.com/google/googletest/blob/main/googletest/include/gtest/internal/gtest-port.h) for full macro options.

---

## 8. Practical Tips & Best Practices

- Always call `InitGoogleTest(&argc, argv)` or `InitGoogleMock(&argc, argv)` before running tests to ensure flag parsing.

- Use `--gtest_list_tests` during test discovery or CI integration to verify test availability without execution.

- Combine filtering and sharding environment variables (`GTEST_TOTAL_SHARDS`, `GTEST_SHARD_INDEX`) to split test execution across multiple machines.

- When debugging flaky tests, use `--gtest_repeat=-1 --gtest_shuffle --gtest_random_seed=1234` to reproduce failures deterministically.

- In large projects, control verbosity with `--gtest_brief` or custom listeners to avoid noisy output.

- Use the XML/JSON output for CI reporting and coverage analysis.

---

## 9. Troubleshooting Common Issues

### Tests Seem Not to Run

- Ensure your filter matches your test suites and test names.
- Use `--gtest_list_tests` to check registered tests.
- Check environment variable overrides.
- If using sharding, verify shard indices and counts.

### Link Errors with Runtime Libraries (Windows)

- Use `-Dgtest_force_shared_crt=ON` in CMake to align shared CRT usage.
- Ensure consistency between GoogleTest and your project build settings.

### Macro Name Clashes

- Use `-DGTEST_DONT_DEFINE_TEST=1` or similar macros to rename conflicting macros.

---

## 10. Example: Running Tests with Recommended Flags

```bash
./my_tests --gtest_filter="Math.*" \
  --gtest_repeat=10 \
  --gtest_shuffle \
  --gtest_color=yes \
  --gtest_output="xml:test_results/" \
  --gtest_fail_fast
```

This command runs all tests in the `Math` suite, repeats them 10 times, randomizes order, enables color output, generates XML reports in the designated directory, and stops on first failure.

---

## 11. Related Documentation

- [GoogleTest Getting Started Guide](https://github.com/google/googletest/blob/main/docs/quickstart.md)
- [Integration with CMake & Bazel](https://github.com/google/googletest/blob/main/docs/integration.md)
- [Writing Your First Test](https://github.com/google/googletest/blob/main/docs/write_first.md)
- [Advanced Usage of Filters and Sharding](https://github.com/google/googletest/blob/main/docs/advanced.md)
- [Mocking with GoogleMock](https://github.com/google/googletest/blob/main/docs/gmock.md)

---

This page focuses exclusively on how you can configure and control test behavior and output via runtime flags and compile-time macros, providing concrete guidance to help you master test execution tuning.


---

# Appendix: Full List of Commonly Used GoogleTest Flags

| Flag | Default | Description |
|-------|----------|--------------|
| `list_tests` | false | Lists all tests without running.
| `filter` | `*` | Glob pattern filter for tests to run.
| `repeat` | 1 | Number of test repetitions.
| `shuffle` | false | Randomize test order.
| `random_seed` | 0 (time-based) | Seed for shuffling.
| `output` | `xml` | Format and location of output files.
| `color` | `auto` | Enable colored output.
| `brief` | false | Only print failures.
| `print_time` | true | Print elapsed time per test.
| `catch_exceptions` | true | Catch exceptions and mark test failure.
| `fail_fast` | false | Stop on first failure.
| `also_run_disabled_tests` | false | Run disabled tests also.
| `debug_break_on_failure` | false | Cause debugger breakpoint on failure.
| `throw_on_failure` | false | Throw C++ exception on failure.
| `stack_trace_depth` | 100 | Max stack frames printed on failure.

Each can be set via command line or corresponding environment variables.


