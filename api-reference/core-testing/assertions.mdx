---
title: "Assertions Reference"
description: "Comprehensive list of built-in assertion macros (e.g., EXPECT_*, ASSERT_*) covering equality, exceptions, fatal/non-fatal failures, and edge cases. Each assertion details its syntax, parameters, return/side-effects, and usage tipsâ€”helping users write expressive, robust tests."
---

# Assertions Reference

A definitive guide to GoogleTest's comprehensive assertion macros, helping you write expressive, robust tests with confidence and precision.

---

## Overview of Assertions

GoogleTest provides a rich set of built-in assertion macros to verify conditions in your tests. They come in pairs:

- `EXPECT_*` macros generate **nonfatal** failures that allow the test function to continue.
- `ASSERT_*` macros generate **fatal** failures that abort the current test function immediately.

You can always append custom failure messages to assertions using the stream operator (`<<`), providing detailed context upon failure.

```cpp
EXPECT_TRUE(ptr != nullptr) << "Pointer must not be null";
```

---

## Categories of Assertions

GoogleTest assertions are organized into distinct categories, each addressing a class of test needs.

### 1. Explicit Success and Failure

#### SUCCEED
```cpp
SUCCEED();
```
Generates a test success. Useful for documenting expected success points, but does not cause test to pass alone.

#### FAIL
```cpp
FAIL();
```
Generates a fatal failure, returning immediately from the current void function.

#### ADD_FAILURE
```cpp
ADD_FAILURE();
```
Generates a nonfatal failure, allowing the test to continue.

#### ADD_FAILURE_AT
```cpp
ADD_FAILURE_AT("file.cc", 42);
```
Generates a nonfatal failure reported at specified file and line.

---

### 2. Generalized Assertions with Matchers

#### EXPECT_THAT / ASSERT_THAT
```cpp
EXPECT_THAT(value, matcher);
ASSERT_THAT(value, matcher);
```
Use powerful matchers to verify complex conditions with clear failure messages. For example:

```cpp
EXPECT_THAT(str, StartsWith("Hello"));
ASSERT_THAT(numbers, AllOf(Ge(5), Lt(10)));
```

See the [Matchers Reference](matchers.md) for the full matcher catalog.

---

### 3. Boolean Conditions

#### EXPECT_TRUE / ASSERT_TRUE
```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```
Asserts that a condition is true.

#### EXPECT_FALSE / ASSERT_FALSE
```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```
Asserts that a condition is false.

---

### 4. Binary Comparisons

These compare two values, requiring the types to support the corresponding operators.

| Assertion | Description                              |
|-----------|------------------------------------------|
| EXPECT_EQ / ASSERT_EQ | Verify `val1 == val2`               |
| EXPECT_NE / ASSERT_NE | Verify `val1 != val2`               |
| EXPECT_LT / ASSERT_LT | Verify `val1 < val2`                |
| EXPECT_LE / ASSERT_LE | Verify `val1 <= val2`               |
| EXPECT_GT / ASSERT_GT | Verify `val1 > val2`                |
| EXPECT_GE / ASSERT_GE | Verify `val1 >= val2`               |

**Important:**
- For pointers, `EXPECT_EQ` checks pointer equality, not string or object content. Use `EXPECT_STREQ` for C strings.
- Use `nullptr` in assertions for null pointer checks instead of `NULL` or `0`.

Example:

```cpp
ASSERT_EQ(expected_value, actual_value);
EXPECT_LT(actual_size, max_size);
```

---

### 5. String Comparison (C Strings and Wide Strings)

| Assertion         | Description                               |
|-------------------|-------------------------------------------|
| EXPECT_STREQ / ASSERT_STREQ   | Verify two C strings have identical contents. |
| EXPECT_STRNE / ASSERT_STRNE   | Verify two C strings differ in contents.       |
| EXPECT_STRCASEEQ / ASSERT_STRCASEEQ | Verify two C strings equal ignoring case.      |
| EXPECT_STRCASENE / ASSERT_STRCASENE | Verify two C strings differ ignoring case.     |

Wide strings (`wchar_t*`, `std::wstring`) are also supported and converted to UTF-8 in failure outputs.

Example:

```cpp
ASSERT_STREQ("hello", str);
EXPECT_STRCASEEQ(L"FOO", L"foo");
```

---

### 6. Floating-Point Comparison

Because floating-point comparisons are prone to rounding errors, GoogleTest provides specialized assertions:

#### EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ
Verifies two `float` values are approximately equal within 4 Units in the Last Place (ULPs).

#### EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ
Verifies two `double` values are approximately equal within 4 ULPs.

#### EXPECT_NEAR / ASSERT_NEAR
```cpp
EXPECT_NEAR(val1, val2, abs_error);
```
Verifies the absolute difference between `val1` and `val2` is within `abs_error`.

Be mindful that NaNs always cause failure; comparisons involving infinities are supported logically.

---

### 7. Exception Assertions

Use these to verify exception behavior (requires exceptions enabled).

#### EXPECT_THROW / ASSERT_THROW
```cpp
EXPECT_THROW(statement, ExceptionType);
```
Verifies `statement` throws the specified exception type.

#### EXPECT_ANY_THROW / ASSERT_ANY_THROW
Verifies `statement` throws any exception.

#### EXPECT_NO_THROW / ASSERT_NO_THROW
Verifies `statement` does not throw any exceptions.

Supports compound statements, e.g.: 

```cpp
EXPECT_THROW({ func(); cleanup(); }, MyException);
```

---

### 8. Predicate Assertions

Allow fine-grained predicates with detailed failure messages.

#### EXPECT_PREDn / ASSERT_PREDn
Check that a predicate function or functor of `n` arguments returns true.

Example:

```cpp
bool IsEven(int n) { return (n % 2) == 0; }
EXPECT_PRED1(IsEven, value);
```

#### EXPECT_PRED_FORMATn / ASSERT_PRED_FORMATn
Similar to `PREDn` but use a predicate-formatter that provides detailed failure explanations.

Example:

```cpp
AssertionResult IsPrime(const char* expr, int n) {
  if (CheckPrime(n)) return AssertionSuccess();
  return AssertionFailure() << expr << " is not prime";
}
EXPECT_PRED_FORMAT1(IsPrime, value);
```

Arguments are evaluated exactly once to prevent side effects.

---

### 9. Windows HRESULT Assertions

For testing Windows API calls that return `HRESULT` codes.

#### EXPECT_HRESULT_SUCCEEDED / ASSERT_HRESULT_SUCCEEDED
Verify that the expression returns a success `HRESULT`.

#### EXPECT_HRESULT_FAILED / ASSERT_HRESULT_FAILED
Verify that the expression returns a failure `HRESULT`.

Failure output includes the readable error message for the code.

---

### 10. Death Assertions

Verify that code causes the process to terminate, useful for validating fatal error conditions.

#### EXPECT_DEATH / ASSERT_DEATH
```cpp
EXPECT_DEATH(statement, regex_matcher);
```
Verifies that `statement` causes process termination and `stderr` output matches the given regular expression.

#### EXPECT_DEATH_IF_SUPPORTED / ASSERT_DEATH_IF_SUPPORTED
Runs `EXPECT_DEATH` if supported, otherwise does nothing.

#### EXPECT_DEBUG_DEATH / ASSERT_DEBUG_DEATH
Runs death test assertions only in debug mode; in release, executes `statement`.

#### EXPECT_EXIT / ASSERT_EXIT
```cpp
EXPECT_EXIT(statement, exit_predicate, regex_matcher);
```
Verifies that `statement` exits with status satisfying `exit_predicate` (e.g., `ExitedWithCode(0)`) and matching `stderr` output.

---

## Practical Tips and Best Practices

- Use `EXPECT_` macros to keep your tests running after a failure, unless failure is unrecoverable, then choose `ASSERT_`.
- Provide informative messages with `<<` to aid debugging.
- Avoid mixing test logic and assertion failure messages.
- For floating-point, prefer `EXPECT_FLOAT_EQ` or `EXPECT_NEAR` over simple equality.
- Use `EXPECT_THROW` family to test exception safety and error handling.
- When testing predicates, use `EXPECT_PREDn` or `EXPECT_PRED_FORMATn` for clear outputs.

## Common Pitfalls

- Comparing pointers with `EXPECT_EQ` does not compare contents; use string comparison macros for C strings.
- Avoid relying on side-effects in assertion arguments: they are evaluated exactly once but evaluation order is undefined.
- Macros like `EXPECT_DEATH` require the code under test to cause a process exit - only use in appropriate contexts.
- Don't mix `EXPECT_` and `ASSERT_` for the same condition; choose based on fatality of failure.

---

## Code Examples

### Basic Assertions
```cpp
TEST(FooTest, BooleanChecks) {
  EXPECT_TRUE(IsValid());
  ASSERT_FALSE(IsEmpty()) << "Should not be empty";
}
```

### Binary Comparison
```cpp
TEST(FooTest, IntegerEquality) {
  int expected = 42;
  int actual = ComputeAnswer();
  EXPECT_EQ(expected, actual) << "Answer does not match";
}
```

### String Assertions
```cpp
TEST(StringTest, CompareCStrings) {
  const char* expected = "hello";
  const char* actual = GetGreeting();
  EXPECT_STREQ(expected, actual) << "Greeting mismatch";
}
```

### Floating-Point Comparison
```cpp
TEST(FloatTest, ApproxEqual) {
  float expected = 3.14f;
  float actual = ComputePi();
  EXPECT_FLOAT_EQ(expected, actual) << "Pi is incorrect";
}
```

### Exception Testing
```cpp
TEST(ExceptionTest, ThrowsOnError) {
  EXPECT_THROW({ ThrowError(); }, std::runtime_error);
  EXPECT_NO_THROW({ SafeCode(); });
}
```

### Predicate Assertion
```cpp
bool IsEven(int n) { return n % 2 == 0; }

TEST(PredicateTest, UsesPred) {
  int val = 4;
  EXPECT_PRED1(IsEven, val);
}
```

### Death Test
```cpp
TEST(DeathTest, ExitsOnFailure) {
  EXPECT_DEATH({ FailAndExit(); }, "Fatal error");
}
```

---

## Troubleshooting

- **Assertion fails unexpectedly:** Review failure message and ensure arguments are correct. Use custom messages to capture more context.
- **Floating-point comparison fails:** Use floating-point specific assertions like `EXPECT_FLOAT_EQ` or `EXPECT_NEAR`.
- **EXPECT_THROW doesn't catch exceptions:** Verify exceptions are thrown with correct types.
- **Death test does not terminate:** Ensure code under test actually calls `exit` or causes fatal termination.
- **String comparison fails on `EXPECT_EQ`:** Use `EXPECT_STREQ` for C strings.

---

## Conclusion

Assertions form the backbone of your test verification strategy in GoogleTest. By using the rich variety of macros detailed above, you can precisely express the expected behavior of your code with useful failure diagnostics when things go wrong. Leverage predicate and matcher-based assertions for more complex scenarios, and death assertions for ensuring program stability under error conditions.


---

## Related Documentation

- [Matchers Reference](matchers.md)
- [GoogleMock for Dummies](gmock_for_dummies.md) for integrating assertions in mock-based tests
- [Advanced Assertions and Matchers](../guides/core-workflows/advanced-assertions-matchers) for deeper understanding
- [Test Structure & Execution API](../api-reference/core-testing/test-structure) for running and organizing tests

---

## Contributing and Source

Source and tests can be found at the [GoogleTest GitHub repository](https://github.com/google/googletest/tree/main).

---