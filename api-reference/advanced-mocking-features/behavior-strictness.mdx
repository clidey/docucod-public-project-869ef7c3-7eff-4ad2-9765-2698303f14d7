---
title: "Nice, Naggy, and Strict Mocks"
description: "Shows how to control mock object strictness policies using NiceMock, NaggyMock, and StrictMock wrappers. Explains the impact of each mode on test failures, warnings, and ignored calls, and recommends usage patterns."
---

# Nice, Naggy, and Strict Mocks

GoogleMock provides a powerful way to control how _strictly_ mock objects enforce expectations on mock method calls through three wrapper templates:

- `NiceMock<T>` — suppresses warnings on uninteresting calls
- `NaggyMock<T>` — prints warnings on uninteresting calls (default behavior)
- `StrictMock<T>` — fails the test on uninteresting calls

This page explains how to use these wrappers and the impact each has on test behavior, failure reporting, and troubleshooting. It also offers best practices to help you write maintainable and effective mocks.

---

## Understanding Mock Strictness

In GoogleMock, an **uninteresting call** is a call to a mock method that has no `EXPECT_CALL` expectation set. By default, such calls:

- Are **allowed** (do not fail the test)
- Generate a **warning** message

Sometimes you want to change this behavior to suit your testing goals. The three mock wrappers provide a clear way to do this on a per-mock-object basis.

### 1. NaggyMock (Default)

- Prints a warning when encountering uninteresting calls
- Allows execution and default actions for such calls
- Helps highlight unexpected method usage during development

This is the default behavior if you use a plain mock object without wrappers.

### 2. NiceMock

- Suppresses warnings for uninteresting calls; silences the noise
- Allows calls and performs default actions as usual
- Useful when you don't care about some mock method calls and want clearer test output

### 3. StrictMock

- Treats uninteresting calls as test **failures**
- Calls without matching expectations immediately fail the test
- Helps enforce very precise control of interactions in tests

---

## How to Use NiceMock, NaggyMock and StrictMock

These wrappers are template classes that take your mock class as a parameter and create a subclass that alters uninteresting call behavior accordingly.

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Use just like the base mock class:
NiceMock<MockFoo> nice_foo;      // Suppresses warnings
NaggyMock<MockFoo> naggy_foo;    // Prints warnings (default)
StrictMock<MockFoo> strict_foo;  // Fails test

EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis();  // OK, no warnings on other uninteresting calls

EXPECT_CALL(strict_foo, DoThat(true));
strict_foo.DoThat(false);  // Fails test due to uninteresting call
```

### Constructor Inheritance

These wrappers “inherit” the constructors of your mock class, so if `MockFoo` takes arguments in its constructor, you can construct them directly:

```cpp
NiceMock<MockFoo> nice_foo(5, "test");
StrictMock<MockFoo> strict_foo("hello");
```

### Important Notes

- The wrappers only affect uninteresting calls on **mock methods defined using `MOCK_METHOD` directly in the mock class**.
- Mock methods inherited from base classes may **not** respect the wrapper behavior.
- Nesting wrappers is **not supported** (e.g., `NiceMock<StrictMock<MockFoo>>`).
- For best results, your mock class should have a **virtual destructor**.

---

## Behavior Comparison

| Mock Type      | Uninteresting Calls           | Expected Calls           | Unexpected Calls         |
|----------------|------------------------------|-------------------------|--------------------------|
| Plain/NaggyMock| Allow calls + warning printed | Succeeds if matched     | Fails test               |
| NiceMock       | Allow calls, no warning       | Succeeds if matched     | Fails test               |
| StrictMock     | Fails test                   | Succeeds if matched     | Fails test               |


---

## Practical Usage Tips

- **Use _NiceMock_ in most tests** to reduce noise from uninteresting calls.
- **Use _NaggyMock_ during active test development or debugging** to catch unexpected usage early.
- **Use _StrictMock_ for critical interfaces or for very precise interaction verification,** but sparingly because it can make tests brittle.
- If you encounter many uninteresting call warnings, consider adding catch-all expectations with `.Times(AnyNumber())` or use `NiceMock` to silence them.

Example of a catch-all expectation to allow any arguments:

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_))
    .Times(::testing::AnyNumber());
```

Avoid using catch-all expectations blindly—prefer using `NiceMock` where feasible.

---

## Diagnosing Issues with Mock Strictness

### Unexpected Failures with StrictMock

If your test suddenly starts failing with uninteresting call failures, check:

- Did your code call any mock methods without explicit `EXPECT_CALL`s?
- Could you add an explicit expectation or switch to `NiceMock` to suppress it?

### Warnings Flood When Using NaggyMock

If warning messages clutter your test output:

- Use `NiceMock` to suppress warnings for uninteresting calls you don't care about.
- Alternatively, specify explicit `.Times(AnyNumber())` if calls are expected but uninteresting.

### Unchanged Behavior of Expected and Unexpected Calls

No matter which wrapper you use, **expected calls (matching an `EXPECT_CALL`) and unexpected calls (not matching any `EXPECT_CALL`) behave identically:** they produce failures if violated.

---

## Integration with GoogleMock Framework

These strictness modifiers work by manipulating GoogleMock’s internal **reaction to uninteresting calls** when a mock instance is constructed and destroyed. Internally:

- `NiceMock`: Allows uninteresting calls without warnings
- `NaggyMock`: Prints warnings for uninteresting calls
- `StrictMock`: Causes test failures on uninteresting calls

This design ensures seamless integration and easy use.

---

## Example: Demonstrating Differences

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using namespace testing;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, Compute, (int x), ());
};

TEST(MockBehaviorTest, NaggyMockExample) {
  NaggyMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());
  foo.DoThis();  // Expected call
  foo.Compute(5);  // Uninteresting call: warning, but test passes
}

TEST(MockBehaviorTest, NiceMockExample) {
  NiceMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());
  foo.DoThis();  // Expected call
  foo.Compute(5);  // No warning for uninteresting call
}

TEST(MockBehaviorTest, StrictMockExample) {
  StrictMock<MockFoo> foo;

  EXPECT_CALL(foo, DoThis());
  foo.DoThis();  // Expected call
  EXPECT_NONFATAL_FAILURE(foo.Compute(5), "Uninteresting mock function call");
}
```

---

## Common Pitfalls and How to Avoid Them

- **Not using `EXPECT_CALL()` when required:** Leads to uninteresting calls which are warnings or failures based on mock strictness.
- **Mixing wrapped and unwrapped mocks:** The strictness behavior is per instance. Be consistent.
- **Expecting behavior on derived mock classes or base mock methods:** `NiceMock`, `NaggyMock`, and `StrictMock` might not affect methods declared in base classes.
- **Nesting wrappers:** Unsupported. Use only one strictness modifier wrapper.

---

## Summary

Using `NiceMock`, `NaggyMock`, and `StrictMock` allows you to control the “noise” and strictness related to uninteresting calls on mock objects. The choice affects test maintainability and debugging efficiency:

- **`NiceMock`**: Cleaner output, quieter tests, preferred for most use
- **`NaggyMock`**: Default, warns on uninteresting calls, useful for development
- **`StrictMock`**: Enforces strict behavioral contracts, fails fast on unexpected calls

Select the wrapper carefully to match your test strategy and maintain clarity in your tests.

---

## See Also

- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html#NiceStrictNaggy) — Quick reference for mock strictness
- [Mocking Basics](../core-apis/mocking-basics.md) — How to define and use mocks
- [Common Mocking Scenarios](../guides/advanced-mocking/common-mocking-scenarios.md) — Practical advice on using mocks
- [Understanding Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected) in the gMock Cookbook

---

This page is part of the advanced GoogleMock API reference focused on mock object behavior and strictness policies.

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googlemock/include/gmock/gmock-nice-strict.h", "range": "1-153"}]} />

---