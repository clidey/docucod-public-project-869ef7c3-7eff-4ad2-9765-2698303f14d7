---
title: "Assertions Reference"
description: "Full documentation of GoogleTest's rich assertion macros and utilities. Covers equality, comparison, fatal/non-fatal, and user-defined assertions, with examples and links to their core types."
---

# Assertions Reference

Comprehensive documentation covering GoogleTest's wide array of assertion macros and utilities. This reference guides you through asserting equality, comparisons, fatal and non-fatal failures, user-defined assertions, and more. Practical examples and links to core assertion types are provided to enable you to write robust tests efficiently.

---

## Understanding Assertions in GoogleTest

Assertions are the fundamental building blocks of tests in GoogleTest. They verify expectations and control test flow by indicating successes or failures.

- **EXPECT_** macros generate *nonfatal* failures that allow the test to continue.
- **ASSERT_** macros generate *fatal* failures that abort the current function immediately.

All assertions support custom failure messages streamed with `<<`, enabling clearer diagnostics.

Example:

```cpp
EXPECT_TRUE(my_condition) << "Expected condition to be true but was false.";
```


---

## Explicit Success and Failure Assertions

Use these when control flow rather than Boolean logic determines success or failure.

### SUCCEED

`SUCCEED()` explicitly marks a test assertion as successful. It does *not* guarantee the overall test success but documents intentional pass points.

```cpp
SUCCEED(); // Serves as a marker or checkpoint in the test
```

### FAIL

`FAIL()` generates a fatal failure and aborts the current void function.

Use case example:

```cpp
switch(expression) {
  case 1:
    // ... some checks ...
    break;
  default:
    FAIL() << "Unexpected case reached.";
}
```

### ADD_FAILURE

`ADD_FAILURE()` creates a nonfatal failure and allows continuation of the current function.

```cpp
ADD_FAILURE() << "This is a warning without aborting the test";
```

### ADD_FAILURE_AT

Generates a nonfatal failure at a specific source file and line location.

```cpp
ADD_FAILURE_AT("my_source_file.cc", 123) << "Failure recorded here";
```

---

## Generalized Assertion: Using Matchers

GoogleTest integrates closely with GoogleMock's matcher framework, enabling advanced assertions with `EXPECT_THAT` and `ASSERT_THAT`.

```cpp
EXPECT_THAT(value, ::testing::StartsWith("prefix"));
ASSERT_THAT(value, ::testing::MatchesRegex("\d+"));
```

Matchers let you write expressive and readable assertions, along with detailed failure explanations.

For extensive matcher reference, see [Matcher Library](matchers.md).

---

## Boolean Condition Assertions

These test simple Boolean conditions:

- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)` - verifies that `condition` is true.
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)` - verifies that `condition` is false.

Example:

```cpp
EXPECT_TRUE(IsValid(data)) << "Data should be valid.";
ASSERT_FALSE(IsEmpty(container)) << "Container should not be empty.";
```

---

## Binary Comparison Assertions

Compare two values to verify relational or equality conditions. These macros provide detailed output with mismatched values printed on failure.

### Equality and Inequality

| Macro            | Condition                          |
|------------------|----------------------------------|
| `EXPECT_EQ`      | `val1 == val2`                    |
| `ASSERT_EQ`      | `val1 == val2` (fatal)            |
| `EXPECT_NE`      | `val1 != val2`                    |
| `ASSERT_NE`      | `val1 != val2` (fatal)            |

*Note:* Pointer comparisons are by address. Use string-specific macros for C-string content comparison.

### Ordering Comparisons

| Macro            | Condition                          |
|------------------|----------------------------------|
| `EXPECT_LT`      | `val1 < val2`                    |
| `ASSERT_LT`      | `val1 < val2` (fatal)            |
| `EXPECT_LE`      | `val1 <= val2`                   |
| `ASSERT_LE`      | `val1 <= val2` (fatal)           |
| `EXPECT_GT`      | `val1 > val2`                    |
| `ASSERT_GT`      | `val1 > val2` (fatal)            |
| `EXPECT_GE`      | `val1 >= val2`                   |
| `ASSERT_GE`      | `val1 >= val2` (fatal)           |

Example:

```cpp
EXPECT_EQ(GetCount(), expected_count);
ASSERT_LT(value, max_limit) << "Value exceeds max limit.";
```

---

## C-String Comparison Assertions

These compare *contents* of **C-strings** and wide strings, not their addresses.

| Macro                 | Description                                    |
|-----------------------|------------------------------------------------|
| `EXPECT_STREQ`        | Equal strings                                 |
| `ASSERT_STREQ`        | Equal strings (fatal)                          |
| `EXPECT_STRNE`        | Not equal strings                             |
| `ASSERT_STRNE`        | Not equal strings (fatal)                      |
| `EXPECT_STRCASEEQ`    | Case-insensitive equality                     |
| `ASSERT_STRCASEEQ`    | Case-insensitive equality (fatal)             |
| `EXPECT_STRCASENE`    | Case-insensitive inequality                   |
| `ASSERT_STRCASENE`    | Case-insensitive inequality (fatal)           |

Example:

```cpp
EXPECT_STREQ(c_str1, c_str2) << "Strings differ.";
ASSERT_STRCASEEQ(wstr1, wstr2) << "Wide strings differ ignoring case.";
```

---

## Floating-Point Comparison Assertions

Due to rounding errors, exact equality is rarely practical with floats/doubles. Use these macros for approximate equality based on ULPs or user-defined tolerances.

| Macro               | Description                                                 |
|---------------------|-------------------------------------------------------------|
| `EXPECT_FLOAT_EQ`   | Checks approximate equality of two `float` values          |
| `ASSERT_FLOAT_EQ`   | Same as above, aborts on failure                             |
| `EXPECT_DOUBLE_EQ`  | Checks approximate equality of two `double` values         |
| `ASSERT_DOUBLE_EQ`  | Same as above, aborts on failure                             |
| `EXPECT_NEAR`       | Checks if two floating-point values are within a given absolute error tolerance |
| `ASSERT_NEAR`       | Same as above, aborts on failure                             |

Example:

```cpp
EXPECT_FLOAT_EQ(calculated_value, expected_value);
ASSERT_NEAR(computed_area, 3.14159, 0.0001);
```

---

## Exception Assertions

Requires that exceptions are enabled in your build.

| Macro              | Description                                |
|--------------------|--------------------------------------------|
| `EXPECT_THROW(stmt, exc_type)` | Asserts that `stmt` throws `exc_type`     |
| `ASSERT_THROW(stmt, exc_type)` | Same as above, aborts on failure            |
| `EXPECT_ANY_THROW(stmt)`       | Asserts that `stmt` throws any exception    |
| `ASSERT_ANY_THROW(stmt)`       | Same as above, aborts on failure            |
| `EXPECT_NO_THROW(stmt)`        | Asserts that `stmt` throws no exception     |
| `ASSERT_NO_THROW(stmt)`        | Same as above, aborts on failure            |

Example:

```cpp
EXPECT_THROW(FunctionThatMayThrow(), std::runtime_error);
ASSERT_NO_THROW(SafeFunction());
```

You may use compound statements:

```cpp
EXPECT_NO_THROW({
  int x = 5;
  DoSomethingWith(x);
});
```

---

## Predicate Assertions

Predicate assertions let you test functions or predicates more expressively than plain Boolean assertions.

### EXPECT_PRED*

Macros of different arities (from 1 to 5 arguments) that expect a predicate function returning `bool`. On failure, they print all argument values.

Example:

```cpp
bool IsPositive(int n) { return n > 0; }
EXPECT_PRED1(IsPositive, value);
```

You must cast overloaded or template functions to the appropriate type explicitly.

### EXPECT_PRED_FORMAT*

Allows you to write custom message formatting by defining predicate-formatter functions returning `AssertionResult`.

Example:

```cpp
::testing::AssertionResult IsEven(int n) {
  if (n % 2 == 0)
    return ::testing::AssertionSuccess();
  else
    return ::testing::AssertionFailure() << n << " is odd";
}

EXPECT_PRED_FORMAT1(IsEven, value);
```

This prints a more descriptive failure message than `EXPECT_TRUE(IsEven(value))`.

---

## Windows HRESULT Assertions

Windows-specific macros to assert success or failure of `HRESULT` return values.

| Macro                    | Description                               |
|--------------------------|-------------------------------------------|
| `EXPECT_HRESULT_SUCCEEDED(expr)` | Asserts `expr` is a success `HRESULT`     |
| `ASSERT_HRESULT_SUCCEEDED(expr)` | Same as above, aborts on failure           |
| `EXPECT_HRESULT_FAILED(expr)`    | Asserts `expr` is a failure `HRESULT`     |
| `ASSERT_HRESULT_FAILED(expr)`    | Same as above, aborts on failure           |

Example:

```cpp
CComPtr<IShellDispatch2> shell;
ASSERT_HRESULT_SUCCEEDED(shell.CoCreateInstance(L"Shell.Application"));
```

Failure output includes readable error messages alongside codes.

---

## Death Assertions

Verify that a piece of code causes the process to terminate unexpectedly, used to test fatal error pathways.

Supported platforms vary in implementation details, but GoogleTest abstracts this for you.

### EXPECT_DEATH

`EXPECT_DEATH(statement, matcher)` runs `statement` in a child process and verifies it terminates with a nonzero exit status and `stderr` output matches `matcher`.

Example:

```cpp
EXPECT_DEATH(DoSomethingDangerous(), "Fatal error occurred");
```

### ASSERT_DEATH

Fatal version that aborts on failure.

### EXPECT_DEATH_IF_SUPPORTED

Runs the death test only if supported on the platform.

### EXPECT_DEBUG_DEATH

Only runs death test assertions in debug mode; in release, just executes normally.

### EXPECT_EXIT

Verifies process termination with user-specified exit status predicate and matched error output.

Example:

```cpp
EXPECT_EXIT(TerminateNormally(), ::testing::ExitedWithCode(0), "Success");
```

---

## Best Practices and Tips

- Use `EXPECT_*` when it's acceptable for the test to continue after failure.
- Use `ASSERT_*` when failure should abort the current function to prevent undefined behavior.
- Stream clear, user-focused failure messages.
- For custom predicates, prefer `AssertionResult`-returning functions over bare Booleans for clearer diagnostics.
- Choose the right string comparison macros for your data types.
- In Death Tests, make sure to understand platform-specific behaviors and isolate tests sufficiency.

---

## Further Reading

- [Writing Effective Assertions](../guides/core-testing-workflows/writing-effective-assertions.md)
- [Matchers Reference](matchers.md)
- [GoogleTest Primer](primer.md)
- [Advanced GoogleTest Topics](advanced.md)
- [Mocking Reference (GoogleMock)](reference/mocking.md)

---

For detailed code examples, see the GoogleTest repository, especially the [googletest/test](https://github.com/google/googletest/tree/main/googletest/test) directory.

You can also explore sections like [Catching Failures](../advanced.md#catching-failures) to write tests that verify your own assertions and testing utilities.

---

<Info>
This page documents assertion macros specifically; related testing APIs, parameterized tests, and mocking features are documented separately.
</Info>
