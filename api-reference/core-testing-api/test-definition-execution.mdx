---
title: "Test Definition & Execution"
description: "Describes the core types, macros, and functions for defining and running test cases and test suites using GoogleTest. Includes registration, execution flow, and reporting basics for building maintainable tests. Learn how to structure tests clearly for automatic discovery and execution."
---

# Test Definition & Execution

GoogleTest enables writing and executing test cases and test suites with a clear and structured approach. This documentation details the core types, macros, and functions involved in defining, registering, executing, and reporting tests, empowering you to build maintainable and robust test suites.

---

## 1. Overview of Test Structures

Tests in GoogleTest are organized into test cases (or test suites) containing multiple test functions. Each test function verifies a particular behavior or scenario.

- **Test Suites:** Logical groupings of related test cases.
- **Test Cases:** Individual tests within suites, represented by `TEST` or `TEST_F` macros.

GoogleTest automatically discovers and manages these tests, executing them in a controlled environment and producing rich reports.

<Check>
To define tests effectively:
- Use `TEST` for simple tests.
- Use `TEST_F` for tests sharing common fixtures.
- Use assertions to validate expected outcomes.
</Check>

## 2. Defining Tests

### Writing Simple Tests

GoogleTest provides the `TEST` macro for defining a test without shared setup or teardown state:

```cpp
TEST(TestSuiteName, TestName) {
  // Arrange
  ...

  // Act
  ...

  // Assert
  EXPECT_EQ(actual, expected);
}
```

- The `TestSuiteName` groups tests logically.
- `TestName` is the individual test's identifier.

### Using Test Fixtures (`TEST_F`)

When multiple tests share setup and teardown procedures, define a test fixture class:

```cpp
class MyFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Setup code here.
  }

  void TearDown() override {
    // Cleanup code here.
  }

  // Shared members
  int shared_value_;
};

TEST_F(MyFixture, Test1) {
  // Use shared_value_
  EXPECT_TRUE(shared_value_ > 0);
}

TEST_F(MyFixture, Test2) {
  // Some other test
}
```

This pattern promotes reuse and reduces boilerplate.

<Note>
Ensure the fixture class inherits from `::testing::Test` and overrides `SetUp()` and/or `TearDown()` if needed.
</Note>

## 3. Test Registration and Discovery

GoogleTest automatically registers tests during program initialization. When tests are defined with `TEST` or `TEST_F`, GoogleTest records them with internal data structures enabling:

- **Automatic discovery** on test executable startup.
- **Filtering** tests by name or other attributes.
- **Parallel or sequential execution** controlled by command line flags.

This automation means you rarely, if ever, manually register tests.

## 4. Test Execution Flow

When you run your test executable:

1. GoogleTest initializes the framework and discovers all registered tests.
2. It applies any filters specified on the command line.
3. It runs each test in its own environment:
   - Creates the fixture (if used).
   - Calls `SetUp()`.
   - Executes the test body.
   - Calls `TearDown()`.
4. Reports successes, failures, and any fatal errors.

If a failure occurs, it is reported immediately, with the test continuing if possible depending on the assertion type.

## 5. Assertions and Failure Handling

To verify conditions within tests, GoogleTest provides:

- **Nonfatal assertions:** via `EXPECT_*`, the test continues after failure.
- **Fatal assertions:** via `ASSERT_*`, the test aborts immediately upon failure.

Use assertions like `EXPECT_EQ`, `EXPECT_TRUE`, `ASSERT_NE` to validate behavior.

Proper use of assertions ensures accurate diagnostics and efficient debugging.

## 6. Structuring Tests for Maintainability

- Name test suites and test cases meaningfully to express intent.
- Keep test functions focused; one logical verification per test.
- Leverage test fixtures to reduce duplication.
- Avoid interdependent tests to prevent cascading failures.

<Info>
Automatically generated test reports help you quickly locate failures and understand test coverage.
</Info>

## 7. Verifying and Cleaning Up Tests

- GoogleTest automatically verifies test expectations when tests finish.
- For mocks (using GoogleMock), expectations are verified on destruction.
- Optionally, you can force early verification with `Mock::VerifyAndClearExpectations()` for mocks.

## 8. Advanced Test Types

GoogleTest supports specialized test patterns:

- **Parameterized tests:** Run the same test logic with multiple inputs.
- **Typed tests:** Run tests over different types.
- **Death tests:** Verify that code triggers fatal failures as expected.

These features require additional macros and setup, but extend expressiveness significantly.

## 9. Best Practices and Common Pitfalls

- **Do not mix `EXPECT_CALL` and actual mock function calls out of order;** set expectations before exercising mocks.
- **Prefer meaningful assertions with detailed messages** to aid debugging.
- **Use fixtures for shared setup** but avoid state leakage across tests.
- **Leverage automatic test discovery**; do not manually register tests.

## 10. Troubleshooting

- If tests are not running, verify naming conventions and linkage.
- Use verbose mode (`--gtest_verbose`) to gain insight.
- Use test filtering (`--gtest_filter`) to isolate tests.

---

## Additional Resources

- [Assertions Reference](/docs/reference/assertions.md): For detailed info on assertions.
- [Creating and Using Mocks](/guides/core-testing-workflows/using-mocks.mdx): For test doubles.
- [Parameterized Tests Reference](/api-reference/core-testing-api/parameterized-tests): For advanced test patterns.
- [Death Tests Guide](/guides/advanced-and-best-practices/death-tests): For crash and error condition verification.

## Related Pages in This Documentation

- [Core Concepts & Terminology](/overview/architecture-concepts/core-concepts)
- [Test Discovery and Lifecycle](/concepts/architecture-overview/test-lifecycle)
- [Test Assertions](/guides/core-testing-workflows/test-assertions)

---

## Summary

This page covers the fundamentals of defining, running, and verifying tests using GoogleTest. It clarifies test structuring with `TEST` and `TEST_F`, explains the lifecycle of tests, and guides users on assertion usage, test registration, and best practices for maintainable, effective tests.

<AccordionGroup title="Sample Test Example">
<Accordion title="Simple Test">
```cpp
TEST(SimpleTest, Addition) {
  int result = 1 + 1;
  EXPECT_EQ(result, 2);
}
```
</Accordion>
<Accordion title="Test Fixture Example">
```cpp
class CalculatorTest : public ::testing::Test {
 protected:
   void SetUp() override {
     calculator_.Reset();
   }
   Calculator calculator_;
};

TEST_F(CalculatorTest, CalculatesSum) {
  EXPECT_EQ(calculator_.Add(3, 4), 7);
}
```
</Accordion>
</AccordionGroup>

<Tip>
Remember: tests must be defined before they run and tests containing expectations must have those expectations set before exercising the mocks.
</Tip>
