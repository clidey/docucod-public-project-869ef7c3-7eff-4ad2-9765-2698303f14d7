---
title: "Test Case and Suite Definition"
description: "Details API macros and classes for defining test cases and suites using TEST, TEST_F, and related constructs. Explains test organization, registration, inheritance, and life-cycle hooks allowing users to structure robust, maintainable unit tests."
---

# Test Case and Suite Definition

GoogleTest enables you to organize and define your tests with clear, maintainable constructs. This page explains the APIs and macros that let you define test cases, test suites, and test fixtures using the `TEST`, `TEST_F`, `TEST_P`, and related macros and classes. It also details lifecycle hooks, registrations, and inheritance strategies that empower you to build robust unit tests aligned with your code structure.

---

## Understanding Test Organization in GoogleTest

GoogleTest structures your tests hierarchically:

- **Test Program**: The executable containing all tests.
- **Test Suites (previously called Test Cases)**: Groupings of logically related tests.
- **Tests**: Individual test functions within test suites.

Each test is identified by its test suite name and test name (e.g., `FooTest.Bar`).

> **Note:** GoogleTest prefers the term _test suite_ over the older _test case_, aligning better with testing terminology.

### Test Suites and Test Fixtures

Test suites usually correspond to a class or module under test. You can associate a test fixture class with a test suite for shared setup, teardown, and common data.

A **test fixture class** derives from `testing::Test` and allows you to define shared objects and code for tests within the suite.

---

## Defining Individual Tests

You can define tests using the following macros:

### 1. `TEST(test_suite_name, test_name)`

Defines a simple, stateless test without a fixture. GoogleTest creates a fresh `::testing::Test` instance for each test.

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

- The first argument is the test suite name, usually representing the module or class under test.
- The second argument is the test name within that suite.

**Constraints:**
- Names must be valid C++ identifiers.
- Avoid underscores (`_`) in names to prevent name collisions and reserved identifier conflicts.

### 2. `TEST_F(test_fixture_name, test_name)`

Defines a test that uses a test fixture class.

```cpp
class QueueTest : public testing::Test {
 protected:
  void SetUp() override {
    q_.Enqueue(42);
  }

  void TearDown() override {
    // Cleanup code here
  }

  Queue<int> q_;
};

TEST_F(QueueTest, IsNotEmptyAfterEnqueue) {
  EXPECT_FALSE(q_.IsEmpty());
}
```

- The fixture class must derive from `testing::Test`.
- Use `SetUp()` and `TearDown()` for per-test initialization and cleanup.
- Each test gets a fresh fixture object.

### 3. `TEST_P(test_fixture_name, test_name)`

Defines **value-parameterized tests** using fixtures derived from `TestWithParam<T>`.

```cpp
class MyTest : public testing::TestWithParam<int> {};

TEST_P(MyTest, IsEven) {
  EXPECT_EQ(GetParam() % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyTest, testing::Values(2, 4, 6, 8));
```

- Allows you to easily run the same test logic across a range of values.
- Access parameters via `GetParam()`.

---

## Lifecycle Hooks

GoogleTest provides hooks to manage resource setup and teardown at different levels:

### Test Fixture Hooks

- `SetUp()`: Called before each test within the fixture.
- `TearDown()`: Called after each test.

Example:

```cpp
void SetUp() override {
  // code to initialize state before each test
}

void TearDown() override {
  // code to clean up after each test
}
```

### Test Suite Hooks (Shared across Tests in a Suite)

- `static void SetUpTestSuite()`: Runs **once** before the first test in the suite.
- `static void TearDownTestSuite()`: Runs **once** after the last test in the suite.

These hooks are used for expensive common setup, like database connections or shared environment preparation.

```cpp
class MySuiteTest : public testing::Test {
 public:
  static void SetUpTestSuite() {
    // Global setup
  }

  static void TearDownTestSuite() {
    // Global teardown
  }
};
```

**Best Practice:**
- Define these hooks public if needed by GoogleTest macros.
- Avoid dependencies between tests; keep tests independent.

---

## Test Fixtures and Inheritance

GoogleTest fully supports fixture class inheritance, letting you build layered reusable setups.

```cpp
class BaseTest : public testing::Test {
 protected:
  void SetUp() override {
    // Base setup
  }
};

class DerivedTest : public BaseTest {
 protected:
  void SetUp() override {
    BaseTest::SetUp();
    // Derived setup
  }
};

TEST_F(DerivedTest, TestBehavior) {
  // test code
}
```

This pattern helps share setup and common test utilities among suites.

---

## Programmatic Test Registration

While the macros cover most use cases, you can register tests dynamically when needed.

```cpp
template <typename Factory>
TestInfo* RegisterTest(const char* suite, const char* name, const char* type_param,
                       const char* value_param, const char* file, int line,
                       Factory factory);
```

- `factory` creates an instance of a subclass of `testing::Test`.
- Must be called **before** `RUN_ALL_TESTS()`.

Example:

```cpp
class MyFixture : public testing::Test {
  //...
};

class MyTest : public MyFixture {
 public:
  explicit MyTest(int data) : data_(data) {}
  void TestBody() override {
    // test logic
  }
 private:
  int data_;
};

void RegisterMyTests(std::vector<int> values) {
  for (int v : values) {
    testing::RegisterTest("MySuite", 
                          ("Test" + std::to_string(v)).c_str(),
                          nullptr, std::to_string(v).c_str(), __FILE__, __LINE__,
                          [v]() -> MyFixture* { return new MyTest(v); });
  }
}
```

---

## Inspecting Test Metadata

GoogleTest reflects test information via the following classes:

- `testing::TestInfo`: Metadata about an individual test, including suite name, test name, source file, execution result, and parameters.
- `testing::TestSuite`: Information about a test suite and results summary.
- `testing::TestResult`: Detailed test outcome including assertion results, elapsed time, and recorded properties.
- `testing::UnitTest`: Singleton representing the entire test program and providing access to suites, tests, and listeners.

Example to get current running test's info:
```cpp
const testing::TestInfo* test_info = testing::UnitTest::GetInstance()->current_test_info();
if (test_info != nullptr) {
  printf("Running test %s.%s\n", test_info->test_suite_name(), test_info->name());
}
```

---

## Logging Test Properties

You can annotate tests with user-defined properties using `RecordProperty`:

```cpp
TEST_F(FooTest, Bar) {
  ::testing::Test::RecordProperty("Priority", "High");
  ::testing::Test::RecordProperty("TestRunDurationMs", 123);
}
```

These will be saved in the XML or JSON test reports.

**Rules:**
- Keys must not conflict with internal XML attribute names.
- Only the last value per key is kept.

---

## Recommendation: Naming Conventions

- Avoid underscores (`_`) in fixture and test names to prevent conflicts.
- Name death-test suites ending with `DeathTest` to leverage GoogleTest's death test ordering.
- Prefer using `TEST_F()` when you require shared setup, and `TEST()` when not.

---

## Summary Example: A Complete Test Fixture

```cpp
#include <gtest/gtest.h>

class MyFixture : public testing::Test {
 protected:
  static void SetUpTestSuite() {
    // shared setup
  }
  static void TearDownTestSuite() {
    // shared teardown
  }

  void SetUp() override {
    // per-test setup
  }

  void TearDown() override {
    // per-test teardown
  }

  int shared_resource_;
};

TEST_F(MyFixture, Test1) {
  EXPECT_EQ(shared_resource_, 0);
}

TEST_F(MyFixture, Test2) {
  shared_resource_ = 42;
  EXPECT_EQ(shared_resource_, 42);
}
```

This fixture initializes and cleans a shared resource once per suite and resets state per test.

---

## Troubleshooting Common Issues

- **`SetUp()` Not Called?** Check spelling; C++ is case-sensitive. Use `override` to catch such errors.
- **No Default Constructor Error?** GoogleTest creates test instances via default constructor; define one if you have non-default constructors.
- **Confusing test names?** Avoid underscores and reserved starting characters to prevent naming conflicts.
- **Tests not running?** Ensure you are calling `RUN_ALL_TESTS()` in your `main()` and you have registered your tests.

---

## Next Steps

- Learn about [Writing Your First Test](../guides/getting-started/writing-your-first-test) to start creating real test cases.
- Explore [Parameterized and Typed Tests](../api-reference/core-testing-api/parameterized-tests) for scalable test coverage.
- Understand [Test Execution and Event Control](../api-reference/core-testing-api/test-execution) for fine-grained runtime control.
- Use [Test Fixtures](../overview/intro_value/what_is_googletest) effectively to share setup and teardown.

---

## Related Classes and Macros

| Name           | Purpose                                                | Reference                               |
|----------------|--------------------------------------------------------|---------------------------------------|
| `testing::Test`               | Base test fixture class for all tests            | [Test](#Test)                         |
| `TEST()`                     | Macro defining simple stateless tests             | [TEST Macro](#TEST)                   |
| `TEST_F()`                   | Macro defining tests using a test fixture          | [TEST_F Macro](#TEST_F)               |
| `TEST_P()`                   | Macro defining parameterized tests                  | [TEST_P Macro](#TEST_P)               |
| `INSTANTIATE_TEST_SUITE_P()` | Macro to instantiate parameterized test suites     | [INSTANTIATE_TEST_SUITE_P](#INSTANTIATE_TEST_SUITE_P) |
| `RecordProperty()`           | Log key-value pairs for tests                        | [RecordProperty](#RecordProperty)    |
| `SetUpTestSuite()` / `TearDownTestSuite()` | Lifecycle hooks for suite-level setup/teardown | [SetUpTestSuite](#SetUpTestSuite)   | 

---

For full method signatures and details, see [Testing Reference](reference/testing.md).