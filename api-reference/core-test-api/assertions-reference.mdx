---
title: "Assertions Reference"
description: "Comprehensive documentation of built-in assertions, including equality, inequality, exception, and fatal/non-fatal failure variants. Details supported assertion types, usage patterns, and extensibility for custom assertions."
---

# Assertions Reference

This page provides a detailed overview of the built-in assertion macros available in GoogleTest, essential for verifying code behavior in your tests. To access these macros, include the header:

```cpp
#include <gtest/gtest.h>
```

GoogleTest assertion macros commonly come in pairs:

- `EXPECT_` variants generate **nonfatal failures**, allowing the current test function to continue execution after failure.
- `ASSERT_` variants generate **fatal failures** that abort the current function immediately upon failure.

You can append custom failure messages to any assertion using the stream operator `<<` with any streamable content:

```cpp
EXPECT_TRUE(my_condition) << "My condition is not true";
```

Wide strings streamed to assertions are automatically converted to UTF-8 for display.

---

## Explicit Success and Failure

These assertions enable explicitly marking test success or failure independently of any condition, useful when logic flow controls test outcomes.

### SUCCEED

`SUCCEED()` marks a success point in the test flow. It does not make the test pass by itself but can document that a code path was reached.

```cpp
SUCCEED();
```

Currently SUCCEED generates no visible output, but this may change in later releases.

### FAIL

`FAIL()` generates a **fatal failure** and returns from the current function immediately.

```cpp
FAIL() << "We shouldn't get here.";
```

It only applies in `void` functions. For guidance on usage points, see the related [Assertion Placement documentation](../advanced.md#assertion-placement).

### ADD_FAILURE

`ADD_FAILURE()` generates a **nonfatal failure**, allowing the function to continue.

```cpp
ADD_FAILURE() << "Nonfatal failure triggered.";
```

### ADD_FAILURE_AT

`ADD_FAILURE_AT(file_path, line_number)` generates a nonfatal failure, associating it with the specified file and line number:

```cpp
ADD_FAILURE_AT("test.cpp", 100) << "Failure at specific location.";
```


---

## Generalized Assertion

These assertions allow flexible conditions using matchers to validate values.

### EXPECT_THAT

```cpp
EXPECT_THAT(value, matcher);
ASSERT_THAT(value, matcher);
```

Verifies that `value` matches a specified [`matcher`](matchers.md). Matchers allow expressive, English-like conditions and produce detailed failure messages.

Example:

```cpp
#include <gmock/gmock.h>
using ::testing::AllOf;
using ::testing::Gt;
using ::testing::Lt;
using ::testing::MatchesRegex;
using ::testing::StartsWith;

EXPECT_THAT(value1, StartsWith("Hello"));
EXPECT_THAT(value2, MatchesRegex("Line \\d+"));
ASSERT_THAT(value3, AllOf(Gt(5), Lt(10)));
```

On failure, descriptions show detailed mismatches, for example:

```
Value of: value1
  Actual: "Hi, world!"
Expected: starts with "Hello"
```

For more built-in matchers and how to write custom ones, see the [Matchers Reference](matchers.md) and the [New Matcher Guide](../gmock_cook_book.md#NewMatchers).

---

## Boolean Conditions

Assertions for verifying boolean expressions.

### EXPECT_TRUE / ASSERT_TRUE

```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```

Succeeds if `condition` is `true`.

### EXPECT_FALSE / ASSERT_FALSE

```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```

Succeeds if `condition` is `false`.

---

## Binary Comparison Assertions

Compare two values using standard comparison operators. These require the values to be comparable by the relevant operator.

Note: For pointers, these tests check **pointer equality**, not contents, except for C-strings where specific functions are provided. Refer to the string comparison section for C strings.

### Equality

```cpp
EXPECT_EQ(val1, val2);
ASSERT_EQ(val1, val2);
```

Checks `val1 == val2`.

*When comparing a pointer and `NULL`, prefer `nullptr` instead:*

```cpp
EXPECT_EQ(ptr, nullptr);
```

### Inequality

```cpp
EXPECT_NE(val1, val2);
ASSERT_NE(val1, val2);
```

Checks `val1 != val2`.

### Less Than

```cpp
EXPECT_LT(val1, val2);
ASSERT_LT(val1, val2);
```

Checks `val1 < val2`.

### Less Than or Equal

```cpp
EXPECT_LE(val1, val2);
ASSERT_LE(val1, val2);
```

Checks `val1 <= val2`.

### Greater Than

```cpp
EXPECT_GT(val1, val2);
ASSERT_GT(val1, val2);
```

Checks `val1 > val2`.

### Greater Than or Equal

```cpp
EXPECT_GE(val1, val2);
ASSERT_GE(val1, val2);
```

Checks `val1 >= val2`.

*Side Effects:* Arguments are evaluated exactly once but evaluation order is unspecified.

For floating-point numbers, use specialized floating-point assertions discussed later.

---

## String Comparison (C-Strings)

These assertions compare **C strings** (`const char*`, `wchar_t*`) by content, not pointer address. For comparing `std::string` objects, use `EXPECT_EQ`.

Wide strings are printed as UTF-8 if comparison fails.

*Use `nullptr` instead of `NULL` when comparing to nullptr.*

### EXPECT_STREQ / ASSERT_STREQ

```cpp
EXPECT_STREQ(str1, str2);
ASSERT_STREQ(str1, str2);
```

Checks that the two C strings have identical contents.

### EXPECT_STRNE / ASSERT_STRNE

```cpp
EXPECT_STRNE(str1, str2);
ASSERT_STRNE(str1, str2);
```

Checks that the two C strings have different contents.

### EXPECT_STRCASEEQ / ASSERT_STRCASEEQ

```cpp
EXPECT_STRCASEEQ(str1, str2);
ASSERT_STRCASEEQ(str1, str2);
```

Checks the two C strings have the same contents case-insensitively.

### EXPECT_STRCASENE / ASSERT_STRCASENE

```cpp
EXPECT_STRCASENE(str1, str2);
ASSERT_STRCASENE(str1, str2);
```

Checks the two C strings have different contents case-insensitively.

---

## Floating-Point Comparison

Due to inherent rounding, exact equality is unsuitable for floating-point types. GoogleTest provides approximate checks.

### EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ

```cpp
EXPECT_FLOAT_EQ(val1, val2);
ASSERT_FLOAT_EQ(val1, val2);
```

Checks two `float` values are within 4 Units in the Last Place (ULP).

### EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ

```cpp
EXPECT_DOUBLE_EQ(val1, val2);
ASSERT_DOUBLE_EQ(val1, val2);
```

Checks two `double` values are within 4 ULPs.

### EXPECT_NEAR / ASSERT_NEAR

```cpp
EXPECT_NEAR(val1, val2, abs_error);
ASSERT_NEAR(val1, val2, abs_error);
```

Checks the absolute difference between `val1` and `val2` does not exceed the given `abs_error`.

*Special considerations:* Infinity comparisons handle signs appropriately.

---

## Exception Assertions

Verify whether the tested code throws exceptions, requiring exception support in build.

Note: Code tested can be compound statements enclosed in braces.

### EXPECT_THROW / ASSERT_THROW

```cpp
EXPECT_THROW(statement, exception_type);
ASSERT_THROW(statement, exception_type);
```

Verifies that `statement` throws the specified exception type.

### EXPECT_ANY_THROW / ASSERT_ANY_THROW

```cpp
EXPECT_ANY_THROW(statement);
ASSERT_ANY_THROW(statement);
```

Verifies that `statement` throws an exception of any type.

### EXPECT_NO_THROW / ASSERT_NO_THROW

```cpp
EXPECT_NO_THROW(statement);
ASSERT_NO_THROW(statement);
```

Verifies that `statement` throws no exception.

Example:

```cpp
EXPECT_NO_THROW({ int n = 5; DoSomething(&n); });
```

---

## Predicate Assertions

Enable testing complex predicates with clearer failure messages than `EXPECT_TRUE`.

### EXPECT_PRED*

Supports up to 5-parameter predicates. For instance:

```cpp
EXPECT_PRED2(pred, val1, val2);
ASSERT_PRED3(pred, val1, val2, val3);
```

* `pred` is a function or functor returning `bool` indicating success.

Example:

```cpp
bool MutuallyPrime(int m, int n) { ... }
const int a = 3, b = 4, c = 10;
EXPECT_PRED2(MutuallyPrime, a, b);  // Succeeds
EXPECT_PRED2(MutuallyPrime, b, c);  // Fails
```

Failure output:

```
MutuallyPrime(b, c) is false, where
b is 4
c is 10
```

When predicates are overloaded or templated, explicit casting or template parameters may be needed to disambiguate.

### EXPECT_PRED_FORMAT*

Similar to `EXPECT_PRED*`, but uses a *predicate-formatter* that returns an `AssertionResult` with detailed messages.

Signature:

```cpp
testing::AssertionResult PredicateFormatter(const char* expr1, ..., T1 val1, ...);
```

Example:

```cpp
testing::AssertionResult AssertMutuallyPrime(const char* m_expr, const char* n_expr, int m, int n) { ... }
EXPECT_PRED_FORMAT2(AssertMutuallyPrime, a, b);
```

On failure:

```
b and c (4 and 10) are not mutually prime, as they have a common divisor 2
```

---

## Windows HRESULT Assertions

Verify success or failure returned via Windows HRESULT codes, printing corresponding messages.

### EXPECT_HRESULT_SUCCEEDED / ASSERT_HRESULT_SUCCEEDED

```cpp
EXPECT_HRESULT_SUCCEEDED(expression);
ASSERT_HRESULT_SUCCEEDED(expression);
```

Checks that `expression` returned a successful HRESULT.

### EXPECT_HRESULT_FAILED / ASSERT_HRESULT_FAILED

```cpp
EXPECT_HRESULT_FAILED(expression);
ASSERT_HRESULT_FAILED(expression);
```

Checks that `expression` returned a failure HRESULT.

---

## Death Assertions

Verify that a piece of code causes the process to terminate, in a controlled manner. These use subprocesses.

See [Death Tests](../advanced.md#death-tests) for background.

You can wrap code in brace-enclosed blocks.

### EXPECT_DEATH / ASSERT_DEATH

```cpp
EXPECT_DEATH(statement, matcher);
ASSERT_DEATH(statement, matcher);
```

Verifies that:
- `statement` terminates the process with a non-zero exit
- `stderr` output matches the `matcher`

`matcher` can be a matcher or a regex string.

Example:

```cpp
EXPECT_DEATH(DoSomething(42), "My error");
```

### EXPECT_DEATH_IF_SUPPORTED / ASSERT_DEATH_IF_SUPPORTED

Like `EXPECT_DEATH` / `ASSERT_DEATH`, but only runs if death tests are supported on the platform.

### EXPECT_DEBUG_DEATH / ASSERT_DEBUG_DEATH

Runs like `EXPECT_DEATH` in debug mode; runs just `statement` without death check otherwise.

### EXPECT_EXIT / ASSERT_EXIT

```cpp
EXPECT_EXIT(statement, predicate, matcher);
ASSERT_EXIT(statement, predicate, matcher);
```

Verifies that `statement` terminates with exit status satisfying `predicate` and `stderr` output matching `matcher`.

`predicate` is a callable that accepts the exit status integer and returns bool, with common ones provided:

- `::testing::ExitedWithCode(exit_code)`
- `::testing::KilledBySignal(signal_number)` (POSIX only)

Example:

```cpp
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

---

# Summary
This document outlines GoogleTest's comprehensive suite of assertion macros. It covers explicit success/failure assertions, Boolean and comparison assertions including specialized string and floating-point variants, exception testing, predicate checks, Windows HRESULT validation, and various death test assertions. Rich examples and usage guidelines help you verify diverse testing scenarios effectively, while the distinction between nonfatal (`EXPECT_`) and fatal (`ASSERT_`) assertions guides test flow control.

For detailed matcher capabilities leveraged by assertions such as `EXPECT_THAT`, refer to the [Matchers Reference](matchers.md). Further expansion on assertion placement and control flow is available in the [Advanced Guide](../advanced.md#assertion-placement). To deepen your understanding of mocking and interaction verification complementing assertions, visit the [gMock Cookbook](../gmock_cook_book.md).
