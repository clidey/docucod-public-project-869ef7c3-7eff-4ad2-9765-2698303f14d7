---
title: "Built-in Assertion Matchers"
description: "Provides reference material for GoogleTest's extensive suite of matchers, enabling fine-grained, expressive test validations for values, containers, and more."
---

# Built-in Assertion Matchers

GoogleTest offers an extensive suite of built-in assertion matchers that enable expressive, readable, and fine-grained validation of values, containers, strings, pointers, and other C++ constructs. These matchers empower you to write tests that more clearly articulate intent, generate helpful failure messages, and reduce boilerplate logic.

This page provides comprehensive reference material for these standard matchers, grouped by conceptual categories to guide you from simple comparisons through advanced container and composition use cases.

---

## Generic Comparison Matchers

These matchers verify simple comparisons between values, useful for numeric types, enums, and any comparable types.

| Matcher      | Semantics            | Description                     |
|--------------|----------------------|--------------------------------|
| `Eq(value)`  | `argument == value`  | Matches arguments equal to the given value. `Eq` is default for literal values.
| `Ne(value)`  | `argument != value`  | Matches arguments not equal to the given value.
| `Lt(value)`  | `argument < value`   | Matches arguments less than the given value.
| `Le(value)`  | `argument <= value`  | Matches arguments less than or equal to the given value.
| `Gt(value)`  | `argument > value`   | Matches arguments greater than the given value.
| `Ge(value)`  | `argument >= value`  | Matches arguments greater than or equal to the given value.

**Example:**
```cpp
EXPECT_THAT(x, Eq(5));
EXPECT_THAT(x, Ge(10));
EXPECT_THAT(x, Ne(0));
```

---

## Boolean and Pointer Matchers

| Matcher        | Semantics                               |
|----------------|---------------------------------------|
| `_`            | Accepts any argument                    |
| `A<T>()` or `An<T>()` | Matches any argument of type `T`    |
| `IsTrue()`     | `argument` evaluates to `true`         |
| `IsFalse()`    | `argument` evaluates to `false`        |
| `IsNull()`     | Argument is a null pointer (raw or smart) |
| `NotNull()`    | Argument is a non-null pointer          |
| `Ref(variable)`| Matches argument that is a reference to the given variable |

**Example:**
```cpp
EXPECT_CALL(mock, Foo(_));              // Any argument
EXPECT_CALL(mock, Bar(IsNull()));       // Null pointers
EXPECT_CALL(mock, Baz(NotNull()));      // Non-null pointers
int a = 5;
EXPECT_THAT(value, Ref(a));             // References a
```

---

## Floating-Point Matchers

Floating-point comparisons detect approximate equality using Units in the Last Place (ULPs) or user-defined error bounds.

| Matcher                           | Semantics                                                    |
|----------------------------------|--------------------------------------------------------------|
| `FloatEq(value)`                 | Float approximate equality (4 ULPs), NaNs unequal             |
| `DoubleEq(value)`                | Double approximate equality (4 ULPs), NaNs unequal            |
| `NanSensitiveFloatEq(value)`    | Float approximate equality (4 ULPs), NaNs considered equal    |
| `NanSensitiveDoubleEq(value)`   | Double approximate equality (4 ULPs), NaNs considered equal   |
| `FloatNear(value, max_abs_error)` | Float approximate equality within the specified absolute error |
| `DoubleNear(value, max_abs_error)`| Double approximate equality within specified absolute error    |

**Example:**
```cpp
EXPECT_THAT(pi, DoubleNear(3.1415, 0.0001));
EXPECT_THAT(val, NanSensitiveFloatEq(nan_value));
```

---

## String Matchers

These matchers support matching strings by content, substring, case-insensitivity, or matching regular expressions.

| Matcher                 | Description                                                                                       |
|------------------------|-------------------------------------------------------------------------------------------------|
| `StrEq(string)`        | Matches strings equal to the given string (case-sensitive)                                       |
| `StrNe(string)`        | Matches strings not equal to the given string                                                    |
| `StrCaseEq(string)`    | Matches strings equal ignoring case                                                             |
| `StrCaseNe(string)`    | Matches strings not equal ignoring case                                                         |
| `HasSubstr(string)`    | Matches strings containing the given substring                                                  |
| `StartsWith(prefix)`   | Matches strings starting with given prefix                                                      |
| `EndsWith(suffix)`     | Matches strings ending with given suffix                                                        |
| `MatchesRegex(regex)`  | Matches strings that fully match the given regular expression                                    |
| `ContainsRegex(regex)` | Matches strings that contain a substring matching the given regular expression                   |
| `WhenBase64Unescaped(m)` | Matches strings base64-escaped that, when unescaped, satisfy matcher `m`                        |

**Example:**
```cpp
EXPECT_THAT(name, StartsWith("Mr."));
EXPECT_THAT(error_msg, ContainsRegex("Error [0-9]+"));
EXPECT_THAT(encoded_str, WhenBase64Unescaped(EndsWith("==")));
```

---

## Container Matchers

GoogleTest supports detailed matching of STL and similar container types, including size checks, contents validation, and flexible element matching.

| Matcher                                   | Description                                                                |
|------------------------------------------|----------------------------------------------------------------------------|
| `SizeIs(m)`                              | Matches containers whose size matches the matcher m                        |
| `BeginEndDistanceIs(m)`                   | Matches containers where distance between begin and end matches m          |
| `IsEmpty()`                              | Matches empty containers                                                    |
| `Contains(e)`                           | Container contains at least one element that matches e                     |
| `Contains(e).Times(n)`                   | Container contains the element matching e exactly n times                  |
| `Each(e)`                               | Every element in the container matches e                                   |
| `ElementsAre(e0, e1, ..., en)`          | Container's elements match the expected elements in order                  |
| `ElementsAreArray(array)`                | Like `ElementsAre`, but takes an array or iterable of elements/matchers     |
| `UnorderedElementsAre(e0, e1, ..., en)` | Container’s elements match expected elements, order ignored                 |
| `UnorderedElementsAreArray(array)`      | Like `UnorderedElementsAre`, but takes array or iterable                  |
| `IsSubsetOf(container)`                  | Container’s elements are a subset of the given container                    |
| `IsSupersetOf(container)`                | Container’s elements are a superset of the given container                  |
| `Pointwise(m, container)`                | Container elements and expected container elements match pairwise using matcher m |
| `UnorderedPointwise(m, container)`      | Like `Pointwise`, but order is ignored                                    |
| `WhenSorted(m)`                         | Matches container after sorting by `<` with matcher m                      |
| `WhenSortedBy(comparator, m)`            | Matches container sorted by given comparator with matcher m               |

**Example:**
```cpp
EXPECT_THAT(vec, ElementsAre(1, Ge(2), _));
EXPECT_THAT(set, Contains(3));
EXPECT_THAT(map, Contains(Key(Eq(100))));
EXPECT_THAT(list, Each(Lt(10)));
EXPECT_THAT(vec, UnorderedElementsAreArray(array));
```

---

## Member and Pointer Element Matchers

Matchers to validate members of objects, properties (via getters), and pointer targets.

| Matcher                 | Description                                                   |
|-------------------------|---------------------------------------------------------------|
| `Field(&Class::field, m)` | Matches object's member field `field` against matcher m       |
| `Field(name, &Class::field, m)` | Same as above with field name for better error messages     |
| `Property(&Class::property, m)` | Matches result of property getter method against m           |
| `Property(name, &Class::property, m)` | Same as above with property name for better error messages    |
| `Pointee(m)`              | Matches a pointer (smart or raw) pointing to a value satisfying matcher m |
| `Pointer(m)`              | Matches pointer itself against matcher m                       |
| `Address(m)`              | Matches the address of the object against matcher m           |
| `WhenDynamicCastTo<T>(m)` | Matches pointer/reference converted dynamically to type T against matcher m (requires RTTI) |
| `Key(e)`                  | Matches the key part of a pair in associative containers against e             |
| `Pair(m1, m2)`            | Matches a pair where first and second elements match m1 and m2 respectively  |

**Example:**
```cpp
EXPECT_THAT(obj, Field(&MyClass::x, Eq(10)));
EXPECT_THAT(ptr, Pointee(Gt(0)));
EXPECT_THAT(map, Contains(Pair(Ge(1), "value")));
```

---

## Composite Matchers

You can combine multiple matchers to build complex predicates.

| Matcher                 | Description                                                  |
|-------------------------|--------------------------------------------------------------|
| `AllOf(m1, m2, ..., mn)` | Matches if argument satisfies all matchers m1 to mn          |
| `AnyOf(m1, m2, ..., mn)` | Matches if argument satisfies any one of the matchers m1 to mn|
| `Not(m)`                 | Matches if argument does *not* satisfy matcher m             |
| `Conditional(cond, m1, m2)` | Matches m1 if cond true, else matches m2                   |

**Example:**
```cpp
EXPECT_THAT(x, AllOf(Ge(0), Le(100)));
EXPECT_THAT(y, AnyOf(Eq("foo"), Eq("bar")));
EXPECT_THAT(z, Not(Eq(42)));
```

---

## Predicate and Custom Matchers

If you need behavior not covered by built-in matchers, you can define your own using:

- **MATCHER** macros to quickly create custom matchers with expressive failure messages
- Implementing the matcher interface directly for advanced use
- Using `Truly(predicate)` to wrap arbitrary unary predicates

**Example (custom matcher):**
```cpp
MATCHER(IsEven, "checks if a number is even") {
  return (arg % 2) == 0;
}
EXPECT_THAT(value, IsEven());
```

---

## Best Practices

- Prefer built-in matchers for readability and useful failure reporting.
- Combine matchers using `AllOf` or `AnyOf` to express compound conditions.
- Use `Pointee` to verify details behind pointers safely.
- Avoid over-specifying argument expectations which make tests brittle.
- Name your custom matchers clearly to improve test diagnostics.

<Tip>
Use `EXPECT_THAT(value, matcher)` to leverage matchers for expressive assertions instead of simple `EXPECT_EQ`. This gives richer diagnostics when tests fail.
</Tip>

<Tip>
When matching containers, prefer `ElementsAre` for ordered checks and `UnorderedElementsAre` for collections where order is not guaranteed.
</Tip>

---

## Common Pitfalls

- Using `EXPECT_THAT(actual, expected)` where `expected` is not a matcher can lead to implicit conversions and unintended behavior; always prefer explicit matchers like `Eq(expected)`.
- Do not dereference null pointers in predicates; use `Pointee(m)` which automatically fails for `nullptr`.
- Beware of using `Return(std::move(...))` repeatedly in actions, as the moved-from object is no longer valid.
- When mocking overloaded functions, explicitly disambiguate overloads to avoid compiler errors.

---

## Summary

This reference equips you with a powerful vocabulary of matchers that cover foundational comparisons, string operations, pointer and member validations, container content checks, and composite logical matchers. Mastery of these will significantly enhance the clarity, reliability, and diagnostic power of your C++ tests using GoogleTest and GoogleMock.

For more advanced usage, explore creating custom matchers and integrating matchers with mock expectations and actions.

---

## See Also

- [Assertions Reference](../core-test-api/assertions.md) — How to use matchers in assertions like `EXPECT_THAT`.
- [Mocking with GoogleMock](../../guides/core-workflows/mocking-with-gmock.md) — Using matchers in setting expectations and actions.
- [Writing Custom Matchers](./custom-matchers.md) — Extending matcher capabilities beyond built-in matchers.
- [Matchers Reference](./matchers.md) — Overview of matcher categories and detailed matcher functions.


---

## Quick Example

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::_;
using ::testing::Gt;
using ::testing::ElementsAre;
using ::testing::Pointee;

TEST(MathTest, CheckGreaterThan) {
  int value = 10;
  EXPECT_THAT(value, Gt(5));
}

TEST(ListTest, ContainsValues) {
  std::vector<int> list = {1, 2, 3, 4};
  EXPECT_THAT(list, ElementsAre(1, 2, 3, 4));
}

// Pointer value matching
TEST(PointerTest, MatchesPointee) {
  int x = 5;
  int* p = &x;
  EXPECT_THAT(p, Pointee(Gt(0)));
}
```
