---
title: "Controlling Strictness: Nice, Naggy, and Strict Mocks"
description: "Guides users through configuring the level of enforcement on uninteresting mock calls using NiceMock, NaggyMock, and StrictMock wrappers. Includes API usage examples for balancing flexibility and rigor in test development."
---

# Controlling Strictness: Nice, Naggy, and Strict Mocks

This guide walks you through configuring how strictly GoogleMock enforces expectations on mock objects regarding uninteresting calls, using the `NiceMock`, `NaggyMock`, and `StrictMock` wrappers. You will learn how to balance flexibility and rigor in your tests by choosing the appropriate strictness mode for your mock objects.

---

## Understanding Strictness Modes

When using GoogleMock, methods on a mock object can be categorized as:

- **Interesting Calls:** Calls explicitly expected via `EXPECT_CALL`.
- **Uninteresting Calls:** Calls made to mock methods without any set expectation.
- **Unexpected Calls:** Calls to mock methods that have expectations, but with arguments that don't match any.

Control over uninteresting calls' enforcement is managed through these wrappers:

| Wrapper         | Behavior on Uninteresting Calls                                   |
|-----------------|--------------------------------------------------------------------|
| `NiceMock<T>`   | Suppresses warnings; uninteresting calls are silently allowed.    |
| `NaggyMock<T>`  | Logs warnings on uninteresting calls (current default).            |
| `StrictMock<T>` | Treats uninteresting calls as test failures.                       |

**Important:** Unexpected calls are always errors, regardless of wrapper used.

---

## Why Use Different Strictness Modes?

Tests have different needs and phases in development may require different sensitivities:

- Use **`NiceMock`** for stability and easy maintenance, especially when you want to ignore calls that you don't care about.
- Use **`NaggyMock`** when developing or debugging tests to get warnings about unexpected interactions, helping discover possible test omissions.
- Use **`StrictMock`** in highly controlled environments or when you want to enforce exact mock interactions to catch any usage deviations early.

The default behavior of mocks today is naggy, but GoogleMock plans to make nice mocks the default in the future for better maintainability.

---

## How to Use Strictness Wrappers

Suppose you have a mock class:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, Calculate, (int x), ());
};
```

You can create strictness-controlled instances as follows:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Nice mock - suppresses warnings on uninteresting calls
NiceMock<MockFoo> nice_mock;

// Naggy mock - prints warnings for uninteresting calls
NaggyMock<MockFoo> naggy_mock;

// Strict mock - fails tests on uninteresting calls
StrictMock<MockFoo> strict_mock;
```

These wrappers inherit from the mock class, so they accept the same constructor arguments:

```cpp
NiceMock<MockBar> nice_bar("init_value");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 1, 2, "e", "f", true, false);
```

---

## Behavior Examples

### Uninteresting Calls

Consider the following with a `NaggyMock`:

```cpp
NaggyMock<MockFoo> foo;
foo.DoThis();  // Warning about uninteresting call
```

This call proceeds but logs a warning.

In contrast, with a `StrictMock`:

```cpp
StrictMock<MockFoo> foo;
foo.DoThis();  // Test failure: uninteresting call
```

This call causes the test to fail immediately.

### Expected Calls

All wrappers behave the same for *expected* calls:

```cpp
NiceMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());
foo.DoThis();  // Passes
```

```cpp
StrictMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());
foo.DoThis();  // Passes
```

Unexpected calls remain test failures regardless.

---

## Best Practices for Using Strictness Wrappers

- **Prefer `NiceMock` for most tests.** It reduces noise about uninteresting calls and eases test maintenance.
- **Use `NaggyMock` temporarily**, when writing or debugging tests, to detect possible missing expectations.
- **Use `StrictMock` sparingly.** It is helpful when you want to enforce exact calls strictly but can make tests brittle.
- **Always add catch-all expectations** like `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());` if you want to allow certain calls without explicit behavior.
- Ensure **mock classes have virtual destructors** for the wrappers to operate reliably.
- Avoid nesting wrappers, e.g. `NiceMock<StrictMock<MockFoo>>` is unsupported.

---

## Troubleshooting Common Issues

<AccordionGroup title="Strictness Mode Troubleshooting">
<Accordion title="No Warning or Failure on Uninteresting Call">
If your mock is not warning or failing on uninteresting calls as expected:

- Confirm you are using the proper strictness wrapper.
- Make sure your mock methods are declared with the `MOCK_METHOD` macro directly in the mock class.
- Verify the mock class has a virtual destructor.
- Check the verbosity flag `--gmock_verbose` (default is `warning`), adjusting to `info` for more details.
</Accordion>
<Accordion title="Unexpected Call vs Uninteresting Call Confusion">
Uninteresting calls have no expectations set; unexpected calls mean expectations exist but arguments don't match.

- Unexpected calls always fail tests.
- Use `EXPECT_CALL` carefully to specify which calls are allowed.
- Consider using a catch-all `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` to allow any arguments.
</Accordion>
<Accordion title="Using Mock Wrappers with Non-default Constructors">
Wrappers inherit constructors from the base mock class. To use:

```cpp
NiceMock<MockBar> nice_bar("init");
``` 

If you encounter compilation errors, ensure constructors are public and non-explicit.
</Accordion>
<Accordion title="Tests Failing Due to StrictMock on Uninteresting Calls">
If too many tests fail when switching to `StrictMock`, consider:

- Adding explicit `EXPECT_CALL(...).Times(AnyNumber())` for allowed calls.
- Using `NiceMock` when you want to ignore uninteresting calls.
- Refactoring tests to explicitly document expected interactions.
</Accordion>
</AccordionGroup>

---

## Controlling Strictness Programmatically

GoogleMock manages strictness at the mock object level using these wrapper classes:

```cpp
template <class MockClass>
class NiceMock : public MockClass { ... };

template <class MockClass>
class NaggyMock : public MockClass { ... };

template <class MockClass>
class StrictMock : public MockClass { ... };
```

Each wrapper registers itself with internal GoogleMock mechanisms to modify the treatment of uninteresting calls during the lifetime of the object.

---

## Combining Strictness Settings with Mocking Workflows

Integrate strictness modes with your mocking workflows for effective test design:

- Start with **`NiceMock`** to develop stable and resilient tests.
- Add **`EXPECT_CALL`**s only where interactions matter.
- Use **`NaggyMock`** when adding new tests to catch missing expectations early.
- Use **`StrictMock`** only when you want to catch **any** unexpressed calls as failures.

Remember, strictness affects only uninteresting calls; all expectations and unexpected calls are verified the same across modes.

---

## Summary

| Class         | Description                            | Handles Uninteresting Calls By            |
|---------------|------------------------------------|----------------------------------------|
| NiceMock<T>   | Quiet mock - ignores uninteresting calls | Suppressing warnings and ignoring call  |
| NaggyMock<T>  | Default mock - warns on uninteresting calls | Printing warnings                        |
| StrictMock<T> | Strict mock - fails on uninteresting calls  | Producing immediate test failures        |

---

## Sample Code Snippet

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;
using ::testing::_;  // wildcard matcher

class MockDatabase {
 public:
  MOCK_METHOD(bool, Connect, (const std::string& uri), ());
  MOCK_METHOD(void, Disconnect, ());
  MOCK_METHOD(int, Query, (const std::string& query), ());
};

// Using a nice mock, ignoring uninteresting calls
NiceMock<MockDatabase> nice_db;
EXPECT_CALL(nice_db, Connect(_)).WillOnce(testing::Return(true));
// No warning when Disconnect() or Query() called unexpectedly

// Using naggy mock, warns on uninteresting calls
NaggyMock<MockDatabase> naggy_db;
EXPECT_CALL(naggy_db, Connect(_)).WillOnce(testing::Return(false));
// Warning printed if Disconnect() or Query() called without expectation

// Using strict mock, fails on uninteresting calls
StrictMock<MockDatabase> strict_db;
EXPECT_CALL(strict_db, Connect(_)).WillOnce(testing::Return(true));
// Test fails if Disconnect() or Query() called without expectation
```

---

## Additional Resources

- See the [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) for quick summaries.
- Dive deeper into expectations in [Setting Call Expectations](../core-mocking-apis/call-expectations.md).
- Learn about [Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected) for core concepts.
- Refer to the [Mocking Reference](../reference/mocking.md) for formal API details.

---

## Related Documentation

For more on mocking fundamentals and workflows:

- [Mocking Primer](../guides/getting-started/mocking-primer.md) - Intro to mocking concepts
- [Setting Expectations](../guides/mocking-best-practices/setting-expectations.md) - Detailed usage of `EXPECT_CALL` and `ON_CALL`
- [Using Matchers](../guides/mocking-best-practices/using-matchers.md) - Creating argument match expectations
- [MOCK_METHOD Macro Reference](../api-reference/core-mocking-apis/mock-methods.md) - Defining mock methods

---

## Summary Diagram of Strictness Modes

```mermaid
flowchart TD
  Start["Create Mock Object"] --> SelectMode{Strictness Mode}

  SelectMode -->|NiceMock| Nice[NiceMock: Suppress warnings on uninteresting calls]
  SelectMode -->|NaggyMock| Naggy[NaggyMock: Warn on uninteresting calls (default)]
  SelectMode -->|StrictMock| Strict[StrictMock: Fail on uninteresting calls]

  Nice -->|Uninteresting Call| AllowNice[Allow call silently]
  Naggy -->|Uninteresting Call| WarnNaggy[Print warning]
  Strict -->|Uninteresting Call| FailStrict[Fail test immediately]

  AllowNice & WarnNaggy & FailStrict --> End["Continue test execution"]
```

---

This page helps you fine-tune how strict GoogleMock is with your mock interactions, enabling tests that are both effective and maintainable by choosing when to be lenient or strict about uninteresting mock calls.
