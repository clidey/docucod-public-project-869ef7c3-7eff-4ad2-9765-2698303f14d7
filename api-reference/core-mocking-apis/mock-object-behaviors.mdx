---
title: "Mock Object Behaviors: Nice, Naggy, Strict"
description: "Explore Google Mock's configurable behaviors for handling uninteresting calls on mock objects, including NiceMock, NaggyMock, and StrictMock. This section teaches when to apply these wrappers, their impact on test results, and best practices for balancing strictness and flexibility."
---

# Mock Object Behaviors: Nice, Naggy, Strict

Google Mock provides configurable mock object behaviors that control how uninteresting calls—calls to mocked methods without explicit expectations—are handled and reported in your tests. Understanding and applying these behaviors helps balance strictness and flexibility in your test suites, enabling you to catch unintended interactions while avoiding noisy warnings.

---

## Understanding Uninteresting Calls

An *uninteresting call* happens when a mock method is invoked for which no explicit `EXPECT_CALL` matching the call has been set. These calls are neither expected nor explicitly disallowed.

- By default, Google Mock treats these calls as allowed but logs a warning. 
- Depending on your needs, you may want to adjust this to ignore such calls or treat them as errors.


## Mock Object Behaviors

Google Mock provides three classes to control the handling of uninteresting calls:

| Mock Object Type           | Behavior on Uninteresting Calls                   | Description                                                                           |
|---------------------------|--------------------------------------------------|---------------------------------------------------------------------------------------|
| **NaggyMock&lt;T&gt;**    | Logs a *warning*, but allows the call             | The default behavior of Google Mock. Helps identify unexpected calls without failing. |
| **NiceMock&lt;T&gt;**     | Suppresses warnings, call allowed                  | Less noisy, treats uninteresting calls as normal. Useful when uninteresting calls are harmless.
| **StrictMock&lt;T&gt;**   | Treats uninteresting calls as errors (fails test) | Enforces strict checking. Any uninteresting call causes test failure.


### Usage Example

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, Calculate, (int x), ());
};

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Default (NaggyMock behavior)
MockFoo mock_default;
EXPECT_CALL(mock_default, DoThis());
mock_default.DoThis();           // OK
mock_default.Calculate(5);      // Warning about uninteresting call

// NiceMock disables warnings
NiceMock<MockFoo> mock_nice;
EXPECT_CALL(mock_nice, DoThis());
mock_nice.DoThis();             // OK
mock_nice.Calculate(5);         // Allowed silently

// StrictMock treats uninteresting calls as failures
StrictMock<MockFoo> mock_strict;
EXPECT_CALL(mock_strict, DoThis());
mock_strict.DoThis();           // OK
mock_strict.Calculate(5);       // Test fails with error
```

---

## When to Use Which Behavior

### NaggyMock (Default)

- Ideal during test development and debugging.
- Warns about unexpected calls that might indicate missing expectations.
- Keeps the tests from failing prematurely.

### NiceMock

- Use when you want cleaner test output and do not care about calls that you haven’t explicitly set expectations for.
- Good for mocks with lots of methods or those integrated into legacy code where you want to focus on some methods only.

### StrictMock

- Best for highly controlled unit tests where all mock interactions must be specified explicitly.
- Helps catch unintended interactions and bugs caused by unexpected calls.
- Use sparingly; overly strict mocks can cause brittle tests.

---

## How Mock Object Behavior is Implemented

Internally, Google Mock controls uninteresting call handling via the `Mock` class static methods:

- `Mock::AllowUninterestingCalls(mock_obj)` — allows uninteresting calls without warnings.
- `Mock::WarnUninterestingCalls(mock_obj)` — warns on uninteresting calls (default).
- `Mock::FailUninterestingCalls(mock_obj)` — fails on uninteresting calls.

The wrappers `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` encapsulate these settings automatically upon construction.

---

## Best Practices

- Prefer `NiceMock` for general testing to reduce noise.
- Use `NaggyMock` when you want to be informed about unexpected calls without failing.
- Choose `StrictMock` when testing critical code paths where interaction correctness is vital.
- Avoid mixing nested mocks like `NiceMock<StrictMock<MockFoo>>` as this is unsupported.
- Remember that these behaviors only affect *uninteresting calls* — calls that do not match any `EXPECT_CALL`. All unexpected calls (calls not matching any expected argument matcher) always cause errors regardless of the mock type.

---

## Controlling Mock Behavior Example

```cpp
#include <gmock/gmock.h>
using ::testing::_;
using ::testing::NiceMock;
using ::testing::StrictMock;

class MockDatabase {
 public:
  MOCK_METHOD(bool, Connect, (const std::string&), ());
  MOCK_METHOD(int, Query, (int), ());
};

TEST(DatabaseTest, Example) {
  NiceMock<MockDatabase> db_nice;
  EXPECT_CALL(db_nice, Connect("server"))
      .WillOnce(testing::Return(true));

  // Connect will be called with "server".
  EXPECT_TRUE(db_nice.Connect("server"));

  // Query is uninteresting, this won't print warnings.
  db_nice.Query(42);

  StrictMock<MockDatabase> db_strict;
  EXPECT_CALL(db_strict, Connect(_)).WillOnce(testing::Return(true));

  // Connect called appropriately.
  EXPECT_TRUE(db_strict.Connect("server"));

  // Query called unexpectedly, test will fail.
  // db_strict.Query(42);  // Uncommenting causes error
}
```

---

## Controlling Verbosity of Warnings

You can control the verbosity and detail of warnings for uninteresting calls with the command-line flag:

```shell
--gmock_verbose=info|warning|error
```

- `info`: Prints all informational messages, including mock calls and stack traces for uninteresting calls.
- `warning`: Prints warnings and errors, but omits stack traces on uninteresting calls (default).
- `error`: Prints only errors, suppressing most warnings.

Adjust verbosity according to your debugging needs.

---

## Troubleshooting Common Issues

### Too Many or Too Few Actions

If gMock warns that `EXPECT_CALL` has too many or too few actions (`WillOnce` and `WillRepeatedly`), it signals mismatches between your call count expectations and configured behaviors. Verify that your `.Times()`, `.WillOnce()`, and `.WillRepeatedly()` clauses align.

### Mixing NiceMock and StrictMock

Nesting these modifies may cause inconsistent behaviors. Use them only as wrappers over base mock classes.

### Uninteresting Call Warnings Are Too Noisy

If uninteresting call warnings clutter output, switch to `NiceMock` or reduce verbosity with `--gmock_verbose=error`.

### Unexpected Calls Still Fail on NiceMock

Note: `NiceMock` only suppresses warnings on uninteresting calls. Unexpected calls (calls that fail to match any expectation) always cause test failures.

---

## Further Reading

- [gMock Cookbook - The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [EXPECT_CALL & ON_CALL (Declaration of Expectations)](/api-reference/core-mocking-apis/expectations-on-call.md)
- [Mocking Reference - Overview of Mocks, Expectations, and Behaviors](/docs/reference/mocking.md)
- [Managing Mock Verbosity and Uninteresting Calls in gMock FAQ](/faq/general-usage-faq/getting-started-common-issues.md)

---

Mastering these mock behaviors equips you with powerful tools to tune your tests' sensitivity to interaction correctness, helping you write tests that are robust, expressive, and maintainable.

---