---
title: "Mock Strictness: Nice, Naggy, and Strict Mocks"
description: "Describes how to choose and configure the behavior of mock objects when unexpected methods are called, using NiceMock, NaggyMock, and StrictMock. Explains intended use cases and trade-offs."
---

# Mock Strictness: Nice, Naggy, and Strict Mocks

This documentation explains how to control and customize the behavior of mock objects in GoogleMock when they receive unexpected or uninteresting method calls. It covers the three main strictness levels provided: **NiceMock**, **NaggyMock**, and **StrictMock**, outlining their intended use cases, trade-offs, and practical guidance on when to apply each.

---

## Overview

When writing tests with mocks, calls to mock methods can be categorized as:

- **Expected calls**: Those explicitly specified with `EXPECT_CALL`.
- **Uninteresting calls**: Calls to mock methods not covered by any `EXPECT_CALL`.
- **Unexpected calls**: Calls that have expectations but whose arguments don't match any set expectations.

GoogleMock enables you to control how a mock object reacts to uninteresting calls by choosing a *strictness modifier*:

- `NiceMock<T>` suppresses warnings on uninteresting calls.
- `NaggyMock<T>` (default behavior) prints warnings about uninteresting calls.
- `StrictMock<T>` treats uninteresting calls as **test failures**.

These modifiers are **template wrappers** around your mock classes and influence the runtime behavior of mocks.


## Behavior and Definitions

| Modifier     | Reaction to Uninteresting Calls                         | Use Case and Trade-offs                                      |
|--------------|---------------------------------------------------------|-------------------------------------------------------------|
| **NiceMock** | Suppresses warnings and allows uninteresting calls.     | Use when you trust the code under test to not make unexpected calls or want cleaner test output. Ideal for maintainable and less brittle tests.
| **NaggyMock**| Prints warnings for uninteresting calls (current default). | Useful for catching unintended calls during test development or debugging.
| **StrictMock** | Treats uninteresting calls as failures (test fails).    | Use to enforce strict adherence to specified behavior; catch unintended or rogue calls immediately, helping catch subtle bugs, but may increase test maintenance overhead.


## Using NiceMock, NaggyMock, and StrictMock

### Basic Usage

Given a mock class `MockFoo`:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// A naggy mock, current default.
NaggyMock<MockFoo> naggy_foo;

// A nice mock suppressing uninteresting call warnings.
NiceMock<MockFoo> nice_foo;

// A strict mock failing on uninteresting calls.
StrictMock<MockFoo> strict_foo;
```

All three wrappers are subclasses of `MockFoo`. You can construct them just like you would `MockFoo`, including passing constructor arguments:

```cpp
NiceMock<MockBar> nice_bar("hello");  // works if MockBar has such ctor
StrictMock<MockBar> strict_bar(1, 2, 3);
```

### What Happens on Uninteresting Calls?

- **NaggyMock** emits a warning message when an uninteresting method is called but continues execution.
- **NiceMock** ignores warnings for uninteresting calls, making executions quieter.
- **StrictMock** causes a test failure on any uninteresting call, immediately flagging unexpected interactions.

### Code Example Demonstrating Warnings vs. Failures

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

// Naggy (default) mock
{
  NaggyMock<MockFoo> foo;
  foo.DoSomething();  // Warning: Uninteresting call
}

// Nice mock
{
  NiceMock<MockFoo> foo;
  foo.DoSomething();  // No warning
}

// Strict mock
{
  StrictMock<MockFoo> foo;
  foo.DoSomething();  // Test fails: uninteresting call
}
```

## Practical Guidance

### Choosing Which Mock Type to Use

- **Default: NaggyMock (currently)**
  - Good when writing/broadening tests to get informed on unanticipated calls.
  - Output verbosity helps uncover unexpected calls during development.

- **Prefer NiceMock for Most Tests**
  - Suppresses noisy warnings about uninteresting calls.
  - Leads to cleaner test logs and easier maintenance.
  - Becoming the planned default in upcoming updates.

- **Use StrictMock Sparingly**
  - Enforces tight control on mock interactions.
  - Useful when you want zero tolerance for calls other than those expected.
  - Can cause maintenance challenges, as tests may break on unrelated changes.

### Best Practices

- Avoid nesting these modifiers; e.g., `NiceMock<StrictMock<T>>` is **unsupported**.
- Use `EXPECT_CALL` to explicitly declare expected calls.
- For methods you want to ignore unconditionally, consider:
  - Adding a catch-all expectation: `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());`
  - Or use `NiceMock` to prevent warning spam.
- `NiceMock` and `StrictMock` only affect methods defined directly in the mock class via `MOCK_METHOD`; methods inherited from base classes may not be affected consistently.
- Ensure mock classes have **virtual destructors** for correct behavior.

### Handling Non-default-constructible Return Types

If an unexpected call occurs on a `NiceMock` or `NaggyMock` for a method returning a type that cannot be default-constructed, an exception is thrown (or the process crashes if exceptions are disabled). This safeguards against silent invalid returns.


## Advanced Behavior Notes

- **Constructors:** The strictness wrappers "inherit" constructors of the base mock class, so you can forward arbitrary constructor arguments.
- **Registration with Mock:** Internally, these wrappers register/deregister with GoogleMock to manage behavior for uninteresting calls.
- **Uninteresting vs. Unexpected Calls:** Strictness modifiers control **only uninteresting calls**. Unexpected calls — calls that don’t match any active expectations — always produce failures regardless.
- **Leak Handling:** Use `Mock::AllowLeak()` if a mock object is intentionally leaked to avoid false positives.


## Example

Here’s how you might use a nice mock in a test, suppressing warnings for uninteresting calls:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::Return;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& message), ());
};

TEST(PrintTest, UsesNiceMock) {
  NiceMock<MockPrinter> printer;

  EXPECT_CALL(printer, Print("Hello World"));

  printer.Print("Hello World");  // Expected call, passes.
  printer.Print("Ignoring this call");  // Uninteresting call, no warning.
}
```


## Troubleshooting

### No Warning on Uninteresting Calls with NiceMock

This is by design. If you expect some calls but others should be ignored silently, use `NiceMock`.

### Unexpected Calls Still Fail on NiceMock

Keep in mind that `NiceMock` and friends don’t suppress failures on unexpected calls (calls that do not match *any* expectation). Those always fail.

### StrictMock Fails on Unexpected or Uninteresting Calls

This is expected behavior. Use `StrictMock` only when you want your test to fail on any call not explicitly expected.

### Nesting Strictness Modifiers Causes Compilation Errors

Do not nest `NiceMock`, `NaggyMock`, or `StrictMock`. Wrap only once.

### Mock Methods in Base Classes Not Affected by Strictness Modifiers

Due to C++ limitations, methods mocked in base classes of the mock class might not be controlled by `NiceMock` and `StrictMock`. Define mocks directly in the class you wrap.

### Destructor Not Virtual

Ensure your mock class destructor is virtual to avoid unpredictable behavior.


## References & Further Reading

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Introductory guide to gMock
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Full reference on mock definitions and expectations
- [gMock Cookbook - The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy) — Detailed exploration of strictness levels
- [EXPECT_CALL Reference](https://google.github.io/googletest/reference/mocking.html#EXPECT_CALL) — Expectation mechanisms


## Summary

Use strictness modifiers (`NiceMock`, `NaggyMock`, `StrictMock`) to control handling and reporting of uninteresting mock method calls. `NaggyMock` issues warnings (default behavior), `NiceMock` suppresses warnings for cleaner test output, and `StrictMock` enforces failure on uninteresting calls, ensuring strict verification. Choose the wrapper that matches your test's tolerance for unexpected interactions to maintain balance between robustness and maintenance overhead.

---

<Callout title="Tip">
Use `NiceMock` to reduce warning noise in tests that legitimately do not care about all calls to mocks. Reserve `StrictMock` for scenarios where interaction contracts must be rigidly enforced.
</Callout>

<Callout title="Note">
`NiceMock`, `NaggyMock`, and `StrictMock` only affect uninteresting calls (those without expectations). Unexpected calls (calls not matching any expectation) always result in test failures.
</Callout>

<Callout title="Warning">
Do not nest `NiceMock`, `NaggyMock`, or `StrictMock` wrappers as this is unsupported and may cause compilation issues.
</Callout>

---

[Source Code: gmock-nice-strict.h](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h)

[Related Test Coverage](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc)