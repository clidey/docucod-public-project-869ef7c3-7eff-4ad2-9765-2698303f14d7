---
title: "Assertion Macros"
description: "Details GoogleTest's core suite of assertion macros for checking equality, exception throwing, predicates, and more. Explains fatal vs. non-fatal assertions and best practices for error handling and reporting within tests."
---

# Assertion Macros

GoogleTest provides a comprehensive suite of assertion macros designed to verify conditions, compare values, and ensure your tests behave as expected. These macros are fundamental to expressing test intent, handling error reporting, and differentiating between fatal and non-fatal failures.

---

## Understanding Assertions

At their core, assertion macros evaluate conditions or expressions and report success or failure. Based on the result, tests can continue executing (`EXPECT_` macros) or abort immediately (`ASSERT_` macros).

- **Non-fatal assertions (`EXPECT_`)**: Allow test execution to continue after failure, enabling multiple checks per test.
- **Fatal assertions (`ASSERT_`)**: Abort the current function on failure, preventing further code execution.

GoogleTest supports streaming additional messages alongside assertion macros for detailed debugging context.

```cpp
EXPECT_TRUE(condition) << "Detailed failure message.";
ASSERT_EQ(expected, actual) << "Mismatch detected.";
```


## Common Use Cases for Assertion Macros

Assertions help you verify everything from simple boolean checks to complex predicates and exception handling.

### Explicit Success and Failure

Sometimes you want to directly mark a test as succeeded or failed without evaluating a condition.

- **`SUCCEED()`**: Generates a success marker. Useful as a placeholder or to mark code regions explicitly.
- **`FAIL()`**: Generates a fatal failure immediately returning from the current function.
- **`ADD_FAILURE()`**: Generates a non-fatal failure but continues test execution.

### Boolean Conditions

- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`: Verify that a condition is true.
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`: Verify that a condition is false.


### Binary Comparisons

GoogleTest provides macros for equality, inequality, and relational comparisons:

| Macro                  | Condition Verified     |
| ---------------------- | ---------------------- |
| `EXPECT_EQ(val1, val2)` | `val1 == val2`         |
| `EXPECT_NE(val1, val2)` | `val1 != val2`         |
| `EXPECT_LT(val1, val2)` | `val1 < val2`          |
| `EXPECT_LE(val1, val2)` | `val1 <= val2`         |
| `EXPECT_GT(val1, val2)` | `val1 > val2`          |
| `EXPECT_GE(val1, val2)` | `val1 >= val2`         |

The `ASSERT_` variants abort on failure.

> **Important:** When comparing pointers or C strings, GoogleTest distinguishes between pointer equality and content equality. Use `EXPECT_STREQ` and `EXPECT_STRCASEEQ` for C string content comparisons.


### String Comparisons

Specialized macros exist to compare C strings (null-terminated character arrays) including wide strings.

- `EXPECT_STREQ(str1, str2)` / `ASSERT_STREQ`: Compare that two C strings have the same contents.
- `EXPECT_STRNE(str1, str2)` / `ASSERT_STRNE`: Compare that two C strings differ.
- `EXPECT_STRCASEEQ(str1, str2)` / `ASSERT_STRCASEEQ`: Compare two C strings ignoring case.
- `EXPECT_STRCASENE(str1, str2)` / `ASSERT_STRCASENE`: Compare two C strings ignoring case differences.


### Floating-Point Comparisons

Due to rounding errors, exact comparisons of floating-point numbers often fail unexpectedly. GoogleTest offers:

- `EXPECT_FLOAT_EQ(val1, val2)`: Checks approximate equality of `float` values within 4 ULPs.
- `EXPECT_DOUBLE_EQ(val1, val2)`: Checks approximate equality of `double` values within 4 ULPs.
- `EXPECT_NEAR(val1, val2, abs_error)`: Checks that the absolute difference is within a specified bound.


### Exception Assertions

When exceptions are enabled, you can verify throwing behavior:

- `EXPECT_THROW(statement, ExceptionType)`: Verifies that *statement* throws the specified exception.
- `EXPECT_ANY_THROW(statement)`: Verifies that any exception is thrown.
- `EXPECT_NO_THROW(statement)`: Verifies that no exception is thrown.


### Predicate Assertions

For more complex conditions, GoogleTest supports predicate macros:

- `EXPECT_PRED1`, `EXPECT_PRED2`, ..., `EXPECT_PRED5`: Check predicates with 1 to 5 parameters.
- `EXPECT_PRED_FORMAT*_`: Predicate assertions that accept custom failure formatting.

Example:

```cpp
EXPECT_PRED2(MutuallyPrime, a, b); // Verifies that a and b are mutually prime.
```


### Generalized Assertion with Matchers

GoogleTest integrates with GoogleMock's matcher framework, enabling expressive, readable assertions via `EXPECT_THAT`:

```cpp
using ::testing::StartsWith;
EXPECT_THAT(my_string, StartsWith("Hello"));
```

Matchers produce detailed failure messages and allow compositional pattern matching.


## Practical Examples

### Basic Boolean Assertion

```cpp
ASSERT_TRUE(user.IsLoggedIn()) << "User must be logged in to proceed.";
```

### Comparing Values

```cpp
EXPECT_EQ(expected_size, data.size()) << "Wrong container size.";
```

### Validating Floating-Point Output

```cpp
EXPECT_NEAR(calculated_pi, 3.14159, 0.0001);
```

### Checking Exception Throwing

```cpp
EXPECT_THROW(ProcessFile(invalid_path), std::runtime_error);
```

### Using Matchers for Complex Conditions

```cpp
EXPECT_THAT(values, ::testing::ElementsAre(1, 2, 3));
```


## Best Practices

- Use `EXPECT_` macros to check multiple conditions per test without immediate abort.
- Use `ASSERT_` macros when continuing after failure would make test code invalid or cause crashes.
- Stream meaningful failure messages to assertions to improve debuggability.
- Prefer specialized macros (`EXPECT_STREQ`, `EXPECT_FLOAT_EQ`) over generic ones for clarity.
- When verifying exceptions, use specific exception types to avoid false positives.
- Use GoogleMock matchers (`EXPECT_THAT`) for flexible and powerful assertions on values.


## Troubleshooting Common Issues

- Ensure that expressions in `ASSERT_` macros make test code safe to continue.
- Use `EXPECT_STREQ` for comparing C strings by value, not `EXPECT_EQ`.
- Beware of floating-point precision issues; prefer `EXPECT_NEAR` or `EXPECT_{FLOAT,DOUBLE}_EQ`.
- Understand that `FAIL()` terminates the current function; avoid using it in destructors or helper functions called after failure.


## Further Learning and Related Topics

- See GoogleTest [Matchers Reference](../reference/matchers.md) for advanced matching.
- Use GoogleMock's [Mocking Reference](../reference/mocking.md) to mock behavior in tests.
- Explore [Writing Your First Test](../guides/getting_started_core_workflows/writing_first_test.mdx) for practical usage.
- Consult [Running and Interpreting Test Results](../getting-started/first-use/running-tests.mdx) for test execution insights.


---

This documentation equips you with the essential tools to assert test correctness effectively throughout your GoogleTest suites. By combining Boolean checks, comparisons, exception verification, and matcher-based predicates, you can craft robust and informative test validations that capture both expected and edge behaviors.