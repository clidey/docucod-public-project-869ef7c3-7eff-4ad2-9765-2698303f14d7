---
title: "Assertions Reference"
description: "In-depth catalog of assertion macros, such as EXPECT_ and ASSERT_ families, including support for predicates, custom assertions, and detailed failure reporting. Includes usage patterns and illustrative code snippets for practical testing tasks."
---

# Assertions Reference

This page lists the assertion macros provided by GoogleTest for verifying code behavior. To use these macros, include `#include <gtest/gtest.h>` in your test files.

All assertion macros come in pairs: `EXPECT_` variants generate nonfatal failures that allow the current function to continue, while `ASSERT_` variants generate fatal failures and abort the current function immediately.

You can stream custom failure messages into assertions using the `<<` operator to provide additional context.

---

## Explicit Success and Failure

Assertions that generate success or failure directly without testing an expression.

### SUCCEED

```cpp
SUCCEED();
```

Generates a success explicitly. Does not make the overall test succeed by itself.

### FAIL

```cpp
FAIL();
```

Generates a fatal failure, aborting the current function.

### ADD_FAILURE

```cpp
ADD_FAILURE();
```

Generates a nonfatal failure, allowing the current function to continue.

### ADD_FAILURE_AT

```cpp
ADD_FAILURE_AT(file_path, line_number);
```

Generates a nonfatal failure reported at the specified file and line.

---

## Generalized Assertion

### EXPECT_THAT

```cpp
EXPECT_THAT(value, matcher);
ASSERT_THAT(value, matcher);
```

Verifies that `value` matches the given [matcher](matchers.md). Supports expressive assertions with detailed failure messages. For example:

```cpp
using ::testing::StartsWith;
EXPECT_THAT(str, StartsWith("Hello"));
```

Matchers provide rich language constructs to build complex checks.

---

## Boolean Conditions

Test boolean expressions.

### EXPECT_TRUE / ASSERT_TRUE

```cpp
EXPECT_TRUE(condition);
ASSERT_TRUE(condition);
```

Verifies that `condition` is true.

### EXPECT_FALSE / ASSERT_FALSE

```cpp
EXPECT_FALSE(condition);
ASSERT_FALSE(condition);
```

Verifies that `condition` is false.

---

## Binary Comparison

Compare two values with relational operators. Arguments are evaluated exactly once. Prefer these over manual boolean checks for better messages.

| Macro          | Description                             |
| -------------- | ------------------------------------- |
| `EXPECT_EQ`    | Verifies `val1 == val2`                |
| `ASSERT_EQ`    | Same as above, aborts on failure      |
| `EXPECT_NE`    | Verifies `val1 != val2`                |
| `ASSERT_NE`    | Same as above                         |
| `EXPECT_LT`    | Verifies `val1 < val2`                 |
| `ASSERT_LT`    | Same as above                         |
| `EXPECT_LE`    | Verifies `val1 <= val2`                |
| `ASSERT_LE`    | Same as above                         |
| `EXPECT_GT`    | Verifies `val1 > val2`                 |
| `ASSERT_GT`    | Same as above                         |
| `EXPECT_GE`    | Verifies `val1 >= val2`                |
| `ASSERT_GE`    | Same as above                         |

**Note:** Placing `ASSERT_*` macros will abort the current function if the assertion fails.

---

## String Comparison

Specialized assertions for comparing **C strings** (null-terminated character pointers), including wide strings.

- `EXPECT_STREQ` / `ASSERT_STREQ`: compares strings for equality by content.
- `EXPECT_STRNE` / `ASSERT_STRNE`: compares strings for inequality by content.
- `EXPECT_STRCASEEQ` / `ASSERT_STRCASEEQ`: compares strings ignoring case.
- `EXPECT_STRCASENE` / `ASSERT_STRCASENE`: compares strings for inequality ignoring case.

For `std::string` or `std::wstring`, use binary comparisons like `EXPECT_EQ`.

---

## Floating-Point Comparison

Comparisons account for rounding errors and floating-point peculiarities.

- `EXPECT_FLOAT_EQ` / `ASSERT_FLOAT_EQ`: compare `float` values approximately equal within 4 ULPs.
- `EXPECT_DOUBLE_EQ` / `ASSERT_DOUBLE_EQ`: compare `double` values approximately equal within 4 ULPs.
- `EXPECT_NEAR` / `ASSERT_NEAR`: verify the difference between values is within an absolute error bound.

Example:

```cpp
EXPECT_FLOAT_EQ(3.1415f, computed_val);
EXPECT_NEAR(3.1415, computed_val, 0.0001);
```

---

## Exception Assertions

Require exceptions enabled in your build.

- `EXPECT_THROW(statement, exception_type)`: Verifies that `statement` throws `exception_type`.
- `ASSERT_THROW(statement, exception_type)`: Same as above, aborts on failure.
- `EXPECT_ANY_THROW(statement)`: Verifies that `statement` throws any exception.
- `ASSERT_ANY_THROW(statement)`: Same as above, aborts on failure.
- `EXPECT_NO_THROW(statement)`: Verifies that `statement` does not throw.
- `ASSERT_NO_THROW(statement)`: Same as above, aborts on failure.

Example:

```cpp
EXPECT_THROW(Foo(), std::runtime_error);
EXPECT_NO_THROW(Initialize());
```

---

## Predicate Assertions

Improve failure messages by asserting the return of a predicate function.

### EXPECT_PREDn

Support predicates of varying arities (1 to 5 arguments).

Example:

```cpp
bool IsEven(int n) { return (n % 2) == 0; }
EXPECT_PRED1(IsEven, value);
```

### EXPECT_PRED_FORMATn
Use a predicate-formatter for full control of failure message formatting.

Example with custom formatter:

```cpp
testing::AssertionResult AssertIsEven(const char* expr, int n) {
  if (n % 2 == 0) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr << " evaluates to " << n << ", which is not even.";
}
EXPECT_PRED_FORMAT1(AssertIsEven, value);
```

Details at [GoogleTest Advanced Guide](advanced.md#predicates).

---

## Windows HRESULT Assertions (Windows only)

Specialized macros for checking HRESULT success or failure codes.

- `EXPECT_HRESULT_SUCCEEDED(expression)` / `ASSERT_HRESULT_SUCCEEDED(expression)`: Verifies that expression succeeded.
- `EXPECT_HRESULT_FAILED(expression)` / `ASSERT_HRESULT_FAILED(expression)`: Verifies failure.

These macros provide readable error messages with both the hex code and system error message.

---

## Death Assertions

Used for testing that a piece of code causes the process to terminate as expected.

- `EXPECT_DEATH(statement, matcher)` / `ASSERT_DEATH(statement, matcher)`: Verify `statement` terminates process and stderr output matches `matcher`.
- `EXPECT_DEATH_IF_SUPPORTED` / `ASSERT_DEATH_IF_SUPPORTED`: Like above, only if death tests are supported.
- `EXPECT_DEBUG_DEATH` / `ASSERT_DEBUG_DEATH`: Like `EXPECT_DEATH` in debug builds; otherwise, just executes.
- `EXPECT_EXIT(statement, predicate, matcher)` / `ASSERT_EXIT(statement, predicate, matcher)`: Verify `statement` terminates with exit status that satisfies `predicate` and stderr output matches `matcher`.

Example:

```cpp
EXPECT_DEATH(FailFast(), "Fatal error occurred");
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

See the [Death Tests Guide](guides/real-world-workflows/death-tests) for best practices and guidelines.

---

## FRIEND_TEST

Allows unit tests to access private and protected members by declaring them as friends within the class under test.

Example:

```cpp
class Foo {
  friend class FooTest;
  FRIEND_TEST(FooTest, Bar);
private:
  int Secret() const { return 42; }
};

TEST_F(FooTest, Bar) {
  Foo foo;
  EXPECT_EQ(foo.Secret(), 42);
}
```

Requires that the test fixture and tests be in the same namespace as the class.

---

## SCOPED_TRACE

```cpp
SCOPED_TRACE(message);
```

Adds a trace message to failure outputs occurring within the current scope. Useful for diagnosing failures in helper functions by indicating the context of the failure.

Example:

```cpp
void Helper(int n) {
  EXPECT_EQ(n, 1);
}

TEST(FooTest, Bar) {
  SCOPED_TRACE("n = 2");
  Helper(2);  // Failures here will include "n = 2"
}
```

---

## RecordProperty

Log key/value properties associated with a test, visible in XML reports.

Usage:

```cpp
RecordProperty("Key", "Value");
RecordProperty("Count", 5);
```

Properties recorded during the execution of a test are attached to that test in the XML output. Properties recorded in `SetUpTestSuite` or `TearDownTestSuite` are attached to the test suite in the report.

Keys must not use reserved XML attribute names such as `name`, `time`, `status`, `classname`, `type_param`, and `value_param`.

---

## Usage Tips and Notes

- Use `EXPECT_` for non-fatal assertions that allow tests to continue after failure.
- Use `ASSERT_` for fatal assertions where continuing doesn't make sense.
- Assertion arguments are evaluated only once, so side effects are safe but beware of evaluation order being undefined.
- When writing death tests, avoid freeing resources that will not survive the subprocess.
- Use `FRIEND_TEST` to test private members if necessary but prefer testing public APIs.
- `SCOPED_TRACE` helps diagnose failures in helper functions by adding context.
- Capture additional test metadata with `RecordProperty` for richer reports.

---

For complete details and advanced usage, see:
- [GoogleTest Primer](../primer.md)
- [Advanced GoogleTest Topics](../advanced.md)
- [Death Tests Guide](guides/real-world-workflows/death-tests.mdx)
- [Matchers Reference](gmock-mock-api/matchers-reference)
- [Mocking Basics](guides/real-world-workflows/mocking-basics)

