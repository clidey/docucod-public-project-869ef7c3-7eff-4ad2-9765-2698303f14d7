---
title: "Strictness Controls: NiceMock, NaggyMock, StrictMock"
description: "References wrappers that control mock behavior on unexpected calls, guiding users in applying appropriate mock strictness for different testing scenarios to balance noise and rigor."
---

# Strictness Controls: NiceMock, NaggyMock, StrictMock

This reference page explains how to use the **NiceMock**, **NaggyMock**, and **StrictMock** wrappers in GoogleMock to control mock object behavior for unexpected (uninteresting) calls. These strictness controls help you balance noise and rigor in your tests by adjusting how unplanned mock method calls are reported and handled.

---

## Overview

When writing tests with mock objects, sometimes your tests exercise methods that you did not explicitly set expectations on (called *uninteresting calls*). How GoogleMock responds to such calls depends on the mock strictness:

- **NiceMock**: Suppresses warnings for uninteresting calls, making tests quieter.
- **NaggyMock**: Prints warnings on uninteresting calls (this is the current default behavior).
- **StrictMock**: Treats uninteresting calls as failures, causing test errors.

These wrappers provide a per-mock-object mechanism to adjust how strictly unexpected mock calls are treated, helping you tailor testing feedback to your scenario.


## Why Use Strictness Wrappers?

In testing, you want a balance between:

- **Noise reduction:** Ignoring unimportant calls that do not affect test outcomes.
- **Rigor:** Catching unintended interactions early to avoid test brittleness or false positives.

Strictness wrappers let you make that choice:

- Use **NiceMock** when you want to focus on core expectations and avoid warnings from auxiliary calls.
- Use **NaggyMock** when you want to be informed of uninteresting calls but not fail tests.
- Use **StrictMock** when you want to be alerted by failures to any unexpected calls, enforcing precise mock usage.


## Available Wrappers

These are class templates provided by GoogleMock that wrap your mock classes:

| Wrapper           | Behavior on Uninteresting Calls                | Usage Pattern                    |
| ----------------- | ---------------------------------------------- | ------------------------------- |
| `NiceMock<T>`     | Warnings suppressed; uninteresting calls allowed | `NiceMock<MockClass> nice(mock_args);` |
| `NaggyMock<T>`    | Warns on uninteresting calls (default)          | `NaggyMock<MockClass> naggy(mock_args);` |
| `StrictMock<T>`   | Fails test on any uninteresting call            | `StrictMock<MockClass> strict(mock_args);` |


## Using Strictness Wrappers

### Example: Making a Nice Mock

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

TEST(MyTest, UsesNiceMock) {
  NiceMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis(); // Matches expectation
  mock_foo.DoThis(); // Allowed; does not warn
}
```

### Example: Making a Strict Mock

```cpp
#include <gmock/gmock.h>
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

TEST(MyTest, UsesStrictMock) {
  StrictMock<MockFoo> strict_foo;
  EXPECT_CALL(strict_foo, DoThis());

  strict_foo.DoThis();     // Matches expectation
  strict_foo.DoThis();     // Fails test — uninteresting call
}
```

### Constructing Wrappers with Arguments

Since these wrappers subclass your mock class, they inherit constructors:

```cpp
NiceMock<MockBar> nice_bar("arg1", 42);
StrictMock<MockBar> strict_bar("config", true);
```

This works as long as your mock class has the respective constructors.


## Behavior Details

| Aspect                            | NiceMock                              | NaggyMock                            | StrictMock                         |
|----------------------------------|-------------------------------------|------------------------------------|----------------------------------|
| Uninteresting calls              | Allowed silently                     | Allowed with warning                | Fails the test                   |
| Unexpected calls (no matching EXPECT_CALL) | Always fails as expected            | Always fails as expected            | Always fails as expected          |
| Works with MOCK_METHOD macros    | Yes, only on mock methods defined directly in wrapped class (no base class effects) | Yes, same as NiceMock              | Yes, same as NiceMock             |
| Destructor behavior              | Does not log uninteresting calls on destruction | Logs uninteresting calls on destruction | Fails on uninteresting calls on destruction |


## Common Usage Patterns and Tips

### Choosing Strictness Level

- Use **`NiceMock`** for stable unit tests where irrelevant calls cause noise.
- Use **`NaggyMock`** (default) while developing tests to catch unexpected calls early.
- Use **`StrictMock`** when you want to ensure *only* specified calls happen; useful in critical or highly safety-sensitive tests.


### Suppressing Warnings Without Changing Behavior

If you want to silence warnings for some calls but keep NaggyMock or default mocks, introduce an explicit catch-all `EXPECT_CALL` per method:

```cpp
EXPECT_CALL(mock, SomeMethod(_)).Times(AnyNumber());
```

But prefer `NiceMock` if this applies broadly.


### Compatibility Considerations

- Works only if mocked methods are defined with `MOCK_METHOD` directly in the mock class.
- Wrapping mocks with different strictness modifiers nested is unsupported.
- Wrappers assume the mock class has a virtual destructor.


### Allowing Leaks

You can explicitly allow a wrapped mock to leak (disable verification) with:

```cpp
Mock::AllowLeak(&mock_object);
```


### How to Check Strictness of a Mock Object

GoogleMock provides utility functions to check mock type:

```cpp
Mock::IsNice(&mock) // true if NiceMock
Mock::IsNaggy(&mock) // true if NaggyMock or default mock
Mock::IsStrict(&mock) // true if StrictMock
```


## Under the Hood

Strictness wrappers work by registering with GoogleMock to alter how uninteresting calls to their associated mock object are handled: allowing silently, warning, or failing.

Each wrapper inherits constructors from the mock class and hooks mock lifecycle to control behavior.


## Troubleshooting

<AccordionGroup title="Common Issues with Strictness Wrappers">
<Accordion title="Why don't NiceMock, NaggyMock, StrictMock affect base-class mock methods?">
These wrappers only alter methods defined directly in the wrapped class. Methods mocked in base classes may not have their uninteresting calls affected due to C++ compiler limitations.

*Tip:* Define all mock methods in the wrapped class itself.
</Accordion>
<Accordion title="Can I nest strictness wrappers (e.g., NiceMock<StrictMock<MockFoo>>)?">
Nesting is unsupported and may cause unexpected behavior. Use a single strictness wrapper per mock object.
</Accordion>
<Accordion title="Uninteresting calls still cause warnings with NiceMock?">
Ensure that the mock methods are defined with the MOCK_METHOD macro directly in the wrapped class and that the destructor of the mock is virtual.
</Accordion>
</AccordionGroup>


## References and Further Reading

- [Mocking Reference - Strictness Wrappers](reference/mocking-framework-api/strictness-nice-strict-mocks)
- [gMock Cookbook - The Nice, the Strict, and the Naggy](guides/core_testing_patterns/effective_mocking#mocksandstrictness)
- [gMock Cheat Sheet - Mocking Normal Classes](reference/mocking-framework-api/mock-classes-methods#MockClass)
- [gMock for Dummies - Using Mocks in Tests](guides/getting_started/first_tests#usingmocks)


---

For detailed usage, examples, and best practices, see the provided code tests in GoogleTest’s `gmock-nice-strict_test.cc` and `gmock-nice-strict.h` source files.


---

## Summary

This page covers how to use GoogleMock’s strictness wrappers:

- The **NiceMock** wrapper suppresses warnings on uninteresting calls.
- The **NaggyMock** wrapper prints warnings on uninteresting calls (default behavior).
- The **StrictMock** wrapper treats uninteresting calls as test failures.

They help test authors tailor feedback noise and rigor in tests.

Use strictness wrappers by wrapping your mock class template, inheriting base constructors, and using them as mocks in tests.

**Important:** Use these wrappers only with mocks whose methods are defined directly via `MOCK_METHOD` in your mock class.


# Code Snippet

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Define your mock class
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

// Writing a test with NiceMock
TEST(MyTest, UseNiceMock) {
  NiceMock<MockFoo> nice;
  EXPECT_CALL(nice, DoThis());
  nice.DoThis(); // matches expectation
  nice.DoThis(); // allowed silently
}

// Writing a test with StrictMock
TEST(MyTest, UseStrictMock) {
  StrictMock<MockFoo> strict;
  EXPECT_CALL(strict, DoThis());
  strict.DoThis(); // matches expectation
  strict.DoThis(); // test will fail
}
```

---