---
title: "Assertions API Reference"
description: "Complete reference for built-in assertions such as EXPECT_EQ, ASSERT_TRUE, and user-defined assertions. Describes assertion macros, parameter types, and return behaviors, with notes on fatal vs. non-fatal errors and sample usage in C++ test files."
---

# Assertions API Reference

This page provides a comprehensive reference for GoogleTest's assertion macros, including built-in assertions like `EXPECT_EQ`, `ASSERT_TRUE`, and user-defined assertions. It covers the syntax, usage, parameter expectations, return behaviors, and distinctions between fatal and non-fatal failures. You will find detailed explanations, practical examples in C++ test code, and notes on best practices to help you effectively verify code behavior in your tests.

---

## 1. Assertion Overview

GoogleTest assertions are macros you use to verify conditions in your tests. They come mainly in pairs:

- `EXPECT_` macros generate **nonfatal failures**. The test continues after a failure, allowing multiple assertions per test.
- `ASSERT_` macros generate **fatal failures**. They abort the current test function immediately when a failure occurs.

Every assertion supports streaming custom failure messages using the insertion operator (`<<`) to add helpful context.

```cpp
EXPECT_TRUE(my_condition) << "Condition failed because of unexpected state.";
```

### Fundamental Characteristics

- Assertions verify boolean conditions, comparisons, exceptions, or predicates.
- On failure, readable diagnostic messages and values are printed.
- They support wide and narrow strings.

Use `EXPECT_` macros when you want the test to continue after failure, and `ASSERT_` macros when later steps depend on the assertion passing.

---

## 2. Explicit Success and Failure Assertions

Some assertions are declarative, used for documenting intent or forcibly marking success/failure.

### SUCCEED()

- Marks a test explicitly as having succeeded.
- Does not influence test outcome but improves readability.

### FAIL()

- Generates a fatal failure and aborts the current test function.
- Only usable in `void`-returning functions.

### ADD_FAILURE()

- Generates a nonfatal failure, allows test to continue.

### ADD_FAILURE_AT(file, line)

- Similar to `ADD_FAILURE()`, but reports failure at a specific file and line number.

```cpp
if (unexpected_case) {
  ADD_FAILURE_AT("my_file.cc", 123) << "Reached an unexpected branch";
}
```

---

## 3. Generalized Assertion (Using Matchers)

GoogleTest integrates with gMock matchers to perform complex validations using:

### EXPECT_THAT(value, matcher)

### ASSERT_THAT(value, matcher)

Verifies if *value* satisfies a matcher, which can express intricate conditions and compose validations naturally.

Example:

```cpp
EXPECT_THAT(str, StartsWith("Hello"));
EXPECT_THAT(num, AllOf(Ge(5), Le(10)));
```

Matchers generate clear failure messages describing which part of the condition failed.

See the [Matchers Reference](matchers.md) for extensive matcher options.

---

## 4. Boolean Condition Assertions

Simplest form: verify boolean truthiness:

| Assertion        | Behavior                         |
|------------------|--------------------------------|
| `EXPECT_TRUE(cond)` | Test passes if `cond` is true.  |
| `ASSERT_TRUE(cond)` | Fails test fatally if `cond` is false. |
| `EXPECT_FALSE(cond)` | Test passes if `cond` is false. |
| `ASSERT_FALSE(cond)` | Fails fatally if `cond` is true. |

Example:

```cpp
EXPECT_TRUE(ptr != nullptr) << "Pointer is unexpectedly null";
ASSERT_FALSE(error_occurred) << "Unexpected error state";
```

---

## 5. Binary Comparison Assertions

Compare two values using standard relational operators. Ensure the arguments are comparable.

| Assertion       | Meaning                         |
|-----------------|--------------------------------|
| `EXPECT_EQ(a,b)` | Passes if `a == b`              |
| `ASSERT_EQ(a,b)` | Fatal failure if `a != b`       |
| `EXPECT_NE(a,b)` | Passes if `a != b`              |
| `ASSERT_NE(a,b)` | Fatal failure if `a == b`       |
| `EXPECT_LT(a,b)` | Passes if `a < b`               |
| `ASSERT_LT(a,b)` | Fatal failure otherwise         |
| `EXPECT_LE(a,b)` | Passes if `a <= b`              |
| `ASSERT_LE(a,b)` | Fatal failure otherwise         |
| `EXPECT_GT(a,b)` | Passes if `a > b`               |
| `ASSERT_GT(a,b)` | Fatal failure otherwise         |
| `EXPECT_GE(a,b)` | Passes if `a >= b`              |
| `ASSERT_GE(a,b)` | Fatal failure otherwise         |

**Pointers:**
- Equality compares memory location, not pointed-to values.
- For C-strings (e.g., `const char*`), comparing with `EXPECT_EQ` compares pointers, not string content.
- Use `EXPECT_STREQ` or `EXPECT_STRNE` to compare C-style strings literally.

Example:

```cpp
EXPECT_EQ(x, 42) << "x should be 42";
ASSERT_LT(a.size(), limit);
```

---

## 6. String Comparison Assertions

Intended for comparing C-style strings (null-terminated character arrays).

| Assertion         | Comparison Type                                           |
|-------------------|----------------------------------------------------------|
| `EXPECT_STREQ(s1, s2)` | Verifies `s1` and `s2` have equal contents               |
| `ASSERT_STREQ(s1, s2)` | Fatal failure on mismatch                                 |
| `EXPECT_STRNE(s1, s2)` | Verifies `s1` and `s2` have different contents            |
| `ASSERT_STRNE(s1, s2)` | Fatal failure if contents are the same                     |
| `EXPECT_STRCASEEQ(s1, s2)` | Case-insensitive equality                               |
| `ASSERT_STRCASEEQ(s1, s2)` | Fatal failure on case-insensitive mismatch              |
| `EXPECT_STRCASENE(s1, s2)` | Case-insensitive inequality                             |
| `ASSERT_STRCASENE(s1, s2)` | Fatal failure if strings match case-insensitively      |

Example:

```cpp
EXPECT_STREQ(cstr1, cstr2);
ASSERT_STRNE(ptr1, ptr2) << "Strings must differ";
```

---

## 7. Floating-Point Comparison Assertions

Floating-point values require special care due to precision. Use these macros for approximate equality:

| Assertion          | Description                                          |
|--------------------|------------------------------------------------------|
| `EXPECT_FLOAT_EQ(a,b)` | Passes if `a` and `b` are approximately equal within 4 Units in the Last Place (ULPs), for floats. |
| `ASSERT_FLOAT_EQ(a,b)` | Fatal failure otherwise                             |
| `EXPECT_DOUBLE_EQ(a,b)` | Same as above for double precision.                |
| `ASSERT_DOUBLE_EQ(a,b)` | Fatal failure otherwise                             |
| `EXPECT_NEAR(val1,val2, abs_error)` | Passes if difference between `val1` and `val2` does not exceed `abs_error`. |
| `ASSERT_NEAR(val1,val2, abs_error)` | Fatal failure otherwise                             |

Example:

```cpp
EXPECT_FLOAT_EQ(result_float, expected_float);
ASSERT_NEAR(measured_value, target_value, 0.01);
```

---

## 8. Exception Assertions

Verify that certain code throws or does not throw exceptions. Requires exception support.

| Assertion              | Usage Example                                      |
|------------------------|----------------------------------------------------|
| `EXPECT_THROW(stmt, ExceptionType)` | Checks `stmt` throws `ExceptionType`.     |
| `ASSERT_THROW(stmt, ExceptionType)` | Fatal failure if not thrown.               |
| `EXPECT_ANY_THROW(stmt)` | Checks `stmt` throws any exception.             |
| `ASSERT_ANY_THROW(stmt)` | Fatal failure if no exception.                   |
| `EXPECT_NO_THROW(stmt)`  | Checks `stmt` does not throw.                     |
| `ASSERT_NO_THROW(stmt)`  | Fatal failure if exception is thrown.            |

Example:

```cpp
EXPECT_THROW(Foo(), std::runtime_error);
EXPECT_NO_THROW(Bar());
```

You can use compound statements with braces `{ ... }`.

---

## 9. Predicate Assertions

Useful for verifying predicates, with clearer failure messages reporting argument values.

### EXPECT_PREDn(pred, val1, ..., valn)

Verify the predicate function `pred` with `n` arguments returns true.

Example:

```cpp
bool IsPositive(int n) { return n > 0; }
EXPECT_PRED1(IsPositive, 5); // Passes
EXPECT_PRED1(IsPositive, -1); // Fails
```

### EXPECT_PRED_FORMATn(pred_formatter, val1, ..., valn)

Uses a **predicate formatter function** that can provide custom failure messages.

Example:

```cpp
testing::AssertionResult ValidateEqual(const char* expr1, const char* expr2, int val1, int val2) {
  if (val1 == val2) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr1 << " and " << expr2 << " are not equal: " << val1 << " vs " << val2;
}
EXPECT_PRED_FORMAT2(ValidateEqual, a, b);
```

---

## 10. HRESULT Assertions (Windows-specific)

For verifying COM HRESULT success or failure with informative messages.

| Assertion              | Behavior                                       |
|------------------------|------------------------------------------------|
| `EXPECT_HRESULT_SUCCEEDED(expr)` | Verifies HRESULT indicates success            |
| `ASSERT_HRESULT_SUCCEEDED(expr)` | Fatal failure on failure HRESULT              |
| `EXPECT_HRESULT_FAILED(expr)`    | Verifies HRESULT indicates failure            |
| `ASSERT_HRESULT_FAILED(expr)`    | Fatal failure if HRESULT indicates success    |

Example:

```cpp
ASSERT_HRESULT_SUCCEEDED(shell.CoCreateInstance(L"Shell.Application"));
```

---

## 11. Death Assertions

Verify that code terminates the process with an error, optionally matching stderr output.

| Assertion                  | Description                                      |
|----------------------------|--------------------------------------------------|
| `EXPECT_DEATH(statement, matcher)` | Asserts `statement` causes process death matching `matcher`. |
| `ASSERT_DEATH(statement, matcher)` | Fatal failure if not                             |
| `EXPECT_DEATH_IF_SUPPORTED`         | Runs `EXPECT_DEATH` if death tests supported     |
| `EXPECT_DEBUG_DEATH`                | Like `EXPECT_DEATH`, runs only in Debug builds   |
| `EXPECT_EXIT(statement, predicate, matcher)` | Verify `statement` exits with exit code matching `predicate` and stderr matching `matcher` |

Example:

```cpp
EXPECT_DEATH(SomeDangerousFunc(), "Error message regex");
EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), "Success");
```

---

## 12. Practical Tips and Best Practices

- Use `EXPECT_` assertions for checks where you want the test to continue allowing multiple failures to surface.
- Use `ASSERT_` for critical checks where further test code depends on the check passing.
- Stream error messages (`<<`) to assertions for clarity.
- Prefer `EXPECT_THAT` with matchers for expressive, readable, reusable tests.
- Beware pointer equality vs string content equality; use string-specific assertions as needed.
- For floating-point, use approximate equality assertions, not direct equality.
- Place assertions before code execution for meaningful failure context.
- Use death tests carefully, validating correctness and failure modes.

---

## 13. Example Usage in C++ Test Files

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  int a = 5, b = 10;

  EXPECT_EQ(a, 5);
  ASSERT_LT(a, b) << "a should be less than b";

  EXPECT_TRUE(b > a);
  EXPECT_FALSE(a > b);

  const char* foo = "bar";
  const char* baz = "bar";
  EXPECT_STREQ(foo, baz);

  EXPECT_NEAR(3.14, 3.1415, 0.01);

  EXPECT_THROW(throw std::runtime_error("fail"), std::runtime_error);
  EXPECT_NO_THROW(int x = a + b);

  EXPECT_THAT(std::string("hello world"), ::testing::HasSubstr("world"));
}
```

This example demonstrates several assertions checking simple conditions, string equality, floating-point near-equality, exception throwing, and matcher-based validation.

---

## 14. Troubleshooting Common Issues

- **Assertion never triggered**: Ensure expectations/assertions occur after the code that may trigger them.
- **Misuse of `EXPECT_EQ` for strings**: Use `EXPECT_STREQ` for C strings.
- **Test aborts unexpectedly**: Replace `ASSERT_` with `EXPECT_` if you want the test to continue.
- **Floating-point comparison fails unexpectedly**: Use floating-point assertions rather than exact equality.
- **Death test hanging**: Verify the death test triggers the expected termination; consider timeouts.

Further troubleshooting can be found in the [Troubleshooting & Quick Validation]( /getting-started/configuration-first-test-validation/troubleshooting-validation ) guide.

---

For more detailed explanation, examples, and advanced assertion techniques, consult the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) and the related [Matchers Reference](matchers.md).


---

<Info>
This Assertions API Reference page focuses solely on the collection of assertion macros offered by GoogleTest. For mocking-related assertions, see the Mocking Framework section. To learn how to write custom assertions and integrate matchers, see the guides on assertions and matchers.
</Info>