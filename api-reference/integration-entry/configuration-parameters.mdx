---
title: "Test Framework Configuration Flags"
description: "Details the available runtime flags, environment variables, and command-line parameters used to configure GoogleTest and GoogleMock test execution (such as output formatting, shuffling, and filtering)."
---

# Test Framework Configuration Flags

This documentation page provides a comprehensive reference for the runtime flags, environment variables, and command-line parameters that control how GoogleTest and GoogleMock execute tests. These options enable flexible configurations such as selecting tests to run, controlling output formats, managing execution behaviors like shuffling and repetition, and handling failures. Understanding these flags allows you to tailor your test runs for different workflows, optimize test reporting, and debug more effectively.

---

## Overview of Configuration Flags

GoogleTest and GoogleMock expose a set of configurable flags that influence various aspects of the testing framework's behavior. These flags can be set either as command-line parameters (with the prefix `--gtest_`) or via environment variables (with uppercase names starting typically with `GTEST_`). Flags control areas including:

- Test selection and filtering
- Output customization (formatting, verbosity, colors)
- Test execution parameters (repeat count, shuffle, random seed)
- Failure handling behavior
- Advanced diagnostic and debug options

All flags start with the `gtest_` prefix to avoid clashes.

---

## Key Configuration Flags and Environment Variables

Below is a detailed list of the primary configuration flags you can use when running your GoogleTest or GoogleMock powered test executables.

### Test Selection and Filtering

| Flag | Description | Usage |
|-------|-------------|-------|
| `--gtest_filter` | A colon-separated list of glob patterns to specify which tests to run and which to exclude. Allows positive and negative patterns separated by `-`. Supports `?` and `*` wildcards. | `--gtest_filter=Suite1.*:Suite2.TestA-*.Flaky` |
| `--gtest_also_run_disabled_tests` | Runs disabled tests in addition to enabled ones. Disabled tests are normally skipped. | `--gtest_also_run_disabled_tests` or `1` |
| `--gtest_list_tests` | Lists all tests matching the filter without running them. Useful to inspect available tests before execution. | `--gtest_list_tests`

### Test Execution Control

| Flag | Description | Usage |
|-------|-------------|-------|
| `--gtest_repeat` | Specifies how many times to repeat each test. Negative numbers indicate infinite repetition. Useful for detecting flaky tests. | `--gtest_repeat=10` or `--gtest_repeat=-1` |
| `--gtest_shuffle` | Randomizes the order of test execution on each run. Helps detect test interdependencies. | `--gtest_shuffle` or `true` |
| `--gtest_random_seed` | Sets the seed for randomization. Range is 1 to 99999, or 0 to use current time as seed. | `--gtest_random_seed=12345` |
| `--gtest_recreate_environments_when_repeating` | Controls whether global test environments are recreated on each repeat. Defaults false. Useful when environments are stable and expensive to set up. | `--gtest_recreate_environments_when_repeating` or `1` |
| `--gtest_fail_fast` | Stops test execution immediately on the first failure. | `--gtest_fail_fast` or `1` |

### Output Configuration

| Flag | Description | Usage |
|-------|-------------|-------|
| `--gtest_output` | Specifies the output format (xml, json) and optionally the target file or directory. Example: `xml:results/` or `json:single_file.json` | `--gtest_output=xml` or `--gtest_output=json:results/` |
| `--gtest_brief` | Only print failures in the output, suppressing success messages. | `--gtest_brief=1` |
| `--gtest_print_time` | Enable or disable printing the duration of each test. Default is true. | `--gtest_print_time=0` disables timing output |
| `--gtest_color` | Control color output of console messages. Values: `yes`, `no`, `auto` (default). `auto` enables colors when console supports it. | `--gtest_color=yes` |

### Failure and Exception Handling

| Flag | Description | Usage |
|-------|-------------|-------|
| `--gtest_break_on_failure` | Breaks into a debugger when a failure occurs. | `--gtest_break_on_failure` or `1` |
| `--gtest_throw_on_failure` | Throws a C++ exception on assert failure if exceptions are enabled, or exits with failure otherwise. Useful for integration with external testing frameworks. | `--gtest_throw_on_failure` or `1` |
| `--gtest_catch_exceptions` | Specifies whether GoogleTest catches exceptions from tests and treats them as failures. Default is true, disable this to let exceptions propagate. | `--gtest_catch_exceptions=0` |
| `--gtest_stack_trace_depth` | Maximum number of stack frames to show in failure stack traces. Range [0,100]. | `--gtest_stack_trace_depth=10` |
| `--gtest_install_failure_signal_handler` | Installs a signal handler that captures fatal signals and dumps debugging info. Only effective on supported platforms. | `--gtest_install_failure_signal_handler=1` |

### Sharding and Parallel Execution Support

| Flag | Description | Usage |
|-------|-------------|-------|
| `GTEST_TOTAL_SHARDS` (env var) | The total number of shards (partitions) to divide the tests into. | `export GTEST_TOTAL_SHARDS=5` |
| `GTEST_SHARD_INDEX` (env var) | The index of the shard to run on this test process (0-based). Tests are split accordingly. | `export GTEST_SHARD_INDEX=2` |
| `GTEST_SHARD_STATUS_FILE` (env var) | Path to a file indicating the status of shard tests during execution. | `export GTEST_SHARD_STATUS_FILE=/tmp/shard_status` |

### Additional Debugging and Behavior Flags

| Flag | Description | Usage |
|-------|-------------|-------|
| `--gtest_fail_if_no_test_linked` | Fail the run if no test cases are linked into the executable. Useful for CI validation. | `--gtest_fail_if_no_test_linked=1` |
| `--gtest_fail_if_no_test_selected` | Fail if no tests match the filter selection. Prevent silent test no-runs. | `--gtest_fail_if_no_test_selected=1` |
| `--gtest_list_tests` | List all the tests discovered without running them. | `--gtest_list_tests` |
| `--gtest_print_utf8` | Enables/disables printing UTF-8 characters in output. Defaults true. | `--gtest_print_utf8=0` disables UTF-8 printing |
| `--gtest_stream_result_to` | Streams test results over the network to a server for real-time processing (Linux/macOS only). Format: `host:port` | `--gtest_stream_result_to=localhost:555` |
| `--gtest_brief` | Print only test failures, to reduce output noise. | `--gtest_brief=1` |

---

## Setting Flags via Environment Variables

Many flags can alternatively be set using environment variables named in uppercase with underscores, mirroring the flag name. For example, `--gtest_color` corresponds to the environment variable `GTEST_COLOR`. This flexibility is useful in CI environments or when modifying test executable command lines is inconvenient.

### Common GoogleTest Environment Variables

| Environment Variable | Maps to Flag | Description |
|----------------------|--------------|-------------|
| `GTEST_COLOR` | `--gtest_color` | Enable or disable colored output.
| `GTEST_FILTER` | `--gtest_filter` | Filter positive and negative test patterns.
| `GTEST_REPEAT` | `--gtest_repeat` | Repeat count for test runs.
| `GTEST_SHARD_INDEX` | Sharding: shard index of current shard.
| `GTEST_TOTAL_SHARDS` | Sharding: total number of shards.
| `GTEST_OUTPUT` | `--gtest_output` | Test result output format and path.
| `GTEST_FAIL_FAST` | `--gtest_fail_fast` | Stop on first failure.
| `GTEST_CATCH_EXCEPTIONS` | `--gtest_catch_exceptions` | Enable exception catching.


---

## Using Configuration Flags in Practice

### Example: Running a Subset of Tests with Disabled Tests Included

```bash
./my_test_executable --gtest_filter=MySuite.* --gtest_also_run_disabled_tests
```
This runs all tests whose suite names begin with "MySuite" including those marked disabled.

### Example: Generate XML Output in a Directory

```bash
./my_test_executable --gtest_output=xml:./test-results/
```
All test results are written to XML files in the specified directory.

### Example: Repeat Tests Forever with Shuffle and Fail-Fast

```bash
./my_test_executable --gtest_repeat=-1 --gtest_shuffle --gtest_fail_fast
```
Repeatedly runs tests with randomized order until a failure is encountered.

---

## Common Pitfalls and Best Practices

- **Mixing Disable and Also Run Disabled**: Keep in mind `--gtest_also_run_disabled_tests` will run all tests including those you might prefer to keep disabled for a reason.
- **Filter Syntax**: Remember that filter uses `:` to separate patterns, `*` and `?` as wildcards, and a `-` to separate positive patterns from negative exclusions.
- **Sharding Validation**: Ensure that shard index and total shards environment variables are consistent and within expected ranges to avoid automatic run failures.
- **Output Path**: When specifying output directories, include trailing slash `/` to indicate directory instead of file.

---

## Troubleshooting Tips

- If tests are not running, check the `--gtest_filter` to ensure it matches intended tests.
- Use `--gtest_list_tests` to verify test discovery.
- For failures in initialization (e.g. no tests linked), consider `--gtest_fail_if_no_test_linked` and `--gtest_fail_if_no_test_selected`.
- Use `--gtest_break_on_failure` during debugging to catch failures at the source.
- If output is unreadable, experiment with `--gtest_color` and `--gtest_print_utf8`.

---

## Additional Resources and References

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) — For a practical introduction
- [Test Macros and Test Registration](../core-apis/test-macros) — For writing and organizing tests
- [Assertions and Predicate Macros](../core-apis/assertions) — For validation techniques
- [Parameterized Tests](../advanced-features/parameterized-tests) — For data-driven testing
- [Test Runner Entry and Initialization](../integration-entry/main-functionality) — For understanding test lifecycle and startup
- [Build Instructions with CMake](https://github.com/google/googletest/blob/main/googletest/README.md#build-with-cmake) — For building the framework

---

Stay up to date with relevant release notes and guides to ensure that your usage of GoogleTest remains current and effective, especially when upgrading versions or adopting new features.