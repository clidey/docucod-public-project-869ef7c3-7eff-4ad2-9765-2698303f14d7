---
title: "Mock Object Behaviors"
description: "Explore the APIs for managing how mocks respond to uninteresting calls—covering NiceMock, StrictMock, and NaggyMock strategies. Learn when and how to use different mock object wrappers to balance test robustness with signal-to-noise in verification."
---

# Mock Object Behaviors

Explore the APIs for managing how mocks respond to uninteresting calls—covering **NiceMock**, **StrictMock**, and **NaggyMock** strategies. Learn when and how to use different mock object wrappers to balance test robustness with signal-to-noise in verification.

---

## Overview

In GoogleMock, mock objects can exhibit different behaviors when methods are called that do not have explicit expectations (`EXPECT_CALL`) set on them. These are known as *uninteresting calls*. This page explains three key mock object behaviors that influence how uninteresting calls are handled:

- **NiceMock**: suppresses warnings on uninteresting calls.
- **NaggyMock**: emits warnings on uninteresting calls (the current default).
- **StrictMock**: treats uninteresting calls as test errors.

Using these wrappers helps you control test output noise and strengthen verification, making your tests easier to maintain and debug.

---

## The Problem of Uninteresting Calls

When a mock method is called but no expectation was set on it, GoogleMock considers it an uninteresting call. By default, such calls permit execution with the default action, but they generate warnings to alert the developer. While such warnings might help to catch forgotten expectations, they can clutter test output, especially when uninteresting calls are numerous but benign.

You need a way to choose how strictly your mocks behave related to these calls, balancing between *being informative* and *avoiding signal noise*.

---

## Mock Object Wrappers for Behavior Control

GoogleMock provides three template wrappers that modify the strictness of mock objects toward uninteresting calls. All three are template classes wrapping your mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockClass> nice_mock;
NaggyMock<MockClass> naggy_mock;
StrictMock<MockClass> strict_mock;
```

### NaggyMock (Default Behavior)

- Generates a **warning** message on uninteresting calls.
- Does not fail the test on such calls.
- This behavior is the default for mock objects unless otherwise specified.

#### Example

```cpp
NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, ExpectedMethod());
// Uninteresting calls to other methods will emit warnings but not fail.
```

### NiceMock

- **Suppresses warnings** for uninteresting calls.
- Allows uninteresting calls to proceed silently with their default actions.
- Recommended for most tests when uninteresting calls are expected and not errors.

#### Example

```cpp
NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, ExpectedMethod());
// Calls to other methods without expectations produce no warnings.
```

### StrictMock

- Treats **any uninteresting call as a test failure**.
- This helps enforce strict contract adherence in tests.
- Useful for ensuring no unexpected interactions occur.

#### Example

```cpp
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, ExpectedMethod());
// Any calls to other methods without expectations will fail the test.
```

---

## How These Wrappers Work Internally

Each wrapper is a subclass of your mock class with internal registration to GoogleMock machinery that alters the reaction to uninteresting calls for that mock instance.

- `NiceMock` registers the mock to **allow** uninteresting calls.
- `NaggyMock` registers the mock to **warn** on uninteresting calls.
- `StrictMock` registers the mock to **fail** uninteresting calls.

This behavior applies only to *uninteresting calls* (methods with no `EXPECT_CALL`). Importantly, it **does not affect unexpected calls** (calls to methods with `EXPECT_CALL` but arguments do not match).

---

## Creating NiceMock, NaggyMock, and StrictMock Objects

You simply wrap your mock type:

```cpp
// Suppose you have a mock class:
class MockFoo {
public:
  MOCK_METHOD(void, DoThis, (), (override));
  MOCK_METHOD(int, Calculate, (int x), (override));
};

// Creating different behavior wrappers:

NiceMock<MockFoo> nice_mock;    // uninteresting calls ignored silently
NaggyMock<MockFoo> naggy_mock;  // uninteresting calls warn; default
StrictMock<MockFoo> strict_mock; // uninteresting calls fail
```

If your mock constructor takes parameters, you can forward them to the wrapper:

```cpp
NiceMock<MockFoo> nice_mock(42, "example");
```

---

## Best Practices and Usage Guidance

### When to Use NiceMock

- Use when many uninteresting calls are expected and benign.
- Reduces test noise and makes test output cleaner.
- Recommended default when you want maintainable tests with minimal noise.

### When to Use NaggyMock

- Suitable during test development or debugging.
- Alerts you to potentially missing expectations.
- Currently the default behavior of mocks.

### When to Use StrictMock

- Use when you want to enforce strict call verification.
- Useful in critical path components where unexpected method calls are errors.
- Can lead to brittle tests if overused; prefers explicitness.

### Combining with ON_CALL and EXPECT_CALL

- Uninteresting calls still respect `ON_CALL` default actions.
- `EXPECT_CALL` determines expected calls; unexpected calls are errors regardless of mock wrapper.

### Cautions

- Wrappers affect methods only **directly defined** in the mock class with `MOCK_METHOD` macros.
- Wrappers do not affect methods inherited from base mock classes reliably.
- Nesting wrappers like `NiceMock<StrictMock<Mock>>` is unsupported and will lead to errors.
- Ensure mock destructors are virtual for correct behavior of wrappers.

---

## Troubleshooting Common Issues

### "Uninteresting Function Call" Warnings

- Occur when a method is called but no `EXPECT_CALL` was set.
- If these warnings are undesired but calls are harmless, use `NiceMock` to suppress.

### Unexpected Call Failures

- Occur if a method with expectations is called with arguments that don’t match any expectation.
- Not affected by Nice/Naggy/Strict wrappers; always treated as errors.

### Multiple Warnings or Messages for the Same Call

- GoogleMock reports each failure or warning relevant to expectations at the call site.
- Duplicate messages occur at different times and serve diagnostic purposes.

### Making Your Tests Less Brittle

- Avoid unnecessary use of `StrictMock` unless your test specifically needs strictness.
- Use catch-all `EXPECT_CALL(m, Method(_)).Times(AnyNumber())` to avoid unexpected call errors.

---

## Related API Reference Links

- [`ON_CALL`](../mocking-and-stubbing/setting-expectations.md#ON_CALL) — Default behavior for calls
- [`EXPECT_CALL`](../mocking-and-stubbing/setting-expectations.md#EXPECT_CALL) — Setting expected calls
- [`Mock::AllowLeak`](../mocking-and-stubbing/defining-mocks.md#MockVerifyClearLeak) — Controlling mock lifecycle verification

---

## Example: Using Different Mock Object Behaviors

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;
using ::testing::_;
using ::testing::Return;

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), (const));
  MOCK_METHOD(void, DoSomething, (int x));
};

TEST(MockBehaviorTest, DemonstrateBehaviors) {
  // NaggyMock: default, warns on uninteresting calls
  NaggyMock<MockFoo> naggy;
  ON_CALL(naggy, GetValue()).WillByDefault(Return(42));
  naggy.GetValue();  // Allowed; no warning, expectation met
  naggy.DoSomething(5);  // Warns: uninteresting call

  // NiceMock: suppresses warning on uninteresting calls
  NiceMock<MockFoo> nice;
  ON_CALL(nice, GetValue()).WillByDefault(Return(100));
  nice.GetValue();
  nice.DoSomething(10);  // No warning; uninteresting call ignored
  
  // StrictMock: fails on uninteresting calls
  StrictMock<MockFoo> strict;
  ON_CALL(strict, GetValue()).WillByDefault(Return(7));
  strict.GetValue();  // ok
  EXPECT_NONFATAL_FAILURE(strict.DoSomething(5),
                          "Uninteresting mock function call");
}
```

---

## Summary

Using `NiceMock`, `NaggyMock`, and `StrictMock`, you choose the strictness of mock objects regarding uninteresting calls. They assist in managing warning noise and test robustness, improving your testing experience.

---