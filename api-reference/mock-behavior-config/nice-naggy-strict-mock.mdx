---
title: "Mock Strictness Wrappers"
description: "API overview for NiceMock, NaggyMock, and StrictMock wrappers, used to alter how mocks react to unexpected or uninteresting calls. Learn to select the right wrapper to match your project's testing rigor and verbosity."
---

# Mock Strictness Wrappers

GoogleMock offers three powerful wrapper templates — `NiceMock`, `NaggyMock`, and `StrictMock` — that allow you to control the behavior of mock objects toward unexpected or uninteresting calls. These wrappers customize how GoogleMock reacts when mock methods are called without explicit `EXPECT_CALL` specifications, enabling you to tailor verbosity and rigor in your tests.

---

## Understanding Mock Strictness Levels

When testing with mocks, sometimes your test code calls mock methods without previously setting expectations (`EXPECT_CALL`). Such calls are called *uninteresting calls*. GoogleMock handles these differently depending on the mock wrapper you choose:

| Wrapper         | Behavior on Uninteresting Calls                                        | Typical Usage                                         |
|-----------------|------------------------------------------------------------------------|------------------------------------------------------|
| `NiceMock<T>`   | Silences warnings entirely, allowing all uninteresting calls silently. | Use for most tests where you want noise-free output. |
| `NaggyMock<T>`  | Prints warnings on uninteresting calls (default for raw mocks).        | Use when debugging or developing tests.               |
| `StrictMock<T>` | Treats uninteresting calls as test failures (errors).                  | Use when you want to enforce strict call contracts.   |


## Design and Usage

These wrappers inherit from your mock class `T` and modify its default *uninteresting call* behavior without requiring changes to your existing mock class implementation.

### Creating a Strictness-Wrapped Mock

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(int, DoThat, (int n));
};

// Nice mock: suppress warnings on uninteresting calls
NiceMock<MockFoo> nice_mock;

// Naggy mock: print warnings on uninteresting calls (default behavior)
NaggyMock<MockFoo> naggy_mock;

// Strict mock: turn uninteresting calls into errors
StrictMock<MockFoo> strict_mock;
```

Each wrapper type behaves exactly like `T` in all respects, but changes the handling of uninteresting calls.

### Constructor Forwarding

All wrappers "inherit" all constructors of the wrapped mock class, making it seamless to create wrapped mock objects with any constructor signature:

```cpp
// If MockFoo has a constructor MockFoo(int, const char*)
StrictMock<MockFoo> strict_mock(10, "hello");
```

This means you can switch between mock wrappers without rewriting construction code.

### Important Restrictions

- Wrappers only affect mock methods defined directly via `MOCK_METHOD` in the mock class `T`. If mock methods come from a base class of `T`, the wrapper may not modify their behavior.
- Wrappers cannot be nested, e.g., you cannot do `NiceMock<StrictMock<MockFoo>>`.
- The destructor of `T` should be declared `virtual` for wrappers to behave correctly.


## Practical Guidance

### When to Use Each Wrapper

- **`NiceMock`**: Ideal for stable tests where uninteresting calls are ubiquitous but harmless. Silence excess noise to keep test output clean.
- **`NaggyMock`**: Useful during test development or debugging to catch unexpected uninteresting calls without immediately failing tests.
- **`StrictMock`**: Best when you want to ensure your production code strictly adheres to its interaction contract; any unexpected calls cause failures.


### Code Example: Using StrictMock

```cpp
#include <gmock/gmock.h>
using ::testing::StrictMock;

class MockDatabase {
 public:
  MOCK_METHOD(bool, Connect, (const std::string& url), ());
  MOCK_METHOD(void, Disconnect, (), ());
};

TEST(DatabaseTest, Connection) {
  StrictMock<MockDatabase> db;
  EXPECT_CALL(db, Connect("db://localhost"));
  db.Connect("db://localhost");  // OK
  db.Disconnect();  // Fails: uninteresting call but strict mock treats as error
}
```


## Behind the Scenes

These wrapper templates work by registering themselves with GoogleMock's internal framework to override default behavior for uninteresting calls for their lifetime, then deregister upon destruction. They rely on opaque internal mechanisms but expose a simple and consistent API for users.

Internally:

- `NiceMock` allows calls silently.
- `NaggyMock` prints warnings.
- `StrictMock` treats unexpected calls as errors.

This design enables developers to choose per-mock-object behavior without modifying mock classes.


## Summary of API

| Class Template           | Behavior on Uninteresting Calls                     | Typical Use Case                                |
|-------------------------|----------------------------------------------------|------------------------------------------------|
| `NiceMock<MockClass>`   | Suppresses warnings (silent)                        | Default in future; use in most tests             |
| `NaggyMock<MockClass>`  | Emits warnings (current default behavior)          | Useful for debugging                             |
| `StrictMock<MockClass>` | Fails on uninteresting calls (errors out)          | Enforce strict checking                         |

### Key Points

- Use the wrapper as a type instead of the base mock.
- Constructors are forwarded for seamless integration.
- Currently, direct macro-defined mock methods only.
- Don't nest wrappers.


## Common Pitfalls and Troubleshooting

<Warning>
### Warning: Wrapper Not Affecting Base Class Methods

If your mock methods are declared in a base class, wrapper strictness modifiers may not change their behavior due to C++ limitations.

**Solution:** Define mock methods directly in the mock class you wrap.
</Warning>

<Warning>
### Warning: Destructor Not Virtual

If your mock class does not have a virtual destructor, wrappers might behave incorrectly.

**Solution:** Always declare destructors on mock classes as virtual.
</Warning>

<Note>
### Note on Nesting

Wrapping a mock within multiple wrappers, such as `NiceMock<StrictMock<MockFoo>>`, is **not supported** and will not behave as expected.

Instead, choose the most appropriate wrapper level.
</Note>


## Best Practices

- Default to using `NiceMock` for cleaner test output unless strictness is required.
- Use `NaggyMock` temporarily when troubleshooting unexpected calls.
- Apply `StrictMock` selectively when enforcing strict mock call discipline.
- Forward constructor arguments transparently.


## Additional Resources

- [GoogleMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [GoogleMock Mocking Reference](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [GoogleMock Cheat Sheet: Mock Strictness](https://google.github.io/googletest/gmock_cheat_sheet.html#MockStrictness)
- [gMock For Dummies: Using Mocks](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks)


---

## Mermaid Diagram: Mock Strictness Wrappers Overview

```mermaid
classDiagram
  class MockClass {
    <<interface>>
    + virtual methods()
  }

  class NiceMock~T~ {
    + Allows uninteresting calls silently
  }

  class NaggyMock~T~ {
    + Warns on uninteresting calls
  }

  class StrictMock~T~ {
    + Fails on uninteresting calls
  }

  NiceMock~T~ --|> MockClass : inherits
  NaggyMock~T~ --|> MockClass : inherits
  StrictMock~T~ --|> MockClass : inherits

  note left of NiceMock~T~
    Suppress warnings,
    quiet test output
  end note

  note right of NaggyMock~T~
    Print warnings
    but continue
  end note

  note right of StrictMock~T~
    Turn warnings
    into test failures
  end note

```


---

## Summary

This page documents GoogleMock's `NiceMock`, `NaggyMock`, and `StrictMock` template wrappers that adjust how mock objects react to uninteresting or unexpected calls. Users learn when and how to use each to balance test noise against strictness. It covers behavior differences, constructor forwarding, practical usage, common pitfalls, and best practices.

---

<AccordionGroup title="See Also">
<Accordion title="gMock Cookbook: The Nice, the Strict, and the Naggy">
https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy
</Accordion>
<Accordion title="Mocking Reference: NiceMock, NaggyMock, StrictMock">
https://google.github.io/googletest/reference/mocking.html#NiceMock
</Accordion>
<Accordion title="gMock Cheat Sheet: Mock Strictness">
https://google.github.io/googletest/gmock_cheat_sheet.html#MockStrictness
</Accordion>
<Accordion title="gMock for Dummies: Using Mocks">
https://google.github.io/googletest/gmock_for_dummies.html#using-mocks
</Accordion>
</AccordionGroup>
