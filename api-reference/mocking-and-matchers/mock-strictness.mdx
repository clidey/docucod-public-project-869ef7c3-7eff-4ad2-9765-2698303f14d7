---
title: "Strictness Modes for Mocks"
description: "Documents how to use NiceMock, NaggyMock, and StrictMock wrappers to customize the test output and strictness for uninteresting calls. Guides users in enforcing contract adherence or simplifying noisy test output."
---

# Strictness Modes for Mocks

GoogleMock offers three primary wrappers for mock objects that control how uninteresting calls are treated and how test output is managed: `NiceMock`, `NaggyMock`, and `StrictMock`. This page explains how to use these wrappers to customize your testing experience, enabling you to enforce contract adherence or simplify noisy test output.

---

## Overview

When you create mock objects using GoogleMock, each method call that doesn't match an existing expectation is considered an **uninteresting call**. By default, GoogleMock treats uninteresting calls as "naggy" — printing warnings to the test output but allowing the test to continue.

You can use `NiceMock`, `NaggyMock`, or `StrictMock` to modify this default behavior on a per-mock basis:

- **NiceMock**: Suppresses warnings for uninteresting calls, keeping the test output clean.
- **NaggyMock**: Prints warnings for every uninteresting call (the current default behavior).
- **StrictMock**: Treats all uninteresting calls as failures, enforcing strict adherence to expectations.

All three wrappers are template classes that you instantiate using your existing mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // suppress warnings on uninteresting calls.
NaggyMock<MockFoo> naggy_foo;    // print warnings (default).
StrictMock<MockFoo> strict_foo;  // fail on uninteresting calls.
```

These wrappers inherit from your mock class, so you can use them anywhere the original mock is accepted. They also inherit all constructors of the base mock class, so you can pass constructor arguments transparently.

---

## Using NiceMock

### Purpose

`NiceMock` is ideal when you want to ignore uninteresting calls quietly. This keeps your test logs clean by suppressing warnings, which can be especially helpful when your mock has methods that are called frequently but don't require explicit expectations.

### Behavior

- Calls to mock methods without expectations do not generate warnings.
- Expected calls behave normally.
- Unexpected calls that violate expectations are still reported.
- Throws exceptions or crashes if unexpected calls return types that cannot be default-constructed or mocked properly.

### Example

```cpp
using ::testing::NiceMock;

// Assume MockFoo has mock methods defined.
NiceMock<MockFoo> mock_foo;

EXPECT_CALL(mock_foo, DoThis());  // Expected call

mock_foo.DoThis();    // Allowed and verified
mock_foo.DoThat(1);   // No warning, uninteresting call ignored
```

### Use Cases

- Suppressing noisy warnings when you have many methods that can be called but aren't critical to verify.
- Simplifying tests where strict validation of every call is unnecessary.

---

## Using NaggyMock

### Purpose

`NaggyMock` is the current default behavior. It generates warnings whenever an uninteresting call is made, alerting you that a mock method was called without an explicit expectation.

### Behavior

- Prints warnings on uninteresting method calls.
- Expected calls are handled normally.
- Unexpected calls cause test failures.

### Example

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock_foo;

EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();   // Allowed
mock_foo.DoThat(1);  // Warning printed: uninteresting call
```

### Use Cases

- Early test development/detection of missing expectations.
- Debugging and test maintenance phases where awareness of all mock calls is useful.

---

## Using StrictMock

### Purpose

`StrictMock` enforces strict compliance with expectations by treating uninteresting calls as test failures. It is useful when you want your tests to accurately document the exact set of valid interactions with your mock.

### Behavior

- Any call to a mock method that does not have an `EXPECT_CALL` results in a test failure.
- Expected calls behave normally.
- This strictness helps catch unexpected or erroneous calls early.

### Example

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;

EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();   // Allowed
mock_foo.DoThat(1);  // Test failure: uninteresting call
```

### Use Cases

- Enforcing rigorous mock interaction contracts.
- Writing highly precise and conservative tests.
- Detecting unwanted or unexpected calls that indicate test or code errors.

---

## Important Notes and Best Practices

- These wrappers only affect **uninteresting calls**: calls to methods with no expectations. They do **not** affect unexpected calls—calls to methods with expectations but with non-matching arguments, which always cause failures.
- `NiceMock`, `NaggyMock`, and `StrictMock` only affect mock methods **defined directly** in the mock class using the `MOCK_METHOD` macro. Methods defined in base classes may not be affected.
- It is **not supported** to nest these wrappers. For example, `NiceMock<StrictMock<MockFoo>>` is not supported.
- If your mock's destructor is not virtual, these wrappers may not work correctly.
- Consider `NiceMock` as a good default choice to reduce noisy output.
- Use `StrictMock` only if you want to enforce strict adherence to call expectations.
- `NaggyMock` is useful while developing or debugging tests, to catch missing expectations.

---

## Examples with Constructors

These wrappers seamlessly support mock classes with constructors, including those with multiple or complex parameters.

```cpp
class MockBar {
 public:
  explicit MockBar(std::string name);
  MOCK_METHOD(void, DoStuff, (), ());
};

NiceMock<MockBar> nice_bar("example");
StrictMock<MockBar> strict_bar("example");

nice_bar.DoStuff();  // No warning if uninteresting
strict_bar.DoStuff();  // Error if uninteresting
```

---

## Controlling Leaked Mocks

If your mock objects are leaked intentionally and you want to suppress warnings about unverified expectations, use `Mock::AllowLeak()`:

```cpp
NiceMock<MockFoo>* leaked = new NiceMock<MockFoo>;
Mock::AllowLeak(leaked);
```

This tells GoogleMock to skip verification and avoid warnings about leaks.

---

## Summary Table

| Wrapper      | Uninteresting Calls Behavior     | Effect on Unexpected Calls            | Use Case                             |
|--------------|---------------------------------|-------------------------------------|-------------------------------------|
| NiceMock     | Suppresses warnings              | Test fails as usual                  | Clean logs, ignoring irrelevant calls |
| NaggyMock    | Prints warnings (default)        | Test fails as usual                  | Default debugging mode               |
| StrictMock   | Fails test on uninteresting call| Test fails as usual                  | Enforce strict mock usage           |

---

## Troubleshooting

### Common Pitfalls

- Expect no warnings but still see them? Check if you used `NiceMock` properly on the mock object.
- Mixing strictness wrappers in inheritance hierarchies can produce inconsistent behavior.
- Non-virtual destructors on mocks may lead to unexpected behavior with wrappers.

### Tips

- Use `--gmock_verbose=info` to log detailed mock call and expectation matches.
- Use generalized EXPECT_CALL with `.Times(AnyNumber())` to allow calls without warnings.

---

## References and Links

- [GoogleMock Mocking Reference](../reference/mocking.md#NiceMock)
- [gMock Cookbook: The Nice, the Strict, and the Naggy](../guides/mocking-techniques-integration/creating-and-using-mocks.md#NiceStrictNaggy)
- [Mocking Basics](../guides/mocking-techniques-integration/introduction-to-googlemock.md)

---

For further mastery and examples, see the [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md) and [gMock Cookbook](../docs/gmock_cook_book.md).