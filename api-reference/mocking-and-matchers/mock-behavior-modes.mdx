---
title: "Nice, Naggy, and Strict Mocks"
description: "Details the APIs available for controlling mock object behavior with respect to unexpected calls. Distinguishes between NiceMock, NaggyMock, and StrictMock, guiding users to write tests that enforce or relax interaction contracts."
---

# Nice, Naggy, and Strict Mocks

This page explains the different types of mock objects available in GoogleMock—*NiceMock*, *NaggyMock*, and *StrictMock*—and how they control the behavior of **uninteresting calls**. Understanding these modes helps you write tests that either relax or enforce interaction contracts with mock objects.

---

## Overview of Mock Behavior Modes

In gMock, a **mock object is _naggy_ by default**: it warns you when a method without an explicit expectation is called (called an _uninteresting call_). Sometimes this warning is useful; other times it may be noisy or too strict. GoogleMock provides three modes to control the behavior on these uninteresting calls:

| Mock Type       | Reaction to Uninteresting Calls                    | Description                                   |
|-----------------|---------------------------------------------------|-----------------------------------------------|
| NiceMock<T>     | Suppress warnings; uninteresting calls are ignored
| NaggyMock<T>    | Warn on uninteresting calls (default)             | Warns but does not fail the test               |
| StrictMock<T>   | Treat uninteresting calls as test failures        | Enforces no uninteresting calls                |

Each of these wraps your mock class `T` and alters its behavior accordingly.

---

## Detailed Behaviors

### 1. NiceMock

`NiceMock<T>` ignores **uninteresting calls** silently. It suppresses warnings, making the tests less noisy and easier to write when you don't care about every single method interaction.

- Usage is identical to the base mock class `T`, as `NiceMock<T>` inherits from `T`.
- Constructor arguments for `NiceMock<T>` are forwarded to `T`’s constructors, so you can use it transparently.
- Suppresses warnings only on methods **defined directly in `T`** with `MOCK_METHOD`; warnings may still appear for mock methods inherited from base classes.
- Requires the destructor of `T` to be virtual for proper behavior.

**Example:**

```cpp
using ::testing::NiceMock;

NiceMock<MockClass> my_mock("constructor_arg1", "arg2");
EXPECT_CALL(my_mock, DoSomething());  // Expectation still required for interesting calls.
... // code using my_mock
```

### 2. NaggyMock

`NaggyMock<T>` is the default mode: it emits a warning whenever a mock method without an explicit expectation is called.

- Like `NiceMock<T>`, it inherits all constructor signatures from `T`.
- You receive runtime warnings when uninteresting methods are called, which can help catch unintended calls that might otherwise go unnoticed.

**Example:**

```cpp
using ::testing::NaggyMock;

NaggyMock<MockClass> my_mock("some", "args");
EXPECT_CALL(my_mock, DoSomething());
... // code using my_mock
```

### 3. StrictMock

`StrictMock<T>` upgrades uninteresting calls from warnings to **test failures**.

- It ensures that your tests fail immediately if any unexpected method is called, making your interaction contracts strict and explicit.
- Like the other wrappers, `StrictMock<T>` can be constructed with `T`’s constructor arguments.
- Only affects methods defined directly in `T` with `MOCK_METHOD` macros.
- Requires `T` to have a virtual destructor.

**Example:**

```cpp
using ::testing::StrictMock;

StrictMock<MockClass> my_mock("some", "args");
EXPECT_CALL(my_mock, DoSomething());
... // code using my_mock
// Test will fail on any unexpected calls.
```

---

## Behavior Summary

| Aspect                         | NiceMock           | NaggyMock           | StrictMock          |
|--------------------------------|--------------------|---------------------|---------------------|
| Reaction to uninteresting calls | Ignore silently    | Warn                 | Fail the test         |
| Affects only mock methods defined in `T` | Yes               | Yes                 | Yes                 |
| Constructor forwarding          | Yes (all `T` ctors) | Yes (all `T` ctors) | Yes (all `T` ctors) |
| Requires virtual destructor on `T` | Yes               | Yes                 | Yes                 |

---

## When and How to Use

- Use `NiceMock` when you want to suppress noise from uninteresting calls, typically in stable test scenarios or fixtures where irrelevant calls are common.
- `NaggyMock` is the default and useful during test development or debugging to catch unexpected calls but without failing immediately.
- `StrictMock` is for enforcing strict interaction contracts. Use it only when you want your test to fail on any unexpected method call.

**Note:** Because `NaggyMock` is the legacy default, it’s recommended to prefer `NiceMock` in most cases to reduce noise and avoid brittle tests. Only opt for `StrictMock` when the strictness is justified.

---

## Important Caveats

1. **Inheritance Limitation**: If methods are mocked in a base class of `T`, the wrapping classes (`NiceMock`, `NaggyMock`, `StrictMock`) may not affect their behavior correctly. As such, any mock methods declared **directly** in `T` will be affected but inherited ones might not.

2. **Destructor Requirement**: The destructor of `T` must be `virtual` for the wrappers to operate correctly. Failing this can lead to undefined behavior.

3. **No Nesting**: Nesting wrappers like `NiceMock<StrictMock<T>>` or `StrictMock<NiceMock<T>>` is unsupported and may cause warnings or undefined behavior.

---

## Understanding Uninteresting Calls

- An **uninteresting call** is a call to a mock method for which **no `EXPECT_CALL`** expectation was set.
- By default (NaggyMock), gMock **warns** on such calls but lets the test proceed.
- `NiceMock` suppresses these warnings, treating such calls as expected but unverified.
- `StrictMock` treats such calls as errors, immediately failing the test.

For these reasons, when you want to ignore certain calls completely without adding expectations, `NiceMock` is the simplest way.

---

## Best Practices

- **Prefer NiceMock:** Most tests benefit from `NiceMock` to avoid brittle failures and excessive warnings.
- **Add Specific Expectations:** For interesting interactions, always use `EXPECT_CALL` to explicitly verify expected calls.
- **Use StrictMock Sparingly:** Only make mocks strict when you want to ensure absolutely no unexpected calls occur.
- **Be Explicit About Overloads and Signatures:** If `T` has overloaded methods, ensure you specify correct overloads to avoid surprises.

---

## Example Illustrations

### Suppressing Warnings with NiceMock

```cpp
using ::testing::NiceMock;

class MockDatabase {
 public:
  MOCK_METHOD(void, Connect, (), ());
  MOCK_METHOD(int, Query, (const std::string&), ());
};

TEST(DatabaseTest, ConnectsAndQueries) {
  NiceMock<MockDatabase> db;

  ON_CALL(db, Query).WillByDefault(Return(42));
  EXPECT_CALL(db, Connect());

  // You don't need to expect Query explicitly; no warning will be printed if
  // called unexpectedly due to NiceMock.

  db.Connect();  // Expected
  int result = db.Query("SELECT *");  // Allowed, no warning.
  ASSERT_EQ(result, 42);
}
```

### Enforcing No Unexpected Calls with StrictMock

```cpp
using ::testing::StrictMock;

StrictMock<MockDatabase> db_mock;

EXPECT_CALL(db_mock, Connect());

// Will fail the test if any other methods are called unexpectedly.
```

### Default NaggyMock Behavior (warning on unexpected calls)

```cpp
MockDatabase db_mock;
EXPECT_CALL(db_mock, Connect());

// If Query() is called unexpectedly, gMock prints a warning but test continues.
```

---

## Troubleshooting

- **Why do I still get warnings from NiceMock?**
  - Check if the mock methods are declared in a base class instead of `T` directly. `NiceMock` only suppresses warnings for methods declared directly in `T`.
- **Unexpected test failures with StrictMock?**
  - You might have missing `EXPECT_CALL`s for some mock methods. Add `EXPECT_CALL(...).Times(AnyNumber())` for calls you want to allow without verification.
- **Destructor-related crashes?**
  - Ensure your mock classes have a `virtual` destructor.

---

## Related Topics

- [`EXPECT_CALL`](reference/mocking.md#EXPECT_CALL) for setting explicit expectations.
- [`ON_CALL`](reference/mocking.md#ON_CALL) for setting default behavior.
- [Mock Object APIs](api-reference/mocking-and-matchers/mock-object-apis.md) for defining mocks with `MOCK_METHOD`.
- [Understanding Uninteresting vs Unexpected Calls](gmock_cook_book.md#uninteresting-vs-unexpected) for more context on call categories.
- [GoogleMock for Dummies](docs/gmock_for_dummies.md) — friendly introduction.
- [Advanced Mock Behaviors and Actions](guides/mocking_and_advanced_patterns/advanced_mock_behaviors.mdx) for sequencing and call ordering.

---

For deeper understanding, see:
- [Mocking Reference](reference/mocking.md)
- [gMock Cheatsheet](docs/gmock_cheat_sheet.md)
- [gMock Cookbook](docs/gmock_cook_book.md)

---

## Summary
This page clarifies how to control warnings and errors on uninteresting mock method calls by using the 
`NiceMock`, `NaggyMock`, and `StrictMock` wrappers. Users learn how each mock mode affects the test behavior and the importance of selecting the right strictness level to balance test reliability and noise. The differences help teams write more maintainable and focused tests.
