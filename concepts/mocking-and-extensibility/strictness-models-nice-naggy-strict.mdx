---
title: "Strictness Models: Nice, Naggy, and Strict Mocks"
description: "Learn about the NiceMock, NaggyMock, and StrictMock wrappers and how they control reporting of uninteresting calls, supporting different development and debugging workflows with varying degrees of strictness."
---

# Strictness Models: Nice, Naggy, and Strict Mocks

GoogleMock provides three key wrappers — NiceMock, NaggyMock, and StrictMock — that control how uninteresting calls on mock objects are reported during testing. By applying these wrappers to your mock objects, you customize test verbosity and strictness, supporting different development and debugging workflows tailored to your needs.

---

## Understanding Uninteresting Calls

An *uninteresting call* is a call to a mock method for which no `EXPECT_CALL` expectation is set. In other words, the test does not specify any expected interaction with that method. GoogleMock treats uninteresting calls differently depending on which strictness model you choose.

Uninteresting calls are distinct from *unexpected calls*, which are calls to mock methods that have expectations defined, but where the actual call does not satisfy any of those expectations (e.g., unexpected arguments or too many calls).

- **Uninteresting calls** have no expectations set.
- **Unexpected calls** have expectations but do not match them.

Uninteresting calls are allowed by default but generate warnings, whereas unexpected calls always result in test failures.

---

## Strictness Wrappers Overview

GoogleMock offers three wrappers that change the handling and reporting of uninteresting calls:

| Wrapper     | Behavior on Uninteresting Calls                            | Typical Use Case                           |
|-------------|------------------------------------------------------------|-------------------------------------------|
| **NiceMock**  | Suppresses warnings, silently allows uninteresting calls. | Most tests — reduces noise and false alarms. |
| **NaggyMock** | Prints warnings for uninteresting calls (default behavior). | Default in GoogleMock; useful during development and debug. |
| **StrictMock**| Treats all uninteresting calls as test errors (failures). | Strict verification; use when you want to catch any unexpected interactions explicitly. |

These wrappers are template classes that inherit from your mock class. For example, using `NiceMock<MockFoo>` creates a subclass of `MockFoo` that is “nice.”

---

## Why Use These Wrappers?

Choosing the right strictness level affects your test's reliability, maintainability, and the clarity of test failures:

- **NiceMock**: Helps keep tests clean by ignoring irrelevant calls. This is especially useful for large mocks where you do not care about all interactions. It keeps test output focused on important failures.

- **NaggyMock**: The current default, it provides helpful warnings for calls you don’t explicitly expect, nudging you to verify calls you might have missed. Useful during active development or troubleshooting.

- **StrictMock**: The most stringent choice. It disallows any calls without explicit expectations. This helps catch unintended or unexpected interactions early but can lead to brittle tests.

**Best Practice:** Prefer `NiceMock` for general use to minimize maintenance overhead. Use `NaggyMock` if you want to detect untracked interactions without breaking tests, and reserve `StrictMock` for when you want rigorous enforcement.

---

## Usage Examples

Given a mock class `MockFoo`:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Default (Naggy) mock
MockFoo default_mock;

// Nice mock suppressing uninteresting warnings
NiceMock<MockFoo> nice_mock;

// Strict mock treating uninteresting calls as failures
StrictMock<MockFoo> strict_mock;
```

You can also construct wrappers with constructor arguments matching your mock class:

```cpp
NiceMock<MockBar> nice_bar("example-string");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 4, 5, "e", "f", true, false);
```

---

## Behavior Details and Examples

### 1. NiceMock

- **Effect:** Silences warnings on uninteresting calls.
- **Result:** Your test runs quietly even if a mocked method without an `EXPECT_CALL` is called.

Example:

```cpp
NiceMock<MockFoo> foo;
foo.DoThis();  // No warning printed
```

If an unexpected call occurs (a call that doesn't match any `EXPECT_CALL`), it still leads to a test failure.

### 2. NaggyMock

- **Effect:** Prints a warning message on uninteresting calls.
- **Default:** Raw mocks behave like `NaggyMock` by default.

Example:

```cpp
NaggyMock<MockFoo> foo;
foo.DoThis();  // Warning about uninteresting call printed
```

### 3. StrictMock

- **Effect:** Fails the test on uninteresting calls.
- **Use case:** Catch any call that you have not explicitly expected.

Example:

```cpp
StrictMock<MockFoo> foo;
foo.DoThis();  // Test fails: uninteresting call
```

If an uninteresting call deletes the mock object (e.g., via a mock method), strict mocks also generate failures, ensuring robust strictness.

---

## Practical Guidelines

1. **Choose default wrappers thoughtfully:**
   - Use `NiceMock` for tests where you want to focus only on verified interactions.
   - Use `NaggyMock` during test development when you want warnings to surface.
   - Use `StrictMock` if you want a strict contract that forbids any unexpected calls.

2. **Mixing strictness wrappers is unsupported:**
   - Do not nest different wrappers such as `NiceMock<StrictMock<MockFoo>>`.

3. **Limitations:**
   - These wrappers work only with mock methods defined directly on the mock class using the `MOCK_METHOD` macro.
   - Wrappers may not behave correctly if the mock class destructor is not virtual.

4. **Constructor forwarding:**
   - Wrappers automatically inherit constructors from the wrapped mock class, so you can initialize them with the same arguments.

5. **Debugging:**
   - If you receive warnings or errors about uninteresting calls, consider if you need to set explicit expectations or switch to a more permissive wrapper.

---

## Summary Table of Behaviors

| Uninteresting Call       | Raw Mock / NaggyMock | NiceMock           | StrictMock         |
|-------------------------|----------------------|--------------------|--------------------|
| Warning Printed         | Yes                  | No                 | No                 |
| Test Failed             | No                   | No                 | Yes                |

| Unexpected Call (never expected) | Test Failed          | Test Failed        | Test Failed        |

| Expected Call           | Pass                 | Pass               | Pass               |

---

## When to Use Each?

| Scenario                                              | Recommended Wrapper                         |
|-------------------------------------------------------|---------------------------------------------|
| Early test development, want to see unexpected calls  | NaggyMock (default)                          |
| Mature tests, ignoring uninteresting calls            | NiceMock                                     |
| Strict enforcement of call expectations                | StrictMock                                   |

---

## Troubleshooting

### Issue: Unexpected warnings about uninteresting calls

- **Cause:** Your test calls a mock method without any `EXPECT_CALL`.
- **Fix:** Either explicitly set expectations for those calls or switch to `NiceMock` to suppress warnings.

### Issue: StrictMock fails unexpectedly

- **Cause:** Calls to methods not explicitly expected.
- **Fix:** Add expectations for those calls or switch to `NiceMock` / `NaggyMock` to relax the strictness.

### Issue: Wrappers not affecting base class mock methods

- **Cause:** Some mock methods inherited from a base class may not respect the wrapper strictness.
- **Fix:** Define mock methods directly in the class you are wrapping.

### Issue: Destructor warnings or errors

- **Cause:** Mock class lacks a virtual destructor.
- **Fix:** Ensure mock classes have virtual destructors to avoid undefined behavior and ensure wrappers work correctly.

---

## Summary

The strictness models in GoogleMock let you control how uninteresting calls on mock objects are treated:

- **NiceMock** suppresses warnings, keeping tests quiet and focused.
- **NaggyMock** warns on uninteresting calls (default behavior).
- **StrictMock** fails on uninteresting calls, enforcing strict expectations.

Choose your wrapper wisely based on your test's goal and stage to balance strictness, clarity, and maintenance overhead.

---

## Additional Resources

- [gMock Cookbook – The Nice, the Strict, and the Naggy section](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Fundamentals](https://google.github.io/googletest/concepts/mocking-and-extensibility/mocking-fundamentals.html)
- [Expectations, Actions, and Matchers](https://google.github.io/googletest/concepts/mocking-and-extensibility/expectations-actions-matchers.html)
- [Creating and Configuring Mocks](https://google.github.io/googletest/api/reference/mocking-apis/creating-mocks.html)

---

# Appendix: Sample Code Snippet

```cpp
#include <gmock/gmock.h>

using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

void RunTests() {
  // Default naggy mock
  NaggyMock<MockFoo> naggy;
  naggy.DoThis();  // Prints warning

  // Nice mock
  NiceMock<MockFoo> nice;
  nice.DoThis();   // No warning

  // Strict mock
  StrictMock<MockFoo> strict;
  strict.DoThis(); // Test failure
}
```
