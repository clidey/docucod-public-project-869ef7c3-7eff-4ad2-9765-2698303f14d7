---
title: "Strictness Modes and Testing Styles"
description: "Learn about different strictness modes (NiceMock, NaggyMock, StrictMock) in GoogleMock and how they control the handling of uninteresting calls, balancing developer productivity and test rigor."
---

# Strictness Modes and Testing Styles

Understanding the balance between developer productivity and rigorous test verification is critical to effective unit testing with GoogleMock (gMock). This page introduces the different strictness modes provided by gMock—namely, **NiceMock**, **NaggyMock**, and **StrictMock**—and explains how they control the handling of *uninteresting calls* (calls to mock methods without explicit expectations).

---

## Overview of Strictness Modes

When writing tests with mock objects, you often encounter calls to mock methods that your test hasn't explicitly told gMock to expect. These are known as *uninteresting calls.* Different testing scenarios require different handling of these calls. GoogleMock provides three principal **strictness modes** to customize this behavior:

| Mode         | Behavior on Uninteresting Calls                           | Use Case Summary                                    |
|--------------|-----------------------------------------------------------|----------------------------------------------------|
| **NiceMock** | Suppresses warnings for uninteresting calls; allows them silently. | Use when you want to focus only on important calls and ignore others safely. |
| **NaggyMock** (default) | Prints warnings on uninteresting calls but allows them.            | Use while developing or debugging tests when you want to be notified of unexpected but allowed calls. |
| **StrictMock** | Treats uninteresting calls as test failures (errors).               | Use when you want complete test rigor and catch any unexpected calls immediately. |

### What are Uninteresting Calls?
An *uninteresting call* occurs when a mock method without any set expectations (via `EXPECT_CALL`) is invoked during test execution. By default, these calls cause gMock to perform the method's default behavior but emit a warning, as they may indicate missing or incomplete expectations in your test.

### Why Different Strictness Modes?
Tests that are too permissive risk missing bugs because unexpected calls are ignored. Conversely, tests that are too strict can become brittle and require frequent maintenance. The strictness modes enable you to choose the right trade-off for your context:

- **Efficiency and noise reduction:** Nice mocks reduce log noise by ignoring irrelevant calls.
- **Visibility during development:** Naggy mocks warn about any uninteresting calls.
- **Enforcing strict correctness:** Strict mocks convert warnings to failures, ensuring no calls go unnoticed.

---

## Using NiceMock, NaggyMock, and StrictMock

GoogleMock provides convenient wrapper template classes to switch strictness modes on any mock class:

- `NiceMock<MockClass>`
- `NaggyMock<MockClass>`
- `StrictMock<MockClass>`

Each acts as a subclass of `MockClass` but alters the behavior regarding uninteresting calls.

### How to Use

Here is how to create a strictness-wrapped mock:

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
};

// Nice mock suppresses uninteresting call warnings
NiceMock<MockFoo> nice_foo;

// Naggy mock prints warnings on uninteresting calls (default behavior)
NaggyMock<MockFoo> naggy_foo;

// Strict mock treats uninteresting calls as test failures
StrictMock<MockFoo> strict_foo;
```

You can construct these wrappers with any constructor parameters supported by the underlying mock class, for example:

```cpp
NiceMock<MockFoo> nice_foo_with_args(arg1, arg2);
```

### Behavior Examples

- **NiceMock:** Calling a method without an expectation produces no warning or failure.
- **NaggyMock:** Calling a method without an expectation produces a warning but test continues.
- **StrictMock:** Calling a method without an expectation produces a test failure.

### Important Notes

- Currently, **mock objects are Naggy by default**, meaning they warn about uninteresting calls. This is expected to change to **Nice** in the future for more maintainable tests.
- Wrapping a mock class inside multiple strictness wrappers (e.g., `NiceMock<StrictMock<Mock>>`) is **not supported** and will cause a compilation error.
- Strictness modifiers only affect mock methods defined with `MOCK_METHOD` macros **directly** in the mock class.
- Strictness wrappers rely on the mock class having **a virtual destructor** for proper behavior.

---

## When to Use Each Strictness Mode

### NiceMock

Use `NiceMock` when:

- You do not care about uninteresting calls and want to suppress all warnings.
- Your focus is on major interactions only, and you want to avoid noise.
- You want to write tests that are resilient to unrelated changes.

**Best practice:**

Use `NiceMock` as the standard mode for most testing scenarios to reduce brittleness of tests and maintenance overhead.

### NaggyMock (Default)

Use `NaggyMock` when:

- You are developing a new test and want visibility into all uninteresting calls.
- You want to identify missing expectations quickly.

**Best practice:**

Use temporarily when debugging or creating tests; then migrate to `NiceMock` once stable.

### StrictMock

Use `StrictMock` when:

- You want to enforce strict adherence to the expected behavior with zero tolerance for uninteresting calls.
- Your test's correctness depends critically on no unexpected interactions.
- You want to capture hidden or implicit test assumptions early.

**Caution:**

Strict mocks increase brittleness; only use when the cost of missing unwanted calls is very high.

---

## User Flow: Switching Strictness Mode

1. **Start with NaggyMock (default):** Write expectations using `EXPECT_CALL`.
2. **Observe warnings:** If you see many warnings about uninteresting calls, decide if they are noise.
3. **Suppress warnings when safe:** Wrap mocks in `NiceMock` to silence harmless messages.
4. **Enforce strict verification:** Wrap mocks in `StrictMock` if you want tests to fail on any unexpected calls.

```cpp
// Initial test with naggy mock:
NaggyMock<MockFoo> foo;
EXPECT_CALL(foo, DoSomething());

// After stabilization, suppress warnings:
NiceMock<MockFoo> foo;
EXPECT_CALL(foo, DoSomething());

// To enforce strict checking:
StrictMock<MockFoo> foo;
EXPECT_CALL(foo, DoSomething());
```

---

## Key Implementation Notes

- `NiceMock`, `NaggyMock`, and `StrictMock` are template subclasses of the mock class that alter global mocks registry behavior regarding uninteresting call handlers.
- They "inherit" (actually re-expose) all constructors from the base mock class.
- The strictness wrappers use internal gMock infrastructure to register their level of strictness on construction and unregister on destruction.

---

## Practical Tips and Best Practices

- Avoid wrapping a mock in multiple strictness wrappers.
- Prefer `NiceMock` for general usage to reduce test log noise.
- Use `NaggyMock` mainly for development/debugging phases.
- Use `StrictMock` sparingly for critical verification.
- Expectation order and specificity affect matching, regardless of strictness mode.

### Handling Uninteresting Calls Explicitly

If you want to allow certain uninteresting calls without wrapping the whole mock, you can specify a catch-all expectation:

```cpp
EXPECT_CALL(mock_obj, SomeMethod(_)).Times(::testing::AnyNumber());
```
This approach combined with default `NaggyMock` behavior allows selective silencing.

### Diagnosing StrictMock Failures

When `StrictMock` causes failures, gMock's verbose mode (`--gmock_verbose=info`) will provide detailed diagnostics including call traces and matching attempts to help pinpoint unexpected interactions.

---

## Troubleshooting

### Uninteresting Call Warning Despite `ON_CALL`

If you get warnings for calls covered by `ON_CALL` but without `EXPECT_CALL`, consider:

- Switch to `NiceMock` to suppress warnings.
- Add explicit `EXPECT_CALL` with `Times(AnyNumber())` to acknowledge the expectation.

### Issues with Inheritance

If strictness wrappers do not seem to affect base class mock methods, verify those methods are defined with `MOCK_METHOD` directly in the mock class and that the mock class has a virtual destructor.

### Compilation Errors Wrapping Strictness Twice

Avoid nesting strictness wrappers. If you must, create a mock subclass without strictness and wrap it only once.

---

## Additional Resources

- [gMock for Dummies — Introduction to mocks](https://google.github.io/googletest/gmock_for_dummies.html)
- [Mock Object Configuration & Strictness](https://google.github.io/googletest/reference/mocking/#Mock-Object-Configuration-and-Strictness)
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: EXPECT_CALL and ON_CALL](https://google.github.io/googletest/reference/mocking/#EXPECT_CALL-and-ON_CALL)

---

<AccordionGroup title="Strictness Modes Details and Examples">
<Accordion title="NiceMock">
NiceMock suppresses warnings for uninteresting calls, meaning that when your test code calls mock methods with no explicit expectation, you will neither see warnings nor errors. It simplifies test maintenance by silencing unimportant calls. NiceMock can be constructed just like the original mock class with any constructor arguments.

**Example:**
```cpp
NiceMock<MockFoo> mock;
mock.Foo();  // No warning even though no EXPECT_CALL
```
Use this mode to keep your tests focused without distracting messages.
</Accordion>
<Accordion title="NaggyMock (Default)">
NaggyMock behaves the same as a raw mock but prints warnings on every uninteresting call, helping you discover missing or forgotten expectations during test development.

**Example:**
```cpp
NaggyMock<MockFoo> mock;
mock.Foo();  // Warning: Uninteresting mock function call
```
Most users start here and may move to NiceMock for quieter tests.
</Accordion>
<Accordion title="StrictMock">
StrictMock makes any uninteresting call an error, causing your test to fail if a method without expectation is invoked. This ensures complete control and catches silent problems early but can make tests fragile.

**Example:**
```cpp
StrictMock<MockFoo> mock;
mock.Foo();  // Test failure: unexpected call
```
Use StrictMock for tests where no unexpected interaction is acceptable.
</Accordion>
</AccordionGroup>

---

## Summary
This documentation covered how to use GoogleMock's strictness modes—NiceMock, NaggyMock, and StrictMock—to control the treatment of uninteresting calls during testing. Understanding and choosing the right mode improves test clarity, maintenance, and reliability. You learned usage patterns, user workflows, best practices, and how to troubleshoot common issues related to strictness.

---

## Mermaid Diagram: Strictness Modes Handling of Uninteresting Calls

```mermaid
flowchart TD
  Call["Call to Mock Method"] --> HasExpectation{Has EXPECT_CALL?}
  HasExpectation -- No --> StrictnessMode

  subgraph StrictnessMode["Strictness Mode"]
    direction TB
    Nice[NiceMock]
    Naggy[NaggyMock]
    Strict[StrictMock]
  end

  HasExpectation -- Yes --> ExpectedCall["Matches an EXPECT_CALL"]
  ExpectedCall --> ExecuteExpected["Execute Expected Behavior"]
  StrictnessMode -->|Nice| Ignore[N"Ignore silently: executes default action"]
  StrictnessMode -->|Naggy| WarnW["Print Warning; executes default action"]
  StrictnessMode -->|Strict| FailF["Fail the test with error"]

  Call --> HasExpectation
  Nice --> Ignore
  Naggy --> WarnW
  Strict --> FailF

  %% Style
  classDef decision fill:#f9f,stroke:#333,stroke-width:2px;
  class HasExpectation decision;
```
