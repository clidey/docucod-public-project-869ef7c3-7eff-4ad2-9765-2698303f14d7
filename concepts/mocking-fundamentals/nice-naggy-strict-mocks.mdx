---
title: "Nice, Naggy, and Strict Mocks"
description: "Understand the mechanisms for handling unexpected or uninteresting mock calls: NiceMock, NaggyMock, and StrictMock. Learn when and how to apply these wrappers to control strictness and reduce test noise."
---

# Nice, Naggy, and Strict Mocks

GoogleMock provides three distinct mock wrappers to control the behavior of uninteresting mock method calls — calls to mock functions that have no explicit expectations (i.e., no `EXPECT_CALL` set). This feature is crucial to manage test output noise and enforce stricter test correctness where needed.

## Introduction

When using mock objects, you may encounter calls to mock methods for which no expectations have been defined. Such calls are termed **uninteresting calls**. Depending on your testing philosophy and scenario, you might want to:

- **Ignore** these calls silently.
- **Log warnings** to alert about unexpected but perhaps harmless calls.
- **Treat them as errors** and fail the test immediately.

GoogleMock facilitates these behaviors via three wrappers:

| Wrapper               | Behavior on Uninteresting Calls                   | Recommended Usage                                      |
|-----------------------|---------------------------------------------------|-------------------------------------------------------|
| `NiceMock<T>`         | Suppresses warnings and silently ignores calls.  | Use when uninteresting calls are expected or acceptable. |
| `NaggyMock<T>` (default) | Logs warnings on uninteresting calls.           | Use during development or debugging to notice unexpected calls. |
| `StrictMock<T>`       | Treats uninteresting calls as failures.           | Use to enforce strict verification and catch every unexpected call. |

## Core Concepts

### What Are Uninteresting Calls?
An uninteresting call occurs when a mock method is invoked, but:

- There is **no** matching `EXPECT_CALL` expectation for the call.
- The mock has a default behavior defined by `ON_CALL` or implicit defaults.

By default, GoogleMock treats mocks as **naggy**, meaning it reports warnings on these calls but allows them to proceed.

<Info>
Naggy behavior helps catch potential oversights but can clutter test output if many such calls are harmless.
</Info>

### How `NiceMock`, `NaggyMock`, and `StrictMock` Change Behavior

All three wrappers subclass your original mock class, modifying how uninteresting calls are handled:

- `NiceMock<T>` disables warnings, treating uninteresting calls as silent and acceptable.
- `NaggyMock<T>` (the default mock behavior) emits warnings on uninteresting calls but allows them.
- `StrictMock<T>` treats uninteresting calls as **test failures**, immediately surfacing errors.

## Usage

### Declaring Nice, Naggy, and Strict Mocks

Given a mock class, for example:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, ());
  MOCK_METHOD(int, GetValue, (int x), (const));
};
```

You can wrap it as:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;      // Uninteresting calls ignored silently.
NaggyMock<MockFoo> naggy_foo;    // Warnings shown on uninteresting calls.
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls.
```

Each wrapper inherits all constructors from the base mock class, so if `MockFoo` has non-default constructors, you can construct wrapped mocks correspondingly:

```cpp
NiceMock<MockFoo> nice_foo(arg1, arg2);
```

### Example Scenario

```cpp
class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string&), (override));
};

// Default mock is naggy.
NaggyMock<MockPrinter> printer;

// Setting an expectation on Print.
EXPECT_CALL(printer, Print("Hello"));

printer.Print("Hello");  // Allowed, matches expectation.
printer.Print("World");  // Warning but allowed (uninteresting call).

// Using strict mock
StrictMock<MockPrinter> strict_printer;
EXPECT_CALL(strict_printer, Print("Hello"));

strict_printer.Print("Hello");  // Allowed.
strict_printer.Print("World");  // Test fails: uninteresting call as error.
```

## Important Considerations

### Default Strictness is Naggy

Currently, plain mocks like `MockFoo` behave like `NaggyMock<MockFoo>`, printing warnings on uninteresting calls. However, this default may change to `NiceMock` in the future to promote cleaner test output.

### Limitations

- These wrappers affect only mock methods defined directly in the mocked class with the `MOCK_METHOD` macros. Methods inherited from base classes may not respect the wrapper's behavior.
- Nesting wrappers is **not supported** (e.g., `NiceMock<StrictMock<MockFoo>>` is invalid).

### Virtual Destructor Requirement

To ensure correct destruction and behavior, the mock class should have a **virtual destructor**.

### When to Use Which Mock

| Use Case                                 | Recommended Wrapper     |
|------------------------------------------|------------------------|
| You want to ignore non-expected calls quietly and focus on expected ones | `NiceMock<T>`           |
| You want diagnostic warnings to catch unplanned calls without failing the test | `NaggyMock<T>` (default) |
| You want to enforce that no unexpected calls happen, making your test strict | `StrictMock<T>`         |

## Implementation Facts (For Curiosity)

Each wrapper derives from your mock class and registers with GoogleMock's internal mock framework to alter uninteresting call behavior using global call reaction registrations:

- `NiceMock` registers to allow uninteresting calls silently.
- `NaggyMock` registers to warn on uninteresting calls.
- `StrictMock` registers to fail uninteresting calls.

The wrappers also inherit constructors from the base mock class for seamless instantiation.

## Practical Tips

- **Suppressing warnings temporarily**: If your test involves many harmless uninteresting calls, use `NiceMock` to suppress noise.
- **Debugging unexpected interactions**: Use `NaggyMock` or default mocks to get warnings and information.
- **Enforcing strict interaction protocols**: Use `StrictMock` for critical components where unexpected behavior must fail the test.
- **Do not add `EXPECT_CALL` just to suppress warnings**: Suppressing warnings via empty expectations defeats test clarity.

## Troubleshooting Common Issues

<AccordionGroup title="Common Problems and Solutions">
<Accordion title="Uninteresting call warnings still showing with NiceMock">
Make sure your mock methods are defined with `MOCK_METHOD` directly in the mocked class. Inherited mock methods might not honor the wrapper.
</Accordion>
<Accordion title="Nesting NiceMock and StrictMock causes compilation error">
Nesting wrappers is not supported by design. Instead, choose the wrapper that fits your testing scenario.
</Accordion>
<Accordion title="Destructor warnings or leaks with wrapped mocks">
Ensure the mocked class has a virtual destructor. Non-virtual destructors can cause undefined behavior and leaks.
</Accordion>
</AccordionGroup>

## Summary

Using `NiceMock`, `NaggyMock`, and `StrictMock` helps control the strictness of your mock objects' reactions to uninteresting calls. They play a vital role in balancing test verbosity against reliability and correctness.

---

# Additional Resources

- [Mocking Reference](../api-reference/matchers-mocking/defining-mocks-expectations.md) — for detailed mock method and expectation syntax
- [gMock Cheat Sheet](../docs/gmock_cheat_sheet.md) — for quick examples including NiceMock, NaggyMock, and StrictMock
- [gMock Cookbook, Nice, Strict, and Naggy section](../docs/gmock_cook_book.md#NiceStrictNaggy) — practical recipes and best practices
- [Mock Objects Concepts](concepts/mocking-fundamentals/mock-objects.md) — for foundational understanding of mock behaviors

---

# See Also

- [`ON_CALL` and `EXPECT_CALL` Documentation](../api-reference/matchers-mocking/defining-mocks-expectations.md#ON_CALL)
- [Understanding Uninteresting vs Unexpected Calls](../docs/gmock_cook_book.md#uninteresting-vs-unexpected)
- [Setting Default Actions on Mocks](../docs/gmock_cheat_sheet.md#OnCall)

---

# Summary Diagram

```mermaid
flowchart TD
  A[Mock Object Created]
  B{Are calls to mock methods
with no Expectation?}
  C[NaggyMock: Print warning]
  D[NiceMock: Ignore silently]
  E[StrictMock: Fail test]

  A --> B
  B -- Yes -->|Nice| D
  B -- Yes -->|Naggy| C
  B -- Yes -->|Strict| E
  B -- No --> F[Call expectations or Default actions]
```

---

## Conclusion
Wrapping your mocks with `NiceMock`, `NaggyMock`, or `StrictMock` empowers you to finely tune your test strictness, improving clarity and maintainability while avoiding noisy or brittle tests.

---
