---
title: "Parameterized and Typed Testing"
description: "Understand value- and type-parameterized tests, enabling test code reuse across different values and types. Discover how parameter generators and instantiation work to enhance test coverage with minimal duplication."
---

# Parameterized and Typed Testing

GoogleTest empowers you to write flexible and reusable tests by supporting two powerful mechanisms: **value-parameterized tests** and **typed tests**. These allow you to efficiently expand your test coverage across multiple values or types with minimal code duplication. This guide introduces the core concepts behind these mechanisms, explains how to use parameter generators and instantiation macros, and offers practical examples to enhance your testing workflow.

---

## Why Use Parameterized and Typed Testing?

Imagine you need to verify the same behavior in your code across a wide range of input values or different types. Writing separate tests for each is not only tedious but also error-prone. GoogleTest provides:

- **Value-Parameterized Tests:** Reuse a test logic across different **value parameters**, e.g., testing a function with multiple integer inputs.
- **Typed Tests and Type-Parameterized Tests:** Reuse a test logic across different **type parameters**, e.g., verifying the same container logic works for `int`, `double`, or `std::string`.

Both reduce test duplication, improve maintainability, and make your tests clearer and more scalable.

---

## Value-Parameterized Tests

### Core Idea

Value-parameterized tests enable you to run tests repeatedly with different data values without duplicating code. Instead of writing multiple similar tests, you define a _test fixture class_ parameterized by a type representing the data and instantiate the same test with multiple values.

### How They Work

1. **Define a Fixture Class:** Derive from `testing::TestWithParam<T>`, where `T` is the type of your parameter.

   ```cpp
   class FooTest : public ::testing::TestWithParam<const char*> {
     // Fixture setup if needed
   };
   ```

2. **Define Parameterized Tests:** Use `TEST_P` macro to write tests which access the current parameter using `GetParam()`.

   ```cpp
   TEST_P(FooTest, DoesBlah) {
     EXPECT_TRUE(foo.Blah(GetParam()));
   }
   ```

3. **Instantiate Tests with Parameters:** Use `INSTANTIATE_TEST_SUITE_P` along with a **parameter generator** to specify the values.

   ```cpp
   INSTANTIATE_TEST_SUITE_P(
       MyInstantiation, FooTest, testing::Values("meeny", "miny", "moe"));
   ```

### Parameter Generators

GoogleTest provides several built-in parameter generators to create sequences of test values:

| Generator                  | Description                                                                               |
|----------------------------|-------------------------------------------------------------------------------------------|
| `Range(begin, end [, step])` | Generates values from `begin` up to but not including `end` with optional `step` size     |
| `Values(v1, v2, ..., vN)`  | Generates explicit list of values                                                          |
| `ValuesIn(container)`       | Generates values from containers, C-style arrays or iterator ranges                        |
| `Bool()`                   | Generates two boolean values: `false` and `true`                                          |
| `Combine(g1, g2, ..., gN)` | Produces Cartesian product tuples of parameter sequences generated by the provided gens  |
| `ConvertGenerator<T>(gen)` | Converts generated values to type `T`, useful for custom parameter types                  |

### Example of Combining Parameter Generators

```cpp
class AnimalTest : public testing::TestWithParam<std::tuple<const char*, int>> {};

TEST_P(AnimalTest, AnimalLooksNice) {
  auto [animal, color] = GetParam();
  EXPECT_TRUE(CheckLooks(animal, color));
}

INSTANTIATE_TEST_SUITE_P(
    AnimalVariations, AnimalTest,
    testing::Combine(testing::Values("cat", "dog"),
                     testing::Values(0, 1)));  // 0 and 1 could represent colors
```

This generates tests for all combinations: `("cat", 0)`, `("cat", 1)`, `("dog", 0)`, and `("dog", 1)`.

### Instantiation and Naming

- The first argument to `INSTANTIATE_TEST_SUITE_P` is an instantiation name prefix that distinguishes different parameter sets.
- Test names are automatically suffixed with numeric indices (e.g., `/0`, `/1`, â€¦) or you can provide a **custom name generator** function.

Example with custom naming:

```cpp
INSTANTIATE_TEST_SUITE_P(
    CatDogTests, AnimalTest, testing::Values("cat", "dog"),
    [](const testing::TestParamInfo<std::string>& info) {
      return info.param;  // Use the parameter string as the test name suffix
    });
```

### Best Practices and Tips

- Define fixtures carefully to manage test resources using `SetUp()` and `TearDown()`.
- Use custom name generators to create human-readable test names for easier debugging.
- Remember that parameters are evaluated at `InitGoogleTest()`, not at instantiation site or test run.
- To suppress warnings for unused parameterized tests, use `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST()`.

---

## Typed Tests

### Core Idea

Typed tests allow you to run the same test logic for multiple **types** without rewriting the tests for each type.

### How They Work

1. **Define Test Fixture Template:** Create a class template derived from `testing::Test`.

    ```cpp
    template <typename T>
    class FooTest : public testing::Test {
     public:
      T value{};
    };
    ```

2. **Associate Types With Test Suite:** Use `TYPED_TEST_SUITE` macro with a type list.

    ```cpp
    using MyTypes = ::testing::Types<int, double, std::string>;
    TYPED_TEST_SUITE(FooTest, MyTypes);
    ```

3. **Define Typed Tests:** Use `TYPED_TEST` to write tests that refer to the type parameter using `TypeParam`.

    ```cpp
    TYPED_TEST(FooTest, DoesBlah) {
      TypeParam n = this->value;
      // test logic using n ...
      EXPECT_TRUE(DoSomething(n));
    }
    ```

At runtime, GoogleTest will instantiate the test suite for each type.

### Type-Parameterized Tests

Type-parameterized tests differ by letting you define test logic without knowing the types ahead of time, and register test patterns to be instantiated later with specific type lists.

Steps:

- Define your class template fixture normally.
- Declare the test suite with `TYPED_TEST_SUITE_P`.
- Define tests using `TYPED_TEST_P`.
- Register them with `REGISTER_TYPED_TEST_SUITE_P`.
- Instantiate with `INSTANTIATE_TYPED_TEST_SUITE_P` providing the type list.

This approach supports creating reusable abstract tests for interfaces or concepts.

### Example

```cpp
template <typename T>
class FooTest : public testing::Test {};

TYPED_TEST_SUITE_P(FooTest);

TYPED_TEST_P(FooTest, HasPropertyA) {
  TypeParam value{};
  EXPECT_TRUE(CheckProperty(value));
}

REGISTER_TYPED_TEST_SUITE_P(FooTest, HasPropertyA);

using MyTypes = ::testing::Types<char, int, unsigned int>;
INSTANTIATE_TYPED_TEST_SUITE_P(My, FooTest, MyTypes);
```

### Tips

- The test logic is written once, but you can instantiate it in multiple source files.
- You can supply a custom name generator class to customize the type names in test output.
- Typed tests help identify which type fails, improving diagnostics.

---

## Summary of Parameterized and Typed Testing Workflows

| Feature                      | Macro(s)                    | Purpose                                               |
| ---------------------------- | --------------------------- | -----------------------------------------------------|
| Value-Parameterized Test Fixture | `TestWithParam<T>`             | Create fixture for parameterized tests using values   |
| Define Value-Parameterized Test    | `TEST_P`                       | Define individual parameterized test                   |
| Instantiate Parameterized Tests    | `INSTANTIATE_TEST_SUITE_P`    | Supply test parameter values using generators          |
| Typed Test Fixture                 | Template fixture class         | Write tests templated by type                           |
| Define Typed Test                  | `TYPED_TEST`                  | Define test for each type                               |
| Instantiate Typed Tests            | `TYPED_TEST_SUITE`             | Bind typed tests to a list of types                     |
| Type-Parameterized Test Fixture   | `TYPED_TEST_SUITE_P`          | Define abstract typed test suite                        |
| Define Type-Parameterized Tests   | `TYPED_TEST_P`                | Define tests to register and instantiate later         |
| Register and Instantiate           | `REGISTER_TYPED_TEST_SUITE_P`, `INSTANTIATE_TYPED_TEST_SUITE_P` | Manage dynamic type sets                               |

---

## Troubleshooting and Common Pitfalls

- **No Default Constructor:** Your parameterized test fixture must have a default constructor.
- **Parameter Types:** Ensure parameter types are copyable and correctly managed (especially for pointer types).
- **Parameter Generator Evaluation:** Parameter generator expressions are evaluated during `InitGoogleTest()`. Avoid depending on runtime side effects.
- **Test Name Validity:** Test suite and test names must not contain underscores (`_`) as they interfere with GoogleTest's internal naming conventions; failing this can lead to compiler or runtime errors.
- **Custom Parameter Names:** When using string parameters, use custom name generators as default name printing may not handle strings well.
- **Uninstantiated Parameterized Tests:** Uninstantiated tests cause failures unless marked with `GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST`.

---

## Practical Tips

- Choose **typed tests** when varying types but test logic is the same.
- Use **value-parameterized tests** when varying input values for the same type.
- Use `Combine()` to test all combinations of multiple parameters.
- Use `ConvertGenerator()` to adapt generated parameter sets to custom types.
- Track and log test properties with `RecordProperty()` during testing for enriched reports.

---

## Additional Resources

- [Value-Parameterized Tests](../advanced.md#value-parameterized-tests) guide for detailed patterns and examples.
- [Typed Tests](../advanced.md#typed-tests) for advanced usage of type-driven testing.
- [INSTANTIATE_TEST_SUITE_P](../reference/testing.md#INSTANTIATE_TEST_SUITE_P) API documentation.
- Sample tests in the GoogleTest repository ([sample7_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample7_unittest.cc)) demonstrate value-parameterized tests.
- Sample tests ([sample6_unittest.cc](https://github.com/google/googletest/blob/main/googletest/samples/sample6_unittest.cc)) illustrate typed tests.

---

By mastering parameterized and typed testing, you will dramatically increase your GoogleTest coverage and efficiency, ensuring your test code is both concise and comprehensive.
