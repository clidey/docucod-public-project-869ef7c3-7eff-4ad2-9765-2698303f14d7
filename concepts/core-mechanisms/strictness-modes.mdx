---
title: "Mock Object Strictness Modes"
description: "Understand the different levels of strictness for mocks (NiceMock, NaggyMock, StrictMock), and how they affect the handling of unexpected calls. Learn when and why you might use each mode."
---

# Mock Object Strictness Modes

Mock objects in GoogleMock can be configured to handle uninteresting calls — calls to mock methods that are not explicitly expected — in different ways. These *strictness modes* control how warnings and errors related to unexpected or uninteresting calls are reported during tests, enabling fine-tuned diagnostic control and making tests easier to maintain and understand.

---

## Overview of Strictness Modes

GoogleMock provides three primary wrappers to modify mock object strictness:

| Strictness Mode | Behavior on Uninteresting Calls                                         | Default Behavior                |
|-----------------|------------------------------------------------------------------------|--------------------------------|
| **NiceMock**    | Suppresses warnings for uninteresting calls; treats them as allowed.  | Not default yet (planned to be) |
| **NaggyMock**   | Prints a warning message for uninteresting calls but allows them.      | Default for raw mocks           |
| **StrictMock**  | Treats all uninteresting calls as test failures (hard errors).        | N/A                            |

An *uninteresting call* is a call to a mock method with no matching `EXPECT_CALL`. This classification is distinct from *unexpected calls*, which are calls where the arguments do not match any existing expectation.


## Why Use Different Strictness Modes?

Choosing the appropriate strictness mode for your mocks helps balance between catching unintended interactions and reducing noise in test output.

- **Use *NiceMock* when** you want to focus tests only on interactions you explicitly care about, ignoring all other calls silently. This results in cleaner test outputs and less brittle tests.

- **Use *NaggyMock* when** you want to be aware of calls that are uninteresting but not fail on them, which helps identify possibly missing expectations during test development.

- **Use *StrictMock* when** you want your tests to assert that *only* the calls you specify occur, immediately catching any call without explicit expectation as an error.

This flexibility supports both exploratory testing and strict contract verification.


## How to Use Strictness Modes

Each strictness mode is implemented as a class template that takes your mock class as a parameter and creates a subclass that modifies uninteresting call handling.

Given a mock class `MockFoo`, you can declare strictness variants like this:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock;      // Ignores uninteresting calls
NaggyMock<MockFoo> naggy_mock;    // Warns on uninteresting calls
StrictMock<MockFoo> strict_mock;  // Fails on uninteresting calls
```

Because these wrappers subclass your mock, you can use them anywhere a `MockFoo` is used:
- They support constructor forwarding to your mock's constructors.
- They expose the same API as your mock.

### Important Notes:

- These wrappers only work properly if the mock methods are defined *directly* in your mock class—mock methods inherited from base classes may not be affected.
- Nesting these wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported.
- Your mock class should have a virtual destructor to avoid undefined behavior.


## Behavior Details

| Mode        | On Uninteresting Call                    | On Unexpected Call           |
|-------------|-----------------------------------------|-----------------------------|
| NiceMock    | Silently returns default action          | Always treated as error      |
| NaggyMock   | Prints warning including stack trace     | Always treated as error      |
| StrictMock  | Reports non-fatal test failure           | Always treated as error      |


## Example Usage

Consider the following interface and mock:

```cpp
class Foo {
 public:
  virtual ~Foo() {}
  virtual void DoThis() = 0;
  virtual int DoThat(bool flag) = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(void, DoThis, (), (override));
  MOCK_METHOD(int, DoThat, (bool flag), (override));
};
```

### Using NaggyMock (Default behavior)

```cpp
NaggyMock<MockFoo> naggy;  // warnings printed on uninteresting calls

naggy.DoThis();  // Warning logged: "Uninteresting mock function call"
```

### Using NiceMock

```cpp
NiceMock<MockFoo> nice;  // Uninteresting calls ignored

nice.DoThis();  // No warnings or errors
```

### Using StrictMock

```cpp
StrictMock<MockFoo> strict;  // Uninteresting calls fail the test

strict.DoThis();  // Test failure: unexpected call
```


## Transition of Default Behavior

Currently, raw mocks behave like `NaggyMock` by default — uninteresting calls generate warnings. However, GoogleTest plans to switch default mock behavior to `NiceMock` to promote more maintainable tests that suppress noise.

When this change occurs, creating a mock like `MockFoo foo;` will behave like `NiceMock<MockFoo>`, and users should explicitly use `NaggyMock` or `StrictMock` if they want warnings or strict failures on uninteresting calls.


## Common Scenarios and Recommendations

| Scenario                              | Recommended Strictness Mode           | Notes                                           |
|-------------------------------------|-------------------------------------|-------------------------------------------------|
| Rapid prototyping/tests under development | NaggyMock                          | Warnings can help catch unexpected usage early  |
| Stable codebase, tests verifying key interactions | NiceMock                          | Minimal noise and less brittle tests            |
| Critical modules, strict contract verification  | StrictMock                        | Fail fast on any unexpected call                 |
| Mock class with non-default constructors       | All modes supported with constructor forwarding |


## Handling Mock Objects with Strictness Modes

These wrappers automatically register with the GoogleMock framework to specify how uninteresting calls are handled for the wrapped mock instance.

Be aware:
- The wrappers use internal registration to handle the default call behavior.
- Life cycle of the mock (constructor/destructor) ensures strictness is applied consistently.


## Troubleshooting Strictness Mode Usage

- **Nested strictness wrappers fail:** Avoid nesting `NiceMock`/`NaggyMock`/`StrictMock`. Use only one strictness wrapper.
- **Unintended warnings on base class fake methods:** Mock methods in base classes may not honor strictness mode. Define mocks directly in your mock class.
- **Virtual destructor missing:** Ensure your mock and its base classes have virtual destructors to avoid undefined behaviors.
- **Unrecognized call silence despite using `NiceMock`:** Confirm you constructed the mock object as a `NiceMock<YourMock>` instance, not just plain `YourMock`.


## Summary

Strictness modes allow control over how GoogleMock treats uninteresting mock calls:

- `NiceMock` suppresses warnings, allowing uninteresting calls.
- `NaggyMock` warns on uninteresting calls (default behavior).
- `StrictMock` treats uninteresting calls as test failures.

Use these tools to tailor your test's sensitivity to unexpected interactions, improving test clarity, reliability, and maintainability.


---

## References

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: Strictness Modes](https://google.github.io/googletest/reference/mocking.md#StrictMock)
- [gMock Cheat Sheet: Mock Object Strictness](https://google.github.io/googletest/gmock_cheat_sheet.html#TheNiceStrictAndTheNaggy)
- [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md)

---

## Further Learning

Explore other related documentation to deepen your understanding and apply mocking effectively:

- **Defining Expectations and Behaviors:** Learn to precisely specify how mocks respond to calls.
- **Using and Composing Matchers:** Master argument matching techniques to write robust expectations.
- **Actions and Side Effects:** Customize mock behaviors extensively.
- **Effective Mocking Patterns:** Apply advanced mocking strategies for real-world testing scenarios.

---

## Practical Tips

- Always set expectations (`EXPECT_CALL`) on calls you want to verify, even in NiceMock mode.
- Use `NiceMock` when you expect many calls to methods but only care about specific ones.
- Use `StrictMock` cautiously; it can make tests more brittle but catches unexpected interactions early.
- Suppress warnings intentionally with `NiceMock` rather than ignoring them; unchecked warnings may hide bugs.


---

## Example Summary Snippet

```cpp
// Using NiceMock to suppress warnings for uninteresting calls
using ::testing::NiceMock;

NiceMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());  // Expect this call
foo.DoThis();               // Valid call
foo.DoThat(true);           // Allowed, no warning because of NiceMock
```

```cpp
// Using StrictMock to fail on any uninteresting call
using ::testing::StrictMock;

StrictMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());  // Expect this call
foo.DoThis();               // Valid call
foo.DoThat(true);           // Test failure: uninteresting call
```



---