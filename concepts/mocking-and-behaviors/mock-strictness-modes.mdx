---
title: "Mock Strictness Modes: Nice, Naggy, and Strict"
description: "Unpack the different strictness levels (NiceMock, NaggyMock, StrictMock) that control how uninteresting interactions with mock objects are handled. Choose modes tailored to your test philosophy, balancing enforcement and flexibility."
---

# Mock Strictness Modes: Nice, Naggy, and Strict

Google Mock provides three distinct strictness levels that determine how uninteresting calls to mock methods (i.e., calls that have no explicit expectations) are treated. These are:

- **NiceMock:** Ignores uninteresting calls silently.
- **NaggyMock:** Warns about uninteresting calls (default behavior).
- **StrictMock:** Treats uninteresting calls as test failures.

This guide unpacks these strictness modes, how to use each appropriately, and their impact on test maintenance and behavior.

---

## Understanding Mock Strictness

### What Are Uninteresting Calls?
An *uninteresting call* is a call to a mock method that has no `EXPECT_CALL` expectation set. Since no constraint exists for this call, Google Mock must decide how to handle it. The three strictness modes provide different answers to this.

### Why Do Strictness Modes Matter?
Strictness controls test output verbosity and enforcement, allowing you to balance flexibility with rigor. Choosing the right mode aligns your tests with your desired philosophy and maintenance approach.

---

## The Three Strictness Modes

### 1. NiceMock

- **Behavior:** Suppresses warnings related to uninteresting calls completely.
- **Use Case:** Ideal when you want to ignore calls not explicitly expected without noise.
- **Usage:** Wrap your mock class with `NiceMock<YourMock>`. This subclass suppresses warnings.

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;

TEST(MyTest, UsesNiceMock) {
  NiceMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis(); // Expected call
  mock_foo.DoThat(); // Uninteresting call, silently ignored
}
```

- **Tip:** You can construct `NiceMock` just like your mock if your mock has non-default constructors.

- **Caveats:** 
  - Only affects mock methods declared directly in the mock class.
  - Does not affect *unexpected* calls (calls with expectations that do not match).

### 2. NaggyMock

- **Behavior:** Prints warnings when uninteresting calls occur.
- **Default:** Raw mock objects currently behave as naggy.
- **Use Case:** Useful when developing tests to highlight unexpected interactions without failing.

```cpp
#include <gmock/gmock.h>
using ::testing::NaggyMock;

TEST(MyTest, UsesNaggyMock) {
  NaggyMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis(); // Expected call
  mock_foo.DoThat(); // Uninteresting call, triggers a warning
}
```

- **Note:** While naggy mocks warn about uninteresting calls, they do not fail tests. This lets you be aware of calls you didn't specify but wonâ€™t break the build.

### 3. StrictMock

- **Behavior:** Treats all uninteresting calls as test failures.
- **Use Case:** Apply when you want to enforce strict contract adherence and catch all unexpected interactions.

```cpp
#include <gmock/gmock.h>
using ::testing::StrictMock;

TEST(MyTest, UsesStrictMock) {
  StrictMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoThis());

  mock_foo.DoThis(); // Expected call
  mock_foo.DoThat(); // Uninteresting call, test fails here
}
```

- **Tip:** Like other modes, supports constructors with parameters mirroring the mock class.

- **Warning:** Tests using strict mocks will fail immediately on any call to a method without an expectation.


---

## Choosing the Right Strictness Mode

| Mode        | Allows Uninteresting Calls? | Warns on Uninteresting Calls? | Fails on Uninteresting Calls? | Recommended For                                     |
|-------------|-----------------------------|-------------------------------|-------------------------------|---------------------------------------------------|
| NiceMock    | Yes                         | No                            | No                            | Most tests, where uninteresting calls are fine     |
| NaggyMock   | Yes                         | Yes                           | No                            | Developing/debugging tests, catching unexpected calls |
| StrictMock  | No                          | No                            | Yes                           | Highly strict enforcement, catching all unexpected calls |

**Best Practice:**
- Use `NiceMock` by default to keep tests maintainable and avoid noise.
- Use `NaggyMock` during early test dev phases to highlight missing expectations.
- Reserve `StrictMock` for critical tests where any unmodeled interaction should fail.

---

## How to Apply Strictness Modes

These modes are implemented as template wrappers that subclass your mock class. This means:

- They inherit all mock class constructors and methods.
- You can use them interchangeably wherever your mock type is accepted.

Example:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(void, DoThat, (), ());
};

// Using different strictness modes
NiceMock<MockFoo> nice_instance;
NaggyMock<MockFoo> naggy_instance;
StrictMock<MockFoo> strict_instance;
```

You can create instances with parameters as needed:

```cpp
NiceMock<MockBar> nice_bar("hello");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 1, 2, "e", "f", true, false);
```

---

## Impact on Test Behavior

| Scenario                           | NiceMock                         | NaggyMock                      | StrictMock                      |
|----------------------------------|---------------------------------|--------------------------------|--------------------------------|
| Call to method with EXPECT_CALL   | Runs normally                    | Runs normally                   | Runs normally                   |
| Call to method without EXPECT_CALL| No warning, no failure           | Warning printed                | Test assertion failure          |
| Unexpected call (mismatched args) | Test failure                    | Test failure                   | Test failure                   |
| Uninteresting call deletes mock object | No warning                    | Warning printed                | Test failure                   |

NOTE: Strictness modes affect only *uninteresting calls*, not *unexpected calls*. Unexpected calls always cause test failures.

---

## Important Considerations and Limitations

- **Direct Mock Methods Only:** These modifiers only affect mock methods defined with `MOCK_METHOD` macros *directly* in the mock class. Methods inherited from base classes may not respect these.

- **Nesting Not Supported:** Nesting strictness modifiers (e.g., `NiceMock<StrictMock<MockFoo>>`) is unsupported and will not behave correctly.

- **Virtual Destructors:** Mock classes should have virtual destructors for correct behavior.

- **Future Defaults:** The default mock behavior in GoogleMock is evolving from naggy to nice to encourage cleaner, less brittle tests.

---

## Best Practices

- Favor `NiceMock` for stable, maintainable tests where uninteresting calls should be ignored.
- Use `NaggyMock` during exploration or debugging to get notified about unexpected calls without breaking tests.
- Employ `StrictMock` sparingly for targeted tests requiring full verification of all calls.
- Always explicitly set expectations for mock methods called.
- Use catch-all expectations (`EXPECT_CALL(mock, Method(_)).Times(AnyNumber())`) to avoid uninteresting call warnings if using `NaggyMock` or default mocks.
- Avoid turning on strictness globally unless absolutely necessary.

---

## Troubleshooting

### Warning or Failure for Uninteresting Calls
If you see warnings or failures for calls you expect to be ignored:

- Consider switching to `NiceMock` if calls are truly uninteresting.
- If using `NaggyMock` or default mock, add catch-all expectations.

### Behavior Not Changing as Expected
- Confirm that your mock class has virtual destructors.
- Ensure all mocked methods are declared directly in your mock class with `MOCK_METHOD`.
- Check you are not nesting strictness wrappers.

### Unexpected Calls Always Fail
Remember that strictness modes do not suppress failures on *unexpected* calls (methods called with arguments not matching any `EXPECT_CALL`). Add explicit expectations or adjust your test logic.

---

## Related Concepts and Further Reading

- [Mock Objects: Design and Usage](concepts/mocking-and-behaviors/mock-objects-design)
- [Expectations, Actions, and Matchers](concepts/mocking-and-behaviors/expectations-actions-matchers)
- [Defining Expectations & Actions](api-reference/mocking-apis/defining-expectations-actions)
- [Strictness Policies & Unexpected Calls](api-reference/mocking-apis/strictness-and-unexpected-calls)
- [Mocking Best Practices](guides/essential-testing-patterns/mocking-best-practices)

---