---
title: "Mock Behavior Modes (Nice, Naggy, Strict)"
description: "Understand the differences between NiceMock, NaggyMock, and StrictMock, and how they customize the framework's response to uninteresting or unexpected calls. Learn when to use each mode and its impact on test clarity and diagnostic output."
---

# Mock Behavior Modes (Nice, Naggy, Strict)

GoogleMock provides three specialized mock behavior modes — **NiceMock**, **NaggyMock**, and **StrictMock** — that allow you to control how your mock objects respond to calls that are not explicitly expected. Understanding the distinctions among these modes empowers you to write clearer tests, reduce noise during test execution, and catch unexpected interactions more precisely.

---

## Understanding Uninteresting vs Unexpected Calls

Before diving into the behavior modes, it's essential to grasp two fundamental concepts in GoogleMock:

- **Uninteresting Calls**: Invocations of mock methods for which there are no `EXPECT_CALL` expectations set. These are calls the test does not explicitly care about.
- **Unexpected Calls**: Invocations that match no active expectation but occur on a mock method that *does* have some `EXPECT_CALL` specifications. These indicate the tested code called a method in a way the test did not expect.

| Call Type           | Occurs When                      | Effect by Default     |
|---------------------|---------------------------------|----------------------|
| Uninteresting Call  | No `EXPECT_CALL` on method      | Warning emitted (naggy behavior) |
| Unexpected Call    | Some `EXPECT_CALL`s exist but none match args | Test failure          |

> Note: The behavior modes affect how **uninteresting calls** are handled; they do **not** change how unexpected calls are treated — unexpected calls always cause failures.

---

## Behavior Modes Overview

### 1. NiceMock

`NiceMock<T>` is a wrapper around your mock class `T` that **silences warnings for uninteresting calls**. In other words, uninteresting calls to `NiceMock` objects produce no warnings, making tests cleaner when you don’t want noise about calls you don’t care about.

**Key Characteristics:**

- Suppresses warnings for uninteresting calls.
- Allows uninteresting calls to proceed and perform their default action.
- Unexpected calls still produce errors as usual.
- Supports mocks with non-default constructors.
- Perfect for tests where you want to focus only on the relevant mock interactions.


**Usage Example:**

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis();  // Allowed and expected
nice_foo.DoThat(true);  // Uninteresting call, no warning
```


### 2. NaggyMock

`NaggyMock<T>` is the default behavior of GoogleMock's raw mock objects. It generates a **warning message for each uninteresting call** but allows the test to continue.

**Key Characteristics:**

- Warns about uninteresting calls.
- Uninteresting calls perform their default action but print a warning message.
- Unexpected calls produce failures.
- Useful during test development and debugging to surface unexpected usages.


**Usage Example:**

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
naggy_foo.DoThis();  // Expected call
naggy_foo.DoThat(true);  // Uninteresting call - warning printed
```

### 3. StrictMock

`StrictMock<T>` treats **all uninteresting calls as test failures**. This mode is the strictest and is useful when you want to enforce *complete* specification of mock interactions.

**Key Characteristics:**

- Uninteresting calls *fail* tests immediately.
- Unexpected calls also fail as usual.
- Ideal for tests that require tight control and explicit specification of all mock calls.
- Supports mocks with non-default constructors.
- Helps in detecting unexpected side effects early.


**Usage Example:**

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis();  // Allowed
strict_foo.DoThat(true);  // Test failure - uninteresting call
```

---

## How to Choose the Right Mode

Our general recommendations based on real-world testing workflows are:

- Use **NiceMock** for most tests. It helps keep tests focused and maintainable by ignoring irrelevant calls.
- Use **NaggyMock** during test development or debugging when you want visibility into unexpected uninteresting calls.
- Use **StrictMock** sparingly, only when you must verify that *every* mock call is expected. It often leads to brittle tests and high maintenance costs.

---

## Practical Details and Tips

### Instantiation & Constructors

All three behaviors (`NiceMock`, `NaggyMock`, `StrictMock`) inherit from your mock class and **inherit the mock’s constructors**. This means you can construct them exactly like the original mock, including passing arguments to non-default constructors:

```cpp
NiceMock<MockBar> nice_bar("initial state");
StrictMock<MockBar> strict_bar('a', 'b', "c", "d", 1, 2, "e", "f", true, false);
```


### Known Limitations

- Strictness modifiers only affect mock methods defined with `MOCK_METHOD` macros **directly** in your mock class, not those in base classes.
- Nesting behavior wrappers like `NiceMock<StrictMock<MockFoo>>` is **not supported**.
- Behavior wrappers may not work correctly if the mock class destructor is not virtual.


### Debugging and Diagnostics

- Verbose output can be controlled with `--gmock_verbose=info|warning|error` flags.
- NaggyMock prints warnings without stack traces by default (`warning` level) and with stack traces at `info` level.
- NiceMock suppresses warnings for uninteresting calls unless you set verbosity to `info`.

---

## Summary Example: Comparing Mock Modes

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, ());
  MOCK_METHOD(int, DoThat, (bool flag));
};

// Using naggy behavior (default)
NaggyMock<MockFoo> naggy_foo;
naggy_foo.DoThis();     // No expectation: warning printed

// Using nice behavior
NiceMock<MockFoo> nice_foo;
nice_foo.DoThis();      // No expectation: no warning

// Using strict behavior
StrictMock<MockFoo> strict_foo;
strict_foo.DoThis();    // No expectation: test failure

// Expectations are enforced as usual
EXPECT_CALL(naggy_foo, DoThis());
naggy_foo.DoThis();     // Passes
```

---

## Troubleshooting Common Issues

- If you see "Uninteresting mock function call" warnings and want to silence them, consider using `NiceMock` instead of the raw mock.
- Unexpected call failures mean your test has an explicit expectation mismatch or missing `EXPECT_CALL`.
- For strict mocks, uninteresting calls cause failures; make sure you have expectations or use nice mocks when appropriate.

---

## Additional Resources

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: Classes NiceMock, NaggyMock, StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock Cheat Sheet: Mock Behavior](https://google.github.io/googletest/gmock_cheat_sheet.html#MockBehavior)
- [Understanding Uninteresting vs Unexpected Calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected)

---