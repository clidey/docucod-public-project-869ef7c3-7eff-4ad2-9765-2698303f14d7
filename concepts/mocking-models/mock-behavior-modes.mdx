---
title: "Mock Behavior Modes: Nice, Naggy, Strict"
description: "Learn about the three behavior modes that control how mocks react to unexpected calls. Discover use cases for each, how to apply them, and how they influence feedback and test strictness."
---

# Mock Behavior Modes: Nice, Naggy, Strict

GoogleMock provides three key behavior modes that determine how mocks handle calls to methods that are *not* explicitly expected in your tests. These modes control the framework’s feedback—ranging from silent acceptance to hard failures—on *uninteresting calls*. Knowing when and how to use each mode empowers you to write clearer, more maintainable tests that align with your intent and testing needs.

---

## Understanding Mock Behavior Modes

### What Are Mock Behavior Modes?

Behavior modes specify GoogleMock’s reaction when a mock object's method is invoked without a matching `EXPECT_CALL` (an *uninteresting call*). They affect how strictly the mock enforces calls:

| Mode Name | Reaction to Uninteresting Calls | Resulting Behavior
|-----------|---------------------------------|-------------------
| **Nice** | Silently allows calls with default action | Warnings suppressed; test continues quietly
| **Naggy** (default) | Prints warnings about uninteresting calls | Alerts you, but test continues
| **Strict** | Treats uninteresting calls as test failures | Fails test on unexpected calls

Each mode is implemented as a wrapper template—`NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>`—which you can use to instantiate your mock objects.

### When to Use Each Mode

- **NiceMock**: Use when you want to ignore calls you don’t care about, avoiding warnings cluttering your test output. Ideal during rapid prototyping or when dealing with mocks where the majority of methods are irrelevant to the test.

- **NaggyMock**: The default mode provides warnings for potentially forgotten expectations, highlighting suspicious uninteresting calls without disrupting the test. Use this during test development and debugging.

- **StrictMock**: Employ for highly deterministic tests that must detect any unexpected interaction. Strict mocks make tests fail immediately if unexpected calls occur, signaling precise contract violations.

---

## Using the Behavior Modes

### Creating Mocks with Different Behavior Modes

Given a mock class, e.g., `MockFoo`, you can instantiate mocks with distinct behaviors:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Nice Mock: suppresses uninteresting call warnings
NiceMock<MockFoo> nice_mock;

// Naggy Mock: default mode; warns on uninteresting calls
NaggyMock<MockFoo> naggy_mock;

// Strict Mock: fails on uninteresting calls
StrictMock<MockFoo> strict_mock;
```

Each mock behaves identically when calls match an `EXPECT_CALL`. The difference lies solely in uninteresting calls.

### Example Scenario

Imagine testing a `MockDatabase` where only `Connect()` is of interest:

```cpp
class MockDatabase {
 public:
  MOCK_METHOD(bool, Connect, (), ());
  MOCK_METHOD(void, Disconnect, (), ());
  MOCK_METHOD(int, Query, (const std::string&), ());
};

TEST(DatabaseTest, ConnectsSuccessfully) {
  NiceMock<MockDatabase> db;

  EXPECT_CALL(db, Connect())
      .WillOnce(Return(true));

  // Calls to Disconnect and Query will be silently ignored, no warnings.

  EXPECT_TRUE(db.Connect());
  db.Disconnect();    // Uninteresting call, silently allowed.
  db.Query("SELECT");  // Uninteresting call, silently allowed.
}

TEST(DatabaseTest, WarningOnUninterestingCalls) {
  NaggyMock<MockDatabase> db;

  EXPECT_CALL(db, Connect())
      .WillOnce(Return(true));

  db.Disconnect();    // Produces a warning.
}

TEST(DatabaseTest, FailureOnUnexpectedCalls) {
  StrictMock<MockDatabase> db;

  EXPECT_CALL(db, Connect())
      .WillOnce(Return(true));

  db.Disconnect();    // Test fails: uninteresting call is an error.
}
```

### Suppressing Specific Warnings

If you want naggy or strict mocks but only on some methods, you can explicitly mark other calls as expected to be called any number of times:

```cpp
EXPECT_CALL(mock, UnimportantMethod(_)).Times(::testing::AnyNumber());
```

This suppresses uninteresting-call warnings for that method.

---

## Runtime Control of Mock Behavior

While behavior modes usually arise from the template wrappers above, GoogleMock allows you to control the reaction on a per-mock-object basis through API calls:

- `Mock::AllowUninterestingCalls(mock_obj)` — equivalent to NiceMock mode
- `Mock::WarnUninterestingCalls(mock_obj)` — equivalent to NaggyMock mode
- `Mock::FailUninterestingCalls(mock_obj)` — equivalent to StrictMock mode

Additionally, you can query a mock’s mode:

- `Mock::IsNice(mock_obj)`
- `Mock::IsNaggy(mock_obj)`
- `Mock::IsStrict(mock_obj)`

**Use case:** dynamically switch behavior in tests without changing mock types.

---

## How Behavior Modes Affect Test Feedback

| Behavior Mode | Uninteresting Call Reaction              | User Feedback and Test Outcome                      |
|---------------|-----------------------------------------|----------------------------------------------------|
| Nice          | Allowed silently                        | No warnings; test proceeds                          |
| Naggy (default) | Warned (printed message)                | Warning message to stdout/stderr; test proceeds    |
| Strict        | Treated as test failure                 | Failure reported immediately; test fails           |

> **Tip:** During test development, Naggy helps detect forgotten expectations. Once stable, switch to Nice to reduce noise or Strict to enforce rigor.

---

## Best Practices & Common Pitfalls

- **Choose Mode by Test Intent:** Use *Nice* to reduce noise for irrelevant calls, *Naggy* to catch forgotten expectations, and *Strict* to catch unexpected behavior errors.
- **Don't Overuse StrictMocks:** They can cause brittle tests that break on legitimate refactors.
- **Avoid Suppressing Warnings by Mistake:** Don’t add unnecessary `EXPECT_CALL`s just to silence warnings; instead, use `NiceMock` or explicit `Times(AnyNumber())` for methods you truly intend to ignore.
- **Remember Scope of Effect:** The behavior modes only affect *uninteresting calls* (no matching `EXPECT_CALL`). Unexpected calls (calls that don't match any `EXPECT_CALL`) always cause failures regardless of mode.
- **Watch For Methods Defined in Base Classes:** `NiceMock` and `StrictMock` only affect methods *directly* in mocked class, not its base classes.

---

## Internal Behavior Flow (Simplified)

When a mock method is called, GoogleMock:

1. **Checks for a matching `EXPECT_CALL`.** If found, executes associated actions.
2. **If no matching `EXPECT_CALL`:**
   - Checks the mock object's behavior mode.
   - If **Nice**, executes default action silently.
   - If **Naggy**, prints warning then executes default action.
   - If **Strict**, fails the test.

This guarantees predictable control of test feedback.

---

## Related Features

- **ON_CALL vs EXPECT_CALL:**
  - `ON_CALL` sets default actions used for uninteresting calls.
  - `EXPECT_CALL` sets expectations—unmatched EXPECT_CALL calls are errors.
- **Cardinalities:** `Times()` affects how often a mock method is expected and can complement behavior modes.
- **Sequences & Ordering:** Specifies order constraints without affecting mode.

---

## References

- [GoogleMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#the-nice-the-strict-and-the-naggy)
- [EXPECT_CALL and ON_CALL details](https://google.github.io/googletest/reference/mocking.html#EXPECT_CALL)
- [Built-in Mocks and Mock Function Templates](https://google.github.io/googletest/reference/mocking.html#MockFunction)
- [Mocking and Behavior Specification: Managing Cardinalities, Strictness, and Uninteresting Calls](https://google.github.io/googletest/api/gmock_mocks.html)

---

## Summary

This section introduced you to **Nice**, **Naggy**, and **Strict** mock behavior modes in GoogleMock. You learned how these modes influence the test feedback on calls to mock methods that lack explicit expectations. Through examples and best practices, you now understand when to use each mode and how they fit into your testing strategy.

For deeper mastery, explore the related sections on setting expectations, actions, and cardinalities, as well as advanced mocking patterns and customization techniques.

---