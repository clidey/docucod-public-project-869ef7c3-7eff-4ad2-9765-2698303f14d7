---
title: "NiceMock, NaggyMock, and StrictMock Explained"
description: "Learn how different mock strictness wrappers control the consequences of unexpected calls. Understand their behavior, best practices for usage, and impact on test outcomes and safety."
---

# NiceMock, NaggyMock, and StrictMock Explained

GoogleMock provides three important wrappers — `NiceMock`, `NaggyMock`, and `StrictMock` — that control how mock objects handle calls to methods without explicit expectations. These wrappers adjust the strictness of mocks, influencing test reliability, feedback verbosity, and overall safety in unit tests.

---

## Understanding Mock Strictness Wrappers

### Behavior of Uninteresting Calls

In GoogleMock, an **uninteresting call** happens when a mock method is invoked but no corresponding `EXPECT_CALL` expectation exists for that method and call pattern.

- A call matching an existing `EXPECT_CALL` but violating argument constraints is termed an **unexpected call** and always triggers a test failure.

The strictness wrappers customize what happens when your tests encounter uninteresting calls:

| Wrapper       | Behavior on Uninteresting Calls                                         | Use Case                                                   |
|---------------|------------------------------------------------------------------------|------------------------------------------------------------|
| **NiceMock**  | Silences warnings and ignores the call, allowing the test to proceed.  | Use when uninteresting calls are benign and should not distract. Ideal for maintaining cleaner test logs. |
| **NaggyMock** | Prints a warning on uninteresting calls but does not fail the test.    | Current default behavior. Useful during development or debugging to catch unintended calls without breaking tests. |
| **StrictMock**| Treats all uninteresting calls as test failures.                       | Enforces strict contract adherence. Use to catch undesired calls and maintain tight correctness guarantees. |


## How `NiceMock`, `NaggyMock`, and `StrictMock` Work

Each wrapper is implemented as a subclass of your mock class: `NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` inherit from `T`, your mock class. They modify the behavior toward uninteresting calls using internal GoogleMock call reaction registries.

- **Constructor Inheritance:** You can construct these wrappers with the same arguments as your mock class. For example:

  ```cpp
  NiceMock<MockFoo> nice_foo(5, "param");
  ```

- **Uninteresting Call Control:** During construction, these wrappers register themselves to alter GoogleMock’s default call reactions:
  - `NiceMock` allows uninteresting calls silently.
  - `NaggyMock` prints warnings when uninteresting calls occur.
  - `StrictMock` treats all uninteresting calls as errors, causing test failures.

### Important Usage Notes

- Wrappers affect only mock methods **defined directly** with the `MOCK_METHOD` macro in the mock class; methods inherited from base classes may not be fully controlled.
- Nesting wrappers is not supported, e.g., `NiceMock<StrictMock<MockFoo>>` is disallowed.
- Mock classes should have a **virtual destructor** to ensure proper behavior.

## Motivations and Recommended Usage

### Why Control Mock Strictness?

During testing, you may want different levels of strictness:

- While developing tests, seeing warnings (`NaggyMock`) helps identify unexpected behavior without failing immediately.
- For stable test suites, suppressing warnings for calls you deem irrelevant (`NiceMock`) reduces noise and maintenance overhead.
- In critical code paths or final verification, enforce stricter checking (`StrictMock`) to prevent bugs caused by unintended calls.

### When to Use Each Wrapper

| Wrapper       | Recommendation                                                                                      |
|---------------|---------------------------------------------------------------------------------------------------|
| **NiceMock**  | Use in most production-quality tests where uninteresting calls are safe and not worth warning.    |
| **NaggyMock** | Use during development or debugging to spot unexpected method calls but keep test runnable.        |
| **StrictMock**| Use when strict contract adherence is essential or to catch regressions due to unexpected calls.  |

### Changing Default Mock Behavior

Currently, mocks behave like `NaggyMock` by default, generating warnings on uninteresting calls. GoogleMock plans to switch this default to `NiceMock` for better test maintainability.

If you want to suppress warnings without rewriting all mocks, wrap them in `NiceMock<T>`.

## Practical Examples

### Suppressing Warnings with `NiceMock`

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis();       // No warnings on other calls
nice_foo.DoThat(true);  // Silently allowed
```

### Warning on Uninteresting Calls with `NaggyMock`

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;
EXPECT_CALL(naggy_foo, DoThis());
naggy_foo.DoThis();       // Allowed
naggy_foo.DoThat(true);   // Prints a warning
```

### Failing on Uninteresting Calls with `StrictMock`

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis();       // Allowed
strict_foo.DoThat(true);   // Test failure
```

### Using Non-Default Constructors With Wrappers

```cpp
using ::testing::NiceMock;

NiceMock<MockBar> nice_bar("hello");
EXPECT_CALL(nice_bar, This());
nice_bar.This();
```

## Impact on Test Outcomes and Safety

Strictness wrappers do **not** affect the behavior for **unexpected calls** (calls matching some expectation but with wrong arguments). Unexpected calls always cause test errors.

The wrappers only affect **uninteresting calls** (called methods with no `EXPECT_CALL`), controlling whether they produce warnings, errors, or are silently ignored.

## Best Practices

- Prefer `NiceMock` for most tests to keep logs clean and tests maintainable.
- Use `NaggyMock` temporarily during test writing or debugging to spot unaccounted calls.
- Employ `StrictMock` only when comprehensive enforcement of mock interface usage is necessary.
- Use explicit `EXPECT_CALL(...).Times(0)` to disallow specific calls if needed.
- Avoid nesting wrappers or applying them to classes that already use other strictness modifiers.

## Common Pitfalls and Troubleshooting

<AccordionGroup title="Troubleshooting Common Issues with Mock Strictness Wrappers">
<Accordion title="Unexpected Warnings Despite Using NiceMock">
Sometimes warnings appear if mock methods are inherited from base classes, which aren’t affected by wrappers. To resolve, ensure all mock methods using `MOCK_METHOD` are declared directly in the wrapped class.
</Accordion>
<Accordion title="Test Fails Unexpectedly with StrictMock">
Uninteresting calls cause failures in `StrictMock`. Confirm whether calls are truly unanticipated. If not, add an explicit expectation or switch to `NiceMock`.
</Accordion>
<Accordion title="Compiler Errors When Wrapping Mock Classes">
Ensure that your mock class does not already have a strictness wrapper applied before wrapping again. Nesting wrappers is unsupported.
</Accordion>
</AccordionGroup>

## Summary

The `NiceMock`, `NaggyMock`, and `StrictMock` wrappers provide a flexible mechanism to control the verbosity and strictness of mock objects regarding calls that have no explicit expectations.

Choosing the right wrapper balances clear test feedback with maintainability, supporting robust, actionable testing.

---

## References

- [Mocking Reference: NiceMock, NaggyMock, StrictMock](../api-reference/mock-behavior-extensions/nice-naggy-strict-mocks.md)
- [gMock Cookbook: Nice, Naggy, and Strict](../gmock_cook_book.md#NiceStrictNaggy)
- [gMock for Dummies: Using Mocks](../guides/core_workflows/mocking-basics.md)
- [Mock Method Definition (MOCK_METHOD)](/api-reference/core-mocking-api/mock-method-definition)

---

## Related Concepts

- **Uninteresting vs Unexpected Calls:** How expectations influence error reporting.
- **EXPECT_CALL and ON_CALL:** Setting behaviors and expectations in mocks.
- **Default Mock Behavior Control:** Changing global mock verbosity.

---

*This page focuses exclusively on explaining the behavior and usage of GoogleMock’s strictness wrappers, detailing their effect on uninteresting calls and providing practical usage guidance and examples.*
