---
title: "Strictness and Uninteresting Calls"
description: "Learn how GoogleMock manages uninteresting calls through its strictness wrappers: NiceMock, NaggyMock, and StrictMock. This page explains the rationale, behavior, and practical scenarios for each, empowering users to find the right balance between feedback and test maintainability."
---

# Strictness and Uninteresting Calls in GoogleMock

GoogleMock provides fine-grained control over how mock objects handle method calls that the test does not explicitly expect. This control comes through *mock strictness wrappers* which determine GoogleMock's behavior toward *uninteresting calls* â€” calls to mock methods without matching `EXPECT_CALL` specifications.

This page explains the concepts behind strictness and uninteresting calls, how GoogleMock manages them with `NiceMock`, `NaggyMock`, and `StrictMock`, and practical guidance on using these wrappers effectively to balance useful feedback and test maintainability.

---

## Understanding Uninteresting Calls

An **uninteresting call** is a call made to a mock method for which there is *no matching* `EXPECT_CALL` specification set by the user. In other words, the test *does not express any interest* in the call.

### Why Are Uninteresting Calls Important?

* Uninteresting calls indicate that the code under test invoked mock methods that you did not explicitly expect or specify.
* By default, GoogleMock flags these calls with warnings, because they might signal:
  - A missing but important test expectation.
  - Legitimate but unimportant calls that don't affect test correctness.
* GoogleMock lets users customize the treatment of uninteresting calls to either suppress warnings, treat them as warnings, or fail the test.

---

## Mock Strictness Wrappers: NiceMock, NaggyMock, and StrictMock

GoogleMock provides three standard wrappers that alter how uninteresting calls are handled:

| Wrapper       | Description                                                | Behavior on Uninteresting Calls                         |
|---------------|------------------------------------------------------------|---------------------------------------------------------|
| `NiceMock<T>` | Suppresses warnings on uninteresting calls.                | Ignores uninteresting calls silently (default action taken). |
| `NaggyMock<T>`| Emits warnings on uninteresting calls (default behavior).  | Prints a warning message but allows the call.          |
| `StrictMock<T>`| Treats uninteresting calls as errors.                      | Fails the test immediately on uninteresting calls.      |

### Usage Pattern

These wrappers are template classes inheriting from your mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock;
NaggyMock<MockFoo> naggy_mock;
StrictMock<MockFoo> strict_mock;
```

All three support all constructors of the wrapped mock class.

### Current Defaults

* The default `MockFoo` class behavior matches `NaggyMock<MockFoo>`, printing warnings.
* GoogleMock plans to make `NiceMock` the default in the future to reduce noise.

---

## Practical Behavior Examples

### 1. Using `NiceMock`

A `NiceMock` suppresses warnings about uninteresting method calls, allowing tests to focus only on explicitly expected calls:

```cpp
NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();    // Matches expectation
mock_foo.DoThat();    // Uninteresting, no warning, default action
```

### 2. Using `NaggyMock`

A `NaggyMock` warns on uninteresting calls, serving as a middle ground:

```cpp
NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();    // Matches expectation
mock_foo.DoThat();    // Warning printed, default action performed
```

This is the default for ordinary mocks.

### 3. Using `StrictMock`

A `StrictMock` treats uninteresting calls as test failures, enforcing strict mock usage:

```cpp
StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());

mock_foo.DoThis();    // Matches expectation
mock_foo.DoThat();    // Test fails immediately
```

---

## How GoogleMock Implements Strictness

Internally, when a mock method is called without a matching `EXPECT_CALL`, GoogleMock checks the strictness level associated with the mock object via calls to:

- `Mock::AllowUninterestingCalls` (for `NiceMock`)
- `Mock::WarnUninterestingCalls` (for `NaggyMock`)
- `Mock::FailUninterestingCalls` (for `StrictMock`)

The strictness wrappers set these levels during object construction and unregister on destruction to maintain consistent behavior throughout the mock's lifetime.

---

## When to Use Each Wrapper

Choosing the appropriate strictness determines the balance between test feedback and maintainability.

| Wrapper       | When to Use                                                             |
|---------------|-------------------------------------------------------------------------|
| `NiceMock`    | Use when you want to focus tests only on important calls and reduce noise.
Ideal for large tests where many calls are uninteresting.
| `NaggyMock`   | Use as the default when actively developing or debugging tests to catch unexpected calls.
| `StrictMock`  | Use when you want to enforce that no calls go unchecked.
Useful for critical interfaces with well-defined contracts.
---

## Best Practices

- Use `ON_CALL()` to specify default behavior for mock methods you do not want to verify but want to provide sensible behavior.
- Avoid suppressing uninteresting call warnings by adding catch-all `EXPECT_CALL`s; instead prefer `NiceMock` if suppression is desired.
- Prefer `NiceMock` for most tests for maintainability unless strictness is needed.
- Use `StrictMock` sparingly to avoid brittle tests.
- Add `.Times(AnyNumber())` to expectations when you want to suppress warnings on certain methods.

---

## Advanced Behavior and Considerations

- **Macro-defined method names:** `EXPECT_CALL`, `ON_CALL` still work as expected even when method names are expanded from macros.
- **Verbose output levels:** Set the `--gmock_verbose` flag to control how much information GoogleMock prints for uninteresting and expected calls.
  - `info`: prints stack traces and information for all calls.
  - `warning`: prints warnings for uninteresting calls without stack traces.
  - `error`: suppresses all except errors.
- **Deleting mocks early:** GoogleMock handles uninteresting calls and expectations correctly even if a mock object is deleted midway during test execution.
- **Caveats:** Strictness wrappers affect only *uninteresting* calls, not *unexpected* calls (calls that do not match existing `EXPECT_CALL`s).

---

## Summary

The strictness wrappers in GoogleMock provide valuable control over test verbosity and enforcement:

- **`NiceMock`**: Silence warnings for uninteresting calls.
- **`NaggyMock`**: Warn on uninteresting calls (default behavior).
- **`StrictMock`**: Fail tests on uninteresting calls.

Choosing the right strictness mode helps achieve clean test output and prevents brittle tests, while ensuring that critical mock interactions are validated.

---

## References and Further Reading

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: Mock Strictness Wrappers](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock for Dummies: Using Mocks in Tests](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks-in-tests)
- [GoogleMock Source: gmock-nice-strict.h](https://github.com/google/googletest/blob/main/googlemock/include/gmock/gmock-nice-strict.h)

---

## Additional Tips

- Use `Mock::AllowLeak()` if you deliberately want to skip leak checking for a mock object.
- Remember that `NiceMock`, `NaggyMock`, and `StrictMock` only affect mock methods defined directly in the mock class using `MOCK_METHOD`.
- When using `StrictMock`, be prepared to define expectations more comprehensively to prevent early failures.

---

## Example: Using Strictness Wrappers in Your Test

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (int n), ());
};

TEST(NiceMockTest, SilencesWarnings) {
  NiceMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());

  mock.DoThis();    // OK
  mock.DoThat(5);   // Uninteresting, silent
}

TEST(NaggyMockTest, WarningsOnUninterestingCalls) {
  NaggyMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());

  mock.DoThis();    // OK
  mock.DoThat(5);   // Warning printed
}

TEST(StrictMockTest, FailsOnUninterestingCalls) {
  StrictMock<MockFoo> mock;
  EXPECT_CALL(mock, DoThis());

  mock.DoThis();    // OK
  mock.DoThat(5);   // Test fails here
}
```

---

## Troubleshooting

### Problem: Unpleasant Warning Messages for Uninteresting Calls
If your test output is cluttered with warnings like `Uninteresting mock function call`, consider:

- Switching to `NiceMock` if those calls are expected but not relevant.
- Adding explicit `EXPECT_CALL(...).Times(AnyNumber())` for methods where calls are allowed without verification.
- Reviewing your expectations to ensure important calls are explicitly expected.

### Problem: StrictMock Causes Unexpected Test Failures
If `StrictMock` breaks your tests unexpectedly, it means some calls are unanticipated:

- Add needed `EXPECT_CALL`s for all intended calls.
- Use `NaggyMock` or `NiceMock` instead if you want less strict enforcement.

---

End of GoogleMock Strictness and Uninteresting Calls documentation.
