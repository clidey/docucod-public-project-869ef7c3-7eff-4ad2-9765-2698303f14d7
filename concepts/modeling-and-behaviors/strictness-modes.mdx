---
title: "Mock Strictness Modes"
description: "Understand the differences between NiceMock, NaggyMock, and StrictMock, and how these modes control the handling of unexpected or uninteresting calls. Strategically choose strictness to balance developer feedback and test intent."
---

# Mock Strictness Modes

Understand how GoogleMock’s mock strictness modes — NiceMock, NaggyMock, and StrictMock — affect the handling of uninteresting and unexpected calls in your tests. This guide helps you strategically use strictness modes to balance developer feedback and test intent.

---

## Introduction to Mock Strictness Modes

When you create a mock object in GoogleMock, methods that are called without explicit expectations (`EXPECT_CALL`) are called **uninteresting calls**. How these calls are treated depends on the mock’s strictness mode:

| Mode       | Behavior on Uninteresting Calls              | Default Behavior          |
|------------|----------------------------------------------|--------------------------|
| NiceMock   | Silently allows without warnings             | Planned future default    |
| NaggyMock  | Logs warnings but allows calls                | Current default           |
| StrictMock | Treats uninteresting calls as test failures  | Used selectively          |

NaggyMock will notify you when unexpected calls happen but won't fail the test. StrictMock treats such calls as errors, making it the most restrictive mode. NiceMock suppresses warnings, helping keep tests clean when uninteresting calls are acceptable.


## Why Mock Strictness Matters

In real-world testing, managing how strictly you enforce call expectations improves test maintainability and developer experience:

- **NiceMock** is best when you want to ignore unanticipated calls that don't affect test correctness.
- **NaggyMock** (default today) helps catch unintentional calls with warnings but doesn’t fail tests.
- **StrictMock** enforces that every call is either expected or explicitly allowed, helping catch unexpected interactions but increasing test brittleness.

Choosing the appropriate mode enables controlled feedback from GoogleMock during testing without overwhelming developers with noise or missed errors.

<Warning>
Use strict mocks only when exact interaction verification is critical. Overuse can lead to brittle tests needing frequent updates for harmless changes.
</Warning>


## Using the Mock Strictness Mode Templates

GoogleMock provides three template classes that you can use to create mocks with desired strictness behavior. Each is a subclass of your mock class and inherits its constructors, so you can pass constructor arguments directly.

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Suppose MockFoo is your mock class
NiceMock<MockFoo> nice_foo;      // Suppresses warnings on uninteresting calls
NaggyMock<MockFoo> naggy_foo;    // Logs warnings on uninteresting calls
StrictMock<MockFoo> strict_foo;  // Test fails on uninteresting calls
```

You can construct them with arguments if your mock has non-default constructors:

```cpp
NiceMock<MockBar> nice_bar("example");
StrictMock<MockBar> strict_bar('x', 'y', "foo", "bar", 1, 2, "a", "b", true, false);
```


## Behavior Details

### Uninteresting Calls

These calls are to mock methods without `EXPECT_CALL` specifications.

- **NiceMock**: Calls proceed silently, no logged warnings.
- **NaggyMock**: Logs a warning message for each uninteresting call.
- **StrictMock**: Fails the test on any uninteresting call.

### Unexpected Calls

These are calls where there *are* `EXPECT_CALL`s specifying some calls for this method, but the particular call does not match any expectation.

- All modes treat unexpected calls as errors (test failures).

### Handling Calls That Delete the Mock Object

Even if a call deletes the mock object itself, strictness modes maintain their behavior safely. For example, StrictMock will still report an error on uninteresting calls that result in the mock's deletion.


## Practical Usage Examples

### Suppressing Warnings on Uninteresting Calls

```cpp
NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, ImportantMethod());
...
mock_foo.UnexpectedMethod();  // Allowed silently
```

### Getting Warnings for Unexpected Calls (Default)

```cpp
NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, ImportantMethod());
...
mock_foo.UnexpectedMethod();  // Warning logged
```

### Failing Tests on Any Uninteresting Calls

```cpp
StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, ImportantMethod());
...
mock_foo.UnexpectedMethod();  // Test failure
```


## Choosing the Right Strictness

- Use **NiceMock** to reduce noise and maintain clean test output, especially when your test doesn’t need strict interaction enforcement.
- Use **NaggyMock** when initially developing or debugging tests, as warnings inform you of possibly missing expectations.
- Use **StrictMock** when correctness requires that *all* calls must be anticipated and accounted for in expectations.

<Note>
Currently, mock objects behave like NaggyMock by default but this will change to NiceMock in the future, favoring more maintainable tests.
</Note>


## Common Pitfalls and Tips

- **Do not nest strictness wrappers**, e.g., `NiceMock<StrictMock<...>>` is unsupported.
- Strictness modes only affect mock methods **defined directly** in the mock class using `MOCK_METHOD`. Methods defined in base classes might not respect strictness mode.
- Ensure your mock class has a **virtual destructor**; otherwise, strictness modes might not behave as expected.


## Quick Reference

| Strictness Mode | Uninteresting Call Behavior           | Unexpected Call Behavior | Usage Scenario                        |
|-----------------|--------------------------------------|--------------------------|-------------------------------------|
| NiceMock        | Ignored, no warnings                  | Test failure             | Relaxed tests, reduce noise          |
| NaggyMock       | Logs warnings (default behavior)     | Test failure             | Default, catching missing expectations|
| StrictMock      | Test failure                         | Test failure             | Strict enforcement of calls          |


## Troubleshooting

### No Warnings For Uninteresting Calls?
Make sure you are not unknowingly using NiceMock or have lowering verbose level.

### Tests Fail Due to Unexpected Calls?
Review your `EXPECT_CALL` statements to ensure they cover the calls made with correct matchers.

### Behavior Seems Ignored?
Check that your mock methods are defined **directly** with `MOCK_METHOD` in your mock class, and that your mock class has a virtual destructor.


## Summary

Mock strictness modes give you control over how GoogleMock treats calls without explicit expectations. Select the mode that fits your testing goals—balancing alertness to unexpected calls against avoiding noisy, brittle tests.


---

## Additional Resources

- [GoogleMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mock Methods & Classes](../api-reference/gmock-mocking-framework/mock-methods-and-classes.md)
- [Expectations, Actions & Sequences](../api-reference/gmock-mocking-framework/expectations-actions-and-sequences.md)
- [Strictness Modes & Behaviors](../api-reference/gmock-mocking-framework/strictness-modes-and-behaviors.md)
- [Mocking Architecture Concept](../concepts/core-architecture/mocking-architecture.md)

---

## Code Diagram: Mock Strictness Mode Relationships

```mermaid
classDiagram
    class MockClass {
        <<interface>>
        + ...mock methods...
    }
    class NiceMock {
        +AllowsUninterestingCalls()
    }
    class NaggyMock {
        +WarnUninterestingCalls()
    }
    class StrictMock {
        +FailOnUninterestingCalls()
    }

    NiceMock --|> MockClass : inherits
    NaggyMock --|> MockClass : inherits
    StrictMock --|> MockClass : inherits

    note for NiceMock
      Suppresses warnings for uninteresting calls
    end note

    note for NaggyMock
      Logs warnings for uninteresting calls
      Default mock behavior today
    end note

    note for StrictMock
      Makes uninteresting calls failures
      Strict enforcement
    end note
```

---

## Step-by-Step: Using NiceMock

<Steps>
<Step title="Define your mock class">
Use the `MOCK_METHOD` macros to define mocked methods in your mock class.
</Step>
<Step title="Create a NiceMock object">
Wrap your mock class with `NiceMock` to suppress warnings on uninteresting calls.

```cpp
NiceMock<MockFoo> nice_mock;
```
</Step>
<Step title="Set expectations only for interesting calls">
Call `EXPECT_CALL` *only* on the calls critical to your test.
</Step>
<Step title="Run your code">
Use your `NiceMock` as a normal mock inside your tests. The uninteresting calls won’t warn.
</Step>
<Step title="Verify expectations">
GoogleMock auto-verifies expectations on destruction; or you can force it using `Mock::VerifyAndClearExpectations()`.
</Step>
</Steps>

---

## Tips for Effective Use

- **Start with NaggyMock** during initial test development to catch omitted expectations.
- **Switch to NiceMock** when tests stabilize to reduce output noise.
- **Use StrictMock** sparingly when you want to ensure no surprising behavior slips through.
- Remember to add catch-all expectations with `.Times(AnyNumber())` if unexpected calls of certain methods are allowed.

---

## Related Concepts

- **Uninteresting vs Unexpected Calls:** Uninteresting calls have no expectation set; unexpected calls violate existing expectations.
- **Default Mock Behavior:** Currently NaggyMock, planned to move to NiceMock.
- **Mock Method Definition Requirements:** Strictness modes apply only to mock methods directly defined in your mock class using `MOCK_METHOD`.




