---
title: "Test Cases, Test Suites, and Test Discovery"
description: "Explore how GoogleTest organizes tests using test suites and cases, including the data structures that power test grouping, hierarchy, and execution order. Learn about the introspection and automatic test discovery mechanisms."
---

# Test Cases, Test Suites, and Test Discovery

## Introduction

Understanding how GoogleTest organizes tests internally is essential for mastering test development and execution. This page explores the core data models GoogleTest employs to group, identify, and execute tests systematically.

We'll survey the definitions and relationships of *test cases*, *test suites*, *tests*, and how GoogleTest performs *automatic discovery* and introspection of tests. This knowledge helps you structure tests effectively and troubleshoot issues related to test registration and execution.

---

## Key Terminology: Test, Test Suite, and Test Case

Historically, GoogleTest terminology bore some ambiguity, but this page clarifies definitions and their modern meanings.

| Concept                  | GoogleTest Term      | ISTQB Term        | Description                                      |
|--------------------------|---------------------|-------------------|-------------------------------------------------|
| The smallest executable unit, an individual test function | Test                  | Test Case         | A single check based on input and expected output.|
| A group of related tests grouped by common fixture or functionality | Test Suite (formerly Test Case) | Test Suite | Logical grouping of tests for organization and shared state.|
| Entire program of test suites and their tests          | Test Program          | Test Set/Test Suite Collection | The executable or library that runs tests.         |

> **Note:** GoogleTest is moving toward the consistent use of **Test Suite** instead of the deprecated term **Test Case**. The older APIs using TestCase are deprecated.

## Test Structure and Grouping

### Tests and Test Suites

- A **test** is a C++ function declared using the `TEST()` or `TEST_F()` macro (or variants).
- Tests are organized into **test suites**, which group logically related tests, frequently sharing common setup via test fixtures.
- Test suite names correspond to fixture classes for tests declared with `TEST_F()`.
- GoogleTest allows multiple tests with identical *test names* as long as they belong to different test suites.

### Test Fixtures

- When repeated setup or shared objects are needed across multiple tests, a **test fixture** class inherits from `testing::Test`.
- Tests using fixtures are declared with `TEST_F()`, gaining access to fixture members and setup/teardown hooks.

### Naming Conventions

GoogleTest requires that test suite and test names use valid C++ identifiers without underscores (`_`) for compatibility and to prevent naming conflicts under the hood.

Example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

class QueueTest : public testing::Test {
 protected:
  // Fixture members and SetUp()/TearDown()
};

TEST_F(QueueTest, DequeueWorks) {
  ...
}
```

## Automatic Test Discovery

GoogleTest uses a compile-time registration mechanism to discover tests without requiring explicit enumeration:

1.  Every `TEST()` or `TEST_F()` invocation expands into code that registers the test with GoogleTest's internal global registry.
2.  Tests are collected before running any user code.
3.  At runtime, `RUN_ALL_TESTS()` iterates over all registered test suites and runs each test inside them.

This model means users only write `TEST` macros; GoogleTest manages discovery and execution.

> This avoids common pitfalls of manual test registration and makes the system self-updating as new tests are added.

## Data Model Internals

At runtime, GoogleTest represents the test hierarchy with the following core components:

- **TestSuite:** Represents a group of tests. It contains a name, a fixture type (if any), and a collection of tests.
- **TestInfo:** Represents an individual test. It holds the test's name, file location, source line, and pointers to test functions or fixture factories.

Each test result is tracked separately for reporting and filtering.

The internal test registry keeps a list of all TestSuites for the current executable.

## How Tests Are Executed

Upon calling `RUN_ALL_TESTS()`:

1. GoogleTest initializes and collects all registered tests.
2. For each TestSuite, it runs all contained tests.
3. For tests using fixtures, a fresh fixture instance is created per test.
4. SetUp and TearDown methods are called for test fixtures appropriately.
5. Assertion results determine pass/failure states.

## Introspection: Enumerating Known Tests

GoogleTest offers API methods to introspect the tests available at runtime. For example:

```cpp
const auto& unit_test = *testing::UnitTest::GetInstance();
for (int i = 0; i < unit_test.total_test_suite_count(); ++i) {
  const testing::TestSuite* suite = unit_test.GetTestSuite(i);
  std::cout << "Test Suite: " << suite->name() << std::endl;
  for (int j = 0; j < suite->total_test_count(); ++j) {
    const testing::TestInfo& info = *suite->GetTestInfo(j);
    std::cout << "  Test: " << info.name() << std::endl;
  }
}
```

This enables custom tooling or filtering.

## Diagram: Test Suite and Test Relationships

```mermaid
graph TD
  subgraph "Test Program"
    TS1[TestSuite: FactorialTest]
    TS2[TestSuite: QueueTest]

    T1[Test: HandlesZeroInput]
    T2[Test: HandlesPositiveInput]
    T3[Test: IsEmptyInitially]
    T4[Test: DequeueWorks]

    TS1 --> T1
    TS1 --> T2

    TS2 --> T3
    TS2 --> T4
  end

  %% Execution flow
  RUN_RUN[RUN_ALL_TESTS()] -->|Runs| TS1
  RUN_RUN -->|Runs| TS2

  classDef suite fill:#bbf,stroke:#000,stroke-width:1px;
  classDef test fill:#eef,stroke:#666,stroke-width:1px;
  class TS1,TS2 suite;
  class T1,T2,T3,T4 test;
```

## Common Pitfalls and Best Practices

- **Avoid underscores in test suite and test names.** Underscores can cause internal naming collisions and build errors.
- **Group logically related tests into test suites** to promote maintainability and run selective test groups.
- **Use test fixtures (`TEST_F`) for shared setup, but beware that each test gets a fresh fixture instance.**
- **Trust GoogleTest's automatic test registration**â€”do not try to call or register tests manually.
- **Use introspection APIs to build custom test runners or diagnostics when needed.**

## Troubleshooting Test Discovery Issues

If you notice your tests do not run or appear missing:

- Make sure `TEST()` or `TEST_F()` macros are used correctly and not inside excluded sections.
- Confirm that your test binary links with the GoogleTest library properly.
- Ensure your build scripts include all necessary source files where tests are defined.
- Verify that test names comply with the naming rules.

## Summary

This page anchored your understanding of GoogleTest's core test data model components: how individual tests (`TestInfo`) group into suites (`TestSuite`), and how the framework uses automatic registration to discover and manage these tests. With this knowledge, you can organize your tests logically and diagnose common test execution or discovery problems effectively.

---

For further exploration, consider looking at these related topics:

* [GoogleTest Primer](primer.md) for building simple tests.
* [Test Framework Overview](concepts/core-architecture/test-framework-overview.md) for system architecture context.
* [Assertions Reference](docs/reference/assertions.md) to understand assertion handling.
* [Creating and Using Mock Objects](guides/mocking-techniques/creating-mocks.md) to integrate mocks in tests.

---

*This documentation is maintained on GitHub: [GoogleTest repository](https://github.com/google/googletest)*

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googletest/include/gtest/gtest.h", "range": "all"},{"path": "googletest/src/gtest-all.cc", "range": "all"}]}/>