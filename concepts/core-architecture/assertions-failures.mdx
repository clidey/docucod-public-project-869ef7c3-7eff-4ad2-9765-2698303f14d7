---
title: "Assertions, Failures, and Reporting"
description: "Review how GoogleTest structures assertions and manages test failures—distinguishing between fatal and non-fatal errors. This page explains their impact on test execution and result reporting, enabling users to design robust, readable, and actionable tests."
---

# Assertions, Failures, and Reporting

Understanding how GoogleTest manages assertions and test failures empowers you to write clearer tests, anticipate execution flow, and interpret test reports effectively. This page focuses on the fundamental distinction between fatal and non-fatal failures, their impact during test execution, and how GoogleTest captures and reports these outcomes.

---

## Overview of Assertions and Failures

At the core of GoogleTest’s verification power are _assertions_. These are macros that validate conditions during test execution, such as `EXPECT_EQ` or `ASSERT_TRUE`.

GoogleTest distinguishes between two primary kinds of failures:

- **Fatal Failures**: Reported by `ASSERT_` macros (e.g., `ASSERT_EQ`). They immediately abort the current function, preventing further execution within it.
- **Non-Fatal Failures**: Reported by `EXPECT_` macros (e.g., `EXPECT_EQ`). They report a failure but allow the current function to continue.

This behavior directly affects how tests proceed after an assertion fails.

### Fatal Failures: Immediate Interruption

When a fatal failure occurs, GoogleTest:

- Logs the failure message along with file and line information.
- Aborts the current function (typically the test body) immediately.
- Skips the code following the failure in the same function.

This is useful when further test steps depend on a crucial condition being true (e.g., a pointer being non-null).

### Non-Fatal Failures: Continuing Execution

When a non-fatal failure occurs:

- The failure is recorded and logged similarly.
- Test execution continues in the current function.

This approach allows multiple related checks to be performed in a single test, revealing more failures in one run and improving debugging efficiency.

<Tip>
Use `EXPECT_*` assertions when you want your tests to continue after failure to collect several failure points.
Use `ASSERT_*` assertions when continuing the test after failure could lead to crashes or sabotage subsequent checks.
</Tip>

## Assertion Macros Overview

GoogleTest provides _pairs_ of macros testing the same conditions but differing by failure severity:

| Macro Type          | Behavior                                    | Effect on Test Execution           |
|---------------------|---------------------------------------------|----------------------------------|
| `EXPECT_*`          | Non-fatal failure                           | Logs failure, continues          |
| `ASSERT_*`          | Fatal failure                              | Logs failure, aborts current func |
| Other Auxiliaries   | `FAIL()`, `ADD_FAILURE()`, `SUCCEED()`     | Special control/failure signals |

The full list and usage details of assertions is in the [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md).

## Examples

```cpp
// Non-fatal failures allow test to continue:
TEST(VectorTest, ElementsAreCorrect) {
  const std::vector<int> v = GetVector();
  ASSERT_EQ(v.size(), 3) << "Expected 3 elements";  // Fatal failure aborts test here if false
  EXPECT_EQ(v[0], 1) << "First element wrong";      // Non-fatal failures allow next checks
  EXPECT_EQ(v[1], 2);
  EXPECT_EQ(v[2], 3);
}
```

In this example, if the vector size is incorrect, the test aborts immediately to avoid invalid access. Otherwise, all element values are checked, potentially emitting multiple failure messages.

## Detailed Failure Reporting

When an assertion fails, GoogleTest reports:

- The **type of failure**: fatal or non-fatal.
- The **assertion** that failed and the **expressions** being tested.
- The **actual vs expected values**, when applicable.
- **Custom failure messages**, if provided via streaming.

This detailed reporting aids in rapid diagnosis. For instance:

```
value_test.cc:42: Failure
Expected equality of these values:
  a
  b
    Which is: 5
[  FAILED  ] VectorTest.ElementsAreCorrect
```

## Explicit Reporting Macros

GoogleTest also provides tailored macros for controlling failure reporting directly:

| Macro            | Generates                        | Effect                  |
|------------------|--------------------------------|-------------------------|
| `SUCCEED()`      | Explicit success                | No test failure logged   |
| `FAIL()`         | Fatal failure                  | Aborts current func     |
| `ADD_FAILURE()`  | Non-fatal failure              | Continue execution      |

These are useful in complex test logic when manual success/failure signaling is needed.

## Impact on Test Execution Flow

### Fatal Failures Abort Current Function

- Upon fatal failure, the current function returns immediately.
- This means any clean-up code after that assertion will be skipped.
- This behavior avoids continuing tests that might cause undefined behavior.

<Tip>
If you want to check multiple conditions and still stop your test function early after critical failure, use `ASSERT_*` appropriately.
</Tip>

### Non-Fatal Failures Allow Continuation

- Multiple checks can accumulate multiple failure points.
- This enables more comprehensive test execution and reports.

### Important: Fatal Failures Abort Current Function Only

They **do not terminate the entire test program or test suite**.

Consider a helper function:

```cpp
void Validate(int x) {
  ASSERT_GT(x, 0);  // Will abort Validate() if false
  // further validation logic
}

TEST(FooTest, HandlesValidation) {
  Validate(-1);  // Despite ASSERT failure above, test continues after this call.
  // This may cause crashes if unchecked.
}
```

Here, `ASSERT_GT` aborts `Validate()`, but the test continues executing after returning from `Validate`, potentially causing invalid behavior if subsequent code depends on `x > 0`.

Use `ASSERT_NO_FATAL_FAILURE()` to check that a function does not cause fatal failures.

## Checking for Failures Programmatically

GoogleTest offers functions to check if the current test has failed:

| Function                 | Returns `true` if...                      |
|--------------------------|------------------------------------------|
| `HasFatalFailure()`      | A fatal failure occurred in the test     |
| `HasNonfatalFailure()`   | A non-fatal failure occurred              |
| `HasFailure()`           | Any failure (fatal or non-fatal) occurred |
| `IsSkipped()`            | The current test was skipped              |

These help in controlling test flow dynamically.

## Skipping Tests

Tests can be skipped at runtime using `GTEST_SKIP()`:

```cpp
TEST(SkipExample, SkipsTest) {
  if (!PrerequisiteMet()) {
    GTEST_SKIP() << "Prerequisite not met";
  }
  // rest of test skipped if above triggers
}
```

Skipped tests neither pass nor fail, and are reported as such.

## Adding Context: Scoped Traces

If assertions are in helper functions or loops, adding traces can clarify context:

```cpp
SCOPED_TRACE("Checking element " << i);
EXPECT_EQ(vec[i], expected);
```

This appends contextual information to failure messages, making debugging easier.

Learn more in [Adding Traces to Assertions](https://github.com/google/googletest/blob/main/docs/advanced.md#adding-traces-to-assertions).

## Recording Additional Properties

Tests can record key-value pairs for rich reporting via `RecordProperty()`:

```cpp
RecordProperty("MaxCount", ComputeMaxCount());
```

These are included in XML or JSON reports.

## How Failures Influence Reporting

GoogleTest aggregates failures across tests and test suites:

- Tests with any failure are marked failed.
- Test suites with any failed test are marked failed.
- Non-fatal failures appear inline but don't abort tests.
- Fatal failures abort only the current test function.

Reports include the number of passed, failed, skipped, and disabled tests.

### XML and JSON Reports

GoogleTest supports detailed XML/JSON reports including failure messages, assertion locations, and recorded properties. Use the `--gtest_output=xml:filename` flag to generate reports.

## Troubleshooting Common Failure Scenarios

<AccordionGroup title="Assertion Failures and Test Flow">
<Accordion title="Fatal Failures Don't Abort Entire Test Program">
If you expect an `ASSERT_*` failure to fully abort a test but code after the call still executes, remember `ASSERT_*` aborts only the current function. To propagate failure, check `HasFatalFailure()` after the subfunction call and return early.
</Accordion>
<Accordion title="Skipped Tests Execution">
Tests skipped with `GTEST_SKIP()` stop execution immediately. Verify that `GTEST_SKIP()` is not placed in non-void returning functions or constructors, or else it won't compile.
</Accordion>
<Accordion title="Multiple Failure Messages in One Test">
Use `EXPECT_*` assertions when you want to accumulate multiple failure messages in a test run. Fatal failures (`ASSERT_*`) will stop further checks.
</Accordion>
</AccordionGroup>

## Best Practices for Assertions

- Favor `EXPECT_*` for assertions that allow the test to continue after failure.
- Use `ASSERT_*` when a failed assertion invalidates further tests in the same function.
- Provide custom failure messages via streaming `<<` for clearer reporting.
- Avoid placing fatal assertions in non-void functions or constructors.
- Use `SCOPED_TRACE` to add context when calling assertions from helper subroutines or loops.
- Use `ASSERT_NO_FATAL_FAILURE` to verify that a function does not contain fatal assertions.

## Related Documentation

- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md): Full list of assertion macros and usage.
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md#assertions): Basic introduction to assertions.
- [Advanced Topics: Adding Traces and Failure Handling](https://github.com/google/googletest/blob/main/docs/advanced.md#adding-traces-to-assertions)
- [Test Lifecycle and Execution Flow](https://github.com/google/googletest/blob/main/concepts/core-architecture/test-lifecycle.mdx): How assertion failures integrate with test execution.
- [Running Test Programs: Advanced Options](https://github.com/google/googletest/blob/main/docs/advanced.md#running-test-programs-advanced-options): Flags that affect failing tests behavior.

---

This page prepares you to design robust tests with GoogleTest's assertion model; understanding failure types is fundamental to controlling test flow and interpreting reports.

For in-depth coverage of assertions and failure semantics, see also the [Assertions and Failure Handling API Reference](https://github.com/google/googletest/blob/main/api-reference/core-apis/assertions.mdx).

---

## Summary Diagram

```mermaid
flowchart TD
  StartTest["Start Test Function"] --> Assertion{Is Assertion}
  Assertion -->|EXPECT_* (Non-fatal)| LogFailure("Log non-fatal failure") --> Continue
  Assertion -->|ASSERT_* (Fatal)| LogFailureFatal("Log fatal failure") --> AbortFunction["Abort current function"]
  Continue --> NextStatement["Execute next statement in function"]
  NextStatement --> EndTest["End Test Function"]
  AbortFunction --> EndTest
```

This simple flowchart captures the core difference between fatal and non-fatal assertions in user test functions.


---

# Troubleshooting Tips

- **Problem:** Test continues after a failed `ASSERT_*`.
  - **Cause:** `ASSERT_*` aborts *only* the current function, not the entire test.
  - **Solution:** After calling a helper function with fatal assertions, check `HasFatalFailure()` and return early if true.

- **Problem:** Fatal assertions in constructors or destructors cause crashes or undefined behavior.
  - **Cause:** GoogleTest disallows fatal assertions in constructors or destructors.
  - **Solution:** Move assertions to `SetUp()`/`TearDown()` methods of test fixtures.

- **Problem:** Failure messages don’t include context for which call failed in loops or helpers.
  - **Solution:** Use `SCOPED_TRACE()` around calls to add context to failure messages.

- **Problem:** Need to verify a function contains no fatal assertion failures.
  - **Solution:** Use `ASSERT_NO_FATAL_FAILURE(func_call());`

---