---
title: "Nice, Naggy, and Strict Mocking Modes"
description: "Learn about the different strictness modes—NiceMock, NaggyMock, StrictMock—and how they affect the handling of uninteresting function calls in your tests. Understand the rationale behind each and when to choose them."
---

# Nice, Naggy, and Strict Mocking Modes

Understanding how GoogleMock treats calls to mock methods that have no explicit expectations helps you write clearer and more maintainable tests. GoogleMock provides three key *strictness modes* — `NiceMock`, `NaggyMock`, and `StrictMock` — that govern the behavior of *uninteresting calls* (calls to mock methods without any `EXPECT_CALL`). This page explains the differences between these modes, their rationale, and guidance on when to use each.

---

## What Are Strictness Modes?

In GoogleMock, a mock method call can either be **interesting** or **uninteresting**:

- An **interesting call** matches one or more defined expectations (`EXPECT_CALL`s).
- An **uninteresting call** has no matching expectation.

Strictness modes define how uninteresting calls are handled:

- **NiceMock** suppresses warnings and lets uninteresting calls pass quietly.
- **NaggyMock** warns whenever an uninteresting call happens.
- **StrictMock** treats uninteresting calls as test failures.

Currently, GoogleMock mock objects behave like `NaggyMock` by default, but this may change to `NiceMock` in the future as it fosters better test maintainability.


## How Strictness Modes Work

Each strictness mode is implemented as a class template wrapping a mock class:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_mock_foo;
NaggyMock<MockFoo> naggy_mock_foo;
StrictMock<MockFoo> strict_mock_foo;
```

These wrappers subclass the user-defined mock class (e.g. `MockFoo`) and alter the default handling of uninteresting calls.

### Behavior of Each Mode

| Mode        | Uninteresting Call Behavior                                           | Typical Usage                                                       |
|-------------|----------------------------------------------------------------------|-------------------------------------------------------------------|
| NiceMock    | Silences warnings. Uninteresting calls execute their default action silently. | When you want cleaner test output and are less concerned about unexpected calls. This is ideal for most stable test suites. |
| NaggyMock   | Prints warnings on uninteresting calls but allows tests to continue.          | The current default. Useful during development or debugging to catch possibly missing expectations. |
| StrictMock  | Fails the test on any uninteresting call immediately.                         | When you want to enforce very strict verification and catch *all* unexpected interactions. Useful for very precise behavior enforcement. |

### Example Scenario

Imagine you have a mock class `MockFoo` with methods `DoThis()` and `DoThat(bool)`, but you only want to set an explicit expectation on one method call.

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Using NaggyMock (default behavior):
NaggyMock<MockFoo> foo;
EXPECT_CALL(foo, DoThis());
foo.DoThis();        // OK, matches expectation
foo.DoThat(true);   // WARNING: Uninteresting call

// Using NiceMock:
NiceMock<MockFoo> foo_nice;
EXPECT_CALL(foo_nice, DoThis());
foo_nice.DoThis();       // OK
foo_nice.DoThat(true);   // Quietly allowed, no warning

// Using StrictMock:
StrictMock<MockFoo> foo_strict;
EXPECT_CALL(foo_strict, DoThis());
foo_strict.DoThis();     // OK
foo_strict.DoThat(true); // TEST FAILURE: Uninteresting call
```

This demonstrates distinct ways uninteresting calls are handled.

---

## Using Strictness Modes Effectively

### When to Use NiceMock

- You want to ignore uninteresting calls and reduce test output noise.
- When the test's focus is on *some* interactions, and other calls are not important.
- When you want more maintainable tests that don’t break unnecessarily during refactors.

### When to Use NaggyMock

- During the early test development phase, to get warnings about potentially missing expectations.
- When diagnosing flaky or overly permissive tests.
- When you want reminders of unexpected calls but do not want tests to fail immediately.

### When to Use StrictMock

- When you require exhaustive verification of all interactions.
- Ideally used sparingly for critical components where unexpected calls represent real errors.
- Use when strict contract enforcement is necessary.

<Note>
`StrictMock` can make tests fragile to internal implementation changes; use with caution.
</Note>

---

## How to Use Strictness Wrappers in Your Mocks

To create a strictness-controlled mock, template the wrapper with your mock class:

```cpp
// Assuming MockFoo is your mock class
NiceMock<MockFoo> nice_mock;
NaggyMock<MockFoo> naggy_mock;
StrictMock<MockFoo> strict_mock;
```

You can pass constructor arguments just like constructing the base mock:

```cpp
NiceMock<MockBar> nice_mock_bar("arg1", 42);
```

### Important details

- You cannot nest strictness wrappers. For example, `NiceMock<StrictMock<MockFoo>>` is not supported.
- The wrapped mock class constructor is invoked with your supplied arguments as usual.
- Strictness wrappers only affect *uninteresting* calls, not unexpected calls (calls with expectations but arguments that don't match).

---

## Common Pitfalls & Best Practices

<Warning>
Strictness modes only affect methods defined directly using `MOCK_METHOD` in your mock class. Mock methods inherited from base classes may not be affected reliably.
</Warning>

<Tip>
Ensure your mock class has a virtual destructor to avoid undefined behavior when using strictness wrappers.
</Tip>

### Avoid Overly Strict Tests

StrictMock forces errors on uninteresting calls, which can make refactoring harder. Prefer `NiceMock` for general use to keep tests maintainable.

### Use NaggyMock for Debugging

Switch to `NaggyMock` to identify missing or unplanned interactions when tests behave unexpectedly.

### Suppressing Warnings Selectively

If most calls are fine but a few uninteresting calls trigger warnings, consider specifying `EXPECT_CALL(...).Times(AnyNumber())` on those methods or use `NiceMock`.

### Verifying Mock Behavior

No matter which strictness mode you choose, always set expectations explicitly on the calls you want to verify. Use `EXPECT_CALL` for calls you expect, and let other calls be handled per the mock's strictness mode.

---

## How Strictness Modes Affect Test Output

GoogleMock's verbosity flag (`--gmock_verbose`) influences the detail of messages printed for mock calls.

- At **info** level, detailed messages and stack traces are printed for expected and uninteresting calls.
- At **warning** level (default), warnings are shown for uninteresting calls on `NaggyMock`, but not on `NiceMock`.
- At **error** level, only errors are printed, suppressing warnings.

StrictMock converts uninteresting calls into errors, so they show up regardless.

---

## Summary

Strictness modes provide control over how GoogleMock handles uninteresting calls, shaping the balance between helpful test feedback and noise. Choosing the right mode affects test clarity, maintainability, and strictness of verification.

---

## Related Links

- [Mock Class Definition and MOCK_METHOD Macros](https://google.github.io/googletest/reference/mocking-framework/mock-class-definition)
- [Setting Expectations: EXPECT_CALL and ON_CALL](https://google.github.io/googletest/reference/mocking-framework/setting-expectations)
- [Strict, Naggy, and Nice Mocks](https://google.github.io/googletest/api/gmock_nice_strict.html) (API Reference)
- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Best Practices](https://google.github.io/googletest/guides/real-world-workflows/mocking-best-practices)

---

## Appendix: Simplified User Flow Diagram

```mermaid
graph TD
  Start([Start Test with Mock Object]) --> ChooseMode{Choose Strictness Mode}
  ChooseMode -->|NiceMock| Nice["NiceMock: Silences Warnings"]
  ChooseMode -->|NaggyMock| Naggy["NaggyMock: Warns on Uninteresting Calls"]
  ChooseMode -->|StrictMock| Strict["StrictMock: Fails on Uninteresting Calls"]

  subgraph Mock Call Handling
    direction LR
    Nice --> UC1(Uninteresting Call) --> Allowed1["Allowed: Executes default action quietly"]
    Naggy --> UC2(Uninteresting Call) --> Warn2["Warning printed"] --> Allowed2["Allowed: Executes default action"]
    Strict --> UC3(Uninteresting Call) --> Fail3["Test Failure: Uninteresting call treated as error"]
  end

  ExpectedCall["Call matches EXPECT_CALL"] --> Pass["Call accepted"]
  UnexpectedCall["Call doesn't match EXPECT_CALL"] --> Error["Test Failure: Unexpected call"]

  Start -->|Calls Mock Methods| CallMock["Call Mock Method"]
  CallMock -->|Matches EXPECT_CALL| ExpectedCall
  CallMock -->|No matching EXPECT_CALL| UnintCall{Is there an EXPECT_CALL on method?}

  UnintCall -->|No| 
  ChooseMode
  UnintCall -->|Yes but args don't match| UnexpectedCall

  Pass --> End([Continue Test Execution])
  Allowed1 --> End
  Allowed2 --> End
  Fail3 --> End
  Error --> End
```
```
