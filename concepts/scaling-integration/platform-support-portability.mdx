---
title: "Platform Support and Portability"
description: "Explore the cross-platform capabilities of GoogleTest and GoogleMock, from OS support to compiler and build tool compatibility, facilitating adoption in diverse environments."
---

# Platform Support and Portability

GoogleTest and GoogleMock are designed to deliver reliable and maintainable C++ testing and mocking capabilities across a wide range of development platforms. This page helps you understand the breadth of platform support, portability features, and mechanisms that ensure consistent behavior regardless of the underlying environment.

---

## Overview

The cross-platform design of GoogleTest and GoogleMock enables developers to write tests once and run them consistently across multiple operating systems, compiler toolchains, and architectures. Portability is foundational to facilitating adoption in diverse environments—ranging from desktop OSes to embedded systems.

This page focuses on the following key aspects:

- Supported Operating Systems and Platforms
- Compiler and Language Standard Requirements
- Threading and Synchronization Abstractions
- Filesystem Utilities and I/O Portability
- Regular Expression Engine Selections
- Logging and Diagnostic Consistency
- Configuration and Customization Points

---

## Supported Platforms

GoogleTest and GoogleMock officially support a broad set of operating environments aligned with Google's [Foundational C++ Support Policy](https://opensource.google/documentation/policies/cplusplus-support). Supported platforms include:

- **Desktop and Server OSes:** Linux, macOS, Windows (Desktop, MinGW), FreeBSD, NetBSD, OpenBSD, Solaris
- **Mobile and Embedded OSes:** iOS, Windows Mobile, Android, Windows RT, Windows Phone, ESP8266, ESP32, Xtensa, QNX
- **Other Platforms:** AIX, HP-UX, IBM Z/OS, Fuchsia, Haiku, GNU/Hurd

Support for these platforms incorporates necessary adaptations, including OS-specific system calls, native file handling, and threading primitives. For a detailed compatibility matrix and currently supported version specifics, refer to the [Supported Platforms matrix](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md).

---

## Compiler and Language Standards

GoogleTest and GoogleMock require a compiler that supports at least **C++17**. Commonly supported compiler families include:

- GCC (various modern versions)
- Clang (including Apple Clang)
- MSVC (Visual Studio 2017 Update 3 or later)
- Intel Compiler

The code enforces this minimum standard and emits errors if outdated environments are detected, ensuring reliable behavior and modern language feature availability.

---

## Threading and Synchronization

Concurrency support is fundamental for running parallel tests and ensuring thread safety within GoogleTest and GoogleMock.

### Threading Primitives

- On platforms with pthread support (`GTEST_HAS_PTHREAD`), GoogleTest uses pthread mutexes and condition variables.
- On Windows platforms (including MinGW), native Windows synchronization primitives such as critical sections are used.
- If no threading support exists, a dummy no-op implementation is provided.

### Thread-Local Storage

For thread-local variables used internally, GoogleTest employs:

- C++11 thread-local storage where available.
- Platform-specific implementations for Windows and pthreads.

These abstractions provide consistent semantics regardless of the underlying threading model.

---

## Filesystem Portability

To enable file and directory operations across platforms, GoogleTest abstracts common operations like:

- `FOpen()`, `FReopen()`, and `FDOpen()` for opening file streams.
- `Stat()`, `RmDir()`, and `IsDir()` for file system inspection and directory removal.

Under Windows, wide-character API variants are used transparently to support Unicode paths. On POSIX systems, standard libc calls are wrapped. Embedded platforms or restricted OS environments may have limited functionality but will provide no-op or stub implementations where necessary.

---

## Regular Expressions

GoogleTest can use multiple regex implementations depending on platform capabilities and configurations:

- **RE2 via Abseil**: On platforms where Abseil is available (`GTEST_HAS_ABSL`), RE2 is the default engine offering high performance and safety.
- **POSIX Extended Regex**: Available on POSIX-compliant environments without Abseil.
- **Simple Regex**: A fallback lightweight regex implementation used when others are not available.

This selection ensures flexibility, balancing correctness, performance, and portability.

---

## Logging and Diagnostics

Logging utilities are provided for consistent message formatting and severity levels across platforms:

- Levels include INFO, WARNING, ERROR, and FATAL.
- Logs include contextual information like file name and line number.
- Logging behavior respects platform constraints and supports output redirection where available.

Where necessary, platform-specific considerations are handled, such as suppressing warnings or adapting printf-style formatting.

---

## Configuration Macros and Customization

GoogleTest and GoogleMock provide several macros and customization points to fine-tune portability behavior:

- Environment feature flags (e.g., `GTEST_HAS_EXCEPTIONS`, `GTEST_HAS_RTTI`, `GTEST_HAS_MUTEX_AND_THREAD_LOCAL_`) automatically detect the JNI, RTTI, exception, and threading capabilities.
- Users can define or override macros in custom headers for logging, mutexes, notifications, temp directory paths, stack trace handling, and flag management.
- Flags for Abseil integration (`GTEST_HAS_ABSL`) enable enhanced command line argument parsing and flag declarations.

For users integrating GoogleTest in new environments, these points are essential for adapting internal mechanisms to platform specifics.

---

## Practical Tips and Best Practices

- **Verify Supported Platforms:** Before adoption, verify your platform is supported or has a compatible fallback (e.g., dummy threading) via the provided macros.
- **Compiler Setup:** Ensure your compiler conforms to the C++17 standard or later and supports required features like exceptions and RTTI.
- **Threading Considerations:** On embedded or constrained platforms without threading support, expect limited concurrency and disable parallel test execution.
- **Filesystem Access:** Validate file and directory permissions and path encodings, especially when testing across Windows and POSIX distinctions.
- **Custom Configuration:** Use custom headers (`custom/gtest-port.h`, `custom/gmock-port.h`) for facility overrides or to add platform-specific flags.
- **Dependencies:** For optimal regex support and flag handling, consider building with Abseil (`GTEST_HAS_ABSL`).

---

## Troubleshooting Portability Issues

Some common issues and their remedies include:

- **Compilation Errors on Old MSVC:** Ensure Visual C++ 2015 or newer is used.
- **Missing pthread Symbols:** On Unix-like platforms, confirm pthreads libraries are linked.
- **Incorrect Path Separators:** Use GoogleTest's path separator macros (`GTEST_PATH_SEP_`) to write portable path handling in tests.
- **Flag Parsing Failures:** If Abseil flags are disabled, fall back to GoogleTest's internal flag system.

Consult related troubleshooting documentation and platform support matrix for detailed guidance.

---

## Diagram: Platform Support Layers

```mermaid
graph TD
  subgraph Supported Platforms
    Linux["Linux"]
    MacOS["macOS/iOS"]
    Windows["Windows Desktop/Mobile"]
    BSD["FreeBSD/NetBSD/OpenBSD"]
    Embedded["Embedded/RTOS"]
    Other["Other OSes"]
  end

  subgraph Compiler and Language
    GCC["GCC (>= C++17)"]
    Clang["Clang"]
    MSVC["MSVC 2017+"]
  end

  subgraph Threading & Sync
    PThread["POSIX threads"]
    WinSync["Windows Critical Sections"]
    DummyThread["No-op (Dummy) Threading"]
  end

  subgraph Filesystem Abstractions
    FileAPIs["FOpen, Stat, RmDir"]
    WideCharSupport["Windows Unicode Paths"]
  end

  subgraph Regex Engine
    RE2["RE2 (Abseil)"]
    POSIXRegex["POSIX Regex"]
    SimpleRegex["Simple Regex"]
  end

  subgraph Logging
    StdErr["Stderr"]
    SeverityLevels["INFO/WARNING/ERROR/FATAL"]
  end

  Linux --> GCC
  MacOS --> Clang
  Windows --> MSVC
  Windows --> WinSync
  Linux --> PThread
  BSD --> PThread
  Embedded --> DummyThread

  GCC --> RegexSelection["Regex Selection"]
  Clang --> RegexSelection
  MSVC --> RegexSelection

  RegexSelection --> RE2
  RegexSelection --> POSIXRegex
  RegexSelection --> SimpleRegex

  Linux --> FileAPIs
  Windows --> WideCharSupport

  Logging -.-> Linux
  Logging -.-> Windows

  PThread -.-> Threading API
  WinSync -.-> Threading API
  DummyThread -.-> Threading API

  RegexSelection -.-> Regex Engine

  FileAPIs -.-> Filesystem

  Logging -.-> Logging APIs
```

---

## References and Further Reading

- [Supported Platforms Matrix](https://github.com/google/oss-policies-info/blob/main/foundational-cxx-support-matrix.md)
- [System Requirements](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/system-requirements.md)
- [Portability in GoogleTest API Reference](https://github.com/google/googletest/blob/main/include/gtest/internal/gtest-port.h)
- [Customization Points for Porting](https://github.com/google/googletest/blob/main/include/gtest/internal/custom/README.md)
- [Troubleshooting Setup Issues](https://github.com/google/googletest/blob/main/docs/getting-started/troubleshooting-faq/troubleshooting-setup-issues.md)

---

## Next Steps

For practical application, do the following:

- Verify your environment against supported platforms and compiler requirements.
- Configure threading and filesystem APIs as appropriate using customization points.
- If targeting a new or niche platform, implement or override necessary abstractions per the customization guides.
- Explore building and running tests with GoogleTest and GoogleMock to validate your setup.

For hands-on walkthroughs, consult the [Installation and Setup guide](../guides/getting-started/installing-and-setting-up.md) and the [Portability and Platform Support API Reference](../api-reference/platform-tools-runtime/portability-and-platform-support.md).

---

GoogleTest and GoogleMock’s comprehensive portability infrastructure allows developers to achieve consistency and reliability in automated C++ testing across a wide spectrum of platforms and build environments. By understanding these foundational concepts, you can unlock robust, scalable testing workflows no matter where your code runs.
