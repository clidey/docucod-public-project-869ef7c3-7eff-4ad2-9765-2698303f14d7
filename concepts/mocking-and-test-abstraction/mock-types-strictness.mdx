---
title: "Strict, Naggy, and Nice Mocks"
description: "Learn about the philosophy behind different levels of mock strictness in GoogleMock. Grasp the concepts of 'Nice', 'Naggy', and 'Strict' mocks, their impact on test maintainability, and when to use each for clear, intention-revealing tests."
---

# Strict, Naggy, and Nice Mocks

GoogleMock offers flexibility in how mock objects react to calls that the tests do not explicitly expect. These different modes—**Strict**, **Naggy**, and **Nice** mocks—represent increasing tolerance levels for uninteresting calls and help balance test rigor with maintainability and noise level. Understanding these types empowers you to write clear and focused tests with intention-revealing semantics.

---

## Understanding Uninteresting Calls

In GoogleMock, a call to a mock method is called **uninteresting** if there is no matching `EXPECT_CALL` set for it. That is, the test does not *expect* the call nor defines any behavior explicitly for it.

- Uninteresting calls are permitted by default but can produce warnings or failures depending on mock strictness.
- Such calls execute the method's default action, which may be a default return value or no-op for void functions.

Uninteresting calls represent code paths that you have not expressed interest in verifying. How GoogleMock reacts to these calls is controlled by the mock strictness level.

---

## Mock Strictness Levels

GoogleMock provides three helper templates that wrap mock classes to automatically adjust how uninteresting calls are handled:

### 1. NiceMock<T>

`NiceMock` is the most permissive mode:

- Suppresses all warnings for uninteresting calls.
- Allows uninteresting calls to proceed silently.
- Still verifies expected calls as usual.

Use cases:
- To reduce noise when you don’t want to verify all mock interactions.
- When testing parts of the system where some downstream calls are irrelevant or too verbose.

```cpp
using ::testing::NiceMock;

NiceMock<MockMyInterface> nice_mock;
EXPECT_CALL(nice_mock, ImportantMethod());
nice_mock.ImportantMethod();  // Verified
nice_mock.OtherMethod();      // No warning, uninteresting call
```


### 2. NaggyMock<T>

`NaggyMock` represents the standard (default) GoogleMock behavior:

- Prints warnings whenever an uninteresting call is made.
- Does not cause test failures for uninteresting calls.
- Expected calls must still match exactly.

Use cases:
- Useful during test development or debugging when you want to be alerted about unexpected mock method calls that you might have forgotten to expect.

```cpp
using ::testing::NaggyMock;

NaggyMock<MockMyInterface> naggy_mock;
EXPECT_CALL(naggy_mock, ImportantMethod());
naggy_mock.ImportantMethod();  // Verified
naggy_mock.OtherMethod();      // Warning, but test continues
```

### 3. StrictMock<T>

The most rigorous level:

- Treats uninteresting calls as test failures.
- Ensures that every call to the mock has a corresponding expectation.
- Helps catch unintended calls that may indicate test or code issues.

Use cases:
- Critical sections of tests where every interaction must be explicitly verified.
- When you want to be certain no unexpected interactions occur.

```cpp
using ::testing::StrictMock;

StrictMock<MockMyInterface> strict_mock;
EXPECT_CALL(strict_mock, ImportantMethod());
strict_mock.ImportantMethod();  // Verified
strict_mock.OtherMethod();      // Test failure: uninteresting call
```

---

## Choosing the Right Mock Type

Making the right choice depends on your testing goals and the trade-offs:

| Mock Type   | Behavior on Uninteresting Calls           | When to Use                                 |
|-------------|-------------------------------------------|---------------------------------------------|
| NiceMock    | Silently accepts without warnings         | Most tests; when less noise is preferred   |
| NaggyMock   | Emits warnings but continues test          | During test debugging and development       |
| StrictMock  | Fails test immediately on uninteresting calls | Critical verification, to avoid silent misses |

**Best Practice:**

- Default to `NiceMock` to avoid test spam and brittleness.
- Use `NaggyMock` while writing or debugging tests when you want feedback on unexpected calls.
- Reserve `StrictMock` for scenarios where strict behavioral contracts must be enforced.

---

## Construction and Usage

`NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` are subclasses of the mock class `T`. They forward constructor arguments transparently, making it easy to switch strictness without modifying your mocks.

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), (override));
  explicit MockFoo(int x);
};

NiceMock<MockFoo> nice_foo(42);  // Calls MockFoo(42)
NaggyMock<MockFoo> naggy_foo(42);
StrictMock<MockFoo> strict_foo(42);
```

---

## Common Pitfalls and Caveats

- Strictness modifiers only work with mock methods defined directly in the mock class using `MOCK_METHOD` macros. Methods inherited from base classes may not be affected.
- Nesting different strictness wrappers (`NiceMock<StrictMock<T>>`) is not supported.
- The mock class should have a virtual destructor for proper cleanup when using strictness wrappers.

---

## Diagnosing Uninteresting Calls

If you encounter warnings or failures due to uninteresting calls:

- Verify if you should set explicit `EXPECT_CALL`s for those calls.
- If calls are irrelevant, consider switching to `NiceMock` to suppress warnings.
- Use `--gmock_verbose=info` to enable detailed logging of mock calls and expectations for debugging.

---

## Example: Switch Between Strictness Levels

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& text));
};

void TestWithNiceMock() {
  NiceMock<MockPrinter> mock;
  // No warnings on uninteresting calls
  mock.Print("Hello");
}

void TestWithNaggyMock() {
  NaggyMock<MockPrinter> mock;
  // Warning emitted if Print is called unexpectedly
  mock.Print("Hello");
}

void TestWithStrictMock() {
  StrictMock<MockPrinter> mock;
  EXPECT_CALL(mock, Print("Hello"));
  mock.Print("Hello");  // OK
  mock.Print("World");  // Test fails due to unexpected call
}
```

---

## How It Works Internally

When a mock object of these wrapper types is created, GoogleMock registers a call reaction with the mocking framework:

- For `NiceMock`, it allows uninteresting calls silently.
- For `NaggyMock`, it logs warnings but allows calls.
- For `StrictMock`, it causes uninteresting calls to fail tests.

When the mock object is destroyed, the registration is unregistered, reverting to previous behavior.

---

## Summary

GoogleMock's strictness wrappers help you tune the balance between strictness and noise in your tests:

- **NiceMock**: Quietly accepts all calls, focusing tests on explicitly expected interactions.
- **NaggyMock** (default): Warns on uninteresting calls.
- **StrictMock**: Fails test on any uninteresting call, enforcing full specification.

Choosing the right strictness level boosts both productivity and test reliability.

---

## Related Documentation

- [Mocking with GoogleMock Guide](https://google.github.io/googletest/guides/core-workflows/mocking-with-gmock.html)
- [Nice, Naggy, and Strict Mocks API Reference](https://google.github.io/googletest/reference/mocking-api/nice-naggy-strict-mocks.html)
- [Understanding Expectations: EXPECT_CALL](https://google.github.io/googletest/reference/mocking-api/setting-expectations.html)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [gMock Cookbook section on Nice, Naggy, and Strict](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)

---

## Troubleshooting

<AccordionGroup title="Common Issues with Mock Strictness Levels">
<Accordion title="No Warning or Failure on Unexpected Calls?">
Make sure you are using a strictness wrapper: by default, mocks are naggy and only warn. To enforce failures, wrap your mock with `StrictMock<T>`.
</Accordion>
<Accordion title="Warning Not Suppressed by NiceMock?">
`NiceMock` only suppresses warnings for mock methods defined directly with `MOCK_METHOD` in the class `T`. Methods defined in base classes may still produce warnings.
</Accordion>
<Accordion title="Nesting Strictness Wrappers Causes Compile Errors">
Nesting wrappers like `NiceMock<StrictMock<T>>` is unsupported. Use only one strictness modifier.
</Accordion>
<Accordion title="Destructors Not Virtual Leads to Undefined Behavior">
Ensure your mock class has a virtual destructor to avoid memory leaks or undefined behavior when using strictness wrappers.
</Accordion>
</AccordionGroup>

---

## Additional Tips

- Use `Mock::AllowLeak(&mock_object)` if you intentionally want to leak a mock and suppress related verification errors.
- Use the `--gmock_verbose` flag (`info`, `warning`, `error`) to control verbosity of mock call reporting.
- Wrap expectations in [`InSequence`](https://google.github.io/googletest/reference/mocking-api/in-sequence.html) to enforce call order.

---