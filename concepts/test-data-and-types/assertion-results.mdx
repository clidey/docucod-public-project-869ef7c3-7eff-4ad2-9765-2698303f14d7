---
title: "Assertions, Results, and Reporting"
description: "Understand the data models that capture the outcome of assertions and tests, including how results, failure messages, and stack traces are constructed, combined, and surfaced to users. Learn how assertion results are structured for both core and user-defined checks."
---

# Assertions, Results, and Reporting

GoogleTest offers a robust data model that captures the outcomes of assertions and tests, efficiently structures and presents failure messages and stack traces, and manages reporting to users. This guide dives into how GoogleTest represents assertion results, combines failure information, and exposes test outcomes for inspection and reporting.

---

## Understanding Assertion Results

At the heart of GoogleTest's assertion system lies the `AssertionResult` class. This class encapsulates whether an assertion succeeded or failed and holds an optional failure message.

### Key Features of `AssertionResult`

- **Dual State:** It records a boolean success state—true for success, false for failure.
- **Detailed Messages:** For failed assertions (and optionally for successes), it stores rich explanatory messages.
- **Streaming Interface:** Supports streaming additional message content via the `<<` operator, enabling expressive and contextual failure details.

### Creating Assertion Results

Two factory functions produce assertion result objects:

- `AssertionSuccess()` – returns a successful assertion result.
- `AssertionFailure()` – returns a failed assertion result, to which users can stream descriptive messages.

### Example of Predicate with Detailed Messages

```cpp
::testing::AssertionResult IsEven(int n) {
  if ((n % 2) == 0)
    return ::testing::AssertionSuccess() << n << " is even";
  else
    return ::testing::AssertionFailure() << n << " is odd";
}
```

When used in `EXPECT_TRUE(IsEven(x))`, a failure will print a message like:

```none
Value of: IsEven(x)
  Actual: false (5 is odd)
Expected: true
```

### Negation Handling

`AssertionResult` supports logical negation, enabling meaningful failure messages for negative assertions like `EXPECT_FALSE()`.

---

## How Test Results are Structured

Each executed test produces a `TestResult` object that aggregates all outcomes and properties related to that test.

### Components of a `TestResult`

- **Test Part Results:** Individual assertion results or explicit success/failure events are stored as `TestPartResult` objects.
- **Test Properties:** User-defined key-value pairs related to the test, such as metadata or measured values.
- **Death Test Count:** Tracks the number of death tests executed within the test.
- **Timing Info:** Records timestamps for test start and elapsed time.

### TestPartResult Overview

Each `TestPartResult` captures:

- Outcome Type: Success, Non-fatal Failure, Fatal Failure, or Skip.
- Source Location: File name and line number where the assertion or failure occurred.
- Summary and Detailed Messages: Human-readable diagnostic information, including failure explanations and optional stack traces.

### Querying Test Results

The `TestResult` class provides helpful methods to query test status, such as:

- `Passed()`: Whether the test passed without failures.
- `Failed()`: Whether the test had any failures.
- `Skipped()`: Whether the test was skipped during execution.
- `HasFatalFailure()`: Whether any fatal failures occurred.
- `HasNonfatalFailure()`: Whether there were non-fatal failures.

Users can access individual `TestPartResult`s and `TestProperty`s by index.

---

## Combining Failure Messages and Stack Traces

When a test assertion fails, GoogleTest constructs failure messages combining:

- The user-streamed custom message.
- The automated message describing what was expected and the actual result.
- A stack trace, if available and relevant, appended to assist debugging.

This combination ensures users get immediate context about failures without having to trace through code.

---

## Reporting and Messaging

GoogleTest's reporting system prints concise and informative messages by:

- Printing file and line of failure.
- Showing expression values and specific failure details.
- Using colored output (configurable via flags).
- Grouping results by test suites.

### Event Listeners

GoogleTest notifies registered event listeners during the test lifecycle:

- Test start and end
- Assertion results
- Test suite lifecycle events
- Global environment setup and teardown

This extensible event system enables customized reporting formats, integration with CI systems, and enhanced tooling.

---

## User-Flows with Assertion Results

1. **Writing an Assertion:** Users write assertions such as `EXPECT_TRUE(IsEven(val))`.
2. **Evaluating the Assertion:** The `AssertionResult` is constructed indicating success or failure.
3. **Capturing Failure Messages:** If failed, a descriptive message is streamed.
4. **Aggregating Results:** GoogleTest stores `TestPartResult` entries within the current `TestResult`.
5. **Test Completion:** On test completion, GoogleTest summarizes the passed, failed, and skipped assertions.
6. **Reporting:** Messages are printed to the console or saved as XML/JSON reports.

---

## Practical Tips & Best Practices

- **Use `AssertionResult` for custom predicates:** Return detailed messages instead of plain `bool` to provide clear failure explanations.
- **Stream messages sparingly:** Include only necessary context to avoid clutter.
- **Check test results programmatically:** Use `HasFatalFailure()` or `HasFailure()` in subroutines to handle assertion failures gracefully.
- **Leverage event listeners:** For advanced reporting needs, implement or extend listeners.
- **Avoid assertion side-effects:** Arguments to assertions are evaluated exactly once; avoid modifying state within them.

---

## Common Pitfalls

- **Ignoring returned values of assertion functions:** Always check results in complex test helpers to avoid silent failures.
- **Mixing `ASSERT_` and `EXPECT_` unintentionally:** Remember `ASSERT_` aborts the current function, which may skip cleanup or other checks.
- **Providing ambiguous messages:** Make custom messages descriptive to quickly diagnose issues.
- **Skipping `InitGoogleTest()` before `RUN_ALL_TESTS()`:** Initialization is essential to proper flag parsing and reporting.

---

## Integration with the Test Lifecycle

Assertion results contribute directly to the overall test outcome managed by the test runner:

- Tests are grouped into suites (`TestSuite`), each with its aggregated result.
- Each test's `TestResult` informs the suite and overall test run status.
- Properties can be recorded anytime during test execution for additional metadata.

The data model supports sophisticated features like parameterized tests, typed tests, and death tests by layering assertion results and metadata.

---

## Summary

Understanding how GoogleTest structures assertion results and test reporting equips you to write clearer tests, diagnose failures efficiently, and extend reporting capabilities.

---

## Additional Resources

- [Assertions Reference](../reference/assertions.md) for detailed macro usages.
- [Advanced GoogleTest Topics - Assertions](../advanced.md#predicate-assertions-for-better-error-messages) for deep dives into custom predicates and failure message construction.
- [Test Lifecycle and Reporting](concepts/architecture-overview/test-lifecycle.mdx) explains test execution flow.
- [TestEventListener API](../reference/testing.md#TestEventListener) for customizing reporting and integration.

---

## Example: Custom Assertion Using `AssertionResult`

```cpp
::testing::AssertionResult IsEven(int n) {
  if (n % 2 == 0) {
    return ::testing::AssertionSuccess() << n << " is even";
  } else {
    return ::testing::AssertionFailure() << n << " is odd";
  }
}

TEST(NumberTest, CheckEven) {
  int value = 3;
  EXPECT_TRUE(IsEven(value));  // Will print detailed failure message
}
```

This approach surpasses simple Boolean checks, allowing informative test outcomes.

---