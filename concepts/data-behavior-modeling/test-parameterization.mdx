---
title: "Parameterization: Value and Type-Based Testing"
description: "Understand the concepts of value-parameterized and type-parameterized tests. See how these mechanisms drive comprehensive and robust test coverage across different data sets and types."
---

# Parameterization: Value and Type-Based Testing

GoogleTest allows you to write tests that automatically run multiple times with different input values or types through its powerful parameterization features. This approach enhances your test coverage, improves test clarity, and eliminates duplication.

---

## Understanding Parameterized Tests

At its core, parameterized testing is a technique that executes the same test logic repeatedly using different parameters. GoogleTest supports two key forms:

- **Value-Parameterized Tests:** Run the same test code with varying input values.
- **Type-Parameterized Tests:** Run the same test logic for different data types.

Both types of tests help you ensure your code behaves correctly across a range of inputs and types without duplicating test code.

## Value-Parameterized Tests (VPTs)

### What are Value-Parameterized Tests?

Value-Parameterized Tests let you specify a test fixture that varies over a set of values. Your test code uses these values, accessible via `GetParam()`, to drive different test runs, each with a distinct parameter.

### Writing a Value-Parameterized Test

1. **Define a test fixture** class that inherits from `::testing::TestWithParam<T>`, where `T` is the parameter type. This fixture can have common setup logic.

```cpp
class MyTest : public ::testing::TestWithParam<int> {
 //... common setup ...
};
```

2. **Write tests with `TEST_P` macro** using this fixture. Use `GetParam()` to access the parameter.

```cpp
TEST_P(MyTest, IsEven) {
  int value = GetParam();
  EXPECT_EQ(value % 2, 0);
}
```

3. **Instantiate the test suite** with specific values.

```cpp
INSTANTIATE_TEST_SUITE_P(EvenNumbers, MyTest, ::testing::Values(2, 4, 6, 8));
```

Each test case runs once with each parameter.

### Parameter Generators

GoogleTest offers several built-in parameter generators to provide test parameters easily:

| Generator                        | Description                                            |
|---------------------------------|--------------------------------------------------------|
| `Range(begin, end [, step])`     | Generates sequence `[begin, begin+step, ..., end)` (endexclusive).|
| `Values(v1, v2, ..., vN)`        | Generates explicit parameters v1 through vN.            |
| `ValuesIn(container|begin,end)`  | Uses values from a container or iterator range.         |
| `Bool()`                        | Generates `false` and `true`.                           |
| `Combine(g1, g2, ..., gN)`      | Produces Cartesian product tuples from multiple generators. |
| `ConvertGenerator<T>`            | Casts generated parameters to a desired type or converts them using a conversion function. |

Example of combining generators:

```cpp
INSTANTIATE_TEST_SUITE_P(
    CombinedTests, MyTest,
    ::testing::Combine(::testing::Values(1,2), ::testing::Bool()));
```

### Using `GetParam()`

Inside your `TEST_P` code, use `GetParam()` to extract the current parameter value. This makes it straightforward to write parameter-driven assertions.

### Naming Tests

Test instances generated by parameterization have names with an index. You can also provide a custom name generator function via the last parameter of `INSTANTIATE_TEST_SUITE_P`.

### Common Pitfalls

- You must instantiate your test suite with parameters, or no tests will run.
- Arguments in `INSTANTIATE_TEST_SUITE_P` are evaluated after `main()` starts, affecting dynamic test discovery.
- Avoid overly complex parameters with heavy construction costs, as they increase test runtime.

---

## Type-Parameterized Tests (TPTs)

### What are Type-Parameterized Tests?

Type-Parameterized Tests allow running the same test logic against different types, which is crucial when testing class or function templates.

### Defining a Type-Parameterized Test Suite

1. Define a template test fixture:

```cpp
template <typename T>
class MyTypedTest : public ::testing::Test {
 public:
  using ValueType = T;
};
```

2. Use `TYPED_TEST_SUITE` to register the fixture and specify types:

```cpp
using MyTypes = ::testing::Types<int, float, double>;
TYPED_TEST_SUITE(MyTypedTest, MyTypes);
```

3. Write tests using `TYPED_TEST`:

```cpp
TYPED_TEST(MyTypedTest, IsZeroInitially) {
  TypeParam value{};
  EXPECT_EQ(value, 0);
}
```

The test runs once for each type listed.

### Type-Parameterized Tests with Registration

You can also use the `_P` suffix variants (`TYPED_TEST_SUITE_P`, `TYPED_TEST_P`, and registration macros) to declare tests independently from the types, enabling multiple test instantiations for different type lists.

### Benefits

- Avoids duplicating test code for multiple types.
- Helps ensure consistent behavior across generic code.
- Integrates with the rest of GoogleTest seamlessly.

---

## Using Parameterization to Improve Test Coverage

### Expanding Test Coverage

Parameterized tests let you cover many input scenarios with a single test definition. By running your test across varied data sets, you can catch edge cases and bugs early.

### Reducing Boilerplate

Without parameterization, you'd need to write many repetitive tests differing only by input values or types. Parameterization centralizes test logic and reduces maintenance overhead.

### Promoting Maintainable Tests

When your tests verify behavior for a diverse set of inputs, failures indicate exactly which parameter caused the problem, making debugging faster.

---

## Practical Tips and Best Practices

- **Use descriptive test names:** When `INSTANTIATE_TEST_SUITE_P` is used, prefer custom name generators for clarity in test output.
- **Limit side effects in tests:** Parameterized tests run multiple times, so avoid global states that could leak between runs.
- **Use `ConvertGenerator` for complex parameters:** It lets you supply custom parameter types not directly supported by generators.
- **Use `Combine` for multi-parameter tests:** To test combinations of parameters, `Combine` yields tuples automatically.
- **Balance test granularity:** Avoid testing every possible combination when unreasonable; focus on meaningful variations.

---

## Example: Value-Parameterized Testing

```cpp
#include <gtest/gtest.h>

class IsEvenTest : public ::testing::TestWithParam<int> {};

TEST_P(IsEvenTest, ReturnsTrueForEvenNumbers) {
    int n = GetParam();
    EXPECT_EQ(n % 2, 0);
}

INSTANTIATE_TEST_SUITE_P(EvenNumbers,
                         IsEvenTest,
                         ::testing::Values(2, 4, 6, 8, 10));
```

Each `TEST_P` instantiation tests that the parameter is even.

## Example: Type-Parameterized Testing

```cpp
#include <gtest/gtest.h>

template <typename T>
class IsZeroTest : public ::testing::Test {};

using MyTypes = ::testing::Types<int, double, char>;

TYPED_TEST_SUITE(IsZeroTest, MyTypes);

TYPED_TEST(IsZeroTest, DefaultValueIsZero) {
  TypeParam value{};
  EXPECT_EQ(value, 0);
}
```

GoogleTest runs the test for each type: `int`, `double`, and `char`.

---

## Troubleshooting Common Issues

### No Tests Run
- Forgot to instantiate the parameterized test suite.
- Parameter generator yields no values.

### Ambiguous Overload Errors in Parameterized Tests
- Specify parameter types clearly using `ConvertGenerator` or explicit conversions.

### Unexpected Test Names
- Use custom name generators in `INSTANTIATE_TEST_SUITE_P` for clarity.

### Stateful Side Effects between Test Runs
- Ensure tests do not rely on mutable static or global state.

---

## Further Learning and References

- [GoogleTest Primer](primer.md) — Learn basics of writing tests.
- [gMock for Dummies](gmock_for_dummies.md) — Understand mocking which pairs well with parameterized tests.
- [Mocking Reference](reference/mocking.md) — Explore how mocking integrates with parameterized testing.
- [Testing Reference](reference/testing.md) — Details macros for declaring parameterized tests.
- [gMock Cookbook](gmock_cook_book.md) — Advanced mocking recipes.

---

GoogleTest’s parameterization features unlock scalable and expressive test coverage, driving robust and maintainable unit tests across diverse datasets and types.


