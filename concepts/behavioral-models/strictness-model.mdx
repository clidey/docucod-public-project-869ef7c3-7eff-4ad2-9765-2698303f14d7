---
title: "Strictness: Nice, Naggy, and Strict Mocks"
description: "Understand the different levels of enforcement provided by GoogleMock—NiceMock, NaggyMock, and StrictMock—so you can choose the right balance between flexibility and enforcement for your test suite."
---

# Strictness: Nice, Naggy, and Strict Mocks

Understand the different levels of enforcement provided by GoogleMock—NiceMock, NaggyMock, and StrictMock—so you can choose the right balance between flexibility and enforcement for your test suite.

---

## Introduction

When developing tests with GoogleMock, you define behaviors and expectations on mock objects. However, not all calls to mock methods are equally important: some are *expected* (you explicitly say they should happen), others are *uninteresting* (calls without explicit expectations). How GoogleMock treats these uninteresting calls can greatly affect your test’s strictness and feedback.

GoogleMock offers three primary strictness levels for mocks:

- **Nice Mocks**: Suppress warnings for uninteresting calls.
- **Naggy Mocks** (default): Warn on uninteresting calls.
- **Strict Mocks**: Fail tests on uninteresting calls.

Choosing the right level enables you to balance noise and enforcement according to your testing needs.

---

## What Are Nice, Naggy, and Strict Mocks?

### 1. NiceMock

A `NiceMock<T>` is a subclass of your mock class `T` that allows *any* uninteresting calls without emitting warnings or failures. This means your tests won’t be noisy about calls you don’t care about.

**Why use NiceMock?**
- When you want to focus only on verifying specific interactions.
- When you want to silence non-critical warnings.
- When you want more maintainable and less brittle tests.

**Example:**
```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> nice_foo;
EXPECT_CALL(nice_foo, DoThis());
nice_foo.DoThis(); // Expected call
nice_foo.DoThat(); // Uninteresting call, no warning
```

### 2. NaggyMock

A `NaggyMock<T>` is like your raw mock `T` and currently is the *default* behavior of unstrict mocks. It prints a *warning* when uninteresting calls occur but does not fail the test.

**Use NaggyMock when:**
- You want to be notified of possibly unintentional calls.
- You are actively developing or debugging tests.

**Example:**
```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> naggy_foo;
naggy_foo.DoThis(); // Expected call or warning if uninteresting
```

### 3. StrictMock

A `StrictMock<T>` is a subclass of your mock class that treats *all* uninteresting calls as errors—tests will fail immediately if the mock receives calls without matching expectations.

**Use StrictMock when:**
- You want to ensure *exactly* what calls happen.
- You want your tests to catch *any* unexpected interactions.

**Example:**
```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis(); // Passes
strict_foo.DoThat(); // Fails - unexpected uninteresting call
```

---

## How Strictness Affects Uninteresting Calls

GoogleMock distinguishes *uninteresting* and *unexpected* calls:

- **Uninteresting calls:** No matching `EXPECT_CALL()` expectation.
- **Unexpected calls:** There are some `EXPECT_CALL()`s, but none match the call arguments.

| Strictness Level | Uninteresting Calls | Unexpected Calls        |
|------------------|---------------------|------------------------|
| NiceMock         | Ignored silently    | Always cause test failure |
| NaggyMock        | Print warnings      | Always cause test failure |
| StrictMock       | Cause test failure  | Always cause test failure |

Strictness levels only control *uninteresting* calls, not *unexpected* calls.

---

## Usage and Syntax

To wrap your mock class with a strictness level, simply declare it as:

```cpp
NiceMock<MockFoo> nice_foo(args...);   // Suppress warnings
NaggyMock<MockFoo> naggy_foo(args...); // Defaults, warns
StrictMock<MockFoo> strict_foo(args...); // Fail on unexpected calls
```

They behave as subclasses of your mock class, forwarding all constructors appropriately.

### Important Notes

- These wrappers work only for mock methods defined using the `MOCK_METHOD` macros *directly* in your mock class. Methods inherited from base classes may not be affected.
- Nesting these wrappers (e.g., `NiceMock<StrictMock<MockFoo>>`) is not supported.
- Your mock class should have a virtual destructor to ensure correct behavior.

---

## Practical Examples

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

void Example() {
  NiceMock<MockFoo> nice;
  NaggyMock<MockFoo> naggy;
  StrictMock<MockFoo> strict;

  // No expectation, uninteresting call
  nice.DoThis();   // No warning or error
  naggy.DoThis();  // Warning printed
  // strict.DoThis();  // Test fails

  EXPECT_CALL(strict, DoThis());
  strict.DoThis();  // OK
}
```

---

## Verifying Mocks and Handling Leaks

Regardless of strictness, GoogleMock automatically verifies expectations when mocks are destructed.

If you want to suppress warnings about *leaked* mocks (mocks not deleted before test ends), use:

```cpp
Mock::AllowLeak(&mock_object);
```

This prevents false positives when a mock deliberately outlives the test scope.

---

## Selecting the Right Strictness Level

| Scenario                                   | Recommended Strictness      |
|--------------------------------------------|----------------------------|
| Development and debugging                   | NaggyMock (default)         |
| Tests where only some calls matter          | NiceMock                   |
| Very tight control, no unanticipated calls | StrictMock                 |

---

## Best Practices and Tips

- **Prefer NiceMocks in most test suites** to keep tests maintainable and reduce noise.
- **Use NaggyMocks while debugging** to uncover potential missed expectations.
- **Reserve StrictMocks for critical code paths** where unexpected calls are bugs.
- To silence warnings on specific methods instead of the whole mock, add catch-all expectations using `EXPECT_CALL(mock, Method(_)).Times(AnyNumber());`.
- Verify expectations explicitly before clearing mocks with `Mock::VerifyAndClearExpectations(&mock)` when needed.

---

## Troubleshooting

### You still get warnings on uninteresting calls with NiceMock
- Ensure mock methods causing warnings are defined with `MOCK_METHOD` directly in the mock class.
- Check that you are actually constructing your mock as `NiceMock<YourMock>`.

### Unexpected calls cause test failures even in NiceMock
- Unexpected calls (calls that don't match any `EXPECT_CALL` matcher) always fail regardless of strictness.
- Add proper `EXPECT_CALL` with suitable matchers to cover expected variants.

### Errors related to mock class constructors
- Ensure your mock class has a virtual destructor.
- Confirm strictness wrappers are passed constructor arguments properly.

---

## How It Works Internally (Conceptual)

Each strictness wrapper registers the mock object’s behavior concerning uninteresting calls by:

- NiceMock allowing uninteresting calls without feedback.
- NaggyMock warning about uninteresting calls.
- StrictMock failing on uninteresting calls.

This state is maintained internally using a mutex-protected global registry keyed by mock object addresses.

On destruction, the wrapper cleans up registrations, preserving thread safety.

(Note: The user does not need to manage these internals but understanding can help interpret behavior.)

---

## Related Topics

- [Using Mocks in Tests](https://google.github.io/googletest/gmock_for_dummies.html#using-mocks-in-tests)
- [Mocking Reference](../api-reference/core-apis/mocking-and-methods.html#NiceStrictNaggy)
- [Managing Expectations and Call Ordering](../api-reference/advanced-behaviors/expectations-verification.html)
- [Troubleshooting Mock Strictness](docs/gmock_faq.md#i-get-a-warning-uninteresting-function-call-encountered-default-action-taken-should-i-panic)

---

## Summary

GoogleMock's NiceMock, NaggyMock, and StrictMock wrappers let you easily control how your tests react to uninteresting (unexpected) mock calls. They provide a flexible system balancing strictness and noise, improving test readability, maintainability, and error detection.

Use `NiceMock` to suppress noise when you only care about certain interactions, `NaggyMock` to stay informed about possibly unintended calls during development, and `StrictMock` to fail fast on unplanned calls in critical tests.

Harness these tools wisely to make your GoogleMock tests precise, clear, and maintainable.

---


---

## Appendix: Code Usage Examples

```cpp
// Defining a mock class
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Using a NiceMock that allows uninteresting calls without warnings
NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, DoThis());
nice_mock.DoThis();   // OK
nice_mock.DoThat(true); // Allowed but no expectation

// Using a NaggyMock that prints warnings on uninteresting calls
NaggyMock<MockFoo> naggy_mock;
naggy_mock.DoThis();   // Warns if no EXPECT_CALL

// Using a StrictMock that fails on uninteresting calls
StrictMock<MockFoo> strict_mock;
EXPECT_CALL(strict_mock, DoThis());
strict_mock.DoThis();  // OK
// strict_mock.DoThat(true); // Fails test - unexpected uninteresting call
```

---

## See Also

- [GoogleMock Cheat Sheet - Nice, Naggy, Strict](docs/gmock_cheat_sheet.md#nicestrictnaggy)
- [gMock for Dummies - Using Mocks](docs/gmock_for_dummies.md#mocking-and-using-mocks)
- [Mocking Reference - Strictness](../api-reference/core-apis/mocking-and-methods.html#NiceStrictNaggy)

---

<AccordionGroup title="Common Questions">
<Accordion title="Why does NiceMock only work for MOCK_METHODs defined directly in my mock class?">
NiceMock, NaggyMock, and StrictMock rely on the implementation details of GoogleMock that hook into the mock methods defined with the `MOCK_METHOD` macro inside the class being wrapped. If the method is declared or mocked in a base class, the wrapper sometimes cannot intercept uninteresting calls correctly due to C++ inheritance and compiler behavior. This is a known limitation.
</Accordion>
<Accordion title="Can I nest strictness wrappers like NiceMock<StrictMock<MockFoo>>?">
No. Nesting strictness wrappers is not supported and may cause unexpected behavior or compile errors.
</Accordion>
<Accordion title="How does this affect multi-threaded tests?">
Strictness enforcement is thread-safe; GoogleMock protects internal data with mutexes. Actions execute on the thread invoking the mock method.
</Accordion>
</AccordionGroup>