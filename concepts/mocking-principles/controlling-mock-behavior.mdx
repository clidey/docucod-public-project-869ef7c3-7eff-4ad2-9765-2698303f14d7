---
title: "Controlling and Categorizing Mock Behavior"
description: "Examine how GoogleMock enables explicit control over how uninteresting calls are handled with concepts like NiceMock, NaggyMock, and StrictMock. Learn when and how to use these strategies to maintain test intent and reduce noise."
---

# Controlling and Categorizing Mock Behavior

GoogleMock provides powerful tools to explicitly control how uninteresting calls to mock methods are handled. This control helps maintain the clarity and reliability of your tests by managing noise and enforcing intent.

In this guide, you will learn about the three primary mocking behaviors — **NiceMock**, **NaggyMock**, and **StrictMock** — and when to apply each to control uninteresting calls effectively.

---

## Understanding Uninteresting Calls

An **uninteresting call** occurs when a method on a mock object is invoked, but no corresponding `EXPECT_CALL` expectation matches it. By default, GoogleMock allows these calls but prints warnings to inform you that such activity might be unexpected or overlooked.

Why care about this? Uninteresting calls can indicate:

- Missing test assertions.
- Overly permissive behavior allowing unintended code paths.
- Noise in test output making it harder to spot real problems.

GoogleMock gives you options to modify this behavior per mock object, by using one of the specialized wrappers:

### 1. `NiceMock`

- **What it does:** Suppresses warnings for uninteresting calls.
- **Ideal use case:** When you want clean test output and are confident that uninteresting calls are safe to ignore.
- **Usage example:**

```cpp
using ::testing::NiceMock;

class MockFoo { ... };  // Your mock class

TEST(MyTest, UsesNiceMock) {
  NiceMock<MockFoo> nice_mock_foo;

  EXPECT_CALL(nice_mock_foo, ImportantCall());
  ... // code exercising the mock
}
```

The `NiceMock<T>` type is a subclass of `T` and forwards all constructor arguments, so it can be used interchangeably while changing the uninteresting call behavior.

### 2. `NaggyMock`

- **What it does:** Prints warnings on uninteresting calls but does not fail the test.
- **Ideal use case:** When developing or debugging tests and you want to be notified about potentially unexpected calls without failing them.
- **Note:** By default, mocks behave like `NaggyMock` currently, but this default may become `NiceMock` in the future.

### 3. `StrictMock`

- **What it does:** Treats uninteresting calls as errors and causes tests to fail on the first such occurrence.
- **Ideal use case:** When you want strict enforcement on what calls are allowed on your mocks, ensuring all mock interactions are explicitly specified.

Example:

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> strict_mock_foo;

EXPECT_CALL(strict_mock_foo, ExpectedCall());

// Any call other than ExpectedCall() will fail the test
```

---

## Choosing Between Nice, Naggy, and Strict Mocks

Selecting the right strictness level improves test robustness and developer experience:

| Mock Type   | Behavior on Uninteresting Calls | When to Use                           |
| -----------|---------------------------------|------------------------------------|
| `NiceMock` | Ignore silently                  | Most tests, to reduce noise          |
| `NaggyMock`| Emit warnings                   | Developing/debugging tests          |
| `StrictMock`| Treat as errors                | Critical checks, tight contract enforcement |

> **Tip:** Use nice mocks for general stability and maintenance ease, naggy mocks actively during test development, and strict mocks only when you want to guarantee no unexpected calls occur.

---

## How to Create Nice, Naggy, and Strict Mocks

Suppose you have a mock class:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, GetValue, (), (const));
};
```

You can create specialized mock objects as follows:

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

NiceMock<MockFoo> nice_foo;    // Ignores uninteresting calls
NaggyMock<MockFoo> naggy_foo;  // Warns on uninteresting calls
StrictMock<MockFoo> strict_foo; // Fails on uninteresting calls
```

Because these wrappers inherit from your mock class, they can be passed anywhere a `MockFoo` is expected.

They properly forward constructor arguments as well:

```cpp
NiceMock<MockFoo> nice_foo(arg1, arg2);  // Calls MockFoo(arg1, arg2)
```

### Important Considerations

- These wrappers only affect **uninteresting calls** — calls where no `EXPECT_CALL` is specified.
- **Unexpected calls**—calls that don't match any existing `EXPECT_CALL`—are always errors, regardless of mock type.
- `NiceMock`, `NaggyMock`, and `StrictMock` only affect methods directly defined in your mock class.
- Mixing (nesting) these wrappers, e.g., `NiceMock<StrictMock<MockFoo>>` is not supported and may behave unexpectedly.

---

## Controlling Default Behavior with Command-line Flags

You can globally influence the behavior of uninteresting calls using the flag:

```bash
--gmock_verbose=LEVEL
```

Where *LEVEL* can be:

- `info`: Prints all informational messages, warnings, and errors, including stack traces for debugging.
- `warning`: Prints warnings and errors without stack traces (default).
- `error`: Prints errors only, suppressing warnings.

Use this flag to tune how much GoogleMock informs you about mock activity during test execution.

---

## Suppressing Uninteresting Call Warnings without Changing Mock Type

If you want to suppress warnings on specific methods, add a catchall expectation:

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_))
    .Times(AnyNumber());  // Allow any number of uninteresting calls without warning
```

Avoid overusing this because it can reduce test clarity.

---

## Examples

### Example: Using `NiceMock` to Silence Uninteresting Calls

```cpp
class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& msg), ());
  MOCK_METHOD(int, Size, (), (const));
};

TEST(PrinterTest, PrintWithoutWarnings) {
  NiceMock<MockPrinter> printer;
  EXPECT_CALL(printer, Print("Hello"));

  printer.Print("Hello");  // Matches expectation
  printer.Size();            // No EXPECT_CALL; no warnings due to NiceMock
}
```

### Example: Using `StrictMock` to Enforce Expectations

```cpp
class MockLogger {
 public:
  MOCK_METHOD(void, LogWarning, (const std::string& msg), ());
};

TEST(LoggerTest, FailsOnUninterestingCalls) {
  StrictMock<MockLogger> logger;
  EXPECT_CALL(logger, LogWarning("Disk full"));

  logger.LogWarning("Disk full");  // OK
  logger.LogWarning("File not found");  // Test failure! Uninteresting call
}
```

---

## Internals and How These Work

GoogleMock implements these wrappers by subclassing your mock to register the desired behavior for uninteresting calls on construction and deregister it on destruction.

- **`NiceMock`** allows uninteresting calls silently.
- **`NaggyMock`** prints warnings for each uninteresting call.
- **`StrictMock`** generates failures for uninteresting calls.

Internally, this changes the default reaction GoogleMock has to uninteresting calls on that specific object.

---

## Best Practices

- Use `NiceMock` to reduce noise in your tests, especially when uninteresting calls are expected and safe.
- Use `NaggyMock` while developing new tests or debugging, so unexpected uninteresting calls are flagged.
- Use `StrictMock` only when you want to be absolutely sure no unexpected calls occur.
- Prefer adding specific `EXPECT_CALL`s for all important interactions.
- Add catchall `EXPECT_CALL` with `Times(AnyNumber())` cautiously to avoid masking legitimate issues.
- Avoid nesting strictness wrappers.
- Ensure all mocked classes have virtual destructors to avoid undefined behavior with these wrappers.

---

## Troubleshooting Common Issues

- **Warnings on uninteresting calls despite `NiceMock`:** Check if methods are defined in a base class; the wrappers only affect methods directly mocked in your class.
- **Unexpected failures with `StrictMock`:** You likely have calls that were not expected by your `EXPECT_CALL`s — either add expectations or switch to a less strict mock.
- **Test flakiness due to strict mocks:** Ensure your test only verifies intended interactions; over-specification leads to brittle tests.

---

## Related Documentation and Next Steps

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#NiceStrictNaggy): Deep dive on using different mock strictness types.
- [Mock Object Creation & Usage](../api-reference/mocking-framework/mock-object-basics.md): How to define mocks.
- [Expectations & Call Ordering](../api-reference/mocking-framework/expectations.md): How to set call expectations precisely.
- [Mocking Best Practices](../guides/mocking-and-advanced-testing/test-doubles-best-practices.md): Guidelines for reliable and maintainable mocks.

---

## Quick Reference

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

// Define your mock class
class MockFoo {
 public:
  MOCK_METHOD(void, DoSomething, (), ());
};

// Use NiceMock to ignore uninteresting calls:
NiceMock<MockFoo> nice_mock;

// Use NaggyMock to warn on uninteresting calls (default behavior):
NaggyMock<MockFoo> naggy_mock;

// Use StrictMock to fail on uninteresting calls:
StrictMock<MockFoo> strict_mock;
```

---