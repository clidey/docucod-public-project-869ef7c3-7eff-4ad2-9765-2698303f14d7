---
title: "Writing Your First Test"
description: "Guided walkthrough of authoring a simple GoogleTest unit test in C++. Introduces core concepts like test fixtures and assertions, ensuring users understand GoogleTest’s syntax and test discovery approach."
---

# Writing Your First Test

Welcome to your first step into unit testing with GoogleTest! This guide walks you through authoring a simple unit test using GoogleTest’s familiar syntax. Along the way, you'll learn core concepts including test fixtures and assertions that help structure your tests effectively and understand how GoogleTest discovers and runs them.

---

## 1. Understanding the Basics

Before diving straight into writing code, it’s essential to understand what you’re trying to achieve.

- **Test Case and Test**: GoogleTest organizes tests in *test cases* (or *test suites*), which group related tests. Each *test* checks one particular aspect or behavior.
- **Assertions**: GoogleTest provides various assertion macros to check that your code produces expected results.
- **Test Fixtures**: A class used when multiple tests share common setup or teardown code.
- **Test Discovery**: GoogleTest automatically discovers all your test cases and tests by scanning for macro invocations.

<Tip>
Understanding these concepts upfront prepares you to write clean, maintainable tests and helps GoogleTest run them efficiently.
</Tip>

---

## 2. Writing Your First Simple Test

Let’s start with a minimal example. Suppose you want to check that basic arithmetic behaves as expected.

```cpp
#include <gtest/gtest.h>  // Include the GoogleTest header

// Define a test case named 'MathTest' and a test named 'Addition'
TEST(MathTest, Addition) {
  EXPECT_EQ(2 + 2, 4);  // Assert that 2 + 2 equals 4
}
```

### How this works:
- `TEST` is a macro that defines a test.
- The first parameter is the test case name (`MathTest`).
- The second parameter is the test name (`Addition`).
- Inside the test body, you use assertions (`EXPECT_EQ`) to verify results.

### Running this test:
Compile and run your test binary. GoogleTest will automatically discover and execute the test. Successful tests produce minimal output; failures print detailed diagnostics.

<Check>
Make sure you include `<gtest/gtest.h>` and link with GoogleTest libraries when building.
</Check>

---

## 3. Using Test Fixtures for Repeated Setup

If multiple tests share setup or teardown code, use a test fixture. This is a class inheriting from `::testing::Test`.

Example:

```cpp
#include <gtest/gtest.h>

// Test fixture class
class CalculatorTest : public ::testing::Test {
 protected:
  void SetUp() override {
    calculator_ = new Calculator();  // Assume Calculator is your class under test
  }

  void TearDown() override {
    delete calculator_;
  }

  Calculator* calculator_ = nullptr;
};

// Tests using the CalculatorTest fixture
TEST_F(CalculatorTest, AddsNumbers) {
  EXPECT_EQ(calculator_->Add(1, 2), 3);
}

TEST_F(CalculatorTest, MultipliesNumbers) {
  EXPECT_EQ(calculator_->Multiply(2, 4), 8);
}
```

### Explanation:
- `TEST_F` macro is used to declare tests that use the fixture.
- `SetUp` runs before each test; `TearDown` runs after.
- `calculator_` is shared state for the tests.

<Tip>
Use test fixtures to keep your tests DRY (Don’t Repeat Yourself) and avoid boilerplate.
</Tip>

---

## 4. Writing Assertions

Assertions are at the heart of any test. GoogleTest provides many:

- **EXPECT_***: Non-fatal, the test continues after failure.
- **ASSERT_***: Fatal, test aborts on failure.

Example assertions:

```cpp
EXPECT_EQ(val, expected);        // Equal
EXPECT_NE(val1, val2);           // Not Equal
EXPECT_LT(val1, val2);           // Less Than
EXPECT_TRUE(condition);          // Condition is true
ASSERT_FALSE(condition);         // Condition is false, aborts on failure
EXPECT_THROW(statement, ExceptionType);  // Expect statement to throw
```

Use `EXPECT_` when you want the test to continue upon failure so you can see multiple issues; use `ASSERT_` when subsequent code depends on the assertion.

<Note>
For comprehensive assertion macros, refer to [GoogleTest Assertions & Matchers](../core-testing-apis/assertions.md).
</Note>

---

## 5. Understanding Test Discovery and Execution

GoogleTest discovers tests via the `TEST` and `TEST_F` macros that register tests at static initialization time. When you run the test executable:

- It enumerates all registered tests.
- Runs each test in isolation.
- Reports pass/failure for each.

You can filter tests with command-line flags:

```shell
./my_test_binary --gtest_filter=MathTest.Addition
```

This runs only the `Addition` test in the `MathTest` test case.

<Tip>
Run your tests often to catch failures early. Use `--gtest_help` to discover more runtime options.
</Tip>

---

## 6. Common Pitfalls and Tips

- Always place your test code in separate test files ending with `_test.cc` or similar.
- Include the GoogleTest header only once per test file.
- Do not call `EXPECT_CALL` macros after exercising the mock objects (expectations must be set before).
- Be sure to link against the correct GoogleTest libraries.
- Clean up dynamically allocated objects in fixtures to avoid leaks.

---

## 7. Next Steps

Now that you know how to write a simple test and use fixtures and assertions, explore these areas next:

- [Test Fixtures, Parameterized, and Typed Tests](../advanced-testing-patterns/test-fixtures-parameterization)
- [Mocking Workflows with GoogleMock](../advanced-testing-patterns/mocking-workflows)
- [Writing and Running Tests](../core-testing-apis/writing-tests)

---

## 8. Sample Walkthrough: A Complete First Test

Putting it all together, here’s a minimal but full example demonstrating the core concepts.

```cpp
#include <gtest/gtest.h>

// A simple calculator class to test
class Calculator {
 public:
  int Add(int a, int b) { return a + b; }
  int Subtract(int a, int b) { return a - b; }
};

// Test fixture for Calculator
class CalculatorTest : public ::testing::Test {
 protected:
  void SetUp() override {
    calc_ = new Calculator();
  }

  void TearDown() override {
    delete calc_;
  }

  Calculator* calc_ = nullptr;
};

// Test addition
TEST_F(CalculatorTest, AddPositiveNumbers) {
  EXPECT_EQ(calc_->Add(2, 3), 5);
}

// Test subtraction
TEST_F(CalculatorTest, SubtractPositiveNumbers) {
  EXPECT_EQ(calc_->Subtract(5, 3), 2);
}
```

Compile with GoogleTest linked and run. If both tests pass, you are set for writing more!

---

## 9. Troubleshooting Your First Test

If your test does not compile or run:

- Verify your include paths to GoogleTest headers.
- Confirm you are linking against the GoogleTest and pthread libraries.
- Ensure you are using a supported compiler with C++17 support.
- If tests do not run or no output, make sure you called `RUN_ALL_TESTS()` in your `main()`.

Example main function:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Note>
For detailed installation and build integration, see the [Source Inclusion & Manual Integration](../../../getting_started/installation_integration/source_integration) guide.
</Note>

---

## Reference Links

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Overview and examples for mocking.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Recipes for common mocking scenarios.
- [GoogleTest Assertions & Matchers](../core-testing-apis/assertions.md) — Comprehensive assertion reference.
- [Using Mock Objects](../mocking-apis/defining-mocks.md) — How to define and use mocks.

For more details on writing tests with GoogleTest and using GoogleMock, refer to the full documentation set.

---

With this foundation, you are now ready to write meaningful unit tests that improve your code quality and confidence. Happy testing!
