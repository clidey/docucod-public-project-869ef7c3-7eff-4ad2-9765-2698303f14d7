---
title: "Building and Running Tests"
description: "Instructions for compiling and running your tests using your chosen build system. This page explains how to interpret GoogleTest output, confirms a passing test, and highlights common missteps (e.g., missing main entry, incorrect linking)."
---

# Building and Running Tests

This guide walks you through compiling your GoogleTest-based tests using your preferred build system, running them, interpreting test output, and troubleshooting common issues like missing `main` entry points and linking errors. By following these instructions, you'll confidently build your test executable, execute it, and understand outcomes to ensure your tests run smoothly.

---

## 1. Preparing to Build Your Tests

Before compiling your tests, ensure your environment is properly configured and your source code is ready.

### Prerequisites
- **GoogleTest Source & Headers:** Confirm that GoogleTest headers and source files are accessible either via installed libraries or included in your project.
- **Build Tools:** Install your build system and compiler of choice (e.g., CMake, Bazel, Make, Visual Studio, etc.).
- **C++17 Support:** Your compiler environment needs C++17 capability.
- **Test Code:** Your test source files must include `<gtest/gtest.h>` and be properly set up with `TEST()` or `TEST_F()` macros.

<Tip>
If you want to simplify your `main()` implementation, consider linking with `gtest_main` or `gmock_main` (for GoogleMock users), which provide default test runner entry points.
</Tip>

### Common Structure
Your test program typically consists of:
- Tests defined using GoogleTest macros
- A `main()` function that initializes GoogleTest and runs all tests (unless you link with a `*_main` library)


---

## 2. Building Tests with Your Build System

Depend on your build environment, the specifics vary. Below are instructions for two common methods.

### Building with CMake

GoogleTest provides CMake support and can be easily integrated.

#### Standalone Build
1. Clone GoogleTest repository or have it installed.
2. Create a `CMakeLists.txt` for your project and add:

```cmake
cmake_minimum_required(VERSION 3.14)  # Minimum version supporting FetchContent
project(MyTests)

include(FetchContent)

FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_example.cpp)  # Replace with your test sources

target_link_libraries(my_tests gtest_main)

enable_testing()
add_test(NAME my_tests COMMAND my_tests)
```

3. In your project directory:

```bash
mkdir build
cd build
cmake ..
make
ctest
```

This compiles your tests, links with GoogleTest's `gtest_main` (default main()), and runs them.

#### Incorporating Into Existing CMake Projects
- Use `find_package(GTest REQUIRED)` if installed, then link with `GTest::gtest_main`.
- Or incorporate GoogleTest source via `add_subdirectory()` for consistent compiler options.

### Building Without CMake (Manual Integration)

If you integrate manually by including GoogleTest sources:

1. Add necessary GoogleTest source files (`gtest-all.cc`, etc.) to your build.
2. Compile your test files along with GoogleTest sources.
3. Link them together with appropriate linker flags (e.g., pthread on Linux).

Example compile command:

```bash
g++ -std=c++17 -pthread -I/path/to/googletest/include \
    test_example.cpp \
    /path/to/googletest/src/gtest-all.cc \
    -o my_tests
```

<Tip>
On Linux/macOS, you must add `-pthread` flag for thread support, which is essential for GoogleTest.
</Tip>

---

## 3. Running Your Test Executable

Once built, running the test executable will execute all registered tests and emit detailed output.

```bash
./my_tests
```

### Interpreting Output
- **PASS:** All tests succeeded.
- **FAIL:** One or more tests failed. The output will include failure descriptions, source file lines, and assertion details.
- **Skipped/Disabled Tests:** Tests with `DISABLED_` prefix or filtered out.

Sample passing output snippet:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from ExampleTest
[ RUN      ] ExampleTest.TestOne
[       OK ] ExampleTest.TestOne (0 ms)
[ RUN      ] ExampleTest.TestTwo
[       OK ] ExampleTest.TestTwo (1 ms)
[----------] 2 tests from ExampleTest (1 ms total)

[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
```

<Tip>
Always check the test summary at the end of the output for the overall pass/fail status.
</Tip>

### Running with Filters
Run subsets of tests by specifying patterns:

```bash
./my_tests --gtest_filter=TestSuiteName.TestName
```

---

## 4. Common Pitfalls When Building and Running Tests

### Missing `main()` Entry Point
- When linking only with `gtest` or `gmock` libraries, you must provide your own `main()` function that calls `testing::InitGoogleTest()` and `RUN_ALL_TESTS()`.
- Linking with `gtest_main` or `gmock_main` supplies this for you, preventing undefined reference errors for `main`.

Example of a minimal `main()`:

```c++
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Linking Errors (Missing Symbols)
- Ensure you link against the necessary GoogleTest libraries.
- On POSIX systems, link with pthread (`-pthread`).
- If using GoogleMock features, link additionally with `gmock_main` or `gmock`.

### Linking Against Incorrect Library Variants
- Avoid runtime/library mismatches such as mixing static and dynamic runtimes (often an issue on Visual Studio).
- Use options like CMake's `gtest_force_shared_crt` to align runtimes.

### Tests Not Running or Detected
- Verify tests are properly registered with `TEST()` or `TEST_F()` macros.
- Confirm the executable was compiled and linked with the correct source files.

---

## 5. Step-by-Step Quickstart Example

Assuming you have a test file `example_test.cpp`:

```c++
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(7 * 6, 42);
}
```

Build and run with CMake:

1. Create `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(SampleTestProject)

include(FetchContent)

FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(sample_test example_test.cpp)
target_link_libraries(sample_test gtest_main)

enable_testing()
add_test(NAME sample_test COMMAND sample_test)
```

2. Run commands:

```bash
mkdir build
cd build
cmake ..
make
./sample_test
```

Expected output indicates test passing.

---

## 6. Additional Tips and Best Practices

- Always keep `RUN_ALL_TESTS()` return value respected and propagated as `main()`'s return.
- Use `gtest_filter` to focus on specific tests when debugging.
- Take advantage of default `main()` from `gtest_main` to simplify your code.
- Review your test output carefully for non-fatal failures.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Common Build and Run Issues">
<Accordion title="Missing main() Function Linker Error">
This error occurs when your test executable lacks an entry point.

**Solution:**
- Link with `gtest_main` or `gmock_main` if you don't provide your own `main()`.
- If writing your own main, ensure it calls `testing::InitGoogleTest()` and returns `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Tests Not Being Discovered or Run">
Possible causes:
- Tests not compiled or linked properly.
- Macros `TEST()` or `TEST_F()` not used correctly.

**Check:**
- Rebuild your test executable fully.
- Verify test source files are included.
- Confirm no `DISABLED_` prefix preventing tests from running.
</Accordion>
<Accordion title="Linker Errors Related to pthread or Threads">
GoogleTest depends on threading support.

**Fix:**
- Ensure you compile and link with `-pthread` (Linux/macOS).
- Check your build system adds threading libraries correctly.
</Accordion>
<Accordion title="Runtime Failures or Crashes">
Could be caused by incorrect test code, failing assertions, or environment setup.

**Debug:**
- Run test executable under debugger.
- Inspect test failure messages closely.
- Simplify tests to isolate failing code.
</Accordion>
</AccordionGroup>

---

## 8. Where to Go Next

- See [Writing Your First Test](/getting_started/first_test_run_validation/write_first_test) for detailed guidance on authoring GoogleTest tests.
- Explore [Installation with CMake](/getting_started/installation_integration/install_cmake) for comprehensive integration instructions.
- Review [Common Installation & Setup Problems](/getting_started/troubleshooting/common_problems) for further troubleshooting tips.

---

For extensive information about GoogleTest and GoogleMock integration, refer to the [Integrations and Tools](/overview/integration-and-ecosystem/integrations-and-tools) page.


---

<Info>
Follow these instructions carefully to get your tests built and running efficiently. Proper linking with entry points and understanding the test run output will ensure a smooth experience as you develop and validate your C++ code with GoogleTest.
</Info>
