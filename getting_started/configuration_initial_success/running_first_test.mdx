---
title: "Running Your First Test"
description: "Guides users to write, build, and execute a first unit test using GoogleTest and GoogleMock—demonstrating essential test structures, use of basic assertions, and expected output upon test success or failure."
---

# Running Your First Test

Welcome to the exciting stage of writing, building, and running your first unit test using GoogleTest and GoogleMock. This guide will take you through a simple, practical example to help you understand the core structure of tests, how to assert expectations, and what output to expect after executing your test binaries.

---

## 1. Writing Your First Test

In GoogleTest, a test is created using macros that define test suites and test cases inside them. Let's walk through a simple example.

### Step 1: Create a Basic Test Function

Use the `TEST` macro to define a test suite and a test within it. The test suite groups related tests logically, and the test contains the actual checks.

```cpp
#include <gtest/gtest.h>

// A simple function to test
int Sum(int a, int b) {
  return a + b;
}

// Define a test suite "MathTest" and a test "ReturnsCorrectSum"
TEST(MathTest, ReturnsCorrectSum) {
  EXPECT_EQ(Sum(1, 2), 3);  // Expect Sum(1,2) to equal 3
  EXPECT_EQ(Sum(-5, 5), 0); // Expect Sum(-5,5) to equal 0
}
```

### Explanation:

- `TEST(MathTest, ReturnsCorrectSum)` defines a test named `ReturnsCorrectSum` inside the test suite `MathTest`.
- `EXPECT_EQ` is an assertion that verifies two values are equal. If not, the test logs a failure but continues running.

### Best Practices:

- Test suite and test names should be valid C++ identifiers without underscores for consistency.
- Prefer `EXPECT_*` assertions when you want the test to continue after a failure; use `ASSERT_*` if test continuation does not make sense after a failure.


## 2. Building Your Test

Before running, you must build your test code linking against GoogleTest and GoogleMock libraries.

### Using CMake (recommended):

Here's a minimal example of a `CMakeLists.txt` file:

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTests)

# Locate the GoogleTest package (assumes installed)
find_package(GTest REQUIRED)

# Enable testing
enable_testing()

# Define your test executable
add_executable(my_test sum_test.cpp)

# Link with GoogleTest and pthread library (necessary on Unix)
target_link_libraries(my_test GTest::gtest GTest::gtest_main pthread)

# Register the test with CTest
add_test(NAME MyFirstTest COMMAND my_test)
```

After setting up your `sum_test.cpp` with the example test, run:

```bash
mkdir build && cd build
cmake ..
make
./my_test
```

### Alternate Build Systems

- For Bazel, link `@com_google_googletest//:gtest` and `gtest_main`.
- For simple g++ commands:

```bash
g++ -std=c++17 -isystem /path_to_gtest/include -pthread sum_test.cpp /path_to_gtest/lib/libgtest.a /path_to_gtest/lib/libgtest_main.a -o my_test
```

_replace `/path_to_gtest/` with the actual installation path._


## 3. Running Your Test and Understanding Output

Run the compiled executable:

```bash
./my_test
```

### Successful Test Output Example:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from MathTest
[ RUN      ] MathTest.ReturnsCorrectSum
[       OK ] MathTest.ReturnsCorrectSum (0 ms)
[----------] 1 test from MathTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Failure Output Example:

If you make a test fail, e.g., change `EXPECT_EQ(Sum(1, 2), 4);`, GoogleTest shows detailed failure information.

```none
math_test.cpp:8: Failure
Expected equality of these values:
  Sum(1, 2)
    Which is: 3
  4
[  FAILED  ] MathTest.ReturnsCorrectSum (0 ms)
```

This output tells you:
- Exactly which assertion failed.
- The file and line number where it happened.
- The actual and expected values.
- The specific test name and suite.


## 4. Using GoogleMock (Briefly)

GoogleMock integrates neatly with GoogleTest to let you create mocks and set expectations.

### Minimal Example:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class Interface {
 public:
  virtual ~Interface() {}
  virtual int GetValue() = 0;
};

class MockInterface : public Interface {
 public:
  MOCK_METHOD(int, GetValue, (), (override));
};

TEST(MockTest, GetValueReturnsExpected) {
  MockInterface mock;

  EXPECT_CALL(mock, GetValue())
      .Times(1)
      .WillOnce(::testing::Return(42));

  int val = mock.GetValue();
  EXPECT_EQ(val, 42);
}
```

This creates a mock class and sets an expectation that `GetValue()` will be called once and return 42.

### Build Linking

Make sure to link against GoogleMock libraries: `gmock` and `gmock_main` or `gmock` and `gtest` and your own `main()`.


## 5. Next Steps

- Explore writing **Test Fixtures** for more complex tests shared across multiple cases.
- Use **ASSERT_** assertions when failure should abort a test.
- Learn to run **subset of tests** with the `--gtest_filter` flag.
- Review the official GoogleTest output formatting and flags [here](../advanced.md#running-test-programs-advanced-options).


---

## Troubleshooting Tips

- **Test Not Found or Not Running?** Check if you obey name restrictions (no underscores in test or suite names).
- **Linker Errors?** Ensure correct paths and linking with gtest and gmock libraries.
- **Tests Not Reporting Failures?** Make sure your `main()` returns the value of `RUN_ALL_TESTS()`.
- **Verbose Output?** Use `--gtest_print_time=1` or `--gtest_color=yes` to enhance console visibility.


## Resources

For detailed exploration, see the following key documentation pages:

- [GoogleTest Primer](primer.md) – foundational concepts and test writing
- [Advanced GoogleTest Topics](advanced.md) – deeper assertions and test features
- [Testing Reference](reference/testing.md) – complete API and macros

---

We’ve now equipped you with the essential knowledge and first example to start testing C++ code confidently using GoogleTest and GoogleMock.

Happy testing!