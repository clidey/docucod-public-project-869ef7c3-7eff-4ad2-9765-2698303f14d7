---
title: "Installing GoogleTest and GoogleMock"
description: "Guides users through downloading, building, and installing the framework on various systems with step-by-step instructions. Covers source tree structure, and highlights platform-specific tips for CMake, Bazel, and other mainstream build systems."
---

# Installing GoogleTest and GoogleMock

This guide walks you through downloading, building, and installing the GoogleTest and GoogleMock frameworks on various platforms. It provides detailed instructions on working with the source tree structure and tips for using popular build systems such as CMake and Bazel.

---

## 1. Prerequisites

Before installation, ensure your environment meets these requirements:

- **C++17 Support**: Your compiler must support the C++17 standard. This is mandatory for building GoogleTest and GoogleMock.
- **Build Tools**: Install one or more build tools based on your platform and preference, such as CMake (version 3.14 or higher is recommended), Make (on Linux/macOS), Visual Studio (on Windows), or Bazel.
- **Network Access**: Required if you plan to fetch GoogleTest source using Git or to pull dependencies during the build.

<Tip>
If you’re unsure about your compiler or environment setup, refer to the [Prerequisites & Supported Platforms](https://github.com/google/googletest/tree/main/getting_started/setup_requirements_install/prerequisites_supported_platforms.md) page for detailed information.
</Tip>

---

## 2. Obtaining the Source Tree

You can get the source code either by cloning the GitHub repository or downloading release archives.

### 2.1 Clone via Git

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

This will clone the latest main branch.

### 2.2 Download Release Archive

Go to the GitHub releases page and download a zip or tarball of the latest stable version:

[https://github.com/google/googletest/releases](https://github.com/google/googletest/releases)

Extract the archive and navigate to the root directory.

---

## 3. Source Tree Structure

The source repository includes:

- `googletest/` — Contains the GoogleTest framework source code.
- `googlemock/` — Contains the GoogleMock mocking framework source code.

Both subdirectories include headers, source files, and build scripts.

When building, GoogleMock depends on GoogleTest, so both are included by default.

---

## 4. Building GoogleTest and GoogleMock

The recommended method is to use CMake, which offers cross-platform support and generates native build files for your environment.

### 4.1 Standalone Build with CMake

1. Create a build directory inside the repository:
   ```bash
   mkdir build
   cd build
   ```

2. Generate build files with CMake:
   ```bash
   cmake ..
   ```
   This configures the build for both GoogleTest and GoogleMock by default.

3. Build the libraries:
   - On Linux/macOS:
     ```bash
     make
     ```
   - On Windows (with Visual Studio):
     Open the generated `.sln` file and build from the IDE, or run:
     ```powershell
     msbuild gtest.sln /p:Configuration=Release
     ```

4. Optionally install the libraries system-wide:
   - On Linux/macOS:
     ```bash
     sudo make install
     ```
   - On Windows, install from Visual Studio or copy the binaries manually.

#### Build GoogleTest Only

If you want to build **only** GoogleTest (without GoogleMock), modify the CMake command as:
```bash
cmake .. -DBUILD_GMOCK=OFF
```

### 4.2 Incorporating GoogleTest into Your Project

#### Using Installed Libraries

After installation, import GoogleTest in your project’s `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests GTest::gtest GTest::gtest_main)
```

#### Building GoogleTest as a Subdirectory

For tighter integration and to ensure consistent compiler flags, add GoogleTest as a subdirectory:

```cmake
add_subdirectory(path/to/googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests gtest gtest_main)
```

This method compiles GoogleTest as part of your build, avoiding mismatch issues.

### 4.3 Using FetchContent

CMake 3.14+ users can fetch GoogleTest during configuration, automating source acquisition:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/v1.17.0.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For MSVC runtime compatibility
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests gtest gtest_main)
```

---

## 5. Building Using Other Build Systems

### 5.1 Bazel

GoogleTest supports Bazel builds through provided WORKSPACE and BUILD files. To use:

1. Add the repository to your WORKSPACE.
2. Add test targets depending on `@com_google_googletest//:gtest` or `@com_google_googletest//:gmock`.

Refer to the Bazel documentation and GoogleTest Bazel setup for detailed steps.

### 5.2 Visual Studio

1. Run CMake to generate a Visual Studio solution (`.sln`).
2. Build the solution inside Visual Studio or via MSBuild CLI.

Keep in mind runtime library settings (dynamic vs static CRT), which can cause linker errors if mismatched. Set the CMake option `gtest_force_shared_crt=ON` to align them.

---

## 6. Verifying Your Installation

After building, verify your installation:

- Run the tests included with GoogleTest:
  ```bash
  ./build/gtest/gtest
  ./build/gmock/gmock_main
  ```
- You should see output indicating all tests passing.

<Tip>
Ensure your test binaries link properly and can run without missing dependencies. Using `ctest` inside the build directory is another way to run tests:
```bash
ctest
```
</Tip>

---

## 7. Platform-Specific Notes

- **Linux/macOS**: Make sure required dependencies such as pthreads are present. The CMake scripts usually handle linking pthreads automatically.
- **Windows**: Visual Studio integration is smooth with CMake but pay close attention to runtime library selections to avoid linkage conflicts.
- **Embedded systems**: Limited or specific support; building may require tweaking macros and flags as described in the repository docs.

---

## 8. Troubleshooting Common Build Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Can't Find Compiler or Tools">
Make sure your compiler and build tools are correctly installed and available in your system PATH. Running `cmake` without proper environment variables results in configuration failures.
</Accordion>
<Accordion title="Linker Errors on Windows Related to CRT">
Verify `gtest_force_shared_crt` is set appropriately in your build configuration to align your project's runtime library with GoogleTest's.
</Accordion>
<Accordion title="Missing pthread Library On Unix-like Systems">
Ensure pthread development packages are installed. Using CMake's default scripts will handle this, but custom build scripts may need manual linking.
</Accordion>
</AccordionGroup>

---

## 9. Next Steps

- **Writing and Running Your First Test**: Learn how to create simple test cases after successfully installing the framework.
- **Getting Started with GoogleMock**: Explore mocking features to write more advanced unit tests.
- **Continuous Integration**: Integrate GoogleTest and GoogleMock builds into your CI pipelines.

Refer to [Writing and Running Your First Test](../first_test_and_validation/writing_first_test.md) and [Getting Started with GoogleMock](../first_test_and_validation/using_googlemock_basics.md) for focused guides.

---

## References

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest CMake Build Instructions](https://github.com/google/googletest/tree/main/googletest)
- [GoogleMock README](https://github.com/google/googletest/tree/main/googlemock)
- [Prerequisites & Supported Platforms](https://github.com/google/googletest/tree/main/getting_started/setup_requirements_install/prerequisites_supported_platforms.md)

---

## Example: Building GoogleTest Standalone

```bash
# Clone repo
 git clone https://github.com/google/googletest.git -b main
 cd googletest

# Create build directory
 mkdir build && cd build

# Configure
 cmake ..

# Build
 make

# (Optional) Install
 sudo make install

# Run tests
 ./googletest/gtest/gtest
```

---

## Summary Diagram

```mermaid
flowchart TD
  A[Start: Clone or Download GoogleTest]
  B[Create 'build' directory]
  C[Run CMake to configure project]
  D[Build GoogleTest and GoogleMock]
  E[Run built-in tests]
  F{Issues?}
  F -- Yes --> G[Check prerequisites and config]
  F -- No --> H[Install libraries (optional)]
  H --> I[Integrate GoogleTest into your project]
  I --> J[Write and run tests]
  G --> C
  A --> B --> C --> D --> E --> F
```

---

## Contact and Support

For problems beyond this guide, visit the [Common Installation Issues](../troubleshooting/common_install_issues.md) or [Getting Help & Next Steps](../troubleshooting/getting_help_next_steps.md) pages.

<Info>
Be sure to use compatible versions with your compiler and platform. The community actively maintains issues and pull requests on the GitHub repository.
</Info>
