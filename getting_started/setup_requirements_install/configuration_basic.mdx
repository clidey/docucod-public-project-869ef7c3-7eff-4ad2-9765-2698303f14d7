---
title: "Basic Configuration"
description: "Walks the user through workspace, project, and environment setup for successfully linking, including necessary include directories and dependencies. Explains minimum viable configuration to start writing and running tests."
---

# Basic Configuration

This guide walks you through the essential workspace, project, and environment setup in GoogleTest and GoogleMock. It covers the minimal configuration required to link properly, specify include directories and dependencies, and get started writing and running your first tests successfully.

---

## 1. Workspace and Project Setup

Starting with a properly configured workspace and project is crucial for successful compilation and execution of tests within GoogleTest and GoogleMock.

### 1.1 Organize Your Source Tree

- Place your production code and test code in clearly separated directories to keep tests maintainable.
- Typical layout:

  ```
  /my_project
    /src           # Production source code
    /include       # Public headers
    /tests         # Test source files
    /third_party   # External dependencies like GoogleTest/GoogleMock
  ```

### 1.2 Include Necessary GoogleTest and GoogleMock Headers

Ensure that your compiler can locate the GoogleTest and GoogleMock headers:

- Add the GoogleTest `include` directory and GoogleMock `include` directory to your project's include path.
- Example include directories to specify:

  - `path_to_googletest/include`
  - `path_to_googlemock/include`

You can see from build files (CMakeLists.txt) that these are the standard include directories.

### 1.3 Link Required Libraries

When linking your test executable, include GoogleTest and/or GoogleMock libraries as dependencies:

- For GoogleTest only: link against `gtest` or `gtest_main` (which provides a default main function).
- For GoogleMock (which depends on GoogleTest): link against `gmock` or `gmock_main`.


## 2. Minimum Viable Configuration

To write and run your first tests, a minimum configuration includes the following:

### 2.1 Include Directories

Add these include paths to compiler flags:

```bash
-I/path_to_googletest/include -I/path_to_googlemock/include
```

or in CMake:

```cmake
include_directories(
    ${gtest_SOURCE_DIR}/include
    ${gmock_SOURCE_DIR}/include
)
```

### 2.2 Source and Dependencies

- Add GoogleTest and GoogleMock source files (`gtest-all.cc`, `gmock-all.cc`) to your build system if not using pre-built binaries.
- Link with threading libraries if required (e.g., pthreads on Linux/macOS).

### 2.3 Define Compiler Flags

- Enforce the C++17 standard as GoogleTest requires it.
- Configure threading support flags if your environment needs explicit control (see troubleshooting below).

Example CMake snippet:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# If pthreads are available and needed
find_package(Threads REQUIRED)
```

### 2.4 Optional: Customization Points

GoogleTest and GoogleMock allow customization by defining macros, as explained in their internals (e.g., for logging, threading, or temporary directories). 

Unless you have special needs, these do not need to be configured at the start.


## 3. Configuring Your Testing Environment

### 3.1 Workspace Environment

- Set up any environment variables your build or test execution may require.
- Verify compiler and linker flags to match your platform and project needs.

### 3.2 Project Configuration Example

Here is a minimal example snippet for a CMake project integrating GoogleTest and GoogleMock:

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProjectTests)

# Download or locate installed googletest
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

enable_testing()

add_executable(my_tests test/my_test.cc)
target_link_libraries(my_tests gtest_main gmock_main Threads::Threads)

add_test(NAME my_tests COMMAND my_tests)
```

This sets up GoogleTest and GoogleMock, links them, and registers the tests for execution.


## 4. Writing and Running Your First Test

With your basic project configuration complete, you can start writing tests.

### 4.1 Writing a Simple Test

```c++
#include <gtest/gtest.h>

// Simple test example
TEST(SampleTestSuite, SimpleAssertion) {
  EXPECT_EQ(1 + 1, 2);
}
```

### 4.2 Building and Running the Test

- Build your test executable using your build system.
- Run the compiled executable; GoogleTest will discover and run tests automatically.

Expected output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTestSuite
[ RUN      ] SampleTestSuite.SimpleAssertion
[       OK ] SampleTestSuite.SimpleAssertion (0 ms)
[----------] 1 test from SampleTestSuite (0 ms total)

[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```


## 5. Troubleshooting Common Issues

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Missing Include Directories">
Make sure your compiler includes paths to GoogleTest and GoogleMock header files. Check for typos or incorrect paths.
</Accordion>
<Accordion title="Linker Errors">
Verify that you are linking with the correct static or shared GoogleTest/GoogleMock libraries. Also ensure any required threading libraries (like pthreads) are linked.
</Accordion>
<Accordion title="C++17 Support Not Found">
Confirm your compiler and build system support C++17 and that this is explicitly set in your configuration.
</Accordion>
<Accordion title="Threads Not Working or Tests Are Failing Unexpectedly">
GoogleTest requires proper threading support on platforms that use pthreads. Check environment compatibility and optionally define `-DGTEST_HAS_PTHREAD=1` or `0` if detection fails.
</Accordion>
</AccordionGroup>


## 6. Best Practices and Tips

- Use `gtest_main` or `gmock_main` libraries to avoid having to write a main() yourself.
- Organize tests into test suites similarly to how your production code is organized.
- Use test fixtures (`TEST_F()`) for reusing common setup/teardown logic across multiple tests.
- Always check the return value of `RUN_ALL_TESTS()` in your `main()` if you provide one.


## 7. Next Steps

- Write tests using assertions as explained in the GoogleTest [Primer](https://github.com/google/googletest/blob/main/docs/primer.md).
- Explore advanced test writing, including test fixtures and parameterized tests.
- For mocking behavior, configure and write mocks with GoogleMock.
- Refer to [Writing and Running Your First Test](../first_test_and_validation/writing_first_test) after completing your basic setup.


---

### Additional References

- [GoogleTest README](https://github.com/google/googletest/blob/main/googletest/README.md) for build and installation overview.
- [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md) for mocking framework documentation.
- [Configuration Macros and Customization](googletest/include/gtest/internal/custom/README.md) for advanced tweaking.

---