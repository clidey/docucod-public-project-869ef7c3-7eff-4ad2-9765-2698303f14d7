---
title: "Write Your First Test"
description: "Demonstrates how to set up and write a basic test using GoogleTest's core assertions. Provides sample code and guidance to build confidence in the workflow, drawing from canonical examples."
---

# Write Your First Test with GoogleTest

This guide walks you through writing a basic test using GoogleTest's core assertions. By following these steps, you'll gain hands-on experience creating and running your first C++ test, enabling you to verify your code correctly and build confidence in your testing workflow.

---

## 1. Prerequisites & Setup

Before writing your first test, ensure that you have GoogleTest properly installed and integrated with your build system. For detailed installation instructions, refer to the guides on installing with CMake or Bazel.

> **TIP:** If you haven't installed GoogleTest yet, see [Install with CMake](../getting_started/requirements_installation/installation_cmake.md) or [Install with Bazel](../getting_started/requirements_installation/installation_bazel.md).

Ensure your environment supports C++17 or later, as GoogleTest requires this minimum standard.

---

## 2. Creating a Basic Test

GoogleTest organizes tests into suites (called *test suites*), each containing individual tests. Tests are defined using the `TEST()` macro.

### Steps to Write a Simple Test

<Steps>
  <Step title="Define a Test">
    Use the `TEST()` macro with two valid C++ identifiers: the test suite name and the test name.

    ```cpp
    TEST(FactorialTest, HandlesZeroInput) {
      EXPECT_EQ(Factorial(0), 1);
    }
    ```

    - The suite name `FactorialTest` groups related tests.
    - The test name `HandlesZeroInput` describes this specific test.
  </Step>
  <Step title="Use Assertions to Verify Behavior">
    Use GoogleTest assertions like `EXPECT_EQ` to verify your code produces expected results.

    Example uses `EXPECT_EQ(actual, expected)` to check equality.
  </Step>
  <Step title="Compile the Test Program">
    Compile your test program by linking with GoogleTest (usually `gtest` or `gtest_main`).

    Example using g++ and pkg-config:

    ```bash
    g++ -std=c++17 -isystem /path/to/googletest/include \
      -pthread your_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o your_test
    ```
  </Step>
  <Step title="Run All Tests">
    Run the resulting binary. GoogleTest automatically discovers and runs all tests.

    ```bash
    ./your_test
    ```
  </Step>
</Steps>

---

## 3. Example: Testing a Factorial Function

Suppose you have a simple function to compute the factorial of a non-negative integer:

```cpp
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

You can write a test suite to validate this function:

```cpp
#include <gtest/gtest.h>

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### What Happens Here?

- `TEST()` macros define two tests in the `FactorialTest` suite.
- `EXPECT_EQ()` assertions check that the output matches expected factorial values.
- The `main()` function initializes GoogleTest and runs all tests.

---

## 4. Understanding Assertions

GoogleTest provides many assertions to verify conditions:

- `EXPECT_*` assertions report **non-fatal failures**; the test continues after failure, showing all issues.
- `ASSERT_*` assertions report **fatal failures**; the test stops immediately if an assertion fails.

For instance, `EXPECT_EQ(a, b)` checks that `a == b`.

You can append custom failure messages like this:

```cpp
EXPECT_EQ(x.size(), y.size()) << "Vectors x and y differ in length";
```

Use custom messages to improve debugging clarity.

---

## 5. Tips for Writing Effective Tests

- Group related tests using the same test suite name.
- Use descriptive test names that explain the test intent about behavior.
- Prefer `EXPECT_*` unless continuing after failure is meaningless (e.g., dereferencing a null pointer).
- Avoid underscores (`_`) in test suite and test names to prevent internal naming conflicts.
- Link with `gtest_main` where possible to avoid writing your own `main()` function.

---

## 6. Verifying Your Test Run

When you run your test binary, GoogleTest outputs a summary:

```shell
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

- `[  PASSED  ]` confirms all tests passed.
- Failures show detailed messages with file and line numbers.

---

## 7. Troubleshooting Common Issues

- **GoogleTest Not Found:** Ensure include directories and libraries for GoogleTest are correctly specified.
- **Linking Errors:** Check that you link against `gtest` and `gtest_main` (or provide your own `main()`).
- **Test Not Running:** Verify test names and that `RUN_ALL_TESTS()` is called.
- **Ignoring RUN_ALL_TESTS result:** Always return the result of `RUN_ALL_TESTS()` from your `main()`.

<Accordion title="How to fix linking errors related to GoogleTest?">
Ensure you link all required libraries, e.g.,

```bash
g++ your_test.cc -lgtest -lgtest_main -pthread
```
Paths to the libraries must be correct.
</Accordion>

<Accordion title="Why does my test always pass even if assertions fail?">
Make sure your `main()` returns the value of `RUN_ALL_TESTS()`, as the test framework uses the return code to determine success.

```cpp
return RUN_ALL_TESTS();
```
</Accordion>

---

## 8. Next Steps

- Explore [Test Fixtures](../primer.md#same-data-multiple-tests) to reuse common setup across multiple tests.
- Learn to write and use mocks with the [gMock for Dummies](../gmock_for_dummies.md) guide.
- Deepen your understanding of assertions and matchers via the [Assertions Reference](../reference/assertions.md).
- Consult the [Advanced Guide](../advanced.md) for more sophisticated test patterns.

---

## References

- [GoogleTest Primer](../primer.md) for comprehensive introductory concepts.
- [GoogleMock Overview](https://github.com/google/googletest/blob/main/googlemock/README.md) for mocking support.
- [System Requirements](../getting_started/requirements_installation/system_requirements.md) to ensure your environment is compatible.
- [Writing and Running Your First Test](../guides/getting-started/writing-your-first-test.md) tutorial for step-by-step walkthrough.

---

By writing your first test according to this guide, you'll unlock the power of automated, fast, and reliable C++ testing with GoogleTest.
