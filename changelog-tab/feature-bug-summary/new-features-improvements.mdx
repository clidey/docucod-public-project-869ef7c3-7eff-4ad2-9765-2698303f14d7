---
title: "New Features & Improvements"
description: "Summarizes major additions and refinements in GoogleTest and GoogleMock, from new matchers to improved test discovery and usability. This page helps you understand how each release expands what’s possible for your testing workflows."
---

# New Features & Improvements

This page summarizes major additions and refinements in GoogleTest and GoogleMock, helping you understand how each release expands your testing possibilities. Whether it’s new assertion capabilities or improved usability in test discovery, these updates are designed to enhance your testing workflows effectively.

---

## 1. Enhanced Assertion Capabilities

GoogleTest continually enriches its assertion macros to provide clearer, more expressive validation of your code.

### Predicate Assertions with AssertionResult

Now you can improve error diagnostics in Boolean checks by writing predicate functions returning `testing::AssertionResult`. This enables failure messages to include detailed context about why a predicate failed without cluttering tests.

Example:

```cpp
// Predicate with detailed failure and success messages.
testing::AssertionResult IsEven(int n) {
  if ((n % 2) == 0)
    return testing::AssertionSuccess() << n << " is even";
  else
    return testing::AssertionFailure() << n << " is odd";
}

// Usage in tests
EXPECT_TRUE(IsEven(value));
```

This replacement for simple Boolean predicates adds transparent messaging to your checks, making it easier to identify root causes during test failures.

### Rich String Matching with GoogleMock

Using the matcher framework (see `EXPECT_THAT`), GoogleTest supports expressive string assertions including substring checks, regex matching, prefix and suffix tests:

```cpp
using ::testing::HasSubstr;
using ::testing::MatchesRegex;

ASSERT_THAT(foo_string, HasSubstr("needle"));
EXPECT_THAT(bar_string, MatchesRegex("\\w*\\d+"));
```

This goes beyond simple equality to verify nuanced string content directly.

### Floating-Point Predicate Format Functions

To handle rounding intricacies, float/double comparisons like `FloatLE` and `DoubleLE` are available as predicate-format functions that can be used flexibly inside `EXPECT_PRED_FORMAT2`. These improve precision in floating-point validations without expanding the macro list.

### Type Assertions

Static compile-time checks of type equality are supported via `testing::StaticAssertTypeEq<T1, T2>()`, which prevent template misuse and ensure correct test typenames.

## 2. Test Control and Execution Improvements

### Skipping Tests at Runtime

The new macro `GTEST_SKIP()` halts test execution at runtime based on conditions, offering a graceful mechanism to skip tests individually or across suites.

Example:

```cpp
TEST(SkipTest, DoesSkip) {
  GTEST_SKIP() << "Skipping this test for a known issue";
  FAIL();  // Not reached
}

class SkipFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    GTEST_SKIP() << "Skip all tests in this fixture.";
  }
};

// Tests in SkipFixture are all skipped.
```

This feature is particularly valuable in environments where external conditions may invalidate running certain checks.

### Advanced Test Filtering and Sharding

GoogleTest's test execution can be finely controlled through filters and environment variables. Whether to run subsets of tests, disable or enable tests dynamically, or run tests in parallel shards (faster on multiple machines), GoogleTest provides user-friendly options to optimize your test runs.

Highlights include:
- `--gtest_filter` for inclusive/exclusive test patterns
- `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` for distribution over shards
- `--gtest_shuffle` to randomize test order and detect interdependencies

### Event Listener API for Custom Run-Time Behavior

You can now extend or customize test output and logging by implementing the `TestEventListener` interface or derive from `EmptyTestEventListener` to selectively override events.

Use cases include custom reporters, integrating with external systems, or implementing resource leak checks triggered by test events.

## 3. New Test Types and Parameterization

### Value-Parameterized Tests

These allow running the same test logic with multiple input values without duplicating code. Define a fixture class inheriting from `TestWithParam<T>`, write your tests with `TEST_P`, then instantiate using `INSTANTIATE_TEST_SUITE_P` with generators like `Values`, `Range`, `Combine`.

Example:

```cpp
class FooTest : public ::testing::TestWithParam<int> {};

TEST_P(FooTest, HandlesPositiveInput) {
  EXPECT_GT(GetParam(), 0);
}

INSTANTIATE_TEST_SUITE_P(
    PositiveInts, FooTest, ::testing::Values(1, 2, 3));
```

This pattern enhances test scalability especially in data-driven scenarios.

### Typed Tests

To verify that multiple types satisfy the same set of tests, typed tests let you write type-parameterized fixtures and test logic once, applying it to various types.

Example:

```cpp
template <typename T>
class MyFixture : public ::testing::Test {};
using MyTypes = ::testing::Types<int, char, double>;
TYPED_TEST_SUITE(MyFixture, MyTypes);

TYPED_TEST(MyFixture, IsDefaultConstructible) {
  TypeParam value = TypeParam();
  (void)value;  // Silence unused warning
  SUCCEED();
}
```

### Type-Parameterized Tests

For greater flexibility, test logic can be defined separately and instantiated with types later using `TYPED_TEST_SUITE_P` with explicit registration and instantiation macros, allowing library-style abstract tests usable by multiple consumers.

## 4. Improved Debugging and Output Controls

### Detailed Failure Messages and Traces

`SCOPED_TRACE` lets you annotate scopes so failures report additional contextual traces. This is crucial when the same subroutine is called multiple times from different test locations.

Example:

```cpp
SCOPED_TRACE("Iteration i=5");
EXPECT_EQ(foo(5), expected_value);
```

Failure output will include this trace, helping pinpoint which iteration failed.

### Assertion Placement Advice

Due to C++ limitations and GoogleTest design, fatal assertions (`ASSERT_*`) can only be used in `void` functions. Constructors/destructors cannot contain fatal assertions; prefer `SetUp`/`TearDown` instead.

For non-void functions, use non-fatal assertions (`EXPECT_*`) or design predicate functions returning `AssertionResult` for detailed failures.

### XML and JSON Output Formats

GoogleTest can emit XML and JSON test reports for integration with CI and other analysis tools using the `--gtest_output` flag. These reports include test properties, failure details, and timing, formatted conforming to standard schemas.

## 5. Death Test Enhancements

GoogleTest supports death tests verifying process termination behavior. With configurable styles (`fast` vs `threadsafe`), improved support for multi-threaded environments, and recommendations for naming test suites containing death tests (`*DeathTest` suffix), death tests are now easier to write and safer to use.

Best practices and caveats are documented to ensure death tests are robust and their output useful.

## 6. Mocking Framework Updates

GoogleMock, integrated with GoogleTest, has been expanded with:

- Declarative mock method definitions with `MOCK_METHOD` including qualifiers for const, noexcept, and reference qualifiers.
- Detailed expectation control using `EXPECT_CALL` with modifiers such as `Times`, `InSequence`, `After`, `WillOnce`, and `WillRepeatedly`.
- Support for controlling behavior of default actions via `ON_CALL`.
- Wrappers like `NiceMock`, `NaggyMock`, and `StrictMock` to manage warnings on uninteresting calls and enforce call expectations.

These updates empower users to write expressive, maintainable mock-based tests that verify complex interactions cleanly.

## 7. Migration and Upgrade Guidance

Whenever GoogleTest adds or refines features affecting test macros, lifecycle, or mocking behavior, clear migration paths and upgrade guides are provided to help users adapt their test suites smoothly. Users should consult these when moving between versions.

---

## Practical Tips & Best Practices

- **Use predicate assertions for complex checks:** Instead of opaque `EXPECT_TRUE(cond)`, write predicates returning `AssertionResult` for informative failure messages.
- **Leverage parameterized and typed tests:** To scale tests across inputs and types without duplication.
- **Add scoped traces:** Use `SCOPED_TRACE` inside loops or repeated helper calls to clarify failure locations.
- **Name death test suites with `*DeathTest`:** Ensures proper test ordering and execution.
- **Skip tests gracefully when needed:** Use `GTEST_SKIP()` to conditionally bypass tests.
- **Suppress default output when adding listeners:** Remove the default printer if replacing with custom event listeners to avoid clutter.
- **Always check `RUN_ALL_TESTS()` return value:** It signals overall test success or failure.

---

For further detailed examples and API specifics, please see the related GoogleTest and GoogleMock guides and references linked below.

---

## See Also

- [Advanced GoogleTest Topics](../advanced.md) for in-depth features and usage patterns.
- [Testing Reference](../reference/testing.md) for all macro specifications.
- [Mocking Reference](../reference/mocking.md) for mock object definitions and expectations.
- [Assertions Reference](../reference/assertions.md) for all assertion macros.
- [Parameterized and Typed Tests](../api-reference/testing-framework/parameterized-and-typed-tests.mdx) for test parameterization details.
- [Death Tests Documentation](../api-reference/testing-framework/death-tests.mdx) for process termination test capabilities.
- [Mock Strictness Guide](../guides/practical-testing-patterns/mock-strictness.mdx) for managing mock call behavior.
- [Upgrade Guide](../changelog-tab/upgrade-breaks/upgrade-guide.mdx) for adaptation steps between releases.
