---
title: "Strict, Naggy, and Nice Mocks"
description: "Describes the NiceMock, NaggyMock, and StrictMock utilities for controlling the behavior of mocks with uninteresting calls. Helps users select the right mock policy according to their codebase or test isolation needs."
---

# Strict, Naggy, and Nice Mocks

GoogleMock provides three specialized mock wrappers — **NiceMock**, **NaggyMock**, and **StrictMock** — designed to control how uninteresting calls, that is, calls to mock methods without explicit expectations, are handled in tests. Choosing the right kind of mock helps you balance between verbosity, strictness of test enforcement, and test maintainability.

---

## Overview

By default, GoogleMock treats uninteresting calls as "naggy" — meaning it allows such calls but emits warnings to alert you about potential unexpected behaviors. The three mock wrappers let you adjust this default behavior:

| Wrapper         | Behavior on Uninteresting Calls                | Use Case Summary                                    |
|-----------------|------------------------------------------------|----------------------------------------------------|
| `NiceMock<T>`   | Suppresses warnings; uninteresting calls are silently allowed | Use when you want to ignore unimportant calls and reduce test noise for clearer, focused tests |
| `NaggyMock<T>`  | Issues warnings on uninteresting calls (default behavior)    | Useful during initial development or debugging where you want to detect unexpected calls but not fail immediately |
| `StrictMock<T>` | Treats uninteresting calls as test failures                | Enforces precise expectations, failing tests immediately on unexpected calls, improving correctness assurance |

Each is a class template that inherits from your mock class `T`, and can be constructed with any constructor parameters accepted by `T`. This makes them drop-in replacements for your mock types without further changes.

<Check>
`NiceMock<T>`, `NaggyMock<T>`, and `StrictMock<T>` are designed to alter the strictness of handling calls _without_ expectations. Importantly, they do _not_ affect calls that don't match existing expectations, known as "unexpected calls." Those are always treated as errors.
</Check>

---

## When to Use Which Mock

### NiceMock

Use `NiceMock` to reduce noise when uninteresting calls are okay but spurious warnings clutter your test results. This is valuable when the tests focus only on specific behaviors and do not care about other method calls. It leads to more maintainable tests with less upkeep when code changes.

Example:

```cpp
using ::testing::NiceMock;

NiceMock<MockDatabase> db;
EXPECT_CALL(db, Connect());
// Tests exercise code using 'db'. Uninteresting calls produce no warnings.
```

### NaggyMock

This is the current default behavior of bare mocks and `NaggyMock`. Warnings are emitted on every uninteresting call, helping detect possible unintended calls without failing the test.

Use this when you want visibility into unexpected method invocation patterns, useful during test development and debugging phases.

Example:

```cpp
using ::testing::NaggyMock;

NaggyMock<MockLogger> logger;
EXPECT_CALL(logger, LogError());
// Uninteresting calls emit warnings, reminding you to add expectations if needed.
```

### StrictMock

`StrictMock` treats any uninteresting call as an error that will make the test fail immediately. Use it when you want to enforce exact expectations and ensure no unexpected calls occur.

This makes your tests brittle but highly precise, preventing unpredicted code paths. It is recommended only when maximum test rigor is required.

Example:

```cpp
using ::testing::StrictMock;

StrictMock<MockService> service;
EXPECT_CALL(service, Start());
// Any unexpected or un-interested method call will fail the test.
```

---

## Important Usage Notes

- You can create `NiceMock`, `NaggyMock`, or `StrictMock` objects using the same constructors as the underlying mock class `T` by forwarding the parameters directly.

- These wrappers only affect mock methods defined with the `MOCK_METHOD` macro directly in the mock class. Methods inherited from a base mock class or defined differently may not be affected by the strictness level.

- Nesting strictness wrappers, e.g., `NiceMock<StrictMock<T>>`, is unsupported and will trigger static assertions.

- The mock class `T` should have a virtual destructor to avoid undefined behavior, as the wrappers are subclasses.

- Calling uninteresting methods on a `NiceMock` will still throw if the method's return type is not default constructible and no default action is defined.

---

## Example: Suppress Warnings with NiceMock

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;

class MockPrinter {
 public:
  MOCK_METHOD(void, Print, (const std::string& message), ());
};

TEST(PrintTest, UsesNiceMock) {
  NiceMock<MockPrinter> printer;

  // No expectation on Print; uninteresting calls silently ignored.
  printer.Print("Hello");  // No warning.
}
```

## Example: Fail on Uninteresting Calls with StrictMock

```cpp
#include <gmock/gmock.h>
using ::testing::StrictMock;

class MockDevice {
 public:
  MOCK_METHOD(bool, Initialize, (), ());
  MOCK_METHOD(void, Shutdown, (), ());
};

TEST(DeviceTest, EnforcesStrictCalls) {
  StrictMock<MockDevice> device;

  EXPECT_CALL(device, Initialize());

  device.Initialize();       // OK
  device.Shutdown();         // Error: Uninteresting call causes failure
}
```

---

## How It Works Internally

Each wrapper registers itself upon construction with GoogleMock to inform the framework of the desired strictness for uninteresting calls:

- `NiceMock` allows uninteresting calls without warnings.
- `NaggyMock` allows them but logs warnings.
- `StrictMock` treats uninteresting calls as test failures.

The framework deregisters the modified behavior once the mock wrapper is destroyed to restore the original behavior.

---

## Controlling Verbosity at Runtime

GoogleMock provides a runtime flag `--gmock_verbose` to control how verbosely uninteresting calls are reported:

- `info`: Prints warnings with stack trace information.
- `warning`: Prints warnings without stack trace (default level).
- `error`: Suppresses warnings (equivalent to nice behavior at runtime).

This gives you additional control over warning output beyond what the mock wrapper class provides.

---

## Troubleshooting

- **Unexpected warnings despite using `NiceMock`:** Ensure you constructed your mock through `NiceMock<T>`, not just `T`.

- **Warnings persist on base class mock methods:** Only methods defined with `MOCK_METHOD` directly in your mock class respond to the wrappers.

- **Compilation errors applying wrappers to mocks already wrapped:** You cannot nest `NiceMock`, `NaggyMock`, or `StrictMock`; refactor your code to apply only one.

- **Destructor warnings or failures:** Confirm that your mock class has a virtual destructor to avoid undefined behavior.

---

## Summary

- `NiceMock<T>` suppresses uninteresting call warnings, making tests quieter and more maintainable.
- `NaggyMock<T>` issues warnings for uninteresting calls, useful for detecting potential issues early.
- `StrictMock<T>` treats uninteresting calls as failures, enforcing tight expectations.
- All three are drop-in replacements for mocks to adjust uninteresting call behavior per test requirements.

---

## References & Next Steps

- See the **[Mocking Reference](https://google.github.io/googletest/reference/mocking.html#NiceMock)** for full usage details.
- Understand **[uninteresting vs unexpected calls](https://google.github.io/googletest/gmock_cook_book.html#uninteresting-vs-unexpected)** to better grasp mock call behavior.
- Explore [Writing Your First Test](https://google.github.io/googletest/guides/getting-started/writing-your-first-tests) to see how to use mocks in test scenarios.
- Refer to **[Mocking Techniques Guide](https://google.github.io/googletest/guides/core-workflows/mocking-techniques.html)** to master creating mocks and setting expectations.


---