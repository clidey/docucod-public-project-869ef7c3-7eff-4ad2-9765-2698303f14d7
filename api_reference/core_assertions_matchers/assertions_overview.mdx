---
title: "Assertions Overview"
description: "Details the core assertion macros and interfaces available in GoogleTest, including equality, inequality, fatal/non-fatal assertions, type parameterization, and custom assertions. Guides users on when to use each assertion style and how to extend assertions for custom workflows."
---

# Assertions Overview

GoogleTest provides a comprehensive set of assertion macros to verify the behavior of your code during testing. These assertions enable precise validation of conditions, expressions, and values, helping you identify bugs and guarantee correctness.

To use these macros, include the header:

```cpp
#include <gtest/gtest.h>
```

Most assertion macros come in pairs: an `EXPECT_` variant for nonfatal failures that allow the test to continue, and an `ASSERT_` variant for fatal failures that abort the current function.

## Assertion Types and Usage

### Explicit Success and Failure

Sometimes it's necessary to explicitly succeed or fail a test when control flow determines test outcome.

- **`SUCCEED()`**: Reports a successful assertion. It is purely documentary and does not guarantee overall test success by itself.

- **`FAIL()`**: Reports a fatal failure to abort the current function. Only callable from functions returning `void`.

- **`ADD_FAILURE()`**: Reports a non-fatal failure, which lets the current function continue running.

- **`ADD_FAILURE_AT(file, line)`**: Reports a non-fatal failure specifying the file and line number.

Example:

```cpp
switch(expression) {
  case 1:
    // ... some checks ...
    break;
  case 2:
    // ... some other checks ...
    break;
  default:
    FAIL() << "Unexpected case encountered";
}
```

### Generalized Assertions with Matchers

GoogleTest supports matcher-based assertions that enable expressive, readable checks.

- **`EXPECT_THAT(value, matcher)` / `ASSERT_THAT(value, matcher)`**

These macros verify whether a value satisfies a matcher condition, allowing composition and clear failure reports.

Example:

```cpp
#include <gmock/gmock.h>

using ::testing::AllOf;
using ::testing::Gt;
using ::testing::Lt;
using ::testing::StartsWith;

EXPECT_THAT(my_string, StartsWith("Hello"));
EXPECT_THAT(value, AllOf(Gt(5), Lt(10)));
```

If an assertion fails, an informative message including the value and expectation is printed.

### Boolean Assertions

- **`EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`**: Verifies a condition is true.

- **`EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`**: Verifies a condition is false.

Example:

```cpp
EXPECT_TRUE(is_initialized);
ASSERT_FALSE(has_error);
```

### Binary Comparison Assertions

These compare two values using standard comparison operators.

| Macro         | Meaning                    |
|---------------|----------------------------|
| `EXPECT_EQ`   | Verifies `val1 == val2`.   |
| `EXPECT_NE`   | Verifies `val1 != val2`.   |
| `EXPECT_LT`   | Verifies `val1 < val2`.    |
| `EXPECT_LE`   | Verifies `val1 <= val2`.   |
| `EXPECT_GT`   | Verifies `val1 > val2`.    |
| `EXPECT_GE`   | Verifies `val1 >= val2`.   |

All have `ASSERT_` variants for fatal failures.

Important notes:

- Comparing pointers uses pointer equality; for C strings, use string-specific macros.
- Use `nullptr` instead of `NULL` when comparing to pointers.

Example:

```cpp
EXPECT_EQ(expected_value, actual_value);
EXPECT_NE(nullptr, ptr);
```

### String Comparison Assertions

Specifically for C strings, allowing content comparison (not pointer equality):

| Macro             | Description                                 |
|-------------------|---------------------------------------------|
| `EXPECT_STREQ`    | Verifies two C strings are equal.           |
| `EXPECT_STRNE`    | Verifies two C strings are not equal.       |
| `EXPECT_STRCASEEQ`| Verifies two C strings are equal ignoring case. |
| `EXPECT_STRCASENE`| Verifies two C strings are not equal ignoring case. |

Example:

```cpp
EXPECT_STREQ("Hello", my_c_string);
```

### Floating-Point Comparison Assertions

Because floating-point comparisons require tolerance for rounding errors, special assertions are provided:

- **`EXPECT_FLOAT_EQ(val1, val2)` / `ASSERT_FLOAT_EQ(val1, val2)`**: Checks `float` values are approximately equal within 4 ULPs.

- **`EXPECT_DOUBLE_EQ(val1, val2)` / `ASSERT_DOUBLE_EQ(val1, val2)`**: Checks `double` values approximately equal within 4 ULPs.

- **`EXPECT_NEAR(val1, val2, abs_error)` / `ASSERT_NEAR(val1, val2, abs_error)`**: Checks values differ by no more than an absolute error.

Example:

```cpp
EXPECT_NEAR(computed_value, expected_value, 1e-5);
```

### Exception Assertions

Only valid if exceptions are enabled in the build environment.

- **`EXPECT_THROW(statement, exception_type)` / `ASSERT_THROW(statement, exception_type)`**: Verifies `statement` throws `exception_type`.

- **`EXPECT_ANY_THROW(statement)` / `ASSERT_ANY_THROW(statement)`**: Verifies `statement` throws any exception.

- **`EXPECT_NO_THROW(statement)` / `ASSERT_NO_THROW(statement)`**: Verifies `statement` does not throw.

Example:

```cpp
EXPECT_THROW(MyFunction(), std::runtime_error);
```

### Predicate Assertions

For complex conditions that are more naturally expressed as predicates:

- **`EXPECT_PRED*` and `ASSERT_PRED*` macros** allow predicates with 1 to 5 arguments.
- **`EXPECT_PRED_FORMAT*` and `ASSERT_PRED_FORMAT*`** accept predicate-formatters providing detailed failure messages.

Example using a predicate function:

```cpp
bool IsPositive(int n) { return n > 0; }
EXPECT_PRED1(IsPositive, value);
```

Example using a predicate formatter:

```cpp
testing::AssertionResult IsEqual(const char* expr1, const char* expr2, int a, int b) {
  if (a == b) return testing::AssertionSuccess();
  return testing::AssertionFailure() << expr1 << " and " << expr2 << " differ: " << a << " != " << b;
}
EXPECT_PRED_FORMAT2(IsEqual, x, y);
```

### Windows HRESULT Assertions

Special macros for Windows COM programming:

- **`EXPECT_HRESULT_SUCCEEDED(expression)` / `ASSERT_HRESULT_SUCCEEDED(expression)`**: Verifies that the expression results in a success HRESULT.

- **`EXPECT_HRESULT_FAILED(expression)` / `ASSERT_HRESULT_FAILED(expression)`**: Verifies that the expression results in a failure HRESULT.

Example:

```cpp
ASSERT_HRESULT_SUCCEEDED(shell.CoCreateInstance(L"Shell.Application"));
```

### Death Assertions

These verify that a piece of code terminates the process, useful for testing code that fatal-fails.

- **`EXPECT_DEATH(statement, matcher)` / `ASSERT_DEATH(statement, matcher)`**: Verifies the statement causes process termination and emits stderr matching matcher.

- **`EXPECT_DEATH_IF_SUPPORTED`**: Conditional death assertion depending on platform support.

- **`EXPECT_DEBUG_DEATH`**: Only runs death test in debug mode.

- **`EXPECT_EXIT(statement, predicate, matcher)` / `ASSERT_EXIT(...)`**: Verifies termination with specific exit code or signal matching the predicate and matcher.

Example:

```cpp
EXPECT_DEATH(DoSomethingDangerous(), "Fatal error occurred");
EXPECT_EXIT(NormalExit(), ::testing::ExitedWithCode(0), "Success");
```

## Streaming Custom Failure Messages

All assertions support streaming a custom user message using the `<<` operator. This is especially helpful to provide additional context about a failure.

Example:

```cpp
EXPECT_TRUE(is_valid) << "Input data was: " << input_data;
```

## Summary

GoogleTest's assertion macros provide a rich toolkit for verifying test conditions clearly and precisely. Whether you want simple boolean checks, detailed comparisons, matcher-based validations, or expect code to throw exceptions or crash, GoogleTest offers intuitive macros that integrate seamlessly with C++ test workflows.

---

## Troubleshooting & Best Practices

- Use `ASSERT_` variants when failures should stop the test immediately to prevent cascading errors.
- Prefer matcher-based assertions `EXPECT_THAT` for expressive and readable tests.
- Use floating-point assertions to avoid common pitfalls with approximate equality.
- When testing death conditions, be mindful of platform support and test environment.
- Always accompany assertions with meaningful custom messages to ease debugging.

## Next Steps & References

For more detailed information on assertions and matchers, see:

- [Matchers Reference](matchers.md)
- [User-Defined Assertions](user_defined_assertions.md)
- [Using Assertions Effectively Guide](guides/core-workflows/using-assertions.md)

For working with mocks and expectations, consult the [Mocking Reference](reference/mocking.md) and [gMock Cookbook](gmock_cook_book.md).

For API details of the assertion macros, browse the full [Assertions Reference](reference/assertions.md).

---

##### Navigation
- Return to [GoogleTest Overview](../gtest_overview/intro_value/what_is_googletest)
- Browse [Matchers Reference](matchers.md)
- Explore [Mocking Reference](mocking.md)
- See [Assertions Reference](assertions.md) for full coverage

---