---
title: "Assertions Reference"
description: "Detailed documentation of all assertion macros provided by GoogleTest, including equality, inequality, exception, and fatal/non-fatal variations. Includes usage examples, common patterns, and how assertions fit into the test flow."
---

# Assertions Reference

This page provides detailed documentation of all assertion macros offered by GoogleTest. It covers a wide array of assertion types including equality, inequality, exception handling, and variations that distinguish between fatal and non-fatal failures. Assertions are fundamental for verifying program correctness during testing, and this reference guides you through their usage, supported features, common patterns, and how they integrate with test execution flow.

---

## Understanding Assertions in GoogleTest

GoogleTest provides macros that serve as assertions to validate program behavior in tests. Assertions come in two forms:

- **EXPECT_***: Generate nonfatal failures, allowing tests to continue after failure.
- **ASSERT_***: Generate fatal failures, aborting the current function immediately upon failure.

All assertions support streaming custom failure messages using the `<<` operator, enabling you to append descriptive explanations to failures.

Example:

```cpp
EXPECT_TRUE(is_valid) << "Validation failed because the input is invalid.";
```

---

## Explicit Success and Failure

Use these macros when the test flow—not a Boolean condition—determines success or failure.

### SUCCEED()

Indicates explicit success; it doesn't cause the test to pass by itself but documents that a particular point was reached.

```cpp
SUCCEED();
```

### FAIL()

Generates a fatal failure and aborts the current function.

```cpp
FAIL() << "Unreachable code path hit!";
```

Only usable in `void` functions.

### ADD_FAILURE()

Generates a nonfatal failure but lets the test continue.

```cpp
ADD_FAILURE() << "Unexpected error encountered";
```

### ADD_FAILURE_AT(file, line)

Generates a nonfatal failure at a specific source file and line number.

```cpp
ADD_FAILURE_AT("foo.cc", 42) << "This part failed";
```

---

## General Assertions Using Matchers

Assertions can verify that a value satisfies a given matcher, allowing expressive and composable checks.

### EXPECT_THAT / ASSERT_THAT

Verifies whether a value matches a given [gMock matcher](matchers.md), providing rich, readable conditions.

Example:

```cpp
EXPECT_THAT(name, StartsWith("Hello"));
ASSERT_THAT(code, AllOf(Gt(5), Lt(10)));
```

Failing assertions print clear messages about the expected match and the actual value.

---

## Boolean Condition Assertions

Check Boolean expressions/

| Assertion       | Verifies that                                |
| ----------------|---------------------------------------------|
| EXPECT_TRUE() / ASSERT_TRUE() | The condition is true                   |
| EXPECT_FALSE() / ASSERT_FALSE() | The condition is false                 |

Example:

```cpp
EXPECT_TRUE(user.IsLoggedIn());
ASSERT_FALSE(is_admin);
```

---

## Binary Comparisons

Compare two values with standard comparison operators.

| Assertion       | Checks                                 |
| ----------------|---------------------------------------|
| EXPECT_EQ() / ASSERT_EQ() | `val1 == val2`                      |
| EXPECT_NE() / ASSERT_NE() | `val1 != val2`                      |
| EXPECT_LT() / ASSERT_LT() | `val1 < val2`                       |
| EXPECT_LE() / ASSERT_LE() | `val1 <= val2`                      |
| EXPECT_GT() / ASSERT_GT() | `val1 > val2`                       |
| EXPECT_GE() / ASSERT_GE() | `val1 >= val2`                      |

**Notes:**
- Use `EXPECT_STREQ` and related macros to compare C strings for content equality.
- Pointer comparisons in `EXPECT_EQ` and `EXPECT_NE` check pointer equality, not contents.

Example:

```cpp
EXPECT_EQ(expected_value, actual_value);
ASSERT_NE(nullptr, ptr);
```

---

## String Comparison Assertions

Assertions specialized for C string content comparison. These also support wide strings.

- `EXPECT_STREQ` / `ASSERT_STREQ`: String equality
- `EXPECT_STRNE` / `ASSERT_STRNE`: String inequality
- `EXPECT_STRCASEEQ` / `ASSERT_STRCASEEQ`: String equality ignoring case
- `EXPECT_STRCASENE` / `ASSERT_STRCASENE`: String inequality ignoring case

Example:

```cpp
EXPECT_STREQ("hello", c_str1);
ASSERT_STRCASEEQ("HELLO", c_str2);
```

---

## Floating-Point Comparison

Due to rounding errors in floating-point arithmetic, exact equality is often unsuitable. GoogleTest offers specialized macros:

- **EXPECT_FLOAT_EQ / ASSERT_FLOAT_EQ**: Approximately equal for `float` values, allowing 4 ULPs difference.
- **EXPECT_DOUBLE_EQ / ASSERT_DOUBLE_EQ**: Same as above for `double`.
- **EXPECT_NEAR / ASSERT_NEAR**: Values are within a specified absolute error tolerance.

Example:

```cpp
EXPECT_FLOAT_EQ(3.14159f, calculated_pi);
ASSERT_NEAR(expected, actual, 1e-5);
```

---

## Exception Assertions

Verify that expressions throw or don't throw exceptions. Requires exceptions enabled.

| Assertion             | Meaning                                  |
|-----------------------|------------------------------------------|
| EXPECT_THROW / ASSERT_THROW | Expression throws specified exception type |
| EXPECT_ANY_THROW / ASSERT_ANY_THROW | Expression throws any exception        |
| EXPECT_NO_THROW / ASSERT_NO_THROW | Expression does not throw any exception |

Example:

```cpp
EXPECT_THROW(func(), std::runtime_error);
ASSERT_NO_THROW(func());
```

---

## Predicate Assertions

For assertions where you want to verify a predicate function or functor with detailed failure information.

- `EXPECT_PREDn` / `ASSERT_PREDn`: For predicates returning `bool` with `n` arguments (1 to 5).
- `EXPECT_PRED_FORMATn` / `ASSERT_PRED_FORMATn`: For predicate-formatters returning `AssertionResult` allowing custom failure messages.

Example:

```cpp
bool IsEven(int n);  
EXPECT_PRED1(IsEven, value);

AssertionResult IsEvenDetailed(const char* expr, int n);
EXPECT_PRED_FORMAT1(IsEvenDetailed, value);
```

---

## Windows HRESULT Assertions

Specialized assertions for Windows HRESULT values.

- `EXPECT_HRESULT_SUCCEEDED` / `ASSERT_HRESULT_SUCCEEDED`: Verify HRESULT indicates success.
- `EXPECT_HRESULT_FAILED` / `ASSERT_HRESULT_FAILED`: Verify HRESULT indicates failure.

Example:

```cpp
ASSERT_HRESULT_SUCCEEDED(CoCreateInstance(...));
```

---

## Death Assertions

Verify that code causes the process to terminate as expected.

- `EXPECT_DEATH` / `ASSERT_DEATH`: Statement causes non-zero status termination with stderr output matching a pattern.
- `EXPECT_DEATH_IF_SUPPORTED` / `ASSERT_DEATH_IF_SUPPORTED`: Same as above, only if death tests are supported.
- `EXPECT_DEBUG_DEATH` / `ASSERT_DEBUG_DEATH`: Same as DEATH, only in debug builds.
- `EXPECT_EXIT` / `ASSERT_EXIT`: Statement causes termination with exit status matching a predicate and stderr output matching a pattern.

Example:

```cpp
ASSERT_DEATH({ DoUnsafeOperation(); }, "Error.*");
EXPECT_EXIT(ExitCleanly(), testing::ExitedWithCode(0), "Success");
```

---

## Usage Tips and Best Practices

- **Streaming Messages:** Append detailed failure messages to assertions using the `<<` operator for clarity.
- **Fatal vs. Nonfatal:** Understand when to use `ASSERT_*` to abort further execution and when to use `EXPECT_*` to continue.
- **Compare Strings Correctly:** Use string-specific macros to avoid pointer comparison pitfalls.
- **Floating-Point Tolerance:** Use floating-point approximations for numerical comparisons to avoid false failures.
- **Exception Handling:** Use the exception assertions when verifying exception-throwing behavior.
- **Death Tests:** Use death assertions to validate that error conditions cause expected program termination.
- **Predicate Assertions:** For complex conditions, prefer predicate assertions or predicate-formatters for better diagnostics.

---

## Example Snippets

### Basic Equality Assertion

```cpp
EXPECT_EQ(42, answer) << "Answer should be 42";
```

### String Equality Ignoring Case

```cpp
ASSERT_STRCASEEQ("Hello", user_input);
```

### Floating-Point Nearness

```cpp
EXPECT_NEAR(expected_value, actual_value, 0.001);
```

### Exception Assertion

```cpp
EXPECT_THROW({ RaiseError(); }, std::runtime_error);
```

### Death Test

```cpp
ASSERT_DEATH({ Crash(); }, "Fatal error detected");
```

### Predicate Assertion

```cpp
bool IsSorted(const std::vector<int>& v);
EXPECT_PRED1(IsSorted, my_vector);
```

---

For more details, explanations, and additional assertion macros, refer to the official GoogleTest [`Assertions Reference`](https://google.github.io/googletest/reference/assertions.html).

---

## How Assertions Fit Into Test Flow

Assertions monitor conditions during test execution:

- **On assertion failure:** GoogleTest reports the failure, including source location and failure message.
- **Nonfatal failures (`EXPECT_`):** Test continues, capturing all failures.
- **Fatal failures (`ASSERT_`, `FAIL`):** Abort the current test function immediately.
- **Death tests:** Special kinds that verify termination behavior of code under test.

Using assertions effectively ensures that tests accurately verify code correctness and provide clear diagnostics for triaging failures.

---

## Troubleshooting Assertion Failures

- Verify correct use of `EXPECT_` vs `ASSERT_` based on whether test continuation is desired.
- Use string comparison macros (`EXPECT_STREQ` etc.) rather than `EXPECT_EQ` for C strings.
- When comparing floating-points, prefer `EXPECT_FLOAT_EQ`, `EXPECT_DOUBLE_EQ`, or `EXPECT_NEAR`.
- Make sure exceptions are enabled when using exception assertions.
- For predicate assertions, ensure predicates do not have side effects and produce clear messages.

---

For extended tutorials, real-world usage patterns, common pitfalls, and best practices for writing GoogleTest assertions, see the [Mastering Assertions and Matchers](../guides/core-workflows/effective-assertions.md) guide.

---

## Related Documentation

- [Matchers Reference](matchers.md): Details on matchers used with `EXPECT_THAT`.
- [Actions Reference](actions.md): Control behavior of mocks in tests.
- [Mocking Reference](mocking.md): Using mocks with GoogleMock.
- [First Test & Quick Validation](../getting-started/first-steps-validation) for writing basic tests and running them.
- [Advanced GoogleTest Topics](../docs/advanced.md) for deeper understanding.
- [Writing Your First Unit Test](../guides/getting-started/writing-your-first-tests)

---

Understanding assertions is critical to leveraging GoogleTest's power for effective C++ testing. This page equips you with the knowledge and examples to apply assertions confidently and write tests that are both precise and maintainable.
