---
title: "Strict, Nice, and Naggy Mocks"
description: "Outlines how to use NiceMock, NaggyMock, and StrictMock wrappers to control how uninteresting or unexpected calls to mocks are handled. Describes motivations and sample scenarios for each style."
---

# Strict, Nice, and Naggy Mocks

GoogleMock offers three key wrappers — **NiceMock**, **NaggyMock**, and **StrictMock** — that control how mock objects handle *uninteresting* and *unexpected* calls during testing. These wrappers provide flexible, user-centric approaches to managing the balance between test strictness, verbosity, and resilience, enabling you to design tests that are both maintainable and precise.

---

## 1. Overview of Strictness Wrappers

When you write tests using mocks, some calls to mock methods may be:

- **Interesting**: explicitly expected by your test through `EXPECT_CALL`.
- **Uninteresting**: calls made to mock methods without any `EXPECT_CALL` specifying them.
- **Unexpected**: calls to mock methods that have expectations, but the arguments don't match any `EXPECT_CALL`.

By default, GoogleMock treats uninteresting calls as **naggy**, meaning they produce warnings.

The strictness wrappers allow you to customize that behavior **on a per-mock-object basis**:

| Wrapper       | Behavior on Uninteresting Calls                       | Typical Use Case                                             |
|---------------|------------------------------------------------------|--------------------------------------------------------------|
| `NiceMock<T>`  | Silences uninteresting call warnings                 | When you want to ignore calls your test is not interested in |
| `NaggyMock<T>` | Prints warnings for uninteresting calls (default)    | While developing tests or debugging behavior                 |
| `StrictMock<T>`| Fails the test on any uninteresting call             | When you want to catch **any** unexpected interaction early  |

All three wrappers are template subclasses of the mock class `T`. You construct them just like `T`, inheriting its constructors.

<Callout>
**Important:**
- These wrappers apply *only* to methods directly mocked via `MOCK_METHOD` macros in the class `T`.
- Wrappers do *not* affect mock methods inherited from base classes in general.
- Nesting wrappers (e.g., `NiceMock<StrictMock<T>>`) is not supported.
- Behavior of the default mock class (without these wrappers) is currently `NaggyMock`-like but may change to `NiceMock` in future versions.
</Callout>

---

## 2. Motivations and Use Cases

### NiceMock — "The Gentle Test Partner"

Imagine you have a mock object with methods called by the code under test that you're not particularly worried about for your scenario. You want to avoid cluttering test output with messages for calls you don't care about.

Using `NiceMock`:

```cpp
using ::testing::NiceMock;

NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, ImportantMethod());
... code that uses mock_foo ...
```

- Suppresses warnings on uninteresting calls.
- Allows your tests to focus on expected interactions only.
- Supports constructing mocks with any constructor arguments `MockFoo` supports.

### NaggyMock — "The Informative Default"

By default, mocks behave like `NaggyMock`. It warns you if your mock methods get called when you didn't specify expectations.

Use case:

```cpp
using ::testing::NaggyMock;

NaggyMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, RequiredMethod());
... code that uses mock_foo ...
```

- Helps catch subtle unintended interactions with mocks.
- Useful during initial development or debugging phases.

### StrictMock — "The Enforcer"

When you want to treat uninteresting calls as **test failures**, use `StrictMock`.

```cpp
using ::testing::StrictMock;

StrictMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, ExpectedMethod());
... code that uses mock_foo ...
```

- Fails the test if any mock method is called without a matching `EXPECT_CALL`.
- Ensures highest discipline over the interactions.

---

## 3. Using Strictness Wrappers: Practical Tips

### Construction and Usage

- Construct these wrappers as you would construct the base mock:

```cpp
NiceMock<MockFoo> nice_foo;               // Default constructor
NiceMock<MockBar> nice_bar("hello");    // Passes constructor arguments
NiceMock<MockBar> nice_bar2('a', 'b', "c", ...);
```

- They transparently expose all `MockFoo` methods.
- Use wherever `MockFoo` is expected, since they subclass the mock.

### Common Pitfalls

- Wrappers only affect direct `MOCK_METHOD` methods in `T`, not inherited members.
- Avoid nesting wrappers; the system won't support it and may cause confusing behavior.
- Be cautious about mock classes without virtual destructors — sometimes wrappers won’t behave correctly.

### Dropping Warnings in Verbose Modes

- When running tests with higher verbosity (`--gmock_verbose=info`), `NiceMock` objects can still print informational logs for uninteresting calls, but won’t produce warnings.

---

## 4. Examples

### Suppressing Uninteresting Call Warnings with `NiceMock`

```cpp
class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, Compute, (int x), ());
};

// Usage:
NiceMock<MockFoo> mock_foo;
EXPECT_CALL(mock_foo, DoThis());  // Expect this method

mock_foo.DoThis();                 // Ok, expected
mock_foo.Compute(42);             // Uninteresting, no warnings!
```

### Getting Warning on Uninteresting Calls with `NaggyMock`

```cpp
NaggyMock<MockFoo> naggy_foo;

// No expectation on Compute()
naggy_foo.Compute(42);  // Logs a warning about uninteresting call
```

### Failing on Uninteresting Calls with `StrictMock`

```cpp
StrictMock<MockFoo> strict_foo;

// No expectation on Compute(), so the following fails
strict_foo.Compute(42);  // Test fails immediately
```

---

## 5. Internal Mechanics (High-level Concept)

Each strictness wrapper registers its mock instance with GoogleMock's internal registry to configure the behavior on uninteresting calls.

- `NiceMockImpl` registers to allow uninteresting calls.
- `NaggyMockImpl` registers to warn.
- `StrictMockImpl` registers to treat as errors.

When the wrapper is destructed, it unregisters itself.

---

## 6. Best Practices & Recommendations

- **Use `NiceMock` for most scenarios.** It leads to clean tests with less noise, improving maintainability.
- Use **`NaggyMock` when initially developing or debugging tests** to catch unexpected calls without failing.
- Reserve **`StrictMock` for very critical tests or during final phases** where you want to enforce exact interaction protocols.
- Always ensure the mocked class has a virtual destructor to avoid surprises.
- Avoid mixing and nesting these wrappers for the same mock.
- Consider using `EXPECT_CALL` with `.Times(AnyNumber())` if you want to document calls without enforcing strict checking.

---

## 7. Troubleshooting

### Unexpected Uninteresting Calls

- If you see warnings or failures for uninteresting calls, verify if you:
  - Need to add expectations for those calls.
  - Want to suppress warnings using `NiceMock`.

### Mock Class Incompatibility

- Wrappers may not affect mock methods declared in base classes due to C++ limitations — review your class hierarchy.

### Destructor Warnings

- If strictness wrappers behave unexpectedly during destruction, ensure your mock class has a virtual destructor.

### Verbosity Control

- Use `--gmock_verbose` flag (`error`, `warning`, `info`) to tune message verbosity.

---

## 8. References & Further Reading

- [gMock Cookbook: The Nice, the Strict, and the Naggy](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#NiceStrictNaggy)
- [Mocking Reference: NiceMock, NaggyMock, StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)

---

## 9. Quick Summary Code Snippet

```cpp
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockTurtle {
 public:
  MOCK_METHOD(void, PenDown, (), ());
  MOCK_METHOD(void, Forward, (int distance), ());
};

// NiceMock suppresses uninteresting call warnings.
NiceMock<MockTurtle> nice_turtle;
EXPECT_CALL(nice_turtle, PenDown());
nice_turtle.PenDown();
nice_turtle.Forward(10);  // No warning

// NaggyMock warns on uninteresting calls (default behavior).
NaggyMock<MockTurtle> naggy_turtle;
EXPECT_CALL(naggy_turtle, PenDown());
naggy_turtle.PenDown();
naggy_turtle.Forward(10);  // Warning logged

// StrictMock treats uninteresting calls as test failures.
StrictMock<MockTurtle> strict_turtle;
EXPECT_CALL(strict_turtle, PenDown());
strict_turtle.PenDown();
strict_turtle.Forward(10);  // Test fails
```

---

<Info>
Remember, these wrappers help you tailor how strict your tests are about unexpected mock calls. Choose the right one based on your testing goals and team preferences.
</Info>