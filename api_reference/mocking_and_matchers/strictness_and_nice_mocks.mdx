---
title: "Strict, Naggy, and Nice Mocks"
description: "Configure how mocks respond to unexpected calls—ignore them, warn, or error out—using NiceMock, NaggyMock, and StrictMock. Learn practical strategies for progressive test hardening and team adoption."
---

# Strict, Naggy, and Nice Mocks

Configuring how your mocks handle methods called without explicit expectations is critical for precise and maintainable testing. GoogleMock (gMock) provides three strictness levels you can apply to mock objects to control this behavior: `NiceMock`, `NaggyMock`, and `StrictMock`. This page explains these modifiers, their differences, best practices for use, and practical strategies for incremental test suite hardening.

---

## Understanding Uninteresting vs Unexpected Calls

Before diving into the strictness modifiers, it's essential to grasp the difference between *uninteresting* and *unexpected* calls:

- **Uninteresting calls** are calls to mock methods **without any `EXPECT_CALL` set**. In other words, your test has made no assertion or expectation about these calls.
- **Unexpected calls** are calls to methods that have some `EXPECT_CALL` set, but the arguments in the call **do not match any of the expectations**.

gMock:

- Treats all **unexpected calls as errors**.
- By default, treats **uninteresting calls as warnings** (naggy behavior).

Use modifiers to customize this behavior according to your test needs.

---

## The Strictness Modifiers: `NiceMock`, `NaggyMock`, and `StrictMock`

### Overview

| Modifier      | Behavior on Uninteresting Calls                   | Effect on Unexpected Calls              | Use Cases / Notes                         |
|---------------|---------------------------------------------------|----------------------------------------|------------------------------------------|
| `NiceMock<T>` | Suppresses warnings on uninteresting calls        | Still errors on unexpected calls       | Recommended for general use; less noisy  |
| `NaggyMock<T>`| Prints warnings on uninteresting calls (the default) | Errors on unexpected calls              | Useful during initial test debugging      |
| `StrictMock<T>`| Treats uninteresting calls as errors              | Errors on unexpected calls              | Use to enforce strict interaction contracts |

All three are class templates that derive from your mock class, so you can use them interchangeably anywhere your original mock class is used.

### Creating a Nice Mock

```cpp
using ::testing::NiceMock;

TEST(MyTest, Example) {
  NiceMock<MockFoo> mock_foo;
  EXPECT_CALL(mock_foo, DoSomething());
  // Calls to other methods without expectations generate no warnings.
  ...
}
```

Use the same pattern for `NaggyMock` and `StrictMock` by replacing the modifier accordingly.

### Constructor Compatibility

These strictness modifiers "inherit" their base mock classes' constructors. So, if your mock class `MockFoo` has constructors with parameters, you can instantiate a `NiceMock<MockFoo>` with those same parameters.

```cpp
NiceMock<MockFoo> nm(5, "param");  // Calls MockFoo(5, "param")
``` 

### Important Notes

- These modifiers only affect **uninteresting calls** (methods *without* expectations).
- **Unexpected calls** always result in errors regardless of strictness modifier.
- They only affect mock methods defined directly inside the mock class with `MOCK_METHOD`, not inherited mock methods from base classes.
- Nesting strictness modifiers (e.g. `NiceMock<StrictMock<MockFoo>>`) is **not supported**.
- Your mock class should have a **virtual destructor** for these to behave correctly.

---

## Detailed Behavior

### Naggy (Default) Behavior

By default, mock objects behave like `NaggyMock`: uninteresting calls trigger warnings but do not cause test failures.

For example:

```cpp
TEST(NaggyBehaviorTest, WarnsOnUninteresting) {
  MockFoo mock;
  mock.SomeMethod();  // No EXPECT_CALL - this prints a warning, not a failure.
}
```

### Nice Behavior

Making a mock "nice" suppresses all warnings on uninteresting calls:

```cpp
NiceMock<MockFoo> nice_mock;
nice_mock.SomeMethod();  // No warning or failure, even without expectations
```

Useful for reducing noise from mocks when certain method interactions aren't important for the test.

### Strict Behavior

Strict mocks treat uninteresting calls as test failures. Every call to a mock method with no expectation causes an immediate failure:

```cpp
StrictMock<MockFoo> strict_mock;
strict_mock.SomeMethod();  // Test failure: uninteresting call
```

This enforces the strongest contract, ensuring the test explicitly specifies *all* interactions.

---

## Progressive Test Hardening: Practical Strategies

You can use these strictness modifiers to progressively increase the strictness of your tests as they mature.

### Recommended Approach

1. **Develop with `NiceMock`** for fast and less noisy feedback.
2. **Use `NaggyMock` during debugging** to be notified of unexpected interactions.
3. **Adopt `StrictMock` selectively** on critical mocks or as a final phase to catch unintended calls.

This approach balances developer productivity with test robustness.

### Example Workflow

```cpp
// Start writing tests with NiceMock to suppress noise
NiceMock<MockFoo> mock_foo;

// Later add explicit expectations for core methods
EXPECT_CALL(mock_foo, ImportantMethod()).Times(1);

// Use NaggyMock for a test focusing on interaction debugging
NaggyMock<MockFoo> naggy_mock_foo;

// Finally, enforce full expectations in sensitive tests
StrictMock<MockFoo> strict_mock_foo;
EXPECT_CALL(strict_mock_foo, OnlyAllowedMethod());
```

### Suppressing Specific Warnings

If you want a default catch-all expectation without warnings, use an explicit `EXPECT_CALL` to accept any call:

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_)).Times(AnyNumber());
```

This removes warnings for that method while keeping strictness for others.

---

## Best Practices and Common Pitfalls

- **Do not overuse `StrictMock` everywhere**, as it increases test brittleness and maintenance.
- **Avoid mixing strictness modifiers in the same hierarchy**; pick one per mock instance.
- Always **specify expectations before using mock objects** to avoid undefined behavior.
- Remember that suppressing warnings using `NiceMock` does *not* suppress test failures on unexpected calls.
- Use `RetiresOnSaturation()` on expectations to avoid "sticky" expectations causing confusing failures.

---

## Troubleshooting

### Warning: "Uninteresting mock function call"

If you see this warning, it means a mock method was called without any expectation. Check whether:

- You intended the call to occur uninteresting and want to ignore it (use `NiceMock` or supply a default `EXPECT_CALL`).
- Or you forgot to specify an expectation, and this is a sign of missing coverage.

### Unexpected Call Failures

Unexpected calls always fail regardless of modifiers. Add appropriate `EXPECT_CALL` statements to allow these calls or explicitly disallow them by `.Times(0)`.

### StrictMock Not Enforcing

Verify that your mock class methods are defined using `MOCK_METHOD` inside the mock class itself and that you are not combining strictness modifiers.

---

## Summary

Modifiers to control mock call strictness empower you to write cleaner, more reliable tests:

- `NiceMock` silences warnings of uninteresting calls.
- `NaggyMock` (default) warns on uninteresting calls.
- `StrictMock` treats uninteresting calls as errors.

Use these strategically to tune your test suites over time, improving test fidelity without excessive noise.

---

## Related Documentation

- [Mock Object Creation](../mock_object_creation.md) — Define and instantiate mock classes.
- [Expectations and Actions](../expectations_and_actions.md) — Set behaviors and constraints on mock methods.
- [Argument Matching](../argument_matching.md) — Specify detailed matching criteria for mock calls.
- [Mocking Best Practices](../../guides/scenarios-patterns/mocking-best-practices.md) — Tips for maintainable mocking.

---

## Additional Resources

- [GoogleTest Mocking Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [gMock Cookbook — The Nice, the Strict, and the Naggy](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)

---

## Example: Using the Three Modifiers

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockDatabase {
 public:
  MOCK_METHOD(void, Connect, (), ());
  MOCK_METHOD(int, GetData, (int key), ());
};

TEST(DatabaseTest, NiceMockSuppressesWarnings) {
  NiceMock<MockDatabase> db;
  EXPECT_CALL(db, Connect());

  db.Connect();     // OK
  db.GetData(42);   // No warning
}

TEST(DatabaseTest, NaggyMockWarnsOnUninteresting) {
  NaggyMock<MockDatabase> db;
  EXPECT_CALL(db, Connect());

  db.Connect();     // OK
  db.GetData(42);   // Warning printed
}

TEST(DatabaseTest, StrictMockFailsOnUninteresting) {
  StrictMock<MockDatabase> db;
  EXPECT_CALL(db, Connect());

  db.Connect();     // OK
  db.GetData(42);   // TEST FAILURE
}
```
