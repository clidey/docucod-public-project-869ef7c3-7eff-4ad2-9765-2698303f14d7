---
title: "NiceMock, NaggyMock, and StrictMock"
description: "APIs for controlling the strictness of mock objects. Understand when to use NiceMock (silent on unexpected calls), NaggyMock (warn on unexpected calls), and StrictMock (fail on unexpected calls) to manage test brittleness and intent."
---

# NiceMock, NaggyMock, and StrictMock

## Overview

In Google Mock (gMock), controlling how mock objects react to *uninteresting* calls—calls to mock methods without explicit expectations—is crucial for test maintainability and clarity. The `NiceMock`, `NaggyMock`, and `StrictMock` wrappers provide fine-grained control over these behaviors to suit different testing needs.

These wrappers are template **classes** that inherit from your mock class (e.g., `MockFoo`) and modify the default handling of uninteresting calls:

- **`NiceMock<MockFoo>`** suppresses warnings on uninteresting calls, treating them silently.
- **`NaggyMock<MockFoo>`** (the current default behavior) issues warnings when uninteresting calls occur.
- **`StrictMock<MockFoo>`** treats uninteresting calls as test failures.

These strictness modifiers enable you to enforce or relax mock call policies to reduce test noise, detect unexpected behavior early, and make tests easier to maintain.

---

## Usage and Behavior

### What Are Uninteresting Calls?
Uninteresting calls occur when a mock method is invoked but has **no matching** `EXPECT_CALL` specification. By default, gMock treats mock objects as `NaggyMock`s, printing warnings for such calls.

### Why Use Different Strictness Modifiers?
Tests evolve. Strictness modifiers help you control test brittleness and noise:

- Use **NiceMock** when you have many calls to methods you don't want to explicitly specify, and you want to focus only on relevant behaviors.
- Use **NaggyMock** if you want to be informed of uninteresting calls without failing the test, useful during test development and debugging.
- Use **StrictMock** when you want to enforce that every call must be expected, ensuring no unexpected interaction slips through.

### Basic Syntax

```cpp
#include <gmock/gmock.h>
using ::testing::NiceMock;
using ::testing::NaggyMock;
using ::testing::StrictMock;

class MockFoo {
 public:
  MOCK_METHOD(void, DoThis, (), ());
  MOCK_METHOD(int, DoThat, (bool flag), ());
};

// Create mocks with different strictness:
NiceMock<MockFoo> nice_foo;      // Ignores uninteresting calls
NaggyMock<MockFoo> naggy_foo;    // Warns on uninteresting calls
StrictMock<MockFoo> strict_foo;  // Fails on uninteresting calls

// Usage in tests:
EXPECT_CALL(strict_foo, DoThis());
strict_foo.DoThis();

nice_foo.DoThat(true);  // No warning or failure if uninteresting
```

### Constructor Forwarding
`NiceMock`, `NaggyMock`, and `StrictMock` inherit all constructors from the base mock class, so you can initialize them as you would the original mock. For example, if `MockBar` has a constructor taking parameters:

```cpp
NiceMock<MockBar> nice_bar("hello");
StrictMock<MockBar> strict_bar(1, 2, 3);
```

### Behavior Summary

| Modifier        | Uninteresting Calls             | Unexpected Calls
|-----------------|--------------------------------|-----------------
| `NiceMock`      | Silently allowed (no warnings) | Fail as usual    
| `NaggyMock`     | Emits warnings (default)        | Fail as usual    
| `StrictMock`    | Fails test                     | Fails as usual   

### Note on Unexpected Calls
These wrappers only control the handling of uninteresting calls (no matching `EXPECT_CALL`). Unexpected calls (calls that mismatch existing expectations) always cause a test failure regardless of strictness modifier.

---

## How to Choose Which Modifier to Use

- **Avoid noisy tests:** Use `NiceMock` to suppress warnings when you aren't interested in calls to some methods.
- **Developing tests:** Use `NaggyMock` to get warnings that help discover missing expectations.
- **Enforce correctness:** Use `StrictMock` to fail fast when unexpected calls occur.

Generally, Google Mock currently defaults to `NaggyMock`. Plans exist to switch to `NiceMock` by default because it results in more maintainable tests.

<Check>
**Tip:** You can explicitly allow uninteresting calls to specific methods on a naggy or strict mock using catch-all expectations:
```cpp
EXPECT_CALL(mock_obj, SomeMethod(_)).Times(AnyNumber());
``` 
This suppresses warnings or failures for those calls.
</Check>

---

## Important Details and Limitations

- **Works only for mock methods declared directly with `MOCK_METHOD` in your mock class.**
If your mock class inherits mock methods, the behavior may be unaffected.

- **Nesting strictness modifiers is not supported.** For instance, `NiceMock<StrictMock<MockFoo>>` is invalid.

- **Virtual destructors are recommended** for your mock classes to ensure correct destruction and behavior.

---

## Practical Examples

### Example 1: Using NiceMock to silence uninteresting calls

```cpp
class MockLogger {
 public:
  MOCK_METHOD(void, LogInfo, (const std::string& msg), ());
  MOCK_METHOD(void, LogWarning, (const std::string& msg), ());
};

TEST(ExampleTest, LogsInfo) {
  NiceMock<MockLogger> logger;

  EXPECT_CALL(logger, LogInfo("Starting process"));

  // This call to LogWarning is uninteresting, but no warning is printed.
  logger.LogWarning("Minor issue detected");

  logger.LogInfo("Starting process");
}
```

### Example 2: StrictMock failing test on uninteresting call

```cpp
StrictMock<MockLogger> logger;
EXPECT_CALL(logger, LogInfo("Important event"));

logger.LogInfo("Important event");
logger.LogWarning("Unexpected warning");  // Test fails here
```

### Example 3: NaggyMock generates warning for uninteresting call

```cpp
NaggyMock<MockLogger> logger;

logger.LogWarning("Some warning"); // Warning printed
```

---

## Troubleshooting

### No Warning or Failure on Uninteresting Call?
- Confirm your mock method is declared using `MOCK_METHOD` directly in your mock class.
- Verify you are not using nested strictness wrappers.
- Check that your mock's destructor is virtual.

### Unexpected Calls Are Not Caught
- Remember strictness modifiers only affect uninteresting calls.
- Unexpected calls (calls that violate `EXPECT_CALL` matchers) always fail.
- Use proper `EXPECT_CALL` with matchers to specify allowed calls.

### Test Output Verbosity
- Control warning verbosity with the command-line flag `--gmock_verbose=LEVEL`, where LEVEL can be `info`, `warning`, or `error`.

---

## Summary
`NiceMock`, `NaggyMock`, and `StrictMock` modify how Google Mock treats uninteresting calls.
- Use `NiceMock` to ignore and silence warnings on such calls.
- Use `NaggyMock` (default) to warn about them.
- Use `StrictMock` to treat them as test failures.

These wrappers empower you to strike a balance between noisy tests and strict verification of interactions.

---

## Additional Resources
- [gMock Cookbook: Nice, Strict, and Naggy Mocks](https://google.github.io/googletest/gmock_cook_book.html#NiceStrictNaggy)
- [Mocking Reference: NiceMock, NaggyMock, and StrictMock](https://google.github.io/googletest/reference/mocking.html#NiceMock)
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html#Mocking_a_Normal_Class)

---