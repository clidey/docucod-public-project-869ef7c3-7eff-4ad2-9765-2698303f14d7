---
title: "Configuring GoogleTest in Your Project"
description: "Explains how to link GoogleTest libraries, include headers, and adjust project settings to enable testing. Helps users avoid common linking and configuration errors."
---

# Configuring GoogleTest in Your Project

This guide explains how to integrate GoogleTest into your C++ project by linking its libraries, including necessary headers, and adjusting build settings. By following these steps you will set up a solid foundation for writing and running your tests, avoiding common pitfalls such as linker errors or incompatible settings.

---

## 1. Prerequisites

Before configuring GoogleTest in your project, ensure the following:

- Your environment supports at least C++17.
- GoogleTest source or binaries are available (see the [Installing with CMake guide](/getting-started/prerequisites-installation/install-via-cmake) for setup).
- Your build system (e.g., CMake) is ready to incorporate external libraries.
- If using Windows, Visual Studio installed; for macOS, Xcode; for Linux, typical build essentials.

<Note>
GoogleTest requires C++17 or newer. Make sure your compiler is set to target this standard explicitly.
</Note>

---

## 2. Linking GoogleTest Libraries

You have two primary ways to link GoogleTest libraries into your project:

### A. Using Pre-built Installed Libraries

1. Install GoogleTest binaries on your system, typically with `make install` (/usr/local/ by default).
2. In your project's build configuration, use:

```cmake
find_package(GTest CONFIG REQUIRED)
target_link_libraries(your_test_target PRIVATE GTest::gtest GTest::gtest_main)
```

This approach uses the system-installed GoogleTest, simplifying linkage.

### B. Building and Linking GoogleTest From Source Within Your Project

Including GoogleTest source builds avoids compatibility issues by sharing compiler and linker settings:

1. Add GoogleTest as a Git submodule, or download and place it within your source tree.
2. Modify your `CMakeLists.txt` to add GoogleTest's directory as a subdirectory:

```cmake
add_subdirectory(path/to/googletest)
target_link_libraries(your_test_target PRIVATE gtest gtest_main)
```

3. Build your project; GoogleTest libraries are built alongside your code.

<Warning>
Avoid mixing debug and release builds of GoogleTest and your tests, especially on Windows. Using GoogleTest's `gtest_force_shared_crt` flag ensures runtime library compatibility between your tests and GoogleTest.
</Warning>

---

## 3. Including GoogleTest Headers

Include the primary GoogleTest header in your test source files as follows:

```cpp
#include <gtest/gtest.h>
```

Make sure your project’s include paths contain the directory where GoogleTest headers reside.

---

## 4. Adjusting Project Settings

### Compiler Flags

- Specify C++17 standard (or later) in your build configuration:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- On Windows, if GoogleTest is linked as static libraries, enable dynamic runtime linking compatibility:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

- If using pthreads explicitly, define:

```cmake
target_compile_definitions(your_test_target PRIVATE DGTEST_HAS_PTHREAD=1)
```

and link pthread:

```cmake
target_link_libraries(your_test_target PRIVATE pthread)
```

### Linker Flags

- When building GoogleTest as a shared library (DLL) on Windows, set these flags:

```cmake
target_compile_definitions(your_test_target PRIVATE DGTEST_LINKED_AS_SHARED_LIBRARY=1)
```

- Ensure your build system links GoogleTest libraries correctly.

---

## 5. Common Pitfalls and How to Avoid Them

- **Linker errors for undefined references:** Usually caused by missing static data member definitions outside class bodies or mismatched runtime library linkage.

- **Conflicts with Visual Studio runtimes:** Always synchronize your runtime linkage with GoogleTest's using `gtest_force_shared_crt` option.

- **Headers not found:** Verify include paths include GoogleTest's headers directory.

- **Mixing different build types (Debug vs Release):** Keep GoogleTest and your test executable built with matching configurations to avoid incompatibilities.

- **Missing default constructor in test fixtures:** Your test fixture classes **must** have a default constructor.

---

## 6. Verification

To confirm your project is correctly configured with GoogleTest:

1. Write a minimal test file, e.g., `example_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, Passes) {
    EXPECT_EQ(1, 1);
}
```

2. Build your test executable linking with GoogleTest libraries.
3. Run the test executable.

Expected output:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.Passes
[       OK ] SampleTest.Passes
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If this output appears, your configuration is successful.

---

## 7. Next Steps

- Proceed to [Writing and Running Your First Test](/getting-started/initial-configuration/first-test-case) to learn test authoring.
- Consult [Installing with CMake](/getting-started/prerequisites-installation/install-via-cmake) for detailed installation instructions.
- Review the [Troubleshooting Common Setup Issues](/getting-started/troubleshooting/common-errors) if you encounter problems.

---

## Additional Tips

- Use CMake’s `FetchContent` module to automate GoogleTest download and incorporation.

- Keep your GoogleTest version updated to benefit from fixes and new features.

- Follow naming conventions carefully in test suite and test names to avoid unexpected errors (see [FAQ](../../faq.md) for guidance).

- If you need to customize GoogleTest behavior, pass macros such as `-DGTEST_CREATE_SHARED_LIBRARY=1` in your compiler flags.

---

For detailed documentation about test macros, fixtures, and advanced configuration, see the [GoogleTest Testing Reference](../../docs/reference/testing.md) and [GoogleTest Primer](../../docs/primer.md).


---

*This page is part of the Getting Started series and focuses exclusively on configuring GoogleTest libraries, headers, and build settings.*

