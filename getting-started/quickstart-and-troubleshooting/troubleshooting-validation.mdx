---
title: "Troubleshooting & Common Issues"
description: "Offers actionable solutions to the most frequent setup and usage problems encountered by new users—such as build errors, missing headers, or test discovery issues—to streamline the first-run experience."
---

# Troubleshooting & Common Issues

This page delivers actionable solutions to the most frequent setup and usage problems new users face when working with GoogleTest and GoogleMock. Whether encountering build errors, missing headers, test discovery failures, or unexpected mock behavior, this guide equips you to swiftly overcome obstacles and achieve a smooth first-run experience.

---

## 1. Common Setup and Build Issues

### Problem: Build Errors Related to Missing Headers or Symbols

- **Cause**: Missing or incorrectly configured include paths for GoogleTest/GoogleMock headers.
- **Solution Steps**:
  1. Verify that your build system (e.g., CMake, Bazel) includes the correct paths to `googletest/include` and `googlemock/include`.
  2. If using CMake, ensure that `add_subdirectory(googletest)` is correctly invoked and your test target links to `gmock` and `gtest` libraries.
  3. Confirm your source files include the proper header:

     ```cpp
     #include <gtest/gtest.h>
     #include <gmock/gmock.h>
     ```

  4. Check for compiler compatibility — GoogleTest requires C++17 or higher, so make sure your compiler flags enable this (e.g., `-std=c++17`).

### Problem: Linker Errors When Using GoogleMock

- **Cause**: Omitting linkage to GoogleMock libraries or missing mock implementation.
- **Solution Steps**:
  1. Link your test executable against both `gmock` and `gtest` libraries.
  2. If you built GoogleMock and GoogleTest as static libraries, confirm the build order matches dependencies.
  3. When using Bazel, ensure your `BUILD` files include dependencies on `@com_google_googletest//:gmock` and `@com_google_googletest//:gtest`.

<Check>
Check for mixed runtime libraries — on Windows, mismatched runtime configurations (e.g., Debug vs. Release CRT) can cause link errors.
</Check>

---

## 2. Test Discovery and Execution Problems

### Problem: No Tests Are Detected or Run

- **Cause**: GoogleTest relies on test registration via macros. Issues can arise if:
  - Tests are not compiled into the executable.
  - The main test runner is missing or improperly configured.

- **Solution Steps**:
  1. Verify your test cases are declared using `TEST()` or `TEST_F()` macros.
  2. Ensure your test executable calls `testing::InitGoogleMock(&argc, argv);` before running `RUN_ALL_TESTS()`.

   ```cpp
   int main(int argc, char** argv) {
     testing::InitGoogleMock(&argc, argv);
     return RUN_ALL_TESTS();
   }
   ```

  3. Confirm your test executable is correctly linked and built.
  4. Run your tests with `--gtest_list_tests` to list all detected tests.

  5. If integrating with a build system or IDE, double-check test target inclusion and execution command.

### Problem: Tests Are Being Executed in an Unexpected Order

GoogleTest does not guarantee tests will run in declaration order due to dynamic registration.

- **Solution**: Avoid depending on test order. Instead, explicitly specify order dependencies using GoogleTest features like sequences or control test environment setup.

---

## 3. Mocking-Related Common Issues

### Problem: Mock Method Invokes Real Method Instead of the Mock

- **Cause**: The method to be mocked is not declared `virtual` in the base class.

- **Solution**: 
  - Confirm the base class declares all mockable methods as `virtual`.
  - If the method is non-virtual, consider using dependency injection with interface types or employ the [high-performance dependency injection technique](https://google.github.io/googletest/gmock_cook_book.html#MockingNonVirtualMethods) for mocking non-virtual methods.

<Tip>
Mocking non-virtual or static methods directly is not supported. You should refactor code to depend on interfaces or abstract classes where possible.
</Tip>

### Problem: Warning about Uninteresting Mock Function Calls

- **Cause**: Invoking a mock method without an `EXPECT_CALL` expectation set.
- **Explanation**: Such calls are considered "uninteresting". By default, GoogleMock generates a warning to notify possible missing expectations.

- **Solutions**:
  1. Add an `EXPECT_CALL` or `ON_CALL` with `Times(AnyNumber())` if the call is expected but unimportant.
  2. Use `NiceMock` wrapper to suppress these warnings:

     ```cpp
     using ::testing::NiceMock;
     NiceMock<MockClass> mock_object;
     ```

  3. Adjust the verbose level of GoogleMock with flag `--gmock_verbose=error` to hide warnings.

<Warning>
Suppress warnings by adding `EXPECT_CALL` without intent to verify calls leads to brittle tests and is not recommended.
</Warning>

### Problem: Confusing Multiple Warnings for the Same Expectation

- **Explanation**: GoogleMock reports failures at different points during test execution. While it may seem redundant, each warning references a distinct call or state change and helps diagnose complex expectation issues.

---

## 4. Using Strict, Nice, and Naggy Mocks

GoogleMock provides three types of mock wrappers affecting uninteresting call handling:

| Mock Type          | Behavior on Uninteresting Calls                       |
|--------------------|------------------------------------------------------|
| **NiceMock**       | Suppresses all warnings for uninteresting calls.     |
| **NaggyMock**      | Prints warnings on uninteresting calls (default).    |
| **StrictMock**     | Fails the test on any uninteresting call.            |

### How to Use:

- Wrap your mock class:

 ```cpp
 using ::testing::NiceMock;
 NiceMock<MockFoo> nice_mock;
 
 using ::testing::StrictMock;
 StrictMock<MockFoo> strict_mock;
 ```

- Be cautious when using `StrictMock` as it may cause brittle test failure.

- These wrappers only affect mock methods defined directly in the mock class via `MOCK_METHOD`. Base class mock methods might not be impacted.

---

## 5. Diagnosing Mock Expectation Failures

### Use Verbose Logging

Run your tests with `--gmock_verbose=info` to see detailed tracing of each mock function call, including:

- Which expectation it matched
- Argument values
- Stack trace of call site

This powerful tracing reveals why expectations fail or do not match as expected.

### Common Causes of Expectation Failures

- Argument mismatch due to using incorrect or insufficient matchers.
- Incorrect ordering or cardinality of expectations.
- Overlapping or conflicting expectations that shadow one another.

### Tips

- Use `EXPECT_CALL` sparingly and precisely — over-specification invites brittle tests.
- Use `ON_CALL` to define default mock behavior without verifying call counts.
- Employ sequences and `InSequence` to manage ordering.
- Use the `RetiresOnSaturation()` clause to prevent sticky expectations from causing unexpected failures.

---

## 6. Troubleshooting Checklist

| Issue                                    | Diagnostic Step                         | Potential Fix                                     |
|------------------------------------------|---------------------------------------|--------------------------------------------------|
| Build errors                             | Confirm header includes and build deps| Adjust CMake/Bazel or include paths               |
| No tests discovered                      | Run with `--gtest_list_tests`          | Verify test registration & main test runner       |
| Mock method calls real method            | Check method `virtual`ness              | Modify base class or mock non-virtual strategies  |
| Uninteresting call warnings              | Run with `--gmock_verbose=info`         | Use `NiceMock` or add appropriate `EXPECT_CALL`   |
| Unexpected mock calls                    | Check argument matchers & expectations| Refine matchers and call sequences                 |
| Multiple failure messages for one error | Use verbose output to trace call stack | Refactor tests with clearer expectations           |

---

## 7. Getting Further Help

- Review the [gMock FAQ](https://google.github.io/googletest/gmock_faq.html) for common questions.
- Explore the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for patterns and advanced usage.
- Consult [GoogleTest Mocking Reference](https://google.github.io/googletest/reference/mocking.html) for API details.
- See the Quickstart example in the documentation for a guided first test.

---

By methodically addressing the common pitfalls in setup, build, test execution, and mocking, you ensure productive onboarding with GoogleTest and GoogleMock. Use verbose tracing wisely to illuminate expectations and test flow, and leverage mock wrappers to control warning verbosity and enforce stricter test discipline.

<Info>
For comprehensive understanding, be sure to read related pages like "Your First Test: Quickstart Sample," and "Installation (All Platforms)" to prepare your environment fully.
</Info>
