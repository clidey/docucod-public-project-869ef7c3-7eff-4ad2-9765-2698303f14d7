---
title: "Your First Test: Quickstart Sample"
description: "Provides a minimal, copy-paste test example demonstrating GoogleTest and GoogleMock features, with annotated explanations to build user intuition around test structure and execution."
---

# Your First Test: Quickstart Sample

This guide walks you through a minimal, copy-paste example demonstrating the core features of GoogleTest and GoogleMock. You'll learn how to write and run your first test, including both basic assertions and mock expectations, with annotated explanations that build your intuition around test structure and execution.

---

## 1. Prerequisites & Environment Setup

Before running the sample test, ensure you have the following:

- A C++17 compatible compiler (GCC, Clang, MSVC).
- GoogleTest and GoogleMock built and linked with your project.
- Basic familiarity with C++ and your build environment (e.g., CMake, Bazel).

Make sure GoogleTest and GoogleMock are properly installed by following the installation guide: [Installation (All Platforms)](/getting-started/essential-setup/installation-multiple-platforms).


---

## 2. Minimal Sample Test Code

Below is a copy-paste-ready example illustrating GoogleTest and GoogleMock features. It shows:

- A simple test case verifying basic assertions.
- A mock class definition.
- Expectations and behaviors defined for mock methods.
- Test execution that verifies both assertions and mock expectations.

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::AtLeast;
using ::testing::Return;

// --- Define an interface to mock ---
class Turtle {
 public:
  virtual ~Turtle() = default;

  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
  virtual int GetX() const = 0;
  virtual int GetY() const = 0;
};

// --- Define a mock class using GoogleMock ---
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
  MOCK_METHOD(int, GetY, (), (const, override));
};

// --- System under test ---
class Painter {
 public:
  explicit Painter(Turtle* turt) : turtle_(turt) {}

  bool DrawSquare(int side_length) {
    turtle_->PenDown();
    for (int i = 0; i < 4; ++i) {
      turtle_->Forward(side_length);
      // Imagine Turn(90) is implemented
    }
    turtle_->PenUp();
    return true;
  }

 private:
  Turtle* turtle_;
};

// --- Simple assertion test ---
TEST(SimpleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
  EXPECT_TRUE(true);
  EXPECT_NE(5, 0);
}

// --- Test that uses the MockTurtle to verify interactions ---
TEST(PainterTest, DrawSquareCallsTurtleMethods) {
  MockTurtle mock_turtle;

  // Expect PenDown() to be called exactly once
  EXPECT_CALL(mock_turtle, PenDown())
      .Times(1);

  // Expect PenUp() to be called exactly once
  EXPECT_CALL(mock_turtle, PenUp())
      .Times(1);

  // Expect Forward(int) to be called exactly 4 times with any int arguments
  EXPECT_CALL(mock_turtle, Forward(testing::_))
      .Times(4);

  Painter painter(&mock_turtle);
  bool result = painter.DrawSquare(10);

  EXPECT_TRUE(result);
}

// --- Main function to run all tests ---
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 3. Explanation of Key Components

### Mock Class Definition

- `MockTurtle` derives from the `Turtle` interface.
- Each virtual method is mocked using the `MOCK_METHOD` macro.
- For const methods, the qualifier `(const, override)` is added.
- The mock class does not implement the methods manually; GoogleMock generates these.

### Setting Expectations

- `EXPECT_CALL` specifies how many times mock methods are expected to be called.
- Use `Times(n)` to specify exact call counts or other cardinalities as needed.
- Matchers like `_` (underscore) match any argument value.

### Test Logic Using Mocks

- The `Painter` class is given the mock object and its method invocation is tested.
- If method calls do not meet expectations, the test will fail immediately printing diagnostics.

### Assertions

- Within tests, use GoogleTest macros like `EXPECT_EQ` to verify test conditions.
- Assertions and mock expectations combine for comprehensive verification.


---

## 4. Running the Sample Test

Follow these steps:

1. **Create a source file** (e.g., `quickstart_test.cc`) and paste the above code.
2. Make sure your build system includes GoogleTest and GoogleMock headers and libraries.
3. Build the test executable.
4. Run the executable:

```bash
./quickstart_test
```

5. Observe output:
  - Successful tests will print `[  PASSED  ]` messages.
  - Failures print detailed diagnostics and source locations.

<Tip>
If you see warnings about "Uninteresting mock function call", consider adding `EXPECT_CALL` or using `NiceMock` to suppress them.
</Tip>

---

## 5. Best Practices & Tips

- Define mocks for interfaces your code interacts with, not concrete classes.
- Use matchers (`_`, `Eq()`, `Ge()`, etc.) to express argument expectations clearly.
- Avoid over-constraining expectations to keep tests maintainable.
- Prefer `ON_CALL` to define default behaviors, and reserve `EXPECT_CALL` for calls you want to verify occurrences.
- Use `Return()`, `WillOnce()`, and `WillRepeatedly()` to define mock method behaviors.

---

## 6. Troubleshooting

### Common Issues

- **Compiler errors on `MOCK_METHOD` usage:** Check for commas in template parameters; wrap such types in an extra set of parentheses or use type aliases.
- **Unexpected function calls warning:** Make sure every call has an expectation or use `NiceMock` to suppress.
- **Linker errors:** Verify correct linking to GoogleTest and GoogleMock libraries.
- **Tests not running:** Ensure `main()` calls `RUN_ALL_TESTS()` after `InitGoogleTest()`.

<Tip>
For detailed debugging of mock failures, run tests with the flag `--gmock_verbose=info` to see detailed call and expectation matching logs.
</Tip>

---

## 7. Next Steps

Once comfortable with this quickstart example, continue exploring:

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for advanced mocking recipes.
- [Mocking for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for foundational understanding.
- [Writing Your First Test](../guides/getting-started/first-test.md) to deepen test writing skills.
- [Mock Class Macros and Method Declarations](/api-reference/mocking-api/mock-class-macros) to master mock class definitions.


---

This minimal example serves as a foundation for creating reliable, expressive tests with GoogleTest and GoogleMock, enabling you to build robust C++ testing suites with confidence.
