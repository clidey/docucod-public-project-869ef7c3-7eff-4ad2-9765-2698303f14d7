---
title: "Running and Validating Tests"
description: "Learn how to execute your test suite and interpret the output. Explains invocation methods, expected outputs, how to spot and resolve issues, and ensures your test environment is fully operational."
---

# Running and Validating Tests

Learn how to execute your test suite effectively with GoogleTest, interpret the test output, and ensure that your test environment is properly initialized and running. This guide walks you through invocation methods, expected outputs, troubleshooting failed tests, and verifying your test setup.

---

## Table of Contents

1. [Executing Your Tests](#executing-your-tests)
2. [Understanding Test Output](#understanding-test-output)
3. [Interpreting Test Results](#interpreting-test-results)
4. [Ensuring Your Test Environment is Ready](#ensuring-your-test-environment-is-ready)
5. [Troubleshooting Common Issues](#troubleshooting-common-issues)
6. [Next Steps](#next-steps)

---

## Executing Your Tests

Running tests with GoogleTest is straightforward and consistent across supported platforms. Use the following steps to invoke your test executable and run the entire test suite.

### Step 1: Initialization

Before running tests, your test program should initialize GoogleTest:

- Call `testing::InitGoogleTest(&argc, argv);` in your `main()` function.
- This call parses GoogleTest command-line flags and sets up the test environment.

### Step 2: Run All Tests

- Call `RUN_ALL_TESTS()` after initialization. This macro executes all registered tests.
- It returns `0` if all tests pass, `1` otherwise.
- Return the result of `RUN_ALL_TESTS()` from your `main()` function.

### Minimal Example of `main()`

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Platform Notes

- On embedded platforms like Arduino, initialization and test running may happen in `setup()` and `loop()` functions.
- On QuRT platforms, argc and argv are unavailable; call `testing::InitGoogleTest();` without arguments.

<Callout type="check">
Make sure to call `InitGoogleTest()` exactly once before running tests, and `RUN_ALL_TESTS()` exactly once per test executable.
</Callout>

---

## Understanding Test Output

GoogleTest provides detailed textual feedback as tests run. Knowing how to read this output helps you quickly identify successes and failures.

### Output Structure

- **Test Suite Start**: Indicates how many tests will be run and which test suite is starting.
- **Test Start and End**: Each test prints `[ RUN      ]` when starting and `[       OK ]` or `[  FAILED  ]` upon completion.
- **Failures**: Failed tests are listed with detailed assertion messages and source line references.
- **Summary**: At the end, GoogleTest displays a summary tallying tests run, succeeded, failed, and skipped.

### Example Output

```none
Running main() from gtest_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
... Failure Message ...
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
[ RUN      ] FactorialTest.HandlesLargeInput
[       OK ] FactorialTest.HandlesLargeInput (0 ms)
[----------] 3 tests from FactorialTest (1 ms total)
[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput

 1 FAILED TEST
```

---

## Interpreting Test Results

Each test produces a result captured by GoogleTest. Here's how to interpret these results programmatically and visually.

### Test Status Categories

- **Passed**: All assertions succeeded without failures.
- **Failed**: At least one assertion failed fatally or non-fatally, or the test crashed.
- **Skipped**: Test was skipped (e.g., via `GTEST_SKIP()`).

### Programmatic Access to Test Results

- Use the [`testing::UnitTest`](reference/testing.md#UnitTest) singleton to query global test states.
- Use `current_test_info()` to obtain the currently running test’s metadata.
- Each `TestInfo` object provides methods like `.result()->Passed()`, `.Failed()`, or `.Skipped()`.

### Common Output Properties

- **Test Suite Names**: Group tests logically; useful in filtering and reporting.
- **Test Names**: Individual test identification.
- **Elapsed Time**: Duration each test took to run, helping identify bottlenecks.
- **Properties**: You can log key-value pairs with `RecordProperty()` to attach custom metadata to tests.

<Callout type="tip">
Use the `--gtest_filter` flag to run specific tests or test suites when debugging failures.
</Callout>

### Filtering Tests Example

Run only tests in `FactorialTest` except `HandlesLargeInput`:

```sh
./my_test --gtest_filter=FactorialTest.*-FactorialTest.HandlesLargeInput
```

---

## Ensuring Your Test Environment is Ready

Global and per-test environments may require setup before any tests run. Confirm that your environment initializes and tears down properly to avoid misleading failures.

### Global Environment Setup and Teardown

- Derive a class from `testing::Environment` and override `SetUp()` and `TearDown()`.
- Register using `testing::AddGlobalTestEnvironment(new YourEnvironment);` before calling `RUN_ALL_TESTS()`.

### Behavior of Global Environments During Test Run

- `SetUp()` is called before any tests run.
- If any `SetUp()` returns a fatal failure, tests do not execute.
- `TearDown()` runs after all tests complete, even if some tests fail or skip.

### Validating Environment Execution

- You can check environment effects by inserting logging or assertions in `SetUp()` and `TearDown()`.
- If your environment is not called, verify it’s registered correctly and before `RUN_ALL_TESTS()`.

---

## Troubleshooting Common Issues

When running tests, you may see unexpected results or issues. Use the following guidance to diagnose and fix them.

### Test Fails To Run or No Tests Are Found

- Confirm you have linked test files containing defined `TEST()` or `TEST_F()` cases.
- Ensure `RUN_ALL_TESTS()` is called exactly once.
- Check for filter flags that may exclude all tests (`--gtest_filter`).
- Use the `--gtest_list_tests` flag to verify the tests discovered by GoogleTest.

### Tests Indicate Failures but No Output

- Set `--gtest_brief=0` to see full output.
- Check if the test code calls `GTEST_SKIP()` or exits prematurely.

### Test Output Is Hard to Interpret

- Use `SCOPED_TRACE()` to add context to deeper calls within tests.
- Stream informative messages into assertions to clarify failures.
- Run individual failing tests using filters to isolate.

### Environment Setup Failures

- Incorporate non-fatal (`ADD_FAILURE()`) and fatal (`FAIL()`) assertions inside your `Environment::SetUp()` and `TearDown()` to catch issues early.
- GoogleTest will abort test execution on fatal failures during environment setup.

### Common Pitfalls

- Calling assertions (`ASSERT_*`, `EXPECT_*`) in constructors or destructors leads to undefined behavior; use `SetUp()` and `TearDown()` instead.
- Avoid calling `RUN_ALL_TESTS()` more than once.

<Callout type="warning">
For subtle setup errors or crashes, run tests under a debugger with `--gtest_break_on_failure` to halt execution on first failure.
</Callout>

---

## Next Steps

Once your tests run successfully and your environment is stable:

- **Explore Filtering and Selection**: Use `--gtest_filter` to run subsets.
- **Use Flags for Output Customization**: Adjust options like colored output (`--gtest_color`), XML/JSON reports (`--gtest_output`), and verbosity.
- **Incorporate Advanced Tests**: Look into parameterized, typed, and death tests.
- **Add Global Environments**: Use global setup for external resources.
- **Extend with Event Listeners**: Customize test reporting.

Refer to these guides for more advancement:

- [Writing Your First Test](../first-steps-with-tests/writing-first-test.md)
- [Test Discovery and Execution](../core_testing_workflows/test_discovery_execution.md)
- [Advanced GoogleTest Topics](../../advanced.md)
- [Troubleshooting Common Issues](../../getting-started/troubleshooting-validation/common-issues.md)

---

## References

- [`InitGoogleTest()` Documentation](reference/testing.md#InitGoogleTest)
- [`RUN_ALL_TESTS()` Documentation](reference/testing.md#RUN_ALL_TESTS)
- [`AddGlobalTestEnvironment()` Documentation](reference/testing.md#AddGlobalTestEnvironment)
- [GoogleTest Primer](primer.md) - To learn about writing tests
- [Test Event Listeners](reference/testing.md#TestEventListener) - For capturing test execution events

## Summary

You have learned how to initialize and run all your tests using GoogleTest, interpret the detailed output, and verify that your test environment setup completes successfully. Understanding this flow ensures that your tests execute as expected and failure messages provide valuable diagnostics for your test code and environment.

---

<CardGroup cols={2}>
<Card title="Best Practices">
- Always call `InitGoogleTest()` before `RUN_ALL_TESTS()`.
- Return the `RUN_ALL_TESTS()` result from `main()`.
- Use `--gtest_filter` to run specific tests.
- Use `AddGlobalTestEnvironment()` for global setup/teardown.
- Avoid fatal assertions in constructors/destructors.
</Card>
<Card title="Common Flags for Running Tests">
- `--gtest_list_tests` : List all tests without running.
- `--gtest_filter` : Filter which tests to run.
- `--gtest_break_on_failure` : Break on first failure.
- `--gtest_color` : Control colored output.
- `--gtest_output` : Generate XML or JSON reports.
</Card>
</CardGroup>

---

<AccordionGroup title="Additional Resources">
<Accordion title="Example main() using GoogleTest">
```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```
</Accordion>
<Accordion title="Debugging Test Failures">
- Use `--gtest_break_on_failure` to start debugger on failure.
- Run single test with filter for isolated debugging.
- Use `SCOPED_TRACE()` for better failure context.
</Accordion>
<Accordion title="Handling Global Environment">
- Subclass `testing::Environment`.
- Register with `AddGlobalTestEnvironment()`.
- Use `SetUp()` and `TearDown()` for setup/cleanup.
</Accordion>
<Accordion title="Interpreting Output Summary">
- `[ RUN ]` and `[ OK ]` indicate test start and success.
- `[ FAILED ]` marks a failed test.
- The final summary shows pass/fail counts.
</Accordion>
</AccordionGroup>

---

<Note>
For detailed API behavior, consult the official GoogleTest [Testing Reference](reference/testing.md#RUN_ALL_TESTS) and [Advanced Topics](advanced.md).
</Note>

