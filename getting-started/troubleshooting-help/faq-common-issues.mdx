---
title: "FAQ & Common Issues"
description: "Browse a curated set of frequently asked questions with actionable answers to help overcome roadblocks and common configuration mistakes. Includes links to community-created resources for extended troubleshooting."
---

# FAQ & Common Issues

Welcome to the FAQ & Common Issues page, your quick reference to overcome typical roadblocks and configuration mistakes when using GoogleMock. Whether you're facing installation doubts, usage quirks, or unexpected mock behaviors, this guide provides concise, actionable answers. Additionally, you'll find pointers to community resources for extended troubleshooting.

---

## Frequently Asked Questions

### 1. Why is my mock method calling the real implementation instead of the mock?
If you observe that the real method is called instead of the mocked one, ensure that the method is declared as `virtual` in your interface or base class. GoogleMock can only mock virtual methods unless you use advanced techniques like high-performance dependency injection for non-virtual methods. See [Mocking Non-Virtual Methods](https://google.github.io/googletest/gmock_cook_book.html#MockingNonVirtualMethods) for alternatives.


### 2. Can I mock functions with variadic arguments?
No. Functions with ellipsis (`...`) arguments cannot be directly mocked by GoogleMock since the framework cannot deduce the argument count or types. Instead, consider providing overloaded methods or wrapping the variadic function inside an interface that can be mocked.


### 3. How do I suppress warnings about uninteresting (unexpected) mock calls?
To reduce noisy warnings about calls made without explicit expectations, use `NiceMock<>` to create your mock objects. For example:

```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> nice_mock;
```

This suppresses warnings for calls without matching `EXPECT_CALL`s but still verifies calls with expectations.


### 4. How do I assert that a function is never called?
Use the `Times(0)` clause with `EXPECT_CALL`:

```cpp
EXPECT_CALL(mock_obj, MethodName(_)).Times(0);
```

Any call to `MethodName` will cause the test to fail.


### 5. Why am I getting heapcheck failures with mocks but not with real objects?
Make sure every class you mock has a **virtual destructor**. If the destructor is not virtual, deleting a pointer to a base class may skip calling derived destructors, causing leaks and other undefined behavior.


### 6. What does “newer expectations override older ones” mean?
GoogleMock searches expectations from newest to oldest, so later `EXPECT_CALL`s take precedence over earlier ones. This design allows you to define generic behavior upfront (e.g., in constructors) and refine or override them in specific tests by adding more specific expectations later.


### 7. How can I debug why an expectation is not met?
Run your tests with the `--gmock_verbose=info` flag. This option outputs detailed diagnostics showing which `EXPECT_CALL`s match each invocation, their arguments, and call stack information where applicable. For example:

```shell
./my_test --gmock_verbose=info
```

This enhanced output helps identify mismatched calls and incorrect expectations.


### 8. Can I mock overloaded functions?
Absolutely. Use the same `MOCK_METHOD` syntax for each overload. If ambiguity arises, helpers like `using Base::MethodName;` can bring in other overloads to avoid hiding. For const overloads, mark `MOCK_METHOD` with `(const, override)`.


### 9. How to handle mocks returning move-only types like `std::unique_ptr`?
You can mock methods returning move-only types by using the usual `MOCK_METHOD` declaration. When specifying actions, prefer lambdas that create and return new instances instead of `Return(std::move(...))` which only works once. Example:

```cpp
EXPECT_CALL(mock, Create()).WillRepeatedly([] { return std::make_unique<MyClass>(); });
```

For more details see the [Mocking Methods That Use Move-Only Types](https://google.github.io/googletest/gmock_cook_book.html#mocking-methods-that-use-move-only-types) section.


### 10. How can I verify expectations on a mock object before it is destructed?
By default, GoogleMock verifies expectations automatically upon destruction. However, if your mock is heap-allocated and owned elsewhere, you can force verification earlier using:

```cpp
::testing::Mock::VerifyAndClearExpectations(mock_pointer);
```

Use with care and avoid setting new expectations on the same mock after a verification.


---

## Common Issues and Solutions

### Installation and Setup

- **Issue:** Compilation errors due to missing C++17 support.
  - **Solution:** Ensure your compiler supports C++17. Refer to the [System Requirements](../../getting-started/setup-basics/system-requirements.md) for recommended compiler versions.

- **Issue:** Linker errors regarding missing gMock symbols.
  - **Solution:** Confirm that you link against both gMock and its dependency gTest libraries. If using CMake or Bazel, follow specific integration instructions.


### Configuration Problems

- **Issue:** Mock methods fail to override base methods.
  - **Solution:** Verify that function signatures match exactly, including const-qualifiers, noexcept, and calling conventions. Consider specifying the proper qualifiers in your `MOCK_METHOD` declarations.

- **Issue:** Cannot mock non-virtual or free functions.
  - **Solution:** Refactor your code to abstract those through interfaces or function wrappers; GoogleMock mocks virtual members only.


### Test Failures Due to Expectation Violations

- **Issue:** Tests fail with unexpected calls.
  - **Solution:** Check if all expected calls have been declared using `EXPECT_CALL`. For calls you want to allow but not test strictly, add catch-all expectations using wildcards (`_`) and `Times(AnyNumber())`.

- **Issue:** Tests fail because of call order.
  - **Solution:** Use `InSequence` or `EXPECT_CALL(...).After(...)` to enforce call order constraints explicitly.

- **Issue:** Too many or too few calls to a method.
  - **Solution:** Adjust `.Times(...)` clause to correspond accurately to your expected number of calls. Use flexible cardinalities like `AtLeast()` or `AnyNumber()` when appropriate.


### Best Practices to Avoid Common Pitfalls

- Always specify `EXPECT_CALL` **before** exercising code that calls the mock.
- Use `ON_CALL` for default behaviors without setting strict expectations.
- Avoid over-specifying call arguments to prevent brittle tests.
- Use `RetiresOnSaturation()` when the maximum call count should deactivate an expectation.


---

## Community Resources and Support

- **GoogleTest and GoogleMock GitHub Repository:** [https://github.com/google/googletest](https://github.com/google/googletest)
- **User Guide:** [https://google.github.io/googletest/](https://google.github.io/googletest/)
- **Google Testing Blog:** For design insights and tips
- **Stack Overflow:** Tag your questions with [`google-mock`](https://stackoverflow.com/questions/tagged/google-mock)
- **Public mailing lists and forums:** See project community documentation


---

## Troubleshooting Tips

<AccordionGroup title="Common Scenarios and Fixes">
<Accordion title="Uninteresting Call Warning">
Sometimes you see warnings like "Uninteresting mock function call" when calling methods without an `EXPECT_CALL`. This is informational, not an error. To silence it without strict checking, wrap your mock in `NiceMock<>` or set a default catch-all expectation with `.Times(AnyNumber())`.
</Accordion>
<Accordion title="Mock Method Not Called As Expected">
Use the `--gmock_verbose=info` flag when running tests to see detailed logs of calls and expectations, helping you identify mismatches in arguments or call counts.
</Accordion>
<Accordion title="Compilation Issues with Complex Mock Types">
Wrap complex return types or arguments containing commas in parentheses in `MOCK_METHOD` to avoid macro parsing errors, or use type aliases to clarify them.
</Accordion>
<Accordion title="Order of Expectation Failures">
If call order matters, use `InSequence` or `.After()` clauses; without these, expectations can match calls in any order.
</Accordion>
</AccordionGroup>


---

## Additional Reading

- [GoogleMock for Dummies](../gmock_for_dummies.md) — Beginner-friendly walkthrough
- [gMock Cookbook](../gmock_cook_book.md) — Recipes for mock creation and usage
- [gMock Cheat Sheet](../gmock_cheat_sheet.md) — Quick reference for macros and key functions
- [GoogleTest FAQ](../../faq/general-usage-faq/basic-getting-started-help.md) — General testing questions


---

Keep this FAQ page bookmarked as your first line of defense against common questions and issues. For more detailed guides on mock writing and advanced mocking techniques, explore the official [GoogleMock User Guide](https://google.github.io/googletest/gmock_for_dummies.html).


---

<Check>
Ensure you always declare expectations before exercising your mocks to avoid undefined behavior.
If you encounter repeated warnings regarding uninteresting calls, consider the strictness level of your mocks and use `NiceMock` or explicit catch-all expectations as appropriate.
</Check>

<Warning>
Beware of setting overly strict expectations that unnecessarily couple your tests to implementation details; this can lead to brittle and hard-to-maintain test code.
</Warning>

