---
title: "Platform Compatibility Troubleshooting"
description: "Address platform-specific installation problems and compiler issues. Tips for resolving environment-related errors on Linux, macOS, and Windows."
---

# Platform Compatibility Troubleshooting

GoogleTest works across multiple platforms including Linux, macOS, and Windows. However, due to differences in compilers, system libraries, and toolchains, you might encounter platform-specific installation and compilation errors. This guide helps you quickly identify, understand, and resolve common platform compatibility problems.

---

## 1. Common Installation and Compiler Issues by Platform

### Linux

**Key Points:**
- Requires a compiler with C++17 support (GCC 7+, Clang 5+ recommended).
- Ensure `pthread` development libraries are installed.
- Use standard tools like CMake for build orchestration.

**Typical Problems & Solutions:**

- **Missing or outdated compiler:**
  - Run `gcc --version` or `clang --version`.
  - Upgrade your toolchain if below required versions.
  
- **Pthread link errors:**
  - Add `-pthread` flag explicitly if not automatically handled.
  - With CMake, ensure `find_package(Threads REQUIRED)` is included.

- **CMake version too old:**
  - GoogleTest requires CMake 3.14+ for modern FetchContent.
  - Upgrade CMake if errors mention unsupported commands.

- **File system or permission issues:**
  - Verify write permissions in your build directory.
  - Check if file system supports UNIX permissions.


### macOS

**Key Points:**
- Use Xcode toolchain for best compatibility.
- Ensure command line tools are installed (`xcode-select --install`).

**Typical Problems & Solutions:**

- **Unsupported macOS or Xcode version:**
  - GoogleTest requires a toolchain supporting C++17.
  - Upgrade Xcode if compiler is too old.

- **Clang-specific warnings or errors:**
  - Some warnings can be suppressed using flags in your `CMakeLists.txt` or compiler options.
  
- **Framework or SDK mismatches:**
  - Confirm your build environment targets the correct SDK.
  - Use `xcodebuild -showsdks` to check available SDKs.


### Windows

**Key Points:**
- Supported through Visual Studio, MinGW, and MSYS environments.
- Pay attention to runtime library linkage (static vs dynamic CRT).

**Typical Problems & Solutions:**

- **Linker errors about runtime libraries (e.g., mismatch between `/MT` and `/MD`):**
  - Set the CMake flag `-Dgtest_force_shared_crt=ON` to align CRT linkage.

- **Missing headers or libraries:**
  - Ensure Windows SDK is installed.
  - Install Visual Studio workload for C++ desktop development.

- **MinGW-specific issues:**
  - Some pthread functionality may be unsupported; adapt by disabling pthreads or using Windows threading primitives.

- **Long path issues:**
  - Enable long paths in Windows 10 or later via Group Policy or registry.


## 2. Environment-Related Error Troubleshooting

### Diagnosing Build Failures

1. **Check the compiler version and C++ standard support.**
   - Use commands like `gcc --version`, `clang --version`, or check Visual Studio version.

2. **Validate dependency availability.**
   - Ensure that `pthread` development files are present on Unix-like systems.

3. **Review your build configuration and flags.**
   - Using CMake, confirm flags like `gtest_force_shared_crt` suit your environment.
   - For manual builds, verify your compiler flags include necessary defines and libraries.

4. **Review error messages for platform-specific hints.**
   - For example, symbols unresolved related to threading likely indicate missing pthread linkage.


### Network and Filesystem Issues

- If your installation or build downloads source components (e.g., via CMake FetchContent), ensure your system can connect to `github.com`.

- Verify disk space and permissions in build and install directories.


## 3. Practical Tips and Best Practices

- **Use CMake whenever possible.** It handles many platform quirks, like `pthread` linkage and runtime linkage on Windows.

- **Check GoogleTest version compatibility.** The 1.17.x branch requires C++17; older compilers won't build it.

- **Enable verbose build output for diagnosis.** With CMake, use `cmake --build . -- VERBOSE=1`.

- **When linking on Windows, align CRT flags across your project and GoogleTest.** Use `-Dgtest_force_shared_crt=ON` when needed.

- **If you encounter threading-related issues, consider disabling pthreads with `-DGTEST_HAS_PTHREAD=0` as a workaround, but be aware this reduces thread safety.**

- **Inspect the GoogleTest CMakeLists.txt and `internal_utils.cmake` for platform-specific compilation flags and adjust your build accordingly.**


## 4. Step-by-Step Troubleshooting Workflow

<Steps>
  <Step title="Confirm Compiler and Tools Compatibility">
    1. Run `gcc --version` / `clang --version` or check Visual Studio version.
    2. Verify C++17 support.
    3. If outdated, upgrade your compiler or toolchain.
  </Step>
  <Step title="Validate Dependencies">
    1. On Linux/macOS: check installation of `pthread` and development headers.
    2. Use package manager commands like `apt install build-essential` or `brew install cmake`.
  </Step>
  <Step title="Adjust Build Flags">
    1. For Windows, add `-Dgtest_force_shared_crt=ON` to your CMake command.
    2. Ensure runtime switching flags (`/MT` vs `/MD`) are consistent.
  </Step>
  <Step title="Build with Verbose Output">
    1. Use `cmake --build . -- VERBOSE=1` to get full compiler and linker commands.
    2. Look for missing libraries or incorrect flags.
  </Step>
  <Step title="Test Installation">
    1. Run example tests or sample executables.
    2. Verify all tests complete without errors.
  </Step>
  <Step title="Seek Further Help">
    1. Consult the [FAQ & Common Issues](../faq/general-usage-faq/installation-setup) page.
    2. Search or post details on the GoogleTest issue tracker or community forums.
  </Step>
</Steps>


## 5. Troubleshooting Examples

### Example 1: Linker error `LNK2038` on Windows

**Issue:**
```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

**Resolution:**
- Enable dynamic CRT linkage by building with:
  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```
- Rebuild GoogleTest and your tests.

### Example 2: Missing `pthread` symbols on Linux

**Issue:**
```
undefined reference to `pthread_create`
```

**Resolution:**
- Add pthread linker flag explicitly:
  ```bash
  cmake .. -DCMAKE_THREAD_LIBS_INIT=-pthread
  ```
- Or ensure your build script links against pthread.

### Example 3: C++17 errors with older compilers

**Issue:**
```
error: ‘auto’ not allowed in lambda parameter declarations
```

**Resolution:**
- Upgrade GCC to version 7 or later or equivalent Clang.
- Use a supported compiler that fully implements C++17.


## 6. Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/primer.html) – For introductory guidance on writing and running tests.
- [System Requirements](../../getting-started/setup-basics/system-requirements) – Detailed platform and compiler support info.
- [FAQ & Common Issues](../faq/general-usage-faq/installation-setup) – Frequently asked questions on installation and platform problems.
- [Building GoogleTest with CMake](../../getting-started/installation-config/build-from-source) – Instructions to build the framework.
- [GoogleTest GitHub Repository](https://github.com/google/googletest) – Source and issue tracker.

<Tip>
If uncertain about platform-specific flags or compiler support, start building with CMake and the recommended GoogleTest defaults. This approach minimizes cross-platform problems.
</Tip>

<Warning>
Avoid mixing debug and release CRT runtimes on Windows. This mismatch is the most common cause of linker errors.
</Warning>


---