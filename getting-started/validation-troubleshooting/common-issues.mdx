---
title: "Troubleshooting Common Issues"
description: "A curated FAQ for setup and first-test errors. Learn to resolve linker problems, C++ standard mismatches, missing dependencies, and other frequent challenges new users face."
---

# Troubleshooting Common Issues

Welcome to this curated FAQ dedicated to addressing the most frequent setup and test-related errors encountered when getting started with GoogleTest. Whether you're grappling with linker failures, C++ standard conflicts, or dependency woes, this guide takes you through precise, actionable steps to identify and resolve these challenges.

---

## 1. Linker Errors with Static Const Members

### Problem:
You defined a static const data member inside your class but get linker errors about "undefined references".

### Cause:
In C++, a `static const` member declared in the class header must also be defined (without initializer) in a single `.cc` file. If not, the linker fails.

### Solution:
1. Check your class header; if you have
    ```cpp
    class Foo {
      static const int kValue = 100;
    };
    ```
2. Add this in one `.cc` file (without initializer):
    ```cpp
    const int Foo::kValue;
    ```

3. If your static member is declared `constexpr`, the definition in `.cc` is not required.

### Tips & Pitfalls:
- This is a common cause of linker errors involving `EXPECT_EQ()` or similar macros.
- Older compilers were lax with this, but modern compilers enforce it.

---

## 2. C++ Standard Version Mismatch

### Problem:
Compilation or linker errors due to differing C++ standards.

### Cause:
GoogleTest requires C++17 or higher. Mixing build targets compiled with different C++ standards causes ABI incompatibility.

### Solution:
- Ensure all targets (including GoogleTest and your test binaries) are explicitly compiled with C++17 or above.
- Check your `CMakeLists.txt` or build scripts to add flags like `-std=c++17` for all relevant targets.

### Verification:
- Run `g++ -v` or check your compiler docs to verify support for C++17.
- Inspect your build output to confirm the flag is passed.

---

## 3. Missing Dependencies or Include Paths

### Problem:
Compilation fails due to missing `gtest/gtest.h` or related headers.

### Cause:
Your build system is not locating GoogleTest headers.

### Solution:
- Confirm GoogleTest is installed or built in your environment.
- Add the path to the GoogleTest headers in your build include directories.
  - For CMake, use:
    ```cmake
    target_include_directories(your_test_target PRIVATE /path/to/googletest/include)
    ```
- Link against the GoogleTest library:
  ```cmake
  target_link_libraries(your_test_target PRIVATE gtest gtest_main)
  ```

---

## 4. Fatal and Non-Fatal Failures in Setup or Constructor

### Problem:
You see failures or crashes related to assertions inside your test fixture's constructor or `SetUp()` method.

### Cause:
- GoogleTest does not support fatal assertions (`ASSERT_*`, `FAIL()`) in constructors.
- `ASSERT_*` only works in `void` functions and aborts the current function, which constructors cannot support.

### Solution:
- Move initialization requiring fatal assertions from the constructor to `SetUp()`. Use `ASSERT_*` or `FAIL()` inside `SetUp()`.
- For fatal conditions in constructors, you can call `abort()` to stop the test run.

### Additional Tips:
- Use `EXPECT_*` inside the constructor if possible, which generates nonfatal failures.
- Avoid fatal assertions in destructors due to undefined behavior when throwing exceptions.

---

## 5. Understanding and Handling Death Test Failures

### Common Issues:
- Death tests hang or cause segmentation faults.
- Death tests appear to "lose" state modifications made inside the death test.

### Causes & Remedies:
- Death tests run inside child processes isolated from the parent. Any memory changes (e.g., mock calls) won't propagate.
- Avoid running threads in the parent process before death tests.
- Consider setting the death test style to `threadsafe` to reduce race condition issues:
  ```cpp
  GTEST_FLAG_SET(death_test_style, "threadsafe");
  ```
- Write death tests as atomic statements inside `EXPECT_DEATH` or `ASSERT_DEATH` macros.

### How Death Tests Work:
- They fork or clone the test program in a subprocess.
- Subprocess executes the death test statement and exits.
- GoogleTest verifies exit code and stderr against your expectations.

### Naming Conventions:
- Test suites containing death tests should have names ending with `DeathTest` to ensure correct ordering.

---

## 6. Using Parameterized Test Generators

### Problem:
Tests fail due to incorrect or unexpected parameters.

### Guidance:
- Use the provided parameter generators correctly:
  - `Range(begin, end [, step])` for sequences
  - `Values(...)` for explicit values
  - `ValuesIn(container)` for STL containers or arrays
  - `Bool()` for boolean parameters
  - `Combine(...)` for Cartesian product of multiple parameter sets

- Instantiate value-parameterized tests properly using `INSTANTIATE_TEST_SUITE_P` before running `RUN_ALL_TESTS()`.

- When using `ConvertGenerator<T>()` for explicit type conversions, ensure conversions and lambdas don't cause dangling references.

### Example:
```cpp
INSTANTIATE_TEST_SUITE_P(MyTests, FooTest, testing::Range(1, 5));
```

---

## 7. Test Fixtures and Consistent Test Suite Naming

### Problem:
Runtime error stating "All tests in the same test suite must use the same fixture class".

### Cause:
Different fixtures or mixes of `TEST` and `TEST_F` are used within the same test suite name.

### Solution:
- Ensure all tests in the same suite use the same fixture class.
- Avoid mixing `TEST()` and `TEST_F()` macros in the same suite.
- Unique fixture class for each logically grouped test suite.

### Example:
```cpp
class FooTest : public testing::Test {};
TEST_F(FooTest, Test1) { ... }
TEST_F(FooTest, Test2) { ... }
```

---

## 8. Common Build and Runtime Flags

### Initialization:
Always initialize GoogleTest before running tests:
```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Avoid ignoring the return value of `RUN_ALL_TESTS()`. Failing to do so may cause false-positive test passes.

### Useful Flags:
- `--gtest_filter=*` runs all tests.
- `--gtest_list_tests` lists test names without running them.
- `--gtest_color=yes|no|auto` controls colored output.
- `--gtest_repeat=N` repeats tests N times.

---

## 9. Common Troubleshooting Tips

- **Linker errors:** Confirm static const members defined properly.
- **Include errors:** Verify include paths and linked libraries.
- **Compilation errors:** Ensure C++17 standard is used.
- **Test discovery issues:** Check test macros use valid identifiers without underscores.
- **Death tests problems:** Avoid threads in parent process; use `threadsafe` death test style.

---

## 10. Getting Help

If issues persist, consider these resources:
- GoogleTest [GitHub Repository](https://github.com/google/googletest)
- GoogleTest [FAQ](https://github.com/google/googletest/blob/main/docs/faq.md)
- GoogleTest [Assertions Reference](reference/assertions.md)
- Join community forums and issue trackers.


---

For more detailed explanations and advanced patterns, please refer to the following related documentation:

- [Writing and Running Your First Test](../first-test-setup/writing-running-first-test.md)
- [Advanced GoogleTest Topics](../advanced.md)
- [GoogleTest Primer](../primer.md)
- [Parameterized and Typed Tests Guide](../advanced.md#value-parameterized-tests)

---