---
title: "Write and Build Your First Test"
description: "Guided example showing how to author a basic test using GoogleTest, including test macro usage and compiling your test binary. Focus is on clarity and minimizing barriers for new users."
---

# Write and Build Your First Test

Welcome to the first step of mastering GoogleTest: writing and building your initial test. This guide walks you through the essential process of authoring a basic test using GoogleTest’s macros and compiling your test binary. By following these concrete steps, you’ll quickly realize the power and simplicity GoogleTest brings to C++ testing.

---

## 1. Prerequisites & Setup

Before writing your first test, ensure your environment meets the following requirements:

- **C++17 Support**: GoogleTest requires a C++17-capable compiler.
- **GoogleTest Source**: Clone or download GoogleTest (recommended version: v1.17.0 or later).
- **Build System**: CMake is the preferred and easiest build system to configure and build GoogleTest and your tests.
- **Project Configuration**: Your project must include the GoogleTest headers and link against GoogleTest libraries (`gtest` and optionally `gtest_main`).

### Setting Up Your Development Environment

If you haven’t already set up GoogleTest, follow the instructions in the [Installation Methods guide](https://github.com/google/googletest/blob/main/README.md#generic-build-instructions) to clone and build GoogleTest with CMake. 

> Tip: Use `gtest_main` library to avoid writing your own `main()` function unless you need custom test initialization.

---

## 2. Writing Your First Test

GoogleTest lets you write tests using the `TEST()` macro, which defines a test function within a named test suite.

### How to Write a Simple Test

1. **Include the GoogleTest Header:**

```cpp
#include <gtest/gtest.h>
```

2. **Define a Test Suite and Test Name:**

Use the `TEST(TestSuiteName, TestName)` macro. Both names are identifiers without underscores.

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

3. **Add Assertions:**

Within the test body, make assertions to verify expected behavior. Use `EXPECT_*` for non-fatal failures (test continues) and `ASSERT_*` for fatal failures (aborts current test).

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

### Practical Example

Here’s a complete example testing a simple factorial function:

```cpp
// factorial.h
int Factorial(int n);

// factorial_test.cc
#include <gtest/gtest.h>
#include "factorial.h"

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

---

## 3. Building Your Test Binary

Now you need to compile your test code linking against GoogleTest libraries.

### Using CMake

1. Create a `CMakeLists.txt` file in your test directory:

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyTests)

find_package(GTest REQUIRED)

add_executable(my_test factorial_test.cc factorial.cc)

target_link_libraries(my_test GTest::gtest_main GTest::gtest pthread)

include(GoogleTest)
gtest_discover_tests(my_test)
```

2. Configure and Build:

```bash
mkdir build && cd build
cmake ..
make
```

3. Run your tests:

```bash
./my_test
```

### Manually Compiling with g++ (Linux/macOS)

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread factorial_test.cc factorial.cc /path/to/libgtest.a /path/to/libgtest_main.a -o my_test
./my_test
```

> Note: Adjust `/path/to/` to the real GoogleTest source and library paths on your machine.

---

## 4. Understanding What's Happening

- When you compile and run, GoogleTest automatically discovers your tests defined by `TEST()` macros.
- Each test is executed independently in a fresh fixture.
- Assertions inside the tests verify your code and output detailed information on failures.
- The test runner shows a summary of passed and failed tests.

---

## 5. Common Pitfalls and Tips

- **Test and Suite Naming:** Avoid underscores (`_`) in test suite and test names because GoogleTest filters and output conventions recommend alphanumeric names only.

- **Use `EXPECT_` vs `ASSERT_`:** Use `EXPECT_` when you want the test to continue after a failure; use `ASSERT_` when failure means the test cannot proceed safely.

- **One Test per `TEST()`:** Each `TEST()` should be focused on a single behavior or verification.

- **Link Correct Libraries:** Ensure linking with `gtest_main` (for default `main`) or provide your own `main()`.

- **Call `InitGoogleTest()`:** If you provide your own `main()`, call `testing::InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`.

- **Check the Return Code:** The return from `RUN_ALL_TESTS()` indicates overall success (0) or failure (non-zero).

---

## 6. Troubleshooting Compilation and Runtime Issues

<Accordion title="Common Build Problems">
**Problem:** Missing GoogleTest headers or libraries.

**Solution:** Verify include and link paths in your build system configurations.

**Problem:** Linker errors about undefined references to GoogleTest symbols.

**Solution:** Link against both `gtest` and `gtest_main` libraries; include `-pthread` on Linux.

**Problem:** Tests don’t run, or output is unclear.

**Solution:** Confirm you call `testing::InitGoogleTest()` and `RUN_ALL_TESTS()` in your `main()` if not linking with `gtest_main`.
</Accordion>

<Accordion title="Runtime Failures in Tests">
Common assertion errors in tests indicate either incorrect expected values or code under test producing incorrect results. Use detailed assertion messages and `SCOPED_TRACE()` to better locate failures.
</Accordion>

---

## 7. Next Steps

- Explore writing *Test Fixtures* for shared test setup using `TEST_F()`.
- Learn about *value-parameterized tests* to test different inputs with `TEST_P()` and `INSTANTIATE_TEST_SUITE_P()`.
- Understand advanced assertions and matchers to write richer tests. See the [Assertions Reference](reference/assertions.md).
- Consult the [Getting Started Guide](getting-started/first-test-run/run-tests) to learn how to execute and filter tests.

---

## References and Further Reading

- [GoogleTest Primer](docs/primer.md) — Basics of GoogleTest
- [Testing Reference](docs/reference/testing.md) — Detailed explanations of `TEST`, `TEST_F`, `TEST_P` macros
- [Installation Methods](getting-started/prerequisites-installation/installation-methods) — How to build and install GoogleTest
- [Advanced Guide](docs/advanced.md) — For deeper test writing and features
- [Core Concepts](overview/concepts-architecture-terminology/core-concepts-terminology) — Understand GoogleTest terminology

---

For more comprehensive workflows and expert tips, browse the complete Getting Started collection and the Guides section in the documentation portal.