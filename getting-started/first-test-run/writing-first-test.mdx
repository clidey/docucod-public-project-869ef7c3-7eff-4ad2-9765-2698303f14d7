---
title: "Writing and Building Your First Test"
description: "Follow a hands-on example to create your first test case with GoogleTest, understand the basic test structure, and compile your test binary. This forms the bridge from installation to real usage."
---

# Writing and Building Your First Test

Welcome to your first hands-on experience with GoogleTest! This guide walks you through creating a simple test case, understanding the fundamental structure of a test, compiling it, and running your first validation. By the end, you’ll bridge the gap from installation to practical use, setting a solid foundation for your testing journey.

---

## 1. Prerequisites & System Setup

Before writing your first test, ensure the following prerequisites are met:

- **Development Environment:**
  - Supported OS: Linux, macOS, Windows
  - Compiler with C++11 or newer support (e.g., GCC 5+, Clang 3.3+, MSVC 2015+)
  - Build system configured with GoogleTest and GoogleMock libraries installed.

- **GoogleTest/GoogleMock Installed:**
  - Refer to [Installation Instructions](https://github.com/google/googletest/blob/main/docs/installation.md) to set up.
  - Verify that `gtest` and `gmock` headers and libraries are available and properly linked.

- **Basic C++ Knowledge:** Familiarity with classes, functions, and compilation.


<Check>
Ensure you have a C++ project set up with GoogleTest and GoogleMock included before continuing.
</Check>

---

## 2. Creating Your First Test Case

GoogleTest test cases follow a simple pattern: you define test functions where each one exercises a small piece of functionality and verifies expected results.

### Step-by-Step Guide:

<Steps>
<Step title="Include Necessary Headers">
Create a source file, say `sample_test.cc`, and start by including GoogleTest's main header:

```cpp
#include <gtest/gtest.h>
```

This header pulls in all required testing functionalities.
</Step>

<Step title="Write a Test Function">
Use the `TEST` macro to define a test. It takes two parameters: the test case name and the test name.

For example, test if addition works correctly:

```cpp
TEST(MathTest, BasicAddition) {
  int sum = 2 + 2;
  EXPECT_EQ(sum, 4);  // Verifies sum equals 4
}
```

- `EXPECT_EQ` is a GoogleTest assertion checking equality.
- If the assertion fails, the test will report an error but continue running.
</Step>

<Step title="Write Multiple Tests">
Add more tests by repeating the `TEST` macro with different names:

```cpp
TEST(MathTest, BasicMultiplication) {
  int product = 3 * 5;
  EXPECT_EQ(product, 15);
}
```
</Step>

</Steps>

---

## 3. Compiling Your Test Binary

Once your test code is written, you need to compile it with GoogleTest and GoogleMock libraries.

### Compiling with g++ (example):

```bash
# Assuming googletest is installed and pkg-config can find it
g++ -std=c++11 sample_test.cc -o sample_test \
  $(pkg-config --cflags --libs gtest_main gmock) -pthread
```

### Explanation:

- `-std=c++11` enables C++11 features.
- `$(pkg-config --cflags --libs gtest_main gmock)` provides the include paths and links libraries.
- `-pthread` is required for multi-threading support that GoogleTest needs.

<Note>
If you have GoogleTest and GoogleMock in custom directories, adjust compiler and linker flags accordingly.
</Note>

---

## 4. Running Your First Test

With the compiled binary, simply execute it on the command line:

```bash
./sample_test
```

You will see output similar to:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from MathTest
[ RUN      ] MathTest.BasicAddition
[       OK ] MathTest.BasicAddition (0 ms)
[ RUN      ] MathTest.BasicMultiplication
[       OK ] MathTest.BasicMultiplication (0 ms)
[----------] 2 tests from MathTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This indicates your tests successfully ran and passed.

<Warning>
If the test binary crashes or fails to find symbols, verify your compile and link steps.
</Warning>

---

## 5. Test Structure and Assertions

Understanding the basic structure helps you write comprehensive tests:

- **TEST macro:**
  Defines a test function.

- **Assertions:**
  Verify conditions within tests. Examples:

  - `EXPECT_EQ(val1, val2)`: Verifies `val1 == val2`.
  - `EXPECT_TRUE(condition)`: Verifies a boolean condition is `true`.
  - `EXPECT_NE(val1, val2)`: Verifies `val1 != val2`.

- **Fatal vs Non-fatal Assertions:**
  - `EXPECT_` assertions continue test execution upon failure.
  - `ASSERT_` assertions abort the test on failure.

Use these assertions to verify the expected behavior of your code.

---

## 6. Practical Tips for Your First Test

- Start small: write simple tests focusing on individual functions.
- Name tests clearly so failures are easy to interpret.
- Use `EXPECT_` variants unless failure blocks further testing.
- Run tests frequently to catch regressions early.
- Use GoogleTest built-in matchers for expressive validations.

---

## 7. Troubleshooting Common Issues

### Test Not Running
- Ensure your test binary is executable.
- Confirm test functions are correctly annotated with `TEST` macro.
- Check for linker errors indicating missing GoogleTest symbols.

### Compiler Errors
- Confirm you include `<gtest/gtest.h>` before using tests.
- Check compiler flags support C++11 or later.

### Runtime Errors
- Use verbose output mode: run tests with `--gtest_verbose=info` to get detailed logs.
- Consult common issues in GoogleTest [Troubleshooting Guide](https://github.com/google/googletest/blob/main/docs/troubleshooting.md).

---

## 8. What Next?

Now that you’ve successfully written and run a basic GoogleTest test:

- Explore writing parameterized and typed tests for broader coverage.
- Learn to mock dependencies using GoogleMock; start with [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html).
- Integrate test runs into your build and CI pipelines.
- Dive deeper into GoogleTest’s advanced assertions and fixture capabilities.

Review the following sections next:

- [Running and Validating Tests](../first-test-run/running-tests.md)
- [Mocking with GoogleMock: A Practical Introduction](/guides/core-workflows/mocking-basics)

---

### Sample Minimal Test Code
```cpp
#include <gtest/gtest.h>

TEST(SampleTestSuite, BasicTest) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this minimal test to verify your GoogleTest installation.

---