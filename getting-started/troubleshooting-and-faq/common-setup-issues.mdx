---
title: "Solving Common Setup Issues"
description: "Find solutions to the most frequent installation and configuration problems encountered by new users. Includes step-by-step debugging tips and platform-specific advice."
---

# Solving Common Setup Issues

When getting started with GoogleTest, users may encounter common installation and configuration problems that can prevent successful test execution. This guide helps you systematically troubleshoot these issues, verify your environment, and resolve platform-specific challenges to get GoogleTest up and running smoothly.

---

## 1. Verifying the Installation

Before diving into complex debugging, confirm that GoogleTest has been installed and built properly.

### Step 1: Run the Sample Test Program

If you built GoogleTest from source, it includes example test binaries. Locate and run them:

```bash
cd path/to/googletest/build
# For Linux/macOS:
./googlemock/gtest/gtest

# For Windows (run the executable in the build directory)
gtest.exe
```

You should see output similar to:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.DoesAbc
[       OK ] SampleTest.DoesAbc
[----------] 1 test from SampleTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

<Tip>
If the test executable does not build or run correctly, recheck your build steps and ensure all source files are compiled and linked.
</Tip>

### Step 2: Confirm `InitGoogleTest()` is Called

When writing your own test programs, remember to initialize GoogleTest before running tests. Your `main()` function should look like this:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Warning>
Failing to call `InitGoogleTest()` will result in test flags and filtering not working properly, possibly causing no tests to run.
</Warning>

## 2. Troubleshooting Build Problems

### Common Issues

- **Missing dependencies:** GoogleTest requires a C++17 compatible compiler.

- **Incorrect compiler flags:** Verify that the C++ standard is correctly set (e.g., `-std=c++17` for GCC/Clang).

- **Linker errors:** Link against GoogleTest libraries (`gtest` and optionally `gtest_main`), and include their paths.

- **Windows Runtime Mismatch:** Use `-DGTEST_FORCE_SHARED_CRt=ON` if your project uses dynamic CRT on Visual Studio to avoid linkage errors.

### Recommended Build Setup Using CMake

```bash
cmake .. -DCMAKE_CXX_STANDARD=17
make
```

If you face problems, ensure:

- Your CMake version is at least 3.14.
- You include both GoogleTest source and headers properly.

<Tip>
Building GoogleTest as a static library reduces runtime complexity but ensure matching compiler and runtime settings with your tests.
</Tip>

## 3. Configuration and Environment Issues

### Ensure No Underscore in Test Names

Using underscores (`_`) in test suite or test names often causes surprising linkage or runtime issues.

Refer to [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) for detailed rationale.

### Dealing with Exception and Assertion Failures

Remember that fatal assertions (`ASSERT_*`) abort only the current function, not the entire test. If you see strange crashes or unexpected behavior, check if fatal failures are in subroutines and use `ASSERT_NO_FATAL_FAILURE()` or exceptions where appropriate (see [Advanced Guide - Propagating Fatal Failures](../docs/advanced.md#propagating-fatal-failures)).

### Platform-Specific Notes

- **Arduino/Embedded (ESP32, ESP8266, NRF52):**
  - Ensure that your `setup()` and `loop()` functions initialize and run GoogleTest properly per the platform (see `gtest_main.cc`).

- **Windows:**
  - Linker errors about CRT mismatch are common; adjust project options accordingly.

- **Threads and Death Tests:**
  - Avoid creating threads prematurely in death test programs.

## 4. Debugging Test Failures Related to Setup

If your test program builds and runs but tests fail unexpectedly:

### Check Test Initialization

- Verify that your test fixture constructors and `SetUp()` methods execute as expected.
- Remember that test fixtures are created fresh for each test.

### Check Global and Suite Setup

- If you override `SetUpTestSuite()` or `TearDownTestSuite()`, ensure they don't cause inadvertent assertion failures or leaks.

```cpp
// Example of a failing setup:
class SetupFailTest : public ::testing::Test {
protected:
  static void SetUpTestSuite() { ASSERT_STREQ("", "SET_UP_FAIL"); }
};
```

### Symptoms

- Tests might report failures without running test bodies.
- You may see premature exit or no tests running.

### Remedy

- Avoid fatal assertions in setup and teardown. Use non-fatal assertions or signal failures gracefully.

## 5. Verifying Your Test Environment

Use GoogleTest's built-in flags to check test discovery and execution.

### List Tests

```bash
./your_test --gtest_list_tests
```

Make sure your tests appear in the list.

### Run Tests Verbosely

```bash
./your_test --gtest_verbose=info
```

Observe detailed information about test execution and mock invocations to pinpoint issues.

## 6. Platform-Specific Debugging Tips

### Android/NDK

- Ensure you build GoogleTest with NDK support.
- Use `adb shell` to run tests on the device or emulator.

### CI Environment

- Ensure environment variables are correctly set.
- Avoid tests that require GUI or interactive environment.

## 7. Common Pitfalls and Best Practices

- Avoid mixing different versions of GoogleTest libraries across your project.
- Use `gtest_main` or `gmock_main` libraries to avoid writing your own `main()` unnecessarily.
- When using mocks, prefer `ON_CALL` to set default behavior and `EXPECT_CALL` for expectations, to reduce brittle tests.

## 8. Diagnostic Checklist

<AccordionGroup title="Quick Diagnostic Steps">
<Accordion title="No tests run">
- Did you call `testing::InitGoogleTest()`?
- Are your test suites and test names free of underscores?
- Is your test executable properly linked with GoogleTest?
</Accordion>
<Accordion title="Compilation errors">
- Are you using a compatible C++ compiler version?
- Did your build system include GoogleTest headers and source files?
- Check for mismatched runtime library settings.
</Accordion>
<Accordion title="Unexpected test failures on setup">
- Inspect your `SetUpTestSuite` and `TearDownTestSuite` for assertion failures.
- Avoid fatal assertions in constructor/destructor.
- Use `SetUp()` and `TearDown()` methods for setup that can fail gracefully.
</Accordion>
<Accordion title="Mock-related warnings or errors">
- Use `NiceMock` to suppress uninteresting call warnings.
- Confirm `EXPECT_CALL` matches the calls you expect.
- Use `--gmock_verbose=info` to trace mock calls.
</Accordion>
</AccordionGroup>

## 9. When to Seek More Help

If issues persist after following the above steps:

- Consult the [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md).
- Review detailed build and usage guides in the documentation sections linked below.
- Check the GoogleTest GitHub issues for similar problems.

<Tip>
Keep your test code and GoogleTest libraries updated to minimize compatibility issues.
</Tip>

---

## Additional Resources

- [GoogleTest Primer](primer.md): Learn how to write tests and configure your test program
- [Installation Methods](getting-started/setup-and-installation/installation-methods.mdx): Building and integrating GoogleTest
- [Advanced GoogleTest Topics](advanced.md): For debugging tests and advanced configuration
- [Mocking Reference](reference/mocking.md): Detailed guidance on using GoogleMock
- [GoogleTest FAQ](faq.md): Answers to common questions including setup and troubleshooting


---

## Troubleshooting Example

Here's a practical debugging flow for a test executable that compiles but runs zero tests:

```bash
$ ./my_test --gtest_list_tests
# No output or unexpected output
$ ./my_test --gtest_filter=*
# No tests run
```

**Action:**

1. Confirm you called `InitGoogleTest()` in `main()`.
2. Review test names for invalid underscores.
3. Rebuild with verbose output:

```bash
./my_test --gtest_verbose=info
```

4. Check build logs for missing files or linker issues.

5. Ensure all source files defining tests are linked.
```

---

This guide will help new users identify and fix common hurdles quickly, enabling a smooth start with GoogleTest and GoogleMock.
