---
title: "Troubleshooting and Common Setup Issues"
description: "Quickly diagnose and solve frequent environment, build, or linking errors that can occur during initial setup. Offers actionable steps and helps reduce new user frustration when things don’t work out of the box."
---

# Troubleshooting and Common Setup Issues

Quickly diagnose and solve frequent environment, build, or linking errors that can occur during initial setup. This guide offers actionable steps to reduce frustration and get you running smoothly with GoogleTest.

---

## 1. Verifying Your Environment

Before diving into installation, ensure your system meets the essential requirements:

- **C++17 Compliance:** Confirm your compiler supports the C++17 standard. Use `g++ --version` or `clang++ --version` and verify compatibility.
- **Build Tools:** 
  - For CMake: Check that CMake version 3.10+ is installed with `cmake --version`.
  - For Bazel: Confirm Bazel is installed if you use this build system.
- **Network Access:** Ensure access to external repositories or package sources for downloading dependencies.

<Tip>
Always start by validating your environment’s toolchain and dependencies. Incorrect compiler versions or missing build tools cause frequent and hard-to-diagnose errors.
</Tip>

## 2. Common Build Issues and Solutions

Here are the typical errors you might encounter during build or linking and how to resolve them.

### 2.1 Missing Headers or Include Paths

**Symptom:** Compiler complains about missing `gmock/gmock.h`, `gtest/gtest.h`, or other related headers.

**Solution:**

1. Verify that the include directories are correctly specified in your build system.
   - For CMake, ensure you have `include_directories` including your GoogleTest source or installed headers.
   - If installed system-wide, check the include paths.

2. If using submodules or vendored source, confirm you have initialized and updated them:

```sh
# For git submodules
git submodule update --init --recursive
```

3. Validate that your source tree contains the expected header files under `googletest/include`.

### 2.2 Linking Errors (Undefined References)

**Symptom:** Linker reports undefined symbols for GoogleTest or GoogleMock functions.

**Solution:**

1. Ensure that both GoogleTest and GoogleMock libraries are linked in the correct order.

2. If building manually, link `-lgmock -lgtest -pthread`.

3. When using CMake, use the `gtest` and `gmock` targets properly, for example:

```cmake
find_package(GTest REQUIRED)
target_link_libraries(your_test_target GTest::gmock_main)
```

4. If using Bazel, confirm your `BUILD` files specify dependencies on `@com_google_googletest//:gmock`

### 2.3 Compiler Feature Detection Fails

**Symptom:** Build scripts or configuration fail to detect thread support or C++17 support.

**Solution:**

- Check your compiler flags. For GCC and Clang, use `-std=c++17`.
- For MSVC, ensure Visual Studio version supports C++17 features.
- Enable threading support explicitly if required (`-pthread` for GCC/Clang).

<Tip>
Ensure you specify compiler and linker flags consistently throughout your build system. Inconsistent flags often lead to subtle runtime or build failures.
</Tip>

## 3. Troubleshooting Test Runs

### 3.1 Tests Fail to Discover or Run

- Confirm that your test executable is linked against GoogleTest and GoogleMock libraries.
- Verify that the test main function properly calls:

```cpp
::testing::InitGoogleTest(&argc, argv);
return RUN_ALL_TESTS();
```

- Check command line arguments to the test binary, disabling filters that may exclude tests.

### 3.2 Unexpected Warning Messages About Mock Calls

If you see warnings about "Uninteresting mock function call", it means a mock method was called without an expectation set.

- Consider making your mock a `NiceMock` to suppress these warnings.
- Alternatively, explicitly set expectations or default behaviors using `ON_CALL`.

## 4. Additional Tips for Smooth Setup

### 4.1 Use Verbose Logging for Debugging

Run your tests with the flag:

```
--gmock_verbose=info
```

This prints detailed logs of mock expectations and call matching, helping pinpoint why expectations fail.

### 4.2 Avoid Mixing `EXPECT_CALL` and Mock Calls

Always set expectations (`EXPECT_CALL`) before the mocks are exercised. Setting expectations after invoking mock methods leads to undefined behavior and confusing errors.

### 4.3 Managing Mock Object Lifetime

Ensure mock objects are destroyed properly so that all expectations are automatically verified. Leaked mocks might hide test failures.

If you allocate mocks on the heap, either delete them or use `Mock::AllowLeak()` cautiously.

## 5. Where to Find Help and More Information

- Visit the [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for detailed recipes on common mocking patterns and troubleshooting.
- See the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) for API details.
- Consult the [Getting Started Setup Requirements](../getting-started/setup-requirements/prerequisites) to validate your system setup.
- Use the GitHub Issue tracker at [https://github.com/google/googletest/issues](https://github.com/google/googletest/issues) for reporting issues or asking questions.

---

# Appendix: Sample CMake Setup Snippet

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyTests)

# Enable C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add googletest
add_subdirectory(googletest)

# Your test executable
add_executable(my_tests test_main.cpp test_foo.cpp)

target_link_libraries(my_tests PRIVATE gmock gtest pthread)
```

Ensure you cloned GoogleTest source inside your project or set up external dependencies as needed.

---

# Troubleshooting Checklist

- [ ] Is the compiler C++17 compatible?
- [ ] Are GoogleTest and GoogleMock headers reachable?
- [ ] Are the libraries linked properly in the build?
- [ ] Have you initialized and updated all submodules?
- [ ] Is threading enabled (`-pthread`)?
- [ ] Are expectations set before exercising mocks?
- [ ] Is the mock object destroyed to trigger expectations verification?

---

**Following these steps will help you overcome the most common obstacles in setting up and running GoogleTest and GoogleMock, making your onboarding experience efficient and frustration-free.**

<Note>
If you encounter problems outside of these areas, consult the full [GoogleTest Primer](https://google.github.io/googletest/primer.html) or seek community support.
</Note>
