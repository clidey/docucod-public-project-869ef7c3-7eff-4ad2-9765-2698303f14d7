---
title: "Writing Your First Test Case"
description: "An approachable step-by-step guide to creating your initial test file with GoogleTest. Includes a minimal working example (e.g., using TEST macro), explanations of required boilerplate, and expected behaviors. Ensures users can build and run a simple test quickly."
---

# Writing Your First Test Case

Welcome to your first experience writing a test with GoogleTest! This guide walks you through creating a minimal, runnable test file, helping you build, run, and understand your initial test case using GoogleTest’s `TEST()` macro.

---

## 1. Prerequisites

Before starting, ensure you have:

- **GoogleTest installed and accessible** in your build environment. Refer to the [Installing GoogleTest](../setup-prerequisites-installation/installation-mac-linux-windows) guide if you haven't completed this.
- A C++17 compatible compiler.
- A working build system configured to link your test code with GoogleTest, such as CMake, Bazel, or your environment’s toolchain.

If you already set up a project to compile GoogleTest tests, proceed to the next section.

---

## 2. Creating Your First Test File

### Step 1: Include the GoogleTest header

Start by including the fundamental GoogleTest header in your test file, which provides all macros and functions needed.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a simple test with `TEST()` macro

The `TEST()` macro defines a test function within a test suite.

- The **first argument** is the test suite name (think of it as grouping similar tests).
- The **second argument** is the test name (unique within the suite).

Here’s your minimal test example validating a sample function:

```cpp
// A simple factorial function for demonstration.
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test suite: FactorialTest, Test name: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Verifies Factorial(0) == 1
}

// Test suite: FactorialTest, Test name: HandlesPositiveInput
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```


These assertions use `EXPECT_EQ(expected, actual)` which reports failures but allows the test to continue to gather more errors.

### Step 3: Write the `main()` function to run tests

Most users **do not need to write a main()** because linking against `gtest_main` provides one. If you do need custom setup, add this boilerplate:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);  // Parses flags, necessary initialization
  return RUN_ALL_TESTS();                // Executes all registered tests
}
```


---

## 3. Building and Running Your Test

### Using CMake example

If you are using CMake and have added GoogleTest properly, create a simple `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTestProject)

find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

add_executable(my_first_test test_factorial.cpp)

target_link_libraries(my_first_test GTest::gtest_main)
add_test(NAME my_first_test COMMAND my_first_test)
```

Build and run your test:

```bash
cmake .  # or your build directory
make     # or your build tool command
ctest    # runs the tests
```

### Running your tests manually

If you built without `ctest`, just run the executable:

```bash
./my_first_test
```

The output will list each test’s pass or fail status and any assertion failure details.

---

## 4. Understanding the Output

When tests run, you’ll typically see output like:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

- `[ RUN      ]` indicates test start.
- `[       OK ]` indicates test success.
- Failures are detailed with file name and line numbers.

---

## 5. Best Practices and Tips

- **Test Suite and Test Naming**: Use descriptive and concise names without underscores (`_`). Use camel case, e.g. `FactorialTest` and `HandlesZeroInput`.
- **Prefer `EXPECT_*` over `ASSERT_*`** in most cases to capture multiple failures in one run.
- **Keep tests independent and repeatable.** Each `TEST()` runs isolated.
- **Use test fixtures (`TEST_F`)** when multiple tests share setup data (covered in other guides).
- **Leverage GoogleTest’s rich assertions** (see [Assertions Reference](../core-testing-apis/assertions)) as you progress.

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Common First Test Issues">
<Accordion title="Linker errors about missing main">
Make sure you link against `gtest_main` instead of just `gtest` if you don’t want to write your own `main()` function.
</Accordion>
<Accordion title="Test not discovered or run">
Verify your test executable runs `RUN_ALL_TESTS()` and that your `TEST()` macros are properly defined.
</Accordion>
<Accordion title="Tests failing unexpectedly">
Check your assertions carefully and ensure that your tested function behaves as expected.
</Accordion>
<Accordion title="Compiler errors about `TEST_F` or fixture class">
Ensure you have defined the fixture class before using it with `TEST_F()`, and all macro arguments use valid C++ identifiers.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

Now that you have created and run your first test:

- Explore writing tests sharing common setup with [Test Fixtures](../primer.md#same-data-multiple-tests).
- Learn more advanced assertions and failure diagnostics in the [Using Assertions Effectively](../../guides/core-testing-workflows/using-assertions-effectively) guide.
- Understand how to run and filter tests in [Running Tests and Interpreting Results](../first-test-validation/running-tests-and-interpreting-results).

---

## References

- [GoogleTest Primer](../primer.md) — foundational concepts.
- [Assertions Reference](../core-testing-apis/assertions.md) — for all assertion macros.
- [Configuring Your Project](../setup-prerequisites-installation/configuring-your-project.md) — integrating GoogleTest with your build system.
- [Running Tests and Interpreting Results](../first-test-validation/running-tests-and-interpreting-results.md).

---

Happy testing! Writing effective tests builds confidence in your C++ code and streamlines your development pipeline with GoogleTest.
