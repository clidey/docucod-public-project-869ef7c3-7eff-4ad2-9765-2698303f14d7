---
title: "Troubleshooting Common Getting Started Issues"
description: "Quick reference for resolving frequent problems encountered during installation, configuration, or first test runs. Offers solutions for compiler errors, linker problems, missing include files, or failure to discover tests, helping users stay unblocked."
---

# Troubleshooting Common Getting Started Issues

Welcome to the quick reference for resolving frequent problems encountered during installation, configuration, or your first test runs with GoogleTest and GoogleMock. This guide helps you overcome typical compiler errors, linker problems, missing include files, or issues detecting your first tests, ensuring a smooth start.

---

## 1. Common Compiler Errors

### Missing Include Files

**Symptom:** Compiler errors indicating headers like `<gmock/gmock.h>` or `<gtest/gtest.h>` not found.

**Resolution:**

- Verify that GoogleTest and GoogleMock source files or installed libraries are correctly included in your project's include paths.
- If using CMake, ensure you added the necessary include directories, such as:

```cmake
include_directories(${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)
```

- When installing GoogleTest system-wide or using package managers, verify the install path and adjust your include paths accordingly.

### Virtual Destructor Warnings or Errors

**Symptom:** Compiler warnings or errors related to missing virtual destructors in mocked interfaces.

**Resolution:**

- Ensure all classes intended for mocking **declare virtual destructors**. For example:

```cpp
class Foo {
 public:
  virtual ~Foo(); // Must be virtual!
  virtual void DoSomething() = 0;
};
```

- Without virtual destructors, deleting instances via base pointers leads to undefined behavior and can cause heap checker failures.

> **Tip:** Review your interfaces carefully and fix destructors before defining mocks.

### Macro Parsing Issues with Commas in Types

**Symptom:** Errors with `MOCK_METHOD` failing to parse types containing commas (e.g., `std::pair<int, int>`).

**Resolution:**
- Wrap return types or argument types containing commas in an extra pair of parentheses:

```cpp
MOCK_METHOD((std::pair<int, int>), GetPair, ());
```

- Alternatively, use `using`-type aliases to simplify type names:

```cpp
using IntPair = std::pair<int, int>;
MOCK_METHOD(IntPair, GetPair, ());
```

### Overloaded Method Mocking

**Symptom:** Compilation errors or ambiguous matcher errors due to multiple overloads.

**Resolution:**
- Mock **all** overloads or bring in unmocked ones with `using` to avoid hiding:

```cpp
using Foo::Add;  // Bring in unmocked overloads
MOCK_METHOD(int, Add, (int x), (override));
```

- For const overloads, mark mock methods `(const, override)`.

---

## 2. Linker Issues

### Undefined References to GoogleTest or GoogleMock Symbols

**Symptom:** Linker errors when building tests involving mocks or GoogleTest functions.

**Resolution:**

- Confirm that GoogleTest and GoogleMock libraries or source files are linked to your test binary.
- When using CMake, link your test target with the correct libraries:

```cmake
target_link_libraries(your_test_target gmock gtest pthread)
```

- If building GoogleTest as part of your project:
  - Add GoogleTest source files to your test executable.
  - Make sure to call `testing::InitGoogleMock(&argc, argv);` before running tests.

---

## 3. Issues Running or Discovering Tests

### No Tests Found or Tests Not Running

**Symptom:** Test binary runs, but no tests are discovered or executed.

**Resolution:**

- Ensure your tests use `TEST()`, `TEST_F()`, or similar macros correctly.
- Make sure your test binary calls `testing::InitGoogleMock(&argc, argv);` before test execution.

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Verify test filters or environment aren't excluding tests unintentionally.

### Tests Fail to Link Because of ODR Violations or Mismatched GoogleMock Versions

**Symptom:** Conflicting symbol errors or tests fail at runtime due to mismatched GoogleMock and GoogleTest versions.

**Resolution:**

- Make sure GoogleTest and GoogleMock versions are consistent.
- Avoid mixing installed libraries with those built from sources.
- Rebuild the entire test suite to clear stale object files.

---

## 4. Mocking-Related Common Gotchas

### "Uninteresting mock function call" Warnings

**Explanation:**

GoogleMock warns when a mock method is called without an expectation (`EXPECT_CALL`) set for it. By default, these calls perform the default action, but emitting a warning flags potential test oversights.

**Advice:**

- Use `NiceMock` to suppress these warnings when such calls are expected and benign.

```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> mock_foo;
```

- Alternatively, add a catch-all expectation:

```cpp
EXPECT_CALL(mock_foo, SomeMethod(_)).Times(::testing::AnyNumber());
```

- Avoid suppressing warnings by blindly adding expectations - this can cause brittle tests.

### Unexpected Calls vs Uninteresting Calls

- **Uninteresting call:** No `EXPECT_CALL` set at all for the method.
- **Unexpected call:** Some expectations exist but none match the call’s arguments.

Unexpected calls *always* fail the test.

### Use of `StrictMock` and `NaggyMock`

- `StrictMock` treats uninteresting calls as test failures, helpful for enforcing strict interaction contracts.
- `NaggyMock` prints warnings but allows test to continue (default behavior).

### Calls to Mock Methods After Object is Deleted

If your mock method deletes the mock object in its action, you still might see warnings or failures for uninteresting calls. This is expected; use `NiceMock` to suppress irrelevant warnings.

---

## 5. Troubleshooting Steps

Follow this systematic approach when diagnosing issues:

1. **Review Compiler and Linker Messages:** Pinpoint missing includes, unresolved symbols, or conflicting macros.
2. **Check Build Configuration:** Ensure GoogleTest/GoogleMock is included in your project and linked correctly.
3. **Verify Mock Class Definitions:** Confirm mock methods are declared properly using `MOCK_METHOD` with correct signatures.
4. **Inspect Test Initialization:** Make sure tests initialize GoogleMock and call `RUN_ALL_TESTS()`.
5. **Use Verbose Logging:** Run tests with `--gmock_verbose=info` to see detailed logs of mock calls and match failures.

```bash
./your_test_binary --gmock_verbose=info
```

6. **Try NiceMock:** To suppress noise from uninteresting calls and focus on real failures.
7. **Consult Documentation:** Review [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) and [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for advanced debugging.

---

## 6. Summary of Key Troubleshooting Commands

- Verify your test includes GoogleMock main:

  ```cpp
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
  ```

- Run tests with verbose mock output to trace call matching:

  ```bash
  ./your_test_binary --gmock_verbose=info
  ```

- Suppress uninteresting call warnings with `NiceMock`:

  ```cpp
  NiceMock<MockClass> mock;
  ```

- Catch-all `EXPECT_CALL` to avoid warnings:

  ```cpp
  EXPECT_CALL(mock, Method(_)).Times(AnyNumber());
  ```

- To enforce strict checking on uninteresting calls:

  ```cpp
  StrictMock<MockClass> mock;
  ```

---

## 7. Additional Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Beginner-friendly introduction
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Advanced recipes and patterns
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Detailed API docs
- [Supported Platforms & Compatibility](https://google.github.io/googletest/overview/integration-ecosystem/supported-platforms.html)
- [Configuring Your Project](https://google.github.io/googletest/getting-started/setup-prerequisites-installation/configuring-your-project.html)

---

By following the guidance in this troubleshooting reference, you will swiftly diagnose and resolve common issues encountered as you install, configure, and run your first GoogleTest and GoogleMock tests, enabling a solid foundation for your C++ testing journey.