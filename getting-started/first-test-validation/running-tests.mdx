---
title: "Running Tests"
description: "Explains how to execute tests using the provided test runners (such as gtest_main or gmock_main), interpret output, and validate successful installation through green test results."
---

# Running Tests with GoogleTest and GoogleMock

This guide explains how to execute your tests using the provided test runners such as `gtest_main` and `gmock_main`. It also guides you through interpreting test output messages and verifying a successful setup indicated by passing (green) test results.

---

## 1. Preparing to Run Tests

Before running tests, ensure that you have:

- Built your test binaries linked against the `gtest` or `gmock` libraries.
- Included the appropriate `main()` function, either from `gtest_main`, `gmock_main` libraries or provided by your own code.

Typically, linking with `gtest_main` or `gmock_main` means you do not need to write your own `main()` function. These libraries provide a standard entry point that initializes GoogleTest and/or GoogleMock and runs all registered tests.

### Why Use `gtest_main` or `gmock_main`?

- **Automatic Initialization**: They automatically call `testing::InitGoogleTest` or `testing::InitGoogleMock`, parsing command-line flags and setting up the test environment.
- **Simplify Your Test Code**: Let you focus on writing tests without boilerplate `main()` code.

If you implement your own `main()`, it **must** call `testing::InitGoogleTest(&argc, argv)` and return the result of `RUN_ALL_TESTS()`.

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

## 2. Running the Tests

Execute your test binary from the command line or your IDE. The testing framework will automatically discover and run all tests defined via the macros `TEST()`, `TEST_F()`, or `TEST_P()`.

Example command:

```shell
./my_test_binary
```

### Test Suite Lifecycle

Each test defined will:

1. Create a fresh test fixture object.
2. Run the `SetUp()` method if specified.
3. Run the individual test function.
4. Run the `TearDown()` method if specified.
5. Destroy the test fixture.

This isolation ensures tests remain independent and repeatable.

## 3. Understanding Test Output

When you run your tests, GoogleTest reports results in a standard format:

- It lists each test name as it is run.
- Shows **[  PASSED  ]** for tests that succeed.
- Reports **[  FAILED  ]** with detailed failure information for tests with failures.

Example output for a passing test:

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
```

Example output snippet for failures:

```
[ RUN      ] FactorialTest.HandlesPositiveInput
my_test.cc:25: Failure
Expected equality of these values:
  Factorial(3)
    Which is: 5
  6
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
```

GoogleMock integrates seamlessly, showing expectation failures such as unexpected or missing calls with clear diagnostics, including function names, call counts, and argument mismatches.

### Verbosity Options

The built-in test runners accept flags to control output verbosity, e.g.,

- `--gtest_filter=<pattern>` to run a subset of tests.
- `--gtest_repeat=<N>` to run tests repeatedly.
- `--gtest_output=<format>` to specify output format (XML, JSON).

## 4. Validating Successful Installation

A green test output, where all tests pass, verifies both GoogleTest and GoogleMock are correctly installed and integrated:

- All defined tests report **[       OK ]**.
- There are no errors, failures, or warnings.

This implies:

- Test linkages and dependencies are satisfied.
- GoogleMock behavior specifications are honored without failure.
- Test discovery is functioning as expected.

## 5. Common Test Execution Scenarios and Troubleshooting

### Tests Not Running

If you find your tests are not running:

- Ensure test cases are properly defined using `TEST()` or `TEST_F()`.
- Confirm the binary links against the correct `gtest_main` or `gmock_main`.
- Verify command line flags do not filter out all tests (`--gtest_filter`).
- Check that your `main()` function calls `testing::InitGoogleTest`.

### Test Failures

Failures could be due to:

- Assertion failures in your test code.
- Unmet GoogleMock expectations (unexpected call, wrong arguments, wrong call count).

Examine failure messages for file and line number locations and detailed mismatch summaries.

### Uninteresting Calls Warnings

By default, GoogleMock emits warnings if mock methods without explicit expectations are called. To suppress or adjust this behavior:

- Use `NiceMock<MockClass>` to ignore uninteresting calls.
- Use `StrictMock<MockClass>` to treat uninteresting calls as errors.

### Catching Leaked Mocks

GoogleMock can detect and report leaked mock objects if the flag `--gmock_catch_leaked_mocks` is enabled (true by default). Ensure all mock objects are properly deleted or use `Mock::AllowLeak()` to exempt.

## 6. Sample Test Execution Output

Here is sample output demonstrating expected calls, unexpected calls, and warnings:

```
[ RUN      ] FooTest.MyTest
foo_test.cc:14: Expected call to Foo(5) invoked
foo_test.cc:14: Mock function call matches EXPECT_CALL(foo, Foo(5))...
    Function call: Foo(5)
[       OK ] FooTest.MyTest (0 ms)

[ RUN      ] FooTest.UnexpectedCall
foo_test.cc:20: Unexpected mock function call with argument 7
[  FAILED  ] FooTest.UnexpectedCall (1 ms)
```

## 7. Further Reading and Related Documentation

- [Writing Your First Test](https://google.github.io/googletest/guides/getting-started.html#writing-your-first-test)
- [GoogleMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for understanding mocks
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for advanced mock usage
- [Supported Platforms & Requirements](https://google.github.io/googletest/getting-started.html#supported-platforms)

## 8. Best Practices

- Always set expectations before the code exercising the mock runs.
- Prefer `ON_CALL` to set default behaviors without strict expectations.
- Use `EXPECT_CALL` sparingly to verify critical interactions.
- Use `NiceMock` if you want to suppress uninteresting call warnings.
- Interpret test output carefully; failure messages are designed to aid debugging.

---

### Troubleshooting Quick Reference

| Symptom                  | Common Cause                      | Solution                                   |
|--------------------------|---------------------------------|--------------------------------------------|
| Tests not discovered     | Missing `main()` or wrong linker | Link against `gtest_main` or define proper `main()` |
| Unexpected mock call      | Call without matching expectation | Add `EXPECT_CALL` or `ON_CALL` as appropriate |
| Excessive Calls Failure  | Method called more than expected | Adjust `Times()`, use `RetiresOnSaturation()` if needed |
| Uninteresting Call Warning | Mock method called without expectations | Use `NiceMock` or add a catch-all `EXPECT_CALL` with `Times(AnyNumber())` |
| Leaked Mocks Warning     | Mock object not deleted           | Ensure proper deletion or `Mock::AllowLeak()` |

---

By following this guide, you will confidently execute your GoogleTest and GoogleMock tests and interpret their results to ensure your testing setup is correct and effective.