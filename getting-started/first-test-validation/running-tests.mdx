---
title: "Compiling and Running Tests"
description: "Explains how to build test executables and execute them on supported platforms. Highlights test discovery, result formats, and interpreting GoogleTest output for the first time."
---

# Compiling and Running Tests with GoogleTest

This guide walks you through the essential process of compiling your test executables and running them on supported platforms using the GoogleTest framework. It highlights how GoogleTest discovers tests automatically, the formats available for test results, and how to interpret GoogleTest output effectively.

---

## 1. Building Your Test Executable

GoogleTest requires you to compile your test code into executables that call `RUN_ALL_TESTS()` to launch all registered tests.

### Step 1: Write Your Tests

Create test source files using the `TEST()`, `TEST_F()`, or other test macros. For example:

```cpp
#include <gtest/gtest.h>

// A simple test example
TEST(SampleTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}
```

### Step 2: Create or Use a `main()` Function

Most users do not need to write their own `main()` function. Linking your tests with the **`gtest_main`** library provides a ready-made `main()` that:
- Initializes GoogleTest
- Parses command line flags
- Runs all tests

If you need customization, provide your own `main()` following this pattern:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Step 3: Compile Your Tests

Use your preferred build system, ensuring GoogleTest and your test files are compiled and linked together. For example, with `g++`:

```bash
g++ -std=c++17 my_tests.cc -lgtest -lgtest_main -pthread -o my_tests
```

> **Tip:** When using CMake or Bazel, GoogleTest integration is streamlined. Refer to the respective installation guides for build file configuration.

### Step 4: Verify Compilation

- Successful compilation yields an executable (e.g., `my_tests`).
- Missing the `RUN_ALL_TESTS()` call or misconfiguring linking will cause errors or no tests to run.

---

## 2. Running Your Test Executable

Once compiled, run the test executable normally from a command line.

```bash
./my_tests
```

### What Happens During Execution?

- GoogleTest automatically discovers and runs **all** tests registered via macros.
- The framework initializes test fixtures, runs each test in isolation, and aggregates results.
- The `RUN_ALL_TESTS()` call returns `0` if all tests pass, or `1` if any test fails.

### Understanding the Console Output

GoogleTest prints:
- Names of test suites and individual tests as they run
- Success or failure notices for each test
- Summary counts of passed, failed, disabled, and skipped tests
- Timing information for test runs

Example output snippet:

```
Running main() from gtest_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from SampleTest
[ RUN      ] SampleTest.Addition
[       OK ] SampleTest.Addition (0 ms)
[ RUN      ] SampleTest.Subtraction
[  FAILED  ] SampleTest.Subtraction (1 ms)
[ RUN      ] SampleTest.Multiplication
[       OK ] SampleTest.Multiplication (0 ms)
[----------] 3 tests from SampleTest (1 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] SampleTest.Subtraction

 1 FAILED TEST
```


### Using Command-Line Flags

Invoke the test executable with GoogleTest flags to control behavior:

- `--gtest_filter=TestSuiteName.TestName` — Run a specific test or subset
- `--gtest_output=xml:path/to/file.xml` — Save results in XML format
- `--gtest_list_tests` — List all discovered tests without running any

Example to list all tests:

```bash
./my_tests --gtest_list_tests
```

### Output Result Formats

GoogleTest supports producing results in multiple formats:

- **Console output** (default)
- **XML** report for CI integration and tools
- **JSON** output (when using certain flags)

Use the `--gtest_output` flag to specify format and destination, for example:

```bash
./my_tests --gtest_output=xml:report.xml
```

---

## 3. Interpreting Test Output

The key to productive testing is understanding GoogleTest's feedback.

### Test Result Status

- **PASSED:** All assertions in the test succeeded.
- **FAILED:** At least one assertion failed or the test crashed.
- **DISABLED:** Tests marked with `DISABLED_` prefix won’t run unless explicitly enabled.
- **SKIPPED:** Tests or suites can be skipped at runtime using `GTEST_SKIP();`.

### Failures and Diagnostic Information

When a test fails, GoogleTest shows:
- File and line number where the failure occurred.
- The failed assertion and any provided messages.
- For parameterized tests, the parameter values are shown.

Example failure message excerpt:

```
/path/to/my_tests.cc:25: Failure
Expected equality of these values:
  result
    Which is: 3
  expected
    Which is: 4
```

This helps target the exact problem immediately.

### Test Filtering and Re-running Failed Tests

- Use `--gtest_filter` to re-run specific tests after failures.
- GoogleTest stores recently failed tests in certain environments for ease of debugging.

### Handling Test Timeouts and Abnormal Termination

If a test hangs or crashes, check:
- Resource leaks or deadlocks in your test or code.
- Proper initialization and teardown in your fixtures.

---

## 4. Advanced Test Execution Tips

### Parallel Test Execution

GoogleTest supports options to run tests in parallel, improving speed on multi-core machines. Integration with CI systems often leverages this.

### Customizing Output

- You may write or attach custom `TestEventListener`s to tailor output.
- Combining flags such as `--gtest_color=yes` improves readability.

### Environment Setup and Global Fixtures

Tests share global environments for setup and teardown with `testing::Environment`.
To add these, register with `AddGlobalTestEnvironment()` prior to `RUN_ALL_TESTS()`.

Use skip features carefully to handle unsupported environments gracefully.

---

## 5. Common Pitfalls and Troubleshooting

| Issue                         | Cause & Solution                                              |
|-------------------------------|--------------------------------------------------------------|
| No tests are executed          | Ensure tests are linked; `RUN_ALL_TESTS()` called exactly once. |
| Tests fail on missing `main()`| Link to `gtest_main` or provide your own `main()` as documented. |
| Output is overwhelming         | Use `--gtest_filter` to limit test runs; or `--gtest_brief` (if supported). |
| Unexpected failures on setup  | Check fixture constructors and `SetUp()` for failures or exceptions. |

> **Tip:**  
> Always ensure you check the return code of `RUN_ALL_TESTS()` in your `main()` function to accurately detect failures.

---

## 6. Next Steps

- Explore writing your first tests in the [Writing Your First Test](/getting-started/first-test-validation/writing-basic-test) guide.
- Set up your build system integration with [Installing with CMake](/getting-started/prerequisites-installation/installation-cmake) or [Installing with Bazel](/getting-started/prerequisites-installation/installation-bazel).
- Understand test discovery and execution lifecycles by reviewing [Test Discovery and Execution Lifecycle](/concepts/core-architecture/test-lifecycle).
- Learn about advanced output and flag options in the [Advanced User Guide](/advanced.md).

---

## References

- GoogleTest `main()` source examples from [gtest_main.cc](https://github.com/google/googletest/blob/main/googletest/src/gtest_main.cc)
- Understanding test event listeners and reporting via [Testing Reference - TestEventListener](https://github.com/google/googletest/blob/main/docs/reference/testing.md#testeventlistener)
- Test macros and running tests: [Testing Reference - Test Definition & Execution](https://github.com/google/googletest/blob/main/docs/api-reference/core-test-api/test-definition-execution.md)


---

_Use this guide to compile your tests, confidently run them, and interpret the results to accelerate your C++ development with GoogleTest._