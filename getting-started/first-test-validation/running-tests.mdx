---
title: "Building and Running Tests"
description: "Demonstrates how to build and execute your tests, regardless of platform. Details expected command-line outputs and how GoogleTest discovers and runs tests automatically."
---

# Building and Running Tests

This guide demonstrates how to build and execute your tests using GoogleTest, across different platforms and build systems. It also explains how GoogleTest automatically discovers, runs your tests, and what outputs you can expect.

---

## 1. Building Your Tests

GoogleTest supports multiple build systems, but the most common and recommended approaches are CMake and Bazel.

### Building with CMake

GoogleTest includes preconfigured CMake scripts that simplify building both the framework and your test code.

#### Standalone Build Steps

1. Clone the repository and check out the desired release tag:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
dcd googletest
mkdir build
cd build
cmake .. [-DBUILD_GMOCK=OFF]  # Use the flag to skip building GoogleMock if desired
```

2. Build using `make` (on Unix-like systems):

```bash
make
```

3. Optionally, install GoogleTest system-wide (requires admin privileges):

```bash
sudo make install
```

#### Building in Visual Studio or Xcode

- On Windows, generate Visual Studio solutions (`gtest.sln`) via CMake and build using the Visual Studio GUI or CLI.
- On macOS, generate an Xcode project (`*.xcodeproj`) via CMake, then build via Xcode.

#### Integrating GoogleTest into Your CMake Project

Instead of a standalone build, you can incorporate GoogleTest directly into your project's build:

- Use [`FetchContent`](https://cmake.org/cmake/help/latest/module/FetchContent.html) to download GoogleTest during your build configuration.
- Add it as a subdirectory with `add_subdirectory()` for tighter integration, ensuring consistent compiler settings.

Example snippet for your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # Windows: dynamic runtime
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

### Building with Bazel

Bazel users should refer to Bazel-specific documentation for test target setup and execution, as GoogleTest supports it natively.

---

## 2. Running Your Tests

Once your tests are built into a binary executable, you can run them directly from the command line.

### Basic Usage

Simply execute your test binary:

```bash
./example_test
```

By default, this runs **all tests** discovered and registered in your build.

### How GoogleTest Discovers and Runs Tests

- Tests are registered automatically via the `TEST()`, `TEST_F()`, `TEST_P()`, and other macros at compile time.
- When you run your test binary, GoogleTest enumerates all registered tests.
- It then executes each registered test in turn, reporting results.

### Example Console Output

```none
Running main() from gmock_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from ExampleTest
[ RUN      ] ExampleTest.FirstTest
[       OK ] ExampleTest.FirstTest (0 ms)
[ RUN      ] ExampleTest.SecondTest
example_test.cpp:20: Failure
Expected equality of these values: foo
  Actual: 1
  Expected: 2
[  FAILED  ] ExampleTest.SecondTest (0 ms)
[ RUN      ] ExampleTest.ThirdTest
[       OK ] ExampleTest.ThirdTest (0 ms)
[----------] 3 tests from ExampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ExampleTest.SecondTest

 1 FAILED TEST
```

### Listing Available Tests Without Running

To only list tests without running them, use the `--gtest_list_tests` flag:

```bash
./example_test --gtest_list_tests
```

This outputs a list of all test suites and tests, without executing any:

```none
ExampleTest.
  FirstTest
  SecondTest
  ThirdTest
```

### Running a Subset of Tests

You can run selected tests via the `--gtest_filter` flag.

Examples:

- Run all tests in `ExampleTest` suite:

```bash
./example_test --gtest_filter=ExampleTest.*
```

- Run tests with names containing `First` or `Third`:

```bash
./example_test --gtest_filter=*First*:*Third*
```

- Run all tests except those containing `Second`:

```bash
./example_test --gtest_filter=-*Second*
```

### Running Disabled Tests

Tests prefixed with `DISABLED_` are compiled but skipped by default.

To include them in a run:

```bash
./example_test --gtest_also_run_disabled_tests
```

You can combine this with other filters to select specific disabled tests.

---

## 3. Test Execution Details and Output Controls

### Exit Codes

- `0` indicates all tests passed.
- Non-zero indicates one or more test failures.

Your `main()` function must return the result of `RUN_ALL_TESTS()` to signal test success or failure.

### Color Output

GoogleTest supports colorized output for easier test result interpretation.

- Enable color output:
  
```bash
./example_test --gtest_color=yes
```

- Disable color output:

```bash
./example_test --gtest_color=no
```

- Default auto mode enables color when output is a terminal.

### Generating Test Reports

GoogleTest can output detailed test results in XML or JSON format, useful for CI/CD systems.

Example to generate XML:

```bash
./example_test --gtest_output=xml:report.xml
```

JSON generation is similar:

```bash
./example_test --gtest_output=json:report.json
```

See the [XML](https://github.com/google/googletest/blob/main/docs/advanced.md#generating-an-xml-report) and [JSON](https://github.com/google/googletest/blob/main/docs/advanced.md#generating-a-json-report) specifications for report format details.

---

## 4. Troubleshooting Common Issues

### Tests Not Found or Not Running

- Verify your tests are linked into the test binary.
- Check if tests are named with the `DISABLED_` prefix, which disables execution by default.
- Use `--gtest_list_tests` to confirm available tests.

### Build and Linking Problems

- Ensure GoogleTest is properly built or installed.
- Confirm your test binary links against `gtest` or `gtest_main` libraries.
- When using CMake's FetchContent or subdirectory approach, ensure `FetchContent_MakeAvailable(googletest)` or equivalent commands are executed before adding test targets.

### Inconsistent Runtime Behavior

- Make sure calls to `testing::InitGoogleTest(&argc, argv)` precede `RUN_ALL_TESTS()` in your `main()`.
- Look out for conflicts caused by mixing different runtime libraries, especially on Windows. Use CMake option `gtest_force_shared_crt` to align runtimes.

### Test Output Clutter

- Separate test output and log messages by redirecting test output to a file:

```bash
./example_test > test_output.txt
```

- Use flags like `--gtest_brief=1` to suppress passing test messages.

---

## 5. Summary

You have now learned how to build your tests using CMake (and alternatives), run your test binary to automatically discover and run tests, control outputs, filter tests, generate reports, and troubleshoot common pitfalls in test execution.

For deeper information on writing tests and advanced execution control, see related documentation.

---

## Additional Resources

- [Installing GoogleTest (CMake & Bazel)](/getting-started/setup-prerequisites-installation/installation-cmake-bazel)
- [Writing Your First Test](/getting-started/first-test-validation/writing-your-first-test)
- [Running Tests](/getting-started/first-test-validation/running-tests)  (this page)
- [Quick Validation & Troubleshooting](/getting-started/first-test-validation/quick-validation-checks)
- [Advanced GoogleTest Topics](docs/advanced.md)
- [GoogleTest Primer](docs/primer.md)

---

## Example Minimal `main()`

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This main function initializes GoogleTest, runs all registered tests, and returns the aggregate result.

---

## Visual Overview

```mermaid
flowchart TD
  A[Start: Build your test program] --> B[Run your test executable]
  B --> C{Use flags?}
  C -- No --> D[Run all tests and print full output]
  C -- Yes --> E[Parse and apply flags (--gtest_filter, --gtest_list_tests, etc.)]
  E --> F[Run selected tests]
  D & F --> G[Display per-test results]
  G --> H[Return exit code (0=success, 1=failure)]
  H --> I[End]
```
