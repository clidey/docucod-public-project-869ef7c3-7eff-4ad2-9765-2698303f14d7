---
title: "Basic Configuration Options"
description: "Customize your GoogleTest execution environment by adjusting configuration flags, environment variables, and test discovery options. This page demystifies recommended settings and highlights where and how to tweak defaults for your build system and workflow."
---

# Basic Configuration Options

Customize your GoogleTest execution environment by adjusting configuration flags, environment variables, and test discovery options. This page demystifies recommended settings and highlights where and how to tweak defaults for your build system and workflow.

---

## 1. Understanding GoogleTest Configuration

GoogleTest provides a rich set of configuration options to control how tests are discovered, executed, and reported. These options are primarily set via command-line flags or environment variables, allowing easy customization without modifying your test code.

Most of these flags have the `--gtest_` prefix when used on the command line (e.g., `--gtest_filter`, `--gtest_repeat`) and corresponding uppercase environment variables (e.g., `GTEST_FILTER`, `GTEST_REPEAT`). When both a flag and an environment variable are set, the command-line flag takes precedence.

### Why Customize?

Adjusting these options lets you tailor GoogleTest to your development workflow:

- Run specific tests or exclude tests when debugging
- Control test execution order or repeat flaky tests
- Change output format for integration with reporting tools
- Enable or disable features like colored output or exception handling

---

## 2. Common Configuration Flags and Environment Variables

Below are the most useful configuration options you can adjust to customize your test environment.

### Test Selection and Filtering

- **`--gtest_filter` / `GTEST_FILTER`**
  - **Purpose:** Select a subset of tests to run.
  - **Format:** Colon-separated glob-style patterns for inclusion, optionally followed by a `-` and patterns for exclusion.
  - **Example:** `--gtest_filter=FooTest.*-FooTest.Bar` runs all `FooTest` tests except the `Bar` test.

- **`--gtest_also_run_disabled_tests` / `GTEST_ALSO_RUN_DISABLED_TESTS`**
  - **Purpose:** Include tests marked as disabled (`DISABLED_` prefix) along with enabled ones.

- **`--gtest_list_tests` / `GTEST_LIST_TESTS`**
  - **Purpose:** List all tests without executing them.

### Execution Control

- **`--gtest_repeat` / `GTEST_REPEAT`**
  - **Purpose:** Run tests multiple times. Negative values repeat forever.
  - **Use case:** Detect flaky tests by repeating executions.

- **`--gtest_shuffle` / `GTEST_SHUFFLE`**
  - **Purpose:** Randomize test execution order per run.

- **`--gtest_random_seed` / `GTEST_RANDOM_SEED`**
  - **Purpose:** Specify random seed used for shuffling. `0` uses current time.

- **`--gtest_fail_fast` / `GTEST_FAIL_FAST`**
  - **Purpose:** Stop on first test failure.

- **`--gtest_recreate_environments_when_repeating` / `GTEST_RECREATE_ENVIRONMENTS_WHEN_REPEATING`**
  - **Purpose:** Control whether global environments are recreated on every repeat.
  - **Default:** false for finite repeats, true if repeating forever.

- **`--gtest_throw_on_failure` / `GTEST_THROW_ON_FAILURE`**
  - **Purpose:** Failures cause exceptions to be thrown (useful when integrating with other test frameworks).

### Output and Reporting

- **`--gtest_output` / `GTEST_OUTPUT`**
  - **Purpose:** Define output format (`xml` or `json`) and output file/directory.
  - **Examples:**
    - `--gtest_output=xml` generates `test_detail.xml` in current directory.
    - `--gtest_output=xml:output_dir/` produces output in directory.

- **`--gtest_color` / `GTEST_COLOR`**
  - **Purpose:** Control colored output (`yes`, `no`, `auto`).
  - **Default:** `auto` enables color only if output is a terminal.

- **`--gtest_brief` / `GTEST_BRIEF`**
  - **Purpose:** Suppress all output except failures.

- **`--gtest_print_time` / `GTEST_PRINT_TIME`**
  - **Purpose:** Show elapsed time for each test.
  - **Default:** true.

- **`--gtest_print_utf8` / `GTEST_PRINT_UTF8`**
  - **Purpose:** Enable printing UTF-8 characters in output.

- **`--gtest_list_tests` / `GTEST_LIST_TESTS`**
  - **Purpose:** List all tests without running.

### Advanced Controls

- **`--gtest_fail_if_no_test_linked`**
  - Fail execution if no test case is linked.

- **`--gtest_fail_if_no_test_selected`**
  - Fail if no tests are selected to run.

- **`--gtest_install_failure_signal_handler`**
  - Install platform-specific fatal signal handler to dump debug info.

- **`--gtest_stack_trace_depth`**
  - Limit number of stack frames printed on failure.

- **`--gtest_break_on_failure`**
  - Generate a breakpoint when an assertion fails (good for debugging).

- **`--gtest_catch_exceptions`**
  - Catch exceptions thrown by tests and treat as failures.
  - Can be turned off to allow crashing to help debugger.

---

## 3. How to Set These Options

### Via Command Line Flags

Simply pass flags to your GoogleTest executable:

```shell
./my_tests --gtest_filter=MyTestSuite.* --gtest_repeat=10 --gtest_output=xml:report_dir/
```

### Via Environment Variables

Set environment variables before running your tests. For example:

```shell
export GTEST_FILTER=MyTestSuite.*
export GTEST_REPEAT=10
./my_tests
```

### Using a Flagfile

You can specify a flagfile (a plain text file containing flags) using `--gtest_flagfile=` flag, and GoogleTest will read flags from it.

---

## 4. Best Practices

- **Use filters to speed up debugging:** Narrow down test runs using `--gtest_filter`.

- **Repeat flaky tests:** Use `--gtest_repeat` to surface flaky behaviors over multiple runs.

- **Control output for automation:** Generate XML/JSON reports using `--gtest_output` for CI systems or test aggregators.

- **Combine shuffle and repeat:** Detect order-dependent failures by combining `--gtest_shuffle` and `--gtest_repeat`.

- **Enable break-on-failure in debugging sessions:** Use `--gtest_break_on_failure` to catch failures immediately.

- **Run disabled tests carefully:** Enable `--gtest_also_run_disabled_tests` only when needed.

---

## 5. Troubleshooting Common Configuration Issues

- **No tests run when using filters:** Verify your filter syntax. Remember filters use glob patterns, not regex.
- **Unexpected test skips with shards:** Make sure environment variables `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set correctly.
- **No output or wrong output format:** Confirm file paths and format string syntax in `--gtest_output`.
- **Color output looks wrong:** Use `--gtest_color=no` if your terminal does not support colors.
- **Unhandled exceptions cause test crashes:** Enable `--gtest_catch_exceptions=1` to catch exceptions and report as failures.

---

## 6. Configuration in Build Systems

GoogleTest can be built with various build systems like CMake or used with package managers via pkg-config. The build configuration affects compile-time definitions, which can influence runtime behavior.

- **Compiler flags:** Macros like `GTEST_HAS_PTHREAD` are usually set automatically but can be overridden.
- **Shared library builds:** Define `GTEST_CREATE_SHARED_LIBRARY=1` when building shared libraries and `GTEST_LINKED_AS_SHARED_LIBRARY=1` when linking.
- **C++ standard requirement:** GoogleTest requires C++17 minimum.

Refer to the [Installing GoogleTest](https://github.com/google/googletest/blob/main/docs/getting-started/setup-prerequisites-installation/installing-googletest.mdx) and [Using GoogleTest from various build systems](docs/pkgconfig.md) for detailed instructions.

---

## 7. Example: Running Tests with Custom Configuration

Suppose you want to run all tests except those in `DeathTest` suites, generate an XML report, shuffle the tests, and stop on first failure. Run:

```bash
./my_tests \ 
  --gtest_filter=-*DeathTest.* \ 
  --gtest_output=xml:reports/ \ 
  --gtest_shuffle \ 
  --gtest_fail_fast
```

This creates an XML report in `reports/` directory, randomizes test order, and halts on the first failure, helping debug complex scenarios efficiently.

---

## 8. Where to Learn More

- [GoogleTest Primer](guides/getting-started/primer.md): For starting to write tests
- [Running Your First Test](getting-started/first-run-configuration-troubleshooting/writing-and-running-your-first-test.mdx): Step-by-step test creation and execution
- [Advanced GoogleTest Topics](docs/advanced.md): Deep dive into advanced configurations and testing techniques
- [Troubleshooting Setup Issues](getting-started/first-run-configuration-troubleshooting/troubleshooting-common-setup-issues.mdx): Fix common environment and configuration problems

---

For full details on all flags, consult `--help` output of your test executable or check GoogleTest's built-in help message by running:

```bash
./my_tests --help
```

---

**Note:** All these settings are directly supported and controlled by GoogleTest itself; do not attempt to set flags or environment variables unknown to GoogleTest.

---