---
title: "Troubleshooting Common Setup Issues"
description: "Presents solutions to frequent setup problems such as build errors, linker issues, and incompatibility messages, reducing onboarding friction and providing confidence to new users."
---

# Troubleshooting Common Setup Issues

This page helps you swiftly identify and solve frequent setup problems encountered during GoogleTest installation and integration. Addressing common build errors, linker issues, and incompatibility messages early on will smooth your onboarding and provide confidence that your testing environment is correctly established.

---

## 1. Build Errors

GoogleTest uses modern C++ features and depends on a proper build environment. The following checklist and remedies cover typical build-related issues:

### 1.1 Compiler Compatibility

- **Ensure C++17 Support:** GoogleTest requires a compiler supporting at least C++17.
- **Common Supported Versions:**
  - GCC >= 7
  - Clang >= 5
  - MSVC >= Visual Studio 2017 version 15.7

If you encounter errors related to unknown language constructs or unsupported standards, verify your compiler version and upgrade if necessary.

### 1.2 CMake Build Issues

- Use **CMake 3.14 or later** when building GoogleTest via CMake, especially if employing the `FetchContent` mechanism.
- If build fails, 
 1. Confirm your CMake version (`cmake --version`).
 2. Clean previous build directories.
 3. Re-run the generation commands, e.g.:  
    ```sh
    mkdir build
    cd build
    cmake ..
    make
    ```

- To build only GoogleTest (no GoogleMock), use the option `-DBUILD_GMOCK=OFF`:
  ```sh
  cmake .. -DBUILD_GMOCK=OFF
  make
  ```

### 1.3 Linker Errors

- **Common Errors:** `undefined reference` to static const members or template code.
- **Solution:**
  - For static constants defined in class headers, add explicit *out-of-class* definitions in a `.cc` file if not declared `constexpr`.
  - When using GoogleTest as a static library, ensure the linking stage includes `-lgtest` and dependencies.

Example linker fix:
```c++
// foo.h
class Foo {
  static const int kConst = 42;  // Declaration
};

// foo.cc
const int Foo::kConst;  // Definition
```

### 1.4 Visual Studio Runtime Mismatch

If you see errors like `mismatch detected for 'RuntimeLibrary'`, this indicates conflicting CRT linkage:

- Set the CMake option `gtest_force_shared_crt=ON` to dynamically link runtimes, matching your project settings.

Example:
```sh
cmake .. -Dgtest_force_shared_crt=ON
```

This avoids linker errors caused by mixing static and dynamic CRT.

## 2. Incompatibility and Environment Issues

### 2.1 Thread Safety

GoogleTest detects pthread support and adjusts accordingly.

- If `GTEST_IS_THREADSAFE` is not defined correctly, you may see errors related to threading.
- You can force pthread usage by adding compiler definitions:

```sh
-DGTEST_HAS_PTHREAD=1
```

and ensure linking to pthread library by adding `-lpthread` for Unix-like systems.

### 2.2 Macro Name Clashes

C++ macros are global and GoogleTest may clash with other libraries defining the same macro names.

- To avoid conflicts, use `-DGTEST_DONT_DEFINE_TEST=1` to rename `TEST()` macro to `GTEST_TEST()`.
- Similar flags exist for other macros such as `ASSERT_EQ`, `EXPECT_EQ`, etc.

Example:
```sh
g++ -DGTEST_DONT_DEFINE_TEST=1 ...
```

### 2.3 Unsupported Platforms

Refer to the [Supported Platforms](https://github.com/google/googletest/blob/main/docs/getting-started/environment-setup/supported-platforms.md) documentation to verify core platform and compiler support. Using GoogleTest outside these environments may lead to build or runtime issues.

## 3. Common Pitfalls

### 3.1 Ignoring Return Value of RUN_ALL_TESTS

The test programâ€™s `main` function must return the result of `RUN_ALL_TESTS()`. Failure to do so can cause test results to be misinterpreted.

Incorrect:
```c++
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  RUN_ALL_TESTS();  // Return value ignored!
}
```

Correct:
```c++
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();  // Return test results properly.
}
```

### 3.2 Correct Use of `SetUp()` vs Constructor

- Avoid placing GoogleTest assertions inside constructors or destructors; use `SetUp()` and `TearDown()` instead.
- Fatal assertions (e.g., `ASSERT_*`) are not allowed in constructors/destructors.

See [FAQ on Constructor vs SetUp](https://github.com/google/googletest/blob/main/docs/faq.md#CtorVsSetUp) for details.

### 3.3 Naming Conventions

- Test suite and test names must be valid C++ identifiers without underscores (`_`) to avoid internal naming collisions.
- Follow recommended naming to prevent subtle failures or compiler/linker problems.

## 4. Verifying Your Installation

After setup, compile and run a simple test program like this to confirm that your installation is correct:

```c++
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  ASSERT_TRUE(true);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run:

```sh
g++ -std=c++17 your_test.cc -lgtest -pthread -o your_test
./your_test
```

Expected output indicates all tests passed.

## 5. Troubleshooting Checklist

<AccordionGroup title="Common Troubleshooting Tips">
<Accordion title="Build errors related to C++ standard or compiler">
Use a compiler that supports C++17 or later. Double-check your compiler version and build flags.
</Accordion>
<Accordion title="Linker errors involving undefined references">
Ensure all required static constant data members are properly defined out-of-class. Verify correct linking of GoogleTest libraries.
</Accordion>
<Accordion title="Runtime errors due to threading or missing dependencies">
Confirm pthread support on Unix-like systems and pass necessary linker flags such as `-lpthread`.
</Accordion>
<Accordion title="Tests not running or being recognized">
Check that tests are declared with valid `TEST()` or `TEST_F()` macros, and that the test executable calls `RUN_ALL_TESTS()` in `main()`.
</Accordion>
<Accordion title="Fatal failures inside constructors or destructors">
Move any fatal assertions from constructor/destructor to `SetUp()`/`TearDown()` methods.
</Accordion>
<Accordion title="Macro naming conflicts with other libraries">
Use macro renaming compiler flags like `-DGTEST_DONT_DEFINE_TEST=1`.
</Accordion>
</AccordionGroup>

## 6. Getting More Help

If you continue to experience difficulties, consult:

- [Getting Started Guide](https://github.com/google/googletest/blob/main/docs/getting-started/index.md)
- [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md)
- [Supported Platforms](https://github.com/google/googletest/blob/main/docs/getting-started/environment-setup/supported-platforms.md)
- [Installation via CMake](https://github.com/google/googletest/blob/main/docs/getting-started/installation-integration/installing-via-cmake.md)
- Community forums and issue trackers on GitHub

---

With these insights and fixes, you will resolve frequent setup challenges confidently and quickly, getting you on track to write and run your first GoogleTest tests effectively.

---

For detailed instructions on writing your first tests and verifying installation, see [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/docs/getting-started/first-steps-validation/creating-your-first-test.md) and [Verifying Your Installation](https://github.com/google/googletest/blob/main/docs/getting-started/first-steps-validation/verifying-installation.md).