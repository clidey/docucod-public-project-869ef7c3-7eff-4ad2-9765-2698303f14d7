---
title: "Writing Your First Test"
description: "Explore a basic test case example to quickly validate your GoogleTest setup. This walkthrough demonstrates creating a test suite and running it, ensuring you have a working baseline. Build confidence by seeing a passing (or failing) test in action."
---

# Writing Your First Test

Explore a basic test case example to quickly validate your GoogleTest setup. This walkthrough demonstrates creating a test suite and running it, ensuring you have a working baseline. Build confidence by seeing a passing (or failing) test in action.

---

## 1. Prerequisites & Setup

Before writing your first test, ensure the following:

- **GoogleTest and GoogleMock Installed**: Confirm you have both GoogleTest and GoogleMock correctly installed and included in your build environment.
- **Include Directories and Linker Setup**: Your build configuration includes the appropriate include paths for `gtest` and `gmock` headers, and links the necessary libraries.
- **C++17 or Later**: Your compiler supports C++17 or later for full compatibility.

<Tip>
If you haven’t installed GoogleTest yet, see the [Installing GoogleTest](https://github.com/google/googletest/blob/main/docs/installation.md) guide for step-by-step instructions.
</Tip>

## 2. Creating a Basic Test Suite

Writing your first test lets you verify that GoogleTest and GoogleMock are working as expected.

### Step 1: Include GoogleTest Headers

Start by including the core testing headers.

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Test Case and Test

GoogleTest organizes tests into **test suites**, each containing multiple **test cases**. Here is a minimal example:

```cpp
// Define a Test Suite "SampleTest" and a Test Case "BasicAssertion"
TEST(SampleTest, BasicAssertion) {
  int expected = 5;
  int actual = 2 + 3;

  // Verify that actual equals expected
  EXPECT_EQ(actual, expected);
}
```

- `TEST` macro takes two arguments: the test suite name and the test case name.
- Use `EXPECT_*` macros to assert test conditions (e.g., `EXPECT_EQ`, `EXPECT_TRUE`).

### Step 3: Run the Test

Add a `main` function to launch GoogleTest. Often, your project may provide this for you, but here is how to write a simple runner:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes GoogleTest and runs all tests defined.

<Tip>
If using CMake, link your test executable against `gtest` and `gmock` and add the test target following the [CMake Integration](https://github.com/google/googletest/blob/main/googletest/README.md#using-with-cmake) guidance.
</Tip>

## 3. Creating a Mock Class (Optional)

For code that depends on interfaces, you can write mocks easily using GoogleMock. A minimal example:

```cpp
#include <gmock/gmock.h>

// Interface to mock
class Foo {
 public:
  virtual ~Foo() {}
  virtual int GetValue() = 0;
};

// Mock class
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (override));
};
```

<Tip>
Ensure the mocked methods are declared virtual in the interface and the destructor is also virtual.
</Tip>

## 4. Writing Your First Test with a Mock

Combine GoogleTest and GoogleMock to write a test using a mock object.

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::Return;

// Mock class as above
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (override));
};

TEST(MockTest, ReturnsCorrectValue) {
  MockFoo mock;

  // Set expectation to return 42 when GetValue() is called
  EXPECT_CALL(mock, GetValue())
      .WillOnce(Return(42));

  int result = mock.GetValue();
  EXPECT_EQ(result, 42);
}
```

This test both verifies that `GetValue()` is called exactly once and that it returns the expected result.

## 5. Running the Test

Build and run your test executable:

```shell
$ ./your_test_executable
[==========] Running 2 tests from 2 test suites.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertion
[       OK ] SampleTest.BasicAssertion (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] 1 test from MockTest
[ RUN      ] MockTest.ReturnsCorrectValue
[       OK ] MockTest.ReturnsCorrectValue (0 ms)
[----------] 1 test from MockTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 2 test suites ran. (0 ms total)
[  PASSED  ] 2 tests.
```

<Tip>
If tests are not running or failing unexpectedly, verify that all test definitions come **before** `RUN_ALL_TESTS()` is called.
</Tip>

## 6. Understanding Test Outcomes

- A **passing test** indicates your environment is set up correctly and tests are executed.
- A **failing test** helps you identify mismatches between expectations and actual behavior.

You can rely on GoogleTest’s detailed output to quickly locate failures.

## 7. Best Practices

- **Always set expectations before exercise**: Define what mock methods are called before running the code.
- **Use clear test suite and test case names**: Express intent clearly.
- **Verify mock usage**: GoogleMock automatically verifies expectations at mock destruction.
- **Control verbosity**: Use `--gmock_verbose=info` to debug test behavior.

## 8. Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Test Executable Does Not Run Any Tests">
Make sure your tests are correctly linked and that they use the `TEST` or `TEST_F` macros. Also verify your test functions are not in anonymous namespaces.
</Accordion>
<Accordion title="Mock Method Called Unexpectedly">
Review your `EXPECT_CALL` setups. Unexpected calls happen if a method is called without an active matching expectation. Consider adding catch-all expectations or using `NiceMock` to suppress warnings.
</Accordion>
<Accordion title="Compiler Errors on MOCK_METHOD">
Confirm that mocked methods are marked `virtual` and are declared correctly, with signature matching the base class. Remove any unprotected commas or complex types causing macro parsing issues (wrap return or argument types with parentheses if needed).
</Accordion>
<Accordion title="Linker Errors Related to GoogleTest or GoogleMock">
Check that GoogleTest and GoogleMock libraries are linked appropriately and built with compatible compiler flags and C++ standard.
</Accordion>
</AccordionGroup>

## 9. Next Steps

After verifying the basic setup:

- Explore writing parameterized tests and custom assertions.
- Dive deeper into GoogleMock using the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) and [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html).
- Learn to organize, run, and debug larger test suites effectively.
- Consult [Writing Clean, Maintainable Tests](https://google.github.io/googletest/guides/best-practices-and-tuning/writing-clean-tests) for professional test code.


---

### Example: Complete Minimal Test File

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::Return;

class Foo {
 public:
  virtual ~Foo() {}
  virtual int GetValue() = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (override));
};

TEST(SampleTest, BasicAssertion) {
  EXPECT_EQ(2 + 3, 5);
}

TEST(MockTest, ReturnsCorrectValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue()).WillOnce(Return(42));
  EXPECT_EQ(mock.GetValue(), 42);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this file to see GoogleTest and GoogleMock in action.


---

## Additional References

- [Writing Tests: Core Concepts & Anatomy](https://google.github.io/googletest/guides/getting-started/core-concepts-and-anatomy.html)
- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [Mocking Basics: Using GoogleMock](https://google.github.io/googletest/guides/mocking-and-advanced-techniques/mocking-basics.html)
- [Configuring Actions & Expectations](https://google.github.io/googletest/guides/mocking-and-advanced-techniques/actions-and-expectations.html)

For deeper expertise, refer to the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) and [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html).

<Check>
Ensure that mock classes have virtual destructors to avoid unexpected runtime behavior.
</Check>

---

**You are now ready to confidently write and run your first GoogleTest test with mocks!**
