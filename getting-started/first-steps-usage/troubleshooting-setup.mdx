---
title: "Troubleshooting Setup Issues"
description: "Resolve common installation and configuration problems fast. This resource lists frequent pitfalls, error messages, and actionable debugging tips, helping you avoid frustration and maintain progress."
---

# Troubleshooting Setup Issues

Resolve common installation and configuration problems fast. This resource lists frequent pitfalls, error messages, and actionable debugging tips, helping you avoid frustration and maintain progress.

---

## Common Setup Problems & How to Fix Them

When integrating and using GoogleMock (gMock) and GoogleTest, users may encounter several typical issues during installation, compilation, or runtime. This guide focuses solely on setup-related problems to get you back on track quickly.

### 1. Installation and Build Failures

- **Symptom:** Build errors related to missing headers, libraries, or compiler incompatibilities.
- **Cause:** Missing dependencies or unsupported environment.
- **Resolution:**
  - Confirm your environment meets GoogleTest's system requirements ([System Requirements](/getting-started/prerequisites-installation/system-requirements)).
  - Ensure you have installed required tools like CMake and a supported compiler.
  - Follow platform-specific installation instructions exactly ([Installation (All Platforms)](/getting-started/prerequisites-installation/installation-platforms)).
  - Verify that your build system (CMake, Bazel, manual) is configured properly.

<Check>
Verify successful installation by running your build system and ensuring no errors related to test framework headers or symbols.
</Check>

### 2. Linking Errors

- **Symptom:** Linker errors about missing symbols or unresolved references to GoogleMock or GoogleTest functions.
- **Cause:** GoogleTest/GoogleMock libraries are not linked or linked incorrectly.
- **Resolution:**
  - Confirm linking against the correct GoogleTest and GoogleMock static or shared libraries.
  - Follow guidance on build integration and linking in [Configuring GoogleTest in Your Project](/getting-started/prerequisites-installation/configuration-setup).
  - For CMake, ensure `target_link_libraries` includes `gtest`, `gmock`, and `pthread` if on Linux.

### 3. Unexpected or Missing Test Results

- **Symptom:** Tests compile but do not run or no tests are discovered.
- **Cause:** Incorrect test definition, missing test registration, or initialization errors.
- **Resolution:**
  - Make sure you have the `TEST()` or `TEST_F()` macros correctly defined.
  - Call `testing::InitGoogleMock(&argc, argv)` before running tests.
  - Verify that your test executable runs and GoogleTest framework initializes.
  - Refer to [Writing & Running Your First Test](/getting-started/first-steps-usage/writing-running-first-test) for correct usage.

### 4. Warnings About Uninteresting Calls

- **Symptom:** "Uninteresting mock function call" warnings appear in output.
- **Cause:** Mock methods are called without corresponding `EXPECT_CALL` setups.
- **Resolution:**
  - Use `ON_CALL` to specify default actions without expecting calls.
  - Use `EXPECT_CALL(...).Times(AnyNumber())` for methods called without verification.
  - Alternatively, wrap your mock object with `NiceMock<T>` to suppress these warnings.
  - See [Mocking Reference - The Nice, the Strict, and the Naggy](../reference/mocking.md#NiceStrictNaggy) for strategies.

### 5. Failed Expectation Messages Pointing to Unexpected Calls or Argument Mismatches

- **Symptom:** Tests fail with detailed messages showing mismatched arguments or calls to unexpected methods.
- **Cause:** `EXPECT_CALL` definitions do not match calls made during tests.
- **Resolution:**
  - Run tests with increased verbosity to understand expectations (`--gmock_verbose=info`).
  - Examine stack traces and argument diagnostics in failure output.
  - Confirm argument matchers used in `EXPECT_CALL` correspond to actual calls.
  - Use GoogleMock's rich matcher facilities (e.g., `_`, `Gt()`, `Eq()`) to flexibly match arguments.
  - Review [gMock Cookbook](../gmock_cook_book.md) sections on matchers and expectations.

### 6. Leaked Mock Objects at Program Exit

- **Symptom:** Errors about leaked mocks on test completion.
- **Cause:** Mock objects not destroyed properly, leading to expectation verifications being skipped.
- **Resolution:**
  - Ensure mock objects have virtual destructors if mocking interfaces.
  - Delete mock objects properly if allocated dynamically.
  - Suppress leak errors intentionally using `Mock::AllowLeak(mock_object)` if leaks are acceptable.

---

## Diagnosing With Verbosity Flags

GoogleMock includes a verbosity setting that controls the amount of diagnostic output.

- Set `--gmock_verbose=info` to print detailed traces of mock calls, expectations matched, actions taken, and stack traces.
- Use `--gmock_verbose=warning` to see warnings only.
- `--gmock_verbose=error` reduces output to only errors.

### Example: Run your test with info verbosity

```bash
./your_test_executable --gmock_verbose=info
```

This will help you follow what GoogleMock is matching at runtime and diagnose mismatches or unexpected calls.

---

## Tips and Best Practices

- Use `ON_CALL` to declare default behaviors for mocks where calls are expected but not under test verification.
- Use `EXPECT_CALL` only for calls whose presence, arguments, count, or order you want to verify.
- Wrap mock objects in `NiceMock` or `StrictMock` templates to control how uninteresting calls are handled.
- Use sequences and `.InSequence()` to enforce call order and runtime behavior dependencies.
- Verify and clear expectations manually using `Mock::VerifyAndClearExpectations(mock_ptr)` if mock lifetime is complex.

---

## Troubleshooting: Step-by-Step

<Steps>
<Step title="Confirm Environment and Dependencies">
Make sure your development environment matches the supported platforms and has required tools installed. Check compiler versions, CMake installation, and threading libraries.
</Step>
<Step title="Build GoogleTest and GoogleMock">
Follow the official instructions precisely for your platform, whether using CMake, Bazel, or manual build. Confirm no build errors and presence of compiled library files.
</Step>
<Step title="Link Correctly in Your Project">
Add proper linking flags/libraries such as `gtest`, `gmock`, and threading libraries. Verify the project builds without unresolved symbols.
</Step>
<Step title="Initialize GoogleMock Before Running Tests">
Ensure your test program calls `testing::InitGoogleMock(&argc, argv);` before invoking `RUN_ALL_TESTS();`.
</Step>
<Step title="Add Valid Mock Expectations">
Set up `EXPECT_CALL` or `ON_CALL` macros correctly for your mock objects with matchers that match the arguments used during the tests.
</Step>
<Step title="Run Tests with Verbose Output If Needed">
Use `--gmock_verbose=info` or equivalent to diagnose unexpected or uninteresting calls. Read the detailed messages to adjust expectations.
</Step>
</Steps>

---

## Common Error Messages Explained

<AccordionGroup title="Common Error Messages">
<Accordion title="Uninteresting mock function call">
This warning appears when a mock method is called but no `EXPECT_CALL` matches it. It is usually safe to ignore if you don't want to verify this call explicitly, but consider adding an `ON_CALL` or `EXPECT_CALL(...).Times(AnyNumber())` to suppress.
</Accordion>
<Accordion title="Unexpected mock function call">
This failure indicates a method was called with arguments that do not match any `EXPECT_CALL`. Review your matchers and ensure expectations cover all valid call cases.
</Accordion>
<Accordion title="Mock function called more times than expected">
GoogleMock detected a call count violation. Either increase `Times()` cardinality, or verify your code does not call more than expected.
</Accordion>
<Accordion title="Leaked mock object">
You must properly destroy mock objects to verify expectations. Use `Mock::AllowLeak()` if you intend to leak mocks intentionally.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- [Installation Platforms Guide](/getting-started/prerequisites-installation/installation-platforms)
- [Configuration and Setup Guide](/getting-started/prerequisites-installation/configuration-setup)
- [Writing & Running Your First Test](/getting-started/first-steps-usage/writing-running-first-test)
- [gMock Cookbook](../gmock_cook_book.md) for advanced mocking tips
- [Mocking Reference](../reference/mocking.md) for detailed mock API info

---

## Getting Help

If you are stuck:

- Check your build and link configuration
- Increase verbosity using `--gmock_verbose=info`
- Examine stack traces and failure messages carefully
- Search and ask in community forums or issue trackers

Stay confident: mastering setup issues will unlock powerful, reliable testing with GoogleTest and GoogleMock.
