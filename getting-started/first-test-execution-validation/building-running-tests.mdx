---
title: "Building and Running Tests"
description: "Instructions covering the commands and steps required to compile and execute your test binaries across supported build systems, helping users confirm their environment is working and their tests can be executed as intended."
---

# Building and Running Tests

This guide walks you through compiling and executing your test binaries using GoogleTest and GoogleMock. It covers the necessary commands and steps for popular build systems, helping you confirm your environment is correctly set up and that your tests execute as intended.

---

## 1. Prerequisites

Before building and running tests, ensure the following:

- You have installed GoogleTest and GoogleMock correctly. Refer to the [Installation Methods guide](https://github.com/google/googletest) or your chosen build system's integration instructions.
- Your compiler supports at least the C++17 standard.
- Your system meets the [Supported Platforms and Requirements](../setup-prerequisites-installation/prerequisites-supported-platforms.md).
- Necessary build tools are available (e.g., CMake or Bazel).


## 2. Building Tests

GoogleTest and GoogleMock integrate seamlessly with common build systems. Below are the steps to build your test executable using CMake or Bazel.

### Using CMake

If you are using CMake, follow these steps:

1. **Configure your CMake project to include GoogleTest/GoogleMock**.
   - Add `find_package(GTest REQUIRED)` or use the bundled googletest submodule.
   - Add your test source files.
   - Link your test targets with `gtest`, `gmock`, and `gmock_main` libraries.

2. **Run CMake configuration**:

```bash
mkdir build
cd build
cmake ..
```

3. **Build the tests**:

```bash
cmake --build .
```

4. **Verify the build output**:

- The build should generate an executable test binary (commonly `my_tests` or similar).
- Check build logs for success messages and no errors.

### Using Bazel

If you use Bazel, perform these steps:

1. Define your test targets in your `BUILD` files using the `cc_test` rule and reference `@com_google_googletest//googletest` and `@com_google_googletest//googlemock`.

2. Run the build command:

```bash
bazel build //path/to:your_test_target
```

3. On success, Bazel produces the test binary under its `bazel-bin` directory.


## 3. Running Tests

After building the test binary, run it to execute your tests and verify functionality.

### Running the Executable Directly

Simply invoke the test binary in your terminal:

```bash
./my_tests
```

Expected output:

- A summary of all tests run, indicating which tests passed or failed.
- Final test summary typically looks like:

```text
[==========] Running N tests from M test cases.
[  PASSED  ] X tests.
[  FAILED  ] Y tests.
```

If any test fails, details of the failures and stack traces are displayed.

### Using GoogleMock's `gmock_main` Library

If you use `gmock_main` which provides a default `main()`:

- Your binary already calls `testing::InitGoogleMock()` and `RUN_ALL_TESTS()`.
- You do not need to implement your own `main()` function.

Example output on run:

```text
Running main() from gmock_main.cc
[==========] Running N tests from M test cases.
[  PASSED  ] N tests.
```

### Common Command-Line Options

GoogleTest and GoogleMock test binaries accept command-line flags for customized behavior:

- `--gtest_filter=FILTER` — run only tests matching FILTER.
- `--gtest_repeat=COUNT` — repeat tests multiple times.
- `--gtest_shuffle` — run tests in randomized order.
- `--gmock_verbose=LEVEL` — set verbosity level of GoogleMock messages (`info`, `warning`, or `error`). Default is `warning`.

Example:

```bash
./my_tests --gtest_filter=MyTestSuite.MyTest
```

## 4. Verifying the Tests

A successful test run indicates your build and test environment is correctly configured and linked.

- All expected tests should run and pass.
- If tests fail, review failures and the error messages for guidance.

### Testing a Basic Mock Example

Here is a simple example test using GoogleMock that you can run to confirm your setup:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class MockTurtle {
 public:
  MOCK_METHOD(void, PenDown, (), ());
};

TEST(TurtleTest, Draws) {
  MockTurtle turtle;
  EXPECT_CALL(turtle, PenDown()).Times(1);
  turtle.PenDown();
}
```

Compile this with the necessary GoogleMock and GoogleTest libraries. On running:

```bash
./my_tests
```

You should see the test pass, verifying that mocking and running tests works.

## 5. Troubleshooting Common Issues

If you encounter problems building or running your tests, consider the following:

- **Link errors involving GoogleMock symbols:** Make sure you link against `gmock` and `gmock_main` libraries.
- **Tests not found or no tests run:** Verify you called `testing::InitGoogleMock()` or are using `gmock_main` for automatic initialization.
- **Tests fail unexpectedly:** Check your mock expectations; ensure you set them before exercising test logic.
- **Verbose output or stack traces missing:** Run tests with `--gmock_verbose=info` to gain more detailed trace logs.

<Tip>
If you are running on embedded or specialized platforms, consult `googlemock/src/gmock_main.cc` for platform-specific considerations on entry-point setup and test running.
</Tip>

## 6. Next Steps

After successful building and running:

- Explore [Writing Your First Test](../first-test-execution-validation/writing-your-first-test.md) to create more complex test cases.
- Learn about [Using Mocks in Tests](../../guides/core-workflows/using-mocks-in-tests.md) for advanced mocking techniques.
- Integrate tests into your continuous integration (CI) pipeline.

For full reference on GoogleMock functionality, macros, and advanced use cases, see the [Mocking Reference](../../api-reference/mocking-and-behavior/call-expectations-control.md) and the [gMock for Dummies guide](../../docs/gmock_for_dummies.md).

---

#### Related Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md)
- [Integration & Ecosystem Compatibility](../../overview/architecture-and-concepts/integration-and-extension.md)
- [Supported Platforms](../../getting-started/setup-prerequisites-installation/prerequisites-supported-platforms.md)
- [Installation Methods](../../getting-started/setup-prerequisites-installation/installation-methods.md)

---

With this foundation, you are ready to confidently build and execute your first GoogleTest and GoogleMock tests.