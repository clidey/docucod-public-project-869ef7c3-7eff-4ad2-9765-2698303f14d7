---
title: "Initial Configuration"
description: "Guides users through integrating GoogleTest into their own C++ project, including adding include paths, linking, and basic test binary setup. Emphasizes best practices for arranging test code in new or existing projects."
---

# Initial Configuration Guide for GoogleTest

Welcome to the **Initial Configuration** guide for integrating GoogleTest into your existing or new C++ project. This guide helps you seamlessly add GoogleTest's headers and libraries, set up your test binary, and adopt best practices for organizing your test code effectively. By following these steps, you will prepare your project to compile, link, and run GoogleTest-based automated tests efficiently.

---

## 1. Prepare Your Project to Use GoogleTest

Before writing your first test, your C++ project must be configured to locate and link GoogleTest correctly.

### Step 1.1: Add GoogleTest Include Paths

GoogleTest's public headers are required in your test source files, typically including:

```cpp
#include <gtest/gtest.h>
```

To enable this, configure your build system to add the path to GoogleTest's headers.

- If you built GoogleTest as a standalone library or submodule, include the root directory containing the `gtest` folder.

- For CMake, add:

```cmake
target_include_directories(your_test_target PRIVATE path/to/googletest/include)
```

### Step 1.2: Link Against GoogleTest Libraries

GoogleTest provides compiled libraries you must link to your test binary.

- Link either `gtest` or `gtest_main` depending on whether you are providing your own `main()` function.

- In CMake, link via:

```cmake
target_link_libraries(your_test_target gtest gtest_main pthread)  # pthread link needed on POSIX
```

- If using another build system, add the compiled GoogleTest libraries to your linker inputs.

<Tip>
If you use `gtest_main`, it provides a default `main()`; otherwise, you'll need to write your own main function that initializes GoogleTest.
</Tip>

---

## 2. Arrange Your Test Code

Organizing your test code properly is key to maintainability and scalability.

### Step 2.1: Choose a Structure for Your Tests

You can either add tests to an existing project directory or create a new dedicated test directory:

- **New Project:** Create a `tests/` folder with subfolders to mirror your source directory structure.

- **Existing Project:** Place test files alongside the code they test or in a dedicated folder like `src/tests/`.

### Step 2.2: Use Test Fixtures for Shared Setup

Reusable data setups across tests improve clarity and reduce duplication.

- Define fixture classes inheriting from `testing::Test`.

- Use `TEST_F()` macros to define individual tests that use the fixture.

For example:

```cpp
class FooTest : public testing::Test {
 protected:
  void SetUp() override {
    // Initialize shared objects here
  }

  void TearDown() override {
    // Clean up
  }

  Foo foo_;
};

TEST_F(FooTest, DoesSomething) {
  EXPECT_TRUE(foo_.IsReady());
}
```

### Step 2.3: Organize Your Test Sources

- Name test files consistently (e.g., `foo_test.cc`, `bar_test.cc`).

- Avoid underscores in test suite and test names to comply with GoogleTest naming rules.

- Group related tests logically under test suites matching namespaces or modules.

<Note>
Test suite and test names must be valid C++ identifiers and avoid underscores (`_`) to prevent naming conflicts and linkage errors.
</Note>

---

## 3. Setup Your Test Binary

Now that your test files exist and GoogleTest is linked, configure the test executable.

### Step 3.1: Creating Your `main()` (If Not Using `gtest_main`)

If not linking with `gtest_main`, provide a minimal main function:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- This initializes GoogleTest with command-line flags
- Runs all registered tests
- Returns `0` on success, `1` on failure

### Step 3.2: Build Your Test Binary

- Compile all test sources along with your test main.

- Link against GoogleTest libraries and any dependencies.

- For example, a CMake build target:

```cmake
add_executable(my_tests foo_test.cc main.cc)
target_link_libraries(my_tests gtest gtest_main pthread)
```

---

## 4. Validate Your Setup by Running a Basic Test

To confirm the integration, create a minimal test:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}
```

Build and run your test binary:

```bash
./my_tests
```

Expected output snippet:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions
[----------] 1 test from SampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

<Check>
If your test completes and shows all tests passed, you've successfully configured GoogleTest.
</Check>

---

## 5. Best Practices and Common Pitfalls

### Best Practices

- Always use `TEST_F` with fixtures to promote test reuse.
- Avoid including test code in production builds.
- Keep individual test functions focused and small.
- Utilize `SetUpTestSuite()` and `TearDownTestSuite()` for costly global setup/teardown.

### Common Pitfalls

- **Missing default constructors**: Fixture classes must have default constructors for GoogleTest to instantiate them.
- **Mixing `TEST` and `TEST_F` with the same test suite name**: Leads to runtime errors.
- **Incorrect test suite/test name formatting**: Avoid underscores `_` in names.

<Tip>
Read our [FAQ on test naming and fixtures](docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore) to steer clear of naming mistakes.
</Tip>

---

## 6. Troubleshooting

### GoogleTest Headers Not Found

- Verify include paths in your build configuration.
- Confirm the presence of `gtest/gtest.h` in the specified directories.

### Linker Errors

- Confirm GoogleTest libraries are built and linked.
- For POSIX systems, ensure linking with `pthread`.

### Tests Not Discovered or Run

- Verify test suite and test names are valid.
- Avoid underscores in test suite and test names.

- Confirm registration of tests via `TEST` or `TEST_F` macros.

---

## 7. Next Steps

- Proceed to write more comprehensive tests using the GoogleTest [primer](docs/primer.md).
- Explore [Parameterized and Typed Tests](docs/advanced.md#value-parameterized-tests) to extend your test coverage.
- Check out integration guides if you plan to embed GoogleTest in larger projects.

---

## Additional Resources

- [GoogleTest Primer](docs/primer.md) — Learn to write your first tests.
- [Testing Reference](docs/reference/testing.md) — Detailed API and macro descriptions.
- [Advanced Topics](docs/advanced.md) — For mastering test fixtures and complex assertions.
- [FAQ](docs/faq.md) — Common questions and solutions.

---