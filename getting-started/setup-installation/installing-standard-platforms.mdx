---
title: "Installation on Standard Platforms"
description: "Covers installing GoogleTest and GoogleMock using major build systems (CMake, Bazel) and from source, with platform-specific steps for Windows, Linux, and macOS. Includes instructions for integrating with existing projects."
---

# Installation on Standard Platforms

This guide provides clear, step-by-step instructions to install GoogleTest and GoogleMock on major platforms including Windows, Linux, and macOS. It covers installation using major build systems like **CMake** and **Bazel**, as well as building from source. You'll also learn how to integrate GoogleTest/GoogleMock with your existing projects using these tools.

---

## 1. Prerequisites & Requirements

Before proceeding, ensure your environment meets the following requirements:

- **Supported Platforms:** Windows (Desktop, MinGW), Linux, macOS.
- **C++ Standard:** C++17 or later support by your compiler.
- **Compiler:** Minimum compiler versions supporting C++17.
- **Build tools:** Install CMake (3.14+ recommended) or Bazel.
- **Permissions:** Administrator or sudo rights for system-wide install.

For complete prerequisites, see [Prerequisites & Requirements](/getting-started/setup-installation/prerequisites-requirements).

---

## 2. Installing GoogleTest & GoogleMock Using CMake

CMake is the most versatile and widely used build tool for GoogleTest. Follow these instructions for standalone or integrated builds.

### 2.1 Building Standalone GoogleTest (+ GoogleMock)

1. Clone the official repository:

   ```bash
   git clone https://github.com/google/googletest.git -b v1.17.0
   cd googletest
   ```

2. Create a build directory and navigate to it:

   ```bash
   mkdir build && cd build
   ```

3. Generate build files with CMake (includes GoogleMock by default):

   ```bash
   cmake ..
   ```

   > To build only GoogleTest without GoogleMock, run:
   >
   > ```bash
   > cmake .. -DBUILD_GMOCK=OFF
   > ```

4. Build the libraries:

   On Linux/macOS:
   ```bash
   make
   ```

   On Windows (with Visual Studio):

   - Open `gtest.sln` in Visual Studio generated in the build directory.
   - Build the solution.

5. (Optional) Install libraries system-wide (requires admin rights):

   ```bash
   sudo make install
   ```

### 2.2 Incorporate GoogleTest in Your Existing CMake Project

You have two main integration options:

**Option A: Use Installed GoogleTest**

- After installing GoogleTest, in your CMakeLists.txt, find the package:

  ```cmake
  find_package(GTest REQUIRED)
  target_link_libraries(your_test_target PRIVATE GTest::gtest GTest::gmock)
  ```

- Use `GTest::gtest_main` if you prefer linking with the main() provided.

**Option B: Add GoogleTest as a Subdirectory**

- Embed the GoogleTest source in your project (e.g., via git submodule), then add:

  ```cmake
  add_subdirectory(path/to/googletest)
  target_link_libraries(your_test_target PRIVATE gtest gmock)
  ```

- This ensures consistent compiler and linker flags.

### 2.3 Important Notes

- GoogleTest links statically by default. Use the [CMake variable `gtest_force_shared_crt`](https://github.com/google/googletest/blob/main/googletest/README.md#visual-studio-dynamic-vs-static-runtimes) to opt in for dynamic CRT linkage on Windows.
- Ensure your project is set to use C++17 or later:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- If you wish to link dynamically/shared library versions of GoogleTest, define `-DGTEST_CREATE_SHARED_LIBRARY=1` when configuring.

---

## 3. Installing GoogleTest & GoogleMock Using Bazel

GoogleTest and GoogleMock can be integrated seamlessly with Bazel builds.

### 3.1 Add Dependencies

Add the following to your WORKSPACE and BUILD files to include GoogleTest:

- In `WORKSPACE`:

  ```bazel
  git_repository(
      name = "com_google_googletest",
      remote = "https://github.com/google/googletest.git",
      commit = "v1.17.0",
  )
  ```

- In your BUILD files, add dependencies:

  ```bazel
  cc_test(
      name = "my_test",
      srcs = ["my_test.cc"],
      deps = ["@com_google_googletest//:gtest_main", "@com_google_googletest//:gmock_main"],
  )
  ```

Run your tests with:

```bash
bazel test //path/to:my_test
```

---

## 4. Building GoogleTest & GoogleMock From Source

If you prefer manual source build or need to customize, follow these instructions.

### 4.1 Clone Repository

```bash
git clone https://github.com/google/googletest.git
cd googletest
```

### 4.2 Build With CMake

Follow the standalone CMake instructions in section 2.

### 4.3 Build Without CMake

GoogleTest can also be built by adding sources to your project and compiling manually, but this requires adding appropriate compiler flags and source files, which is error-prone. We strongly recommend using CMake or Bazel.

---

## 5. Integration with Existing Projects

### 5.1 Using Installed GoogleTest Libraries

- After installation, your build system should refer to includes (e.g. `/usr/local/include`) and libraries (e.g. `/usr/local/lib`).
- Use `pkg-config` if available, which GoogleTest provides:

```bash
pkg-config --cflags gtest
pkg-config --libs gtest
```

- In CMake, example:

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp test.cpp)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})

enable_testing()
add_test(NAME testapp_test COMMAND testapp)
```

### 5.2 Best Practices

- Prefer linking with `gtest_main` or `gmock_main` if you want the main() provided by GoogleTest/GoogleMock.
- Keep GoogleTest version consistent with your other dependencies.
- For shared libraries, add necessary compile definitions (`DGTEST_LINKED_AS_SHARED_LIBRARY=1`).

---

## 6. Platform Specific Considerations

### 6.1 Windows

- Use Visual Studio to open the generated solution or build via CMake.
- Address runtime library mismatches by setting `gtest_force_shared_crt` CMake option if needed.

### 6.2 Linux / macOS

- Usually straightforward with `make` after CMake generate.
- Use `sudo make install` for system-wide install or adjust prefix for custom installs.

---

## 7. Verification

After installation, verify GoogleTest is available:

1. Create a simple test file `sample_test.cpp`:

   ```cpp
   #include <gtest/gtest.h>

   TEST(SampleTest, BasicAssertions) {
     EXPECT_EQ(1, 1);
   }
   ```

2. Compile it (example with pkg-config):

   ```bash
   g++ sample_test.cpp $(pkg-config --cflags --libs gtest_main) -pthread -o sample_test
   ```

3. Run the test:

   ```bash
   ./sample_test
   ```

You should see output indicating tests ran and passed.

---

## 8. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake can't find GoogleTest">
Make sure you've installed GoogleTest with `sudo make install` or specify the path explicitly to `-DCMAKE_PREFIX_PATH`.

</Accordion>
<Accordion title="Linker errors related to pthread">
GoogleTest requires pthreads on Unix. Confirm you link with `-pthread` or that your build system links pthreads as required.

</Accordion>
<Accordion title="Runtime Library Mismatches on Windows">
Use the CMake option `-Dgtest_force_shared_crt=ON` to align runtime library usage with your project.

</Accordion>
<Accordion title="Tests not running or discovered">
Check that you link with `gtest_main` or provide your own `main()` that calls `testing::InitGoogleTest()` and `RUN_ALL_TESTS()`.

</Accordion>
</AccordionGroup>

---

## 9. Next Steps

- Write and run your [first GoogleTest](https://github.com/google/googletest/blob/main/README.md) test.
- Explore configuration options on the [Configuration Basics](/getting-started/setup-installation/configuration-basics) page.
- Learn detailed usage patterns in [Writing and Running Your First Test](/getting-started/first-test-experience/writing-first-test).

---

## Table of Contents

---

**Happy Testing!**

---