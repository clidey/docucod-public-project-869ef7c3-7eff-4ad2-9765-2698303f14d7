---
title: "Configuration Basics"
description: "Explains essential configuration steps after installation, such as linking libraries, adjusting include paths, and setting build flags. Equips users to smoothly compile and use the framework in their own C++ applications."
---

# Configuration Basics

After successfully installing GoogleTest, this guide walks you through essential configuration steps to integrate the framework seamlessly into your C++ projects. You'll learn how to adjust include paths, link required libraries, and set appropriate build flags — crucial steps to smoothly compile and run your tests.

---

## 1. Linking GoogleTest Libraries

To use GoogleTest in your C++ applications, you need to link your test binaries with the appropriate GoogleTest libraries. Depending on your build setup, you may link against:

- `gtest` — the core GoogleTest library
- `gtest_main` — the library that provides a pre-written `main()` function for test programs

### Linking Approaches

- **If you want a custom `main()` function** in your tests, link only with `gtest`.
- **For quick startup and no custom `main()`**, link with `gtest_main`. It defines a main function that runs all tests defined via GoogleTest macros.

### Example Linker Command
```sh
g++ your_test.cc -lgtest -lpthread -o your_test
# or with gtest_main if you don't write main()
g++ your_test.cc -lgtest_main -lgtest -lpthread -o your_test
```

> Ensure you link the pthread library (`-lpthread`) on POSIX platforms, as GoogleTest relies on threading support.

## 2. Setting Include Paths

To let your compiler locate GoogleTest's headers, add the include path to your compiler's search directories.

- If installed system-wide, include path is generally `/usr/local/include` or `/usr/include`.
- If using the source tree or embedding GoogleTest as a submodule, point to the `googletest/include` directory.

### Example Compilation Command
```sh
g++ -I/path/to/googletest/include your_test.cc -lgtest -lpthread -o your_test
```

### Common Pitfall

> Forgetting to add the correct include path results in compiler errors such as `fatal error: gtest/gtest.h: No such file or directory`.

## 3. Configuring Build Flags

GoogleTest requires a C++17-capable compiler. The following compiler flags ensure compatibility and optimal builds:

- **C++ Standard**: Set C++17 standard explicitly.
- **Thread Support**: Enable pthreads where applicable.
- **Macro Definitions**: Set macros for shared/static linking or platform-specific tweaks.

### Typical Flags for Linux/macOS
```sh
-std=c++17 -pthread
```

### Typical Flags for Windows (MSVC)
- Use `/std:c++17` or the latest supported flag for your Visual Studio version.
- See GoogleTest's `gtest_force_shared_crt` option if needing to switch between dynamic/static CRT linkage.

### Defining Control Macros

GoogleTest allows internal configuration via macros defined on the compiler command line. Common macros include:

- `-DGTEST_HAS_PTHREAD=1` to force pthread support if not auto-detected.
- `-DGTEST_CREATE_SHARED_LIBRARY=1` and `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` for shared library use.
- `-DGTEST_DONT_DEFINE_TEST=1` to rename macros to avoid clashes.

Add these definitions per your project requirements.

## 4. Customizing Include Paths and Build Flags in CMake

If using CMake, GoogleTest’s CMake scripts handle most of these configurations automatically. Key points:

- Use `find_package(GTest REQUIRED)` to locate installed GoogleTest.
- Link your target using `target_link_libraries(your_target GTest::gtest)` or `GTest::gtest_main`.
- GoogleTest requires C++17; ensure your project’s CMake config sets `CMAKE_CXX_STANDARD 17`.

Example:
```cmake
find_package(GTest REQUIRED)
add_executable(your_test your_test.cc)
target_link_libraries(your_test GTest::gtest_main pthread)
set_target_properties(your_test PROPERTIES CXX_STANDARD 17 CXX_STANDARD_REQUIRED YES)
```

## 5. Verifying Your Configuration

### Step-by-step verification:

1. Compile a basic test program that includes `<gtest/gtest.h>` and calls `RUN_ALL_TESTS()`.
2. Ensure the compiler finds GoogleTest headers without errors.
3. Link the program with the GoogleTest libraries and pthread.
4. Run the test and observe output confirming successful test discovery and execution.

### Sample Minimal Test
```cpp
#include <gtest/gtest.h>

TEST(SampleTest, Success) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this test to confirm your setup.

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Configuration Issues and How to Fix Them">
<Accordion title="Compiler Cannot Find gtest/gtest.h">
Ensure the compiler include path points to GoogleTest's include directory. Use `-I/path/to/googletest/include` or CMake's `target_include_directories`.
</Accordion>
<Accordion title="Linker Errors about Undefined References">
Verify you linked against both `gtest` (or `gtest_main`) and `pthread` on POSIX, or the respective threading library on Windows.
</Accordion>
<Accordion title="Runtime Errors or Tests Not Executing">
Make sure you call `testing::InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`. Also check that test names and suites conform to naming rules.
</Accordion>
<Accordion title="Mismatch of Runtime Libraries (MSVC)">
Use `gtest_force_shared_crt` option when building GoogleTest in CMake if your project links dynamically to the CRT.
</Accordion>
</AccordionGroup>

## 7. Customization Points

GoogleTest supports customization via macros predefined at compile time, which allow you to tailor logging, threading primitives, stack trace handling, and more. See the `include/gtest/internal/custom/README.md` file for details on the available macros like:

- `GTEST_OS_STACK_TRACE_GETTER_` (custom stack trace getter)
- `GTEST_CUSTOM_TEMPDIR_FUNCTION_` (custom temp directory function)
- `GTEST_LOG_` and `GTEST_CHECK_` (logging macros)
- Threading-related macros such as `GTEST_HAS_MUTEX_AND_THREAD_LOCAL_`

These macros are advanced uses but critical if building GoogleTest in a non-standard environment.

---

## Additional Resources

- [Installation on Standard Platforms](https://github.com/google/googletest/blob/main/docs/getting-started/setup-installation/installing-standard-platforms.mdx) for platform-specific setup
- [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/docs/getting-started/first-test-experience/writing-first-test.mdx) to verify the end-to-end flow
- [CMake Build Integration](https://github.com/google/googletest/blob/main/docs/overview/system-architecture/integration-overview.mdx#build-integration) for integration tips

For in-depth API use after configuration, see the [Testing Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md).

---

With these configuration basics, you’ll be equipped to build, link, and run GoogleTest-powered tests smoothly in your C++ environment. Your next step is writing your first test! Don't forget to verify your setup by compiling and running a simple test program as shown.
