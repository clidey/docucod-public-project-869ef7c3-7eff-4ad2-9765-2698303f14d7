---
title: "Installing GoogleTest & GoogleMock"
description: "Step-by-step installation instructions for Linux, macOS, and Windows. Covers common build systems: CMake, Bazel, and manual builds. Guides users through cloning the repository, running platform-specific setup scripts or commands, and verifying installation success."
---

# Installing GoogleTest & GoogleMock

This guide walks you through installing GoogleTest and GoogleMock on Linux, macOS, and Windows platforms. Whether you prefer CMake, Bazel, or a manual build process, these instructions will guide you through cloning the repository, building the libraries, and verifying a successful installation.

---

## 1. Prerequisites & System Preparation

Before installing GoogleTest and GoogleMock, ensure your system meets the following:

- **Supported Platforms**: Linux, macOS, Windows (desktop). Refer to the [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) for current compiler and OS compatibility.
- **C++17 Compiler**: A compiler supporting at least the C++17 standard (e.g., GCC 7+, Clang 5+, MSVC 2017+).
- **Tools and Dependencies**:
  - **Git** for cloning the source repository.
  - **CMake (â‰¥ 3.14)** for generating build files.
  - **Build tools**:
    - `make` or equivalent on Linux/macOS.
    - Visual Studio for Windows builds.
  - For threading support, `pthreads` on Unix-like platforms.

<Tip>
Verify your compiler supports C++17 by running `g++ --version`, `clang++ --version`, or checking Visual Studio version.
</Tip>

## 2. Cloning the Repository

Start by cloning the official GoogleTest repository, which includes GoogleMock.

```bash
# Clone the latest stable branch (main)
git clone https://github.com/google/googletest.git
cd googletest
```

You now have the full source including all needed headers and build scripts.

## 3. Build Methods

### 3.1 Build with CMake (Recommended)

GoogleTest provides a comprehensive CMake build setup that supports multiple platforms.

<Steps>
<Step title="Create a build directory">
Organize build files into a separate directory.
```bash
mkdir build
cd build
```
</Step>
<Step title="Generate build files with CMake">
Run CMake from the build directory to configure your build.
```bash
cmake ..
```
- If you want to build only GoogleTest without GoogleMock, run:
  ```bash
  cmake .. -DBUILD_GMOCK=OFF
  ```
- On Windows with Visual Studio, this creates a `gtest.sln` solution.
</Step>
<Step title="Build the libraries">
- On Linux/macOS:
  ```bash
  make
  ```
- On Windows:
  Open the Visual Studio solution (`gtest.sln`) and build in your preferred configuration.
</Step>
<Step title="(Optional) Install the libraries">
- Installation typically requires administrator privileges.
```bash
sudo make install
```
- By default, libraries and headers are installed under `/usr/local/`.
</Step>
</Steps>

<Note>
Use the CMake option `-DBUILD_SHARED_LIBS=ON` to build shared libraries (DLLs on Windows). Remember to add `-DGTEST_CREATE_SHARED_LIBRARY=1` to your compile flags if building shared.
</Note>

### 3.2 Build with Bazel

If you use Bazel as your build system, GoogleTest is supported and can be built using Bazel rules. Refer to Bazel-specific documentation for integration.

### 3.3 Manual Build

You can manually compile GoogleTest and GoogleMock by compiling source files located in the `googletest/src` and `googlemock/src` directories along with including `googletest/include` and `googlemock/include` as header paths.

```bash
# Example manual compilation using g++
# Compile sources
g++ -std=c++17 -isystem googletest/include -isystem googlemock/include \
    -pthread -c googletest/src/gtest-all.cc
g++ -std=c++17 -isystem googletest/include -isystem googlemock/include \
    -pthread -c googlemock/src/gmock-all.cc

# Create static libraries
ar -rv libgtest.a gtest-all.o
ar -rv libgmock.a gmock-all.o

# Link your test executable with these static libs
```

<Warning>
Manual builds require careful management of dependencies and compiler flags, especially threading support (`-pthread` on Linux/macOS).
</Warning>

## 4. Verifying Installation

Once built, verify the libraries by running the built-in tests or by compiling and running a sample test program.

### 4.1 Run GoogleMock Main Test (CMake build)

From the build directory, run:
```bash
ctest --output-on-failure
```
This will execute all bundled tests and confirm build integrity.

### 4.2 Compile and run a simple test

Create a file `sample_test.cpp`:

```cpp
#include "gtest/gtest.h"

TEST(SampleTest, AssertionTrue) {
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and link against GoogleTest and pthread (on *nix):

```bash
g++ -std=c++17 sample_test.cpp -lgtest -lpthread -o sample_test
./sample_test
```

The output should indicate that the test passes.

## 5. Platform-Specific Notes

### Linux/macOS

- Ensure `cmake`, `make`, and a modern compiler are installed.
- Use `-pthread` to enable threading.

### Windows

- Visual Studio (2017 or newer) is recommended.
- CMake generates Visual Studio projects.
- You can choose static or dynamic runtime linkage via the `gtest_force_shared_crt` option.

<Tip>
The `gtest_force_shared_crt` CMake option controls whether the C runtime is linked statically or dynamically, important for resolving linker conflicts in Visual Studio.
</Tip>

## 6. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Installation & Build">
<Accordion title="Build Fails with Missing pthread Symbols on Linux/macOS">
Verify you have added `-pthread` to both compiler and linker flags. Without this, threading symbols will be unresolved.
</Accordion>
<Accordion title="CMake Cannot Find C++17 Compiler">
Ensure your compiler supports C++17 and CMake version is at least 3.14. Check compiler version and update your environment if needed.
</Accordion>
<Accordion title="Linker Errors on Windows Related to Runtime Library">
Set `gtest_force_shared_crt` to `ON` when running CMake to match the runtime library setting of your project:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```
</Accordion>
<Accordion title="GoogleMock Flags Not Recognized During Run">
GoogleMock initializes GoogleTest internally. You must call `testing::InitGoogleMock(&argc, argv);` from your `main()`.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Proceed to the [Initial Configuration](https://docs.example.com/getting-started/setup-installation/configuration-setup) to learn how to configure flags and environment variables.
- Write and run your first unit test via [Writing and Running Your First Test](https://docs.example.com/getting-started/first-steps-validation/create-first-test).
- Explore integrating GoogleTest with your build system and CI pipelines in the [Integration & Platform Support](https://docs.example.com/overview/system-architecture-and-integration/integration-and-dependencies).

---

## References

- Official GitHub repo: [https://github.com/google/googletest](https://github.com/google/googletest)
- Platform support: [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md)
- CMakeLists.txt script: `googletest/CMakeLists.txt` in the source repo
- Main GoogleMock entry point: `googlemock/src/gmock_main.cc`


---

This completes your installation setup for GoogleTest and GoogleMock across platforms with multiple build options. Follow through with configuration and usage guides for a complete testing workflow.
