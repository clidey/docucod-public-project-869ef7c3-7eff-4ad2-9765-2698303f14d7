---
title: "Installation: CMake, Bazel, and Manual Integration"
description: "Describes the installation process on major platforms using CMake, Bazel, or manual source integration. Offers concise, copy-paste-ready instructions, pointing to quickstart pages for deeper dives, and highlights the primary differences between GoogleTest and GoogleMock integration workflows."
---

# Installation: CMake, Bazel, and Manual Integration

This guide helps you install GoogleTest and GoogleMock on your development environment. It offers clear, copy-paste-ready instructions for the most common methods: CMake, Bazel, and manual source integration. Whether you are starting fresh or integrating into an existing project, follow these practical steps to get GoogleTest and GoogleMock up and running.

---

## 1. Prerequisites Overview

Before installation, ensure you have the following:

- A C++17 compatible compiler (e.g., GCC 7+, Clang 5+, MSVC 2015+).
- Build tools appropriate to your platform (CMake, Bazel, or manual build system).
- Network access to fetch source code repositories or archives.

For detailed requirements, see [Prerequisites & System Requirements](/getting-started/setup-installation/prerequisites-requirements).

---

## 2. Installation Using CMake

GoogleTest and GoogleMock are shipped together and can be built with CMake easily.

### 2.1 Standalone GoogleTest/GoogleMock Build

If you want to build GoogleTest with GoogleMock support standalone:

1. Clone the repository:

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

2. Create and move into a build directory:

```bash
mkdir build
cd build
```

3. Run CMake to generate build files (GoogleMock enabled by default):

```bash
cmake ..
```

4. Build the libraries and tests:

```bash
make
```

5. Optionally, install system-wide (requires admin rights):

```bash
sudo make install
```

> This installs headers and libraries under default system paths such as `/usr/local/`.

### 2.2 Build GoogleTest Without GoogleMock

To build only GoogleTest:

```bash
cmake .. -DBUILD_GMOCK=OFF
make
```

### 2.3 Using GoogleTest and GoogleMock in Your Project

Integrate GoogleTest and GoogleMock as dependencies using CMake's `add_subdirectory()` or install system-wide and reference the installed libraries.

For example, linking your test executable with GoogleMock and its main:

```cmake
find_package(GTest REQUIRED) # or manually include googletest source
add_executable(my_tests my_tests.cpp)
target_link_libraries(my_tests gmock_main)
```

Refer to [Basic Configuration & Project Setup](/getting-started/setup-installation/configuration-basics) for project setup details.

**Tip:** GoogleMock needs GoogleTest, so linking with `gmock_main` will also bring in GoogleTest.

---

## 3. Installation Using Bazel

If your project uses Bazel as a build system, GoogleTest and GoogleMock can be included easily.

### 3.1 Adding GoogleTest to Your `WORKSPACE`

Add googletest as a dependency:

```python
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/main.zip"],
    strip_prefix = "googletest-main",
)
```

### 3.2 Referencing GoogleMock in `BUILD` Files

In your test targets, depend on `@com_google_googletest//:gmock_main` or `@com_google_googletest//:gmock`:

```python
cc_test(
    name = "my_mock_test",
    srcs = ["my_mock_test.cc"],
    deps = ["@com_google_googletest//:gmock_main"],
)
```

This will build and link GoogleMock and GoogleTest automatically.

> For detailed Bazel usage, see the [Integration & Extensibility Overview](/overview/core-concepts-and-architecture/integration-and-dependencies).

---

## 4. Manual Source Integration

If you prefer not to use CMake or Bazel, you can manually integrate GoogleTest and GoogleMock source code into your project.

### 4.1 Download Source

Clone or download the source code from GitHub:

```bash
git clone https://github.com/google/googletest.git -b main
```

### 4.2 Add Source Files

Include files under `googletest/include` and `googlemock/include`, along with the corresponding `.cc` files under `googletest/src` and `googlemock/src`, into your build.

Typical files to include:

- Headers:
  - `googletest/include/gtest/gtest.h`
  - `googlemock/include/gmock/gmock.h`

- Sources:
  - `googletest/src/gtest-all.cc`
  - `googlemock/src/gmock-all.cc`

### 4.3 Compile and Link

Compile the above source files alongside your tests and link them together.

Depending on your build system, adjust compile flags to enable C++17.

---

## 5. Verification and Next Steps

After installation:

- Verify the libraries are built:

  ```bash
  ls build/lib/libgmock_main.a # or .so/.dll depending on platform
  ```

- Build and run the sample tests or your own tests:

  ```bash
  ./my_test_executable
  ```

- Successful run will show GoogleTest output with test results.

For detailed tutorials on writing and running your first test, see:

- [Writing and Running Your First Test](/getting-started/first-steps-usage/create-run-test)
- [Introducing GoogleMock: Your First Mocked Test](/getting-started/first-steps-usage/add-mock-test)

For troubleshooting installation issues, see [Troubleshooting & Common Setup Issues](/getting-started/first-steps-usage/troubleshooting-setup).

---

## 6. Key Differences Between GoogleTest and GoogleMock Setup

- **GoogleTest** focuses on writing tests with assertions.
- **GoogleMock** adds mocking capabilities and depends on GoogleTest.
- When building with CMake, `gtest` and `gmock` are separate, but GoogleMock includes GoogleTest internally.
- Use `gmock_main` to get a ready-made `main()` function for tests that include mocks.

If you only need testing without mocking, you can disable building GoogleMock using the `-DBUILD_GMOCK=OFF` flag.

---

## 7. Additional Resources

- GoogleTest and GoogleMock cheat sheets and tutorials:
  - [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
  - [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- Official repository and issue tracking: https://github.com/google/googletest

---

This completes your installation guide to get started with GoogleTest and GoogleMock using CMake, Bazel, or manual integration.


---

<Check>
Make sure to meet all prerequisites before installing.
</Check>

<Note>
Use consistent compiler flags to enable C++17 compatibility across your project.
</Note>

<Tip>
For most users, linking with `gmock_main` provides a ready-to-go test driver.
</Tip>

<Warning>
Do not mix compiler runtimes when linking GoogleTest or GoogleMock to avoid linker errors.
</Warning>