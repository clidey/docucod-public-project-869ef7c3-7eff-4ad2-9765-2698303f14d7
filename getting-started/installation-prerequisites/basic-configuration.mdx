---
title: "Basic Configuration"
description: "Learn the essential steps to configure your project to use GoogleTest. Covers including headers, linking libraries, and initial test setup—enabling rapid adoption regardless of project layout."
---

# Basic Configuration

Configure your project for GoogleTest and GoogleMock by correctly including headers, linking the required libraries, and setting up your build system. This guide walks you through the essential steps to enable GoogleTest in your project, allowing you to write and run your first tests confidently.

---

## 1. Prerequisites

- **Compiler Support:** Ensure your compiler supports C++17 or later.
- **Build System:** You need a build tool such as CMake or Bazel.
- **Source Availability:** Have GoogleTest and GoogleMock sources downloaded or referenced.
- **Linking:** Decide between static or dynamic linking for the libraries.

<Check>
Make sure all test code that uses GoogleTest includes the `<gtest/gtest.h>` header.
For mock support, include `<gmock/gmock.h>`, which brings in both GoogleMock and GoogleTest APIs.
</Check>

---

## 2. Including GoogleTest and GoogleMock Headers

1. Add the following includes at the top of your test source files:

```cpp
#include <gtest/gtest.h>    // Core GoogleTest functionality
#include <gmock/gmock.h>    // GoogleMock, includes gtest.h internally
```

2. Use `testing` namespace appropriately, e.g.: 

```cpp
using ::testing::Test;
using ::testing::StrictMock;
using ::testing::_;
```

<Note>
Including `<gmock/gmock.h>` automatically includes necessary GoogleTest headers.
If your tests only require GoogleTest (no mocks), `<gtest/gtest.h>` suffices.
</Note>

---

## 3. Linking Libraries

GoogleTest and GoogleMock come bundled together, so link both during the build.

### Using CMake

1. Add GoogleTest/GoogleMock as a subdirectory or find installed packages.
2. Link your test executable target with `gtest` and `gmock` libraries.

Example CMake snippet:

```cmake
find_package(GTest REQUIRED)

add_executable(my_test test_main.cc other_tests.cc)
target_link_libraries(my_test PRIVATE GTest::gtest GTest::gmock GTest::gtest_main)
```

### Using Bazel

Import the GoogleTest and GoogleMock dependencies in your `BUILD` file and declare your test with appropriate deps on `@com_google_googletest`.

<Info>
Advice on depending on the monolithic `gtest_main` library simplifies the entry point setup.
</Info>

---

## 4. Setting Up Your First Test

1. Define a simple test using the `TEST` macro:

```cpp
TEST(ExampleTestSuite, SimpleTest) {
  EXPECT_EQ(1, 1);
}
```

2. Build your test binary.
3. Run the tests and observe results.

---

## 5. Adding Mock Support

To introduce mocking:

1. Define interfaces with virtual methods to be mocked.
2. Create a mock class inheriting from the interface.
3. Use the `MOCK_METHOD` macro in `public:` to mock virtual functions:

```cpp
#include <gmock/gmock.h>

class MyInterface {
 public:
  virtual ~MyInterface() = default;
  virtual int Compute(int x) = 0;
};

class MockMyInterface : public MyInterface {
 public:
  MOCK_METHOD(int, Compute, (int x), (override));
};
```

4. Use `EXPECT_CALL` to set expectations on your mock methods before exercising test code.

Example:

```cpp
TEST(UsingMockTest, ComputeReturnsExpectedValue) {
  MockMyInterface mock;

  EXPECT_CALL(mock, Compute(5))
      .Times(1)
      .WillOnce(::testing::Return(10));

  int result = mock.Compute(5);
  EXPECT_EQ(result, 10);
}
```

<Tip>
Remember to set expectations before exercising the code that uses the mock object.
</Tip>

---

## 6. Best Practices

- Put all `MOCK_METHOD` declarations in the `public:` section of your mock class, regardless of the original visibility.
- Use `NiceMock` or `StrictMock` wrappers to control how uninteresting calls are treated:
  - `NiceMock`: suppresses warnings on calls without expectations.
  - `StrictMock`: treats unexpected calls as failures.
- Use `ON_CALL` to specify default actions without setting strict expectations.
- Prefer setting minimal necessary expectations using matchers and cardinalities to avoid brittle tests.

---

## 7. Troubleshooting Common Link and Setup Issues

- Make sure the GoogleTest/GoogleMock libraries are correctly built and linked.
- Check that include paths correctly reference GoogleTest sources.
- On Windows, if you have DLL linking issues, verify runtime linkage (static vs shared).
- Ensure C++17 standard is enabled in compiler flags.

---

## Additional Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — a beginner-friendly guide to using mocks.
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) — quick syntax reference.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.md) — complete syntax and API.
- [System Requirements](/getting-started/installation-prerequisites/system-requirements) — platform and compiler prerequisites.
- [Installation Methods](/getting-started/installation-prerequisites/installation-methods) — details on setting up GoogleTest builds.

---

## Summary

This page provides a step-by-step guide to configure your project with GoogleTest and GoogleMock. It covers header inclusion, linking libraries via CMake or Bazel, setting up your first basic and mock-based tests, and shares essential best practices and troubleshooting tips.

---

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/gmock_for_dummies.md", "range": "1-280"},{"path": "docs/gmock_cheat_sheet.md", "range": "1-140"},{"path": "docs/reference/mocking.md", "range": "1-220"},{"path": "getting-started/installation-prerequisites/basic-configuration.md", "range": "1-40"}]}/>