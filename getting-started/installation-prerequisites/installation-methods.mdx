---
title: "Installation"
description: "Step-by-step installation instructions for all major platforms and build systems. Covers integrating GoogleTest via CMake, Bazel, or as source, with pointers for adding to existing C++ projects."
---

# Installation

Step-by-step installation instructions for all major platforms and build systems. Covers integrating GoogleTest via CMake, Bazel, or as source, with pointers for adding to existing C++ projects.

---

## 1. Prerequisites & System Requirements

Before installing GoogleTest, verify your environment meets the following requirements:

- **Supported Platforms and Compilers:** Linux, Windows, macOS with widely used compilers such as GCC, Clang, MSVC.
- **C++ Standard:** Your build environment must support C++17 or later.
- **Threading Support:** pthread library availability affects thread safety.
- **Development Tools:** Ensure you have either CMake, Bazel, or other supported build systems installed based on your chosen installation method.

For detailed platform and compiler compatibility, consult the [Supported Platforms & Integrations](../overview/architecture-features-integration/supported-platforms-integration.md).

<Tip>
For best results, ensure your C++ compiler supports C++17 fully. This is vital for smooth building and operation.
</Tip>

## 2. Installation Methods

GoogleTest can be installed and integrated using several approaches. Choose the one that best fits your development environment.

### 2.1 Standalone Build Using CMake

Ideal if you want to build and install GoogleTest independently from your projects.

<Steps>
<Step title="Clone the Repository">
Open a terminal and clone the googletest repository with the desired release tag or branch.

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

This fetches the latest main branch source code.
</Step>
<Step title="Create a Build Directory">
In the cloned directory:

```bash
mkdir build
cd build
```
This keeps build artifacts isolated.
</Step>
<Step title="Configure the Build">
To include GoogleMock (recommended), run:

```bash
cmake ..
```

To build GoogleTest without GoogleMock, specify:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

This generates native build files for your platform.
</Step>
<Step title="Build the Libraries">
For Unix-like systems:

```bash
make
```

On Windows, open the generated Visual Studio solution file (`.sln`) in your build directory and build using Visual Studio.
</Step>
<Step title="Install (Optional)">
If you want to install headers and libraries system-wide, execute:

```bash
sudo make install
```

The default path is `/usr/local/` but can be customized during CMake configuration.
</Step>
</Steps>

<Warning>
If you encounter runtime linkage or threading issues, verify your compiler flags and pthread support as described in the system requirements documentation.
</Warning>

### 2.2 Integrate GoogleTest into Your Existing CMake Project

This is the recommended approach when your project already uses CMake.

#### Option 1: Use Installed GoogleTest

If GoogleTest is installed on your system (via package manager or manual install), use:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(mytest test.cpp)
target_link_libraries(mytest PRIVATE GTest::gtest_main GTest::gmock_main)
add_test(NAME mytest COMMAND mytest)
```

#### Option 2: Download and Build GoogleTest During Configure Step

Add the following to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows builds
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(mytest test.cpp)
target_link_libraries(mytest PRIVATE gtest_main gmock_main)
add_test(NAME mytest COMMAND mytest)
```

Make sure you are using CMake 3.14 or later.

<Tip>
Embedding GoogleTest this way ensures consistent compiler and linker settings across your entire build.
</Tip>

### 2.3 Build with Bazel

GoogleTest supports Bazel, a fast build system developed by Google. You can add GoogleTest as a dependency in your Bazel workspace and use its Bazel targets to build and run tests. See the Bazel integration guide for more information.

### 2.4 Adding GoogleTest as Source in Your Project

You may copy the GoogleTest source files into your project or add them as a git submodule. Then, include them using `add_subdirectory()`. This ensures GoogleTest is compiled with your projectâ€™s compiler flags but requires you to maintain the source copy.

For example:

```cmake
add_subdirectory(path/to/googletest)
add_executable(mytest test.cpp)
target_link_libraries(mytest PRIVATE gtest_main gmock_main)
add_test(NAME mytest COMMAND mytest)
```

<Tip>
Use git submodules to keep the GoogleTest code synchronized and maintainable.
</Tip>

## 3. Verification of Installation

After building and linking GoogleTest into your project, you can verify the installation:

- Compile a simple test program using GoogleTest macros (e.g., `TEST()`, `EXPECT_EQ()`).
- Link against `gtest_main` or provide your own `main` that calls `RUN_ALL_TESTS()`.
- Run the test executable and check for successful test runs.

For example:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, SimpleAssertion) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build with:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include \
  test_sample.cpp -L/path/to/lib -lgtest_main -lgtest -pthread -o test_sample
```

Run with:

```bash
./test_sample
```

You should see output confirming the tests passed.

## 4. Common Pitfalls & Troubleshooting

<AccordionGroup title="Troubleshooting Installation Issues">
<Accordion title="Missing pthread Linker Errors">
If you see errors related to pthread symbols when linking or running tests, ensure your build includes pthread linking flags, e.g., `-pthread` for GCC/Clang.

For CMake, this is typically handled, but verify with:

```bash
cmake ..
make VERBOSE=1
```
check compiler/linker flags.
</Accordion>
<Accordion title="Runtime Library Mismatch on Windows with Visual Studio">
Visual Studio projects may complain about linking due to different runtime linkage types.

Use the CMake option `-Dgtest_force_shared_crt=ON` to force GoogleTest libraries to use dynamic runtime linking.

Example:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```
</Accordion>
<Accordion title="Test Executable Does Not Run or Fails to Start">
Verify you called `InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()` in your main function.

Missing this step can cause tests to fail silently.
</Accordion>
<Accordion title="Build Errors Due to Macros Collisions">
If GoogleTest macros clash with other libraries, disable macro definitions by defining compiler flags such as `-DGTEST_DONT_DEFINE_TEST=1`, then use fully qualified macro names (e.g., `GTEST_TEST`).
</Accordion>
</AccordionGroup>

## 5. Next Steps

- After installation, continue with writing your first tests in the [Writing Your First Test](../first-test-workflow/writing-your-first-test.md) guide.
- Learn how to run and validate tests effectively in the [Running and Validating Your Tests](../first-test-workflow/running-tests.md) page.
- Explore integrating GoogleMock for mocking capabilities.
- For continuous integration and automation, review the platform and build integration tips.

---

## References

- [System Requirements](./system-requirements.md)
- [Supported Platforms & Integrations](../overview/architecture-features-integration/supported-platforms-integration.md)
- [Writing Your First Test](../first-test-workflow/writing-your-first-test.md)
- GoogleTest GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)

---

Happy testing!