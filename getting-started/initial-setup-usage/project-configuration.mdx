---
title: "Configure Your Test Project"
description: "Guides users through initial project setup, including adding GoogleTest to an existing or new project, updating include paths, and linking dependencies. Covers common configuration pitfalls and how to verify a correct linkage."
---

# Configure Your Test Project

This guide walks you through configuring your C++ project to use GoogleTest effectively. You will learn how to add GoogleTest to your existing or new project, update include paths, link necessary libraries, and avoid common configuration pitfalls. Finally, you will verify that your setup is functioning correctly by building and running a simple test.

---

## 1. Add GoogleTest to Your Project

### Option A: Use Installed GoogleTest Package

If you have installed GoogleTest using package managers or system installation (e.g., `sudo make install`), you can link against the installed libraries directly.

1. Use CMake's `find_package` to locate GoogleTest:

```cmake
find_package(GTest REQUIRED)  # Requires GoogleTest to be installed
```

2. Link your test target with GoogleTest libraries:

```cmake
target_link_libraries(your_test_target GTest::gtest GTest::gtest_main)  
# or GTest::gmock if using mocks
```

3. Ensure the include directories are linked implicitly via the target `GTest::gtest`.


### Option B: Add GoogleTest as a Subdirectory

If you prefer to build GoogleTest from source along with your project (ensuring compatible compiler flags and settings), you can add it as a submodule or download the source manually.

1. Download or clone the GoogleTest repository inside your project directory.

2. Add the following to your root `CMakeLists.txt`:

```cmake
add_subdirectory(googletest)  # Or path to googletest source
```

3. Link your test executable as follows:

```cmake
target_link_libraries(your_test_target gtest gtest_main)  
# or gmock/main if using GoogleMock
```


## 2. Update Include Paths

When using CMake targets `GTest::gtest` or `gtest`, include paths are automatically managed. If your build system requires manual config:

- Add the include directory to your compiler flags. This is typically the `include` directory in the GoogleTest source or installation prefix.

### Manual include path example

```bash
-I/path/to/googletest/include
```

Be sure your compiler can find `gtest/gtest.h` and other headers.


## 3. Link Dependencies

Link against the GoogleTest library and its dependencies. This includes:

- The `gtest` or `gmock` static/shared libraries.
- Threading libraries such as `pthread` on POSIX systems.
- Appropriate platform-specific flags.

Using CMake targets handles this automatically. For manual linkers, link against:

```bash
-lgtest -lpthread
```

or if you are using GoogleMock:

```bash
-lgmock -lgtest -lpthread
```


## 4. Common Configuration Pitfalls

- **Mismatched Runtime Libraries on Windows:**
  Visual Studio projects often link against dynamic runtimes (`MD`), but GoogleTest defaults to static (`MT`). This mismatch causes linker errors like `LNK2038`.
  - **Solution:** Set `gtest_force_shared_crt` to ON if building with CMake or align runtimes manually.

- **C++ Standard Version:**
  GoogleTest requires C++17 or newer.
  - **Solution:** Ensure your project sets `-std=c++17` or equivalent.

- **Threading Support:**
  On POSIX platforms, link with `-pthread` or set the CMake threading package to avoid unresolved symbols.

- **Shared vs Static Libraries:**
  If linking GoogleTest as a shared library, define `GTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your tests.


## 5. Verify Your Configuration

### Step 1: Create a Simple Test

Create a file named `sample_test.cpp` with this content:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}
```


### Step 2: Build Your Test Executable

- If using CMake, configure and build your test:

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

- If manual, compile and link with GoogleTest libraries accordingly.


### Step 3: Run the Test

Execute the test binary:

```bash
./your_test_target
```

You should see output like:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```


## 6. Troubleshooting

<AccordionGroup title="Common Configuration Errors and Fixes">
<Accordion title="Linker Errors Missing pthread or Threading Symbols">
Ensure that your build links with pthread (POSIX) or the platform equivalent. In CMake, this is handled automatically via the Threads package.
For manual builds, add `-pthread`.
</Accordion>
<Accordion title="MSVC Runtime Library Mismatch">
GoogleTest defaults to static runtimes (MT), but your project might use dynamic (MD). This causes linker issues.
- In CMake, set `set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)` before adding GoogleTest.
- Alternatively, adjust your project's runtime settings to match.
</Accordion>
<Accordion title="Include Files Not Found">
Verify the include paths are correct and that the compiler can find `gtest/gtest.h`.
Check the include directories added to your build system.
</Accordion>
<Accordion title="C++ Standard Version Errors">
GoogleTest requires C++17.
Make sure your compiler flags include `-std=c++17` or set in CMake:
```
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```
</Accordion>
</AccordionGroup>

## 7. Best Practices & Tips

- Link against `gtest_main` or `gmock_main` if you want a pre-built main function.
- For continuous integration, prefer adding GoogleTest as a subdirectory for consistent builds.
- Use CMake targets like `GTest::gtest` to automatically propagate include and link dependencies.
- Review `googletest/README.md` and installation pages to ensure platform-specific nuances are handled.

---

## See Also

- [Installation Overview](/getting-started/prerequisites-installation/installation-overview) for fetching and building GoogleTest
- [System Requirements & Supported Platforms](/getting-started/prerequisites-installation/system-requirements) for your environment
- [Writing and Running Your First Test](/getting-started/initial-setup-usage/writing-your-first-test) to proceed
- [Troubleshooting Installation and Configuration](/getting-started/troubleshooting-support/common-troubleshooting) if issues arise
- Official GoogleTest GitHub: https://github.com/google/googletest

---

This setup page ensures you smoothly integrate GoogleTest into your C++ projects enabling you to build and run tests successfully from the start.
