---
title: "Writing and Running Your First Test"
description: "Provides a simple, narrative walkthrough for writing a basic test case, compiling, and running it. Includes C++ sample code, test discovery principles, and validates a successful setup with expected output."
---

# Writing and Running Your First Test

Welcome to your first step with GoogleTest and GoogleMock! This guide walks you through writing a simple test case, compiling it, and running it to validate that your setup is correct. We'll use an easy-to-follow narrative combined with practical code examples in C++, demonstrating core concepts like test discovery and expected output.

---

## 1. Understanding Your First Test

A GoogleTest test is a simple C++ function that checks behavior using assertions. A **test case** groups one or more **tests** (also called test functions or test methods). Your first test will:

- Define a test case and a test function.
- Use basic assertions to validate expectations.
- Compile into a runnable test binary.
- Be automatically discovered and executed by the testing framework.

This process is transparent thanks to GoogleTest's automatic test registration and discovery mechanism.

<Callout>
**User Goal:** You want to quickly verify that GoogleTest is correctly installed and integrated by writing and running a minimal test.
</Callout>

---

## 2. Writing Your First Test Case and Test Function

Letâ€™s create a minimal test for demonstration:

```cpp
#include <gtest/gtest.h>

// Defines a test case (group) named SampleTest and a test named Addition.
TEST(SampleTest, Addition) {
  EXPECT_EQ(2 + 2, 4);  // Checks that 2 + 2 equals 4
}
```

### Explanation:

- `TEST(<TestCaseName>, <TestName>)` declares a test function.
- Inside the test, `EXPECT_EQ` asserts equality; if the expression is false, the test fails but continues.

**Tips:**

- Name test cases to group related tests logically.
- Name tests to express what they verify.
- Use more descriptive tests as you grow confident.

---

## 3. Compiling Your Test

Assuming you have GoogleTest and GoogleMock installed and compiled (see documentation on [Installation Overview](/getting-started/prerequisites-installation/installation-overview) and [Project Configuration](/getting-started/initial-setup-usage/project-configuration)):

### Using CMake:

1. Add your test source file (e.g., `sample_test.cc`) in your project.
2. Link with GoogleTest and GoogleMock libraries.

Example `CMakeLists.txt` snippet:

```cmake
add_executable(sample_test sample_test.cc)
target_link_libraries(sample_test gtest_main gmock gmock_main pthread)
```

3. Build your project:
   ```bash
   mkdir build && cd build
   cmake ..
   make
   ```

<Note>
Adjust linking according to your setup and platform.
</Note>

---

## 4. Running the Test Binary

Run your compiled test:

```bash
./sample_test
```

Expected output:

```plaintext
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.Addition
[       OK ] SampleTest.Addition (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

### What This Means:

- GoogleTest discovered and ran your test automatically.
- The assertion passed, so the test succeeded.
- GoogleTest reported the test summary.

### If Something Goes Wrong:

- If the test does not compile, verify include paths and library linkage.
- If no tests are discovered, ensure your test function matches the `TEST` macro format.
- For runtime errors, check your environment and debugger.

---

## 5. Exploring Test Discovery and Execution

GoogleTest auto-registers each test declared with `TEST` or `TEST_F` macros when compiled. When you run the binary, GoogleTest:

- Enumerates all registered tests.
- Runs them one by one.
- Reports results with detailed messages.

No manual registration is needed.

This automatic discovery enables you to organize tests cleanly without boilerplate.

---

## 6. Writing More Complex Tests

After mastering your first test, you can expand by:

- Creating test fixtures with `TEST_F` for shared setup/teardown.
- Using more assertions like `EXPECT_TRUE`, `ASSERT_NE`, etc.
- Setting up mocks with GoogleMock (`MOCK_METHOD`, `EXPECT_CALL`).

Here's an example with a fixture class:

```cpp
class CalculatorTest : public ::testing::Test {
 protected:
  Calculator calc_;  // Your production class under test
};

TEST_F(CalculatorTest, AddNumbers) {
  EXPECT_EQ(calc_.Add(3, 4), 7);
}
```

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Pitfalls and Solutions">

<Accordion title="Test Not Discovered">
- Check test functions use the `TEST` or `TEST_F` macros.
- Ensure test files are compiled and linked properly.
</Accordion>

<Accordion title="Linker Errors">
- Verify linking against GoogleTest and GoogleMock.
- Confirm C++17 standard compatibility.
</Accordion>

<Accordion title="Unexpected Failures or Crashes">
- Add more verbose logging with `--gmock_verbose=info`.
- Use debugging tools to step through test execution.
</Accordion>

</AccordionGroup>

---

## 8. Next Steps

- Read [Configure Your Test Project](/getting-started/initial-setup-usage/project-configuration) to learn how to set up your projects for GoogleTest and GoogleMock.
- Try the [Quickstart Overview](/overview/getting-started-and-integration/quickstart-overview) for a holistic introduction.
- Learn about assertions, parameterized tests, and mocking in the guides section.
- Explore advanced features like sequences and actions to write sophisticated tests.

---

## Summary

This guide showed how to write a basic GoogleTest test, compile it, and run the test binary with automatic discovery and reporting. You learned the structure of test declarations, compilation basics, running your tests with expected output, and trouble-shooting tips.

By completing these steps, your test environment is validated and you're ready to build more complex tests using GoogleTest and GoogleMock.

---

## Sample Complete `sample_test.cc`

```cpp
#include <gtest/gtest.h>

// Simple test case: verifies that 2 + 2 equals 4.
TEST(SampleTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile, run, and enjoy your first success!

---

## Additional Resources

- [GoogleTest Primer](https://google.github.io/googletest/gmock_for_dummies.html) - Beginner-friendly introduction
- [Writing and Running Tests](../getting-started/initial-setup-usage/writing-your-first-test.md) - This page
- [Configuring Your Test Project](/getting-started/initial-setup-usage/project-configuration) - Setup details
- [Quickstart Overview](/overview/getting-started-and-integration/quickstart-overview) - Full guiding workflow
- [Mocking Basics](https://google.github.io/googletest/gmock_cook_book.html#Introduction) - Learn to write mocks

---

This concludes your first test writing guide. Happy testing! ðŸŽ‰
