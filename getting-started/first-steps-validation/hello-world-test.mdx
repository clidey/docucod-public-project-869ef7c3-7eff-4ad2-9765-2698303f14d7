---
title: "Write and Run Your First Test"
description: "Quickly create a minimal C++ test with GoogleTest macros. Learn how to compile and run the test, interpret the results, and understand the basic test workflow – your first productive moment with the framework."
---

# Write and Run Your First Test

Quickly create a minimal C++ test with GoogleTest macros. Learn how to compile and run the test, interpret the results, and understand the basic test workflow—your first productive moment with the framework.

---

## 1. Prerequisites

Before starting, ensure you have the following:

- A working C++ development environment with a compiler supporting C++17 or higher.
- GoogleTest source or installed library ready for linking.
- Basic knowledge of creating and compiling C++ programs.

If you haven't installed GoogleTest yet, please refer to [Installation: CMake & Bazel](../../getting-started/prerequisites-installation/installation-cmake-bazel.md) and [Integrating with Your Build System](../../getting-started/prerequisites-installation/integration-build-systems.md).

---

## 2. Create a Minimal Test File

Let's write your very first test case. This will demonstrate the essential structure and assertions supported by GoogleTest.

### Step 1: Write the Test Source Code

Create a file named `hello_test.cc` with the following content:

```cpp
#include <gtest/gtest.h>

// Define a test named BasicAssertions inside the HelloTest test suite.
TEST(HelloTest, BasicAssertions) {
  // Expect two different strings to be unequal.
  EXPECT_STRNE("hello", "world");

  // Expect equality of simple arithmetic expressions.
  EXPECT_EQ(7 * 6, 42);
}
```

> This minimal test shows two assertions: `EXPECT_STRNE` verifies that two C strings differ, and `EXPECT_EQ` checks integer equality.

### Quick Tip

- Use `TEST(TestSuiteName, TestName)` for simple tests.
- Test suite and test names must be valid C++ identifiers without underscores (`_`).
- Assertions come in `EXPECT_` (non-fatal) and `ASSERT_` (fatal) variants.

---

## 3. Build the Test Binary

You need to compile this C++ file and link it with GoogleTest libraries.

### Using CMake to Build

1. In your project directory, ensure `CMakeLists.txt` includes GoogleTest as a dependency. Example:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

enable_testing()

add_executable(hello_test hello_test.cc)
target_link_libraries(hello_test GTest::gtest_main)

include(GoogleTest)
gtest_discover_tests(hello_test)
```

2. Run the following commands:

```bash
cmake -S . -B build
cmake --build build
```

3. Build completes creating the test binary `hello_test`.

### Alternative: Compile Manually

If not using CMake, compile manually (modify paths as needed):

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread hello_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o hello_test
```

> Replace `/path/to/` with your actual GoogleTest installation paths.

---

## 4. Run the Test and Interpret Results

### Step 1: Run Tests

Execute the test binary:

```bash
./hello_test
```

### Expected Output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest ran. (1 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

This means:

- The test `BasicAssertions` passed successfully.
- GoogleTest automatically registered and ran your test.
- Timing information is shown.

### Step 2: Examine Failure Modes

If an assertion fails, GoogleTest outputs the failure location, expected and actual values, and messages. For instance:

```none
hello_test.cc:8: Failure
Expected equality of these values:
  7 * 6
    Which is: 41
  42
```

This informs you about the failed assertion and helps you debug.

---

## 5. Understanding the Test Workflow

- `InitGoogleTest()` parses command-line flags and initializes GoogleTest.
- `RUN_ALL_TESTS()` runs all registered tests in the binary.
- Each `TEST()` macro defines one test function, automatically registered.
- Test results include success/failure status and execution time.
- Assertions inside tests (`EXPECT_*` and `ASSERT_*`) determine success or failure.

You don't need to manually register or invoke tests.

---

## 6. Tips for Writing Your Next Tests

- Name suites and tests clearly and avoid underscores (`_`).
- Use `EXPECT_*` for non-fatal checks to continue tests after failure.
- Use `ASSERT_*` for fatal checks that must abort the current test on failure.
- Stream informative messages into assertions for clearer diagnostics:

```cpp
EXPECT_EQ(result, expected) << "Mismatch in processing for input: " << input_value;
```

- Consider organizing related tests into suites for better maintainability.

---

## 7. Troubleshooting

### Common Issues

- **Test not running:** Make sure to call `InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`, or link with `gtest_main`.
- **Linker errors:** Verify that you link against `gtest` and `gtest_main` libraries.
- **Assertion macro errors:** Check that test and suite names contain no underscores, and the fixture class is default-constructible if using `TEST_F`.

### Quick Fix

If `RUN_ALL_TESTS()` is not recognized or tests don't execute, ensure your `main` function uses:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 8. Next Steps

- Explore the [GoogleTest Primer](../../docs/primer.md) to learn more about writing tests.
- Learn about different assertion macros in the [Assertions Reference](../../docs/reference/assertions.md).
- Discover how to apply fixtures in [Test Fixtures: Using the Same Data Configuration](../../docs/primer.md#same-data-multiple-tests).
- For advanced features like mocking, see the [GoogleMock Mocking Patterns](../gmock-mocking-patterns/creating-mocks.md).

---

## Appendix: Full Example `main` Function

If you prefer to write your own `main()` (instead of linking with `gtest_main`), here is how:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This sets up GoogleTest and runs all discovered tests.

---

Congratulations! You've now created, compiled, and executed your first GoogleTest test.


<Check>
Remember to always check the output of `RUN_ALL_TESTS()` and return its value from `main()`. Ignoring this return value leads to false-positive test results.
</Check>