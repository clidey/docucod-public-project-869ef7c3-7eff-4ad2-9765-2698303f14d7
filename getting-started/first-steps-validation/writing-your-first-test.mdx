---
title: "Writing & Running Your First Test"
description: "Offers a step-by-step guide to writing a basic unit test using GoogleTest, with a minimal code sample. Details how to build and execute the test, verify the output, and navigate the initial workflow from source code to passing test."
---

# Writing & Running Your First Test

This guide walks you through writing a basic C++ unit test with GoogleTest. You’ll create a simple test case, build the test executable, run it, and verify the results. This hands-on approach introduces the foundational workflow of writing, running, and interpreting tests using GoogleTest.

---

## 1. Writing Your First Test

### Define a Simple Test

Start by writing a test case using the `TEST` macro. This macro requires two arguments:
- **TestSuiteName**: Logical group for related tests.
- **TestName**: Name of the individual test.

Both names must be valid C++ identifiers without underscores.

```cpp
#include <gtest/gtest.h>

// A simple test suite named FactorialTest
// with two individual tests.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

> **Note:** This example assumes a function `Factorial(int)` is defined elsewhere.

### Understanding the Test

- `TEST(FactorialTest, HandlesZeroInput) {...}` defines a test that verifies factorial of 0 is 1.
- Assertions like `EXPECT_EQ` check if the actual value matches the expected one.
- Each test run is independent and isolated.
- Failing assertions are reported with file names, line numbers, and messages.

## 2. Building Your Test

### Step-by-Step Build

1. Save your test code in a file, e.g., `factorial_test.cc`.
2. Compile the test with your compiler, linking against the GoogleTest libraries.

If using `g++` and GoogleTest is installed system-wide:

```bash
g++ -std=c++17 factorial_test.cc -lgtest -lgtest_main -pthread -o factorial_test
```

- `-std=c++17`: Required C++17 standard support.
- `-lgtest` and `-lgtest_main`: Link GoogleTest libraries.
- `-pthread`: Enable threading.

### Verification

- After compiling, you should have an executable named `factorial_test` (or `factorial_test.exe` on Windows).
- If compilation fails, ensure GoogleTest is installed and environment variables include its locations.

## 3. Running the Test

Execute the compiled test binary:

```bash
./factorial_test
```

### Expected Output

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This output confirms both tests passed successfully.

### Interpreting Failures

- If an assertion fails, you’ll see detailed error messages including:
  - File name and line number of failure
  - Assertion message
  - Expected vs Actual values

Example of a failing assertion output:

```none
factorial_test.cc:10: Failure
Expected equality of these values:
  Factorial(3)
    Which is: 5
  6
```

The test suite summary at the end lists failed tests.

## 4. Writing Tests with Fixtures

For more complex scenarios where multiple tests share common setup or data, use *test fixtures*.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Set up multiple queues
    q0_ = Queue<int>();  // empty
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_, q1_, q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  EXPECT_EQ(q1_.Dequeue(), 1);
  // and so forth...
}
```

- Use `TEST_F` instead of `TEST`.
- The fixture class inherits from `testing::Test`.
- Setup logic is placed in the constructor or overriding `SetUp()` method.

## 5. Running Tests Programmatically

Your `main()` function should initialize GoogleTest and run all tests:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` parses command-line flags.
- `RUN_ALL_TESTS` runs all registered tests and returns `0` on success.

> **Important:** Always check and return the result of `RUN_ALL_TESTS()` to ensure test failures are reported correctly.

## 6. Tips and Best Practices

- **Avoid underscores** in test suite and test names to prevent naming conflicts and errors.
- Use `EXPECT_` assertions for non-fatal failures, allowing tests to continue and provide more feedback.
- Use `ASSERT_` assertions when failure in the code makes further test execution invalid.
- Use `SCOPED_TRACE()` for better diagnostics when calling subroutines with assertions.
- Keep tests independent and repeatable to ease debugging.

## 7. Common Pitfalls and Troubleshooting

- Failing to link GoogleTest libraries causes compile errors.
- Make sure the fixture class has a default constructor when using `TEST_F`.
- Using assertions that generate fatal failures (`ASSERT_*`) in non-void functions or constructors/destructors is unsupported.
- Remember that each test case runs with a fresh fixture instance.

## 8. Next Steps

- Explore writing test fixtures, parameterized tests, and mocking with GoogleMock.
- Consult related pages for more advanced workflows:
  - [GoogleTest Primer](/docs/primer.md)
  - [Getting Started with GoogleMock](/guides/getting-started-workflows/mocking-basics)
  - [Writing Custom Assertions](/guides/advanced-testing-patterns/custom-assertions-matchers)

---

For a curated hands-on journey, visit “Your First Test: Quick Start Journey” for workflow insights and “Getting Started with GoogleMock” to extend test functionality.

---

## References

- [GoogleTest Testing Reference](reference/testing.md) - Macros and API details
- [GoogleTest Primer](docs/primer.md) - Comprehensive intro guide
- [Assertions Reference](reference/assertions.md) - All assertions explained
- [Mocking Reference](reference/mocking.md) - Mock object creation and expectations


---

**Example: Full Minimal Test File**

```cpp
#include <gtest/gtest.h>

// A dummy factorial function for illustration.
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build with:

```bash
g++ -std=c++17 factorial_test.cc -lgtest -lgtest_main -pthread -o factorial_test
```

Run with:

```bash
./factorial_test
```

And you will see the output confirming all tests passed.
