---
title: "Building and Running Tests"
description: "Step-by-step instructions for compiling and executing tests on various platforms and build systems. Clarifies building test binaries, understanding expected output, and the simple validation of successful setup using example commands."
---

# Building and Running Tests with GoogleTest and GoogleMock

This guide provides clear, step-by-step instructions to compile and execute your test binaries using GoogleTest and GoogleMock across common platforms and build systems. By following these instructions, you will build your tests successfully, run them to validate your setup, and understand the expected test output.

---

## 1. Prerequisites

Before building and running tests, ensure:

- Your system meets the requirements described in [Prerequisites & Supported Platforms](/getting-started/setup-requirements/system-requirements).
- You have installed GoogleTest and GoogleMock following the steps in [Installation on Linux, macOS, and Windows](/getting-started/setup-requirements/install-platforms).
- Your test source files are properly configured and linked to GoogleTest and (optionally) GoogleMock as detailed in [Basic Configuration & Project Setup](/getting-started/setup-requirements/basic-configuration).

<Tip>
Link your test executables against `gtest_main` or `gmock_main` libraries to avoid writing your own `main()` function. These libraries provide a ready-made entry point which initializes the test framework and runs all registered tests.
</Tip>

---

## 2. Building Test Binaries

GoogleTest supports various build systems, with CMake and Bazel being the most common. Below are standard workflows for building test binaries.

### 2.1 Building with CMake

1. Navigate to your project root directory.
2. Create and enter a build directory:

```bash
mkdir build && cd build
```

3. Generate build files (adjust your `CMakeLists.txt` to find and link GoogleTest/GMock):

```bash
cmake ..
```

For example, your tests can link like this inside `CMakeLists.txt`:

```cmake
target_link_libraries(your_test_target PRIVATE gtest_main)  # For GoogleTest
# Or for GoogleMock:
target_link_libraries(your_test_target PRIVATE gmock_main)
```

4. Build your tests:

```bash
cmake --build .
```

On Linux/macOS, this typically runs `make`; on Windows with Visual Studio, it calls MSBuild.

### 2.2 Building with Bazel

Assuming a Bazel workspace configured with GoogleTest/GMock:

```bash
bazel build //path/to/your:test_target
```

### 2.3 Manual Build (Command Line)

For quick compilation without build systems, link your test source files with GoogleTest/GMock libraries:

```bash
# Example for g++
g++ -std=c++17 -pthread your_test.cc -lgtest_main -lgtest -o your_test
```

Adjust paths and compiler options based on your environment.

<Tip>
Ensure you include the `-pthread` flag on Linux/macOS when using CMake or manual builds to link threading libraries required by GoogleTest.
</Tip>

---

## 3. Running Tests

Once your test binary is built, running it is simple:

```bash
./your_test
```

Or on Windows:

```powershell
your_test.exe
```

### 3.1 Expected Output

When tests run successfully, you will see output similar to:

```
Running main() from gmock_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from SampleTestSuite
[ RUN      ] SampleTestSuite.Test1
[       OK ] SampleTestSuite.Test1 (0 ms)
[ RUN      ] SampleTestSuite.Test2
[       OK ] SampleTestSuite.Test2 (0 ms)
[----------] 2 tests from SampleTestSuite (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

<Tip>
The `Running main() from ...` line indicates the test executable is using the default `main()` provided by GoogleTest or GoogleMock (`gtest_main` or `gmock_main` library).
</Tip>

### 3.2 Interpreting Results

- **[PASSED]** means test cases succeeded.
- If any test fails, details of failed assertions, file names, and line numbers are reported clearly.
- The overall process exit code is `0` on success and `1` on any failure, suitable for CI pipelines.

---

## 4. Simple Validation of Setup

To verify your build and runtime setup, GoogleTest provides sample tests and main functions. You can:

- Compile and run a basic test file such as:

```c++
#include <gtest/gtest.h>

TEST(SanityTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Build this with the proper linking against `gtest_main` or link your own `main()` as above.
- Run the binary and expect the same successful output.

<Tip>
If you use `gtest_main` or `gmock_main`, you do not need to provide your own `main()` function as these packages implement it to initialize and run tests.
</Tip>

---

## 5. Troubleshooting Common Issues

### 5.1 Test Binary Does Not Build

- Verify GoogleTest and GoogleMock libraries and headers are correctly referenced by your build system.
- Ensure the C++ standard is set to at least C++17 (`-std=c++17`).
- Confirm you are linking with the correct threading libraries, e.g., `-pthread` on Unix-like systems.
- Check compiler/linker errors for missing symbols related to `main()` if you forget to link `gtest_main` or `gmock_main`.

### 5.2 Tests Do Not Run or Detect Cases

- Confirm your tests use the `TEST()` or `TEST_F()` macros to register tests.
- Make sure `RUN_ALL_TESTS()` is called once, typically from `main()`.
- Avoid calling `RUN_ALL_TESTS()` multiple times, which can cause runtime errors.

### 5.3 Unexpected Output or Failures

- Check test assertions for correctness.
- Review command line flags controlling test execution (`--gtest_filter`, `--gtest_verbose`).

---

## 6. Next Steps

Once tests build and run successfully, explore:

- Writing more comprehensive tests: [Writing Your First Test](/getting-started/first-steps-validation/write-first-test)
- Integrating tests into your continuous integration pipeline
- Using GoogleMock for advanced mocking: [Mocking Framework Overview](https://google.github.io/googletest/gmock_for_dummies.html)
- Advanced test configuration and customization

<Check>
Your test executable should exit with code 0 and output `[  PASSED  ]` for all tests to confirm successful setup.
</Check>

---

## Additional Resources

- [GoogleTest Primer](primer.md) — Learn the basics of writing tests.
- [Installation Instructions](install-platforms) — Comprehensive installation steps.
- [Basic Configuration & Project Setup](basic-configuration) — Configure your project to link tests correctly.
- [Troubleshooting Common Setup Issues](/getting-started/first-steps-validation/troubleshooting) — Diagnosing common build and run problems.

---

By following these building and running instructions, you will establish a reliable foundation for using GoogleTest and GoogleMock to validate your C++ code efficiently and consistently across platforms.