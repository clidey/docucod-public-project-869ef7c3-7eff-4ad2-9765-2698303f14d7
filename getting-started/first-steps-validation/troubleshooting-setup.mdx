---
title: "Troubleshooting Installation & Setup"
description: "Addresses the most common setup and first-use errors—such as build failures, missing dependencies, or linker issues—offering quick solutions and tips. Helps users identify whether their environment is correctly configured so they can proceed confidently."
---

# Troubleshooting Installation & Setup

Ensuring a smooth installation and setup process is critical for leveraging GoogleTest and GoogleMock effectively. This guide addresses the most common challenges users face during installation and initial configuration, offering practical solutions and tips to quickly resolve issues.

---

## 1. Verify Your Environment

### Check System Compatibility
- Confirm your platform is supported: Linux, Windows, or macOS.
- Ensure your compiler supports at least C++17 (GoogleTest requires this).
- Validate you have enough disk space and appropriate permissions.

### Confirm Dependences
- Confirm CMake or your build system is installed and correctly configured.
- For Windows, ensure Visual Studio or appropriate MSVC toolchain is available.

<Check>
Always start troubleshooting by verifying these environment prerequisites to avoid cascading errors.
</Check>

## 2. Build Failures

### Common Causes
- Missing or incorrect paths to GoogleTest or GoogleMock source headers.
- Outdated or incompatible compilers.
- Incorrect CMake invocation or flags.

### How to Fix

#### Using CMake Standalone
1. Ensure you clone the repository correctly:

```bash
$ git clone https://github.com/google/googletest.git -b v1.17.0
d$ cd googletest
$ mkdir build && cd build
$ cmake ..
```

If you intend to build GoogleTest only (without GoogleMock):

```bash
$ cmake .. -DBUILD_GMOCK=OFF
```

2. Run the build:

```bash
$ make
```

3. For Windows users, open the generated `gtest.sln` in Visual Studio and build.

<Note>
Be sure to check the output for any errors or warnings during CMake generation. Missing dependencies or misconfigured environment variables often cause these.
</Note>

### CMake Troubleshooting Tips
- Clear your build directory if you suspect stale configurations.
- Use verbose output for CMake to identify configuration issues:

```bash
$ cmake .. -DCMAKE_VERBOSE_MAKEFILE=ON
```

- On Windows, consider setting `-Dgtest_force_shared_crt=ON` if encountering runtime library mismatches.

## 3. Linker Errors

### Typical Problems
- Library paths not linked correctly.
- Using incompatible runtime libraries (e.g., static vs dynamic CRT on Windows).
- Missing `gtest_main` or `gmock_main` in your linking command.

### Solutions
- Link against `gtest_main` or `gmock_main` to get the default `main()`:

```cmake
target_link_libraries(your_test_target gtest_main)
```

- For custom `main()`, link against `gtest` and/or `gmock` only.
- Ensure all required object files and libraries are included.

<Tip>
If you build your tests manually, always specify the correct include and library directories for your toolchain.
</Tip>

## 4. Runtime Issues

### Tests Not Running or Being Detected
- Confirm that your test binary is linked with GoogleTest properly.
- Ensure that tests are registered (for example, through `TEST()` macros).
- Verify that you call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()` in `main()`.

### GoogleMock Initialization
Use `testing::InitGoogleMock()` if you utilize mocks, which also initializes GoogleTest:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Common Pitfalls
- Calling `RUN_ALL_TESTS()` multiple times leads to undefined behavior.
- Ignoring the return value of `RUN_ALL_TESTS()` results in compile errors.

## 5. Permission and Access Issues

- Building or installing with insufficient privileges can cause failures.
- On Linux/macOS, use `sudo make install` carefully and only when necessary.
- For CI environments, confirm user permissions and environment variables like PATH.

## 6. Tips for Smooth Setup

- Use the pre-packaged `gtest_main` or `gmock_main` libraries to simplify test writing.
- When integrating into existing projects, prefer building GoogleTest as a subproject via `add_subdirectory()` to avoid version mismatches.
- Regularly update your local clone to maintain compatibility and get fixes.

## 7. Additional Troubleshooting Resources

- Run your tests with the `--gmock_verbose=info` flag to get detailed logs of mock calls and expectation matches.
- Check GoogleTest’s and GoogleMock’s GitHub issues and discussions for known issues related to your platform or compiler.
- Validate your build environment by running the quick validation tests included in the repository.

<AccordionGroup title="Common Errors and Their Solutions">
<Accordion title="Unrecognized Compiler Errors">
- Ensure you are running a supported compiler with C++17 support.
- Update your compiler or adjust your build flags to enforce C++17 compliance.
</Accordion>
<Accordion title="Linker Error: Undefined References to GoogleTest Symbols">
- Make sure to link the correct libraries.
- Check the order of libraries in your linker command: GoogleTest libraries should come after your test objects.
</Accordion>
<Accordion title="Tests Not Discovered or Not Running">
- Confirm test registration macros are used correctly.
- Check that your `main()` function properly initializes GoogleTest.
</Accordion>
<Accordion title="Build Time Out of Memory or Long Compile Times">
- Move mock class constructor and destructor definitions out of headers into `.cc` files.
- Minimize the number of mocked methods if possible.
</Accordion>
</AccordionGroup>

## 8. Next Steps

Once installation and setup issues are resolved, proceed with:

- [Writing and Running Your First Test](../first-steps-validation/create-first-test.md) to validate your setup.
- [Configuration and Setup](../setup-installation/configuration-setup.md) to integrate GoogleTest into your build system.
- [Using Assertions Effectively](../../guides/core-workflows/using-assertions-effectively.md) to build robust tests.

<Info>
Remember to frequently consult the latest documentation and community resources to stay updated on best practices and newly discovered issues.
</Info>

---

**Example Basic Build Script Using CMake:**

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTestProject)

add_subdirectory(path/to/googletest)

enable_testing()

add_executable(MyTests test.cpp)

# Link against GoogleTest and GoogleMock
target_link_libraries(MyTests gtest_main gmock_main)

add_test(NAME MyTests COMMAND MyTests)
```

---

**Example Main Function for Custom Entry Point:**

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

int main(int argc, char **argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Troubleshooting Checklist

| Issue                               | Possible Fix                                  |
|------------------------------------|-----------------------------------------------|
| Compilation fails                  | Check compiler version, include paths, C++17 support. |
| Linker errors                     | Link correct libraries, order correct.       |
| Tests not running or discovered   | Use correct macros, initialize GoogleTest properly. |
| Uninteresting call warnings       | Use `NiceMock` or add catch-all expectations. |
| Build slow or out of memory       | Separate implementation, reduce mocks.        |

---

For more information, see the [Official GoogleTest Installation Guide](https://github.com/google/googletest/blob/main/googletest/README.md) and [GoogleMock README](https://github.com/google/googletest/blob/main/googlemock/README.md).
