---
title: "Writing Your First Test"
description: "Learn how to create a simple test using GoogleTest's basic macros and test suite structure. This page walks you through the minimal code required to define and run a unit test, lowering the barrier for your first success."
---

# Writing Your First Test

Learn how to create a simple test using GoogleTest's basic macros and test suite structure. This guide walks you through the minimal code required to define and run a unit test, lowering the barrier for your first success.

---

## 1. Overview

GoogleTest simplifies writing and running C++ tests by organizing them into named test suites and individual tests. Here, we'll focus on creating your very first minimal test using the `TEST()` macro.

- You define tests using the `TEST(TestSuiteName, TestName)` macro.
- Tests are grouped by test suites, logically grouping related tests.
- Test and suite names must be valid C++ identifiers without underscores (`_`).

This approach makes your tests easy to read, maintain, and extend.

---

## 2. Prerequisites

Before writing and running your first test:

- Make sure GoogleTest is installed and properly configured in your build system.
- Include `gtest/gtest.h` in your test source file to access testing macros and utilities.
- Familiarize yourself with your C++ compiler environment.


---

## 3. Writing Your First Test

Follow these straightforward steps:

<Steps>
<Step title="Include GoogleTest Header">
Add the main GoogleTest header to your test file.

```cpp
#include <gtest/gtest.h>
```

This header provides the macros and classes needed for testing.
</Step>

<Step title="Define a Test Using TEST Macro">
Write your first test by using the `TEST()` macro. It takes two parameters:

- `TestSuiteName`: Logical grouping of tests, e.g., `FactorialTest`.
- `TestName`: The specific test, e.g., `HandlesZeroInput`.

Example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, Factorial(0));
}
```

This test asserts that the `Factorial` function returns `1` when called with `0`.
</Step>

<Step title="Implement the Tested Function (If Needed)">
To complete the example, ensure the function under test exists. For demonstration:

```cpp
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

This is a simple recursive factorial function.
</Step>

<Step title="Build and Run Your Test">
Compile your test source file along with GoogleTest (and GoogleMock, if used).

If you linked against the recommended `gtest_main` library, your test executable will have a `main()` already provided, which runs `RUN_ALL_TESTS()` behind the scenes.

Run the test binary, and GoogleTest will automatically discover and execute your test.

Expected console output would indicate whether the test passed or failed.
</Step>
</Steps>

---

## 4. Understanding Test Assertions

GoogleTest assertions check conditions; failures provide detailed diagnostic messages.

- `EXPECT_EQ(expected, actual)`: Verifies equality and continues after failure.
- `ASSERT_EQ(expected, actual)`: Verifies equality and aborts the current test upon failure.

For your first test, using `EXPECT_` macros lets tests report multiple errors at once.

Example:
```cpp
EXPECT_EQ(Factorial(1), 1);
EXPECT_EQ(Factorial(2), 2);
EXPECT_EQ(Factorial(3), 6);
```

---

## 5. Best Practices

- Avoid underscores (`_`) in test suite and test names to prevent naming conflicts and reserved identifier issues.
- Choose meaningful and descriptive test suite and test names reflecting what is tested.
- Keep tests independent; each test should leave the environment unchanged for others.
- Use `ASSERT_` macros if subsequent code depends on the success of the assertion.

---

## 6. Example: A Minimal Complete Test File

```cpp
#include <gtest/gtest.h>

// The function to test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test suite and test
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, Factorial(0));
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(1, Factorial(1));
  EXPECT_EQ(2, Factorial(2));
  EXPECT_EQ(6, Factorial(3));
  EXPECT_EQ(40320, Factorial(8));
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### How it works:
- `TEST(FactorialTest, HandlesZeroInput)` defines one test named `HandlesZeroInput` in the suite `FactorialTest`.
- `EXPECT_EQ` asserts expected values.
- `main()` initializes GoogleTest and runs all tests.

---

## 7. Running Your Tests

- Build the test executable using your build tool.
- Execute the test binary.
- Observe the console output, which will report tests run, passed, and failed.

Example run output:

```
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

---

## 8. Troubleshooting Tips

- **Test Not Running?**
  - Confirm test suite and test names are valid C++ identifiers without underscores.
  - Ensure `InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
  
- **Link Errors?**
  - Link your test code with `gtest` and `gtest_main` libraries.
  - Confirm your build system includes GoogleTest sources or installed libraries correctly.
  
- **Assertion Failures?**
  - Check your test logic and expected values.
  - Use `ASSERT_*` if failure prevents further meaningful checks.

- **Tests Not Discovered?**
  - Confirm you are using the `TEST()` or `TEST_F()` macros.
  - The test macro registers test cases automatically; no manual registration needed.

---

## 9. Next Steps

- Once comfortable with `TEST()`, explore **test fixtures** using `TEST_F()` for grouped tests with shared setup.
- Learn about parameterized tests for running the same test logic with varied inputs.
- Explore advanced assertions and matchers to express rich test conditions.
- Review related documentation in the Getting Started section:
  - [Building and Running Tests](../getting-started/first-steps-validation/build-run-tests)
  - [Writing and Using Test Fixtures](../primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests)

---

## 10. Additional References

- [GoogleTest Primer](../primer.md)
- [Assertions Reference](../reference/assertions.md)
- [FAQ on Naming Tests](../../docs/faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Sample Test Code Examples](../../googletest/samples/sample1_unittest.cc)


---

Each test you write brings higher confidence to your codebase. Now that you've written your first test, you're on your way to more robust and maintainable C++ projects. Keep testing!

---