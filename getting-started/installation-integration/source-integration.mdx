---
title: "Manual Source Integration"
description: "Addresses how to manually integrate GoogleTest/GoogleMock into projects via source inclusion, useful for atypical setups or projects not using standard build tools."
---

# Manual Source Integration

This guide explains how to manually incorporate GoogleTest and GoogleMock into your C++ projects by including their source files directly. This approach is especially useful in cases where you cannot use standard build tools such as CMake or Bazel, or if you have an atypical project setup that requires explicit source integration.

---

## Why Manual Source Integration?

Most users prefer building GoogleTest using CMake or Bazel for ease and maintainability. However, if your build environment does not support these tools or you prefer to embed GoogleTest and GoogleMock sources within your project directly, manual integration is the way to go.

This method ensures complete control over how and when GoogleTest compiles as part of your test program.

## Prerequisites

Before proceeding, ensure:

- You have downloaded the GoogleTest source code from the official repository.
- Your compiler supports C++17 or newer, which is required by GoogleTest.
- You understand basic project build configurations and can modify your build system to include source files directly.

## Step-by-Step Manual Integration

### 1. Obtain GoogleTest Source

Clone or download the GoogleTest repository:

```bash
git clone https://github.com/google/googletest.git -b main
```

This repository contains both GoogleTest and GoogleMock source codes.

### 2. Locate Required Source Files

For manual inclusion, you need the following directories:

- `googletest/include/gtest`: Header files.
- `googletest/src`: GoogleTest source files.
- `googlemock/include/gmock` (if using GoogleMock).
- `googlemock/src`: GoogleMock source files (optional).

### 3. Add Include Paths

Configure your compiler's include path to point to the GoogleTest and GoogleMock headers. For example:

```bash
-I/path/to/googletest/include -I/path/to/googlemock/include
```

Make sure your build system includes these paths so that `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>` work.

### 4. Add Source Files to Your Build

Include the source files from `googletest/src` and `googlemock/src` (if using GoogleMock) in your build targets. Essential GoogleTest source files to include are:

- `googletest/src/gtest-all.cc` (recommended, includes all necessary GoogleTest source code)

If you need GoogleMock as well, add:

- `googlemock/src/gmock-all.cc`

Example with a manual compiler call:

```bash
c++ -std=c++17 -I/path/to/googletest/include -I/path/to/googlemock/include \
    /path/to/googletest/src/gtest-all.cc \
    /path/to/googlemock/src/gmock-all.cc \
    my_test_code.cc -o my_tests
```

### 5. Write Your Tests

In your test source files, include GoogleTest and GoogleMock headers and write your tests as usual.

```c++
#include <gtest/gtest.h>
#include <gmock/gmock.h>  // Optional, only if using GoogleMock

TEST(MyTestSuite, MyTest) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 6. Build and Run

Compile your tests along with the GoogleTest and GoogleMock source files, then run the test executable. It will automatically discover and run all tests.

## Best Practices and Tips

- Prefer using `gtest-all.cc` and `gmock-all.cc` source files instead of individual compilation units. This reduces build complexity and ensures you do not miss any required source files.
- Ensure that your build flags enable C++17 or later standards.
- If you only want GoogleTest without GoogleMock, do not include GoogleMock sources or headers.
- Keep GoogleTest and GoogleMock updated along with your project to benefit from bug fixes and improvements.

## Common Pitfalls

- **Missing source files:** Not including the necessary `.cc` files leads to linker errors.
- **Incorrect include paths:** Headers not found will cause build errors.
- **Ignoring C++ Standard:** GoogleTest requires at least C++17; older standards cause compilation failures.
- **Multiple definitions:** If GoogleTest is linked both manually and as a library elsewhere, you may face duplicate symbol errors.

## Troubleshooting

| Issue                                    | Solution                                            |
|------------------------------------------|-----------------------------------------------------|
| Linker errors for GoogleTest symbols     | Confirm `gtest-all.cc` and/or `gmock-all.cc` are compiled and linked. |
| Build errors due to missing headers      | Check include paths point to the correct GoogleTest `include` directory. |
| Using old compiler not supporting C++17 | Upgrade your compiler or set appropriate flags.      |
| Duplicate symbol errors                   | Avoid linking GoogleTest library if compiling sources manually.          |

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest) for source and documentation.
- [Installing with CMake](installing-via-cmake) guide for the recommended build method.
- [GoogleTest Primer](primer.md) for basic usage and writing tests.

---

## Summary

Manual source integration gives you full control over GoogleTest and GoogleMock compilation and linking in projects where build automation tools are not available or suitable. Following the steps above guarantees your project includes GoogleTest correctly, enabling powerful testing capabilities without dependency on external build setups.

If your environment supports it, adopting CMake or Bazel build integration is recommended for long-term maintainability and ease.

<Check>
Ensure consistent use of C++17 and update GoogleTest sources regularly.
</Check>

<Info>
For advanced integration options, see the [Build System Integration](../../guides/integration-advanced/build-system-integration.md).
</Info>
