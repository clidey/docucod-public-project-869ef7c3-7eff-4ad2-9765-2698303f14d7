---
title: "Your First Test Run"
description: "Guides users in writing and running their first basic test case using GoogleTest (optionally with GoogleMock). Includes code samples, invocation commands, and expected output to build user confidence."
---

# Your First Test Run

Welcome to the first hands-on experience with GoogleTest! This guide walks you through writing and running your very first test case using GoogleTest, optionally enhanced with GoogleMock.

By the end of this guide, you will have a working test program, executed it, and understood the output, empowering you to build confidence as you explore more advanced test writing.

---

## 1. Writing Your First Basic Test

GoogleTest uses the `TEST()` macro to define individual tests within test suites. Each test is an independent function that checks expected behavior using assertions.

### Example: Testing a Simple Function

Suppose you want to verify a basic factorial function:

```cpp
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

Here’s how to create a minimal test program:

```cpp
#include <gtest/gtest.h>

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### How it works:
- `TEST(FactorialTest, HandlesZeroInput)` defines a test named `HandlesZeroInput` in the `FactorialTest` suite.
- `EXPECT_EQ(expression1, expression2)` checks for equality and records failures non-fatally.
- `main()` initializes GoogleTest and runs all tests discovered via `TEST()` macros.


## 2. Compiling and Running Your Test

### Step 1: Save your test source file

Save the above code as `factorial_test.cpp` in your project directory.

### Step 2: Compile the test program

Assuming you have GoogleTest installed and properly linked, use a command like the following to compile:

```bash
# For Linux/macOS using g++ and pkg-config
g++ factorial_test.cpp -o factorial_test $(pkg-config --cflags --libs gtest_main) -pthread
```

*Note: Adjust the compile and link flags according to your environment and build system.*

### Step 3: Run the test executable

```bash
./factorial_test
```

### Expected output:

```text
Running main() from [your path]/gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If you see "PASSED" with the number of tests run, congratulations! Your first test run succeeded.


## 3. Writing a Basic Mock Test (Optional)

GoogleMock integrates smoothly for tests that require mock objects. Here’s a quick example to illustrate:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};

TEST(MockTest, ReturnsExpectedValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue()).WillOnce(::testing::Return(42));

  int value = mock.GetValue();
  EXPECT_EQ(value, 42);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile similarly, linking with GoogleMock and GoogleTest:

```bash
g++ mock_test.cpp -o mock_test $(pkg-config --cflags --libs gmock_main) -pthread
```

Run as usual:

```bash
./mock_test
```

Expected output will show your mock test executing and passing.


## 4. Key Tips for Success

- **Always initialize GoogleTest or GoogleMock before running tests** with `InitGoogleTest()` or `InitGoogleMock()` in your `main()`.
- **Use `EXPECT_*` for non-fatal checks** to allow multiple failures per test.
- **Group related tests under the same test suite name** to keep your tests organized.
- **For mocking, define mock methods with `MOCK_METHOD` inside mock classes.**
- **Link your tests with `gtest_main` or `gmock_main` libraries if you don’t want to write your own `main()` function.**


## 5. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Test Run">
<Accordion title="Linker errors related to missing main()">
Make sure you either provide a `main()` function calling `RUN_ALL_TESTS()`, or link with `gtest_main` (for GoogleTest) or `gmock_main` (for GoogleMock).
</Accordion>
<Accordion title="Tests not discovered or not running">
Verify that your tests use the `TEST()` or `TEST_F()` macros correctly. Also, ensure `InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Compilation errors about missing headers">
Verify that your include paths for GoogleTest (`gtest/gtest.h`) and GoogleMock (`gmock/gmock.h`) are correctly set. Depending on your installation, you might need to adjust include and link flags.
</Accordion>
<Accordion title="Mock expectations failing unexpectedly">
Ensure expectations (`EXPECT_CALL`) are set before the mocks are exercised. Also, use `.Times(...)` or default cardinalities appropriately.
</Accordion>
</AccordionGroup>


## 6. Next Steps

- Explore writing **test fixtures** to reuse common setup for multiple tests.
- Learn how to **configure project builds with CMake or Bazel** (see [Configuring Your Project](https://github.com/google/googletest/tree/main/docs/getting-started/setup-basics/configuring-project.mdx)).
- Use **assertions** extensively to validate your code behavior ([Assertions Guide](../guides/getting-started/assertions-guide)).
- Start integrating mocks for complex dependencies ([Introduction to Mocking](../guides/mocking-advanced-testing/intro-mocking)).


---

### Additional Resources

- [GoogleTest Primer](../docs/primer.md) – Learn foundational test writing concepts.
- [Installation Instructions](../docs/setup-basics/installation.mdx) – Ensure your environment is ready.
- [Mocking Reference](../docs/reference/mocking.md) – Detailed description of mocking macros and classes.
- [GoogleMock for Dummies](../docs/gmock_for_dummies.md) – Beginner-friendly mocking tutorial.

---