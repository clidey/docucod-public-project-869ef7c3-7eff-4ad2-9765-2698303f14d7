---
title: "Writing Your First Test"
description: "Guides users through creating and running a minimal test case. Demystifies test structure and showcases main GoogleTest macros, so users can confidently start testing their code immediately."
---

# Writing Your First Test

This guide takes you step-by-step through creating and running your very first test using GoogleTest. You will learn the basic test structure and meet the main GoogleTest macros, empowering you to confidently start testing your C++ code immediately.

---

## 1. Understanding the Test Structure

A test in GoogleTest is composed of:

- **Test Suite Name**: A group name that logically organizes related tests.
- **Test Name**: The individual test’s identifier within a test suite.
- **Test Body**: The code block containing the actual test logic and assertions.

GoogleTest uses **macros** to define your tests, simplifying syntax and infrastructure behind the scenes.

### Basic Test Declaration

The most straightforward way to declare a test is using the `TEST` macro:

```cpp
TEST(TestSuiteName, TestName) {
  ... test code and assertions ...
}
```

**Important:**

- Both `TestSuiteName` and `TestName` must be valid C++ identifiers (letters, numbers, no underscores).
- Tests with the same individual name can exist in different test suites.
- The statements inside the braces form your test logic.

For example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

This test belongs to the suite `FactorialTest` and checks the factorial of zero.

---

## 2. Writing and Running Your First Minimal Test

Follow these steps to write and execute your first GoogleTest.

### Step 1: Include GoogleTest Header

Add the required include at the top of your test source file:

```cpp
#include <gtest/gtest.h>
```

This header grants you access to all GoogleTest functionality.


### Step 2: Define a Simple Test

Write a minimal test to verify a simple condition; for example, that 7 times 6 equals 42:

```cpp
TEST(HelloTest, BasicAssertions) {
  EXPECT_EQ(7 * 6, 42);
  EXPECT_STRNE("hello", "world");
}
```

Here,
- `EXPECT_EQ` asserts equality.
- `EXPECT_STRNE` asserts inequality between two C strings.

Tests fail if any of their assertions fail.

### Step 3: Write Your `main` Function

A typical test program requires a `main` function to initialize and run all tests:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

* `InitGoogleTest` prepares GoogleTest, parsing command-line flags.
* `RUN_ALL_TESTS` runs all tests and returns 0 on success, 1 if any test fails.

### Step 4: Build and Run Your Test

Compile your source file with a C++17-compatible compiler, linking with the GoogleTest library.

After building:

- Execute the test binary.
- You should see output indicating tests that passed or failed.

For example:

```shell
$ ./hello_test
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

Congratulations! You have successfully run your first GoogleTest test.

---

## 3. Core GoogleTest Macros Explained

Get to know the main macros you’ll use as a GoogleTest user.

### TEST

Defines an independent test.

```cpp
TEST(TestSuiteName, TestName) {
  ... test code ...
}
```

Used for simple cases with no shared setup.

### TEST_F

Defines a **test fixture** test, which can access shared data and setup:

```cpp
class MyTestFixture : public testing::Test {
  // shared setup ...
};

TEST_F(MyTestFixture, Test1) {
  ... test code using fixture ...
}
```

Use `TEST_F` when you want multiple tests sharing common set up/tear down.

### Assertions

Inside tests you use assertion macros to verify conditions.

Some key assertions:

| Macro          | Description                           |
|----------------|-----------------------------------|
| `EXPECT_EQ(a,b)` | Checks if `a == b`; non-fatal failure |
| `ASSERT_EQ(a,b)` | Checks if `a == b`; fatal failure (aborts test) |
| `EXPECT_TRUE(cond)` | Checks if `cond` is true (non-fatal) |
| `ASSERT_TRUE(cond)` | Checks if `cond` is true (fatal) |

Use `ASSERT_` when further execution doesn't make sense if the assertion fails.

---

## 4. Best Practices for Your First Test

- **Choose meaningful test suite and test names** that describe what behavior you are testing.
- **Avoid underscores** in names; GoogleTest reserves them and may cause conflicts.
- **Keep tests small and focused** so failures clearly indicate the root cause.
- Use **`EXPECT_*` for checks where test execution can continue** and **`ASSERT_*` where failure should abort the test early**.
- Add **custom messages** to assertions to display context on failure:

```cpp
EXPECT_EQ(result, expected) << "Failed for input " << input_value;
```

- Use **test fixtures (`TEST_F`)** when multiple tests require common setup.

---

## 5. Troubleshooting Common Issues

<AccordionGroup title="Common Problems Writing Your First Test">
<Accordion title="Test Fails to Compile: No Default Constructor">
If you get errors like "no matching function for call to 'TestFixture::TestFixture'", ensure your test fixture class has a default constructor, as GoogleTest requires it to create test objects.
</Accordion>
<Accordion title="Tests Not Running">
Make sure you call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()` in your `main`.
Also, check you don't have filtering flags set that exclude your test.
</Accordion>
<Accordion title="Failure Messages Missing Details">
Use assertions from GoogleTest (e.g., `EXPECT_EQ`) instead of generic checks.
Add custom failure messages using streaming with `<<` for clarity.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

After writing and running your first test:

- Explore test fixtures and `TEST_F` for shared setup.
- Learn about value-parameterized tests with `TEST_P` to run the same test logic over multiple inputs.
- Check out the [GoogleTest Primer](../../primer.md) for a beginner-friendly deep dive.
- Review the [Assertions Reference](../../reference/assertions.md) to learn all assertion macros.
- Look into [Samples](../../samples.md) for hands-on example tests.

---

## References

- [GoogleTest Primer](../primer.md) – Learn more about writing tests
- [Assertions Reference](../reference/assertions.md) – All assertions explained
- [Test Macros and Fixtures](../reference/testing.md#TEST) – Comprehensive macro list
- [Samples](../samples.md) – Practical test examples

---

## Example: Minimal Test Program

```cpp
#include <gtest/gtest.h>

// A simple function to test.
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this to confirm that your GoogleTest setup works and you can write tests.
