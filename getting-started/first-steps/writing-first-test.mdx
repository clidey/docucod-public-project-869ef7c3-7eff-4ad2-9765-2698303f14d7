---
title: "Writing and Building Your First Test"
description: "Guides users in creating a minimal C++ test using GoogleTest, explaining main concepts such as TEST macros, assertions, and necessary includes. Offers skeleton code and advice on directory structure."
---

# Writing and Building Your First Test

Learn how to create a minimal C++ test using GoogleTest by understanding the essentials of the `TEST` macros, assertions, and the required includes. This guide provides skeleton code and practical advice on organizing your test source files effectively.

---

## 1. Understanding the Core Concepts

Before you write your first test, grasp the fundamentals:

- **TEST Macro**: Defines an individual test function within a named test suite.
- **Assertions**: Statements like `EXPECT_EQ` check the behavior of your code and determine test success or failure.
- **Includes**: Your test source must include the GoogleTest header for access to framework macros and utilities.

These core concepts form the foundation for any GoogleTest-based test program.

<Tip>
Test suites group logically related tests, while an individual test verifies a particular behavior or condition.
</Tip>

---

## 2. Prepare Your Test File

To write your first test, create a C++ source file (e.g., `my_first_test.cc`) and follow these steps:

### Step 1: Include the GoogleTest Header

Start your file with:

```cpp
#include <gtest/gtest.h>
```

This gives you access to all the testing macros and asserts.

### Step 2: Write a Simple Test Using the `TEST` Macro

A basic test looks like this:

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code goes here.
  EXPECT_EQ(1 + 1, 2);
}
```

- `TestSuiteName` groups related tests.
- `TestName` is this individual test's name.
- Avoid underscores (`_`) in both names to prevent naming conflicts.

### Step 3: Add `main()` Function to Run Tests

If you are not linking with `gtest_main`, add this main function at the end:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

`InitGoogleTest` initializes the framework and parses any command-line flags. `RUN_ALL_TESTS()` runs all tests and returns `0` if successful.

<Note>
You rarely need to write your own main function if you link against `gtest_main`.
</Note>

---

## 3. Sample Minimal Test File

Here is a consolidated minimal example:

```cpp
#include <gtest/gtest.h>

// Verify that 1 + 1 is equal to 2.
TEST(SimpleMathTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Explanation:
- The file defines a test suite `SimpleMathTest` containing a single test `Addition`.
- The assertion `EXPECT_EQ` checks that the expression `1 + 1` equals `2`.
- The main function initializes and triggers test execution.

---

## 4. Organizing Your Tests

To keep your project maintainable and buildable:

- **File Location**: Put your test source files under a dedicated `tests` or `unittest` directory.
- **Naming**: Name files with `_test.cc` suffix (e.g., `math_test.cc`) to indicate they contain tests.
- **Separate Concerns**: Group tests by functionality or module for clarity.

<Tip>
Stick to simple, descriptive test suite and test names that map clearly to the code you test.
</Tip>

---

## 5. Additional Tips and Best Practices

- Use `EXPECT_*` assertions for warnings that don't stop test execution; use `ASSERT_*` when failure means the test cannot continue.
- Avoid underscores in test and suite names to prevent macro naming conflicts (see FAQ for details).
- Run the tests frequently as you write them to detect regressions early.
- Link against `gtest_main` if you don't need a custom main function.

---

## 6. Troubleshooting Common Issues

- **Linker errors about missing `main`**: Make sure either your test file has a main using `RUN_ALL_TESTS()` or link with `gtest_main`.
- **Tests not discovered or run**: Confirm test names do not use underscores and that tests are properly registered via `TEST` or `TEST_F` macros.
- **Compilation errors about missing includes**: Verify that `#include <gtest/gtest.h>` is present.

<Warning>
Ignoring the return value of `RUN_ALL_TESTS()` leads to tests always passing. Always return this value from main.
</Warning>

---

## 7. Next Steps

Once your first test builds and runs successfully:

- Explore writing multiple tests in the same test suite.
- Learn to use test fixtures with `TEST_F` for shared setup.
- Try out assertions beyond `EXPECT_EQ` such as `EXPECT_TRUE`, `EXPECT_THROW`, and others.
- Read the [Running and Interpreting Test Results](running-tests) guide to analyze outputs.
- Check the [Configuration and Environment Setup](initial-configuration) page to optimize your build.

---

## Useful Links

- [GoogleTest Primer](primer.md): Core testing concepts.
- [Assertions and Predicate Macros](assertions-and-predicates): Learn all assertion macros.
- [Why Avoid Underscores in Test Names](faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore): Important naming guidelines.
- [Setting Up Your Test Project](setup_project): Organize tests efficiently.

---

##### Quick Validation Checklist

- Your test source file includes `<gtest/gtest.h>`.
- Test suites and test names have no underscores.
- You call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()`.
- The executable runs and reports test results with `[ RUN ]`, `[ OK ]`, or `[ FAILED ]` messages.

With this foundation, you are now ready to create robust C++ tests using GoogleTest.

---

# References

- [`TEST` macro](reference/testing.md#TEST)
- [`EXPECT_EQ` and other assertions](reference/assertions.md)
- [GoogleTest Primer](primer.md)
- [Running and Interpreting Test Results](running-tests)

---

*This guide is part of the Getting Started documentation to help you write and build your first GoogleTest C++ test efficiently.*