---
title: "Writing Your First Test"
description: "Demonstrates creating a simple test case using GoogleTest syntax. Includes code snippets with main function, test suite, and basic assertions to help users experience quick success and visualize end-to-end workflow."
---

# Writing Your First Test

Welcome to the first hands-on step with GoogleTest! This guide demonstrates how to write a simple test case using GoogleTest syntax. By following these steps, you'll quickly create, run, and validate your first test, helping you understand the end-to-end workflow from code to test result.

---

## 1. Understanding the Basic Test Structure

GoogleTest organizes tests into test suites and individual tests:

- **Test Suite**: A group of related tests, identified by a name.
- **Test**: An individual test case inside a test suite.

The primary macro to define a simple test is `TEST(TestSuiteName, TestName)`. Each test is a normal function where you use assertions to evaluate code behavior.

### Syntax Overview

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code and assertions go here.
}
```

- Both `TestSuiteName` and `TestName` must be valid C++ identifiers without underscores.
- The function body contains code and GoogleTest assertions.

---

## 2. Writing Your First Test

Let's write a test for a simple function. Suppose you have the following function:

```cpp
int Factorial(int n);
```

Here's how you can write your first test to verify the factorial of 0:

```cpp
#include <gtest/gtest.h>  // Include GoogleTest headers

// Test factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### Explanation:

- The test suite is named `FactorialTest`.
- The test case is `HandlesZeroInput`.
- `EXPECT_EQ` asserts that the returned factorial value is exactly 1.
- If the assertion fails, GoogleTest reports the location and the expected vs actual values.

---

## 3. Writing Additional Tests in the Same Suite

You can add more test cases in the same suite to cover other inputs:

```cpp
// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

This groups related tests logically, making them easier to maintain and understand.

---

## 4. Creating a Complete Main Function

GoogleTest provides a default main function if you link with `gtest_main`, but if you want to provide your own or customize, here’s the standard boilerplate:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);  // Initialize GoogleTest
  return RUN_ALL_TESTS();  // Run all tests and return the appropriate code
}
```

### Key Points:

- Call `InitGoogleTest()` before running any tests to parse command-line flags.
- `RUN_ALL_TESTS()` runs every test defined with `TEST` and returns 0 on success.
- Do not ignore the return value; it determines test success.

---

## 5. Running Your Tests

Once compiled, run the test executable. You should see output similar to:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

When a test fails, GoogleTest reports failure details with file, line number, and mismatched values.

---

## 6. Basic Assertions

GoogleTest provides many assertion macros, but the most common for simple tests are:

- `EXPECT_EQ(val1, val2)`: Passes if `val1 == val2`.
- `EXPECT_TRUE(condition)`: Passes if `condition` is true.
- `ASSERT_NE(ptr, nullptr)`: Passes if pointer `ptr` is not null. (Use `ASSERT_` to abort test on failure.)

**Example:**

```cpp
TEST(SampleTest, SimpleCheck) {
  int* p = nullptr;
  ASSERT_EQ(p, nullptr) << "Pointer should be null";
  EXPECT_TRUE(2 + 2 == 4);
}
```

Use `EXPECT_` when you want the test to continue after failure and `ASSERT_` when continuing doesn’t make sense.

---

## 7. Tips and Best Practices

- **Name tests and suites descriptively.** Clear names help identify purpose.
- **Avoid underscores in test/suite names.** GoogleTest reserves `_` for internal use.
- **Use `EXPECT_` assertions for multiple checks** in one test to see all failures.
- **Use `ASSERT_` to protect critical assumptions** that make further checks invalid if failed.
- **Group related tests into suites** to organize your test program logically.

---

## 8. Example: Full Sample Test File

```cpp
#include <gtest/gtest.h>

// Simple factorial function for demonstration.
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test factorial of positive integers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Save and compile this with GoogleTest properly linked, then run the executable to see your tests execute.

---

## 9. Troubleshooting Common Issues

- **Tests not running:** Ensure you called `InitGoogleTest()` before `RUN_ALL_TESTS()`. Check naming conventions.
- **Compiler errors on `TEST` macros:** Both test suite and test names must be valid C++ identifiers without underscores.
- **Assertion messages unclear:** Use streaming (`<<`) to append custom failure messages.
- **Tests not found or linked:** Make sure tests are included in your build and the executable.

---

By following this guide, you'll gain quick confidence with GoogleTest’s simple and powerful testing syntax. Next steps include exploring more advanced assertions and test fixtures for organizing complex tests.

---

## Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — For foundational concepts
- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md) — Detailed assertion macros
- [Building and Running Tests](https://github.com/google/googletest/blob/main/docs/getting-started/first-run-validation/run-and-validate.md) — Guide to compile and execute your tests

Happy testing with GoogleTest!
