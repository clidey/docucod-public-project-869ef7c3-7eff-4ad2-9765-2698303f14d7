---
title: "Create and Build Your First Test"
description: "Introduces the step-by-step process to write, build, and execute a minimal example test using GoogleTest. Covers both CMake and Bazel scenarios, so users can copy and adapt the workflow to their setup and immediately validate their installation."
---

# Create and Build Your First Test

Welcome to your first hands-on experience with GoogleTest. This guide walks you through writing, building, and running a minimal example test using GoogleTest, so you can verify your installation and quickly get a feel for writing C++ tests. We cover both CMake and Bazel build systems scenarios to fit common workflows.

---

## 1. Write Your First Test Source File

Create a C++ source file named `sample_test.cpp` containing the minimal GoogleTest example below.

```cpp
#include <gtest/gtest.h>

// Simple test case named SampleTest and test named BasicTest
TEST(SampleTest, BasicTest) {
  // Expect 7 multiplied by 6 to equal 42
  EXPECT_EQ(7 * 6, 42);
}
```

### What This Does:
- Defines a test suite `SampleTest` with a single test `BasicTest`.
- Uses `EXPECT_EQ` assertion macro to verify the expression `7 * 6 == 42`.
- If the assertion fails, GoogleTest prints an informative error message.

<Tip>Ensure this file is saved with `.cpp` extension and is placed in the root of your test directory.</Tip>

---

## 2. Building Your Test

Depending on your setup, follow the instructions below to build the test executable.

### 2.1 Using CMake

#### Step 1: Prepare `CMakeLists.txt`
Create a `CMakeLists.txt` in your project root as follows:

```cmake
cmake_minimum_required(VERSION 3.14)
project(SampleTestProject)

# Enable C++17 standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Locate the GoogleTest package (requires GoogleTest installed or added)
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

# Build the executable
add_executable(sample_test sample_test.cpp)

# Link against GTest libraries and pthread
target_link_libraries(sample_test GTest::gtest GTest::gtest_main pthread)

# Enable testing and register the test executable
enable_testing()
add_test(NAME SampleTest COMMAND sample_test)
```

#### Step 2: Build

```bash
mkdir build && cd build
cmake ..
cmake --build .
```

#### Step 3: Verify Build

Make sure the `sample_test` executable is created in `build` directory.

### 2.2 Using Bazel

If you use Bazel, add the following simple `BUILD` file alongside your test source:

```starlark
cc_test(
    name = "sample_test",
    srcs = ["sample_test.cpp"],
    deps = ["@com_google_googletest//:gtest_main"],
    copts = ["-std=c++17"],
)
```

Then build and run:

```bash
bazel build //:sample_test
```

---

## 3. Run Your First Test

Execute the built test binary:

```bash
./sample_test
```

You should see output like:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicTest
[       OK ] SampleTest.BasicTest (0 ms)
[----------] 1 test from SampleTest ran. (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Successful Outcome:
- The test ran and passed with no failures.
- GoogleTest's summary lists tests run and their status.

<Tip>On Windows, execute `sample_test.exe` instead.</Tip>

---

## 4. Understanding the Test Code

- `#include <gtest/gtest.h>` brings in GoogleTest macros and functionality.
- `TEST(SuiteName, TestName)` defines a test function categorized under the test suite.
- `EXPECT_EQ(expected, actual)` checks equality. If false, logs the failure but continues.

<Tip>Use `ASSERT_*` macros if failure should abort the test immediately.</Tip>

---

## 5. Adapting the Example

- Modify `sample_test.cpp` to test your own functions.
- Use `EXPECT_*` macros to check various conditions.
- For more comprehensive testing, consider using [test fixtures](../primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests).

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Your First Test Build and Run">
<Accordion title="GoogleTest not found by CMake">
Make sure GoogleTest is installed and `find_package(GTest REQUIRED)` can locate it. Consider adding GoogleTest via submodule or install it system-wide.
</Accordion>
<Accordion title="Linker errors related to pthread or gtest">
On Linux/macOS, link with `pthread` by adding `pthread` to `target_link_libraries`. In case of version mismatches, check compiler compatibility.
</Accordion>
<Accordion title="Test executable runs but no tests are found">
Verify that your test source defines tests using `TEST` macros and that the test binary is built with GoogleTest linked.
</Accordion>
<Accordion title="Test failures with cryptic messages">
Add custom failure messages using streaming to assertions, e.g., `EXPECT_EQ(x, y) << "x did not match y";` to aid debugging.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Explore writing tests with fixtures using `TEST_F`.
- Learn about different assertions from the [Assertions Reference](../reference/assertions.md).
- Dive deeper into managing test suites and parametrized tests in the Guides section.
- Check out the [GoogleTest Primer](../primer.md) for a comprehensive introduction.
- If you use mocks, explore [gMock for Dummies](../gmock_for_dummies.md) to get started with mocks.

---

## Summary

You have now learned how to write, build, and run your first GoogleTest C++ test. Following the steps allows immediate verification of your setup, and gives you a minimal example to extend for your own test development. Whether you use CMake or Bazel, the workflow is clear and adaptable.


---

*Happy testing with GoogleTest!*