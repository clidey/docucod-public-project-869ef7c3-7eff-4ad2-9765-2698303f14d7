---
title: "Troubleshooting Setup Issues"
description: "Offers quick diagnostics for common Getting Started challengesâ€”build errors, missing dependencies, path problems, and incorrect configuration. Outlines steps to resolve typical setup failures and provides pointers to deeper support resources."
---

# Troubleshooting Setup Issues

This guide helps you quickly diagnose and resolve common setup problems encountered when installing and using GoogleTest and GoogleMock. Whether you face build errors, missing dependencies, path issues, or configuration mistakes, follow these practical steps to get back on track and run your first tests successfully.

---

## 1. Common Setup Problems and How to Fix Them

### Build Failures
- **Symptom:** Compilation errors, undefined symbols, or linking failures.
- **Resolution:**
  1. Verify that you are using a compiler supporting C++17 or later. GoogleTest requires this.
  2. Ensure all dependencies, including GoogleMock (if used), are correctly downloaded and included.
  3. Check your build system configuration (CMake or Bazel) for correct paths and settings.
  4. If using CMake, confirm you have run `cmake ..` correctly and that your build environment matches platform expectations.

#### Tip
In Visual Studio, the mismatch of dynamic and static runtimes is a frequent cause of linking errors. Enable the option `gtest_force_shared_crt` in CMake to align runtimes.

### Missing Headers or Libraries
- **Symptom:** Errors like `gtest/gtest.h` or `gmock/gmock.h` not found.
- **Resolution:**
  1. Confirm you have cloned the GoogleTest repository completely and the include directories are added to your project.
  2. If building as part of another project, verify the `include` paths and linkage.
  3. Use the `add_subdirectory(googletest)` CMake command correctly if embedding.

### Path and Environment Issues
- **Symptom:** Build tools do not find your source files or libraries at expected paths.
- **Resolution:**
  1. In CMake projects, ensure you run `cmake` from the proper directory and your relative paths resolve correctly.
  2. On Windows, pay attention to potential Unicode path issues and prefer paths without spaces.
  3. For custom builds, verify environment variables like `PATH` and any build-specific variables are set correctly.

### Incorrect Flag Usage
- **Symptom:** GoogleMock flags like `--gmock_verbose` have no effect or cause errors.
- **Resolution:**
  1. Initialize GoogleMock correctly by calling `testing::InitGoogleMock(&argc, argv);` in your `main()`.
  2. Flags must be well-formed, e.g., `--gmock_verbose=info`. Misspellings or missing `=` signs cause flags to be ignored.
  3. Ensure flags are passed before calling `RUN_ALL_TESTS()`.

### Test Executable Does Not Run Tests
- **Symptom:** Running your test binary outputs "Running main() from gmock_main.cc" but reports no tests.
- **Resolution:**
  1. Use `TEST()` or `TEST_F()` macros correctly to define tests.
  2. Verify that your test files are included in the build and linked.
  3. Confirm you call `RUN_ALL_TESTS()` and return its result in your `main()`.

---

## 2. Step-by-Step Diagnostic Checklist

Follow these steps sequentially to isolate and resolve setup problems.

<Steps>
<Step title="Confirm Compiler and Environment Compatibility">
  Make sure your toolchain supports C++17 and that your platform is supported (Linux, Windows, Mac). Use `g++ --version`, `clang --version`, or MSVC info.
</Step>
<Step title="Verify Repository Clone">
  Confirm that you have cloned the full GoogleTest repository with `git clone https://github.com/google/googletest.git`.
</Step>
<Step title="Check Build System Setup">
  For CMake:
  ```bash
  cd googletest
  mkdir build
  cd build
  cmake ..
  make
  ```
  Look for any errors during these commands.
</Step>
<Step title="Inspect Include Paths">
  Ensure your project or test program includes the proper headers:
  ```cpp
  #include <gtest/gtest.h>
  #include <gmock/gmock.h> // only if using mocking
  ```
  Missing headers indicate a path setup issue.
</Step>
<Step title="Initialize GoogleMock Properly">
  Your `main()` function must initialize Google Mock and Google Test together:
  ```cpp
  int main(int argc, char** argv) {
    testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
  }
  ```
</Step>
<Step title="Check Command Line Flags">
  When passing GoogleMock flags:
  - Use the format `--gmock_verbose=info`
  - Place flags before running the tests
  - Verify that after initialization, flags like verbose are set correctly
</Step>
<Step title="Build and Run a Sample Test">
  Create a simple test in your test program:
  ```cpp
  TEST(SimpleTest, AlwaysPasses) {
    EXPECT_EQ(1, 1);
  }
  ```
  Build and run. You should see output indicating the test runs and succeeds.
</Step>
</Steps>

---

## 3. Troubleshooting Common Errors

### Error: Undefined reference to GoogleMock or GoogleTest symbols
- Cause: Libraries not linked correctly.
- Fix: Link `gtest` and `gmock` libraries explicitly in your build configuration.

### Error: Flag not recognized or ignored
- Cause: Flags passed incorrectly or GoogleMock not initialized.
- Fix: Confirm the flag syntax and call `InitGoogleMock` before `RUN_ALL_TESTS`.

### Warning: Tests not discovered or executed
- Cause: Tests macros not used or test source files excluded from build.
- Fix: Use `TEST`/`TEST_F` properly and add test files to your build.

### Build fails with runtime library mismatch on Windows
- Cause: GoogleTest and your project use different C runtime linkage.
- Fix: Use the `gtest_force_shared_crt` CMake option:
  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```

---

## 4. Additional Resources and Support

- **Official GoogleTest Repo:** [https://github.com/google/googletest](https://github.com/google/googletest)
- **GoogleTest Primer:** /docs/primer.md - Detailed introduction with examples
- **gMock for Dummies:** [https://google.github.io/googletest/gmock_for_dummies.html](https://google.github.io/googletest/gmock_for_dummies.html)
- **Building with CMake:** /getting-started/installation-config/installing-cmake
- **Writing Your First Test:** /getting-started/first-run-validation/write-first-test
- **Running and Validating Tests:** /getting-started/first-run-validation/run-and-validate
- **Common Setup FAQs:** /faq/getting_started/setup-troubleshooting

---

<Tip>
When facing any setup issues, start simple. Create a minimal test file and build only GoogleTest and GoogleMock targets first. This isolates problems from your project's specific build system.
</Tip>

<Note>
Always keep your GoogleTest repository up to date, as fixes and improved platform support are regularly added.
</Note>

<Warning>
Do not modify GoogleTest or GoogleMock source files unless you understand the changes you make. Customized builds can cause subtle failures.
</Warning>

---

By following these diagnostic steps and tips, you'll resolve most setup challenges quickly and get to the core value of writing and running reliable C++ tests with GoogleTest and GoogleMock.


---

## Appendix: Example Minimal main.cc for Testing Setup

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

TEST(SampleTest, SimpleCheck) {
  EXPECT_EQ(42, 42);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this program after following the standard build steps to verify the setup.


---

<Source url="https://github.com/google/googletest" paths={[{"path": "googletest/README.md", "range": "1-95"},{"path": "googlemock/src/gmock.cc", "range": "1-153"},{"path": "googlemock/src/gmock_main.cc", "range": "1-74"}]} />
