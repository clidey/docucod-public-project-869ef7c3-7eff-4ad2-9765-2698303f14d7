---
title: "Writing Your First Test"
description: "Experience how intuitive it is to write a basic unit test using GoogleTest. This page covers essential test case creation, assertion use, and compiling/running simple tests to validate your installation and see real output."
---

# Writing Your First Test

Welcome to your first hands-on experience writing a simple unit test with GoogleTest. This guide will take you step-by-step through creating an essential test case, using assertions for validation, and compiling and running your test to verify your setup works correctly. By the end, you'll see tangible test output demonstrating your test execution.

---

## 1. Understanding the Basics of a GoogleTest Unit Test

At its core, a unit test written with GoogleTest is a C++ function marked by a test macro. Each test validates a small piece of logic—typically a function or method call—and uses assertions to verify expected results.

### Key Concepts:
- **Test Case Name**: Groups related tests together logically.
- **Test Name**: Describes the specific behavior being tested.
- **Assertions**: Macros like `EXPECT_EQ()` or `ASSERT_TRUE()` that confirm expected outcomes.

GoogleTest automatically discovers tests named using these macros and runs them, reporting success or failure.

<Note>
Before starting, ensure you have GoogleTest and GoogleMock installed and properly configured as described in the [Installation Guide](/getting-started/setup-requirements-installation/installing-googletest).
</Note>

---

## 2. Writing Your First Test Case

Let's write a test that simply verifies that addition works as expected. Follow these steps:

<Steps>
<Step title="Create a test source file">
Open your favorite editor and create a new file named `sample_test.cc`.
</Step>

<Step title="Include GoogleTest header">
At the top, include the GoogleTest header to access the testing framework:

```cpp
#include <gtest/gtest.h>
```
</Step>

<Step title="Define your test">
Write the test function using the `TEST` macro:

```cpp
// Test case name: MathTest
// Test name: Addition
TEST(MathTest, Addition) {
  // Assert that 2 + 2 equals 4
  EXPECT_EQ(2 + 2, 4);
}
```

This sets an expectation that the expression `2 + 2` equals `4`. If the assertion fails, GoogleTest will report it.
</Step>

<Step title="Save the file">
Save your file to ensure it is ready for compilation.
</Step>
</Steps>

<Info>
**Tip:** The `EXPECT_EQ` macro generates a non-fatal failure if the condition is false, allowing the test to continue. Use `ASSERT_EQ` if you want to abort the test immediately on failure.
</Info>

---

## 3. Compiling Your Test

To validate your test, compile it with GoogleTest libraries. Assuming you have CMake configured for GoogleTest, a common compilation command looks like this:

```bash
# Assuming GoogleTest is installed or built and available
# Adjust include and library paths as necessary

clang++ -std=c++17 -pthread \
  sample_test.cc \
  -lgtest -lgtest_main -lgmock \
  -o sample_test
```

- `-std=c++17` is required since GoogleTest uses C++17 features.
- `-pthread` ensures threading support.

If you installed GoogleTest via package managers, the libraries might be automatically found. Otherwise, you may need to specify full paths.

<Warning>
Compilation errors often result from missing `-pthread`, incorrect include paths, or mismatched runtime libraries, especially on Windows. Refer to the [Installation Guide](/getting-started/setup-requirements-installation/installing-googletest#common-pitfalls) for platform-specific advice.
</Warning>

---

## 4. Running Your Test

Once compiled, run your test executable:

```bash
./sample_test
```

Expected output:

```output
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from MathTest
[ RUN      ] MathTest.Addition
[       OK ] MathTest.Addition (0 ms)
[----------] 1 test from MathTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms your test was discovered, executed, and passed.

<Check>
If the output says `0 tests ran` or your test isn’t detected, verify:
- You compiled with the proper GoogleTest libraries.
- Your test function uses the `TEST` macro correctly.
- The executable is the one you built.
</Check>

---

## 5. More Realistic Example: Testing a Function

Suppose you have a simple function:

```cpp
int Add(int a, int b) {
  return a + b;
}
```

Create a test to verify this:

```cpp
#include <gtest/gtest.h>

int Add(int a, int b);

TEST(MathTest, AddFunction) {
  EXPECT_EQ(Add(2, 3), 5);
  EXPECT_EQ(Add(-1, 1), 0);
  EXPECT_EQ(Add(0, 0), 0);
}
```

Compile and run this similar to the previous instructions.

---

## 6. Interpretation of Test Output

- **[ RUN      ]** indicates the start of a test.
- **[       OK ]** means the test passed.
- **[  FAILED  ]** would mean a test failed with information printed about the cause.
- Final summary shows the total tests run and results.

This feedback loop lets you iterate rapidly, adding tests and validations.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Issues When Writing Your First Test">
<Accordion title="Tests Not Being Detected">
- Ensure that your test functions are declared using the `TEST` macro.
- Check your executable is linked against GoogleTest's main entry point (`-lgtest_main`).
- Verify the library and include paths are correct.
</Accordion>
<Accordion title="Linker Errors Related to GoogleTest">
- Confirm that you linked `-lgtest` and `-lgmock` correctly.
- On Windows, verify your runtime library settings match those of GoogleTest.
- Use CMake or the provided build tooling to ease correct linkage.
</Accordion>
<Accordion title="Runtime Errors or Crashes">
- Validate your compiler supports C++17.
- Ensure thread support is enabled (`-pthread` on Linux/macOS).
- If using mocks, confirm the mock class destructor is virtual.
</Accordion>
</AccordionGroup>

---

## Additional Resources

For deeper dives into writing tests, assertions, and using GoogleMock:

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Learn mocking basics.
- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — Explore advanced mocking patterns.
- [Installation Guide](/getting-started/setup-requirements-installation/installing-googletest) — Step-by-step setup.
- [Writing Your First Unit Test Guide](/guides/getting-started/writing-first-test) — Expanded development walkthrough.

---

You're now ready to create and run your initial unit tests with GoogleTest, validating both your environment and understanding. Enjoy building robust, maintainable tests!

---

<Source url="https://github.com/google/googletest" paths={[{"path":"docs/gmock_for_dummies.md", "range":"1-97"},{"path":"docs/gmock_cook_book.md", "range":"30-225"}]} />