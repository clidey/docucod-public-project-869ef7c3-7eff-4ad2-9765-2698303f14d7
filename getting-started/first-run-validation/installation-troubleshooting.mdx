---
title: "Troubleshooting Installation Issues"
description: "Address the most common setup and configuration problems users encounter. Quickly identify and resolve issues related to building, linking, or running tests, with actionable solutions and reference to key documentation."
---

# Troubleshooting Installation Issues

GoogleTest is a powerful C++ testing framework, but setting it up correctly can sometimes pose challenges. This guide helps you quickly identify and resolve the most common problems users encounter during setup, building, linking, or running tests for the first time. Whether you're building from source, integrating with your build system, or running your first test, these actionable steps and best practices will get you past typical hurdles.

---

## 1. Common Setup and Build Issues

### Problem: Build Fails or Cannot Find GoogleTest Headers
- **Cause:** Missing include paths or incorrect build configuration.
- **Solution:**
  1. Ensure you have installed GoogleTest properly, either by building it or including it as a submodule.
  2. Verify your compiler include paths include the directory containing `gtest/gtest.h` and `gmock/gmock.h` if using mocks.
  3. When using CMake, link against the `gtest` and/or `gmock` targets and include their directories automatically:

```cmake
find_package(GTest REQUIRED)
target_link_libraries(your_test_target GTest::gtest GTest::gtest_main)
```

- For manual or custom builds, explicitly add include paths in your build flags.

<Tip>
Check that your compiler commands reference the correct include directories. Missing `-I` flags cause these errors.
</Tip>

### Problem: Linker Errors Related to `main` Function
- **Cause:** Missing or incorrect linking to `gtest_main` or `gmock_main` libraries.
- **Explanation:**
  - GoogleTest provides `gtest_main` and GoogleMock provides `gmock_main`, libraries that implement a suitable `main()` function which initializes and runs all tests.
  - If you define your own `main()`, you must initialize GoogleTest properly and call `RUN_ALL_TESTS()`.

- **Solution:**
  - If you do *not* provide your own `main()`, link your test executable against `gtest_main` or `gmock_main`.
  - If you provide `main()`, ensure it follows this pattern:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- See the official [writing the main() function](../../getting-started/first-run-validation/writing-first-test.md#writing-the-main-function) guide for details.

<Note>
Linker errors mentioning `undefined reference to main` or similar usually indicate missing `gtest_main`/`gmock_main` linkage.
</Note>

### Problem: Build Errors on Windows with Unicode / TCHAR
- **Cause:** MSVC compiler has special requirements and bugs with Unicode builds.
- **Solution:**
  - Prefer using the standard `main` instead of `_tmain` for entry points as GoogleTest's `gmock_main.cc` handles this correctly.
  - Make sure to include proper headers and compile/link with consistent Unicode settings.

<Info>
Consult the [Supported Platforms & Dependencies](../../overview/integration-and-ecosystem/platforms-dependencies.md) page for platform-specific compiler notes.
</Info>

---

## 2. Linking and Library Mismatches

### Problem: Runtime Errors or Crashes Due to Library Mismatches
- **Cause:** Linking `gtest` or `gmock` built with different runtime or compiler settings than your tests.
- **Solution:**
  1. On Windows, ensure you match debug/release and runtime library settings (e.g., `/MD` vs `/MDd`) between your test code and GoogleTest libraries.
  2. When building GoogleTest yourself, use the same compiler and options as your project.
  3. Consider building GoogleTest as part of your project to avoid ABI incompatibility.

<Warning>
Mixing debug and release builds between the test executable and GoogleTest static libraries commonly leads to crashes.
</Warning>

---

## 3. Running Tests: Common Pitfalls

### Problem: No Tests Are Discovered or Run
- **Cause:** Tests are not linked correctly or not registered.
- **Solution:**
  - Confirm that your test source files include GoogleTest headers and use the `TEST()` or `TEST_F()` macros properly.
  - Ensure that your object files with tests are linked into the final test executable.
  - GoogleTest automatically detects tests via the macros, no manual test enumeration needed.
  - Make sure your `main()` function calls `RUN_ALL_TESTS()`.

### Problem: Tests Run, But Always Report Success Without Executing Tests
- **Cause:** Test fixtures or test suite code not constructed or initialized properly.
- **Solution:**
  - Verify your test source contains no macros mistakes (e.g., missing `TEST_F` or misspelled macro names).
  - Check for linker stripping behavior removing unused test objects.

### Problem: Test Binary Exits Immediately or Crashes on Startup
- **Cause:** Incorrect initialization or missing runtime dependencies.
- **Solution:**
  - Inspect your `main()` initialization code.
  - Ensure `testing::InitGoogleTest()` (or `testing::InitGoogleMock()` if using mocks) is called exactly once before running tests.

---

## 4. Actionable Debugging Steps

Follow these steps to troubleshoot your GoogleTest installation and initial test runs:

<Steps>
<Step title="Confirm Installation and Build">
- Verify you have successfully built or obtained GoogleTest libraries.
- For CMake, use `find_package(GTest REQUIRED)` and link to `GTest::gtest` and `GTest::gtest_main`.
- Check include paths and library paths in your build.
- If building manually, confirm the static or shared libs are produced and in your linker paths.
</Step>
<Step title="Validate Sample Tests">
- Add a minimal test to your test executable:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
}
```

- Build and run your test.
- The test should run and print:

```shell
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```
</Step>
<Step title="Check Linkage and Libraries">
- Make sure that linking includes `gtest_main` or you provide a correct `main()`.
- For GoogleMock, link `gmock_main` instead.
- Use verbose build output to confirm your linker command.
</Step>
<Step title="Run With Verbose Flags">
- Run your test binary with `--gtest_list_tests` to see recognized tests.
- Use `--gmock_verbose=info` for mock debugging if using mocks.
</Step>
</Steps>

---

## 5. Troubleshooting Common Errors

<AccordionGroup title="Common Error Messages and Troubleshooting">
<Accordion title="Undefined Reference to `main`">
This error occurs when your test binary does not have a proper `main()` function.

**Fix:** Link against `gtest_main` or `gmock_main`, or define your own `main()` as follows:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```
</Accordion>
<Accordion title="Cannot Find gtest/gtest.h or gmock/gmock.h">
This is a compiler error caused by missing include directories.

**Fix:**
- Add the include path to your compiler command, e.g. `-I/path/to/googletest/include`.
- When using CMake, link against GoogleTest to automatically add includes.

</Accordion>
<Accordion title="Linker Errors for gmock Libraries">
These typically mean you are not linking with `gmock` or linking incompatible versions.

**Fix:**
- Link `gmock` and `gmock_main` libraries explicitly.
- Rebuild GoogleMock if versions/compilers differ.
- Validate runtime library and compiler options match.
</Accordion>
<Accordion title="Tests Not Running / Empty Test Suite">
Occurs if tests are stripped out or not registered.

**Fix:**
- Confirm you use the `TEST` or `TEST_F` macros correctly.
- Check that test objects get linked into the binary.
- Avoid compiling with `-ffunction-sections -Wl,--gc-sections` without protecting test functions.
</Accordion>
</AccordionGroup>

---

## 6. Reference to Key Documentation

- [Installing GoogleTest](../../getting-started/setup-requirements-installation/installing-googletest.md): Step-by-step installation instructions.
- [Writing Your First Test](../../getting-started/first-run-validation/writing-first-test.md): Guide to writing a basic test.
- [Running Tests](../../getting-started/first-run-validation/running-tests.md): Building and executing tests.
- [Initial Configuration](../../getting-started/setup-requirements-installation/initial-configuration.md): Setting up your project with GoogleTest and GoogleMock.

---

## 7. Additional Tips and Best Practices

- Use `gtest_main` or `gmock_main` libraries to avoid writing boilerplate code.
- Always initialize GoogleTest or GoogleMock once in your `main()` via `InitGoogleTest` or `InitGoogleMock`.
- When using mocks, run tests with `--gmock_verbose=info` to diagnose call mismatches.
- Match your build environment and compiler flags between GoogleTest/GoogleMock and your tests.
- Enable debug symbols during development for better diagnosis.

<Tip>
If you still encounter problems, consult the [FAQ on Installation and Compatibility](../../faq/getting-started-faq/installation-compatibility.md) and community support channels.
</Tip>