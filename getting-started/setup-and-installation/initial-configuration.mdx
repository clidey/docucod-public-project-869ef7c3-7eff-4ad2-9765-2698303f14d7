---
title: "Initial Configuration and Integration"
description: "Guides users through first-time configuration steps after installation, such as integrating include files, verifying successful linking, and confirming proper discovery of the testing framework within their build system."
---

# Initial Configuration and Integration

This guide walks you through the crucial first-time configuration and integration steps after successfully installing GoogleTest and GoogleMock. You will learn how to integrate the necessary include files, verify that linking works correctly, and confirm that your build system properly discovers and uses the testing framework.

---

## 1. Preparing Your Build Environment

Before you integrate GoogleTest into your project, ensure you've completed the installation step outlined in the [Installation Instructions by Platform](../getting-started/setup-and-installation/installation-platforms).

<Check>
- Confirm that GoogleTest source files or compiled libraries are correctly located within your build environment.
- Ensure your compiler and build tools support C++17 or newer, as required by GoogleTest.
</Check>

---

## 2. Integrating Include Files

GoogleTest (and GoogleMock) headers must be included properly in your test source files to define and use testing constructs.

### Action Steps:

1. Add the following include directives at the top of your test source file:

   ```cpp
   #include <gtest/gtest.h>
   #include <gmock/gmock.h>  // Only if you plan to use mock classes
   ```

2. Confirm that your compiler's include search paths (`-I` flags) include the directories where GoogleTest and GoogleMock header files reside.

<Tip>
Most installations place `gtest` and `gmock` folders inside an `include` directory. Ensure your build system points to the root path so headers like `gtest/gtest.h` can be found correctly.
</Tip>

---

## 3. Linking Verification

Linking ensures your test binaries correctly connect with GoogleTest and GoogleMock libraries.

### Linking Setup:

- **Static Linking**: Add `libgtest.a` and `libgmock.a` (or their platform-specific variants) to your linker inputs.
- **Shared Linking**: Link against `libgtest.so` and `libgmock.so` if dynamically installed.

### Action Steps:

1. Adjust your build configuration (e.g., CMakeLists, Bazel, Makefile) to link the above libraries.

2. Build your test executable.

3. If using CMake, a sample snippet:

   ```cmake
   find_package(GTest REQUIRED)
   
   add_executable(my_tests test_main.cpp)
   target_link_libraries(my_tests GTest::gtest GTest::gmock GTest::gmock_main pthread)
   ```

4. Verify linker runs successfully without missing symbols related to GoogleTest or GoogleMock.

<Warning>
Link errors typically indicate missing or misconfigured library paths. Double-check your build system's library search paths and the presence of compiled GoogleTest objects.
</Warning>

---

## 4. Confirming Testing Framework Discovery in Your Build System

Your build system must correctly discover and recognize GoogleTest to enable test execution and management.

### Verification Steps:

1. **Test Discovery**: Run your build system's test discovery command (e.g., `ctest` for CMake or `bazel test //...`).

2. Verify that your test executables are detected and listed.

3. **Running Tests**: Execute the discovered tests and watch for GoogleTest output like:

   ```
   [ RUN      ] MyTestSuite.MyTest
   [       OK ] MyTestSuite.MyTest (0 ms)
   ```

4. Ensure tests run without unresolved dependencies or runtime failures.

<Tip>
Test discovery may be impacted if your test targets do not depend correctly on GoogleTest libraries or if test binaries are not marked properly in the build system.
</Tip>

---

## 5. Example: Simple Test Integration

Below is the minimal example showing how to include GoogleTest and GoogleMock, define a basic test, and run it.

**test_example.cpp**

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::Return;
using ::testing::_;

class Foo {
 public:
  virtual ~Foo() {}
  virtual int GetNumber(int n) = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetNumber, (int n), (override));
};

TEST(FooTest, ReturnsExpectedNumber) {
  MockFoo mock_foo;
  EXPECT_CALL(mock_foo, GetNumber(_)).WillRepeatedly(Return(42));

  EXPECT_EQ(mock_foo.GetNumber(0), 42);
  EXPECT_EQ(mock_foo.GetNumber(1), 42);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Build and Run

- Compile this file ensuring the correct include paths and linker flags for GoogleTest and GoogleMock.

- Run the resulting executable to verify tests execute and succeed.

---

## 6. Troubleshooting Common Integration Issues

<AccordionGroup title="Common Issues and Fixes">
<Accordion title="Include Path Errors">
**Issue:** Compiler cannot find `gtest/gtest.h` or `gmock/gmock.h`.

**Resolution:**
- Verify include directories are set correctly.
- Use absolute or relative paths cautiously in your build.
- Confirm the installation contains these headers.
</Accordion>
<Accordion title="Linker Errors">
**Issue:** Undefined references to GoogleTest symbols during linking.

**Resolution:**
- Confirm libraries `libgtest` and `libgmock` are built and linked.
- Check library search paths.
- On Linux, ensure pthread is linked with `-lpthread`.
</Accordion>
<Accordion title="Test Discovery Fails">
**Issue:** Test binaries are built but tests are not discovered.

**Resolution:**
- Ensure test executables are marked as test targets.
- Invoke test discovery using appropriate tools, e.g., `ctest`.
- Confirm that tests include `main()` initializing GoogleTest via `::testing::InitGoogleMock()`.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Explore [Writing Your First Test Case](../getting-started/first-test-experience/writing-your-first-test) for authoring tests.
- Familiarize with [Using Mocks in Tests](../docs/gmock_cook_book.md#useoncall) to harness GoogleMock power effectively.
- Review [Troubleshooting and Common Setup Issues](../getting-started/first-test-experience/troubleshooting-and-validation) for debugging help.

---

## References

- [GoogleTest Installation Instructions](../getting-started/setup-and-installation/installation-platforms)
- [GoogleMock Cookbook](../docs/gmock_cook_book.md)
- [Mocking Reference](../docs/reference/mocking.md)
- [GoogleTest Primer](../overview/introduction/product-overview)

---