---
title: "Installation Instructions by Platform"
description: "Provides clean, step-by-step setup instructions for installing GoogleTest and GoogleMock using common build systems (CMake, Bazel) and on a variety of operating systems, empowering users to quickly integrate the framework into their projects."
---

# Installation Instructions by Platform

This guide provides detailed, step-by-step instructions to install **GoogleTest** and **GoogleMock** on a variety of platforms using common build systems. Whether you use CMake, Bazel, or want to build from source manually, these instructions will get you up and running quickly and correctly.

---

## Prerequisites & System Requirements

Before proceeding with installation, ensure your environment meets the following:

- **Supported Platforms:** Linux, Windows (Desktop and MinGW), Mac OS X.
- **Compiler Requirements:** C++17-compatible compiler (e.g., GCC 7+, Clang 6+, MSVC 2017 Update 3 or later).
- **Build Tools:** CMake 3.14 or later is highly recommended for ease of build.
- **Threading Support:** Preferably pthreads support on Unix-like systems; Windows threading supported inherently.


## Building from Source with CMake

GoogleTest's native build system is provided through CMake, making it portable and straightforward.

### Standalone Project Build

1. **Clone the Repository**

   Ensure you have `git` installed, then clone the latest version or desired release tag:

   ```bash
   git clone https://github.com/google/googletest.git -b v1.17.0
   cd googletest
   ```

2. **Create a Build Directory**

   Keep build artifacts separate for easier cleanup:

   ```bash
   mkdir build
   cd build
   ```

3. **Generate Build Files**

   To build **with GoogleMock included** (default):

   ```bash
   cmake ..
   ```

   To build only **GoogleTest** (exclude GoogleMock):

   ```bash
   cmake .. -DBUILD_GMOCK=OFF
   ```

4. **Build the Libraries and Tests**

   - On Linux or MacOS:
     ```bash
     make
     ```
   - On Windows (Visual Studio):

     Open the generated `.sln` file in Visual Studio found in this directory, then build.

5. **(Optional) Install System-wide**

   You may install the built libraries and headers system-wide (requires elevated privileges):

   ```bash
   sudo make install
   ```


### Incorporating into Existing CMake Projects

1. Use the installed GoogleTest package by adding to your `CMakeLists.txt`:

   ```cmake
   find_package(GTest CONFIG REQUIRED)

   add_executable(my_test test_file.cc)
   target_link_libraries(my_test PRIVATE GTest::gtest_main)

   enable_testing()
   add_test(NAME my_test COMMAND my_test)
   ```

2. Alternatively, add GoogleTest as a subdirectory:

   ```cmake
   include(FetchContent)
   FetchContent_Declare(
     googletest
     URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
   )
   FetchContent_MakeAvailable(googletest)

   add_executable(my_test test_file.cc)
   target_link_libraries(my_test PRIVATE gtest_main)
   add_test(NAME my_test COMMAND my_test)
   ```

3. Be sure your project uses at least C++17:

   ```cmake
   set(CMAKE_CXX_STANDARD 17)
   set(CMAKE_CXX_STANDARD_REQUIRED ON)
   ```


### Build Flags and Considerations

- When compiling with MSVC, GoogleTest defaults to static CRT linkage. To match your project’s CRT (dynamic or static), use the CMake option `gtest_force_shared_crt`.

- If you disable pthreads support or it’s unavailable, define the macro `-DGTEST_HAS_PTHREAD=0`.

- You can toggle exceptions support with compiler flags; GoogleTest requires exception support for full functionality.


## Installing Using Bazel

GoogleTest supports building with Bazel, the build system frequently used in Google environments.

1. Add GoogleTest as a dependency in your Bazel `WORKSPACE` or `BUILD` files.

2. Use the Bazel test rules to build and run tests using GoogleTest and GoogleMock.

Refer to Bazel’s own documentation or the GoogleTest repository for Bazel specifics.


## Using pkg-config for Integration

When using build systems like Autotools or custom Makefiles, pkg-config files provided by GoogleTest help retrieve correct compile/link flags.

### Sample with pkg-config

```bash
pkg-config --cflags gtest
pkg-config --libs gtest
```

### Integrating pkg-config in CMake

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp testapp.cc)
target_include_directories(testapp PRIVATE ${GTEST_INCLUDE_DIRS})
target_link_libraries(testapp PRIVATE ${GTEST_LIBRARIES})
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS_OTHER})

enable_testing()
add_test(NAME testapp COMMAND testapp)
```


### Cross-compilation Notes

- Set `PKG_CONFIG_SYSROOT_DIR` to your sysroot path.
- Also set `PKG_CONFIG_LIBDIR` to point inside the sysroot.
- Use `PKG_CONFIG_ALLOW_SYSTEM_CFLAGS` and `PKG_CONFIG_ALLOW_SYSTEM_LIBS` to avoid filtering system paths.


## Platform-Specific Notes

### Windows

- Visual Studio project files are generated by CMake.
- Make sure to match your project’s runtime library with GoogleTest’s.
- Linking against `gtest_main.lib` provides a default main function to run tests.

### Linux

- pthread linking is automatically managed by CMake if detected.
- Ensure necessary developer packages and build tools are installed.

### macOS

- CMake generates Xcode projects if requested.
- No special flags needed beyond the C++17 compiler requirement.


## Verifying Your Installation

After building and installing:

1. Create a simple test file `sample_test.cc`:

    ```c++
    #include <gtest/gtest.h>

    TEST(SampleTest, AssertionTrue) {
      EXPECT_TRUE(true);
    }

    int main(int argc, char** argv) {
      ::testing::InitGoogleTest(&argc, argv);
      return RUN_ALL_TESTS();
    }
    ```

2. Compile and link using:

    ```bash
    g++ -std=c++17 sample_test.cc -lgtest_main -lgtest -pthread -o sample_test
    ./sample_test
    ```

3. If tests run and report `1 test from SampleTest` with success, your installation is complete.


## Troubleshooting Common Issues

- **Compilation errors about Visual C++ version:** Ensure MSVC 2015 Update 3 or newer is installed.
- **Missing pthread on Linux:** Confirm development packages for pthreads are installed; add `-pthread` explicitly if needed.
- **Linker errors related to GoogleTest symbols:** Check that you link with both `-lgtest` and `-lgtest_main` or your custom main.
- **CMake cannot find GoogleTest:** Set or export `CMAKE_PREFIX_PATH` or `PKG_CONFIG_PATH` to the installation location.


## Tips and Best Practices

- Always use fresh builds in separate directories.
- Prefer linking with `gtest_main` unless you need custom `main()` logic.
- Use the latest stable release tag or commit for consistency.
- For CI environments, consider caching your GoogleTest build artifacts.


## Additional Resources

- [GoogleTest Primer](./primer.md) — Learn how to write your first tests.
- [Supported Platforms](./platforms.md) — Detailed list of supported OS and compilers.
- [Prerequisites and System Requirements](../getting-started/setup-and-installation/prerequisites-system-requirements) — Verify your environment compatibility.
- [Integration with Build Systems (CMake, Bazel)](../guides/patterns-integration/build-integration) — How to integrate GoogleTest smoothly into your project's build.
- [Troubleshooting Common Issues](../getting-started/first-test-experience/troubleshooting-and-validation) — Help with common pitfalls.


---

By following these platform-specific installation instructions, users can confidently and efficiently integrate GoogleTest and GoogleMock into their C++ projects, empowering rapid development of robust automated tests.
