---
title: "Installation (CMake, Bazel, Manual)"
description: "Explore clear, step-by-step installation instructions tailored for various workflows: CMake, Bazel, and manual integration. Each method is walked through with tips for best-practice integration into your source tree, linking, and compatibility. Choose the approach that best suits your project setup."
---

# Installation (CMake, Bazel, Manual)

This guide provides clear, step-by-step instructions for installing GoogleTest using the three primary workflows: **CMake**, **Bazel**, and **Manual Integration**. Choose the installation method that fits your project environment and build system. Each section includes best practices, verification steps, and tips to ensure a successful setup.

---

## Prerequisites

Before you begin installation, ensure the following prerequisites are met:

- **C++17 or newer compiler** (e.g., GCC 7+, Clang 5+, MSVC 2017+)
- Supported **Operating Systems**: Linux, macOS, Windows
- For CMake builds: [CMake 3.14+](https://cmake.org/download/)
- For Bazel builds: [Bazel 7.0+](https://bazel.build/)
- Basic familiarity with your platform's command line or shell environment

<Tip>
If you are new to CMake or Bazel, please refer to the [Prerequisites & System Requirements](/getting-started/setup-and-installation/prerequisites-system-requirements) page for detailed environment setup.
</Tip>

---

## 1. Installing with CMake

CMake provides a highly flexible way to integrate GoogleTest into your projects, either as a standalone build or embedded within your own CMake project.

### 1.1. Standalone GoogleTest Build

Follow these steps to build and install GoogleTest using CMake as a standalone project.

<Steps>
<Step title="Clone the GoogleTest Repository">
Open your terminal and clone the GoogleTest repository at the chosen version (example uses v1.17.0):

```bash
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest
```
</Step>

<Step title="Create and Enter a Build Directory">

Create a separate directory to keep build artifacts isolated:

```bash
$ mkdir build && cd build
```

</Step>

<Step title="Generate Build Files">

Run CMake to configure the build.

- The default build includes GoogleMock and GoogleTest.
- To build only GoogleTest, define `-DBUILD_GMOCK=OFF`.

Example command:

```bash
$ cmake ..
# Or without GoogleMock:
$ cmake .. -DBUILD_GMOCK=OFF
```

</Step>

<Step title="Build the Libraries">
Run the build command:

```bash
$ make
# or on Windows with Visual Studio you can open the solution
```

</Step>

<Step title="(Optional) Install GoogleTest">

If you want to install GoogleTest system-wide:

```bash
$ sudo make install
```

This installs GoogleTest headers and libraries to system directories (e.g., `/usr/local`).

</Step>

<Step title="Verify the Build">

Optionally run GoogleTest's own tests if available:

```bash
$ ctest
```

All tests should pass indicating a successful build.

</Step>
</Steps>

### 1.2. Embedding GoogleTest in Your CMake Project

For seamless integration, GoogleTest can be embedded in your project's build system with CMake's `FetchContent` module.

<Steps>
<Step title="Create or Update Your Projectâ€™s CMakeLists.txt">
Add the following snippet at the top of your `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

# Require C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Download and add GoogleTest
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # Fix CRT linkage for Windows
FetchContent_MakeAvailable(googletest)
```

</Step>

<Step title="Add Your Test Executable and Link GoogleTest">
Below your source definitions, add:

```cmake
enable_testing()

add_executable(hello_test hello_test.cc)
target_link_libraries(hello_test GTest::gtest_main)

include(GoogleTest)
gtest_discover_tests(hello_test)
```

</Step>

<Step title="Build and Run Your Tests">
Execute the following from your project root:

```bash
$ cmake -S . -B build
$ cmake --build build
$ cd build
$ ctest
```

Test output should show passes indicating successful integration.

</Step>
</Steps>

<Tip>
Windows users: The option `gtest_force_shared_crt` ensures runtime library compatibility.
</Tip>

<Warning>
Ensure you use CMake version 3.14 or higher for `FetchContent_MakeAvailable()` support.
</Warning>

---

## 2. Installing with Bazel

If your project uses Bazel, GoogleTest integrates naturally with simple workspace and build file configurations.

### 2.1. Set Up Your Bazel Workspace

<Steps>
<Step title="Create a Workspace Directory">

```bash
$ mkdir my_workspace && cd my_workspace
```

</Step>

<Step title="Create MODULE.bazel File for GoogleTest Dependency">

Create a `MODULE.bazel` file with the following content:

```python
# MODULE.bazel
bazel_dep(name = "googletest", version = "1.17.0")
```


</Step>
</Steps>

### 2.2. Create Your Test Source and BUILD File

Create `hello_test.cc` with a simple GoogleTest example:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

Create a `BUILD` file alongside it:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = ["@googletest//:gtest", "@googletest//:gtest_main"],
)
```

### 2.3. Build and Run the Tests

Run:

```bash
$ bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

You should see the test running with all assertions passing.

<Tip>
For MSVC users, use `--cxxopt=/std:c++17` instead of `--cxxopt=-std=c++17`.
</Tip>

---

## 3. Manual Integration

If you prefer manual integration or are using a custom build system, follow these guidelines.

### 3.1. Download GoogleTest

Download the GoogleTest source code from the [GitHub releases page](https://github.com/google/googletest/releases) for your desired version.

### 3.2. Add Source and Header Files to Your Project

Include the following source files in your build:

- `googletest/src/gtest-all.cc`
- `googlemock/src/gmock-all.cc` (if using GoogleMock)

Include the entire `googletest/include` and `googlemock/include` directories in your project's include path.

### 3.3. Compile and Link

Compile and link the source files along with your test code. Link against pthreads if on a Unix-like system and using threading.

<Tip>
Ensure your compiler supports C++17 and you add the relevant flags (e.g., `-std=c++17`).
</Tip>

<Warning>
Manual integration requires careful management of source files and dependencies. Consider CMake or Bazel methods for easier maintenance.
</Warning>

---

## Troubleshooting Common Issues

<AccordionGroup title="Installation Troubleshooting">
<Accordion title="CMake: Linking Errors or Runtime Mismatches">
Verify you have set `gtest_force_shared_crt` ON for Windows to align runtimes.

Check your compiler flags enforce C++17: `-DCMAKE_CXX_STANDARD=17`.

Make sure no conflicting versions of GoogleTest are present in your include paths or libraries.
</Accordion>
<Accordion title="Bazel: Build Failures or Missing Dependencies">
Ensure your `MODULE.bazel` file correctly declares the dependency on Googletest.

Use the correct Bazel version (7.0+) and specify compilation flags if needed.

Check network connectivity if Bazel cannot fetch dependencies.
</Accordion>
<Accordion title="General: Tests Fail to Run or Link">
Verify that your test binary links against `gtest_main` or provides a `main()` function.

Use the provided minimal sample tests as a baseline to isolate build issues.

Confirm that pthreads or equivalent threading libraries are linked on POSIX.
</Accordion>
</AccordionGroup>

---

## Next Steps

- After successful installation, proceed to [Writing Your First Test](/getting-started/first-tests-and-troubleshooting/writing-your-first-test) to learn how to create and run tests.
- For more advanced build system integration, explore [Integration & Ecosystem](/overview/architecture-overview/integration-ecosystem).
- Consult [Verifying Your Installation](/getting-started/setup-and-installation/verifying-installation) for troubleshooting and validation.

---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [Official CMake Documentation](https://cmake.org/documentation/)
- [Bazel Build System](https://bazel.build/)


---

*This installation guide equips you to confidently add GoogleTest to your project with your chosen build workflow, enabling rapid and reliable C++ test development.*