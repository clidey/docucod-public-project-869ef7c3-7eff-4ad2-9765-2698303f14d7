---
title: "Installation via Bazel"
description: "Directions for setting up GoogleTest in projects that use Bazel as their build system. Provides configuration commands, workspace integration, and tips for seamless build and run."
---

# Installation via Bazel

This guide provides clear, step-by-step instructions to integrate **GoogleTest** into your C++ project using the Bazel build system. Bazel offers a streamlined, reproducible mechanism to compile, test, and manage dependencies, making it ideal for large-scale or cross-platform projects. If youâ€™re starting fresh with Bazel or GoogleTest, this guide ensures a smooth setup to build and run your first test.

---

## 1. Prerequisites & System Requirements

Before you begin, confirm your environment meets the following:

- **Operating System:** Linux, macOS, or Windows supported.
- **Compiler:** A C++ compiler compatible with at least C++17.
- **Bazel Version:** Bazel 7.0 or higher installed. See [Bazel Installation Guide](https://bazel.build/install) if needed.

<Tip>
Ensure Bazel is properly added to your system PATH so you can invoke it from your terminal or command prompt.
</Tip>

---

## 2. Setting Up Your Bazel Workspace

### Step 1: Create a Workspace Directory

Open your terminal and run:

```sh
mkdir my_workspace && cd my_workspace
```

This directory will contain all your source code and Bazel configuration files.

### Step 2: Configure Dependencies via `MODULE.bazel`

Create a file named `MODULE.bazel` inside `my_workspace` with the following content:

```python
# MODULE.bazel

bazel_dep(name = "googletest", version = "1.17.0")
```

This declares a dependency on GoogleTest through the Bazel Central Registry. Replace `"1.17.0"` with the latest stable version if desired, which can be found at https://registry.bazel.build/modules/googletest.

<Tip>
Using the Bazel Central Registry ensures your build always pulls verified and compatible dependencies.
</Tip>

---

## 3. Adding Your First Test

### Step 1: Create a Test Source File

In your workspace (`my_workspace`), create `hello_test.cc` with the following content to demonstrate basic assertions:

```cpp
#include <gtest/gtest.h>

// Simple example test case
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Expect strings not to be equal
  EXPECT_EQ(7 * 6, 42);               // Expect equality
}
```

### Step 2: Create the `BUILD` File

In the same directory, add a `BUILD` file to declare the test target:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

- `cc_test` declares a C++ test.
- The dependencies link to GoogleTest libraries.

<Tip>
Make sure your file names and target names correspond exactly to avoid build errors.
</Tip>

---

## 4. Build and Run Your Test

### Step 1: Build the Test Binary

Run Bazel to build your test:

```sh
bazel build //:hello_test
```

You should see output confirming the build succeeded.

### Step 2: Run the Test

To execute the test and see detailed results:

```sh
bazel test --test_output=all //:hello_test
```

Sample output snippet:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

This confirms GoogleTest is correctly set up and your tests run as expected.

---

## 5. Tips & Best Practices

- **Compiler Standard:** Use `--cxxopt=-std=c++17` to enforce C++17 during build:

  ```sh
  bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
  ```

- **Windows Users:** For MSVC, replace `--cxxopt=-std=c++17` with `--cxxopt=/std:c++17`.

- **Test Filtering:** Use `-R regex` with `bazel test` to run specific tests matching a pattern.

- **Test Output:** Use `--test_output=all` to always see detailed test logs.

- **Upgrading Versions:** Regularly update `MODULE.bazel` to use the latest GoogleTest version.

---

## 6. Troubleshooting Common Issues

<Accordion title="Common Bazel Setup Issues">

**Problem:** Bazel cannot find `googletest` module or dependencies fail.

- Verify internet connectivity for dependency download.
- Check spelling and syntax in `MODULE.bazel`.
- Run `bazel clean` and rebuild to refresh state.

**Problem:** Compiler errors related to C++ version.

- Ensure your compiler supports C++17 and you specify correct flags (see Tips).

**Problem:** Tests not running or not discovered.

- Confirm your `cc_test` rule lists all source files.
- Make sure GoogleTest dependencies are included.

</Accordion>

---

## 7. Next Steps

- Explore [Writing Your First Unit Test](../configuration-and-first-test/writing-your-first-unit-test) to learn how to extend your tests.
- Use the [Primer](../../primer.md) to master writing assertions and test fixtures.
- For alternative build systems, see [Installation via CMake](installation-via-cmake.md).
- Interested in mocking? Check out [Introduction to Mocking and GoogleMock](../../guides/mocking-with-googlemock/introduction-to-mocking.md).
- Access community help and submit issues via the [Support and Community Resources](../../getting-started/troubleshooting-and-resources/community-and-support.md).

---

Congratulations! You have successfully set up GoogleTest with Bazel and run your first test binary. This solid foundation enables confident development of robust C++ unit tests with efficient build management.

---