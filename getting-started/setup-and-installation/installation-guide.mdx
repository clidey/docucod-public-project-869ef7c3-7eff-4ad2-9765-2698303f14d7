---
title: "Installation Guide"
description: "Follow clear, step-by-step instructions to install GoogleTest using common build systems such as CMake and Bazel. This page ensures you can add GoogleTest to your project efficiently, regardless of your development environment."
---

# Installation Guide

Follow these step-by-step instructions to install GoogleTest efficiently using common build systems like CMake and Bazel. This guide ensures your project is ready to leverage GoogleTest’s comprehensive testing capabilities regardless of your development environment.

---

## 1. Prerequisites

Before installing GoogleTest, confirm the following prerequisites:

- **C++ Standard**: Your build environment must support **C++17** or later.
- **Supported Platforms**: Linux, Windows, macOS, and others with compatible compilers (GCC, Clang, MSVC).
- **Build Tools**:
  - For CMake builds: [CMake](https://cmake.org/) 3.14 or newer.
  - Compatible build tools for your platform (e.g., Make, Ninja, Visual Studio).
- **Network Access**: Required if you intend to fetch GoogleTest sources automatically via CMake.

<Tip>
Having a compatible C++17 compiler and a working build toolchain is essential — installation will fail otherwise.
</Tip>

For a full list of supported platforms and compilers, see the [Prerequisites and Supported Platforms](https://your-docs-domain/getting-started/setup-and-installation/prerequisites-and-supported-platforms) page.

---

## 2. Installing GoogleTest Using CMake

GoogleTest provides a robust CMake build system supporting standalone builds and integration into existing projects.

### 2.1 Standalone Build of GoogleTest

This approach is ideal if you want to build and install GoogleTest independently.

#### Steps:

1. **Clone the GoogleTest Repository:**

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

2. **Create and Navigate to the Build Directory:**

```bash
mkdir build
cd build
```

3. **Generate Build Files:**

- To build **both GoogleTest and GoogleMock** (default):

```bash
cmake ..
```

- To build **only GoogleTest** (without GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

4. **Build the Project:**

On Unix-like systems (Linux/macOS) with Make available:

```bash
make
```

Or, on Windows, open the generated solution file (`gtest.sln`) with Visual Studio and build the project.

5. **(Optional) Install GoogleTest:**

This step typically requires administrator privileges.

```bash
sudo make install
```

GoogleTest will install under `/usr/local/` by default.

<Warning>
If using Windows with Visual Studio, be mindful of runtime library mismatches. You can fix this by setting the `gtest_force_shared_crt` CMake option to `ON` during configuration (see Section 4 below).
</Warning>

### 2.2 Incorporating GoogleTest in Your Existing CMake Project

For seamless integration, GoogleTest can be built as part of your project’s build system, ensuring consistent compiler and linker settings.

#### Recommended integration using `FetchContent`:

Add the following to your project's `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# On Windows, ensure matching shared CRT linkage
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

# Example target using GoogleTest
add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

This method automatically downloads GoogleTest during the CMake configuration step.

<Note>
This requires CMake version 3.14 or above.
</Note>

### 2.3 Verifying the C++ Standard Version

GoogleTest requires **C++17**. You can ensure your project sets this by adding:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

in your top-level `CMakeLists.txt` or provide equivalent compilation flags.

---

## 3. Installing GoogleTest Using Bazel

GoogleTest supports Bazel builds natively. To add GoogleTest:

1. Declare GoogleTest as a dependency in your Bazel `WORKSPACE` file:

```bazel
http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/release-1.17.0.zip",
    strip_prefix = "googletest-release-1.17.0",
)
```

2. Then add dependencies in your `BUILD` files to link against `@com_google_googletest//:gtest` or `gtest_main` for main function support.

Refer to the [Quickstart for Bazel](https://your-docs-domain/guides/getting-started/quickstart-bazel) guide for full installation and example project setup using Bazel.

---

## 4. Important Build Options and Tweaks

### 4.1 Handling Visual Studio Runtime Conflicts

Visual Studio’s default of dynamically linked C runtimes can conflict with GoogleTest’s static linking and cause linker errors.

Resolve this by enabling `gtest_force_shared_crt` when configuring via CMake:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

This ensures GoogleTest uses dynamic CRT linkage to match your project.

### 4.2 Multi-threading Support

GoogleTest uses pthread for thread safety where available.

- If your build environment’s pthread detection is inaccurate, force it by adding compiler flags:

```bash
-DGTEST_HAS_PTHREAD=1  # Enable pthread
-DGTEST_HAS_PTHREAD=0  # Disable pthread
```

- When building manually, ensure you link with pthread by adding `-pthread` to your compiler/linker flags.

### 4.3 Using GoogleTest as a Shared Library (DLL)

By default, GoogleTest builds as a static library.

To build and use as a shared library:

- Define `DGTEST_CREATE_SHARED_LIBRARY=1` when compiling GoogleTest.
- Define `DGTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your tests that link with the shared GoogleTest library.

This option is advanced and typically unnecessary unless your environment requires shared libraries.

### 4.4 Avoiding Macro Name Clashes

GoogleTest defines many assertion macros which may clash with other libraries.

To rename GoogleTest macros and avoid collisions, define a macro flag such as:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

You will then need to prefix macros like `TEST()` with `GTEST_TEST()`, e.g.,

```cpp
GTEST_TEST(MyTestSuite, MyTest) { ... }
```

---

## 5. Confirming Installation and First Build

After building and integrating GoogleTest, verify your setup as follows:

1. Add a simple test file `hello_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

2. Build your test binary, linking with GoogleTest libraries.

3. Run the tests, e.g., via:

```bash
./hello_test
```

You should see test output confirming the test passed.

If using CMake with `gtest_main`, simply building and running the test executable will automatically invoke `RUN_ALL_TESTS()` for you.

<Tip>
If the build or run fails, re-check your C++ standard version, compiler compatibility, and linkage settings.
</Tip>

---

## 6. Troubleshooting Common Installation Issues

<AccordionGroup title="Common Installation Problems and Solutions">
<Accordion title="C++ Standard Version Not Set Correctly">
Ensure CMake is configured to use at least C++17 with

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

Failure to do so often causes compilation errors.
</Accordion>
<Accordion title="Linker Errors on Windows Related to CRT Mismatches">
Use the CMake option `-Dgtest_force_shared_crt=ON` to align runtime linkage.
Also, clean your build directory before re-configuring.
</Accordion>
<Accordion title="GoogleTest Source Not Found During Build">
If manually downloading GoogleTest source, ensure your paths are correct.
When using FetchContent or submodules, verify the download and checkout succeeded.
</Accordion>
<Accordion title="Missing pthread Errors on Unix-like Systems">
When building manually, add `-pthread` to both compiler and linker flags.
When using CMake, this is usually automatic.
Disable pthread explicitly only if your environment does not support it using `-DGTEST_HAS_PTHREAD=0`.
</Accordion>
</AccordionGroup>

<Info>
For more extensive troubleshooting, visit the [Common Errors and How to Fix Them](https://your-docs-domain/faq/troubleshooting-and-optimization/common-errors) page.
</Info>

---

## 7. Next Steps

- Proceed to the [Writing Your First Test](https://your-docs-domain/getting-started/first-test-and-validation/writing-your-first-test) guide.
- Explore [Quickstart with CMake](https://your-docs-domain/guides/getting-started/quickstart-cmake) for detailed project setup.
- If using Bazel, see [Quickstart with Bazel](https://your-docs-domain/guides/getting-started/quickstart-bazel).

These guides will walk you through creating, running, and understanding your first GoogleTest tests.

---

For detailed code examples and updates, visit the official repository: [https://github.com/google/googletest](https://github.com/google/googletest).

---

### Summary

This guide walks you through installing GoogleTest with a focus on CMake and Bazel build systems, covering standalone builds, integration strategies, and important configuration tips. It also addresses common pitfalls like C++ standard requirements and platform-specific build tweaks.

