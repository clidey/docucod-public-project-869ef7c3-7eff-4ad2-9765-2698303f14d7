---
title: "Installation Methods"
description: "Discover multiple ways to install GoogleTest/GoogleMock in your projects. This page covers installation via CMake, Bazel, and manual integration, with step-by-step guidance tailored for different operating systems."
---

# Installation Methods

GoogleTest and GoogleMock support multiple installation methods to fit different project needs and development environments. This page guides you through three common methods for integrating GoogleTest/GoogleMock into your C++ projects: building with CMake, building with Bazel, and manual integration.

---

## 1. Installing with CMake

CMake is the most common and versatile way to build and integrate GoogleTest and GoogleMock on Linux, Windows, and macOS.

### 1.1. Standalone CMake Build

This is ideal if you want a separate build of GoogleTest/GoogleMock (including the test libraries and main functions).

<Steps>
<Step title="Clone the Repository">
Clone the latest stable release or branch you want.

```bash
git clone https://github.com/google/googletest.git -b main
downloaded_dir=$(pwd)/googletest
echo "Cloned GoogleTest into $downloaded_dir"
```

</Step>
<Step title="Create Build Directory">
Create a dedicated build folder to keep build outputs separate.

```bash
cd googletest
mkdir build
cd build
```

</Step>
<Step title="Generate Build Files with CMake">
Generate platform-native build files. By default, GoogleMock is included.

```bash
cmake ..
```

If you want only GoogleTest without GoogleMock, add the flag:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

</Step>
<Step title="Build the Libraries">
On Unix-like systems:

```bash
make
```

On Windows, open the generated Visual Studio solution (`gtest.sln`) and build from the IDE.

</Step>
<Step title="Optional: Install the Libraries">
If you have system admin privileges and want to install GoogleTest and GoogleMock headers and libraries system-wide:

```bash
sudo make install
```

This installs into `/usr/local/` by default.

</Step>
</Steps>

<Note>
Ensure you have CMake (version 3.14 or later) installed: download it from https://cmake.org/. A C++17 capable compiler is required.
</Note>

### 1.2. Integrating GoogleTest into Your Existing CMake Project

Rather than installing separately, you can embed GoogleTest source directly into your project’s build to avoid incompatibilities and ensure consistent build options.

**Example `CMakeLists.txt` snippet:**

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# Enable shared CRT on Windows
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

This way, GoogleTest builds with your project, sharing compiler and linker settings.

<Warning>
On Windows, if you encounter linkage errors about runtime mismatch, ensure the option `gtest_force_shared_crt` is set ON as shown above.
</Warning>

---

## 2. Installing with Bazel

Bazel users benefit from official build targets for GoogleTest and GoogleMock.

### 2.1. Adding GoogleTest to WORKSPACE

Use the official repository rule or a local copy in your `WORKSPACE` file:

```bazel
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.17.0.zip"],
    strip_prefix = "googletest-release-1.17.0",
    sha256 = "<SHA256_HASH_HERE>",
)
```

Adjust the version and hash as appropriate.

### 2.2. Add Dependencies in Your BUILD File

In your Bazel `BUILD` file, link your test targets with `@com_google_googletest//:gtest_main` or `@com_google_googletest//:gmock_main`.

Example:

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

---

## 3. Manual Integration

For custom build systems or environments without CMake/Bazel, manually integrating GoogleTest and GoogleMock is possible.

### 3.1. Get the Source

Download the source code from the repository: https://github.com/google/googletest.

### 3.2. Add Source Files

Include the following core source files in your build:

- `googletest/src/gtest-all.cc` (GoogleTest core code)
- `googlemock/src/gmock-all.cc` (GoogleMock core code, if mocking is needed)

### 3.3. Include Headers

Add the directories containing the headers to your compiler’s include path:

- `googletest/include`
- `googlemock/include`

### 3.4. Compile and Link

Compile your test code along with the source files above and link them into your test executable.

### 3.5. Use `gtest_main`/`gmock_main` for Main Function

GoogleTest and GoogleMock provide ready-made main functions:

- `gtest_main.cc` for GoogleTest only
- `gmock_main.cc` if you use GoogleMock (which includes GoogleTest)

Compile and link them into your test executable unless you want to provide your own `main()`.

Example compilation command (Unix-like):

```bash
c++ -std=c++17 -I/path/to/googletest/include -I/path/to/googlemock/include \
    your_test.cc googletest/src/gtest-all.cc googlemock/src/gmock-all.cc googlemock/src/gmock_main.cc \
    -pthread -o your_test_exec
```

<Warning>
When manually building, ensure you compile with a C++17-compliant compiler and include necessary threading flags (`-pthread` on Linux).
</Warning>

---

## Troubleshooting

<AccordionGroup title="Common Installation Issues and Solutions">
<Accordion title="CMake version too old or missing FetchContent">
Update CMake to version 3.14 or later to use `FetchContent_MakeAvailable()`. Use your system package manager or download from https://cmake.org/download/.
</Accordion>
<Accordion title="Linker errors related to MSVC runtime mismatch">
Make sure the `gtest_force_shared_crt` option is set ON in your CMake configuration when building on Windows with Visual Studio, as GoogleTest links the runtime statically by default.
</Accordion>
<Accordion title="GoogleTest not finding pthread on Linux">
GoogleTest requires pthread support for thread-safe tests. Use CMake which handles this automatically or add `-pthread` flags manually when compiling and linking.
</Accordion>
<Accordion title="Undefined reference errors when building manually">
Verify all required source files are compiled and linked, especially `gtest-all.cc` and `gmock-all.cc` if applicable. Also, check C++ standard version and compiler compatibility.
</Accordion>
</AccordionGroup>

---

## Additional Notes

- GoogleTest requires a compiler supporting C++17.
- Building GoogleTest as a shared library requires specific compiler flags (`-DGTEST_CREATE_SHARED_LIBRARY=1`). Static linking is simpler and recommended unless you have specific needs.
- To avoid macro name conflicts, GoogleTest allows renaming macros via compiler flags (see GoogleTest README).

---

For more details, visit the [GoogleTest repository](https://github.com/google/googletest) and consult the [README.md](https://github.com/google/googletest/blob/main/googletest/README.md).

---