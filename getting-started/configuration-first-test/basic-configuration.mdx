---
title: "Basic Configuration & Project Setup"
description: "Guides users through including GoogleTest headers, linking the library, and setting up an initial test target. Covers basic file structure and integration steps, enabling a smooth start."
---

# Basic Configuration & Project Setup

Welcome to the GoogleTest basic configuration and project setup guide. This page will help you include the necessary GoogleTest headers, link the library to your project, and set up your initial test target successfully. By following the step-by-step instructions, you will quickly prepare your environment and understand the core file structure integration for automated testing.

---

## 1. Prerequisites & Environment Setup

Before you begin configuring GoogleTest for your project, ensure you have the following:

- **C++ Compiler Support:** Use a C++ compiler that supports C++11 or later.
- **Build Tools:** CMake, Bazel, or your chosen build system configured properly.
- **GoogleTest Source:** Download or clone the [GoogleTest repository](https://github.com/google/googletest) to your system.

<Tip>
If you already have GoogleTest installed via a package manager or your environment provides pre-built binaries, verify that the include paths and linking are set accordingly.
</Tip>

## 2. Including GoogleTest in Your Project

To use GoogleTest in your test files, include the primary header:

```cpp
#include <gtest/gtest.h>
```

For mocking capabilities, include GoogleMock:

```cpp
#include <gmock/gmock.h>
```

GoogleMock is bundled with GoogleTest, so installing GoogleTest also provides GoogleMock.

### File Structure Recommendation

Organize your test code with the following convention:

- Place test source files in a dedicated `tests/` or `test/` directory.
- Keep your mock class definitions alongside their related tests or in a separate `mock/` subdirectory if mock classes are shared.

Example project tree:

```
/project-root
  /src
  /include
  /test
    my_component_test.cc
    mock_my_component.h
```

## 3. Linking GoogleTest Library

In your build configuration, link your test target against the GoogleTest and GoogleMock libraries.

### Using CMake

If using CMake, your `CMakeLists.txt` can find and link GoogleTest as follows:

```cmake
find_package(GTest REQUIRED)

add_executable(my_tests test/my_component_test.cc)
target_link_libraries(my_tests GTest::gtest GTest::gtest_main GTest::gmock GTest::gmock_main pthread)
```

Ensure `pthread` or equivalent threading library is linked if your platform requires it.

### Using Bazel

For Bazel builds, declare dependencies in your `BUILD` file:

```python
cc_test(
    name = "my_component_test",
    srcs = ["my_component_test.cc"],
    deps = ["@com_google_googletest//:gmock_main"]
)
```

Refer to [Bazel Setup Guide](https://github.com/google/googletest/tree/main/bazel) for details.

## 4. Creating Your First Test Target

Let's create a minimal test to verify your setup:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
    EXPECT_EQ(1, 1);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

### Build and Run

- Compile your test target with the appropriate build system configuration.
- Run the test executable; you should see output indicating that the tests passed.

```shell
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

## 5. Basic Mock Setup Example

To integrate GoogleMock with your tests, define a simple mock class as below:

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};

TEST(FooTest, ReturnsValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue()).WillOnce(::testing::Return(42));
  EXPECT_EQ(mock.GetValue(), 42);
}
```

Run the test executable to confirm your mocking setup.

<Tip>
Define mock classes in your test files or in a shared test helper header. Always derive from interfaces with virtual methods for effective mocking.
</Tip>

## 6. Best Practices

- **Set Expectations Before Usage:** Always declare `EXPECT_CALL` before invoking methods on mocks.
- **Use `NiceMock` or `StrictMock` to Manage Warnings:**
  - `NiceMock<YourMock>` suppresses warnings for uninteresting calls.
  - `StrictMock<YourMock>` treats them as failures.
- **Keep Tests Focused:** Each test should verify a single behavior to ensure precise failures.

## 7. Troubleshooting

- **Linker Errors:** Confirm that GoogleTest and GoogleMock libraries are linked correctly.
- **Include Path Errors:** Verify header include paths point to GoogleTest sources.
- **Test Not Running:** Ensure `main` function calls `::testing::InitGoogleTest` and `RUN_ALL_TESTS()`.

<Warning>
If your tests fail to run or compile, review build system configurations and validate environment requirements as outlined in the Installation guides.
</Warning>

## 8. Next Steps

After basic configuration and initial test target setup, proceed to:

- Writing and running your first full-featured tests.
- Exploring advanced mocking features in GoogleMock.
- Integrating GoogleTest/GoogleMock with your preferred build system.

For these, refer to respective documents:

- [Writing and Running Your First Test](/getting-started/configuration-first-test/writing-first-test)
- [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- [Installation and Build Instructions](/getting-started/prerequisites-installation)

---

_This summary page is part of the Getting Started collection and complements related guides on test writing and validation._


---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock Getting Started Guide](https://google.github.io/googletest/gmock_for_dummies.html)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)  

---