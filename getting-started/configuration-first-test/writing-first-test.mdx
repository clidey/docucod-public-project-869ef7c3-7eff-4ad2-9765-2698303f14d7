---
title: "Writing and Running Your First Test"
description: "A hands-on tutorial for writing your very first unit test case with GoogleTest, compiling it, and running the test binary. Ensures users see concrete success and understand the feedback loop."
---

# Writing and Running Your First Test

A hands-on tutorial for writing your very first unit test case with GoogleTest, compiling it, and running the test binary. This guide ensures you see concrete success and understand the feedback loop of test execution.

---

## 1. Prerequisites

Before writing and running your first test, ensure you have:

- A supported development environment for C++ with a compatible compiler (see [System Requirements & Supported Platforms](../prerequisites-installation/requirements-platforms) for details).
- GoogleTest and GoogleMock installed and integrated into your project (refer to installation guides such as [Installation with CMake](../prerequisites-installation/installation-cmake) or [Installation with Bazel](../prerequisites-installation/installation-bazel)).
- Basic familiarity with C++ and your chosen build system.

<Tip>
If you have not installed GoogleTest yet, start with the installation guides linked above before continuing with this tutorial.
</Tip>

---

## 2. Writing Your First Test

The core idea behind GoogleTest is to write tests as C++ functions using macros and assertions. Here's how to create your first simple test case.

### Step 1: Include GoogleTest Headers

At the top of your test source file, include the necessary headers:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Test with `TEST()` Macro

Use the `TEST()` macro to define a test function. It takes two parameters:

- **Test Suite Name**: Logical grouping of related tests.
- **Test Name**: A meaningful name for this individual test.

Example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}
```

### Step 3: Implement Simple Assertions

Within the test body, use assertions to check conditions. Examples include:

- `EXPECT_EQ(expected, actual)`: verifies equality.
- `ASSERT_TRUE(condition)`: verifies that a condition is true and aborts the test if false.

Example:

```cpp
EXPECT_EQ(Factorial(1), 1);
EXPECT_EQ(Factorial(3), 6);
```

<Tip>
Prefer `EXPECT_*` assertions for non-fatal failures that allow the test to continue, and `ASSERT_*` for fatal failures that should stop test execution.
</Tip>

### Complete Example Test Program

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

---

## 3. Building Your Test

### Step 1: Set Up Your Build Environment

Ensure GoogleTest libraries are linked with your test program. For example, with CMake:

```cmake
add_executable(my_test my_test.cc)
target_link_libraries(my_test gtest_main gmock)
```

Or with Bazel, include Googletest dependencies as illustrated in [Installation with Bazel](../prerequisites-installation/installation-bazel).

### Step 2: Compile the Test Binary

Build your test binary via your build tool:

```bash
# For CMake-generated Makefiles
make my_test

# For Bazel
bazel build //path/to:my_test
```

<Tip>
If you encounter build errors, verify that your include paths and linking against GoogleTest and GoogleMock libraries are correctly configured.
</Tip>

---

## 4. Running Your First Test

### Step 1: Execute the Test Binary

Run your compiled test binary from the command line:

```bash
./my_test
```

### Step 2: Interpret the Output

- Successful tests print output similar to:

```shell
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

- If any tests fail, GoogleTest summarizes failures with detailed messages and source locations.

### Step 3: Use Flags to Control Test Execution

GoogleTest supports command-line flags for filtering, output formats, and verbosity. For instance, to run only one test:

```bash
./my_test --gtest_filter=FactorialTest.HandlesZeroInput
```

Learn more about flags in [GoogleTest Primer](../overview/intro-product-values/product-intro).

---

## 5. Troubleshooting Your First Test

### Common Issues and Solutions

| Issue                         | Cause                          | Solution                                                  |
|-------------------------------|-------------------------------|-----------------------------------------------------------|
| Test binary not found          | Build failed or wrong path     | Check build output and confirm binary location             |
| Unsatisfied assertion messages | Test failed assertion          | Review test code and test data for correctness             |
| Linker errors on `gtest` libs | Missing libraries in linker    | Confirm linking against `gtest` and `gmock` libraries      |

<Tip>
Enabling verbose builds and testing with `--gtest_break_on_failure` can aid debugging.
</Tip>

---

## 6. Next Steps

- Explore the guide on [Writing Effective Assertions](../../guides/core-workflows/rich-assertions) to deepen your understanding of test verification.
- Learn about test fixtures in the [GoogleTest Primer](../../docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests) to share setup across multiple tests.
- Begin working with mocking in C++ by reviewing the [gMock Cookbook](../../docs/gmock_cook_book.md) once you're comfortable with basic tests.

<Info>
You are in the "Getting Started" section. Consider reading related pages such as [Basic Configuration & Project Setup](../configuration-first-test/basic-configuration) and [Validating Your Setup](../configuration-first-test/validating-setup) for comprehensive onboarding.
</Info>

---

## Example Minimal Test with Mock

If you're interested in incorporating mocks quickly, here's an example of mocking an interface `Foo`:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class Foo {
 public:
  virtual ~Foo() = default;
  virtual int Bar(int n) = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, Bar, (int n), (override));
};

TEST(FooTest, ReturnsExpectedValue) {
  MockFoo mock_foo;
  EXPECT_CALL(mock_foo, Bar(5)).WillOnce(::testing::Return(10));

  int result = mock_foo.Bar(5);
  EXPECT_EQ(result, 10);
}
```

Compile and run as above to verify mocking correctness.

---

## Summary

This page showed you how to write and run your first unit test using GoogleTest. You now know how to:

- Write your first assertion in a test case using `TEST()`.
- Compile your test program with GoogleTest and GoogleMock.
- Run the test executable and interpret results.
- Troubleshoot common setup or run-time issues.

Harness these skills as your first step toward mastering effective C++ testing workflows.

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/writing-your-first-test.md", "range": "all"}]} />