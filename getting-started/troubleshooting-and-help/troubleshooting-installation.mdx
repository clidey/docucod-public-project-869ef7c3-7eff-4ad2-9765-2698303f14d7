---
title: "Troubleshooting Installation & Setup"
description: "Designed to preempt the most common setup and integration errors, this guide covers typical issues (missing headers, linking errors, C++ standard mismatches), with clear solutions and tips for all supported platforms."
---

# Troubleshooting Installation & Setup

This guide is designed to help you quickly identify and resolve the most common issues encountered during the installation, setup, and integration of GoogleTest. Whether you face missing headers, linker errors, or compiler complaints about C++ standard mismatches, this resource provides concrete solutions and actionable tips applicable across all supported platforms.

---

## 1. Missing Headers or Include Files

### Problem:
You encounter compiler errors indicating that GoogleTest headers such as `gtest/gtest.h` or `gmock/gmock.h` cannot be found.

### Causes & Solutions:

- **Incorrect include path configuration:**
  - Ensure your build system includes the `googletest/include` directory.
  - For CMake users, add the following to your `CMakeLists.txt`:

    ```cmake
    target_include_directories(your_test_target PRIVATE ${GTEST_SOURCE_DIR}/include)
    ```

- **Source files missing from the project or build:**
  - Verify that the GoogleTest source files are correctly added to your build.
  - When using CMake, use `add_subdirectory(googletest)` or link to an installed version.

- **Incorrect repository or release version checked out:**
  - Make sure you have the correct and complete GoogleTest sources cloned or downloaded.
  - For releases, check out a stable tag (e.g., `v1.17.0`).

<Check>
Tip: You can verify header locations by inspecting the `googletest/include/gtest` directory in your source tree.
</Check>

---

## 2. Undefined References or Linker Errors

### Problem:
Linking fails with undefined references to GoogleTest symbols, e.g., `undefined reference to 'testing::InitGoogleTest'`.

### Causes & Solutions:

- **GoogleTest libraries not linked:**
  - Make sure to link against the correct GoogleTest targets.
  - With CMake, this usually involves linking `gtest` or `gtest_main`:

    ```cmake
    target_link_libraries(your_test_target gtest_main)
    ```

- **Mixing static and shared runtime libraries on Windows:**
  - Ensure consistent runtime linkage settings between your project and GoogleTest.
  - For Visual Studio, set the `gtest_force_shared_crt` option if needed.

- **Static constant members defined only in-class:**
  - For classes with `static const` members, provide an out-of-class definition without initializer in a `.cc` file.

    ```cpp
    // In foo.cc
    const int Foo::kBar;
    ```

  - If the member is declared as `constexpr`, no out-of-class definition is necessary.

- **Multiple GoogleTest versions or mismatches:**
  - Clean your build caches and rebuild everything from scratch.
  - Avoid mixing system-installed and locally built GoogleTest versions.

---

## 3. Compiler Complains About C++ Standard or Language Features

### Problem:
Build errors indicate missing C++17 support or incompatible standard version.

### Causes & Solutions:

- **Compiler Incompatibility or Older Standards:**
  - GoogleTest requires a C++17-compliant compiler.
  - Ensure your compiler flags specify at least C++17:

    ```cmake
    set(CMAKE_CXX_STANDARD 17)
    set(CMAKE_CXX_STANDARD_REQUIRED ON)
    ```

  - For manual build commands, add `-std=c++17` (GCC/Clang) or `/std:c++17` (MSVC).

- **Build system overrides or conflicting flags:**
  - Verify no other flags override the standard version in your build.

- **Using GoogleTest in a C project:**
  - Enable C++17 flags explicitly when integrating with non-C++ projects.

---

## 4. Linking Issues with Static or Const Members

### Problem:
```
undefined reference to `ClassName::kConstMember`
```

### Explanation & Solution:

- Static members declared inside a class but lacking an out-of-class definition cause linker errors.
- Provide an explicit definition in the implementation file:

  ```cpp
  const int ClassName::kConstMember; // no initializer here
  ```

- For `constexpr` static members, no separate definition is necessary.

---

## 5. Resolving Undesired Underscore Usage in Test Suite and Test Names

### Problem:
Unusual compile errors or runtime errors related to test naming.

### Explanation:

- GoogleTest requires that test suite names and test names should *not* contain underscores (`_`) to avoid name collision and reserved identifier issues.

### Recommended Fix:

- Rename tests to avoid leading, trailing, or multiple underscores in `TEST` or `TEST_F` macros.

  ```cpp
  // Avoid
  TEST(My_Suite, Test_Name) { ... }

  // Prefer
  TEST(MySuite, TestName) { ... }
  ```

- This prevents subtle issues on some compilers or future versions of GoogleTest.

---

## 6. Framework Initialization and Running Tests

### Common Mistakes:
- Not initializing GoogleTest properly before running tests
- Ignoring the return value of `RUN_ALL_TESTS()`

### Correct Usage:

- Call `testing::InitGoogleTest(&argc, argv);` before running tests
- Always return the value of `RUN_ALL_TESTS();` from your main function

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## 7. Tips for Common Platform-Specific Problems

### Windows:
- Runtime library mismatch errors can often be fixed by adding `-Dgtest_force_shared_crt=ON` in CMake
- Use Visual Studio solution files provided or generate them via CMake

### Linux and macOS:
- Ensure proper `-pthread` flags for thread support
- Clean previous build artifacts to avoid stale configuration

---

## 8. Additional Troubleshooting Best Practices

### Clean and Rebuild

Always perform a clean rebuild after configuration changes or when errors persist.

```shell
rm -rf build/*
cmake ..
make -j$(nproc)
```

### Check Build Logs

Look for missing include directories, undefined symbol errors, or warnings about incompatible standards.

### Double Check Sources

Verify that your build includes the GoogleTest source files if you are building from source, or links against installed binaries correctly.

### Use Community Resources

- Consult [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md) for in-depth answers
- Reference platform-specific setup notes in [Supported Platforms](docs/platforms.md)

---

## 9. When to Get Help

If your issues persist beyond these tips:

- Review the official GitHub repository issues and discussions
- Use GoogleTest's mailing list and community forums
- Refer to related documentation sections:
  - [Getting Started Installation](getting-started/setup-basics/installation-instructions.md)
  - [Configuration & Setup](getting-started/setup-basics/configuration-setup.md)
  - [Using and Writing Tests](getting-started/first-test-experience/write-first-test.md)

---

For a smooth onboarding experience, consider following the [Quick Validation & Sample Tests](getting-started/first-test-experience/quick-validation-steps.mdx) to verify that your setup is working correctly.

---

# Summary
| Common Issue                     | Recommended Action                                 |
| ------------------------------- | ------------------------------------------------- |
| Missing headers                 | Add correct include paths, verify source files    |
| Linker errors                  | Link against `gtest` or `gtest_main`, define static members |
| C++ standard errors            | Compile with C++17 or higher                        |
| Underscores in test names      | Remove underscores from test suite and test names |
| Wrong `main()` usage           | Call `InitGoogleTest()` and return `RUN_ALL_TESTS()` |

---

<Info>
Following these steps will resolve the vast majority of installation and setup issues. Address each symptom methodically, and your GoogleTest environment will be stable and ready for productive testing.
</Info>

---

# Examples

### Example: Adding Include and Linking with CMake

```cmake
add_executable(my_tests test_main.cc foo_test.cc)
target_include_directories(my_tests PRIVATE ${GTEST_SOURCE_DIR}/include)
target_link_libraries(my_tests gtest_main)
```

### Example: Proper Main Function

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

# Troubleshooting Checklist

- [x] Verify header files are found during compilation
- [x] Ensure linkage with required GoogleTest libraries
- [x] Confirm C++17 or higher is enabled
- [x] Avoid underscores in test and test suite names
- [x] Return `RUN_ALL_TESTS()` in `main()`
- [x] Perform clean rebuild when changing build configs

---

# References
- [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md)
- [GoogleTest Primer](docs/primer.md)
- [Installation Instructions](getting-started/setup-basics/installation-instructions.md)
- [Configuration and Setup](getting-started/setup-basics/configuration-setup.md)
- [Quick Validation Steps](getting-started/first-test-experience/quick-validation-steps.mdx)