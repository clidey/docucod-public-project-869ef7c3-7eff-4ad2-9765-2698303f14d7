---
title: "Common Installation & Configuration Issues"
description: "A troubleshooting guide covering frequent installation, build, and integration problems such as linking errors, missing headers, and platform compatibility. Includes proven workarounds and directs users to further resources and FAQs."
---

# Common Installation & Configuration Issues

This guide addresses the most frequent problems encountered during the installation, build, and integration of GoogleTest and GoogleMock. It provides proven workarounds and points to additional resources for deep troubleshooting.

---

## 1. Header Files Not Found or Missing

### Problem
Compilation fails because the compiler cannot find `gtest/gtest.h` or `gmock/gmock.h`.

### Causes
- Include paths are not configured correctly.
- GoogleTest/GoogleMock headers are not installed or cloned.

### How to Fix
1. Verify you have cloned GoogleTest repository:

   ```bash
   git clone https://github.com/google/googletest.git
   ```

2. Ensure your project's build system includes the headers' directory:

   - For CMake, add:

     ```cmake
     target_include_directories(your_target PRIVATE path/to/googletest/include)
     ```

3. If you use GoogleMock, include its headers similarly:

   ```cmake
   target_include_directories(your_target PRIVATE path/to/googlemock/include)
   ```

4. When using Bazel or other build systems, make sure the dependencies include googletest and googlemock appropriately.

---

## 2. Linking Errors: Undefined References to GoogleTest/GoogleMock Symbols

### Problem
Link-time errors such as `undefined reference to 'testing::InitGoogleTest'` or similar.

### Causes
- GoogleTest/GoogleMock libraries are not linked properly.
- Using static/dynamic linking inconsistently.

### How to Fix
1. **Link with `gtest` and `gmock` libraries:**

   Add linker flags for your test target:

   ```cmake
   target_link_libraries(your_test_target PRIVATE gtest gmock)
   ```

2. **Static vs Dynamic Linking:**

   GoogleTest supports linking as static or shared libraries. Make sure your build system builds and links them consistently.

3. **Building the Libraries:**

   Build GoogleTest and GoogleMock before linking them:

   ```bash
   cmake .
   make
   ```

4. **Using FetchContent or ExternalProject:**

   Prefer modern CMake integration (FetchContent) which handles building and linking automatically. See [Integration with Build Systems](/overview/quickstart-integration/integration-options) for details.

---

## 3. Mixing GoogleTest and GoogleMock Causes Linking or Compilation Problems

### Problem
Errors when including or linking GoogleMock tests, such as missing symbols or macro issues.

### Causes
- GoogleMock headers and libraries not correctly included/linked.
- Confusion between GoogleTest and GoogleMock packages.

### How to Fix
1. Include the GoogleMock header before the GoogleTest header if both are directly referenced:

   ```cpp
   #include <gmock/gmock.h>
   #include <gtest/gtest.h>
   ```

2. Link against both GoogleTest and GoogleMock libraries:

   ```cmake
   target_link_libraries(your_test_target PRIVATE gtest gmock)
   ```

3. If you only want Google's public interface, just include GoogleMock as it includes GoogleTest internally.

4. Use the latest GoogleTest release which bundles GoogleMock for simpler integration.

---

## 4. Compiler Compatibility and C++ Standards

### Problem
Errors during build related to C++ standards or unsupported compiler versions.

### Causes
- Using an unsupported compiler or older standard.
- GoogleTest and GoogleMock require at minimum C++17.

### How to Fix
1. Ensure your compiler supports C++17 or higher.

2. Set compiler flags correctly:

   - For GCC/Clang:

     ```bash
     -std=c++17
     ```

   - For MSVC:

     ```bat
     /std:c++17
     ```

3. Check [System Requirements](/getting-started/prerequisites-installation/system-requirements) documentation for supported compilers and platforms.

---

## 5. Build Errors with Overloaded Methods or Methods with Commas in Signatures

### Problem
Compilation failures when mocking methods that have parameters or return types involving commas (e.g. `std::pair<int, int>`).

### Causes
- `MOCK_METHOD` macro parsing issues due to unprotected commas.

### How to Fix
1. Wrap complex types in extra parentheses:

   ```cpp
   MOCK_METHOD((std::pair<int, int>), GetPair, ());
   ```

2. Or create type aliases to simplify:

   ```cpp
   using IntPair = std::pair<int, int>;
   MOCK_METHOD(IntPair, GetPair, ());
   ```

3. Ensure mock methods are declared in `public` scope to avoid access issues.

---

## 6. Uninteresting vs Unexpected Calls Generate Warnings or Failures

### Problem
You see output warnings like "Uninteresting mock function call" or errors about unexpected calls during test execution.

### Understanding the Causes
- **Uninteresting Calls:** Methods on mocks called without an explicit `EXPECT_CALL`.
- **Unexpected Calls:** Calls that don't match any specified `EXPECT_CALL` expectation.

### How to Fix or Control Behavior
1. Use `NiceMock<T>` to suppress uninteresting call warnings:

   ```cpp
   NiceMock<MockClass> mock;
   ```

2. Use `StrictMock<T>` to treat uninteresting calls as errors.

3. Add catch-all expectations to suppress warnings for methods that may be called but are not under test:

   ```cpp
   EXPECT_CALL(mock, SomeMethod(_)).Times(AnyNumber());
   ```

4. Remember to set `EXPECT_CALL` before the methods are invoked, as expectations must be declared ahead of time.

See [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html#uninteresting-vs-unexpected) for detailed explanations.

---

## 7. Problems with Mock Classes Containing Non-Default Constructors

### Problem
Errors or warnings when using `NiceMock`, `NaggyMock`, or `StrictMock` with mock classes that do not have a default constructor.

### How to Fix
1. Use the constructor forwarding feature of `NiceMock` and others:

   ```cpp
   NiceMock<MockClass> mock(arg1, arg2);
   ```

2. Verify that the mock class has a virtual destructor for proper strictness behavior.

3. Ensure that mock classes with many constructor parameters properly forward them in the strictness wrapper. Refer to examples in [docs/gmock-nice-strict_test.cc](https://github.com/google/googletest/blob/main/googlemock/test/gmock-nice-strict_test.cc).

---

## 8. Using ON_CALL vs EXPECT_CALL

### Common Confusion
- `ON_CALL` defines default behavior but does not create expectations.
- `EXPECT_CALL` creates expectations and optionally defines behaviors.

### Recommended Practice
- Use `ON_CALL` for setting up common default mock method behaviors that do not need verification.
- Use `EXPECT_CALL` for setting expectations to verify that a method should be called.

Example:

```cpp
ON_CALL(mock, Method(_)).WillByDefault(Return(true));
EXPECT_CALL(mock, Method(5));  // Verifies Method(5) is called.
```

---

## 9. Tips for Isolating Troubleshooting

- Use verbose logging by running your tests with `--gmock_verbose=info` to see detailed mock call info.
- Use lightweight mock classes to isolate failures.
- Verify expectations manually with `testing::Mock::VerifyAndClearExpectations(&mock)`.
- Suppress spurious warnings with `NiceMock` if they're irrelevant.
- Check platform-specific quirks in the [System Requirements](/getting-started/prerequisites-installation/system-requirements).

---

## 10. Links to Further Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) — Beginner-friendly introduction
- [gMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html) — Quick syntax reference
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) — Detailed API information
- [Integration Options](/overview/quickstart-integration/integration-options) — About build system integration
- [System Requirements](/getting-started/prerequisites-installation/system-requirements) — Platform and compiler compatibility
- [Validating Your Installation](/getting-started/configuration-quickstart/validate-install) — Steps to verify your setup is correct

---

<Info>
Ensure the compiler and build system versions align with GoogleTest's requirements and that you consistently include and link both GoogleTest and GoogleMock when using mocks.
</Info>

<Warning>
Avoid setting `EXPECT_CALL` expectations after the mock methods have been invoked, as this leads to undefined behavior.
</Warning>

---

## Troubleshooting Summary Table

| Problem                                    | Likely Cause                          | Quick Fix                                    |
|--------------------------------------------|-------------------------------------|----------------------------------------------|
| Header not found                           | Include paths missing                | Add GoogleTest/GoogleMock headers to include paths |
| Undefined reference at link time          | Libraries not linked                 | Link with `gtest` and `gmock` libraries      |
| Uninteresting call warnings                | No `EXPECT_CALL` on called method   | Use `NiceMock` or add catch-all `EXPECT_CALL` with `AnyNumber()` |
| Unexpected call errors                     | Calls not matching `EXPECT_CALL`    | Correct expectations or add catch-all `EXPECT_CALL` |
| Compilation errors with overloaded methods| Incorrect `MOCK_METHOD` syntax       | Wrap types with parentheses or use type aliases |
| Non-default constructor mock fails in wrappers| Incorrect constructor forwarding    | Pass constructor args to `NiceMock`/`StrictMock` |

---

For a broad view and advanced troubleshooting, consult the [Getting Started Guide](/overview/quickstart-integration/getting-started) and the [Integration Options](/overview/quickstart-integration/integration-options).