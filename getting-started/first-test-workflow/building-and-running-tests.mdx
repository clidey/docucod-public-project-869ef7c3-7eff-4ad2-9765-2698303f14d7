---
title: "Building and Running Tests"
description: "Guides users through building and executing the tests they've written using GoogleTest and GoogleMock. Covers both command-line and IDE workflows, including key entry points, to empower users to see their test output quickly."
---

# Building and Running Tests

This guide walks you through the essential steps to build and execute your GoogleTest and GoogleMock tests. Whether you prefer command-line workflows or IDE integration, this documentation helps you quickly see your test outcomes and understand the key entry points.

---

## 1. Preparing Your Test Environment

Before you build and run your tests, ensure the following:

- Your system meets the [System Requirements](https://github.com/google/googletest/tree/main/getting-started/prerequisites-installation/system-requirements).
- GoogleTest and GoogleMock are installed and integrated into your project build system.
- Your source contains test cases written using GoogleTest (`TEST` / `TEST_F`) and optionally GoogleMock for mocks.

If you haven’t yet, see `Writing Your First Test` to create your test source files.


## 2. Building Your Tests

GoogleTest and GoogleMock provide headers and libraries to compile your tests. You can build tests using standard C++ build systems with the proper include paths and libraries linked.

### Typical Build Steps:

1. **Add Include Paths:** Ensure your compiler can find GoogleTest and GoogleMock headers (e.g., `-I/path/to/googletest/include`).

2. **Link Libraries:** Link with `gtest` and `gmock` libraries, or their combined binary `gmock_main` which also includes a ready-made `main()` function.

3. **Compile Your Test Sources:** Compile your test `.cc` or `.cpp` files along with the GoogleTest and GoogleMock source files or link the pre-built libraries.

### Using gmock_main/gtest_main

If you link your tests against `gmock_main` (or `gtest_main` for tests without mocks), a suitable `main()` function is automatically provided. Otherwise, you will need to write your own `main()` that calls `testing::InitGoogleTest()` and `RUN_ALL_TESTS()`.

> **Example:**
> 
> ```sh
> g++ -std=c++17 -isystem /usr/local/include -pthread \
>     test_sample.cpp \
>     -L/usr/local/lib -lgmock_main -lgtest -lpthread -o test_sample
> ```

### Building on Different Platforms

Refer to platform-specific installation and build guides:

- [Installing on Windows](https://github.com/google/googletest/tree/main/getting-started/prerequisites-installation/installing-on-windows)
- [Installing on Linux/macOS](https://github.com/google/googletest/tree/main/getting-started/prerequisites-installation/installing-on-linux-macos)
- [Alternative Build Systems](https://github.com/google/googletest/tree/main/getting-started/prerequisites-installation/alternative-build-systems)


## 3. Running Your Tests

Once built, your test executable can be run directly, either from the command line or through your IDE’s test runner.

### Run via Command Line

Simply execute your test binary:

```sh
./test_sample
```

This launches the tests, runs each registered test automatically, and reports status on the console.

### Program Entry Point

- If you link with `gmock_main` or `gtest_main`, the executable already includes the `main()` function that initializes GoogleTest/GoogleMock and calls `RUN_ALL_TESTS()` for you.
- If not, your test binary must contain a `main()` function similar to this:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Understanding `RUN_ALL_TESTS()`

This function runs every registered test in your linked unit, from all test suites and source files. It returns `0` if all tests pass, or `1` if any test fails.


## 4. Observing Test Output

When you run tests, GoogleTest outputs results grouped by test suites with details on pass/fail status.

Example output:

```
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
test.cpp:10: Failure
Expected equality of these values:
  Factorial(2)
    Which is: 1
  2
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
[ RUN      ] FactorialTest.HandlesLargeInput
[       OK ] FactorialTest.HandlesLargeInput (0 ms)
[----------] 3 tests from FactorialTest (2 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (2 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput

1 FAILED TEST
```

### Controlling Output Verbosity

GoogleTest supports various flags to adjust the output:

- `--gtest_filter=` to run selected tests
- `--gtest_repeat=` to rerun tests multiple times
- `--gtest_break_on_failure` to trigger debugger on failures
- `--gtest_output=xml` to generate XML formatted test reports

Explore these flags to customize your test runs.


## 5. Running Tests Within an IDE

Most modern IDEs support GoogleTest integration:

- Visual Studio via the native test adapter or extensions
- CLion with built-in GoogleTest support
- Eclipse, VSCode with plugins

These IDE tools detect your tests, allow running/debugging tests individually or in groups, and visualize test results.

Follow your specific IDE instructions to:

1. Configure project include paths and linkage
2. Detect tests automatically or specify test binaries
3. Run and debug tests interactively


## 6. Troubleshooting Common Run Issues

<AccordionGroup title="Common Problems When Building and Running Tests">
<Accordion title="Tests Don’t Run or No Tests Found">
Check that your tests are correctly defined using macros like `TEST()` or `TEST_F()`. Also verify your test executable actually links with GoogleTest or GoogleMock correctly. Missing or incorrect linkage can cause no registered tests to run.
</Accordion>
<Accordion title="Linker Errors Related to `main()`">
If you provide your own `main()` but link against `gmock_main` or `gtest_main`, you might have duplicate definitions. Choose whether to write your own `main()` or link against GoogleTest's provided main library, not both.
</Accordion>
<Accordion title="Tests Not Detected by IDE">
Make sure your test source files are compiled and linked in your project. Some IDEs require specific project configurations or file extensions to detect tests.
</Accordion>
<Accordion title="Test Crashes or Hangs">
Investigate failing or infinite loops in your test code. Use debugger integration or run tests under sanitizers (AddressSanitizer, ThreadSanitizer) to locate issues.
</Accordion>
<Accordion title="Flags Not Affecting Test Execution">
Initialize GoogleTest properly by calling `testing::InitGoogleTest(&argc, argv)` before running `RUN_ALL_TESTS()` to ensure flags are properly parsed.
</Accordion>
</AccordionGroup>


## 7. Example: Build and Run a Simple Test

### Test Source (`factorial_test.cpp`)

```cpp
#include <gtest/gtest.h>

int Factorial(int n) { return n <= 1 ? 1 : n * Factorial(n - 1); }

TEST(FactorialTest, HandlesZeroInput) {
    EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
    EXPECT_EQ(Factorial(1), 1);
    EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char** argv) {
    testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

### Build Command

```sh
g++ -std=c++17 factorial_test.cpp -lgtest -lpthread -o factorial_test
```

### Run Command

```sh
./factorial_test
```

Output will show test success or failure details on your console.


## 8. Additional References

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) - Learn how to write tests
- [GoogleMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md) - Advanced mocking
- [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md) - Macro and class reference
- [Running Tests Guide](https://github.com/google/googletest/tree/main/guides/getting-started/first-test-workflow/building-and-running-tests) - Official guide to build and run

---

<Tip>
Link with `gmock_main` or `gtest_main` libraries to avoid writing your own `main()`. This accelerates test setup and focuses your efforts on writing tests.
</Tip>

<Note>
Always ensure that you call `testing::InitGoogleTest()` with your command-line arguments before running `RUN_ALL_TESTS()`, so all GoogleTest flags are recognized and parsed.
</Note>

<Warning>
Mixing different C++ runtime linkage (static vs dynamic) on Windows can cause build and runtime errors when linking GoogleTest libraries. Ensure consistent runtime settings across your project and GoogleTest build.
</Warning>
