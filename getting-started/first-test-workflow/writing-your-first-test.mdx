---
title: "Writing Your First Test"
description: "Create and understand a basic test using GoogleTest. This walkthrough covers essential test constructs, the test executable’s main entry point, and how to express simple assertions."
---

# Writing Your First Test with GoogleTest

This walkthrough helps you create and understand a basic test using GoogleTest. You will learn how a simple test is structured, where the main entry point is, and how to write assertions to validate your code.

---

## 1. Understanding the Test Structure

GoogleTest tests are organized into **test cases** and individual **tests** within them. A test case groups tests that share a common setup or context.

### Basic Components

- **TEST macro**: Defines a test function with two parameters: the test case name and the test name.
- **Assertions**: Statements used to verify conditions; the simplest is `EXPECT_TRUE` or `ASSERT_EQ`.

### Minimal Example

```cpp
#include <gtest/gtest.h>

// Test case name: ExampleTest
// Test name: SimpleAssertion
TEST(ExampleTest, SimpleAssertion) {
  int result = 2 + 2;
  EXPECT_EQ(result, 4);  // Asserts that result == 4
}
```

> The above test checks that 2 + 2 equals 4 using the `EXPECT_EQ` assertion.

## 2. The Test Executable’s Main Entry Point

All GoogleTest test executables must call `testing::InitGoogleTest()` and `RUN_ALL_TESTS()` in `main()`. GoogleTest provides a default `main()` implementation in `gtest_main` or `gmock_main`, so you can link to those to avoid writing your own.

### Typical Main Function

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- This initializes GoogleTest with command line arguments and runs all tests discovered.
- When linking with `gtest_main` or `gmock_main`, this main is provided for you.

## 3. Expressing Simple Assertions

Assertions verify conditions in tests and generate success or failure reports.

### Common Assertion Macros

| Macro             | Behavior                                | Use When                                      |
|-------------------|---------------------------------------|-----------------------------------------------|
| `EXPECT_EQ(val1, val2)` | Continue test on failure               | Check for equality where test should proceed even if failure occurs |
| `ASSERT_EQ(val1, val2)` | Abort current test on failure          | Useful where continuing makes no sense if failed (e.g., invalid state) |
| `EXPECT_TRUE(condition)`| Checks that condition is true          | For boolean condition checks                   |
| `ASSERT_TRUE(condition)`| Same as above, aborts on failure       |                                               |

### Sample Usage

```cpp
TEST(MathTest, Addition) {
  int sum = 3 + 5;
  EXPECT_EQ(sum, 8);        // Passes
  EXPECT_TRUE(sum > 5);     // Passes
  ASSERT_EQ(sum, 9);        // Fails and aborts this test
  // Code below won't run if ASSERT_EQ fails
  EXPECT_EQ(sum, 10);       // Not reached if ASSERT_EQ fails
}
```

## 4. Step-by-Step: Write and Run Your First Test

Here's a practical workflow that takes you through writing, building, and running your very first GoogleTest.

### Step 1: Create a Test File

Create a C++ file, for example `example_test.cc`.

### Step 2: Write a Basic Test

```cpp
#include <gtest/gtest.h>

TEST(BasicMathTest, AdditionWorks) {
  EXPECT_EQ(1 + 1, 2);
}
```

### Step 3: Build Your Test

Make sure to:

- Include the GoogleTest headers and link with the GoogleTest library.
- Link against `gtest_main` if you do not provide your own `main()` function.

For example, if you are using `g++` and CMake, your setup might look like:

```bash
# Assuming googletest installed or downloaded
g++ example_test.cc -lgtest -lgtest_main -pthread -o example_test
```

### Step 4: Run the Test Executable

Run your test binary:

```bash
./example_test
```

GoogleTest will run all tests and report results:

```plaintext
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from BasicMathTest
[ RUN      ] BasicMathTest.AdditionWorks
[       OK ] BasicMathTest.AdditionWorks (0 ms)
[----------] 1 test from BasicMathTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Step 5: Interpret the Results

- `PASSED` means all tests passed.
- Failures will be accompanied by the file and line number and a failure explanation.

## 5. Practical Tips and Best Practices

- **Name your test cases and tests clearly.**
- **Use assertion macros suited to the needs**: `EXPECT_` for soft failures, `ASSERT_` for hard failures.
- **Keep tests independent.** Each test should be self-contained and repeatable.
- **Use `gtest_main` or `gmock_main`** libraries to simplify test binaries.
- **Check output carefully** during failures for the source and reason.

## 6. Common Pitfalls and Troubleshooting

- Forgetting to link with GoogleTest libraries or `pthread` can cause linker errors.
- Omitting `InitGoogleTest` in main causes tests to not run.
- Mixing `EXPECT_` and `ASSERT_` without understanding difference can lead to confusing results.

<Tip>
If your test executable runs but reports zero tests, check that your tests are properly defined using the `TEST` macro and that your source files are part of the build.
</Tip>

---

For next steps, proceed to the **Running and Validating Your Tests** documentation to dive deeper into running your tests, analyzing output, and advanced test patterns.

---

## References and Additional Resources

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Writing and Running Unit Tests Guide](/guides/core-workflows/writing-tests)
- [GoogleMock Introduction and Usage](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md)
- [GoogleTest API Reference](https://github.com/google/googletest/blob/main/googlemock/docs/reference.md)


---

## See Also

- Getting started with [Basic Configuration](/getting-started/installation-prerequisites/basic-configuration)
- [Test Cases & Fixtures Overview](/api-reference/core-testing-apis/test-case-and-fixture-api)
- Understanding [Assertions & Expectations](/api-reference/core-testing-apis/assertions-and-expectations-api)

---

<Source url="https://github.com/google/googletest" paths={[{"path": "docs/gmock_for_dummies.md", "range": "0-400"},{"path": "docs/reference/mocking.md", "range": "0-400"}]} />