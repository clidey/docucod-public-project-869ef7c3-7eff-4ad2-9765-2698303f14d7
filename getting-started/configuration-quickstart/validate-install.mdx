---
title: "Validating Your Installation"
description: "Quick checks and sample commands to make sure GoogleTest and GoogleMock are correctly installed and ready to run tests. Covers compiler invocations, expected outputs, and how to interpret the success or failure of your setup."
---

# Validating Your Installation

Ensure your GoogleTest and GoogleMock setup is correctly installed and ready to run tests by performing a series of quick validation checks. This page provides practical commands, expected outputs, and guidance to interpret your test environmentâ€™s health, so you can confidently move forward with writing and running your tests.

---

## 1. Overview

Validation confirms that GoogleTest and GoogleMock libraries and headers are properly integrated in your build environment. Running a minimal test executable helps verify your compiler invocations, linking correctness, and runtime behavior before developing production tests.

### Why Validate?

- **Catch early integration problems** such as mismatched compiler flags, missing libraries, or linking errors.
- **Verify that tests execute as expected** without runtime failures.
- **Ensure the correct version of GoogleTest/GoogleMock is used.**

---

## 2. Prerequisites Before Validation

Before running validation checks, confirm:

- You have built and installed GoogleTest and GoogleMock, or included them properly in your project.
- Relevant compiler and linker flags include GoogleTest and GoogleMock headers and libraries.
- Your C++ environment supports at least C++17.
- You can compile and link simple programs with GoogleTest/GoogleMock.

Refer to the [Installation & Integration Options](../prerequisites-installation/install-integration-options) guide if you have not completed setup.

---

## 3. Running a Basic Validation Test

Use the sample minimal test program below to verify your installation.

### Step 1: Create a Minimal Test File

Create a file `validate_test.cpp` with the following content:

```cpp
#include <gtest/gtest.h>

// Define a simple test suite and test
TEST(ValidationTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Step 2: Compile the Test Program

Compile and link against `gtest_main` or `gmock_main` libraries (the latter includes GoogleMock and GoogleTest). For example, using `g++` and pkg-config:

```bash
// Compile with GoogleTest only
pkg-config --cflags gtest_main
pkg-config --libs gtest_main

g++ validate_test.cpp $(pkg-config --cflags --libs gtest_main) -o validate_test

// Or compile with GoogleMock and GoogleTest
g++ validate_test.cpp $(pkg-config --cflags --libs gmock_main) -o validate_test
```

Ensure `pkg-config` is properly installed with GoogleTest and GoogleMock `.pc` files available (see `gmock_main.pc.in` and `gtest_main.pc.in`).

> **Tip:** Replace `g++` with your compiler of choice and adapt flags based on OS or build system (e.g., CMake).

### Step 3: Run the Test Executable

```bash
./validate_test
```

### Expected Output

```
Running main() from validate_test.cpp
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ValidationTest
[ RUN      ] ValidationTest.BasicAssertions
[       OK ] ValidationTest.BasicAssertions (0 ms)
[----------] 1 test from ValidationTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If the program outputs this success summary and exits with a status code of `0`, your GoogleTest and GoogleMock installation works correctly.

---

## 4. Understanding Success and Failure Signals

### Success Indications

- **Test executable runs without compiler, linker, or runtime errors.**
- Output includes `[  PASSED  ]` message summarizing test success.
- Exit status of `0` confirms tests passed.

### Failure Signs

- **Compiler errors:** Missing headers, undefined references, or wrong library paths.
- **Linker errors:** Symbols related to `gtest` or `gmock` not found.
- **Runtime failures:** Test failures reported with informative error messages or crashes.
- Exit status is non-zero.

### Common Causes & Remedies

| Problem              | Solution                                                                            |
| -------------------- | ---------------------------------------------------------------------------------- |
| Missing header files  | Verify `-I` paths to GoogleTest/GoogleMock includes                               |
| Undefined symbols     | Confirm linking `-lgtest_main`, `-lgmock_main`, or equivalent libraries            |
| Incorrect C++ version | Ensure compiler supports C++17 or later                                           |
| Threading incompatibility | Make sure `-pthread` or relevant thread flags are set during compilation and linking |

For detailed troubleshooting, see [Common Installation & Configuration Issues](../setup-troubleshooting/common-issues).

---

## 5. Advanced Validation: Using GoogleMock

To verify GoogleMock functionality, modify the test as follows:

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetBar, (), ());
};

TEST(MockTest, MockMethodWorks) {
  MockFoo foo;
  EXPECT_CALL(foo, GetBar()).WillOnce(::testing::Return(42));
  EXPECT_EQ(foo.GetBar(), 42);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and link with `gmock_main` library:

```bash
g++ mock_validate_test.cpp $(pkg-config --cflags --libs gmock_main) -o mock_validate_test
./mock_validate_test
```

Successful output matches standard GoogleTest success messages, confirming GoogleMock is properly integrated.

---

## 6. Summary of Compiler Invocations

- Use `gmock_main` to link when you want to use GoogleMock.
- Use `gtest_main` for GoogleTest only.
- Both provide an existing `main()` function calling `RUN_ALL_TESTS()`.

Typical linking flags as reflected in pkg-config files:

```bash
-lpthread -lgmock_main
```

Libraries are installed in locations reflected by variables in `gmock_main.pc.in` and `gtest_main.pc.in`, e.g., `${libdir}` and `${includedir}`.

---

## 7. Troubleshooting Tips

<AccordionGroup title="Troubleshooting Common Validation Issues">
<Accordion title="Build Fails With Missing Headers or Symbols">
- Confirm include directories point to the right GoogleTest/GoogleMock headers.
- Check library paths with `pkg-config --libs gmock_main`.
- For manual build systems, manually specify include/library paths matching `@CMAKE_INSTALL_FULL_INCLUDEDIR@` and `@CMAKE_INSTALL_FULL_LIBDIR@` settings.
</Accordion>
<Accordion title="Tests Fail at Runtime or Crash">
- Check if your compiler and linker flags enable required threading support.
- Use `-DGTEST_HAS_PTHREAD=1` if necessary.
- Make sure to call `InitGoogleMock(&argc, argv)` or `InitGoogleTest(&argc, argv)` before `RUN_ALL_TESTS()`.
- Verify you are not calling `RUN_ALL_TESTS()` multiple times.
</Accordion>
<Accordion title="Linker Errors on Windows with Unicode">
- Refer to known MSVC issues noted in `gmock_main.cc`.
- Use the `main` function variant provided by GoogleMock.
- Match runtime linkage flags as appropriate (static vs dynamic CRT).
</Accordion>
</AccordionGroup>

---

## 8. Confirming Your Setup

Once successful validation is achieved:

- Your test build system correctly includes GoogleTest and GoogleMock.
- You can proceed to write feature tests using the full GoogleTest and GoogleMock APIs.

For next steps, see [Your First Test and Mock](your-first-test) and [Configuring Your Project](configure-project).

<Check>
Always confirm the exit code from your test executable is 0 for a successful validation.
</Check>

---

## 9. Additional Resources

- [GoogleTest Primer](../primer) for deeper understanding of writing test cases.
- [Mocking Reference](../reference/mocking) for advanced GoogleMock usage.
- [Installation & Integration Options](../prerequisites-installation/install-integration-options) for setup guidance.

---

You're now equipped to confirm your GoogleTest and GoogleMock installation is reliable and ready for development. Proceed confidently to implementing your tests.
