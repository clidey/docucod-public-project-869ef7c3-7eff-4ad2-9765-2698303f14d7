---
title: "Bazel Integration"
description: "Set up GoogleTest with Bazel, Google's open-source build system, by following detailed project configuration instructions and workspace integration tips."
---

# Bazel Integration with GoogleTest

Set up GoogleTest within your Bazel workspace to build and run C++ tests leveraging Bazel, Googleâ€™s open-source build system. This guide walks you through configuring your workspace, creating test binaries, and running your first GoogleTest tests with Bazel.

---

## 1. Prerequisites & System Requirements

Before integrating GoogleTest with Bazel, ensure you have the following ready:

- **Operating System:** Linux, macOS, or Windows
- **Compiler:** A C++ compiler supporting C++17 or higher (e.g., GCC 7+, Clang, MSVC)
- **Bazel:** Version 7.0 or later installed and configured


<Tip>
If Bazel is not installed, follow the [Bazel installation guide](https://bazel.build/install) to set it up for your platform.
</Tip>

---

## 2. Setting Up Your Bazel Workspace

GoogleTest integrates via Bazel Central Registry modules, starting with a Bazel workspace directory that holds your source and dependencies.

<Steps>
<Step title="Create Your Workspace Directory">
Open your terminal and run:

```sh
mkdir my_workspace && cd my_workspace
```
This initializes your Bazel workspace root.
</Step>

<Step title="Configure Dependencies with MODULE.bazel">
Create a `MODULE.bazel` file in your workspace root to declare GoogleTest as a dependency:

```starlark
# MODULE.bazel

# Specify the GoogleTest module version to use
bazel_dep(name = "googletest", version = "1.17.0")
```

Use the latest module version available on [Bazel Central Registry](https://registry.bazel.build/modules/googletest).
</Step>
</Steps>

<Check>
Ensure your workspace root folder contains `MODULE.bazel` with the correct dependency declaration before proceeding.
</Check>

---

## 3. Creating and Running Your First GoogleTest Binary

With the workspace set, define your test source and build targets.

<Steps>
<Step title="Add Sample Test Source Code">
Create a C++ test file `hello_test.cc` in the workspace directory:

```cpp
#include <gtest/gtest.h>

// Simple test example
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```
This illustrates basic GoogleTest assertions.
</Step>

<Step title="Create Bazel BUILD file">
Create a `BUILD` file in the same directory with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```
This defines a Bazel test target that uses GoogleTest's libraries.
</Step>

<Step title="Build and Run Your Test">
Use Bazel to compile and execute the test:

```sh
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```
Expected outcomes:

- Bazel analyzes and builds the target
- The test runs, showing output similar to:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

- Bazel reports success on the test target
</Step>
</Steps>

<Check>
After running, seeing `[  PASSED  ] 1 test.` confirms a successful setup.
</Check>

---

## 4. Common Tips and Troubleshooting

<Tip>
If you encounter compilation errors,
- Verify your compiler supports C++17.
- Confirm Bazel version is 7.0 or later.
- Double-check your `MODULE.bazel` module version string.
</Tip>

<Warning>
If the test fails to link, ensure your `BUILD` file depends on both `@googletest//:gtest` and `@googletest//:gtest_main` to provide the test library and main function.
</Warning>

<Note>
Bazel test outputs will default to terse mode unless `--test_output=all` is specified to view full logs.
</Note>

---

## 5. Next Steps

Continue your journey with GoogleTest:

- Explore the [GoogleTest Primer](../../guides/getting-started/setup-and-first-test) for writing more complex tests.
- Review the [Core Assertions & Best Practices](../../guides/getting-started/core-assertions-best-practices) for deeper insights.
- Learn Bazel C++ build rules further in the [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html).

---

## Additional Resources

- Bazel official website: [https://bazel.build](https://bazel.build)
- Bazel Central Registry for Googletest: [https://registry.bazel.build/modules/googletest](https://registry.bazel.build/modules/googletest)
- GoogleTest GitHub repository: [https://github.com/google/googletest](https://github.com/google/googletest)


---

### Summary Diagram: Bazel Workspace GoogleTest Integration Flow

```mermaid
flowchart TD
  WS["Workspace Directory (my_workspace)"] --> MFILE["MODULE.bazel
(declares googletest module)"]
  WS --> SRC["hello_test.cc (test source)"]
  WS --> BUILD["BUILD file
(defines cc_test)"]
  
  BUILD -->|depends on| GT[@googletest//:gtest]
  BUILD -->|depends on| GT_MAIN[@googletest//:gtest_main]
  
  Bazel(Bazel CLI) --> BUILD
  Bazel -->|builds and tests| TESTBIN["hello_test binary"]
  TESTBIN --> RUN["Test execution
outputs results"]

  %% Styling
  classDef module fill:#e0f2ff,stroke:#1a73e8,stroke-width:1px;
  class MFILE,GT,GT_MAIN module;

  class BUILD,SRC,TESTBIN fill:#d5f6d5,stroke:#228B22,stroke-width:1px;
  class TESTBIN,RUN fill:#fff7d6,stroke:#daa520,stroke-width:1px;

```

---

This completes the Bazel Integration guide for GoogleTest. You should now be equipped to add GoogleTest-based tests to your Bazel-managed C++ projects.


---

<Source url="https://github.com/google/googletest" paths='[{"path":"docs/quickstart-bazel.md"},{"path":"BUILD.bazel"},{"path":"WORKSPACE"}]' branch="main" />