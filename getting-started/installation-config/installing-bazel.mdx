---
title: "Installing with Bazel"
description: "Covers Bazel-based installation for users in Bazel-centric environments. Instructions include fetching the repository, configuring Bazel workspaces, and integrating GoogleTest targets in project builds. References the quickstart Bazel documentation for sample build files."
---

# Installing with Bazel

This guide provides a precise, step-by-step walkthrough for users who prefer to install GoogleTest using the Bazel build system. Bazel simplifies managing dependencies and building projects, especially in large or Bazel-centric environments.

---

## 1. Prerequisites & System Requirements

Before you set up GoogleTest with Bazel, ensure the following prerequisites are met:

- **Operating System**: Linux, macOS, or Windows
- **C++ Compiler**: Support for at least C++17 standard
- **Bazel**: Version 7.0 or later installed
- **Network Access**: Required to fetch external dependencies through Bazel Central Registry

If you don't have Bazel installed, follow the official [Bazel installation guide](https://bazel.build/install).

<Check>
Ensure your Bazel version is 7.0 or higher:
```sh
bazel --version
```
</Check>

---

## 2. Setting Up Your Bazel Workspace

### Step 1: Create Your Workspace Directory

Choose or create a directory to serve as your Bazel workspace:

```sh
mkdir my_workspace && cd my_workspace
```

### Step 2: Define Module Dependencies

Create a file named `MODULE.bazel` in the root of your workspace. This file declares the dependencies for your Bazel project.

Add the following to declare GoogleTest as a dependency:

```python
# MODULE.bazel

bazel_dep(name = "googletest", version = "1.17.0")
```

> Replace `1.17.0` with the latest version if needed by checking the [Bazel Central Registry](https://registry.bazel.build/modules/googletest).

### Step 3: Prepare Your BUILD File

Inside your workspace directory, create a `BUILD` file that defines how to build and run your test binary. For example, create a `hello_test.cc` test source file and then define a Bazel test target:

```sh
touch hello_test.cc
```

Add this sample test code to `hello_test.cc`:

```cpp
#include <gtest/gtest.h>

// Basic GoogleTest example
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Check strings are not equal
  EXPECT_EQ(7 * 6, 42);               // Check integer equality
}
```

Create a `BUILD` file with the following content:

```python
cc_test(
    name = "hello_test",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
    size = "small",
)
```

This configuration:

- Defines a C++ test target named `hello_test`.
- Includes your test source file.
- Specifies the dependencies for GoogleTest libraries.

---

## 3. Building and Running Your Test

### Step 4: Build Your Test Binary

Run the following Bazel command to build and test your binary. The example below properly sets the C++17 standard:

```sh
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

This command builds and runs the `hello_test` target and displays all test output.

### Expected Outcome

You should see output similar to:

```
INFO: Found 1 test target...
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
Target //:hello_test up-to-date:
  bazel-bin/hello_test
INFO: Build completed successfully
//:hello_test                                                     PASSED in 0.1s
```

This confirms your test compiled and passed successfully.

---

## 4. Best Practices & Tips

- **Version Pinning**: Always pin GoogleTest to a specific release version in `MODULE.bazel` to maintain reproducible builds.
- **Compiler Flags**: Use `--cxxopt=-std=c++17` for GCC/Clang or `--cxxopt=/std:c++17` for MSVC to enforce the required C++ standard.
- **Dependencies Update**: Regularly check for updates on GoogleTest's Bazel module version.

---

## 5. Troubleshooting

<AccordionGroup title="Common Issues When Installing with Bazel">
<Accordion title="Bazel command not found">
Ensure Bazel is installed and your PATH includes the Bazel binary. Verify with:

```sh
bazel --version
```

If Bazel is missing, install it from https://bazel.build/install.
</Accordion>

<Accordion title="Failed to fetch googletest module">
Check your internet connection, proxy settings, and ensure you have access to Bazel Central Registry.

If network restrictions exist, consult your network administrator or cache dependencies locally.
</Accordion>

<Accordion title="Compiler errors related to C++ standard">
Verify that your compiler supports C++17 and pass the appropriate flag:

- For GCC/Clang: `--cxxopt=-std=c++17`
- For MSVC: `--cxxopt=/std:c++17`
</Accordion>

<Accordion title="Test source files not found or build errors">
Make sure your source files exist and are correctly referenced in the `BUILD` file.

Check for typos in paths and filenames.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

- Explore writing more tests by reading [Writing Your First Test](../first-run-validation/write-first-test.md).
- Learn how to organize and run comprehensive test suites [Building and Running Tests](../first-run-validation/run-and-validate.md).
- Consult [Supported Platforms](../../overview/integration-and-ecosystem/supported-platforms-and-compatibility.md) for platform-specific considerations.

---

Congratulations! You have successfully installed GoogleTest using Bazel, built your first test binary, and ran it to confirm your setup.

### Additional Resources

- Official GoogleTest GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- Bazel Central Registry for GoogleTest: [https://registry.bazel.build/modules/googletest](https://registry.bazel.build/modules/googletest)
- Bazel C++ Tutorial: [https://docs.bazel.build/versions/main/tutorial/cpp.html](https://docs.bazel.build/versions/main/tutorial/cpp.html)

---