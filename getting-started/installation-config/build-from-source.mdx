---
title: "Build and Install from Source"
description: "Learn how to obtain, build, and install GoogleTest using supported tools. Follow platform-specific commands and understand where to find installation scripts for Linux, macOS, and Windows."
---

# Build and Install from Source

Learn how to obtain, build, and install GoogleTest using supported tools. Follow platform-specific commands and understand where to find installation scripts for Linux, macOS, and Windows.

---

## 1. Prerequisites & System Requirements

Before building GoogleTest from source, ensure your environment meets the following:

- **C++ Compiler with C++17 Support**: GoogleTest requires a compiler that fully supports the C++17 standard. Examples include GCC 7.0+, Clang 5.0+, MSVC 2017+, and equivalent.

- **Build Tools**:
  - CMake version 3.13 or later (recommended).
  - Make or Ninja for Unix-like platforms.
  - Visual Studio (2017 or later) for Windows.

- **Threading Library**:
  - pthreads support on Unix-like systems unless building with `gtest_disable_pthreads` option.

- **Network Access** (optional): For source clone or downloads.

<Tip>
Ensure your compiler environment variables and paths are correctly set prior to starting the build, especially on Windows where Visual Studio Developer Command Prompt is required.
</Tip>

---

## 2. Obtaining the Source Code

Use `git` to clone the official GoogleTest repository and checkout the desired stable version.

```bash
# Clone the repository with latest tagged stable version (replace v1.17.0 with latest if needed)
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

Alternatively, download the source archive (.zip or .tar.gz) from the [GitHub releases](https://github.com/google/googletest/releases).

---

## 3. Building GoogleTest

### 3.1 Build with CMake (Standalone)

GoogleTest provides a community-supported CMake build setup suitable for all supported platforms.

<Steps>
<Step title="Create a Build Directory">
Create an isolated directory for out-of-source builds, keeping sources clean.

```bash
mkdir build
cd build
```
</Step>

<Step title="Generate Build Files">
Run CMake to generate native build system files.

```bash
cmake ..
```

By default, this builds both GoogleTest and GoogleMock.

**To build GoogleTest only:**

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>

<Step title="Build the Project">
- On Linux/macOS:

```bash
make
```

- On Windows (using generated Visual Studio solution):

1. Open `gtest.sln` in Visual Studio.
2. Build the solution.

- Alternatively, use `cmake --build .` for a platform-independent build command.
</Step>
</Steps>

<Note>
Use `cmake --build . --config Release` to build release builds in multi-config generators such as Visual Studio.
</Note>

<Tip>
If you want a shared library build, set `-DBUILD_SHARED_LIBS=ON` when running `cmake`.
</Tip>

### 3.2 Building Samples and Tests

To include GoogleTest's own samples and tests in your build, pass the following options:

```bash
cmake .. -Dgtest_build_samples=ON -Dgtest_build_tests=ON
make
make test  # or ctest
```

Tests can be run with `make test` or `ctest`. You may run specific tests using `ctest -R <regex>`.

### 3.3 Build Output Locations

- Binaries and libraries are placed by default under the `build` directory:
  - Executables in `build/bin`
  - Libraries in `build/lib`

- Install directories default to `/usr/local` on Unix-like systems (changeable with `-DCMAKE_INSTALL_PREFIX`).

---

## 4. Installing GoogleTest

After building, install GoogleTest system-wide or to a custom directory.

```bash
sudo make install
```

Or specify a custom prefix when generating the build files:

```bash
cmake .. -DCMAKE_INSTALL_PREFIX=/custom/install/path
make
make install
```

This installs headers, libraries, and pkg-config files. The pkg-config files (`.pc`) include all necessary compiler and linker flags.

<Warning>
On Windows, the `make install` step is not typical. Instead, use the Visual Studio installer or manually copy the libraries and headers.
</Warning>

---

## 5. Verifying the Installation

Once installed, verify that:

- Headers are present in `${INSTALL_PREFIX}/include`
- Libraries `libgtest.a`, `libgtest_main.a`, or their dynamic equivalents are in `${INSTALL_PREFIX}/lib` or `${INSTALL_PREFIX}/bin` on Windows
- Pkg-config files like `gtest.pc` and `gtest_main.pc` are located under `${INSTALL_PREFIX}/lib/pkgconfig`

You can test linking with a simple sample C++ file using pkg-config:

```bash
pkg-config --cflags --libs gtest_main
```

If the above returns valid compiler flags, you are ready to compile tests using GoogleTest.

---

## 6. Platform-Specific Notes

### Linux/macOS

- Ensure `cmake`, a C++17 compiler, and pthreads are installed.
- Use standard Unix commands (`make`, `sudo make install`).

### Windows

- Use Visual Studio 2017 or later.
- Launch the `x64 Native Tools Command Prompt` or similar developer command prompt for environment setup.
- Use CMake's generated `gtest.sln` to build and install.
- Consider setting the `gtest_force_shared_crt` option ON in CMake if your projects use dynamic runtimes:

  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```

### macOS

- If using Xcode, CMake creates `.xcodeproj` project files.
- You may build using Xcode IDE or command line.

---

## 7. Incorporating GoogleTest Into Your Project

- After installation, projects can find GoogleTest using `find_package(GTest REQUIRED)` in CMake.

- You can link your test executable to `GTest::gtest` and `GTest::gtest_main` targets.

- Alternatively, embed GoogleTest source itself in your project's CMake via `add_subdirectory`.

---

## 8. Troubleshooting Common Build Issues

<AccordionGroup title="Common Build Issues">
<Accordion title="CMake Cannot Find C++17 Compiler">
Ensure your compiler supports C++17 and is properly set in your PATH. For example, GCC 7.0+ or Clang 5.0+ is required.

Check the compiler version:

```bash
g++ --version
```

Update your compiler if necessary.
</Accordion>
<Accordion title="Pthread Linking Errors">
GoogleTest detects pthread automatically. If you get linking errors related to pthreads:

- Confirm pthread is installed.
- For manual build systems, add `-pthread` flag.
- Use CMake with `find_package(Threads)` which handles this.
</Accordion>
<Accordion title="Visual Studio Runtime Library Mismatch">
Linking errors such as LNK2038 related to runtime libraries occur if GoogleTest and your project use different runtime linkage.

To fix, use the CMake option `-Dgtest_force_shared_crt=ON` to make GoogleTest use dynamic runtimes matching your project.
</Accordion>
</AccordionGroup>

---

## 9. Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [Quickstart: Primer and Hello Test](https://github.com/google/googletest/blob/main/docs/primer.md)
- [System Requirements](./system-requirements.md)
- [Prerequisites](./prerequisites.md)
- [Using pkg-config with GoogleTest](./pkgconfig.md)


---

<Check>
You have successfully built and installed GoogleTest from source. You are now equipped to link GoogleTest in your projects and write your first tests.
</Check>


---

_Last updated for GoogleTest version 1.17.0. Always check the repository or official releases for the latest instructions and versions._
