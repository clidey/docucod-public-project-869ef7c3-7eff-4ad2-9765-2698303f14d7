---
title: "Installing GoogleTest (CMake & Bazel)"
description: "Step-by-step installation instructions tailored for the most common build systems—CMake and Bazel—on Linux, macOS, and Windows. This page empowers users to select and follow the installation workflow that best fits their toolchain, with platform-specific guidance, tips, and sample commands."
---

# Installing GoogleTest (CMake & Bazel)

Welcome to the GoogleTest installation guide tailored for the two most common and robust C++ build systems: **CMake** and **Bazel**. This guide walks you through practical, step-by-step instructions to install GoogleTest on Linux, macOS, and Windows. Choose the workflow that matches your environment and toolchain to get GoogleTest ready for your projects.

---

## Table of Contents
1. [Prerequisites & Requirements](#prerequisites--requirements)
2. [Installing GoogleTest with CMake](#installing-googletest-with-cmake)
3. [Installing GoogleTest with Bazel](#installing-googletest-with-bazel)
4. [Verification and First Test Execution](#verification-and-first-test-execution)
5. [Troubleshooting Common Issues](#troubleshooting-common-issues)
6. [Next Steps](#next-steps)

---

## Prerequisites & Requirements

Before installing GoogleTest, ensure your environment meets the following:

- **Operating System:** Linux, macOS, or Windows.
- **Compiler:** Modern C++ compiler supporting at least **C++17** (e.g., GCC 7.0+, Clang, MSVC 2017+).
- **Build Tools:**
  - For CMake: CMake version **3.14** or later, plus a supported build tool like Make, Ninja, or Visual Studio.
  - For Bazel: Bazel version **7.0** or higher.
- **Network Access:** Ability to download source code from GitHub or configured mirrors.

<Tip>
Ensure your compiler is correctly installed and added to your system PATH before proceeding. Use commands like `g++ --version`, `clang++ --version`, or `cl` (MSVC) to check.
</Tip>

---

## Installing GoogleTest with CMake

This section helps you install and integrate GoogleTest using CMake, the flexible, cross-platform build system.

### Step 1: Clone the GoogleTest Repository

Start by cloning the official repository for the desired version. Here, we use version 1.17.0 as an example.

```bash
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest
```

### Step 2: Create a Build Directory

Create an isolated directory to hold all build output.

```bash
$ mkdir build && cd build
```

### Step 3: Configure the Build with CMake

Use CMake to generate native build files.

By default, this includes building GoogleMock together with GoogleTest:

```bash
$ cmake ..
```

If you want *only* GoogleTest without GoogleMock, run:

```bash
$ cmake .. -DBUILD_GMOCK=OFF
```

> On Windows with Visual Studio, a `.sln` solution file will be generated.
> On macOS with Xcode, a `.xcodeproj` file is generated.
> On Linux or other UNIX-like systems, a Makefile or Ninja build files are produced depending on your CMake generator.

### Step 4: Build and Install

**On Linux/macOS:**

```bash
$ make
$ sudo make install
```

**On Windows (Visual Studio):**

Open the generated solution (`gtest.sln`), build the `ALL_BUILD` target, then the `INSTALL` target if desired.

### Step 5: Incorporate GoogleTest into Your Own Project

**Option A: Use Installed Libraries**

Once installed, you can import GoogleTest in your CMake projects with:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(my_test my_test.cpp)
target_link_libraries(my_test GTest::gtest_main)
```

**Option B: Add GoogleTest Directly to Your Project Build**

Add GoogleTest as a subdirectory to your existing CMake build to ensure compatible compiler/linker settings.

In your project’s `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # Windows dynamic runtime
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

This approach requires CMake 3.14 or later.

### Step 6: Handle C++ Standard and Runtime Compatibility

- GoogleTest requires **C++17** or newer. Specify in your project with:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- On Visual Studio, if runtime errors occur related to mismatched CRTs, ensure `gtest_force_shared_crt` is `ON` to use the dynamic runtime.

---

## Installing GoogleTest with Bazel

Bazel is the preferred build system internally for GoogleTest. Follow these steps to set up GoogleTest with Bazel.

### Step 1: Create a Bazel Workspace

Create and navigate to a new workspace directory.

```bash
$ mkdir my_workspace && cd my_workspace
```

### Step 2: Declare the GoogleTest Dependency

Create a `MODULE.bazel` file in your workspace root with:

```python
bazel_dep(name = "googletest", version = "1.17.0")
```

This pulls GoogleTest version 1.17.0 from the Bazel Central Registry.

### Step 3: Write Your Test Source

Create `hello_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

### Step 4: Create a Bazel BUILD File

Add a `BUILD` file in the same directory:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

### Step 5: Build and Run Your Test

Build and run the test targeting C++17:

```bash
$ bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

Look for output indicating the test passed successfully.

<Tip>
If you use MSVC on Windows, replace `--cxxopt=-std=c++17` with `--cxxopt=/std:c++17`.
</Tip>

---

## Verification and First Test Execution

After installation with your chosen build system, verify success by:

- **Compiling and running a provided example test** (e.g. the `hello_test.cc` shown above). 
- For CMake: Following the Quickstart build process to run tests using `ctest`.
- For Bazel: Confirm the test passes when running `bazel test`.

If your test runs and passes as expected, GoogleTest is successfully installed and integrated.

## Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues and Fixes">
<Accordion title="CMake Errors Related to Missing Dependencies">
Verify CMake version is >= 3.14 and that all build tools are installed. 
Make sure `git` is installed and accessible.
</Accordion>
<Accordion title="Runtime Library Mismatches on Windows">
If linking errors about different runtimes arise, enable the `gtest_force_shared_crt` option in CMake to align runtimes dynamically.
</Accordion>
<Accordion title="Bazel Dependency Failures">
Ensure Bazel version is >= 7.0. Check network connectivity for dependency download. Use the Bazel Central Registry as shown.
</Accordion>
<Accordion title="Compiler Does Not Support C++17">
GoogleTest requires C++17; update your compiler or adjust compiler flags accordingly.
</Accordion>
<Accordion title="Tests Not Being Discovered or Run">
Confirm `enable_testing()` is called in your `CMakeLists.txt`. Ensure `gtest_discover_tests()` is invoked to register tests with CTest.
</Accordion>
</AccordionGroup>

<Tip>
Refer to the [Common Setup Issues & Solutions](/getting-started/troubleshooting-faq/common-setup-issues) page for detailed troubleshooting.
</Tip>

---

## Next Steps

- Explore the [Validation: Run Your First Test](/getting-started/prep-requirements-installation/validation-first-test) guide to confirm your installation with real test runs.
- Learn how to set up your project with the [Project Setup & Integration](/getting-started/configuring-using-tests/project-setup-integration) documentation.
- Start writing your own tests with [Writing Your First Test Case](/getting-started/configuring-using-tests/write-first-test-case).
- Dive deeper into advanced usage and mocking with GoogleMock by visiting the [GoogleMock Overview](googlemock/README.md).

---

For more detailed explanations and examples, visit the official [GoogleTest GitHub repository](https://github.com/google/googletest) and consult their [`googletest/README.md`](googletest/README.md), [`docs/quickstart-cmake.md`](docs/quickstart-cmake.md), and [`docs/quickstart-bazel.md`](docs/quickstart-bazel.md).

---

# Summary
This guide provides carefully orchestrated steps to install GoogleTest using either CMake or Bazel on supported platforms. It empowers users to select the best workflow for their environment, covering cloning, building, installation, integration, and verification. Troubleshooting tips anticipate common pitfalls, while next steps offer clear guidance for beginning testing.

---