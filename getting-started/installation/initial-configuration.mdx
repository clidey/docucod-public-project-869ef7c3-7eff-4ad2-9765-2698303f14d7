---
title: "Configuring Your Project"
description: "Teaches the basic configuration needed to integrate GoogleTest into your build system, including include paths and linking details, so tests can be built and run immediately."
---

# Configuring Your Project

This guide teaches you the basic configuration needed to integrate GoogleTest into your C++ build system, including setting up include paths and linking details so that your tests can be compiled and run immediately.

---

## 1. Overview

Before writing or running any tests using GoogleTest, you need to configure your C++ project correctly to include GoogleTest headers and link against its libraries. This page walks you through the essential project-level setup steps.

> This configuration guide assumes that GoogleTest has been installed or added to your project using your chosen installation method (e.g., CMake, Bazel, or manual source inclusion).

## 2. Setting Up Include Paths

To compile GoogleTest-based tests, your compiler must be able to find the GoogleTest header files.

### Steps:

1. **Locate GoogleTest headers:**
   - If installed system-wide or via a package manager, headers are usually in a standard include directory (e.g., `/usr/include/gtest`).
   - If added as a submodule or included source within your project, headers are typically under the `googletest/include` directory.

2. **Add include paths to your compiler options:**
   - For a command line compiler, add `-I` flags to point to the GoogleTest include directory.
   - For build tools (CMake, Bazel), specify include directories accordingly (see below).

#### Example (command line):
```bash
clang++ -I/path/to/googletest/include ...
```

<Info>
If using CMake, the recommended way is to use `target_include_directories()` with the GoogleTest target. See the [Integration with C++ Environments](https://google.github.io/googletest/overview/integration-getting-started/integration-with-environments.html) documentation for detailed instructions.
</Info>

## 3. Linking GoogleTest Libraries

GoogleTest provides libraries you must link against to resolve its symbols.

### Actions:

1. **Identify available libraries:**
   - `gtest` static/shared library
   - `gtest_main` (contains a main() entry point for test executables, optional)

2. **Link the required libraries to your test targets:**
   - Link `gtest` to enable using GoogleTest APIs.
   - Optionally link `gtest_main` if you want GoogleTest to provide the main() function.

3. **Add linker flags:**
   - On command line, link with flags like `-lgtest -lpthread`
   - For build systems, specify the libraries as dependencies.

#### Example (command line linking):
```bash
g++ my_test.o -lgtest -lgtest_main -pthread -o my_test
```

<Tip>
The `-pthread` flag is essential on POSIX systems because GoogleTest uses threads internally.
</Tip>

## 4. Configuration in CMake

If using CMake, your CMakeLists.txt should configure GoogleTest as follows:

```cmake
# Assuming GoogleTest is added via add_subdirectory or found by find_package
find_package(GTest REQUIRED)

add_executable(my_test my_test.cpp)

target_link_libraries(my_test GTest::gtest GTest::gtest_main pthread)
```

To set include directories correctly, linkage will automatically take care of that when using imported targets like `GTest::gtest`.

## 5. Configuration in Bazel

When integrating with Bazel,

- Declare `@com_google_googletest` as an external dependency.
- Link test binaries against `@com_google_googletest//:gtest` and optionally `@com_google_googletest//:gtest_main`.

Refer to the official [`Integration with C++ Environments`](https://google.github.io/googletest/overview/integration-getting-started/integration-with-environments.html) documentation for examples.

## 6. Verifying Your Configuration

Once your project is configured:

1. **Write a minimal test:**

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, AlwaysPasses) {
  EXPECT_TRUE(true);
}
```

2. **Build your test executable.**
3. **Run the executable:**

```bash
./my_test
```

Expected output:
```
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.AlwaysPasses
[       OK ] SampleTest.AlwaysPasses
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

If you see this, your configuration is successful.

## 7. Best Practices & Tips

- Always specify the full include path for GoogleTest headers as `#include <gtest/gtest.h>`.
- Use provided CMake targets or Bazel dependencies where possible to avoid manual errors.
- Make sure to link threading libraries (often `pthread`) when required.
- Use `gtest_main` linked library to avoid writing your own `main()` function for test executables.

## 8. Common Pitfalls

<Warning>
- Forgetting to link `pthread` can cause linker errors or crashes.
- Omitting the include path to GoogleTest headers will cause compilation failures.
- Linking statically built GoogleTest with dynamically compiled test code may cause ABI issues.
</Warning>

## 9. Troubleshooting

### Problem: Undefined references to GoogleTest symbols during linking

- **Cause:** Not linking with `-lgtest` or incorrect library order.
- **Solution:** Verify your linker flags or build system dependencies include `gtest` libraries.

### Problem: Compiler cannot find `gtest/gtest.h`

- **Cause:** Include paths are missing or incorrect.
- **Solution:** Ensure the include directory for GoogleTest headers is added to your compiler flags.

### Problem: Tests run but do not show any output

- **Cause:** Missing `main()` function.
- **Solution:** Link with `gtest_main` library or supply your own `main()`.

## 10. Next Steps

- Proceed to [Writing Your First Test](../first-use/writing-first-test.md) to start authoring tests.
- Consult [Integration with C++ Environments](https://google.github.io/googletest/overview/integration-getting-started/integration-with-environments.html) for detailed build setups.

---

<Check>
By following this configuration guide, your project will be ready to build and run GoogleTest-based tests reliably.
</Check>

---

## References

- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [Integration with C++ Environments](https://google.github.io/googletest/overview/integration-getting-started/integration-with-environments.html)
- [Writing Your First Test](../first-use/writing-first-test.md)


---

## Appendix: Minimal Example CMakeLists.txt

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyGoogleTestProject)

# Add GoogleTest, assume googletest is added as a subdirectory or installed
find_package(GTest REQUIRED)

add_executable(my_test my_test.cpp)

target_link_libraries(my_test GTest::gtest GTest::gtest_main pthread)

enable_testing()
add_test(NAME my_test COMMAND my_test)
```

This simple CMake file builds a test executable linked properly to GoogleTest.
