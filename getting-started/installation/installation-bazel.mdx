---
title: "Install with Bazel"
description: "Provides detailed guidance for integrating GoogleTest via Bazel, explaining workspace configuration and BUILD file modifications. Ensures reliable installation for Bazel users."
---

# Install with Bazel

This page guides you through the process of integrating GoogleTest with your project using the Bazel build system. Following these instructions ensures a reliable and reproducible setup tailored for Bazel users.

---

## 1. Prerequisites & Setup

Before starting, ensure you have the following:

- **Bazel 7.0 or higher** installed on your system. You can find installation instructions at [Bazel's official site](https://bazel.build/install).
- A **C++17-compliant compiler** compatible with your operating system (Linux, macOS, Windows).
- Basic familiarity with Bazel workspace and BUILD file concepts.


<Tip>
If this is your first time using Bazel, consider reviewing Bazel’s [workspace documentation](https://docs.bazel.build/versions/main/build-ref.html#workspace) for a better understanding of the workspace setup.
</Tip>

## 2. Set Up Your Bazel Workspace

### Step 1: Create a Workspace Directory

Open your terminal and create a new directory for your Bazel workspace:

```sh
mkdir my_workspace && cd my_workspace
```

### Step 2: Create the MODULE.bazel File

In the root of your workspace, create a file called `MODULE.bazel` to specify your dependencies. GoogleTest is consumed through the Bazel Central Registry.

Create `MODULE.bazel` with the following content (use the latest GoogleTest version available):

```python
# MODULE.bazel

# Use the latest GoogleTest release version
bazel_dep(name = "googletest", version = "1.17.0")
```

<Tip>
Check the Bazel Central Registry at https://registry.bazel.build/modules/googletest for the most recent version.
</Tip>

## 3. Add Your GoogleTest-Using Source Files

As an example, create a test file named `hello_test.cc` in your workspace:

```cpp
#include <gtest/gtest.h>

// Basic unit test demonstrating GoogleTest assertions
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Checks strings are not equal
  EXPECT_EQ(7 * 6, 42);              // Checks expression equals 42
}
```

## 4. Write Your BUILD File

Next, create a `BUILD` file in the same directory (`my_workspace`) with this content to define how Bazel builds your test binary:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This BUILD rule:
- Declares a test named `hello_test`.
- Specifies the test source file.
- Links against the GoogleTest libraries from the external dependency.

<Tip>
If you want to learn more about Bazel’s `cc_test` rule, refer to the [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html).
</Tip>

## 5. Build and Run Your Test

From the root directory of your workspace, run the following command:

```sh
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- `--cxxopt=-std=c++17` forces use of the C++17 standard.
- `--test_output=all` ensures full output from the test run is visible.

### Expected Output Sample

```
INFO: Analyzed target //:hello_test (26 packages loaded, 362 targets configured).
INFO: Found 1 test target...
INFO: From Testing //:hello_test:
==================== Test output for //:hello_test:
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
================================================================================
Target //:hello_test up-to-date:
  bazel-bin/hello_test
INFO: Build completed successfully, 27 total actions
//:hello_test                                                     PASSED in 0.1s
```

Successfully seeing `[  PASSED  ] 1 test.` means your GoogleTest installation via Bazel is correctly set up and your test ran!

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Bazel Installation Issues">
<Accordion title="Bazel command not found">
Make sure Bazel is correctly installed and your system PATH includes the Bazel binary location. Visit https://bazel.build/install for installation steps.
</Accordion>
<Accordion title="Compiler errors related to C++ standard">
Check that you specify C++17 or later with the `--cxxopt=-std=c++17` flag in your test command. For MSVC, use `--cxxopt=/std:c++17` instead.
</Accordion>
<Accordion title="GoogleTest library not found in deps">
Verify your `MODULE.bazel` file correctly specifies the GoogleTest dependency with the proper version. If you changed versions, clean your workspace cache via `bazel clean`.
</Accordion>
</AccordionGroup>

<Note>
For platform-specific compiler flags or problems, consult the [Platform-specific Notes](../installation/platform-specific-notes) page in this documentation.
</Note>

## 7. Next Steps

- Read [Writing Your First Test](../first-steps/writing-your-first-test) to start authoring comprehensive tests.
- Consult [Verifying Your Setup](../first-steps/verifying-setup) for additional validation techniques.
- Explore the [Integration with Build and CI Systems](../../overview/integration-adoption/integration-workflow) guide for continuous integration guidance.

---

By following these steps, you have fully integrated GoogleTest into your Bazel workspace and successfully run your first test. Your setup is now ready for building larger, more complex test suites with GoogleTest seamlessly integrated.


---

## References and Related Documentation

- [GoogleTest Primer](../../primer.md) — essential reading for writing tests.
- [GoogleTest API Reference](../../api-reference/core-testing/test-structure-and-lifecycle) — detailed API documentation.
- [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html) — understand Bazel for C++ projects.
- [Platform-specific Notes](../installation/platform-specific-notes) — manage OS and compiler nuances.
- [Integration with Build and CI Systems](../../overview/integration-adoption/integration-workflow) — CI pipeline integration tips.


---

## Summary Diagram

```mermaid
flowchart TD
    A[Create Bazel workspace directory] --> B[Create MODULE.bazel with googletest dependency]
    B --> C[Add test source files (e.g. hello_test.cc)]
    C --> D[Create BUILD file with cc_test rule]
    D --> E[Run bazel test command with C++17 option]
    E --> F{Test runs and passes?}
    F -- Yes --> G[GoogleTest via Bazel is set up and operational]
    F -- No --> H[Troubleshoot installation or build issues]
    H --> D
    H --> B
```

This flow visually represents the sequential steps from workspace setup through to verifying that your GoogleTest build with Bazel works as expected.
