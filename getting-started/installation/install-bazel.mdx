---
title: "Installing with Bazel"
description: "Explains how to add GoogleTest as a dependency in Bazel projects, with precise build and run instructions for seamless integration."
---

# Installing with Bazel

This guide explains how to add GoogleTest as a dependency in Bazel projects, providing precise instructions to build and run your first GoogleTest binary with Bazel. By following these steps, you will seamlessly integrate GoogleTest into your Bazel workspace and run tests reliably.

---

## 1. Prerequisites & System Requirements

Before you begin, make sure your environment meets the following requirements:

- **Supported Operating Systems:** Linux, macOS, Windows.
- **C++ Compiler:** Compatible with C++17 standard or later.
- **Bazel Version:** 7.0 or higher.

> For detailed platform and compiler support, refer to the [Supported Platforms and Environments](../setup-requirements/supported-platforms) guide.

If Bazel is not installed, follow the official [Bazel installation guide](https://bazel.build/install) first.

---

## 2. Set Up Your Bazel Workspace

To use GoogleTest in a Bazel project, you need to create and configure a Bazel workspace.

### Step 1: Create a Workspace Directory

Open your terminal and run:

```bash
mkdir my_workspace && cd my_workspace
```

This directory will hold your project and build files.

### Step 2: Create the MODULE.bazel File

This file declares your dependencies using Bazel's Central Registry, the recommended approach since Bazel 7.0.

Create a file named `MODULE.bazel` in your workspace root with the following content:

```python
# MODULE.bazel

# Use the latest GoogleTest version available at https://registry.bazel.build/modules/googletest
bazel_dep(name = "googletest", version = "1.17.0")
```

This configuration ensures Bazel fetches GoogleTest automatically during your build, keeping your setup clean and maintainable.

<Tip>
Keep the version number updated by checking the [Bazel Central Registry](https://registry.bazel.build/modules/googletest) regularly to benefit from bug fixes and new features.
</Tip>

---

## 3. Create and Build a Sample Test

To verify your setup, build and run a simple test.

### Step 1: Create a Test Source File

Add a file named `hello_test.cc` inside your workspace directory with this example content:

```cpp
#include <gtest/gtest.h>

// Demonstrate some basic assertions.
TEST(HelloTest, BasicAssertions) {
  // Expect two strings not to be equal.
  EXPECT_STRNE("hello", "world");
  // Expect equality.
  EXPECT_EQ(7 * 6, 42);
}
```

This code includes GoogleTest's main header and defines a simple test case.

### Step 2: Create a BUILD File

Create a `BUILD` file in the same directory to tell Bazel how to build the test:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This `cc_test` rule defines a test target linking to GoogleTest libraries. `gtest_main` provides the main function for your test binary.

### Step 3: Build and Run the Test

Build and execute the test by running:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

Expected output snippet:

```text
[==========] Running 1 test from 1 test suite.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[  PASSED  ] 1 test.
```

This confirms GoogleTest is properly integrated and your test runs successfully.

<Check>
If you encounter errors, verify:
- Bazel version is 7.0 or higher.
- Your compiler supports C++17 and is correctly configured.
- The `MODULE.bazel` file exists and uses the correct dependency syntax.
</Check>

---

## 4. Customizing Your Build

### Compiler Options

The example uses the flag `--cxxopt=-std=c++17` to enforce C++17 standards compatibility.

- For GCC or Clang, use `--cxxopt=-std=c++17`.
- For MSVC, use `--cxxopt=/std:c++17`.

Adjust this flag according to your compiler.

### Advanced Bazel Integration

To learn more about writing Bazel BUILD files and integrating GoogleTest deeper, consult the [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html).

---

## 5. Next Steps

After successful build and run:

- Begin writing your own tests using the [GoogleTest Primer](../overview/intro-and-value/what-is-googletest).
- Explore advanced test features in [Writing Your First Test](../first-use/writing-first-test).
- Learn how to run and interpret tests in [Running and Interpreting Test Results](../first-use/running-tests).
- Troubleshoot any build or runtime issues with [Common Installation Issues](../troubleshooting/common-issues).

---

## Troubleshooting Common Bazel Setup Issues

<AccordionGroup title="Common Problems and Solutions">
<Accordion title="Dependency Not Found or Fetch Failure">
Ensure your network connection allows Bazel to download dependencies. Check the correctness of your `MODULE.bazel` file syntax. Run `bazel clean --expunge` and try building again.
</Accordion>
<Accordion title="Compiler Issues or Unsupported Standards">
Verify your compiler version and options. Confirm C++17 support via your compiler documentation. Use correct compiler flags (`--cxxopt`).
</Accordion>
<Accordion title="Test Does Not Run or Shows No Output">
Add the Bazel flag `--test_output=all` to show detailed test logs. Confirm that your `cc_test` rule in `BUILD` has all necessary dependencies (`@googletest//:gtest`, `@googletest//:gtest_main`).
</Accordion>
</AccordionGroup>

---

Congratulations! You have now integrated GoogleTest with Bazel and run your first test. This foundation enables scalable, maintainable testing within your Bazel projects.


---

### References

- Official Bazel Documentation: https://bazel.build
- GoogleTest Bazel Central Registry: https://registry.bazel.build/modules/googletest
- GoogleTest GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)


---

