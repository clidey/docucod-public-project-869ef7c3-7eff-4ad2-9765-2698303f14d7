---
title: "Platform-specific Notes"
description: "Highlights any installation or usage caveats on Linux, macOS, and Windows. Directs users to platform-related troubleshooting and scripts for smooth setup across different environments."
---

# Platform-specific Notes

This page highlights important considerations, installation caveats, and usage guidance for GoogleTest on Linux, macOS, and Windows platforms. Providing targeted notes and tips, it directs users to platform-related troubleshooting and scripts that ensure a smooth setup experience across different environments.

---

## 1. Overview of Platform Dependencies

GoogleTest supports Linux, macOS, and Windows environments, but each platform has unique traits affecting installation, compilation, and runtime behavior. Understanding these platform nuances helps avoid common pitfalls and ensures reliable builds and test runs.

## 2. Linux

Linux systems often provide pthread support and standard POSIX utilities, which GoogleTest leverages for thread safety and other features.

### Key Notes:
- **Threading Support:** GoogleTest detects pthread support automatically on Linux. If pthread is unavailable or incompatible, define `-DGTEST_HAS_PTHREAD=0` to disable threading features.
- **Pkg-config Path:** If you manually build and install GoogleTest (e.g., under `/usr/local`), pkg-config might not locate `.pc` files by default. Set the environment variable:

  ```bash
  export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
  ```

  Adjust the path if your system uses a different lib directory.

- **Cross-Compilation:** When cross-compiling for a different root sysroot, configure pkg-config to use the sysroot properly:

  ```bash
  export PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=yes
  export PKG_CONFIG_ALLOW_SYSTEM_LIBS=yes
  export PKG_CONFIG_SYSROOT_DIR=/home/MYUSER/sysroot
  export PKG_CONFIG_LIBDIR=$PKG_CONFIG_SYSROOT_DIR/usr/lib64/pkgconfig
  ```

  This ensures pkg-config generates correct include and library flags pointing inside the sysroot.

### Common Pitfalls:
- Forgetting to export `PKG_CONFIG_PATH` or `PKG_CONFIG_LIBDIR` leads to build errors with CMake not finding `gtest_main`.
- Splitting pkg-config flags manually risks missing crucial flags like `-pthread`. Rely on full `CFLAGS` and `LDFLAGS` from pkg-config instead.

## 3. macOS

On macOS, GoogleTest builds using standard tools like CMake & Xcode. The framework fully supports multi-threading.

### Important Notes:
- Use `cmake ..` to generate Xcode projects automatically if you have Xcode installed.
- GoogleTest supports building either with or without GoogleMock by setting `-DBUILD_GMOCK=OFF`.
- On macOS, frameworks and libraries might be installed in `/usr/local` or `/opt/homebrew` (especially on Apple Silicon). Verify installation paths to configure pkg-config or CMake accordingly.

### Troubleshooting:
- If header or library paths are not found, check `PKG_CONFIG_PATH` to ensure it includes the directory containing `.pc` files.
- For multi-threaded tests, ensure that your compiler flags include pthread support. Using the provided CMake scripts handles this automatically.

## 4. Windows

Windows presents a different environment and requires special considerations due to its compiler and threading model.

### Setup Notes:
- GoogleTest comes with Visual Studio solutions (`gtest.sln`) and project files (`.vcproj`) generated via CMake.
- Use Visual Studio to build these projects, which handle Windows-specific compiler flags and linking.
- The default runtime linkage in Visual Studio differs from GoogleTest's static linkage. To avoid linker errors related to runtime libraries, set the CMake option:

  ```cmake
  -Dgtest_force_shared_crt=ON
  ```

  This option aligns the runtime linkage between GoogleTest and your tests.

- GoogleTest can be compiled as either static libraries or DLLs. If building DLLs, define:

  ```cpp
  -DGTEST_CREATE_SHARED_LIBRARY=1
  ```

  And when compiling test projects using the DLL, define:

  ```cpp
  -DGTEST_LINKED_AS_SHARED_LIBRARY=1
  ```

### Common Issues:
- Linking errors often result from mismatched runtime library settings between GoogleTest and your tests. Use the recommended CMake options above.
- If building without CMake, ensure appropriate compiler/linker flags to enable pthread-like threading support or disable threading if unsupported.

## 5. General Platform-related Tips

- Always verify you have a compiler toolchain supporting **C++17**, as GoogleTest requires this minimum standard.
- When integrating GoogleTest through pkg-config, prefer to use the complete `Cflags` and `LdfLags` variables to include all required flags such as `-pthread` instead of manually parsing `IncludeDirs` or `Libraries`.
- For updates and troubleshooting cross-platform builds, consult the main [GoogleTest README](https://github.com/google/googletest/blob/main/README.md) and the [pkg-config usage guide](https://autotools.io/pkgconfig/usage.html).

## 6. Finding Platform-Specific Scripts and Troubleshooting

The GoogleTest repository includes platform-related support files and scripts:

- Scripts to bootstrap builds on Windows, Linux, and macOS are part of the build tooling and documentation.
- For advanced cross-compilation and platform workarounds, see https://autotools.io/pkgconfig/cross-compiling.html for expert guidance on configuring pkg-config.
- The [Getting Started > Common Setup Issues](https://github.com/google/googletest/blob/main/docs/common-setup-issues.md) page is recommended for troubleshooting.

---

## Summary of Platform Support

| Platform | Key Points                                   | Thread Support | Pkg-config Notes                  |
|----------|----------------------------------------------|----------------|---------------------------------|
| Linux    | Full POSIX support; use env vars for pkg-config | Yes            | Set `PKG_CONFIG_PATH` and sysroot vars as needed |
| macOS    | Standard tools; Xcode project generated; watch install paths | Yes            | Check `PKG_CONFIG_PATH`          |
| Windows  | Use Visual Studio; consider runtime linkage option; DLL/static lib flags | Windows threading model; use `gtest_force_shared_crt` | Use CMake options for best results |

---

## Additional Resources

- [GoogleTest README (main repository)](https://github.com/google/googletest/blob/main/README.md)
- [Using pkg-config with GoogleTest](https://github.com/google/googletest/blob/main/docs/pkgconfig.md)
- [Cross-compiling with pkg-config tutorial](https://autotools.io/pkgconfig/cross-compiling.html)
- [Common Setup Issues](https://github.com/google/googletest/blob/main/docs/common-setup-issues.md)


<Check>
Ensure to adjust your environment variables and build configurations according to your platform and development environment for seamless GoogleTest integration.
</Check>

<Warning>
Avoid splitting pkg-config flags manually between includes and libraries; this can lead to build failures due to missing flags like `-pthread`.
</Warning>

<Tip>
Use the `-Dgtest_force_shared_crt=ON` CMake option on Windows to align runtime libraries and prevent subtle linker errors.
</Tip>

---

### Platform-Specific Notes: Quick Reference

| Platform | Key Environment Variable or Option                            | Description                                    |
|----------|--------------------------------------------------------------|------------------------------------------------|
| Linux    | `export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig`          | Helps pkg-config find `.pc` files post install |
| Linux    | `export PKG_CONFIG_SYSROOT_DIR=/path/to/sysroot`             | For cross-compiling with correct sysroot        |
| Windows  | `-Dgtest_force_shared_crt=ON` (CMake flag)                   | Matches runtime linkage between gtest and tests|
| Windows  | `-DGTEST_CREATE_SHARED_LIBRARY=1`, `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` | Build and link as DLL/shared library             |

---

Whether you are on Linux, macOS, or Windows, these platform-specific notes will help you build, configure, and run GoogleTest smoothly while avoiding the most common platform-related traps.


---

## Related Documentation

- Installation & Configuration: [Install with CMake](../installation/installation-cmake.md)
- Build and Integration: [Using GoogleTest from various build systems](../pkgconfig.md)
- Troubleshooting: [Common Setup Issues](../support/common-setup-issues.md)
- Platform Compatibility Summary: [Supported Platforms](../platforms.md)

---

For detailed assistance, please visit the [GoogleTest GitHub repository Issues section](https://github.com/google/googletest/issues) or community forums.
