---
title: "Basic Configuration & Project Setup"
description: "Guides users through configuring their project to link and use GoogleTest, including setting up necessary include paths, linking test runners, and verifying integration. This includes simple examples for integrating GoogleTest with a new or existing codebase and adjusting basic settings to ensure tests build and execute correctly."
---

# Basic Configuration & Project Setup

This guide walks you through configuring your C++ project to effectively link against and use GoogleTest (and GoogleMock) in your test builds. You'll learn how to set the necessary include paths, link the GoogleTest libraries, verify your setup, and run your first simple test with proper configuration.

---

## 1. Setting Up Your Build Environment

To use GoogleTest in your project, ensure the following basic setup is complete for your build system.

### 1.1 Include Paths

Add the GoogleTest include directory to your compiler's include paths. This directory contains the headers you need to reference in your tests:

```plaintext
path/to/googletest/include/
```

For example, in CMake:

```cmake
target_include_directories(your_test_target PRIVATE path/to/googletest/include)
```

### 1.2 Linking GoogleTest Libraries

Link your test binary with the GoogleTest and GoogleMock libraries. These libraries provide the test runners, assertions, and mocking support.

- If you installed GoogleTest from source, target the built `gtest` and `gmock` libraries.
- If using built-in CMake support, link with `gtest`, `gmock`, and `gtest_main` (which provides the main function).

Example CMake snippet:

```cmake
target_link_libraries(your_test_target PRIVATE gtest gmock gtest_main)
```

If your build system uses pkg-config, you can query package flags:

```bash
pkg-config --cflags --libs gtest
```

Adjust your build scripts accordingly.

### 1.3 Compiler Settings

Ensure your compiler supports C++17 as required by GoogleTest. Set appropriate flags in your build system:

- GCC/Clang: `-std=c++17`
- MSVC: Use `/std:c++17`

Also, consider enabling warnings and diagnostics appropriate to your project standards.

---

## 2. Writing a Minimal Test Source File

Create a simple test file to verify that your configuration and linking work correctly.

```cpp
#include <gtest/gtest.h>

// A trivial test case
TEST(SampleTest, ShouldPass) {
  EXPECT_EQ(1, 1);
}

// Optionally, if not linking with gtest_main, provide main():
// int main(int argc, char **argv) {
//   ::testing::InitGoogleTest(&argc, argv);
//   return RUN_ALL_TESTS();
// }
```

Save this as `sample_test.cpp`.

---

## 3. Build and Run Your Tests

### 3.1 Compile

Use your configured compiler and linker to build your test binary. For example, with g++ and manually specifying include/link flags:

```bash
g++ -std=c++17 -I/path/to/googletest/include -L/path/to/googletest/lib \
    sample_test.cpp -lgtest -lgmock -lgtest_main -pthread -o sample_test
```

Note: Add platform-specific linker flags for threading as GoogleTest requires threading support.

### 3.2 Run

Execute the compiled test binary:

```bash
./sample_test
```

Expected output should indicate all tests passed:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.ShouldPass
[       OK ] SampleTest.ShouldPass (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

---

## 4. Basic Configuration Tips

### 4.1 Use CMake's GoogleTest Integration (Recommended)

Since GoogleTest provides CMake support, prefer using it for easier setup:

```cmake
# Download and add GoogleTest as a subdirectory or via FetchContent
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/release-1.12.1.tar.gz
)
FetchContent_MakeAvailable(googletest)

add_executable(sample_test sample_test.cpp)

target_link_libraries(sample_test PRIVATE gtest_main gmock)

include(GoogleTest)
gtest_discover_tests(sample_test)
```

This approach automatically sets up include paths, linking, and test discovery.

### 4.2 Link Threading Libraries

Don't forget threading libraries (e.g., `-pthread` on Linux). Otherwise you may get linker errors or runtime failures.

### 4.3 Include GoogleMock If Using Mocking

If your tests use GoogleMock features, add its include path and link with `gmock` along with `gtest`.

### 4.4 Avoid Common Pitfalls

- Always link `gtest_main` or provide your own `main()` as GoogleTest requires a test runner entry point.
- Ensure no mismatch between GoogleTest headers and linked library versions.
- Confirm compiler compatibility, especially C++ standard support.

---

## 5. Verifying Your Configuration

You can validate the correctness of your setup by compiling and running the minimal test above.

If tests fail to compile or link, check:

- Include paths (`-I`) correctly point to GoogleTest headers.
- Library paths (`-L`) point to compiled GoogleTest libraries.
- Link commands include `-lgtest`, `-lgmock`, `-lgtest_main` as needed.
- The C++ standard version is compatible.

If runtime test execution fails or crashes, ensure:

- Threading libraries are linked.
- ABI compatibility if GoogleTest was built with a different compiler or flags.

---

## 6. Next Steps

After confirming your basic configuration and project setup:

- Explore writing your first real tests using [Writing Your First Test](../guides/getting-started/first-test.md).
- Learn about integrating mocking with GoogleMock in [Introducing Mocking with GoogleMock](../guides/getting-started/integrate-mocking.md).
- Review platform specifics on [Supported Platforms & Build Systems](../overview/integration-ecosystem/supported-platforms.md).

---

## Troubleshooting

### Problem: Symbol Not Found During Linking

- Ensure you linked with the needed GoogleTest libraries (`gtest`, `gmock`, `gtest_main`).
- Verify library and include paths point to the same installed version.

### Problem: Test Runner Not Found

- Link with `gtest_main` or define your own `main` calling `::testing::InitGoogleTest`.

### Problem: Test Execution Crashes

- Check threading link flags (e.g., `-pthread`).
- Confirm compiler flags are consistent.

---

## Useful References

- [GoogleTest Primer](../guides/getting-started/first-test.md)
- [GoogleMock Cookbook](../docs/gmock_cook_book.md)
- [Supported Platforms & Build Systems](../overview/integration-ecosystem/supported-platforms.md)
- [Installation Instructions](../getting-started/core-setup/installation-platforms.md)
- [Basic Configuration & Project Setup (this page)](./configuration-basics.md)

---

This documentation prepares you to configure your project to successfully build and run your GoogleTest-powered tests with ease and precision.