---
title: "Installation (All Supported Platforms)"
description: "Step-by-step instructions for downloading, building, and installing GoogleTest with CMake, Bazel, and other supported methods on Linux, macOS, and Windows. This page covers obtaining the source code, invoking relevant build commands, and integrating with existing C++ projects, enabling users to choose the method best suited to their environment."
---

# Installation (All Supported Platforms)

Step-by-step instructions for downloading, building, and installing GoogleTest with CMake, Bazel, and other supported methods on Linux, macOS, and Windows. This guide covers obtaining the source code, invoking relevant build commands, and integrating GoogleTest with your existing C++ projects, enabling you to select the best installation method for your environment.

---

## 1. Prerequisites & System Requirements

Before beginning installation, ensure your environment meets the following requirements:

- **Operating Systems Supported:** Linux, macOS, Windows (including Windows Desktop and MinGW variants).
- **C++ Standard:** Compiler with C++17 support.
- **Build Tools:**
  - CMake (version 3.14 or later recommended for FetchContent usage).
  - Make (on Linux/macOS) or build tools compatible with generated projects (e.g., Visual Studio on Windows).
  - Git to clone source repositories.
- **Dependencies:**
  - Threading support (pthread on *nix); handled automatically via CMake.

> See the [Supported Platforms & Build Systems](https://github.com/google/googletest/blob/main/overview/integration-ecosystem/supported-platforms.md) for detailed platform compatibility.

---

## 2. Obtaining the GoogleTest Source Code

GoogleTestâ€™s source code is hosted on GitHub and can be cloned via git:

```bash
# Clone the stable release (recommended)
git clone https://github.com/google/googletest.git -b v1.17.0
directory=googletest
```

Alternatively, you can download the ZIP archive directly from the GitHub releases.

---

## 3. Installation Methods

GoogleTest supports multiple installation and integration methods across platforms. Choose the one that fits your workflow best.

### 3.1 Standalone Build and Install with CMake

GoogleTest comes with a cross-platform CMake build system.

#### Steps:

<Steps>
<Step title="Create Build Directory">
Run the following commands to prepare a build directory.

```bash
cd googletest
mkdir build
cd build
```
</Step>
<Step title="Generate Build Files">
Generate native build scripts. This includes GoogleMock by default:

```bash
cmake ..
```
If you want only GoogleTest without GoogleMock, disable by:

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Compile">
Build the library using:

```bash
make
```

_On Windows, open the generated `gtest.sln` with Visual Studio and build._

_On macOS, the `.xcodeproj` is generated and can be built with Xcode._
</Step>
<Step title="Install Libraries">
As a system administrator (or with necessary privileges), install GoogleTest to the default prefix `/usr/local`:

```bash
sudo make install
```
This installs headers and libraries ready for use by your projects.
</Step>
</Steps>

<Tip>
If you want a custom install location, specify during CMake generation:

```
cmake -DCMAKE_INSTALL_PREFIX=/your/custom/path ..
```
Then install with `make install`.
</Tip>

### 3.2 Integration Using FetchContent in Your Existing CMake Project

You can embed GoogleTest as part of your project build, ensuring consistent compiler/linker settings.

Add to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# For Windows: force shared CRT dynamic linkage
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

_Note: Requires CMake 3.14 or newer._

### 3.3 Using Bazel

GoogleTest supports Bazel builds. Refer to the [GoogleTest Bazel integration](https://github.com/google/googletest) README for instructions specific to Bazel.

### 3.4 pkg-config Support for Build Systems

GoogleTest provides `.pc` files to simplify linking and compiling.

- After installation, pkg-config files like `gtest_main.pc` are installed under `/usr/local/lib/pkgconfig` or equivalent.
- To use pkg-config:

```bash
pkg-config --cflags gtest_main
pkg-config --libs gtest_main
```

- **In CMake**, use pkg-config integration:

```cmake
find_package(PkgConfig)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})
enable_testing()
add_test(first_and_only_test testapp)
```

<Tip>
If `pkg-config` cannot find GoogleTest after manual install, update `PKG_CONFIG_PATH`:

```bash
export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
```

Replace with the directory where `.pc` files were installed.
</Tip>

### 3.5 Cross-Compilation

When cross-compiling GoogleTest:

- Configure with the intended installation prefix (e.g., `/usr`):

```bash
mkdir build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
```
- Install into the sysroot:

```bash
make install DESTDIR=/home/user/sysroot
```
- Set these variables before running pkg-config to ensure correct sysroot injection:

```bash
export PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=yes
export PKG_CONFIG_ALLOW_SYSTEM_LIBS=yes
export PKG_CONFIG_DIR=
export PKG_CONFIG_SYSROOT_DIR=/home/user/sysroot
export PKG_CONFIG_LIBDIR=$PKG_CONFIG_SYSROOT_DIR/usr/lib64/pkgconfig
```

This preserves correct include and lib paths for cross-compilation.

---

## 4. Verifying Installation

Confirm the installation worked by compiling and running a provided sample test.

1. Create a sample test file, e.g. `sample_test.cpp`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, AssertionTrue) {
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. Compile the test:

Using pkg-config:

```bash
g++ sample_test.cpp $(pkg-config --cflags --libs gtest_main) -o sample_test
```

3. Run the test:

```bash
./sample_test
```

You should see output indicating tests ran and passed.

---

## 5. Tips & Best Practices

- **Compiler flags:** Ensure `-DGTEST_HAS_PTHREAD=1` is set on POSIX systems if you manage custom build scripts to enable threading.
- **Dynamic vs. static runtimes (Windows):** Use `gtest_force_shared_crt` option to avoid runtime library conflicts when integrating with Visual Studio projects.
- **Use `target_compile_options` and `target_link_libraries` with pkg-config variables rather than manual include or link paths to avoid missing flags.**
- **Keep GoogleTest current:** Regularly check for updates to benefit from bug fixes and new features.

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Error: 'gtest_main' Not Found">
Often this means pkg-config cannot find the installed GoogleTest `.pc` files.

**Solution:**

- Verify installation prefix.
- Set `PKG_CONFIG_PATH` to the directory containing `.pc` files.
- Example:

```bash
export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
```

Then rerun your build.
</Accordion>
<Accordion title="Linker Errors Related to pthread">
If you see linker errors about undefined pthread symbols, it usually means the pthread library is missing from your link flags.

**Solution:**

- Ensure compiler flags include `-lpthread`.
- When using CMake, this is handled automatically.
- Manually add `-lpthread` if using custom build scripts.
</Accordion>
<Accordion title="Runtime Errors Due to Mismatched CRTs on Windows">
Visual Studio projects might fail due to conflicting runtime linkage (static vs dynamic CRT).

**Solution:**

- Use the `gtest_force_shared_crt` CMake option to unify CRT linkage:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

- Rebuild GoogleTest and re-link your project.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Explore [Basic Configuration & Project Setup](/getting-started/core-setup/configuration-basics) to integrate GoogleTest into your projects.
- Review [Your First Test: Quick Success](/getting-started/core-setup/first-test) for test development guidance.
- Consult [Troubleshooting Common Setup Issues](/getting-started/validation-troubleshooting/common-issues) for advanced help.
- Learn about mocking with GoogleMock for comprehensive test coverage.

---

For advanced build and integration details, refer to GoogleTest's official [README](https://github.com/google/googletest/blob/main/README.md) and [pkg-config](https://github.com/google/googletest/blob/main/docs/pkgconfig.md) documentation.

---