---
title: "Troubleshooting & Common Issues"
description: "If your tests fail to compile or GoogleTest canâ€™t be found by your build system, this page walks you through the most frequent setup problems and their solutions, including environmental misconfigurations and missing dependencies."
---

# Troubleshooting & Common Issues

This page addresses frequent problems users encounter when integrating GoogleTest and GoogleMock into their build and test environments. It provides practical solutions for resolving common compilation failures, linking problems, and runtime issues, helping you get your tests up and running smoothly.

---

## 1. Common Compilation Failures

### Missing or Incorrect Includes

- **Issue:** Compiler errors indicating that `gmock/gmock.h` or `gtest/gtest.h` cannot be found.
- **Cause:** Include paths are not properly set in your build system.
- **Solution:**
  1. Ensure that the GoogleTest source or the installed library's include directory is added to your compiler's include paths.
  2. Use relevant include statements in your test source files as follows:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>
```

- **Tip:** When using Bazel, make sure dependencies are declared correctly to expose these headers.

### Compiler Standards and Versions

- **Issue:** Compilation errors related to C++17 features or template handling.
- **Cause:** Your compiler version is too old or C++17 mode is not enabled.
- **Solution:**
  1. Verify that your compiler supports C++17 (e.g., GCC 7+, Clang 5+, MSVC 2017+).
  2. Add the appropriate compiler flags to enable C++17, such as `-std=c++17`.


## 2. Linking Errors

### Undefined References to GoogleTest or GoogleMock Symbols

- **Issue:** Linker fails with `undefined reference` errors for GoogleTest or GoogleMock functions.
- **Cause:** The test executable is not linked against the GoogleTest and GoogleMock libraries.
- **Solution:**
  1. Link your test executable with `-lgmock`, `-lgtest`, and their dependencies.
  2. Ensure that the libraries are compiled and present in your library search path.

### Order of Linking Libraries

- Linker may fail if libraries are not in the correct order.
- Place `-lgmock -lgtest` after your object files in the linker command.

## 3. Common Runtime Issues

### "Uninteresting mock function call" Warnings

These warnings occur when a mock method is called without an associated expectation.

- **Typical Cause:** You have not added `EXPECT_CALL()` or `ON_CALL()` for the invoked mock method.

- **What to do:**
  1. Add an `EXPECT_CALL()` if you want to verify the call.
  2. Use `ON_CALL()` to define a default action without verifying call count.
  3. If you want to silence warnings for uninteresting calls, encapsulate your mock object with `::testing::NiceMock<T>`.

```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> nice_mock;
```

- For stricter enforcement, use `StrictMock<T>` which turns warnings into test failures.

### Crashes due to Non-Virtual Destructors

- **Issue:** If your mock class inherits from an interface without a virtual destructor, deleting a mock object via a base pointer can cause memory corruption.
- **Solution:** Always declare destructors in interfaces (base classes) as `virtual`.

```cpp
class Foo {
 public:
  virtual ~Foo();  // must be virtual
  ...
};
```

### Mock Method Not Called as Expected

- Use `--gmock_verbose=info` to trace all mock calls and expectations, helping identify which expectation is matched or missed.
- Confirm that your `EXPECT_CALL()` was set before exercising the mock method.
- Remember **`EXPECT_CALL` sets expectations for *future* calls**, so setting expectations after calls leads to undefined behavior.

## 4. Build Environment Configuration

- Confirm paths to GoogleTest and GoogleMock headers and binaries are correctly specified in your build configuration.
- Verify that no macro name collisions occur, for example, the Windows API may define macros that clash with method names.
- Use namespace qualifications or `#undef` conflicting macros if necessary.

## 5. Integration with Other Tools

- When running tests inside IDEs, ensure that the working directory and environment variables are configured properly so tests can find necessary resources.
- For build systems like Bazel, CMake, or Makefiles, refer to official GoogleTest integration instructions for correct setup.

## 6. Advanced Troubleshooting Tips

### For Slow or Flaky Tests

- Isolate flaky tests by running them repeatedly (`--gtest_repeat=N`) to detect intermittent failures.
- Use mock expectations to simulate error conditions and network failures.

### Handling Overlapping and Multiple EXPECT_CALL Statements

- Keep expectations clear and precise to avoid conflicts.
- Remember newer `EXPECT_CALL`s override older ones for the same mock method.
- Use `InSequence` or `After` clauses to enforce call order if necessary.

### Cleaning Up Mocks

- If you have heap check failures due to leaked mocks, use `Mock::AllowLeak(&mock_object);` to explicitly allow a mock to not be verified on destruction.

## 7. Helpful Commands and Flags

| Flag                          | Description                                     |
|-------------------------------|------------------------------------------------|
| `--gmock_verbose=info`        | Prints detailed mock call matching trace.
| `--gmock_verbose=warning`     | Prints warnings on uninteresting calls (default).
| `--gmock_verbose=error`       | Suppresses warnings; prints only errors.
| `--gmock_catch_leaked_mocks=0` | Disables reporting leaked mock objects.

Use these flags via your test executable to gain insight during test runs.

---

## Example: Suppressing Uninteresting Call Warnings

```cpp
#include <gmock/gmock.h>

using ::testing::NiceMock;

class MockFoo {
 public:
  MOCK_METHOD(void, Bar, (), ());
};

int main() {
  NiceMock<MockFoo> mock;
  mock.Bar();  // No warning even though no EXPECT_CALL.
  return 0;
}
```

---

## Where to Get Help

- **Official Documentation:** Start with the [GoogleTest & GoogleMock Docs](https://github.com/google/googletest).
- **Reference Guides:** Check pages on [Mocking APIs](../api-reference/mocking-apis/mock-classes-methods), [Setting Expectations](../api-reference/mocking-apis/mock-expectations-actions), and [Nice, Strict Mocks](../api-reference/mocking-apis/nice-strict-mocks).
- **Community Support:** Use forums, mailing lists, or the GitHub issues page associated with googletest.

---

For more detailed troubleshooting on specific scenarios, review related documentation sections or visit the community support channels.

<AccordionGroup title="Frequently Encountered Issues">
<Accordion title="Unresolved Include Errors">
Ensure your build system includes the directories containing `gmock` and `gtest` headers. Forgot to add the path? Typical error:

```
fatal error: gmock/gmock.h: No such file or directory
```

Add the appropriate include paths and refresh your build.
</Accordion>
<Accordion title="Linker Errors: Undefined References">
Link your tests against `-lgmock -lgtest` and ensure libraries are compiled. If you see errors like:

```
undefined reference to `testing::...
```

It means the linker can't find GoogleMock symbols.

Check library paths and order in your linker command.
</Accordion>
<Accordion title="Mock Methods Not Called">
Verify that:

- `EXPECT_CALL` statements appear before the code exercising the mocks.
- The method signatures in mocks and expectations fully match (includes const, ref qualifiers).

Use `--gmock_verbose=info` to see call trace.
</Accordion>
<Accordion title="Warnings from Uninteresting Calls">
Either add `EXPECT_CALL` or `ON_CALL` to define expected or default behaviors, or wrap your mock object in `NiceMock` to suppress warnings.
</Accordion>
</AccordionGroup>

---