---
title: "Writing Your First Test"
description: "A practical walkthrough for creating, organizing, and structuring your first test case using GoogleTest APIs. Provides foundational code examples, explains core concepts, and empowers the user to quickly verify their environment."
---

# Writing Your First Test

A practical walkthrough for creating, organizing, and structuring your first test case using GoogleTest APIs. This guide provides foundational code examples, explains core concepts, and empowers you to quickly verify your testing environment.

---

## 1. Getting Ready: Prerequisites

Before writing your first test, ensure your development environment has:

- **GoogleTest Installed**: Confirm GoogleTest is properly installed and accessible in your project. If not, follow the [Installation Instructions](../../getting-started/setup-basics/installation-instructions) guide.
- **Build System Configured**: Your build system (e.g., CMake) should include GoogleTest header paths and link against `gtest` or `gtest_main`.
- **C++17 or later**: Your compiler must support C++17 as GoogleTest requires this standard.


<Tip>
If you prefer not to write your own `main()`, link with `gtest_main` or `gmock_main` which provide a ready-to-use entry point that initializes GoogleTest and runs all tests.
</Tip>

## 2. The Basic Test Structure

GoogleTest structures tests into *test suites* and *tests*. Each test suite groups related tests, helping you organize and maintain your test code.

### Writing a Simple Test

The simplest way to add a test is using the `TEST` macro:

```cpp
TEST(TestSuiteName, TestName) {
  ... test code and assertions ...
}
```

- `TestSuiteName`: indicates the group your test belongs to.
- `TestName`: indicates the individual test case.

Both names must be valid C++ identifiers and should **not contain underscores** to avoid naming conflicts as per [GoogleTest naming guidelines](../../faq/common-questions/faq-usage#why-should-test-suite-names-and-test-names-not-contain-underscore).

### Example: Testing a Factorial Function

```cpp
int Factorial(int n);  // Your function under test

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}
```

Here, `FactorialTest` groups related test cases verifying specific inputs and expected outputs.

## 3. Using Test Fixtures for Shared Setup

When multiple tests operate on the same data or require setup/teardown, use *test fixtures*.

### Creating a Test Fixture

1. Define a class derived from `testing::Test`:

```cpp
class FooTest : public testing::Test {
 protected:
  FooTest() {
    // optional constructor setup
  }

  void SetUp() override {
    // code here runs before each test
  }

  void TearDown() override {
    // code here runs after each test
  }

  // Shared resources for tests
  int shared_data_;
};
```

2. Define tests within the fixture with `TEST_F` macro:

```cpp
TEST_F(FooTest, TestA) {
  shared_data_ = 42;
  EXPECT_EQ(shared_data_, 42);
}

TEST_F(FooTest, TestB) {
  // fresh instance - modifications in TestA do not carry over
  EXPECT_EQ(shared_data_, 0);  // Default initialized
}
```

Each test runs on a fresh instance of the fixture. GoogleTest creates, calls `SetUp()`, runs your test code, then calls `TearDown()` and deletes the fixture instance.

## 4. Your First Complete Test Program

For a minimal working test program, write your own `main()` or link with `gtest_main`:

### Custom main()

```cpp
#include <gtest/gtest.h>

// Your test fixture and test definitions here

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);  // Initialize GoogleTest and parse flags
  return RUN_ALL_TESTS();                // Run all registered tests
}
```

### Example with Simple Test

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this program to see output indicating passed or failed tests.

## 5. Understanding Assertions

GoogleTest assertions are the building blocks of tests. They check conditions and report results.

- `EXPECT_*` assertions report failures but let the test continue.
- `ASSERT_*` assertions report failures and abort the current test function on failure.

Use `ASSERT_*` when continuing after failure makes no sense or would cause crashes.

### Common Assertions Examples

```cpp
EXPECT_EQ(val1, val2);   // Check equality
ASSERT_TRUE(condition);  // Check boolean condition - abort test if false
EXPECT_NE(val1, val2);   // Check inequality
```

You can stream custom messages to assertions for richer failure context:

```cpp
ASSERT_EQ(result, expected) << "Failed on input " << input_value;
```

## 6. Running Your First Test

After building your test executable, run it:

```shell
./my_test_executable
```

Expected output example:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from FactorialTest
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 1 test from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If your test fails, GoogleTest will print detailed failure messages with file and line numbers.

## 7. Organizing Tests and Best Practices

- Group tests in suites that reflect the structure of your code.
- Use `TEST()` for simple independent tests.
- Use `TEST_F()` with fixtures for tests sharing setup or state.
- Prefer `EXPECT_*` for checks that allow further testing; use `ASSERT_*` where continuation is unsafe.
- Avoid underscores (`_`) in test suite and test names.
- Keep tests small and focused on one behavior.

## 8. Troubleshooting Your First Test

### Common Issues

- **Link errors for `main` function?**
  Ensure you either define your own `main()` that calls `InitGoogleTest` and `RUN_ALL_TESTS()`, or link with `gtest_main` which provides this.

- **Test fixture has no default constructor error?**
  GoogleTest requires default-constructible test fixtures. Define a default constructor if your fixture has other constructors.

- **Test not running or detected?**
  Make sure tests are registered with the `TEST` or `TEST_F` macro and compiled into your test binary.

- **Assert/Expect macros fail to compile?**
  Check that you included `<gtest/gtest.h>` properly and that your test names conform to identifier rules.

<Tip>
If your setup is complex or you want to verify environment, write a basic `TEST` that checks core functions or classes and run it first.
</Tip>

## 9. What's Next?

After you've written and run your first test:

- Explore [Building and Running Tests](../getting-started/first-test-experience/building-and-running-tests) to learn about integrating GoogleTest with your build system.
- Check out [Quick Validation & Sample Tests](../getting-started/first-test-experience/quick-validation-steps) for sample test examples.
- Delve into advanced testing features, including parameterized tests and fixtures in the [Advanced Guide](../../docs/advanced).

---

## Related Resources

- [GoogleTest Primer](../../docs/primer) – Foundation for writing tests
- [GoogleTest Core API Reference](../../api-reference/gtest-core-api) – Detailed API documentation
- [FAQ](../../docs/faq) – Troubleshooting and best practices
- [Installation Instructions](../../getting-started/setup-basics/installation-instructions) – Setup and build

---

You are now equipped to craft your initial GoogleTest case, helping create reliable and maintainable tests with confidence.