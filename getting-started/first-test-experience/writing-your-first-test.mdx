---
title: "Writing & Running Your First Test"
description: "Shows you how to write a minimal test case, build it, and execute it, using real examples. Includes example code, expected output, and tips for interpreting test results."
---

# Writing & Running Your First Test

Welcome to your first step in using GoogleTest and GoogleMock! In this guide, you'll learn how to write a minimal test case, build it, run it, and interpret its output. We'll walk through a complete example, showing you how to verify that your environment is set up correctly and your code is behaving as expected.

---

## 1. Creating Your First Test Case

The heart of GoogleTest is the `TEST` macro, which defines a single test.

### Minimal Example

```cpp
#include <gtest/gtest.h>

// A trivial test case.
TEST(ExampleTest, BasicAssertion) {
  EXPECT_EQ(1 + 1, 2);
}
```

- `ExampleTest` is the test suite name.
- `BasicAssertion` is the name of this individual test.

This test simply checks that 1 + 1 equals 2, which should always pass.

### Compile the Test

Ensure you include the GoogleTest headers and link to the GoogleTest and GoogleMock libraries when compiling. For example, using `g++`:

```bash
g++ -std=c++11 -isystem /path/to/googletest/include -pthread \
    your_test.cc /path/to/libgtest.a /path/to/libgmock.a -o your_test
```

<Tip>
Replace `/path/to/` with the actual paths on your system. Use your platform's build system for better management.
</Tip>

## 2. Running Your Test

Run the compiled executable:

```bash
./your_test
```

Expected output:

```text
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.BasicAssertion
[       OK ] ExampleTest.BasicAssertion (0 ms)
[----------] 1 test from ExampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Understanding the Output

- `[ RUN      ]` indicates the test is running.
- `[       OK ]` means the test passed.
- `[  PASSED  ]` confirms all tests succeeded.

<Tip>
If the test fails, GoogleTest will print informative error messages to help you diagnose the issue.
</Tip>

## 3. Adding Mock Objects (Optional but Recommended)

GoogleMock extends GoogleTest by allowing you to create mock objects that can simulate and verify interactions.

### Example Mock Class

Define a mock for the following interface:

```cpp
class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};
```

The mock:

```cpp
#include <gmock/gmock.h>

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};
```

### Using the Mock in a Test

```cpp
TEST(PainterTest, CanDrawLine) {
  MockTurtle turtle;

  // Expect PenDown and Forward to be called with specific arguments.
  EXPECT_CALL(turtle, PenDown());
  EXPECT_CALL(turtle, Forward(100));

  // Code under test would use the `turtle` mock.
  turtle.PenDown();  // Simulate the code calling these.
  turtle.Forward(100);
}
```

### Run the Test

When you build and run, the test will validate that the mock behaved as expected.

<Tip>
You can suppress warnings about uninteresting calls by wrapping the mock in `NiceMock`: `NiceMock<MockTurtle> turtle;`.
</Tip>

## 4. Interpreting Test Results

### Successful Tests

- All tests passed: your environment and test logic are correct.

### Failure Cases

- **Assertion Failures**: The output shows where and why tests failed.
- **Mock Expectation Failures**: If `EXPECT_CALL` expectations are not met, GoogleMock reports errors immediately with detailed messages.

### Increasing Verbosity for Debugging

Run tests with the `--gmock_verbose=info` flag to see detailed trace of mock function calls and expectations.

```bash
./your_test --gmock_verbose=info
```

This helps diagnose why certain expectations are not met.

## 5. Sample Complete Test File

Here's a file you can compile and run to explore:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::NiceMock;
using ::testing::StrictMock;
using ::testing::NaggyMock;
using ::testing::Expectation;

// The interface.
class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

// Mock class.
class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};

// Example test using a StrictMock.
TEST(MockTurtleTest, StrictMockUsage) {
  StrictMock<MockTurtle> turtle;

  EXPECT_CALL(turtle, PenDown());
  EXPECT_CALL(turtle, Forward(100));

  turtle.PenDown();
  turtle.Forward(100);
}

// Example test with NiceMock suppressing uninteresting call warnings.
TEST(MockTurtleTest, NiceMockUninterestingCall) {
  NiceMock<MockTurtle> turtle;

  // No expectations set. Purely allows calls without warnings.
  turtle.PenDown();  // No warning or failure
  turtle.Forward(50);

  // You can still set expectations.
  EXPECT_CALL(turtle, Forward(50));
  turtle.Forward(50);
}

// Very basic test without mocks.
TEST(SimpleTest, Equals) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build this with your GoogleTest and GoogleMock library paths, then run the executable.

## 6. Tips for Success

- Include the `<gtest/gtest.h>` header for GoogleTest and `<gmock/gmock.h>` for GoogleMock.
- Compile and link against GoogleTest and GoogleMock libraries.
- Use `EXPECT_CALL` to set expectations on mock methods.
- Use `ON_CALL` to define default behavior when you do not want to expect a call.
- You can wrap your mock objects in `NiceMock` or `StrictMock` to control behavior on uninteresting calls.
- Run tests with `--gmock_verbose=info` to get detailed diagnostics.

## 7. Common Pitfalls

<AccordionGroup title="Common Issues When Writing and Running Your First Tests">
<Accordion title="Linker Errors related to GoogleTest/GoogleMock">
Ensure you have linked the GoogleTest and GoogleMock libraries correctly and use compatible compiler flags. Verify header include paths match library paths.
</Accordion>
<Accordion title="Test Fails but Output is Not Clear">
Run with `--gmock_verbose=info` to see detailed function call traces and expectation matches.
</Accordion>
<Accordion title="Expectations Not Met Errors">
Verify that all calls you `EXPECT_CALL` are actually made during the test run. Remember that order and cardinality matter unless explicitly set.
</Accordion>
<Accordion title="Uninteresting Call Warnings">
Use `NiceMock` to suppress warnings about mock methods called without corresponding expectations.
</Accordion>
</AccordionGroup>

---

For more examples and detailed recipes, see the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) and consult the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html).

---