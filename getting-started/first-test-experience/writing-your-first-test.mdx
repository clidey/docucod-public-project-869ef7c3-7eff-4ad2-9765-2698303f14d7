---
title: "Writing Your First Test Case"
description: "Walks new users through setting up a simple test file: including the right headers, using core macros, and structuring a basic test function to validate their environment and understanding. Explains the anatomy of a standard test file."
---

# Writing Your First Test Case

Welcome to your very first step with GoogleTest! This guide walks you through creating a simple test file, including the necessary headers, using GoogleTest’s core macros, and structuring a test function that will validate your environment and help you understand the basic anatomy of a test case.

---

## 1. Setting Up Your Test File

Before writing tests, you need to create a test source file that includes GoogleTest’s headers and sets up the basic testing environment.

### Include the GoogleTest Header

At the top of your test file, include the main GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This header brings in the core GoogleTest functionalities including assertions, test macros, and test runner support.

### Use the `main` Function Provided by GoogleTest

GoogleTest provides a default `main()` function, so you usually do not need to write your own `main()` unless you need special configuration. Linking with the `gtest_main` library will automatically provide this for you.

If you want to write a custom main function for advanced control, you can do the following:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This initializes GoogleTest and then runs all tests defined in your program.

## 2. Writing Your First Test Function

GoogleTest structures tests into **test cases** (sometimes called test suites) and **test functions** (test methods). 

### Basic Syntax

Use the `TEST` macro to define a test function:

```cpp
TEST(TestCaseName, TestName) {
  // Arrange: Set-up any variables or objects.

  // Act: Run the code to be tested.

  // Assert: Check conditions using EXPECT_ or ASSERT_ macros.
  EXPECT_EQ(1, 1);  // Example assertion
}
```

- `TestCaseName` groups related tests together (usually a class or module name).
- `TestName` identifies this particular test case.

### Example: A Simple Test

Here’s a complete example of a minimal test that always passes:

```cpp
#include <gtest/gtest.h>

// A simple test case named "ExampleTest" with a test named "BasicAssertion".
TEST(ExampleTest, BasicAssertion) {
  int x = 5;
  int y = 5;
  EXPECT_EQ(x, y);  // Checks if x equals y.
}
```

### Typical Assertions

- `EXPECT_EQ(val1, val2)` — Verifies values are equal but continues test on failure.
- `ASSERT_EQ(val1, val2)` — Verifies values are equal and aborts the test if it fails.

See the [GoogleTest Assertions Reference](https://google.github.io/googletest/reference/assertions.html) for all assertion types.

## 3. Running Your Test

Compile your test executable linking with GoogleTest libraries.

From the command line:

```shell
./your_test_executable
```

GoogleTest runs all tests it finds in your executable, prints the results to the console, and returns an appropriate status code.

### Expected Output

Example output for a passing test:

```
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.BasicAssertion
[       OK ] ExampleTest.BasicAssertion (0 ms)
[----------] 1 test from ExampleTest (0 ms total)

[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

If your test fails, GoogleTest will print detailed information about which assertion failed, including the source file and line number, actual values, and a snippet of your test code.

## 4. Understanding the Anatomy of a Test

- **Test suite (TestCaseName):** A group of related tests.
- **Test (TestName):** A single function testing specific behavior.
- **Setup and Teardown:**
  - Use `TEST_F` macro with a test fixture class when you need common context or shared setup/cleanup for related tests.
- **Assertions:** Validate expectations about the behavior.

## 5. Best Practices

- **Keep your tests small and focused.** Each test should verify one thing.
- **Use meaningful names** for test cases and tests to describe their intent.
- **Avoid side effects and dependencies** that could make tests flaky.

## 6. Troubleshooting Common Pitfalls

<Tip>
If your test executable does not run any tests, check:

- Ensure your test function uses the `TEST` or `TEST_F` macro.
- Verify your build links with the `gtest` and (optionally) `gtest_main` libraries.
- If you wrote your own `main()`, confirm that you call `InitGoogleTest()` and `RUN_ALL_TESTS()`.
</Tip>

<Tip>
If your test fails unexpectedly, try running it with verbose output:

```
./your_test_executable --gtest_verbose=info
```

This prints detailed reasoning about which tests are run and why.
</Tip>

## 7. What Next?

Once you have mastered this first test creation step, explore the following topics:

- [Building and Running Your Test Suite](/getting-started/first-test-experience/building-and-running-tests)
- [Writing More Complex Tests with Fixtures](gmock_for_dummies.md)
- [Using Assertions Effectively](/guides/core-workflows/using-assertions)

These guides will help you expand your testing skills progressively.

---

## Summary

This page introduced the essentials of writing your first test case with GoogleTest: including headers, defining tests with the `TEST` macro, and running tests. It explained test anatomy, common assertions, and practical tips to get started with confidence.

---

### References
- [GoogleTest Primer - Getting Started](https://google.github.io/googletest/primer.html)
- [Assertions Reference](https://google.github.io/googletest/reference/assertions.html)
- [gMock for Dummies](gmock_for_dummies.md) for mock testing

---

> **Tip:** Remember, the cornerstone of successful testing is establishing clear expectations early, writing concise tests, and leveraging GoogleTest’s powerful macros to validate behavior effectively.
