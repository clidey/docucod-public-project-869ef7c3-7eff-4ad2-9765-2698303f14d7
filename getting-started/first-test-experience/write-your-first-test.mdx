---
title: "Writing Your First Test"
description: "Guides you through creating and running a basic test case, demonstrating core assertion macros and the workflow of compiling and executing a test binary."
---

# Writing Your First Test

This guide walks you through creating and running a basic GoogleTest test case, demonstrating core assertion macros and the workflow of compiling and executing a test binary.

## 1. Prerequisites & Setup

Before writing your first test, ensure the following:

- **Development Environment:** You have a working C++17 compiler and build tools.
- **GoogleTest Installed:** GoogleTest is properly installed and accessible for your build system.
- **Include Path:** Your project can include the header `<gtest/gtest.h>`.

If you have not installed GoogleTest yet, please refer to the installation guides for your platform and build system.

## 2. Writing a Basic Test

GoogleTest organizes tests into *test suites* and *tests*. A test suite groups related tests together.

### Step 1: Include the GoogleTest Header

Add the following include directive to your test source file to use the testing framework:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Test with `TEST()` Macro

Use the `TEST(TestSuiteName, TestName)` macro to define a test. Both `TestSuiteName` and `TestName` must be valid C++ identifiers without underscores (`_`).

Example:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, Factorial(0));
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(1, Factorial(1));
  EXPECT_EQ(2, Factorial(2));
  EXPECT_EQ(6, Factorial(3));
}
```

**Explanation:**
- `TEST` creates an individual test function.
- `EXPECT_EQ(expected, actual)` asserts that `actual` equals `expected`. On failure, it reports a non-fatal failure but continues execution.

### Step 3: Implement Tested Functions

Provide the implementation of the functions you're testing (e.g., `Factorial`). Ensure these are linked with your test binary.

### Step 4: Build Your Test Program

Compile your test program with the GoogleTest libraries linked in. For example, if using `g++` and GoogleTest is installed globally:

```bash
g++ -std=c++17 -isystem /usr/include/gtest -pthread your_test.cc -lgtest -lgtest_main -o your_test
```

Adjust the include and library paths according to your setup.

## 3. Running the Test

Run the compiled test binary:

```bash
./your_test
```

Expected Output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

The test program exits with code `0` if all tests pass, or `1` if any test fails.

<Tip>
Always ensure your `main()` function returns the result of `RUN_ALL_TESTS()` to correctly report the test outcome.
</Tip>

## 4. Understanding Test Assertions

GoogleTest provides two major families of assertion macros:

- `EXPECT_*`: Nonfatal assertions. If they fail, the test continues.
- `ASSERT_*`: Fatal assertions. If they fail, the current function returns immediately.

Use `EXPECT_*` when you want to check multiple conditions in a test and report all failures.
Use `ASSERT_*` when continuing after a failure is not meaningful.

Example with failure messages:

```cpp
TEST(IsPrimeTest, BasicAssertions) {
  EXPECT_TRUE(IsPrime(2)) << "2 should be prime";
  ASSERT_FALSE(IsPrime(4)) << "4 should not be prime";
}
```

If an assertion fails, GoogleTest prints the condition and its actual values for easy debugging.

## 5. Sample Full Test Program

Here is a minimal standalone example that tests a factorial function:

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this program to verify your setup and understand the testing workflow.

## 6. Best Practices & Tips

- Avoid underscores (`_`) in test suite names and test names to prevent naming conflicts.
- Use descriptive test suite and test names that clearly state the purpose.
- Group logically related tests into the same test suite.
- Use `ASSERT_*` assertions to guard subsequent code in tests that depends on a condition.
- Always return the value of `RUN_ALL_TESTS()` from your test binary's `main()`.

## 7. Troubleshooting

### Common Issues

- **Compiler errors related to missing default constructors in test fixtures:**
  GoogleTest requires default-constructible fixture classes when using `TEST_F`.
- **Tests not running:** Make sure `InitGoogleTest` is called before `RUN_ALL_TESTS`.
- **Test names conflict errors:** Avoid reusing test suite names with different fixture classes in different namespaces.

### Getting Help

Check these resources for help:

- [Official GoogleTest Primer](docs/primer.md)
- [Assertions Reference](docs/reference/assertions.md)
- [GoogleTest FAQ](docs/faq.md)
- Community forums and GitHub issues

## 8. Next Steps

Continue your GoogleTest journey by exploring:

- Writing tests with fixtures (`TEST_F`) for shared setup
- Parameterized and typed tests for data-driven testing
- Custom assertions for expressive test code
- Integrating GoogleTest into your build and CI pipelines

For detailed concepts and advanced topics, see the [GoogleTest Primer](docs/primer.md) and [Guides on Parameterized and Typed Tests](guides/advanced-usage/parameterized-tests).

---

# References

- [GoogleTest Primer](docs/primer.md)
- [Assertions Reference](docs/reference/assertions.md)
- [Testing Reference](docs/reference/testing.md)
- [GoogleTest FAQ](docs/faq.md)
- [Sample Tests Repository](https://github.com/google/googletest/tree/main/googletest/samples)

---

This page is part of the [Getting Started > First Test & Quick Validation](https://github.com/google/googletest/tree/main/docs/getting-started/first-test-experience) documentation path.