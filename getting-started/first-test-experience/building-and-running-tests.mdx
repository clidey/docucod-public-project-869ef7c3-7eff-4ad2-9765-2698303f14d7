---
title: "Building and Running Your Test Suite"
description: "Shows users how to compile and execute their tests using either the test runner main, examples of command-line invocation, and what expected output looks like. Reinforces success criteria and validates environment setup."
---

# Building and Running Your Test Suite

This guide walks you through compiling and executing your GoogleTest test suites. It explains how to use the test runner `main()`, run tests from the command line, interpret the output, and verify your environment is correctly set up.

---

## 1. Compiling Your Tests

Before running tests, you must compile your test source files with GoogleTest and GoogleMock libraries.

### Using the Provided Test Runner Main

GoogleTest supplies a default `main()` function in the `gtest_main` library that initializes the framework and runs all registered tests. Linking with `gtest_main` is the recommended approach unless you need custom behavior.

Example compilation command (assuming CMake and installed libraries):

```bash
# Compile your test source (e.g., example_test.cpp) and link with gtest_main
clang++ -std=c++17 -isystem /usr/local/include -pthread \
  example_test.cpp -L/usr/local/lib -lgtest_main -lgtest -lgmock -o example_test
```

If your environment differs, integrate linking with `gtest_main` as described in your build system.

### Writing a Custom main()

If you require setup beyond what `gtest_main` provides, implement your own `main()` that calls GoogleTest initialization and runs tests:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

The function `InitGoogleTest()` parses GoogleTest-specific flags from command line arguments, so it **must** be called before `RUN_ALL_TESTS()`.

---

## 2. Running Your Tests

Once compiled, run your test executable from the command line:

```bash
./example_test
```

GoogleTest automatically discovers and runs all tests linked into the executable.

### Basic Command-Line Options

You can control test execution with flags:

- `--gtest_filter=TestSuiteName.TestName`
  - Run only the specified test or tests matching a pattern
- `--gtest_repeat=N`
  - Repeat all tests N times
- `--gtest_shuffle`
  - Randomize test order
- `--gtest_output=[xml|json]:path`
  - Emit test results to a file

Example: Run only `FactorialTest.HandlesZeroInput` test

```bash
./example_test --gtest_filter=FactorialTest.HandlesZeroInput
```

### Using `RUN_ALL_TESTS()` Return Code

The test executable returns `0` if all tests pass, or `1` if any test fails. This behavior allows integration with CI systems and scripts.

Use it in your shell as:

```bash
./example_test && echo "All tests passed" || echo "Some tests failed"
```

---

## 3. Understanding Test Output

When you run your test executable, the output provides detailed results.

### Sample Output

```plaintext
Running main() from gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

#### What This Means

- Each test is listed with its status: `[ RUN      ]`, `[       OK ]` for success, or `[  FAILED  ]` for failure.
- Summary lines show how many tests and suites ran and their outcome.
- Elapsed times help identify slow tests.

### Interpreting Failure Output

Failed assertions display error messages, source file, and line number to help pinpoint issues.

```plaintext
example_test.cpp:42: Failure
Expected equality of these values:
  Factorial(3)
    Which is: 5
  6
```

This shows the test file and line with failure details.

---

## 4. Validating Your Environment

Successful test runs confirm your GoogleTest environment is set up correctly.

### What to Check

- Your test executable runs without linker errors.
- Tests are discovered and run automatically without manual enumeration.
- The test output shows the expected number of tests executed.
- If you use `gtest_main`, the "Running main() from gtest_main.cc" message appears.

### Troubleshooting

<AccordionGroup title="Common Issues and Fixes">
<Accordion title="Tests Not Running or Found">
Verify your `main()` calls `InitGoogleTest()` and `RUN_ALL_TESTS()`.

Check your build links against `gtest_main` or implement your own main properly.

Ensure tests are not disabled (names not prefixed with `DISABLED_`).
</Accordion>
<Accordion title="Linker Errors Related to gtest_main">
If linking against `gtest_main` fails, confirm you are linking in the correct order and have installed GoogleTest properly.

Alternatively, consider writing your own `main()` as shown above.
</Accordion>
<Accordion title="Unexpected Test Failures or Crashes">
Inspect failure messages and line numbers.

Use test isolation techniques like `TEST_F` fixtures.

Review whether your code requires environment or external resources.
</Accordion>
</AccordionGroup>

---

## 5. Best Practices and Tips

- **Leverage `gtest_main`** unless you need special startup/shutdown logic.
- **Use command-line flags** to focus test runs and diagnose issues efficiently.
- **Check return codes** from test executables in CI pipelines for automation.
- **Review output carefully** to identify failed tests, ignored tests, and performance bottlenecks.
- **Write small, independent tests** to maximize repeatability and debuggability.

---

## 6. Next Steps

- Explore [Writing Your First Test Case](../first-test-experience/writing-your-first-test) for guided test creation.
- Review [Installation Instructions](../setup-and-installation/installation-platforms) if your build or linking fails.
- Consult [Troubleshooting and Common Setup Issues](../first-test-experience/troubleshooting-and-validation) for advanced diagnostics.
- Learn how to organize tests better via [Structuring Test Cases and Test Suites](../../guides/core-workflows/structuring-tests).

---

_For full command line options and detailed test runner behaviors, see the [Advanced Guide](../../advanced.md) and [Testing Reference](../reference/testing.md)._