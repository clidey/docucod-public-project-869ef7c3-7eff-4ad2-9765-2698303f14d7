---
title: "Building and Running Tests"
description: "Learn how to compile and execute your tests using your chosen build system. Get specific instructions for both CMake and Bazel users on different platforms, and see expected output for successful test runs."
---

# Building and Running Tests

Learn how to compile your tests and execute them using your preferred build system. This guide provides specific instructions for building and running tests with both CMake and Bazel on supported platforms. You will also see how to interpret the expected output after a successful test run.

---

## 1. Prerequisites

- Ensure you have installed GoogleTest and have your test source code ready (e.g., your `*_test.cc` file).
- Have your build system configured to find GoogleTest headers and libraries.
- For CMake users, have CMake 3.14 or later installed.
- For Bazel users, your workspace must include GoogleTest as a workspace dependency.

> **Note:** Building and running tests requires a C++17-capable compiler and a supported platform (Linux, Windows, Mac).

## 2. Building Tests with Your Build System

### 2.1 Building with CMake

GoogleTest provides CMake support for seamless integration. There are two main approaches:

#### A) Standalone CMake Build

1. Clone or download GoogleTest source.
2. Create a separate `build` directory.
3. Run CMake configuration:

```bash
mkdir build && cd build
cmake ..           # To build both GoogleTest and GoogleMock
# or
cmake .. -DBUILD_GMOCK=OFF  # To build GoogleTest only
```

4. Build the project:

```bash
make                # Unix-like systems
# or
cmake --build .     # Cross-platform command
```

5. Optionally, install GoogleTest system-wide (requires admin rights):

```bash
sudo make install    # Unix-like platforms
```

#### B) Integrate GoogleTest into Your Own CMake Project

- Add GoogleTest as a subdirectory or use `FetchContent` in your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Windows runtime compatibility
FetchContent_MakeAvailable(googletest)

add_executable(my_tests my_tests.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

- Then build your project normally with `cmake` and your native build tool.

### 2.2 Building with Bazel

1. Add GoogleTest to your `WORKSPACE` file, for example:

```python
http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/release-1.17.0.tar.gz",
    strip_prefix = "googletest-release-1.17.0",
)
```

2. Add `@com_google_googletest//:gtest` or `@com_google_googletest//:gtest_main` as a dependency in your `BUILD` files.

3. Define test targets and build:

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

4. Build and run tests:

```bash
bazel build //path/to:my_test
bazel test //path/to:my_test
```

## 3. Running Your Tests

Regardless of build method, after building the test executable (e.g., `my_tests`), run it directly:

```bash
./my_tests
```

Or, with Bazel:

```bash
bazel test //path/to:my_test
```

### Expected Output

Your test suite will print progress and results similar to:

```plaintext
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from FooTest
[ RUN      ] FooTest.Test1
[       OK ] FooTest.Test1 (0 ms)
[ RUN      ] FooTest.Test2
[       OK ] FooTest.Test2 (1 ms)
[ RUN      ] FooTest.Test3
[       OK ] FooTest.Test3 (0 ms)
[----------] 3 tests from FooTest (1 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 3 tests.
```

- Each test reports its result with `[ RUN      ]`, `[       OK ]`, or `[  FAILED  ]` messages.
- The summary at the end confirms successful or failed tests and timing.

## 4. Tips and Best Practices

- Use `gtest_main` if possible to avoid writing your own `main()` function. It automatically handles initialization and test execution.
- Review the CMake or Bazel documentation for your environment to adapt the snippets as necessary.
- Use `--gtest_list_tests` flag to list all tests without executing them.

```bash
./my_tests --gtest_list_tests
```

- Use `--gtest_filter=TestSuiteName.TestName` to run specific tests.
- Always check the return value of `RUN_ALL_TESTS()` in your `main()` or test runner.

## 5. Troubleshooting

- **Build errors:** Verify C++17 compatibility and correct linkage to GoogleTest libraries.
- **Missing tests at runtime:** Check filtering flags or disabled tests with `DISABLED_` prefix.
- **Runtime errors:** Use `--gtest_break_on_failure` to trigger debugger break at the failure.
- **Environment issues:** Ensure search paths for includes and libraries are correctly set in your build configuration.

## 6. Next Steps

- Write your first test using `TEST` or `TEST_F` macros ([Writing Your First Test](hello-test)).
- Validate your setup by running sample tests to confirm the environment.
- Learn about advanced configuration and options in [Initial Configuration](configuration).
- Explore strategies for effective test suite design in [Test Suite Structure and Best Practices](best-practices).

---

For more detailed commands and examples, see the related documentation on:

- [GoogleTest Primer](../primer.md)
- [Installation Methods](installation-methods)
- [Running Tests: Flags and Options](reference/testing.md#running-tests)

---

<Info>
Running tests successfully means your build system can compile, link, and properly execute your test binaries, and GoogleTest can discover your tests and report results.
</Info>
