---
title: "Building and Running Tests"
description: "Detail how to compile test binaries with their preferred build system, execute tests, and interpret results. Highlight typical test runner commands and expected output."
---

# Building and Running Tests

This guide explains how to compile your test binaries using your preferred build system, execute those tests, and interpret the results using GoogleTest. We focus on typical commands to build and run tests, expected outputs, and practical advice to help you successfully verify your test suite.

---

## 1. Prerequisites & Setup

Before building and running tests, ensure the following:

- You have GoogleTest source or pre-built libraries available.
- Your build environment supports C++17 or later.
- Your build system is configured to include GoogleTest headers and link against the GoogleTest libraries.
- Your test source files include `#include <gtest/gtest.h>`.

<Tip>
Building tests requires a compatible compiler and proper linking of GoogleTest. For detailed instructions on installing and configuring GoogleTest with popular build systems, see [Installing with CMake](../installation-guide/installing-cmake.md).
</Tip>

## 2. Building Test Binaries

GoogleTest itself does not prescribe a specific build system. You can compile your test binaries with any toolchain, as long as GoogleTest headers and libraries are correctly included.

### Common Build Systems

- **CMake**: The recommended way. Include GoogleTest as a subdirectory or find a system-installed package.
- **Bazel**: Use Bazel rules to include GoogleTest and link targets.
- **Manual compilation**: Compile source files with `-I` for headers and link against gtest static or shared libraries.

### Example: Building with CMake

1. Add GoogleTest as a subdirectory or find it via `find_package`.
2. Use `target_link_libraries(your_test_target gtest_main)` to link the main GoogleTest runner.
3. Run `cmake` and your native build tool (e.g., `make` or `ninja`).

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

<Tip>
GoogleTest provides a main function in `gtest_main` library, so linking against it eliminates the need to write your own main function for test binaries.
</Tip>

## 3. Executing Tests

Once compiled, you can run your test binaries directly from the command line.

```bash
./your_test_binary
```

GoogleTest automatically discovers and runs all tests linked into your binary.

### Typical Output

Example output from running the tests:

```none
Running main() from gtest_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from MyTestSuite
[ RUN      ] MyTestSuite.TestOne
[       OK ] MyTestSuite.TestOne (0 ms)
[ RUN      ] MyTestSuite.TestTwo
[  FAILED  ] MyTestSuite.TestTwo (1 ms)
[ RUN      ] MyTestSuite.TestThree
[       OK ] MyTestSuite.TestThree (0 ms)
[----------] 3 tests from MyTestSuite (1 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] MyTestSuite.TestTwo

 1 FAILED TEST
```

This output shows:

- Invocation message from the `main` implemented in `gtest_main.cc`.
- Test suites and individual test cases being executed.
- Which tests passed or failed along with timing.
- A summary indicating the total tests run, passed, and failed.

<Tip>
Use the flag `--gtest_help` with your test binary to list available command-line options for customizing execution.
</Tip>

## 4. Common Test Runner Commands

GoogleTest provides a number of flags to control test execution:

| Command-Line Flag         | Description                                |
|--------------------------|--------------------------------------------|
| `--gtest_filter=pattern` | Runs only tests matching the pattern (e.g., `MyTestSuite.TestOne`) |
| `--gtest_repeat=N`       | Repeats all tests N times; use `-1` for infinite |
| `--gtest_list_tests`     | Lists all tests without running them      |
| `--gtest_shuffle`        | Run tests in random order                   |
| `--gtest_break_on_failure` | Stop running on the first failure          |
| `--gtest_output=xml:filename` | Generates an XML report at the specified file |

### Running a Specific Test

```bash
./your_test_binary --gtest_filter=MyTestSuite.TestOne
```

Only the specified test runs, making targeted debugging faster.

### Running Tests Multiple Times

```bash
./your_test_binary --gtest_repeat=100
```

Useful for identifying flaky tests.

### Shuffling Tests

```bash
./your_test_binary --gtest_shuffle
```

Reveals dependencies between tests by randomizing execution order.

## 5. Interpreting Test Results

Understanding the GoogleTest output is crucial to quickly identify issues.

- Tests are grouped by test suites.
- Each test shows `[ RUN      ]` at start, followed by `[       OK ]` or `[  FAILED  ]` with duration.
- The test program ends with a summary including counts of passed and failed tests.
- If there are failures, each failed test is listed explicitly.

### Understanding Failure Output

Failure reports contain:

- File name and line number where the failure occurred.
- Expected and actual values.
- The failed assertion macro used.

Example snippet of failure message:

```
/path/to/test.cc:45: Failure
Expected equality of these values:
  foo.Bar()
    Which is: 3
  5
```

This detail points you directly to the source of the issue.

<Tip>
If your output is too verbose, consider `--gtest_brief=1` to print failures only.
</Tip>

## 6. Troubleshooting Common Issues

### Tests Not Running

- Verify tests are linked into your binary.
- Check that your test functions are correctly defined using `TEST`, `TEST_F`, or `TEST_P` macros.
- Ensure `RUN_ALL_TESTS()` is called from `main()`.

### Linking Errors

- Confirm your build links `gtest` or `gtest_main` libraries properly.
- Adjust include paths for the `gtest` headers.

### Test Crashes or Hangs

- Use `--gtest_break_on_failure` with a debugger to halt on first failure.
- Use test sharding or repetition flags to isolate issues.

### Parsing Flags

- Always call `testing::InitGoogleTest()` before `RUN_ALL_TESTS()` to parse command-line flags correctly.

## 7. Next Steps

- After successfully building and running tests, explore writing your tests using [GoogleTest Primer](../primer.md).
- Learn advanced testing techniques in [Advanced GoogleTest Topics](../advanced.md).
- For mocking dependencies, see the gMock framework in [Googletest Mocking Framework](../googlemock/README.md).

---

## Example: Building and Running a Simple Test with CMake

1. Create your test source file `sample_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, SimpleAssertion) {
  EXPECT_EQ(42, 40 + 2);
}
```

2. Create a `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(SampleTestProject)

# Enable testing
enable_testing()

# Add GoogleTest
add_subdirectory(/path/to/googletest googletest_build)

# Create test executable
add_executable(sample_test sample_test.cc)

# Link test executable with GoogleTest
target_link_libraries(sample_test gtest_main)

# Register test with CTest
add_test(NAME sample_test COMMAND sample_test)
```

3. Build and run:

```bash
mkdir build && cd build
cmake ..
cmake --build .
./sample_test
```

Output should confirm the test passed.

---

## Summary

Building and running tests with GoogleTest involves compiling your test code linked against the framework and executing the resulting test binary. GoogleTest handles test discovery and execution, reporting results clearly to help you identify passes and failures. Use command line flags to control which tests to run, repeat tests, or generate reports. Proper setup of your build system and understanding of the test lifecycle enables efficient testing and debugging.

<Tip>
For in-depth configuration and troubleshooting, see [Installing with CMake](../installation-guide/installing-cmake.md) and [Common Installation Problems](../troubleshooting/common-problems.md).
</Tip>
