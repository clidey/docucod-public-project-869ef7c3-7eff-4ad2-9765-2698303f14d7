---
title: "Troubleshooting Common Setup Issues"
description: "Resolves typical roadblocks encountered during installation and first usage. Covers missing dependencies, build errors, linker issues, and version incompatibilities, enabling users to quickly get unstuck and continue with their testing journey."
---

# Troubleshooting Common Setup Issues

This guide helps you quickly identify and resolve typical roadblocks you may encounter during the installation and first use of GoogleTest and GoogleMock. Whether you face missing dependencies, build errors, linker issues, or version incompatibilities, this page will empower you to get unstuck and continue your testing journey with confidence.

---

## 1. Missing Dependencies

GoogleTest requires some key dependencies and system settings to build correctly. Missing these will cause build failures or unexpected runtime behavior.

### Common Symptoms
- Compilation errors indicating missing headers like `<gtest/gtest.h>` or `<gmock/gmock.h>`
- Errors related to missing C++17 standard support
- Failure to find required tools like `cmake` or `git`

### How to Fix
1. **Verify System Prerequisites:**
   - Ensure your compiler supports C++17 or later.
   - Install CMake (version 3.10 or newer recommended).
   - Install Git to fetch the source if building from upstream.

2. **Check Include Paths:**
   - Confirm your build system includes GoogleTest's and GoogleMock's header directories.
   - For CMake, adding `add_subdirectory(googletest)` usually manages this.

3. **Install Required Tools:**
   - On Linux, use package managers:
     ```bash
     sudo apt-get install build-essential cmake git
     ```
   - On macOS, ensure Xcode Command Line Tools are installed:
     ```bash
     xcode-select --install
     ```

4. **Validate C++17 Support:**
   Run:
   ```bash
   echo | g++ -std=c++17 -x c++ - -o /dev/null
   ```
   If this fails, upgrade your compiler.


<Tip>
If you encounter issues about missing headers or unsupported C++ features, double-check your compiler version and build flags to ensure C++17 is enabled.
</Tip>

---

## 2. Build Errors

Build errors can arise due to misconfiguration, conflicting versions, or incomplete source.

### Common Symptoms
- Errors during `cmake` configuration or `make` build
- Linker errors about missing symbols or duplicate definitions
- Warnings treated as errors halting builds

### How to Fix
1. **Clean and Rebuild:**
   Completely remove your build directory and recreate it:
   ```bash
   rm -rf build/
   mkdir build && cd build
   cmake ..
   make
   ```

2. **Check CMake Arguments:**
   - Confirm that you have pointed CMake to the correct source directory.
   - Use recommended options from the [Installation Methods](../getting-started/setup-basics/installation-methods) page.

3. **Resolve Duplicate Symbols:**
   - Avoid linking multiple incompatible versions of GoogleTest in the same project.
   - Ensure only one definition of the main function if you use `gtest_main`.

4. **Address Warning Errors:**
   - If warnings stop the build, adjust your compiler flags to not treat warnings as errors temporarily.

### Troubleshooting Linking Errors
If you see linker errors such as unresolved references to GoogleTest symbols:
- Verify that the `gtest` and `gmock` libraries are linked to your test executable.
- Typical CMake linkage looks like:
  ```cmake
  target_link_libraries(your_test gtest gmock pthread)
  ```
- For non-CMake builds, ensure the libraries are included in your linker command.

<Note>
Linker errors are almost always due to missing link flags or conflicting versions of GoogleTest libraries linked by accident.
</Note>

---

## 3. Runtime Failures & Version Incompatibilities

After successful compilation, your tests may fail unexpectedly or show strange behavior.

### Common Symptoms
- Tests fail to run or crash.
- Mock expectations are not verified or show inconsistent results.
- Build succeeds but runtime diagnostics output warnings about uninteresting or unexpected calls.

### How to Fix
1. **Ensure Runtime Library Compatibility:**
   - If you're on Visual Studio, be sure to use consistent runtime linkage settings (e.g., /MD vs /MT).
   - Mixing static and dynamic CRTs can cause runtime issues.

2. **Update GoogleTest Version:**
   - Incompatible GoogleTest versions (between headers and compiled libraries) cause undefined behavior.
   - Fetch the latest stable release from the official GitHub repo.

3. **Control Verbosity for Debugging:**
   - Run tests with `--gmock_verbose=info` to see detailed logs about calls hitting mocks.
   - Lower verbosity to `warning` or `error` to reduce noise when not debugging.

   Example:
   ```bash
   ./your_test_binary --gmock_verbose=info
   ```

4. **Verify Mock Object Usage:**
   - Make sure your mock objects are created, used, and destructed properly.
   - Leaked mocks cause GoogleMock to report errors or warnings.

5. **Check for Virtual Destructors:**
   - Ensure all mocked base classes have virtual destructors to avoid undefined behavior.

<Info>
Increasing verbosity provides valuable insight into mock expectations and call matching that can reveal subtle test logic errors.
</Info>

---

## 4. Handling Uninteresting Calls

When mock methods are called without expectations, GoogleMock reports "uninteresting mock function call" warnings by default.

### What Are Uninteresting Calls?
Calls to mock methods without an associated `EXPECT_CALL` are uninteresting. They do not cause test failures but generate warnings to alert you.

### How to suppress or handle:
- Use `NiceMock<T>` to create mock objects that suppress these warnings:
  ```cpp
  using ::testing::NiceMock;
  NiceMock<MockFoo> mock_foo;
  ```
- If you want to treat such calls as failures, use `StrictMock<T>` instead.

### Example:
```cpp
using ::testing::StrictMock;
StrictMock<MockFoo> strict_foo;
EXPECT_CALL(strict_foo, SomeMethod());
```

### Best Practices
- Write `EXPECT_CALL` for all mock methods you intend to be called.
- Use `ON_CALL` for default behavior without forcing expectations.
- Prefer `NiceMock` for general tests to ease maintenance; reserve `StrictMock` for high-assurance scenarios.

---

## 5. Tips for Common Scenarios

### Build Integration Problems
- Make sure CMake files add both `gtest` and `gmock` as dependencies for your tests.
- Do not mix pre-built GoogleTest binaries with source builds in the same project.

### Compilation Errors in MSVC
- Disable warning C4301 or C4373 if caused by const parameters in mock methods by removing top-level const on parameters.

### Mock Object Lifetime
- Avoid leaking mocks; they verify expectations on destruction.
- Use `Mock::AllowLeak(&mock_obj);` if deliberate.

### Running Tests
- Always initialize GoogleMock before running tests:
  ```cpp
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
  ```

---

## 6. Where to Get More Help

- [Common Installation Issues](../../faq/getting-started-help/common-installation-issues)
- [Running Tests and Validating Setup](../../getting-started/first-test-experience/running-tests-and-validating-setup)
- [gMock for Dummies](../../docs/gmock_for_dummies.md) for foundational concepts
- Official GitHub repository: [https://github.com/google/googletest](https://github.com/google/googletest)

<Tip>
If you cannot resolve an issue, consider opening an issue on the official GitHub repository or seek help from the community support channels.
</Tip>

---

## Appendix: Troubleshooting Checklist

| Issue Type                   | Check / Fix Action                                                  |
|-----------------------------|-------------------------------------------------------------------|
| Missing Headers             | Verify include paths; install dependencies; check compiler flags  |
| Build errors                | Clean build directory; check CMake config; check compiler version |
| Linker errors               | Link gtest & gmock libraries explicitly; avoid conflicting versions|
| Runtime warnings/errors     | Check virtual destructors; ensure consistent runtimes; update libs|
| Excessive “uninteresting”   | Use NiceMock or add explicit EXPECT_CALL with Times(AnyNumber())  |
| Unexpected test failures    | Run with `--gmock_verbose=info` for detailed diagnostics          |

---

This page is part of the Getting Started documentation to ensure you have a smooth first experience with GoogleTest and GoogleMock. For detailed installation and setup guides, visit [Installation Methods](../setup-basics/installation-methods) and for writing your first tests, see [Writing Your First Test](../first-test-experience/writing-your-first-test).