---
title: "Quick Validation & Sanity Checks"
description: "Provides a checklist and sample commands to verify successful installation and test execution. Helps users confirm correct environment setup and catch typical errors before they block further progress."
---

# Quick Validation & Sanity Checks

GoogleTest installation and setup involve several components working seamlessly together. Before you dive into writing tests, it’s imperative to verify that your environment is correctly set up and GoogleTest works as expected. This page presents a checklist and practical commands to help you confirm a successful installation and catch common issues early, paving the way for smooth test development.

---

## 1. Confirm GoogleTest Installation

Verify that GoogleTest libraries and headers are correctly installed and accessible.

### Check for Headers and Libraries

- Locate `gtest` headers, typically in your include path:

  ```bash
  find /usr/include /usr/local/include -name gtest.h
  ```

- Verify compiled libraries are present, such as `libgtest.a` or `libgtest.so`:

  ```bash
  find /usr/lib /usr/local/lib -name "libgtest*"
  ```

<div className="tip">
If you followed standard installation using CMake, headers and libraries should be in `/usr/local/include/gtest/` and `/usr/local/lib/` or your custom prefix locations.
</div>

### Compiler and Linker Test

Create a minimal test program to verify compilation and linking:

```cpp
#include <gtest/gtest.h>

TEST(SanityCheck, BasicTest) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and link with GoogleTest libraries (adjust include and lib paths as needed):

```bash
# Example compilation command using g++
g++ -std=c++17 -pthread sanity_check.cc -lgtest -lgtest_main -o sanity_check
```

Run the compiled test:

```bash
./sanity_check
```

Expected output should indicate one test run and passed, similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SanityCheck
[ RUN      ] SanityCheck.BasicTest
[       OK ] SanityCheck.BasicTest (0 ms)
[----------] 1 test from SanityCheck ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If this passes, your basic install and linking are working correctly.

<div className="callout check">
Check: If compilation or linking fails, verify include paths, library linkage, and installed versions.
</div>

---

## 2. Validate GoogleMock Integration

If you use GoogleMock (the mocking framework), repeat analogous checks.

### Try a Simple Mock Test

Build a simple mock class to confirm it's working:

```cpp
#include <gmock/gmock.h>

class MockSimple {
 public:
  MOCK_METHOD(int, Foo, (int x), ());
};

TEST(MockSanityCheck, Works) {
  MockSimple mock;
  EXPECT_CALL(mock, Foo(42)).WillOnce(::testing::Return(100));
  EXPECT_EQ(mock.Foo(42), 100);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile with:

```bash
g++ -std=c++17 -pthread mock_sanity_check.cc -lgmock -lgtest -lgtest_main -o mock_sanity_check
```

Run and expect test to pass.

<div className="callout check">
Check: Ensure that `-lgmock` and `-lgtest` link order is correct and that headers are located properly.
</div>

---

## 3. Common Flags Verification

GoogleTest offers several runtime flags to control test execution and reporting.

- Verify that `--help` displays GoogleTest flags:

  ```bash
  ./your_test_binary --help
  ```

- Confirm environment variables like `GTEST_FILTER` operate correctly:

  ```bash
  GTEST_FILTER=SanityCheck.* ./sanity_check
  ```

- Try `--gtest_list_tests` to see test discovery:

  ```bash
  ./sanity_check --gtest_list_tests
  ```

<div className="callout tip">
Tip: Flags can be combined for selective test runs and diagnostics.
</div>

---

## 4. Verify Run-Time Logging & Output

Confirm GoogleTest produces clean, color-coded output (if terminal supports it) and outputs XML or JSON if requested.

- Run test with color enabled:

  ```bash
  ./sanity_check --gtest_color=yes
  ```

- Generate XML report:

  ```bash
  ./sanity_check --gtest_output=xml:report.xml
  ```

- Generate JSON report:

  ```bash
  ./sanity_check --gtest_output=json:report.json
  ```

Verify report files are created and parsable.

<div className="callout check">
Check: If output is not as expected, verify terminal support, file permissions, and path correctness.
</div>

---

## 5. Troubleshooting Common Pitfalls

- **Linking Errors:** Double-check library paths, link order (`-lgmock -lgtest`) and compiler flags.
- **Missing Symbols:** Confirm spelling and usage of `InitGoogleTest()`, `RUN_ALL_TESTS()`, and `InitGoogleMock()`.
- **Header Not Found:** Verify include paths and installed headers.
- **Multi-threading Issues on Windows:** Ensure you are not using threads for assertions in unsupported environments.

<div className="tip">
Refer to the [Troubleshooting Common Setup Issues](/getting-started/first-test-experience/troubleshooting-common-issues) for detailed steps.
</div>

---

## 6. Quick Sanity Test Script

If you want to quickly validate the GoogleTest installation within a shell script, here is a simple snippet:

```bash
#!/bin/bash

set -e

echo "Compiling sanity check test..."

cat <<EOF > sanity_check.cc
#include <gtest/gtest.h>

TEST(SanityCheck, BasicTest) {
    EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char** argv) {
    testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
EOF

# Adjust flags below based on your local paths

g++ -std=c++17 -pthread sanity_check.cc -lgtest -lgtest_main -o sanity_check

./sanity_check || {
    echo "Sanity check failed! Please check your installation and compilation flags."
    exit 1
}

echo "Sanity check succeeded! GoogleTest installation looks good."
```

Run this script after making it executable:

```bash
chmod +x sanity_check_test.sh
./sanity_check_test.sh
```

---

## Summary

These quick validation steps ensure that your GoogleTest and GoogleMock setup is working correctly before you build real tests. A successful sanity check provides confidence and prevents common configuration pitfalls.

For detailed test writing, configuration, and troubleshooting guidance, refer to these related resources:

- [GoogleTest Primer](primer.md)
- [Installation on Standard Platforms](/getting-started/setup-installation/installing-standard-platforms)
- [Troubleshooting Common Setup Issues](/getting-started/first-test-experience/troubleshooting-common-issues)
- [GoogleMock Basics](gmock_for_dummies.md)

---

## Additional Resources
- [GoogleTest Flags Reference](advanced.md#running-test-programs-advanced-options)
- [Assertions Reference](reference/assertions.md)
- [Mocking Reference](reference/mocking.md)
- [gMock Cookbook](gmock_cook_book.md)

---

With your environment validated, you’re now ready to write robust and maintainable tests using GoogleTest and GoogleMock. Happy testing!