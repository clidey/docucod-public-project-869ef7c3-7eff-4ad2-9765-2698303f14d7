---
title: "Troubleshooting Common Installation & Build Issues"
description: "Helps users diagnose and resolve frequent challenges such as linker errors, missing dependencies, or build failures. Provides actionable fixes, links to platform notes, and encourages successful onboarding."
---

# Troubleshooting Common Installation & Build Issues

This page helps you quickly identify and resolve frequent challenges encountered during the installation and build process of GoogleTest and GoogleMock. By following these actionable fixes and referring to the linked platform notes, you can overcome common hurdles such as linker errors, missing dependencies, or build failures and move confidently toward successful onboarding.

---

## 1. Identifying Common Problems

### 1.1 Linker Errors
Linker errors often indicate missing or misconfigured dependencies, mismatched compiler flags, or incorrect linking order.

> **Typical symptoms:**
> - `undefined reference to ...`
> - `linker command failed with exit code ...`
> - missing symbols related to GoogleTest or GoogleMock functions

### 1.2 Missing Dependencies
Failure to locate required headers or libraries for GoogleTest and GoogleMock causes build interruptions.

> **Typical symptoms:**
> - `fatal error: gmock/gmock.h: No such file or directory`
> - `cannot find -lgtest` or `-lgmock` errors

### 1.3 Build Failures
Build failures may arise from unsupported compiler versions, missing C++17 support, or threading issues.

> **Typical symptoms:**
> - errors about language features (e.g., `constexpr`, `auto`) not recognized
> - multithreading-related messages
> - CMake or Bazel configuration errors

---

## 2. Step-by-Step Resolutions

### 2.1 Confirm System Prerequisites
Before troubleshooting, ensure your environment meets [System Requirements & Supported Platforms](/getting-started/prerequisites-installation-setup/system-requirements-supported-platforms):

- Compiler: GCC ≥ 7.0, Clang ≥ 5.0, MSVC ≥ 2017
- C++ standard: C++17 enabled
- Supported OS: Windows, Linux, macOS
- Build Tools: CMake ≥ 3.10 or Bazel

<Check>
Make sure you are using compiler and build tools versions compatible with GoogleTest and GoogleMock requirements.
</Check>

### 2.2 Verify Include and Link Paths

- Confirm your build system includes the correct paths to `googletest` and `googlemock` headers and libraries.

- For CMake, ensure you link your test targets properly as:

```cmake
find_package(GTest REQUIRED)
target_link_libraries(your_test_target GTest::gtest GTest::gmock GTest::gmock_main pthread)
```

- For Bazel, use the appropriate `cc_test` or `cc_library` dependencies referencing GoogleTest and GoogleMock.

<Tip>
Link order matters: link `gmock` and `gtest` libraries before threading libraries like `pthread` on Linux.
</Tip>

### 2.3 Rebuild GoogleTest and GoogleMock Correctly

In some cases, pre-built binaries may be missing or incompatible. Rebuilding the libraries freshly helps:

1. **Clone repository:**

```bash
git clone https://github.com/google/googletest.git
git checkout main
```

2. **Build with CMake:**

```bash
mkdir build_dir && cd build_dir
cmake ../googletest
cmake --build .
```

3. **Install headers and libraries:** adjust as needed for your environment.

<Warning>
Ensure that you build with the same compiler and flags as your project to avoid ABI incompatibilities.
</Warning>

### 2.4 Handling Linker Errors

If encountering undefined references:

- Check if you linked against both `gtest` and `gmock`
- Confirm that all object files that depend on GoogleTest/Mock methods are compiled with the same C++ standard
- On Windows, verify you link against the correct runtime libraries (debug vs. release)

<Note>
Consult the [Platform Compatibility](/faq/troubleshooting-integration/platform-compatibility) page for platform-specific linker notes.
</Note>

### 2.5 Resolve Missing `gmock/gmock.h` or Headers

- Ensure `gmock` sources are downloaded and located where your include paths expect them.
- When including headers, use `#include <gmock/gmock.h>` rather than relative paths.
- Double-check your build configuration includes the directory containing `gmock` headers.

### 2.6 Fixing Build Failures Related to C++17 or Compiler Support

- Verify your build system explicitly enables C++17 flags:

  - For GCC and Clang: add `-std=c++17`
  - For MSVC: ensure `/std:c++17` or later

- If using an older compiler, upgrade it to a supported version.
- Check for platform-specific caveats in compiler compatibility from the documentation's [Integration with Systems](/overview/ecosystem-and-integrations/integration-with-systems).

### 2.7 Common Pitfall: Virtual Destructors in Mocks

Mock classes must inherit from interfaces with virtual destructors to avoid heap corruption or leaks.

```cpp
class Foo { public: virtual ~Foo() {} virtual void Bar() = 0; };
class MockFoo : public Foo {
    MOCK_METHOD(void, Bar, (), (override));
};
```

<Warning>
Omitting virtual destructors in base classes leads to subtle runtime issues.
</Warning>

---

## 3. Additional Tips and Best Practices

- Use `EXPECT_CALL` and `ON_CALL` appropriately to specify mock expectations and default behaviors.
- Use `NiceMock` to suppress warnings about uninteresting calls during debugging.
- Use `--gmock_verbose=info` flag when running tests to get detailed call traces for diagnosing failing mocks.

<Tip>
Consult the [gMock FAQ](https://google.github.io/googletest/gmock_faq.html) for tips on solving complex mock issues.
</Tip>

---

## 4. Troubleshooting Checklist

| Issue                     | Verification Command or Step                                  | Fixes / Notes                             |
|---------------------------|--------------------------------------------------------------|------------------------------------------|
| Linker errors             | Verify `ld` or linker output for missing symbols              | Link against GTest and GMock libraries correctly |
| Missing headers           | `locate gmock.h` or verify include paths                     | Correct include paths and fetch gmock sources           |
| Compilation errors for C++17  | Check compiler version and flags (`gcc --version`, `clang --version`) | Upgrade compiler and enable `-std=c++17` flag           |
| Runtime missing symbols on Windows | Check DLL dependencies with `Dependency Walker` or `ldd` on Linux | Match Debug/Release DLLs with your build configuration  |

---

## 5. Where to Get More Help

- Review [Integration with Systems](/overview/ecosystem-and-integrations/integration-with-systems) for compatibility details.
- Reference [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for advanced mocking guidance.
- Visit the [GoogleTest GitHub repository](https://github.com/google/googletest) issues and discussions.

---

## 6. Summary

This troubleshooting guide focuses on overcoming common installation and build problems, offering practical steps to resolve linker errors, missing dependencies, and compiler incompatibilities. Follow these steps to ensure your GoogleTest and GoogleMock environment is correctly set up and ready for writing and executing tests.

---

## References

- [System Requirements & Supported Platforms](/getting-started/prerequisites-installation-setup/system-requirements-supported-platforms)
- [Build, Configure, and Validate Your Installation](/getting-started/prerequisites-installation-setup/build-configure-validate)
- [gMock FAQ](https://google.github.io/googletest/gmock_faq.html)
- [Integration with Systems](/overview/ecosystem-and-integrations/integration-with-systems)

---

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "Troubleshooting Common Installation & Build Issues",
  "description": "Step-by-step guide to diagnose and resolve frequent GoogleTest and GoogleMock build and installation errors.",
  "mainEntityOfPage": "/getting-started/first-test-debugging/troubleshooting-common-issues"
}
</script>
