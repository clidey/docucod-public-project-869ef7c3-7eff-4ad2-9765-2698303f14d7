---
title: "Installation Instructions"
description: "Get step-by-step instructions to install GoogleTest and GoogleMock on Windows, macOS, and Linux, using supported build systems such as CMake and Bazel. This guide ensures that you can quickly get up and running, no matter your preferred platform or toolchain."
---

# Installation Instructions

Get step-by-step instructions to install GoogleTest and GoogleMock on Windows, macOS, and Linux, using supported build systems such as CMake and Bazel. This guide ensures that you can quickly get up and running, no matter your preferred platform or toolchain.

---

## 1. Prerequisites & System Requirements

Before beginning installation, ensure your environment meets the following requirements:

- **Supported Platforms:** Windows, macOS, Linux
- **Compiler:** Must support C++17 or later
- **Build Systems:** CMake (recommended, version 3.14 or later), Bazel (optional)
- **Tools:** Git (for cloning the repository)
- **Permissions:** Administrator or sudo privileges to install system-wide

> For detailed compiler and platform compatibility, see [Supported Platforms & Integration Points](/overview/feature-glance-integration/platforms-integration).

## 2. Installing GoogleTest and GoogleMock with CMake

GoogleTest and GoogleMock can be built and installed together using CMake. Follow the steps below to install them on your system:

### Step 2.1: Clone the Repository

Open your terminal or command prompt and run:

```bash
# Clone the official GoogleTest repo at the stable v1.17.0 tag
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### Step 2.2: Create a Build Directory

Create a separate directory to keep the build files isolated:

```bash
mkdir build
cd build
```

### Step 2.3: Configure the Build with CMake

- To build both GoogleTest and GoogleMock (recommended):

  ```bash
  cmake ..
  ```

- To build **only GoogleTest** (exclude GoogleMock):

  ```bash
  cmake .. -DBUILD_GMOCK=OFF
  ```

> If you are on Windows with Visual Studio installed, this generates a `.sln` file. On macOS with Xcode, a `.xcodeproj` will appear.

### Step 2.4: Build the Libraries

- On Linux/macOS:

  ```bash
  make
  ```

- On Windows:
  Open the generated solution/project in Visual Studio and build it.

### Step 2.5: Install the Libraries

- On Linux/macOS:

  ```bash
  sudo make install
  ```

- On Windows:
  Follow your platform’s conventions to install or reference the built libraries.

This installs GoogleTest and GoogleMock headers and binaries to default system locations (usually `/usr/local/include` and `/usr/local/lib`). You can customize this with CMake install prefix flags if needed.

### Verification

- Confirm the libraries are installed by checking the installed include and lib directories.
- You can then compile a simple test program linking against the installed `gtest` and `gmock` libraries.

## 3. Integrating GoogleTest and GoogleMock Into Your CMake Project

### Simple Integration Using Installed Libraries

In your project's `CMakeLists.txt`, add:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(your_test_exe test_main.cpp)

# Link GoogleTest and GoogleMock libraries
# Use gtest_main for default main() or gtest if you write your own.
target_link_libraries(your_test_exe GTest::gtest_main GTest::gmock)

add_test(NAME your_test COMMAND your_test_exe)
```

This requires that GoogleTest and GoogleMock are installed in a location CMake can find.

### Building GoogleTest Directly Within Your Project via add_subdirectory()

To avoid dependency on an installed version, include GoogleTest sources in your repo or as a git submodule, and use:

```cmake
include(FetchContent)

FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows: Match runtime libraries
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(your_test_exe test_main.cpp)
target_link_libraries(your_test_exe gtest_main gmock_main)
add_test(NAME your_test COMMAND your_test_exe)
```

**Note:** This requires CMake version 3.14 or later for `FetchContent_MakeAvailable()`.

## 4. Installing with Bazel

If you use Bazel as your build system, GoogleTest and GoogleMock are available as dependencies:

Add the following to your `WORKSPACE` file:

```starlark
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.17.0.zip"],
    strip_prefix = "googletest-release-1.17.0",
)
```

Then, in your BUILD files, declare dependencies on `@com_google_googletest//:gtest` and `@com_google_googletest//:gmock` as needed.

For detailed Bazel integration, see the Bazel-specific documentation (not covered here).

## 5. Building and Running Your First Test

After installation, you can verify your setup by compiling a simple test:

```c++
#include "gtest/gtest.h"

TEST(SampleTest, AssertionTrue) {
  EXPECT_TRUE(true);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Compile and Link Example (Linux/macOS with g++)

```bash
g++ -std=c++17 -isystem /usr/local/include -pthread sample_test.cpp \
    -L/usr/local/lib -lgtest_main -lgtest -lgmock -o sample_test
```

Run the sample test:

```bash
./sample_test
```

Expected output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.AssertionTrue
[       OK ] SampleTest.AssertionTrue (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

## 6. Tips and Best Practices

- Use `gtest_main` or `gmock_main` to avoid writing your own `main()`; they provide the necessary test program entry point.
- On Windows with Visual Studio, if you encounter runtime library mismatches, use the `-Dgtest_force_shared_crt=ON` flag when configuring CMake.
- To optimize build times on large projects, incorporate GoogleTest via `add_subdirectory()` or the FetchContent module rather than installing globally.
- Always specify `-std=c++17` or higher to comply with GoogleTest's C++ standard requirement.
- If you face linking errors related to pthreads, ensure your build system links with the pthread library; using GoogleTest’s CMake scripts automatically manages this.

## 7. Troubleshooting Common Issues

<AccordionGroup title="Installation Troubleshooting">
<Accordion title="CMake cannot find GoogleTest package">
Make sure GoogleTest and GoogleMock are installed in standard system paths or specify the path explicitly:

```cmake
set(CMAKE_PREFIX_PATH "/path/to/googletest/install" ${CMAKE_PREFIX_PATH})
find_package(GTest CONFIG REQUIRED)
```

Alternatively, use `add_subdirectory()` to add GoogleTest sources directly to your build.
</Accordion>
<Accordion title="Linker Errors on Windows related to Runtime Library">
This typically occurs due to inconsistent settings between your project and GoogleTest's runtime library.

**Solution:** enable dynamic runtime linking by adding `-Dgtest_force_shared_crt=ON` when configuring your build:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```
</Accordion>
<Accordion title="Missing pthread symbols on Linux">
If your linker reports missing pthread symbols (e.g., `pthread_create`), ensure you add `-pthread` to your compile flags and link flags.

When using CMake, this is handled automatically. If using a manual build script, add `-pthread`.
</Accordion>
</AccordionGroup>

## 8. Useful Links & Further Reading

- [GoogleTest Primer](primer.md) — Learn how to write your first tests.
- [Supported Platforms & Integration Points](/overview/feature-glance-integration/platforms-integration) — Understand supported environments.
- [First Test Experience: Initial Configuration](getting-started/first-test-experience/initial-configuration) — Setup tests after installation.
- [Building with Bazel](https://github.com/google/googletest/blob/main/googletest/README.md#using-with-bazel) — Bazel-specific instructions.
- [GoogleMock README](googlemock/README.md) — Learn about the mocking framework and usage.

---

This installation guide equips you with all necessary steps to get GoogleTest and GoogleMock installed via the most common, supported build systems and platforms. Once installed, you will be ready to write, build, and run your C++ tests efficiently.