---
title: "Installation Instructions"
description: "Provides step-by-step installation guidance for GoogleTest and GoogleMock across major platforms (Linux, macOS, Windows) and common build systems (CMake, Bazel). Includes direct instructions and quickstart examples for verified installation routes."
---

# Installation Instructions for GoogleTest and GoogleMock

This guide provides **clear, step-by-step instructions** to install GoogleTest and GoogleMock on your system using common build tools like **CMake**. Whether you are on Linux, macOS, or Windows, this page will walk you through verified installation methods and basic verification steps to get up and running quickly.

---

## 1. Prerequisites & System Requirements

Before installing GoogleTest and GoogleMock, ensure your system meets the following requirements:

- **Supported Platforms:** Linux, macOS, Windows
- **Compiler:** A C++ compiler supporting at least **C++17** (e.g., GCC 7+, Clang 5+, MSVC 2017+)
- **Build System:**
  - **CMake** version 3.13 or later
  - Optionally, **Bazel** if you prefer (not covered in detail here)
- **Git:** Installed to clone repositories
- **Permissions:**
  - On Linux/macOS, `sudo` privileges for installing system-wide (optional)


<Tip>
Always verify you have CMake 3.13+ installed by running `cmake --version`. If not present, download it from [https://cmake.org/](https://cmake.org/).
</Tip>

---

## 2. Installing GoogleTest and GoogleMock with CMake

GoogleTest and GoogleMock are distributed together and can be built in a single step with CMake.

### 2.1 Cloning the Repository

Begin by cloning the official GoogleTest repository at the tagged release you want to use. For example, to get version 1.17.0:

```bash
# Clone the googletest repository's stable branch
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### 2.2 Building as a Standalone Project

1. Create a build directory to keep the build files separate:

```bash
mkdir build
cd build
```

2. Generate native build files using CMake:

```bash
cmake ..
```

- This command configures the build to include both GoogleTest and GoogleMock by default.

- If you only want GoogleTest (without GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

3. Build the libraries:

```bash
make
```

4. (Optional) Install the libraries on your system (requires admin rights):

```bash
sudo make install
```

- This installs the libraries and headers under `/usr/local/` by default

### 2.3 Building on Windows with Visual Studio

- Run the `cmake ..` step in a PowerShell or Command Prompt within your build directory.
- This will generate a `.sln` Visual Studio solution file.
- Open the solution in Visual Studio and build the desired targets (e.g., ALL_BUILD, INSTALL).

### 2.4 MacOS with Xcode

- Running `cmake ..` generates an `.xcodeproj` project.
- Open it with Xcode and build from there.

---

## 3. Integrating GoogleTest/GoogleMock Into Your Existing CMake Project

To use GoogleTest and GoogleMock directly within your project's build:

### 3.1 Using Installed Libraries

After system-wide installation, you can import GoogleTest and GoogleMock via CMake `find_package`:

```cmake
find_package(GTest CONFIG REQUIRED)
# Use the libraries for your targets
target_link_libraries(your_target PRIVATE GTest::gtest GTest::gmock)
```

### 3.2 Building GoogleTest as Part of Your Project

Add GoogleTest as a subdirectory to your projectâ€™s `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Visual Studio runtime compatibility
FetchContent_MakeAvailable(googletest)

add_executable(example_test example.cpp)
target_link_libraries(example_test PRIVATE gtest_main gmock_main)
add_test(NAME example_test COMMAND example_test)
```

- Requires **CMake 3.14+**
- This approach ensures consistent compiler and linker flags across your project and tests.

---

## 4. Verification: Confirming Successful Installation

### 4.1 Build Verification

After building with CMake, verify the libraries exist:

- Check `build/lib` or `build/` directories for `libgtest.a`, `libgmock.a` (or `.lib` on Windows).
- On Unix-like systems:

```bash
ldconfig -p | grep gtest
```

(if installed to system paths)

### 4.2 Running Example Tests

GoogleTest provides example test executables you can build and run:

```bash
./example  # Or the name of your test executable
```

You should see output like:

```
Running main() from ...
[==========] Running 1 test from 1 test suite.
[ RUN      ] ExampleTest.DoesSomething
[       OK ] ExampleTest.DoesSomething (0 ms)
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

---

## 5. Common Build Options and Tips

- To build GoogleTest/GoogleMock as **shared libraries (DLLs)**, add the flag:

```bash
cmake .. -DBUILD_SHARED_LIBS=ON
```

- On Windows, if you encounter runtime library mismatch errors (such as linking static vs dynamic CRT), enable:

```bash
-DCMAKE_MSVC_RUNTIME_LIBRARY="MultiThreadedDLL"
```

or set `gtest_force_shared_crt` in your `CMakeLists.txt` as shown above.

- For **multi-threaded tests**, CMake scripts automatically link against pthread on supported platforms.
  If you build manually, ensure to link with `-pthread`.

- If you only want to use GoogleTest without GoogleMock, turn off GoogleMock during CMake configuration:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Installation Troubleshooting">
<Accordion title="CMake version too old or missing">

Make sure you have CMake 3.13 or later installed. Run `cmake --version` to check. If the version is insufficient, download and install the latest from https://cmake.org/.

</Accordion>
<Accordion title="Linker errors related to pthread on Linux/macOS">

If you encounter errors like undefined references to pthread functions, ensure your build links with pthread:

- When using CMake, this is usually automatic.
- If building manually, add `-pthread` to compiler and linker flags.

</Accordion>
<Accordion title="RuntimeLibrary mismatch errors on Windows">

You may get errors such as `mismatch detected for 'RuntimeLibrary'`.

- Enable the `gtest_force_shared_crt` option in CMake to unify runtime linkage.
- For example:

  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```

- Also ensure your project's runtime flags match (dynamic vs static CRT).

</Accordion>
<Accordion title="Tests not running or no output">

Verify you are linking with `gtest_main` or `gmock_main` which provide a `main()` function.

If writing your own `main()`, call `testing::InitGoogleTest()` or `testing::InitGoogleMock()` before `RUN_ALL_TESTS()`.

</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Explore the [Getting Started Guide](/getting-started/setup-basics/configuring-project) to learn how to integrate tests with your project.
- Read the [Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for a comprehensive GoogleTest introduction.
- For mocking, check the [gMock README](https://github.com/google/googletest/blob/main/googlemock/README.md) and [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html).

---

## References & Further Reading

- CMakeLists.txt: [googlemock/CMakeLists.txt](https://github.com/google/googletest/blob/main/googlemock/CMakeLists.txt)
- GoogleTest Build Guide: [googletest/README.md](https://github.com/google/googletest/blob/main/googletest/README.md)
- GoogleMock Overview: [googlemock/README.md](https://github.com/google/googletest/blob/main/googlemock/README.md)

---

<Check>
By following these steps, GoogleTest and GoogleMock should be installed, built, and ready for use. Running your first tests will confirm that the installation succeeded.
</Check>
