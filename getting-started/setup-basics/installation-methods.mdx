---
title: "Installation (Bazel, CMake, Manual)"
description: "Provides clear, actionable installation instructions for Bazel, CMake, and manual integration. Walks users through each method step-by-step, enabling them to choose the workflow that best fits their project and platform."
---

# Installation (Bazel, CMake, Manual)

This guide provides clear, actionable installation instructions for GoogleTest and GoogleMock using three installation methods: Bazel, CMake, and Manual integration. Choose the workflow that best fits your project and platform to get started quickly and efficiently.

---

## 1. Installing GoogleTest and GoogleMock with Bazel

Bazel offers a fast, reproducible, and hermetic build and test system popular in many C++ projects. GoogleTest and GoogleMock support Bazel builds out of the box.

### Steps

<Steps>
<Step title="Set up Bazel in your environment">

1. Install Bazel by following the official instructions at [https://bazel.build/install](https://bazel.build/install).
2. Verify the installation by running:

```sh
bazel version
```

You should see version output with no errors.

3. Ensure your workspace contains a `WORKSPACE` file to define external dependencies.

</Step>
<Step title="Declare GoogleTest and GoogleMock as dependencies">

1. Add the following to your `WORKSPACE` file to fetch GoogleTest and GoogleMock sources:

```python
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/main.zip"],
    strip_prefix = "googletest-main",
)
```

2. This rule downloads the latest GoogleTest/Mock sources.

</Step>
<Step title="Use GoogleTest in your Bazel BUILD files">

1. In your `BUILD` files, declare your test targets to depend on `@com_google_googletest//:gtest` or `//:gmock` libraries.

Example test rule:

```python
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

2. Run your tests using:

```sh
bazel test //:my_test
```

</Step>
</Steps>

### Tips & Best Practices

- Bazel builds GoogleTest with appropriate compiler flags ensuring thread safety and platform compatibility.
- Use `gtest_main` if you do not want to write your own `main()` function.
- If you want mocking features, add GoogleMock dependencies `@com_google_googletest//:gmock` or `:gmock_main`.

---

## 2. Installing GoogleTest and GoogleMock with CMake

CMake supports a wide range of platforms and compilers. You can build GoogleTest either as a standalone project or incorporate it into your existing CMake project.

### Prerequisites

- CMake 3.14 or newer
- A C++17 compatible compiler (GCC, Clang, MSVC)
- Make, Ninja, or other generator supported by CMake


### Option A: Build GoogleTest as a Standalone Project

Follow these steps:

<Steps>
<Step title="Clone the repository">

```sh
git clone https://github.com/google/googletest.git -b main
dcd googletest
```

</Step>
<Step title="Configure the build">

Create a build directory and run `cmake`:

```sh
mkdir build
cd build
cmake ..
```

*To build only GoogleTest and exclude GoogleMock, use:*

```sh
cmake .. -DBUILD_GMOCK=OFF
```

</Step>
<Step title="Build the project">

On Linux/macOS:

```sh
make
```

On Windows with Visual Studio:

Open the generated `gtest.sln` and build.

</Step>
<Step title="Install the libraries (optional)">

To install GoogleTest to your system (default to `/usr/local` on Linux/macOS):

```sh
sudo make install
```

</Step>
</Steps>

### Option B: Incorporate GoogleTest Into Your Existing CMake Project

You can either use the installed libraries or build GoogleTest as part of your project.

### Using Installed Libraries

1. Use `find_package` in your `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)
```

2. Link your test target against `GTest::gtest_main` or `GTest::gtest`:

```cmake
target_link_libraries(your_test_target PRIVATE GTest::gtest_main)
```

### Building GoogleTest as Part of Your Project

Add this snippet to your `CMakeLists.txt` to automatically download and build GoogleTest:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# For Windows: Prevent runtime conflicts
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(your_test_file your_test_file.cpp)
target_link_libraries(your_test_file gtest_main)
add_test(NAME your_test COMMAND your_test_file)
```

This requires CMake 3.14 or later.

---

## 3. Manual Integration Method

Manual integration allows you to download and compile GoogleTest and GoogleMock source code directly as part of your project build system without relying on external package managers or complex build tools.

### Prerequisites

- Compatible C++17 compiler
- Ability to compile static or shared libraries

### Steps

<Steps>
<Step title="Download source code">

Download the latest release source zip from GitHub:

[https://github.com/google/googletest/releases](https://github.com/google/googletest/releases)

Extract it into your project directory.

</Step>
<Step title="Add source and headers to your build system">

Include the `googletest/include` and `googlemock/include` directories in your project's include paths.

Add `googletest/src/gtest-all.cc` and `googlemock/src/gmock-all.cc` source files (if using GoogleMock) to your project build.

For example, in a Makefile or similar build tool, add:

- `googletest/include`
- `googlemock/include`
- source files: `gtest-all.cc`, `gmock-all.cc`

</Step>
<Step title="Compile and link">

Compile the source files and link your test binaries against these object files.

Remember to add necessary compiler flags:

- Define `-DGTEST_HAS_PTHREAD=1` if threading is enabled.
- Add `-pthread` on Linux/macOS when compiling and linking.

</Step>
</Steps>

### Practical Tips

- If you use GoogleMock, link with `gmock_main.cc` instead of providing your own `main()` function.
- Define `-DGTEST_CREATE_SHARED_LIBRARY=1` and pass shared library flags if building shared libraries.
- Use `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when linking test code with shared GoogleTest libraries.

---

## Verification

After installation using any method, build and run a sample test to verify everything is set up correctly.

Example `hello_test.cc`:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
    EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run your test binary. It should execute successfully and report passing tests.

---

## Troubleshooting Common Installation Issues

<AccordionGroup title="Installation Troubleshooting Tips">
<Accordion title="Bazel cannot find GoogleTest">
Make sure your `WORKSPACE` file includes the correct http_archive rule for GoogleTest.
If you updated your repository URL or tag, verify it is accurate.

If unable to fetch dependencies, check your network or proxy settings.
</Accordion>
<Accordion title="CMake errors during configuration">
- Confirm your CMake version is 3.14 or higher.
- Ensure you have a C++17 compatible compiler configured.
- If building only GoogleTest, pass `-DBUILD_GMOCK=OFF` to exclude GoogleMock.
- On Windows, set `gtest_force_shared_crt` to ON to avoid runtime conflicts.
</Accordion>
<Accordion title="Linker errors related to pthreads">
On Linux/macOS, add `-pthread` flag to both compile and link commands.
In CMake, this is handled automatically when using the provided scripts.
For manual builds, check your compiler documentation for correct pthread flags.
</Accordion>
<Accordion title="Macro name conflicts">
If you encounter macro name collisions, use `-DGTEST_DONT_DEFINE_TEST=1` or equivalent to rename GoogleTest macros, then use the renamed versions (e.g., `GTEST_TEST`).
</Accordion>
</AccordionGroup>

---

## Next Steps & References

- After installation, proceed to [Basic Configuration](/getting-started/setup-basics/configuration-overview) for essential setup guidance.
- Start writing and running tests with our [Write, Build, and Run Your First Test](/getting-started/first-tests-validation/write-build-run-test) tutorial.
- Troubleshoot any issues via [Troubleshooting Common Setup Issues](/getting-started/first-tests-validation/troubleshooting).

---

## Additional Resources

- Official GitHub Repository: https://github.com/google/googletest
- Bazel Build Docs: https://docs.bazel.build
- CMake Documentation: https://cmake.org/documentation/
- GoogleTest Primer: /docs/primer.md
- CMake Quickstart Tutorial: /docs/quickstart-cmake.md

---

By following this guide, you'll be able to install and integrate GoogleTest and GoogleMock efficiently, aligning with your project's build system and platform.


---

<Note>
Remember to verify your build environment meets requirements defined at [Supported Platforms and Requirements](/overview/adoption-and-integration/supported-platforms-and-requirements).
</Note>



---

<Info>
If you encounter issues or have questions during installation, refer to the [FAQ - How do I set up and run my first tests?](/faq/getting-started-and-core-concepts/setting-up-and-running-tests) section for additional guidance.
</Info>
