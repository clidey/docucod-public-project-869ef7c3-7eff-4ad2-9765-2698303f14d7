---
title: "Installation Methods"
description: "Step-by-step guidance for installing GoogleTest and GoogleMock using CMake, Bazel, or building directly from source. Includes tips for various operating systems and recommended workflows for common development environments. Helps users choose the method that best fits their build system and project needs."
---

# Installation Methods for GoogleTest and GoogleMock

This guide provides clear, step-by-step instructions to install GoogleTest and GoogleMock using your preferred build system or by building directly from source. Whether you use CMake, Bazel, or manual compilation, this page helps you choose the installation method that best suits your environment and project needs.

---

## 1. Prerequisites

Before you start, ensure you have the following:

- **C++17 compatible compiler** (e.g., GCC 7+, Clang 5+, MSVC 2017+).
- **CMake (version 3.13 or later)** installed for CMake-based builds.
- **Git** to clone repositories.
- For Bazel builds, have **Bazel** installed and configured.


<Tip>
If you are on Windows with Visual Studio, confirm Visual Studio has been set up with C++ development workloads and latest Windows SDK.
</Tip>

---

## 2. Installing with CMake

CMake is the most widely used cross-platform build system and supports both GoogleTest and GoogleMock out of the box.

### 2.1 Cloning the Repository

Start by cloning the GoogleTest repository, which includes GoogleMock:

```bash
git clone https://github.com/google/googletest.git -b release-1.17.0
cd googletest
```

### 2.2 Build as a Standalone Project

1. Create a build directory and navigate into it:

```bash
mkdir build && cd build
```

2. Configure the build using CMake:

- To build both GoogleTest and GoogleMock (default):

```bash
cmake ..
```

- To build GoogleTest only (skip GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

3. Compile the project:

```bash
make
```

(or use `nmake`/`msbuild` on Windows)

4. (Optional) Install the binaries and headers system-wide:

```bash
sudo make install
```

This installs the libraries to `/usr/local/` by default.

### 2.3 Using GoogleTest in Your CMake Project

For seamless integration, you can add GoogleTest as a subdirectory of your project:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/release-1.17.0.tar.gz
)
FetchContent_MakeAvailable(googletest)

add_executable(your_test test.cpp)
target_link_libraries(your_test gtest_main)
add_test(NAME your_test COMMAND your_test)
```

<Tip>
This method guarantees compiler and linker compatibility between your code and GoogleTest.
</Tip>

### 2.4 Visual Studio Users

Building with CMake generates `.sln` files you can open directly with Visual Studio. Use the CMake GUI or commands like:

```bash
cmake .. -G "Visual Studio 16 2019"
cmake --build . --config Release
```

### 2.5 Troubleshooting CMake Builds

- If you encounter runtime library conflicts on Windows, set `-Dgtest_force_shared_crt=ON` when running `cmake`.
- Ensure your compiler supports C++17.
- For complex projects, prefer adding GoogleTest via CMake FetchContent or as a git submodule.

---

## 3. Installing with Bazel

If your project uses Bazel as the build system, GoogleTest and GoogleMock can be integrated smoothly.

### 3.1 Add GoogleTest Dependency

In your WORKSPACE file, add:

```bazel
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.17.0.tar.gz"],
    strip_prefix = "googletest-release-1.17.0",
)
```

### 3.2 Reference in BUILD Files

When defining test targets, link against the gtest and gmock libraries as needed:

```bazel
cc_test(
    name = "your_test",
    srcs = ["your_test.cc"],
    deps = [
        "@com_google_googletest//googletest",
        "@com_google_googletest//googlemock",
    ],
)
```

### 3.3 Build and Run

Use Bazel to build and execute your tests:

```bash
bazel build //path/to:your_test
bazel test //path/to:your_test
```

<Tip>
Ensure your Bazel version supports C++17 and your environment has compatible toolchains.
</Tip>

---

## 4. Building Directly from Source

For environments or projects without advanced build systems, you can build GoogleTest and GoogleMock manually.

### 4.1 Clone Repository

```bash
git clone https://github.com/google/googletest.git
cd googletest
git checkout release-1.17.0
```

### 4.2 Compile Source Files

GoogleTest source is located in `googletest/src/`; GoogleMock is in `googlemock/src/`.

Example for compiling with GCC:

```bash
g++ -std=c++17 -isystem googletest/include -isystem googlemock/include -pthread \
    -c googletest/src/gtest-all.cc
g++ -std=c++17 -isystem googletest/include -isystem googlemock/include -pthread \
    -c googlemock/src/gmock-all.cc
```

### 4.3 Link Into a Test Binary

Link your test program with these compiled objects:

```bash
g++ -std=c++17 your_test.cc gtest-all.o gmock-all.o -pthread -o your_test
```

<Tip>
It is critical to compile all code consistently with the same standard (C++17) and compiler flags.
</Tip>

### 4.4 Sample main() Function

Include one of the provided `main` function implementations from:

- `googletest/src/gtest_main.cc` for GoogleTest
- `googlemock/src/gmock_main.cc` for GoogleMock (includes GoogleTest support)

Example:

```c++
#include "gmock/gmock.h"

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 4.5 Benefits and Drawbacks

- **Benefits**: Full control over build commands, minimal dependencies.
- **Drawbacks**: Tedious and error-prone for larger projects; no automatic dependency management or test discovery.

---

## 5. Recommended Workflows

- **For new projects or modern environments, use CMake**. It offers the easiest setup and best cross-platform support.
- **For Bazel users, configure WORKSPACE and BUILD files appropriately** to seamlessly integrate GoogleTest and GoogleMock.
- **Use pre-built `gtest_main` or `gmock_main` libraries** to avoid writing your own `main()` function unless custom initialization is needed.


---

## 6. Tips for Various Operating Systems

| OS      | Notes                                                    |
|---------|----------------------------------------------------------|
| Linux   | Use the typical `make` workflow after CMake configuration. Ensure `pthread` is available. |
| macOS   | Supports both CLI with `make` and Xcode build projects created by CMake. |
| Windows | Use Visual Studio with CMake generator. Pay attention to runtime library settings to avoid linker errors (see section on `gtest_force_shared_crt`). Use Git Bash or PowerShell for command-line steps. |

---

## 7. Verification After Installation

Run the included sample tests to verify your installation:

```bash
cd googletest/build
ctest
```

or if building manually:

```bash
./your_test_binary
```

You should see output confirming tests passed.

<Tip>
Use verbose test flags or run individual tests if verification fails to diagnose issues.
</Tip>

---

## 8. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues"> 
<Accordion title="CMake does not find compiler or produces errors">
- Verify CMake version is 3.13 or newer.
- Confirm compiler path and environment variables.
- On Windows, ensure MSVC Build Tools or Visual Studio are installed correctly.
</Accordion>
<Accordion title="Runtime library mismatch on Windows">
- Use `-Dgtest_force_shared_crt=ON` flag in CMake to match your project's runtime linkage.
</Accordion>
<Accordion title="Bazel build fails with missing dependencies">
- Check your WORKSPACE URLs and versions.
- Update Bazel to latest stable release.
</Accordion>
<Accordion title="Tests fail with undefined symbols">
- Confirm all source files are compiled with -std=c++17 and linked.
- Ensure `gtest` and `gmock` symbols are correctly linked.
</Accordion>
</AccordionGroup>

---

## 9. Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest Primer](primer.md) - Learn how to write your first tests.
- [GoogleMock Quickstart](guides/getting_started/googlemock-quickstart.md) - For mocking with GoogleMock.
- [Official CMake Documentation](https://cmake.org/documentation/)


---

## Summary

By following this guide, you will successfully install GoogleTest and GoogleMock through your choice of build system, preparing you to integrate robust testing and mocking capabilities into your C++ projects seamlessly.


---

*End of Installation Methods Guide.*