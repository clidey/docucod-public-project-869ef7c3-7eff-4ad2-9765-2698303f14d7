---
title: "Building from Source"
description: "Steps users through downloading the repository and building GoogleTest and GoogleMock from source on different platforms (Linux, macOS, Windows), highlighting essential build commands and troubleshooting tips."
---

# Building from Source

This guide provides a clear, step-by-step walkthrough to download, build, and install GoogleTest and GoogleMock from source on Linux, macOS, and Windows. Follow these instructions to compile the latest version directly from the repository, enabling full control over the build process and configuration.

---

## 1. Prerequisites & System Requirements

Before proceeding, ensure your system meets the following:

- **Operating System**: Linux, macOS, or Windows Desktop.
- **Compiler**: A C++ compiler supporting at least C++17 (e.g., GCC 7+, Clang 7+, MSVC 2017+).
- **Build Tools**:
  - [CMake](https://cmake.org/) version 3.13 or newer.
  - A native build tool compatible with CMake such as Make, Ninja, or MSBuild/Visual Studio.
- **Network Access**: Required to clone the repository.

<Tip>
Check your compiler version and CMake installation prior to starting. Example:

```bash
gcc --version
cmake --version
```
</Tip>


## 2. Cloning the Repository

Start by cloning the GoogleTest repository from GitHub. Clone the official repository and checkout a stable release tag (replace `v1.17.0` with the desired version):

```bash
git clone https://github.com/google/googletest.git
cd googletest
# Optional: checkout a specific release tag
git checkout tags/v1.17.0
```

<Check>
Using a release tag ensures build stability and compatibility.
</Check>

---

## 3. Building on Linux and macOS

Follow these steps to build and install GoogleTest and GoogleMock libraries:

### Step 1: Create and navigate to the build directory

```bash
mkdir build
cd build
```

### Step 2: Generate build files with CMake

By default, this will build both GoogleTest and GoogleMock.

```bash
cmake ..
```

If you want to build GoogleTest only (excluding GoogleMock), run:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### Step 3: Build the libraries

Build using the generated makefiles (or Ninja, depending on your generator):

```bash
make
```

### Step 4: (Optional) Run GoogleTest's own tests to verify the build

```bash
make test
# or
ctest
```

### Step 5: (Optional) Install the libraries system-wide

This requires appropriate privileges.

```bash
sudo make install
```

<Warning>
Installing overwrites system folders like `/usr/local/include` and `/usr/local/lib`. Proceed only if you want a global install.
</Warning>

---

## 4. Building on Windows

GoogleTest supports building on Windows via CMake using Visual Studio or MSBuild.

### Step 1: Create a build folder

```powershell
mkdir build
cd build
```

### Step 2: Generate Visual Studio project files

Run the CMake command with the Visual Studio generator (example for VS 2019 64-bit):

```powershell
cmake .. -G "Visual Studio 16 2019" -A x64
```

### Step 3: Build the solution

```powershell
cmake --build . --config Release
```

Or open the generated `googletest.sln` file in Visual Studio and build from there.

### Step 4: (Optional) Run tests

From the Visual Studio Test Explorer or via command line:

```powershell
ctest -C Release
```

### Step 5: (Optional) Install

Running a system-wide install on Windows typically involves manually copying the include headers and library files.

---

## 5. Build Configuration Options

You can customize your build with the following options when running CMake:

| Option                   | Description                                         | Default  |
|--------------------------|-----------------------------------------------------|----------|
| `BUILD_GMOCK`            | Build GoogleMock along with GoogleTest              | ON       |
| `gtest_build_tests`      | Build GoogleTest's own unit tests                    | OFF      |
| `gtest_build_samples`    | Build sample test programs demonstrating GoogleTest | OFF      |
| `gtest_force_shared_crt` | Use shared C runtime on Windows (adjusts linking)   | OFF      |

Example to build GoogleTest with tests and samples enabled:

```bash
cmake .. -Dgtest_build_tests=ON -Dgtest_build_samples=ON
make
make test
```

<Tip>
Setting `gtest_force_shared_crt=ON` on Windows avoids runtime library conflicts if your project uses shared runtimes.
</Tip>

---

## 6. Verifying the Build

After building, verify the output:

- GoogleTest and GoogleMock libraries (`libgtest.a`, `libgmock.a` or `.lib`/`.dll` on Windows) should be present in the build output directory.
- Running `ctest` or `make test` should execute many tests successfully.

Sample output snippet:

```plain
100% tests passed, 0 tests failed out of 50
```

This confirms a successful build and test run.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting " >
<Accordion title="CMake not found or older version">
Ensure CMake 3.13 or later is installed:

```bash
cmake --version
```

Upgrade CMake if necessary.
</Accordion>
<Accordion title="Compiler errors related to C++17">
Verify your compiler version supports C++17. Upgrade it if needed.
On Linux/macOS:

```bash
gcc --version
clang++ --version
```

On Windows, use Visual Studio 2017 or later.
</Accordion>
<Accordion title="Linker errors for pthread or threads">
On Linux/macOS, ensure pthread is installed and linked (CMake files do this automatically).
If manually building, link with `-pthread`.
</Accordion>
<Accordion title="Runtime mismatches on Windows (LNK2038 errors)">
Use the CMake option `-Dgtest_force_shared_crt=ON` to match the runtime library settings between GoogleTest and your project.
</Accordion>
<Accordion title="Missing tests or samples after build">
Make sure you enabled the options `gtest_build_tests=ON` or `gtest_build_samples=ON` before running `cmake`.
</Accordion>
</AccordionGroup>

---

## 8. Summary and Next Steps

You have now successfully cloned, built, and optionally installed GoogleTest and GoogleMock from source across major platforms.

**Recommended next steps:**

- Refer to the [Installation Options](installation-options.md) page for alternate installation methods.
- Explore the [Configuring Your Project](configuring-project.md) guide to learn how to integrate the built libraries into your build system.
- Use the [Writing and Running Your First Test](first-test.md) guide to start writing tests using GoogleTest.

<Tip>
Building from source provides full flexibility and debugging visibility, which is especially useful during development or contributing to GoogleTest.
</Tip>

---

## Additional References

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [CMake Official Website](https://cmake.org/)
- [Supported Platforms](platforms.md)
- [System Requirements](system-requirements.md)
- [Quickstart: Building with CMake](quickstart-cmake.md)
- [Quickstart: Building with Bazel](quickstart-bazel.md)

---

## Contact & Support

If you encounter issues beyond this guide, consult the [Troubleshooting Setup Issues](troubleshooting-setup.md) page or open an issue on the GitHub repository.


---

_For a deep dive into the architecture and usage after setup, consider these pages:_
- [Feature Overview](feature-overview.md)
- [Core Concepts & Terminology](core-concepts.md)
- [Integration with Build & CI Systems](integration-points.md)


---

#### License Notice

All source code is licensed under the BSD 3-Clause 'New' or 'Revised License'. See the LICENSE file in the repository.


---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googletest/README.md", "range": "1-158"},{"path": "googletest/CMakeLists.txt", "range": "1-285"},{"path": "googlemock/CMakeLists.txt", "range": "1-140"}]} />
