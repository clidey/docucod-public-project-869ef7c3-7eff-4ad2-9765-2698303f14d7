---
title: "Installing with Bazel"
description: "For projects managed with Bazel, this page provides a streamlined process for integrating GoogleTest and GoogleMock. It guides users through WORKSPACE setup, dependency management, and ensures installation is verified."
---

# Installing with Bazel

For projects managed with Bazel, this guide provides a clear and streamlined process to integrate GoogleTest and GoogleMock. We will walk you through setting up your Bazel workspace, managing dependencies, and verifying a successful installation to get your first test running.

---

## 1. Prerequisites & System Requirements

Before integrating GoogleTest with Bazel, ensure the following prerequisites are met:

- **Supported Operating Systems:** Linux, macOS, Windows.
- **C++ Compiler:** Must support at least C++17 standard.
- **Bazel Version:** 7.0 or higher.

If you do not have Bazel installed yet, please refer to the official [Bazel installation guide](https://bazel.build/install).

<Tip>
Using Bazel 7.0 or later is important as it supports the recommended way to consume GoogleTest modules through Bazel Central Registry.
</Tip>

## 2. Setting Up Your Bazel Workspace for GoogleTest

To use GoogleTest with Bazel, you need to create a Bazel workspace and specify GoogleTest as a dependency.

### Step 1: Create Your Workspace Directory

Open your terminal and execute:

```bash
mkdir my_workspace && cd my_workspace
```

This creates a clean directory where your Bazel project and test files will reside.

### Step 2: Create `MODULE.bazel` to Declare Dependency

Within `my_workspace`, create a file named `MODULE.bazel` containing:

```python
# MODULE.bazel

# Reference the GoogleTest module version from Bazel Central Registry.
bazel_dep(name = "googletest", version = "1.17.0")
```

Updating the version number to the latest available is recommended for accessing the newest features.

<Tip>
The Bazel Central Registry approach simplifies dependency management by fetching GoogleTest directly during the build process.
</Tip>

## 3. Adding Your First Test Using GoogleTest

Once your workspace is set up, write a simple unit test and configure Bazel to build and run it.

### Step 1: Create a Test Source File

Create a file named `hello_test.cc` with this content:

```cpp
#include <gtest/gtest.h>

// Basic test case demonstrating GoogleTest usage.
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Checks strings are not equal.
  EXPECT_EQ(7 * 6, 42);               // Checks arithmetic equality.
}
```

### Step 2: Define a Bazel BUILD File

Next, create a `BUILD` file in the same directory:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This declares a test target that instructs Bazel to build the test binary and link against GoogleTest libraries.

### Step 3: Build and Run Your Test

Build and execute your test with the following command:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- The `--cxxopt=-std=c++17` flag ensures your tests compile with C++17 standard.
- `--test_output=all` displays test output in your terminal.

### Expected Output Snippet

You should see output resembling:

```
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

<Tip>
If your compiler is MSVC, replace `--cxxopt=-std=c++17` with `--cxxopt=/std:c++17`.
</Tip>

## 4. Verifying the Integration

After running the test:

- **Success Indicator:** All tests should pass without errors.
- **Artifacts:** Bazel will produce a test binary (e.g., `bazel-bin/hello_test`).
- **Test Output:** The console log should show execution details and pass status.

If you encounter errors, ensure that:

- Bazel is installed and in your system PATH.
- Your compiler supports C++17.
- The `MODULE.bazel` file uses a supported GoogleTest version.

<Tip>
Run `bazel clean` if build artifacts cause inconsistent results.
</Tip>

## 5. Best Practices & Common Pitfalls

- **Keep Bazel Updated:** Use the latest stable version to avoid compatibility issues.
- **Dependency Management:** Rely on `MODULE.bazel` and the Bazel Central Registry for up-to-date dependencies.
- **Correct Compiler Settings:** Always specify C++17 standard during compilation.
- **Link Both `gtest` and `gtest_main`:** The main entry point for tests is in `gtest_main`, so ensure it's included.

<Warning>
Avoid modifying GoogleTest source code directly within Bazel workspaces; use external dependencies via `MODULE.bazel` whenever possible.
</Warning>

## 6. Next Steps

Now that you have integrated GoogleTest with Bazel and executed your first test, you can:

- Explore writing more comprehensive tests using [GoogleTest assertions and fixtures](primer.md).
- Learn about [mocking functionality](guides/getting-started-testing/mocking-basics) with GoogleMock for advanced testing.
- Review Bazelâ€™s C++ tutorial for structuring larger test suites.

---

For more detailed examples and workflows, visit other parts of the documentation:

- [Quickstart: Building with Bazel](docs/quickstart-bazel.md)
- [SUPPORTED Platforms & Environments](overview/quick-start-integration/supported-platforms-environments.mdx)
- [Writing & Running Your First Test](getting-started/configuration-first-run/first-test.mdx)

<Tip>
Effective use of Bazel with GoogleTest accelerates your C++ testing and ensures robust, maintainable codebases.
</Tip>
