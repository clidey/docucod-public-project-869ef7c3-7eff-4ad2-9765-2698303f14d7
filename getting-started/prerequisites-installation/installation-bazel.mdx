---
title: "Installation with Bazel"
description: "Guides users through integrating and building GoogleTest in a Bazel-based C++ project. Includes WORKSPACE and BUILD file examples, so users can get testing with modern build tooling quickly."
---

# Installation with Bazel

This guide helps you integrate and build GoogleTest and GoogleMock in a Bazel-based C++ project. By following these steps, you will quickly set up a Bazel workspace, write a test, and compile it using modern, industry-standard build tooling.

---

## 1. Prerequisites

Before starting, ensure your environment is ready:

- **Operating System**: Compatible OS such as Linux, macOS, or Windows.
- **C++ Compiler**: Must support at least C++17 standard.
- **Bazel Version**: Bazel 7.0 or higher installed. See the [Bazel installation guide](https://bazel.build/install) if needed.

<Tip>
If you are new to Bazel, familiarize yourself with [Bazel concepts](https://docs.bazel.build/versions/main/build-ref.html#workspace) to understand how workspaces and BUILD files organize your codebase.
</Tip>

---

## 2. Set Up Your Bazel Workspace

### Step 1: Create Workspace Directory

Open your terminal and create a new directory for your project workspace:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Define Dependencies in `MODULE.bazel`

Bazel uses a module system to manage external dependencies. Create a `MODULE.bazel` file at the root of your workspace directory with the following content to include the GoogleTest module:

```python
# MODULE.bazel

# Use the latest stable GoogleTest version from Bazel Central Registry
bazel_dep(name = "googletest", version = "1.17.0")
```

<Tip>
Always verify the latest available version on the [Bazel Central Registry](https://registry.bazel.build/modules/googletest) and update your version accordingly.
</Tip>

---

## 3. Create Your First Test

### Step 1: Write Test Code

Create a file named `hello_test.cc` in the workspace directory with this sample test code:

```cpp
#include <gtest/gtest.h>

// Simple example test
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world"); // Strings are not equal
  EXPECT_EQ(7 * 6, 42);             // Numeric equality
}
```

This code demonstrates basic assertions from GoogleTest and uses the framework's core functionality.

### Step 2: Create the Bazel Build File

Next, create a `BUILD` file in the same directory with the following contents:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This `cc_test` rule declares your C++ test binary and links the necessary GoogleTest libraries.

<Tip>
- `@googletest//:gtest` provides core GoogleTest functionality.
- `@googletest//:gtest_main` supplies the `main()` implementation to run tests.
</Tip>

---

## 4. Build and Run Your Test with Bazel

Run the following command to compile and execute your test:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

### What Happens Here:

- `--cxxopt=-std=c++17` ensures that GoogleTest compiles with C++17 support.
- `--test_output=all` outputs all test messages, including successes.

### Expected Output Example:

```
INFO: Analyzed target //:hello_test (X packages loaded, Y targets configured).
INFO: Found 1 test target...
INFO: From Testing //:hello_test:
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
================================================================================
Target //:hello_test up-to-date:
  bazel-bin/hello_test
INFO: Elapsed time: X.XXXs, Critical Path: X.XXXs
INFO: Build completed successfully, X total actions
//:hello_test                                                     PASSED in 0.1s

INFO: Build completed successfully, X total actions
```

Congratulations! Your test compiled and ran successfully.

---

## 5. Next Steps

- Explore [writing tests with GoogleTest](../configuration-first-test/writing-first-test) to expand your knowledge.
- Review the [GoogleTest Primer](primer.md) for guidelines on assertions and test organization.
- Visit the [Feature Highlights](../../overview/features-integration/feature-glance) page to understand GoogleTestâ€™s capabilities.

---

## 6. Troubleshooting Tips

<AccordionGroup title="Common Issues and Solutions">  
<Accordion title="Bazel Command Not Found">  
Make sure Bazel is installed correctly and accessible in your system PATH. Run `bazel version` to verify.
</Accordion>  
<Accordion title="Compiler Errors Regarding C++ Standard">  
Ensure your compiler supports C++17 and that you pass the `--cxxopt=-std=c++17` flag to Bazel during build.
</Accordion>  
<Accordion title="Test Binary Not Found After Build">  
Check that your BUILD file is correct and that all source files and dependencies are properly listed.
</Accordion>  
<Accordion title="GoogleTest Version Mismatch">  
Verify that the version string in `MODULE.bazel` matches an existing version from the Bazel Central Registry.
</Accordion>  
</AccordionGroup>

<Tip>
For more complex projects, consider adding GoogleTest as a submodule or vendor it directly into your workspace for more control on versioning.
</Tip>

---

## 7. Summary

By completing these steps, you have:

- Created a Bazel workspace configured to consume GoogleTest and GoogleMock.
- Written and built a simple test using Bazel.
- Validated your setup by running the test binary.

This foundation enables you to build scalable, maintainable test suites in Bazel-powered C++ projects.


---

## Further Reading and Resources

- [GoogleTest Primer](primer.md)
- [Writing Your First GoogleTest](../configuration-first-test/writing-first-test)
- [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html)
- [Bazel Central Registry - GoogleTest](https://registry.bazel.build/modules/googletest)
- [GoogleTest GitHub Repository](https://github.com/google/googletest)

---

## Diagram of Workflow

```mermaid
flowchart TD
    A[Create Bazel Workspace Directory] --> B[Add MODULE.bazel with googletest dependency]
    B --> C[Write C++ Test Code (hello_test.cc)]
    C --> D[Create BUILD file with cc_test rule]
    D --> E[Run bazel test command]
    E --> F{Build Succeeds?}
    F -- Yes --> G[Run the test, see PASS output]
    F -- No --> H[Troubleshoot errors (compiler, deps)]

    classDef success fill:#d4edda,stroke:#155724,stroke-width:2px;
    classDef error fill:#f8d7da,stroke:#721c24,stroke-width:2px;
    class G success;
    class H error;
```

This flow represents the user journey for integrating GoogleTest with Bazel from workspace setup to test execution.


