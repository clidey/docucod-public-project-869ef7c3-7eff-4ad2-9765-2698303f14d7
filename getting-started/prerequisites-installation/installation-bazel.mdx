---
title: "Installation: Bazel"
description: "Instructions for installing and building GoogleTest and GoogleMock with Bazel, highlighting any unique steps or configuration details needed for this build system."
---

# Installation: Bazel

This guide helps you install and build GoogleTest and GoogleMock using the Bazel build system. It focuses on the unique steps and configuration details required to smoothly integrate and run GoogleTest within a Bazel workspace.

---

## 1. Prerequisites & System Requirements

Before you start, ensure the following prerequisites are met:

- **Compatible Operating System:** Linux, macOS, or Windows.
- **C++ Compiler:** Must support at least C++17 (GCC 7+, Clang 3.4.1+, MSVC 2017 Update 3+).
- **Bazel:** Version 7.0 or higher. [Install Bazel](https://bazel.build/install) if you haven’t already.

For a full list of supported platforms and compiler compatibility, see the [Supported Platforms](platforms.md) document.

<Note>
Terminal commands in this guide use Unix shell prompt style but are fully compatible with Windows command line.
</Note>

---

## 2. Set Up a Bazel Workspace

A Bazel workspace is a directory managing your source files and dependencies. You’ll create a workspace to include GoogleTest.

### Step 1: Create Workspace Directory

Run the following commands to create and enter your workspace directory:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Create `MODULE.bazel` to Manage Dependencies

To consume GoogleTest via the Bazel Central Registry (recommended approach as of Bazel 7.0), create a file named `MODULE.bazel` in the workspace root with the following content:

```python
# MODULE.bazel

# Use the latest stable version from https://registry.bazel.build/modules/googletest
bazel_dep(name = "googletest", version = "1.17.0")
```

This sets GoogleTest as a dependency for your Bazel workspace.

<Info>
Keep the version number updated by checking the [Bazel Central Registry for googletest](https://registry.bazel.build/modules/googletest).
</Info>

---

## 3. Create and Build a Test Binary

With the workspace ready, you can now create your first test binary that uses GoogleTest.

### Step 1: Create a Test Source File

In your `my_workspace` directory, create a file named `hello_test.cc` with the following simple test:

```cpp
#include <gtest/gtest.h>

// Basic test demonstrating GoogleTest assertions.
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Verify strings differ
  EXPECT_EQ(7 * 6, 42);               // Verify multiplication
}
```

This test uses GoogleTest assertions to verify simple expressions.

### Step 2: Create a Bazel Build File

Create a file named `BUILD` next to `hello_test.cc` with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This declares a test target named `hello_test` that compiles your source and links to GoogleTest libraries.

<Note>
  The `cc_test` rule invokes GoogleTest’s `main()` from `gtest_main` automatically.
</Note>

### Step 3: Build and Run Your Test

Run the following command to test your binary, specifying C++17 standard compilation:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

#### Expected Output Highlights:

- Bazel analyzes and builds the `hello_test` target.
- Test output shows GoogleTest running your defined test case.
- Confirmation of test passed with summary `PASSED`.
- Bazel completes build successfully.

If you see this output, you have successfully built and run your first GoogleTest-powered test using Bazel.

<Check>
Ensure you compile with C++17 (`--cxxopt=-std=c++17`) so GoogleTest compiles with the required standard.
If you are on MSVC, use `--cxxopt=/std:c++17` instead.
</Check>

---

## 4. Best Practices and Troubleshooting

### Best Practices

- Always keep your `MODULE.bazel` dependencies in sync with supported versions.
- Make clean builds with `bazel clean` if you encounter strange build issues.
- Use explicit C++ standard flags (`--cxxopt`) to avoid compiler default mismatches.

### Common Issues and Solutions

<AccordionGroup title="Common Setup Issues">
<Accordion title="GoogleTest Not Found in Workspace">
Ensure your `MODULE.bazel` properly specifies `bazel_dep` for `googletest`.
Run `bazel clean --expunge` and try again.
</Accordion>
<Accordion title="Test Fails to Compile With C++ Standard Errors">
Verify you passed the `--cxxopt=-std=c++17` flag on `bazel test`.
Check your compiler version supports C++17.
</Accordion>
<Accordion title="Linker Errors Regarding gtest_main">
Confirm `@googletest//:gtest_main` is in your `deps` list in the BUILD file.
</Accordion>
</AccordionGroup>

---

## 5. Next Steps

- Explore writing your own test cases using [GoogleTest Primer](primer.md).
- Review [Assertion Types](primer.md#assertions) to extend your tests.
- Look at the [Samples](samples.md) directory for example tests with various GoogleTest features.
- If you want to learn building with CMake instead, see the [Quickstart: CMake](quickstart-cmake.md) guide.

Happy Testing with Bazel and GoogleTest!

---