---
title: "Installing with Bazel"
description: "Instructions for setting up GoogleTest in projects that use Bazel, outlining the necessary configuration and steps for adding GoogleTest as a dependency in your Bazel build files."
---

# Installing with Bazel

GoogleTest integrates seamlessly with Bazel, allowing you to manage and build your C++ tests efficiently within the Bazel build ecosystem. This guide walks you through setting up GoogleTest as a dependency in Bazel-based projects, so you can start using it quickly with reliable version management and minimal configuration.

---

## 1. Prerequisites & System Setup

Before integrating GoogleTest with Bazel, ensure your environment meets the following:

- **Bazel version:** 7.0 or higher is required for proper module support and dependency management.
- **C++ Compiler:** A compiler compatible with at least C++17 standard.
- **Operating System:** Supported platforms include Linux, macOS, and Windows.

Refer to the [System Requirements & Supported Platforms](../getting-started/prerequisites-installation/system-requirements.md) for detailed compatibility.

---

## 2. Setting Up Your Bazel Workspace

GoogleTest is provided via the Bazel Central Registry, which is the recommended method for consuming external dependencies in Bazel workspaces starting with Bazel 7.0.

### Step 1: Create a Workspace Directory

Open your terminal or command prompt and create a new Bazel workspace:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Add the `MODULE.bazel` File

Create a file named `MODULE.bazel` in your workspace root with the following content:

```python
# MODULE.bazel

# Specify the version of GoogleTest to use (update to the latest if needed).
bazel_dep(name = "googletest", version = "1.17.0")
```

This declaration instructs Bazel to fetch GoogleTest version 1.17.0 via the Bazel Central Registry.

<Tip>
Always check for the latest GoogleTest version at https://registry.bazel.build/modules/googletest and update the version string accordingly.
</Tip>

---

## 3. Creating and Building Your First GoogleTest Binary

Once the workspace is set up with GoogleTest as a dependency, you can start writing tests and build them using Bazel.

### Step 1: Write a Simple Test

Create a file named `hello_test.cc` in your workspace directory with the following content:

```cpp
#include <gtest/gtest.h>

// A simple test demonstrating basic assertions
TEST(HelloTest, BasicAssertions) {
  // Expect the strings "hello" and "world" to be different.
  EXPECT_STRNE("hello", "world");
  // Expect 7 times 6 to equal 42.
  EXPECT_EQ(7 * 6, 42);
}
```

### Step 2: Create a Bazel BUILD File

Create a file named `BUILD` in the same directory with this content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This `cc_test` rule defines your test target, linking with GoogleTest's core (`gtest`) and its `main()` function (`gtest_main`), which provides the test runner.

<Tip>
If you use MSVC, include the flag `--cxxopt=/std:c++17` when running Bazel. For GCC or Clang, use `--cxxopt=-std=c++17` to ensure the C++17 standard is enforced.
</Tip>

---

## 4. Building and Running Tests

With your test and build files ready, use Bazel to build and run your test:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

You should see output similar to the following, indicating successful execution of your test:

```
INFO: Analyzed target //:hello_test (26 packages loaded, 362 targets configured).
INFO: Found 1 test target...
INFO: From Testing //:hello_test:
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

---

## 5. Customizing and Troubleshooting Bazel Integration

### Version Updates

Keep your `MODULE.bazel` version updated to benefit from the latest GoogleTest improvements.

### Common Issues

- **Build fails due to missing dependencies:** Ensure your workspace has internet access to fetch the modules.
- **Compiler errors related to C++ version:** Use `--cxxopt=-std=c++17` for GCC/Clang or `--cxxopt=/std:c++17` for MSVC variant on command line.
- **Linking errors involving `gtest_main`:** Confirm `@googletest//:gtest_main` is listed in `deps` of your `cc_test`.

<Tip>
Review the [Common Setup Issues](../getting-started/troubleshooting-support/common-setup-issues.md) page for detailed solutions to typical Bazel and GoogleTest integration problems.
</Tip>

---

## 6. Next Steps

- Explore writing more comprehensive tests in the [Writing Your First Test](../getting-started/quickstart-usage/writing-first-test.md) guide.
- Learn how to configure test environments with [Environment Configuration](../getting-started/quickstart-usage/configuration-overview.md).
- Use the [Primer](../gtest_overview/intro_value/what_is_googletest.md) for foundational understanding of GoogleTest concepts and assertions.

---

## Summary

Setting up GoogleTest with Bazel offers streamlined dependency management through Bazel modules and simplifies building and running your C++ tests. With minimal configuration in `MODULE.bazel` and straightforward BUILD file rules, you can quickly integrate robust testing into your Bazel projects.

---

## References

- [Bazel Module System Overview](https://docs.bazel.build/versions/main/modules.html)
- [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html)
- [GoogleTest in Bazel Central Registry](https://registry.bazel.build/modules/googletest)
- [Supported Platforms & System Requirements](../getting-started/prerequisites-installation/system-requirements.md)
- [Common Setup Issues](../getting-started/troubleshooting-support/common-setup-issues.md)
- [Writing Your First Test](../getting-started/quickstart-usage/writing-first-test.md)

---

For the full repository and examples, visit the [GoogleTest GitHub repository](https://github.com/google/googletest).

---

If you want to examine the source for how Bazel dependencies are managed in GoogleTest itself, see the [`MODULE.bazel`](../MODULE.bazel) and [`WORKSPACE`](../WORKSPACE) files in the repository root.


