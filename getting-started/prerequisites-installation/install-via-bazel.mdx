---
title: "Installation with Bazel"
description: "Explains how to set up GoogleTest using Bazel, including configuration in Bazel build files and dependencies. Provides a fast path for developers using Bazel in modern, scalable C++ projects."
---

# Installation with Bazel

This guide walks you through setting up GoogleTest within your Bazel-based C++ project. Bazel is the recommended build system for scalable and modern C++ development environments, and this page shows you how to configure the necessary Bazel workspace, dependencies, build files, and commands to compile and run your first GoogleTest test.

---

## 1. Prerequisites

Before starting, ensure your environment meets the following:

- **Compatible OS**: Linux, macOS, or Windows.
- **C++ Compiler**: Supporting at least C++17 standard.
- **Bazel Version**: 7.0 or higher installed ([Install Bazel](https://bazel.build/install)).

<Tip>
Bazel uses a workspace directory concept to manage and build your code. This workspace contains a `MODULE.bazel` file to specify external dependencies.
</Tip>

## 2. Setting Up Your Bazel Workspace

Follow these steps to create your Bazel workspace and declare GoogleTest as a dependency:

<Steps>
<Step title="Create Workspace Directory">
Open your terminal and run:

```sh
mkdir my_workspace && cd my_workspace
```

This creates and navigates into your workspace root directory, where your source and build files will reside.
</Step>

<Step title="Create MODULE.bazel to Add GoogleTest">
Inside `my_workspace`, create a file named `MODULE.bazel` and add the following content:

```python
# MODULE.bazel

# Use the latest stable version of GoogleTest from Bazel Central Registry
bazel_dep(name = "googletest", version = "1.17.0")
```

This declares the GoogleTest dependency from the Bazel Central Registry, enabling Bazel to fetch and build it automatically.
</Step>
</Steps>

## 3. Writing a Sample Test

To validate the setup, create a simple test file:

1. In `my_workspace`, create `hello_test.cc` with this code:

```cpp
#include <gtest/gtest.h>

// Simple test example checking string and integer equality
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Expect strings to NOT be equal
  EXPECT_EQ(7 * 6, 42);                // Expect numeric equality
}
```

This test verifies basic GoogleTest assertions in action.

## 4. Configuring Bazel Build Files

Create a `BUILD` file in the same workspace directory with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

- `cc_test` defines a test binary target.
- `deps` link against GoogleTest libraries: `gtest` (core) and `gtest_main` (with main program).

<Note>
If your compiler is Clang or GCC, pass `--cxxopt=-std=c++17` when building and testing to enforce C++17 standard. For MSVC, use `--cxxopt=/std:c++17`.
</Note>

## 5. Building and Running Tests

Build and run your `hello_test` using this command:

```sh
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

Successful output will show GoogleTest running your test and passing, e.g.:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

## 6. Troubleshooting Tips

- **Tests Not Found or Not Running?**
  - Verify `cc_test` target names and `deps` are correct.
  - Ensure you run `bazel test` in the workspace root.
- **Compiler Errors on C++17?**
  - Confirm you pass the `--cxxopt` flag.
  - Validate your compiler supports C++17.
- **Dependency Not Found?**
  - Check the `MODULE.bazel` file for correct syntax and version.
  - Run `bazel clean --expunge` to clear build cache if issues persist.

## 7. Next Steps

- Explore [GoogleTest Primer](primer.md) to learn writing sophisticated tests.
- Review [GoogleTest Feature Highlights](overview/feature-glance/feature-highlights) to leverage assertions and parameterized tests.
- Continue with [Configuring Your Project](../configuration-first-run/configure-project) page to integrate tests into your development workflow.

<Tip>
Using Bazel Central Registry dependency management is the modern recommended approach. It ensures your GoogleTest library is always up to date and compatible.
</Tip>

---

By following this guide, you have successfully set up GoogleTest with Bazel, built and run a simple test binary, and configured your workspace for scalable test development.

Start writing more tests to verify your C++ code with confidence and integrate GoogleMock for advanced mocking capabilities as needed.


---

## References and Additional Resources

- [Bazel Central Registry: GoogleTest](https://registry.bazel.build/modules/googletest)
- [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html)
- [GoogleTest Primer](primer.md)
- [Supported Platforms and Compilers](../prerequisites-installation/system-requirements.md)
- Official Bazel Documentation: [bazel.build](https://bazel.build/)


---

## Summary

This page specifically guides developers on installing and using GoogleTest with Bazel. It covers workspace setup, dependency declaration through `MODULE.bazel`, writing minimal test code, creating Bazel build targets, building, running tests, and troubleshooting common issues. It provides a fast, robust path for Bazel users to quickly integrate GoogleTest into modern C++ projects.


---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/quickstart-bazel.md", "range": "1-122"}]} />
