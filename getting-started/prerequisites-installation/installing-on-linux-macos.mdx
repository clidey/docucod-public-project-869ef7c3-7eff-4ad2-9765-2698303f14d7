---
title: "Installation on Linux/macOS"
description: "Provides clear, step-by-step instructions for installing GoogleTest and GoogleMock on Linux and macOS systems. Covers both source and package manager methods, initial configuration, and tips for ensuring the libraries are correctly integrated with your project."
---

# Installing GoogleTest and GoogleMock on Linux and macOS

This guide provides clear, step-by-step instructions for installing GoogleTest and GoogleMock on Linux and macOS systems. Follow these instructions to build the libraries from source and integrate them into your projects efficiently.

---

## 1. Prerequisites & System Preparation

Before you begin the installation, ensure your system meets the following requirements:

- **Operating System**: Linux or macOS
- **Compiler**: A C++ compiler with support for C++17 (e.g., GCC 7+, Clang 5+)
- **Build Tools**:
  - [CMake](https://cmake.org/) version 3.14 or higher
  - GNU Make or Ninja build system
- **Threading Support**: pthread library (usually available on Linux/macOS)
- **Network Access**: Required to clone the repository or download source archives


## 2. Cloning and Preparing the Source Code

GoogleTest and GoogleMock are commonly distributed together. To obtain the latest stable version, clone the official repository:

```bash
# Clone GoogleTest repository at version 1.17.0
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

This source package includes GoogleTest and GoogleMock by default.


## 3. Building GoogleTest and GoogleMock from Source with CMake

Follow these steps to build GoogleTest and GoogleMock as a standalone CMake project.

### 3.1 Create a Build Directory

Create a separate directory to keep build files isolated:

```bash
mkdir build
cd build
```

### 3.2 Generate Native Build Files

Run CMake to generate your native build environment (Makefiles on Linux/macOS):

```bash
cmake ..
```

> By default, this command builds both GoogleTest and GoogleMock. To build only GoogleTest without GoogleMock, run:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### 3.3 Build the Libraries

On Linux/macOS, use `make` to compile the libraries:

```bash
make
```

The output will compile all source files required to build GoogleTest and GoogleMock.

### 3.4 Optional: Install Libraries System-wide

If you have superuser permissions and want to install GoogleTest and GoogleMock globally:

```bash
sudo make install
```

By default, this installs to `/usr/local`.


## 4. Integrating GoogleTest into Your CMake Project

To incorporate GoogleTest into your own CMake-based project without a separate install, use the recommended approach of fetching the source during your build.

### 4.1 Using `FetchContent` in Your CMakeLists.txt

Add the following snippet to your project's `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows: Prevent overriding the parent project's compiler/linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

# Now you can link against GoogleTest and GoogleMock libraries
add_executable(my_test test_main.cpp)
target_link_libraries(my_test gtest_main gmock_main)

enable_testing()
include(GoogleTest)
gtest_discover_tests(my_test)
```

**Tip:** Adjust the URL to the latest commit or tag to always get up-to-date sources.

### 4.2 Build and Run Your Tests

```bash
cmake -S . -B build
cmake --build build
ctest --output-on-failure
```


## 5. Verifying the Installation

To confirm GoogleTest and GoogleMock have been correctly installed and integrated:

- Run sample or your own test binaries.
- Look for successful test discovery, execution, and passing reports.
- Check the generated output to verify GoogleTest version and linked components.


## 6. Practical Tips and Best Practices

- **Build Types:** Ensure the same compiler flags and build type (Debug/Release) are used for GoogleTest and your project.
- **Shared vs Static:** By default, GoogleTest builds static libraries. To build shared libraries, use the CMake option `-DBUILD_SHARED_LIBS=ON`.
- **Thread Safety:** GoogleTest enables pthread support automatically on Linux/macOS. You can verify with the macro `GTEST_IS_THREADSAFE` in your tests.
- **Avoid Macro Conflicts:** If you use other libraries that define similar macros, disable GoogleTest macros via compiler flags like `-DGTEST_DONT_DEFINE_TEST=1`.


## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Cannot Find pthread Library">
Make sure the pthread library is installed and accessible on your system. On most Linux systems, install with:

```bash
sudo apt-get install build-essential
```

On macOS, pthread support is included by default.

If using custom toolchains, explicitly specify threading libraries in your build system.
</Accordion>
<Accordion title="Runtime Library Mismatch on Windows">
If you see errors about runtime library mismatches (e.g., `MT` vs `MD`), add the following to your `CMakeLists.txt` to align runtimes:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

This forces GoogleTest to use the same runtime linkage settings as your project.
</Accordion>
<Accordion title="Build Fails Due to C++ Standard Version">
Ensure your compiler supports at least C++17 and you have configured this in your project:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

Upgrade your compiler if necessary.
</Accordion>
<Accordion title="Linker Errors Related to GoogleTest Symbols">
Verify that your test target links against the correct GoogleTest libraries (`gtest_main` or `gtest`) and GoogleMock libraries if needed.

Also, check path and environment variables if GoogleTest is installed in a custom location.
</Accordion>
</AccordionGroup>

---

## Additional Resources

- [Quickstart: Building with CMake](https://github.com/google/googletest/blob/main/docs/quickstart-cmake.md) — A beginner-friendly guide
- [System Requirements](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/system-requirements.md)
- [Using pkg-config with GoogleTest](https://github.com/google/googletest/blob/main/docs/pkgconfig.md)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/primer.md) — Learn to write your first tests
- [GoogleMock Documentation](https://github.com/google/googlemock)


## Summary

By following this guide, you will have a fully-functional GoogleTest and GoogleMock installation on Linux/macOS systems. You will be ready to build, link, and run unit tests within your C++ projects using CMake as your build tool.

---

<Check>
Ensure CMake version is 3.14 or higher by running `cmake --version`.
</Check>

<Check>
Verify compiler supports C++17 by running `g++ -std=c++17 --version` or `clang++ -std=c++17 --version`.
</Check>

<Note>
You can customize the build configuration by passing additional flags to `cmake`, such as `-DBUILD_GMOCK=OFF` to exclude GoogleMock.
</Note>

---

## Next Steps

- Write your first test using GoogleTest (see the [Writing Your First Test](https://github.com/google/googletest/blob/main/guides/getting-started/writing-your-first-test.md) guide).
- Explore [mocking basics](https://github.com/google/googlemock) if your project requires test doubles.
- Review troubleshooting tips if you encounter errors during installation or build.
- Integrate GoogleTest with your continuous integration systems for automated testing.

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "README.md", "range": "1-167"},{"path": "docs/quickstart-cmake.md", "range": "1-94"},{"path": "getting-started/prerequisites-installation/system-requirements.mdx", "range": "1-50"}]} />
