---
title: "Installation Options"
description: "Presents recommended installation methods for GoogleTest and GoogleMock, including using CMake, Bazel, and other package managers. Overviews repository structure so users can choose the best fit for their workflow."
---

# Installation Options for GoogleTest and GoogleMock

This page presents recommended installation methods for integrating GoogleTest and GoogleMock into your C++ projects. We cover the primary workflows using CMake, Bazel, and other package managers, helping you select the best fit for your development environment and workflow. Additionally, we provide an overview of the repository structure, highlighting key components you'll interact with during installation.

---

## Understanding the Repository Structure

Before diving into installation, familiarize yourself with the key components in the repository to understand what parts will be built and installed:

- **googletest/**: Contains the GoogleTest framework source code.
- **googlemock/**: Contains the GoogleMock framework, which depends on GoogleTest.
- **CMakeLists.txt**: Main CMake build scripts to build both GoogleTest and GoogleMock.
- **include/**: Header files for GoogleTest and GoogleMock.
- **src/**: Source files for GoogleMock, including `gmock-all.cc`, and the main test runner `gmock_main.cc`.

By default, building GoogleTest also builds GoogleMock, making the two tightly integrated for most workflows.

---

## 1. Installation Using CMake (Recommended)

Integrating via CMake provides a robust and widely supported route, allowing easy configuration and integration into various platforms.

### Prerequisites
- CMake version 3.13 or later
- A C++17 compatible compiler
- Git (to clone the repository)

### Step-by-Step Instructions

<Steps>
<Step title="Clone the Repository">
Open your terminal and clone the repository with the version tag you prefer (here we use `v1.17.0` as an example):

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>

<Step title="Create and Enter a Build Directory">
Create a separate directory for build files to keep the source tree clean:

```bash
mkdir build
cd build
```
</Step>

<Step title="Configure the Build with CMake">
By default, both GoogleTest and GoogleMock are built. To build the combined package, run:

```bash
cmake ..
```

To build only GoogleTest without GoogleMock, disable GoogleMock explicitly:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

If you want to link dynamically on Windows (matching Visual Studio runtime libraries), add:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

</Step>

<Step title="Build the Project">
On Unix-like systems (Linux/macOS), run:

```bash
make
```

On Windows with Visual Studio, open the generated solution and build from the IDE, or use:

```powershell
msbuild googletest.sln
```

</Step>

<Step title="Installation (Optional)">
If you want to install the headers and binaries system-wide (requires admin/root permissions):

```bash
sudo make install
```

This installs to `/usr/local/` by default.

</Step>

<Step title="Verification">
Confirm the build completed without errors and the libraries are available:

- Check `build/lib` for `libgtest.a`, `libgmock.a`, or their shared equivalents.
- Check `build/include` or installed include dirs for headers.

</Step>
</Steps>

### Notes & Best Practices

- GoogleMock depends on GoogleTest and is built together unless disabled.
- CMake builds allow easy customization via flags like `BUILD_SHARED_LIBS` or `gtest_force_shared_crt`.
- C++17 support is mandatory; ensure your compiler version supports it.

---

## 2. Integration With Bazel

If your project uses Bazel as a build system, GoogleTest and GoogleMock can be included as external dependencies.

### Getting Started with Bazel

- Add GoogleTest to your `WORKSPACE` file, typically using:

```bzl
http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/release-1.12.1.tar.gz",
    strip_prefix = "googletest-release-1.12.1",
)
```

- In your `BUILD` files, depend on the `@com_google_googletest//:gtest` and `:gmock` targets.

This approach ensures seamless builds and integration into Bazel workspaces.

<Note>
Refer to the Bazel official documentation and [Integration with Build & CI Systems](/overview/audience-usecases-integration/integration-points) guide for detailed instructions.
</Note>

---

## 3. Package Managers

GoogleTest and GoogleMock can also be installed via common package managers depending on your platform:

- **Linux (Ubuntu/Debian):**

```bash
sudo apt-get install libgtest-dev
```

After installing the package, you will need to build and install the static libraries manually:

```bash
cd /usr/src/gtest
sudo cmake .
sudo make
sudo cp *.a /usr/lib
```

- **MacOS (Homebrew):**

```bash
brew install googletest
```

- **vcpkg (Cross-platform):**

```bash
vcpkg install gtest
```

<Warning>
Package versions may lag behind the repository's main branch. For the latest features or fixes, prefer building from source.
</Warning>

---

## 4. Repository Package Configuration Files

GoogleMock and GoogleTest provide pkg-config files to facilitate linking.

- `gmock.pc.in` and `gmock_main.pc.in` files under `googlemock/cmake` generate pkg-config files during install.

- These provide metadata to locate libraries and headers automatically.

Example content snippet:

```
Name: gmock
Description: GoogleMock (without main() function)
Version: <version>
Requires: gtest = <version>
Libs: -L${libdir} -lgmock
Cflags: -I${includedir}
```

Use your system's `pkg-config` tool to check and consume these configurations.

---

## 5. Choosing Installation Methods

| Method             | Use Case                               | Pros                                     | Cons                                  |
|--------------------|--------------------------------------|------------------------------------------|---------------------------------------|
| CMake (Standalone) | Typical local build and development   | Easy to customize, cross-platform        | Requires CMake familiarity             |
| CMake (Subdirectory) | Integration in a larger CMake project| Consistent build settings, easy updates | Adds to main build complexity          |
| Bazel             | Bazel-based projects                   | Tight integration, fast incremental builds | Setup can be complex for new users     |
| Package Manager   | Quick setup on supported platforms    | Fast install, easy updates                | May not have latest versions           |

---

## Troubleshooting Common Installation Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Command Not Found">
Ensure CMake is installed and in your system PATH.

- On Linux/macOS: `cmake --version`
- On Windows: Use CMake installer or Visual Studio installer to add CMake.

</Accordion>
<Accordion title="Compiler Errors Related to C++ Standard">
Verify your compiler supports C++17.

- Use `gcc --version` or `clang --version`.
- Configure CMake with explicit C++ standard:

```bash
cmake .. -DCMAKE_CXX_STANDARD=17 -DCMAKE_CXX_STANDARD_REQUIRED=ON
```

</Accordion>
<Accordion title="Linking Errors with GTest or GMock Libraries">
Check that the library paths are correctly specified.

- For installed libraries, ensure pkg-config or CMake's `find_package` locate the libraries.
- For manual builds, link with `gtest_main` or `gmock_main` when needed.

</Accordion>
<Accordion title="GoogleMock Not Found or Not Built">
Ensure GoogleMock is built by not disabling it in CMake options.

```bash
cmake .. -DBUILD_GMOCK=ON
```

Verify presence of `libgmock.a` or equivalent.

</Accordion>
</AccordionGroup>

---

## Summary

This page outlined installation methods for GoogleTest and GoogleMock across common build systems and package managers. By selecting the method that aligns with your project and environment, you ensure efficient integration and access to the powerful C++ testing capabilities these frameworks provide.

---

## Additional Resources

- **Building from Source**: [Building from Source](https://github.com/google/googletest/blob/main/README.md#building-from-source)
- **Integration with Build & CI Systems**: [Integration Points](/overview/audience-usecases-integration/integration-points)
- **Getting Started Guides**: [Installing and Building GoogleTest](https://github.com/google/googletest/blob/main/guides/getting-started-guides/installing-building.md)

---

For detailed configuration and use after installation, proceed to the [Configuring Your Project](/getting-started/project-setup-validation/configuring-project) guide.