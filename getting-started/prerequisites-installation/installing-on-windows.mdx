---
title: "Installation on Windows"
description: "Explains the steps required to install and configure GoogleTest and GoogleMock on Windows, including handling Visual Studio integration, command-line builds, and any unique platform considerations. Aims to help users avoid common pitfalls unique to Windows environments."
---

# Installation on Windows

This guide provides a clear, step-by-step process to install and configure GoogleTest and GoogleMock on Windows, including best practices for Visual Studio integration and command-line build workflows. It highlights Windows-specific considerations to ensure a smooth setup.

---

## 1. Prerequisites & System Requirements

Before starting the installation, ensure your system meets the following requirements:

- **Operating System:** Windows 10 or later (64-bit recommended)
- **C++ Compiler:** Visual Studio 2017 or newer with C++17 support enabled
- **Build Tools:** CMake version 3.14 or higher, installed and added to your PATH
- **Optional:** Git client to clone the repository

<Check>
You can verify your Visual Studio installation and compiler version by running:

```powershell
cl.exe
```
Expected output should include Visual Studio compiler version supporting C++17.

To verify CMake installation:

```powershell
cmake --version
```

Ensure this reports version 3.14 or later.
</Check>

---

## 2. Downloading GoogleTest and GoogleMock

GoogleTest and GoogleMock are bundled together in a single repository. Begin by cloning or downloading the official repo.

<Steps>
<Step title="Clone the Repository">
Open a PowerShell or Command Prompt window and run:

```powershell
git clone https://github.com/google/googletest.git -b main
cd googletest
```

If you don't have Git, download and extract the ZIP archive from the GitHub page: [https://github.com/google/googletest](https://github.com/google/googletest).
</Step>

<Step title="Create a Build Directory">
It's best practice to build in a separate directory:

```powershell
mkdir build
cd build
```
</Step>
</Steps>

---

## 3. Building GoogleTest and GoogleMock with Visual Studio

GoogleTest comes with a CMake build script that integrates seamlessly with Visual Studio.

<Steps>
<Step title="Configure the Build with CMake">
Run the following to generate Visual Studio project files:

```powershell
cmake .. -G "Visual Studio 17 2022" -A x64
```

- Replace "Visual Studio 17 2022" with your installed Visual Studio generator if different.
- `-A x64` specifies the platform architecture. Adjust if targeting a different platform (e.g., Win32).

<Note>
If you want to build only the core GoogleTest (excluding GoogleMock), add `-DBUILD_GMOCK=OFF`.
</Note>

</Step>

<Step title="Build the Solution">
Open the generated solution (`googletest.sln`) in Visual Studio or build from command line:

```powershell
cmake --build . --config Release
```

This compiles both GoogleTest and GoogleMock libraries.
</Step>

<Step title="Install the Libraries (Optional)">
If you want to install GoogleTest and GoogleMock to default system locations:

```powershell
cmake --install . --config Release
```

This step requires administrator privileges if installing to system directories.
</Step>
</Steps>

---

## 4. Special Windows Considerations

Building and linking GoogleTest/GoogleMock on Windows involves some unique scenarios.

- **Runtime Library Mismatch:**
  Visual Studio by default dynamically links the C++ runtime (`MD`/`MDd`), but GoogleTest links statically (`MT`/`MTd`). This causes linker errors.

  To resolve, enable dynamic runtime linkage when building GoogleTest by passing the CMake option:

  ```powershell
  cmake .. -Dgtest_force_shared_crt=ON -G "Visual Studio 17 2022" -A x64
  ```

- **UNICODE Mode:**
  GoogleTest's initialization supports programs built with Unicode settings; no special action is needed here.

- **Main Function Issues:**
  When building GoogleMock, it replaces the `main()` function with its own (`gmock_main`). To avoid conflicts:

  - Link against `gmock_main` if you want GoogleMock's main.
  - Otherwise, link against `gmock` and provide your own `main()`.

---

## 5. Using CMake with GoogleTest in Your Own Projects on Windows

To integrate GoogleTest and GoogleMock into your projects, consider the following step-by-step example.

<Steps>
<Step title="Declare GoogleTest with FetchContent">
Add to your `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
# Enable shared runtime on Windows.
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)
```

This automatically downloads and configures GoogleTest.
</Step>

<Step title="Add Your Test Executable">
Create your test source file `example_test.cpp` and declare your test executable:

```cmake
add_executable(example_test example_test.cpp)
target_link_libraries(example_test GTest::gtest_main)

include(GoogleTest)
gtest_discover_tests(example_test)
```
</Step>

<Step title="Build and Run Your Tests">
Run the following commands:

```powershell
cmake -S . -B build -G "Visual Studio 17 2022" -A x64
cmake --build build --config Release
ctest --test-dir build --output-on-failure
```

This builds and executes your tests, showing output for failures.
</Step>
</Steps>

---

## 6. Verifying Installation

After building, ensure that:

- The `gtest.lib`, `gtest_main.lib`, `gmock.lib`, and `gmock_main.lib` libraries are built in the `build` folder.
- You can compile and run a simple test executable that includes `<gtest/gtest.h>` and runs `RUN_ALL_TESTS()`.

Example minimal test file (`example_test.cpp`):

```cpp
#include <gtest/gtest.h>

TEST(SimpleTest, BasicAssertions) {
    EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
```

Build and run this program linked to `gtest_main` or `gmock_main` to confirm success.

<Tip>
If tests fail to link, verify runtime library flags and ensure `gtest_force_shared_crt` option is set on Windows.
</Tip>

---

## 7. Troubleshooting Common Windows Issues

<AccordionGroup title="Windows Build Troubleshooting">  
<Accordion title="Linker Errors (Runtime Library Mismatch)">
This is caused by mixing static and dynamic runtime linkage.

**Solution:** Always use `-Dgtest_force_shared_crt=ON` when configuring on Windows.
</Accordion>

<Accordion title="Missing main Function Errors">
If you see errors related to multiple or missing `main()`, ensure:

- You link against `gtest_main` or `gmock_main` to use the default main.
- Or provide your own `main()` if linking only with `gtest` or `gmock`.
</Accordion>

<Accordion title="Compiler Not Recognizing C++17">
Ensure your Visual Studio installation includes the C++17 toolset.

Check project properties or reinstall/update Visual Studio if necessary.
</Accordion>

<Accordion title="Tests Not Running or Reporting Incorrectly">
Verify you call `InitGoogleTest` properly and return the result of `RUN_ALL_TESTS` in your `main()`.

GoogleTest's test discovery depends on this.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps & Additional Resources

- Proceed to [Writing Your First Test](/guides/getting-started/writing-your-first-test) to start coding tests.
- Review [System Requirements](/getting-started/prerequisites-installation/system-requirements) for more platform info.
- Explore troubleshooting tips in [Troubleshooting Setup Issues](/getting-started/troubleshooting-faq/troubleshooting-setup-issues).
- For advanced build system integration, see [Using Alternative Build Systems](/getting-started/prerequisites-installation/alternative-build-systems).

---

## References

- Official GoogleTest GitHub: [https://github.com/google/googletest](https://github.com/google/googletest)
- CMake Documentation: [https://cmake.org/cmake/help/latest/](https://cmake.org/cmake/help/latest/)

---

This completes the Windows installation guide for GoogleTest and GoogleMock, designed to get you building, linking, and running tests with confidence and minimal friction on Windows environments.
