---
title: "Manual Installation & Source Integration"
description: "Outline of how to integrate GoogleTest and GoogleMock directly into your project source tree, for users requiring custom or advanced setups."
---

# Manual Installation & Source Integration

This guide explains how to directly integrate GoogleTest and GoogleMock into your project source tree without relying on package managers or external pre-built binaries. This method is intended for users who need customized setups, advanced configurations, or have specific build system requirements that preclude standard installation mechanisms.

---

## 1. Prerequisites & System Requirements

- **Supported Platforms:** GoogleTest and GoogleMock support major platforms including Linux, Windows, and macOS. Ensure your environment supports a modern C++ compiler compatible with at least C++11.
- **Compiler Requirements:** Minimum compilers supported are GCC 7+, Clang 3.4.1+, or MSVC 2017 Update 3+. Ensure your compiler fully supports C++11 or later.
- **Build System:** Familiarity with your project's build system is required to integrate the source code directly. GoogleTest uses CMake as its primary build system, but you can integrate the sources manually as well.

## 2. Source Tree Integration

### Step 1: Download the Source

You must obtain the GoogleTest and GoogleMock source code directly. You can clone the full googletest repository which includes both:

```bash
git clone https://github.com/google/googletest.git
```

This repository contains the source code under the `googletest/` and `googlemock/` directories.

### Step 2: Place Sources into Your Project

Decide on a location within your project's source tree to include the GoogleTest sources. Common options:

- `third_party/googletest/`
- `external/gtest/`

Copy the following directories into your project source structure:

- `googletest/include/`
- `googletest/src/`
- `googlemock/include/`
- `googlemock/src/`

You do **not** need to build GoogleTest or GoogleMock as standalone libraries if you compile the sources as part of your project.

### Step 3: Add Source Files to Your Build

Include the GoogleTest and GoogleMock sources as part of your build targets.

Example with CMake (assuming your root is `third_party/googletest`):

```cmake
add_subdirectory(third_party/googletest)

target_link_libraries(your_test_target PRIVATE gtest gmock)
```

If your build system does not support `add_subdirectory`, add source files manually:

- For GoogleTest:
  - `googletest/src/gtest-all.cc`
- For GoogleMock:
  - `googlemock/src/gmock-all.cc`

Include the corresponding headers `googletest/include` and `googlemock/include` in your include paths.

### Step 4: Using GoogleMock Main Target

If you want a ready-made `main()` function to run your tests, use the `gmock_main` target. It links GoogleMock and GoogleTest and provides a default `main()`.

With CMake:

```cmake
find_package(GTest REQUIRED)
add_executable(your_tests your_tests.cc)
target_link_libraries(your_tests PRIVATE gmock_main)
```

If integrating manually, link with the compiled `gmock_main` object.

## 3. Customizing Your Integration

- You can modify or patch the GoogleTest and GoogleMock sources if your project requires adaptation to internal policies or environment.
- For any changes, maintain synchronization with upstream updates.

## 4. Verification and Running Tests

After integration:

- Compile your project, ensuring that GoogleTest and GoogleMock sources are built without errors.
- Write your tests using GoogleTest and GoogleMock APIs.
- Link your test executables with `gmock` or `gmock_main` as needed.
- Run your tests as normal executables.

## 5. Best Practices & Tips

- Keep GoogleTest and GoogleMock sources updated regularly to benefit from bug fixes and features.
- Avoid mixing manual source integration with package manager versions to prevent conflicts.
- If you experience issues with multiple definitions or linkage errors, ensure that GoogleTest/GoogleMock sources are included only once per build.
- Use `gmock_main` when possible to simplify the test executable setup.

## 6. Troubleshooting

<AccordionGroup title="Common Issues When Integrating GoogleTest/GoogleMock from Source">
<Accordion title="Include Path Not Found or Header Errors">
Ensure you are including both `googletest/include` and `googlemock/include` directories in your compiler's include paths. Missing these will cause compilation errors.
</Accordion>
<Accordion title="Linker Errors about Undefined References to gTest or gMock Symbols">
Verify that the source files `gtest-all.cc` and `gmock-all.cc`, or respective libraries, are compiled and linked into your test target.
</Accordion>
<Accordion title="Multiple Definition Errors in Linking">
This problem may arise if GoogleTest and GoogleMock sources are included multiple times or mixed with precompiled libraries. Double-check your build setup to avoid duplicate linkage.
</Accordion>
<Accordion title="Tests Not Running or Reporting Zero Tests">
Confirm that your test executable links with the correct `gmock_main` or that you provide your own `main()`. Also, check that your test discovery macros (e.g., `TEST()`, `TEST_F()`) are visible and not excluded.
</Accordion>
</AccordionGroup>

## 7. Getting Help

- Consult the [official GoogleTest documentation](https://github.com/google/googletest) and [GoogleMock documentation](https://google.github.io/googletest/gmock_for_dummies.html) for examples and details.
- Review the available [reference pages for mocking](docs/reference/mocking.md) and the [gMock Cookbook](docs/gmock_cook_book.md) for advanced examples.
- For community help, try forums, issue trackers, or [community-created documentation](docs/community_created_documentation.md).


---

## Summary

Direct source integration requires careful handling of source placement, build system configuration, and ensure compilation/linkage of GoogleTest and GoogleMock source files alongside your project. When done correctly, this provides maximum control and flexibility for custom or advanced testing setups.


---

**Note:** For users preferring automated installation methods, consult the CMake or Bazel installation guides.

---

#### Additional Resources

- [GoogleTest Primer](overview/about-googletest/what-is-googletest)
- [GoogleMock for Dummies](docs/gmock_for_dummies.md)
- [Mocking Reference](docs/reference/mocking.md)
- [gMock Cookbook](docs/gmock_cook_book.md)
- [gMock Cheat Sheet](docs/gmock_cheat_sheet.md)
- [Troubleshooting Common Setup Issues](getting-started/validation-troubleshooting/common-issues)
- [Integration with Build Tools and CI](overview/integration-ecosystem/integration-with-build-and-ci)

----

<Source url="https://github.com/google/googletest" paths={[{path: "googletest/include"},{path: "googletest/src/gtest-all.cc"},{path: "googlemock/include"},{path: "googlemock/src/gmock-all.cc"}]} />