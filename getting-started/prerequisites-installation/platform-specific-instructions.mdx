---
title: "Platform-Specific Setup"
description: "Precise, actionable setup guides for Linux, macOS, and Windows, including environment preparation, build steps, and post-install checks. Tailors onboarding for the needs of each major user segment."
---

# Platform-Specific Setup

This guide provides precise, actionable instructions to set up GoogleTest on major platforms: Linux, macOS, and Windows. It covers environment preparation, build steps, and verification to ensure a smooth onboarding experience tailored to the needs of each user segment.

---

## 1. Overview of Platform Setup
GoogleTest supports a wide range of platforms, automatically detecting environment features to enable optimal functionality. However, some platform-specific setup is required to compile, link, and run GoogleTest effectively. This page offers targeted setup steps for each major platform.

> The underlying detection macros and features of GoogleTest, such as `GTEST_HAS_PTHREAD`, `GTEST_OS_WINDOWS`, and others, are configured internally (see `gtest-port.h` and `gtest-port-arch.h`). Users rarely need to manually alter these unless customizing deeply.

---

## 2. Linux Setup

### 2.1 Prerequisites
- A Linux distribution supporting the GNU toolchain.
- A C++ compiler with C++17 support (GCC 7.0+ recommended).
- Build tools: `cmake`, `make`, and `pkg-config`.
- `pthread` library availability (usually preinstalled).

### 2.2 Installation Steps
<Steps>
<Step title="Clone the GoogleTest repository">
Open a terminal and clone the latest stable GoogleTest code:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
tcd googletest
t
```

This downloads the source under the `googletest` folder.
</Step>

<Step title="Create and navigate to a build directory">
```bash
mkdir build
tcd build
t
```

Keeping build artifacts separate ensures a clean source tree.
</Step>

<Step title="Configure the build with CMake">
Run CMake to generate native makefiles:

```bash
cmake ..
```

If you want only GoogleTest (without GoogleMock), add `-DBUILD_GMOCK=OFF`.
</Step>

<Step title="Build GoogleTest">
Use `make` to build:

```bash
make
```

This compiles static libraries and samples.
</Step>

<Step title="(Optional) Install GoogleTest">
If you are a system administrator and want to make GoogleTest system-wide:

```bash
sudo make install
```

This installs headers and libraries under `/usr/local/` by default.
</Step>
</Steps>

### 2.3 Verification
- Verify the `libgtest.a` library and headers are in expected install folders.
- Confirm `pkg-config` recognizes GoogleTest (if installed), and shows correct compiler flags.
- Compile and run the sample tests included in the `samples` directory.

### 2.4 Common Pitfalls and Troubleshooting
- Ensure your compiler supports C++17 or later; older versions cause compile errors.
- If errors mention missing `pthread`, verify `pkg-config` or build flags include `-pthread`.
- Use `pkg-config --cflags gtest` to check include paths and compile flags.

---

## 3. macOS Setup

### 3.1 Prerequisites
- macOS 10.14 or later recommended.
- Xcode Command Line Tools installed (`xcode-select --install`).
- CMake 3.14 or higher.
- C++17 capable compiler (modern Clang included in Xcode).

### 3.2 Installation Steps
Follow the same core commands as Linux:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build
cd build
cmake ..
make
sudo make install
```

### 3.3 Verification
- You can run built-in sample tests.
- Check installed locations `/usr/local/include/gtest` and `/usr/local/lib`.

### 3.4 Notes
- GoogleTest auto-detects platform support for features like POSIX signals, threading, etc., so no manual macros are generally needed.

---

## 4. Windows Setup

### 4.1 Prerequisites
- Windows 10 or later.
- Visual Studio 2017 or newer with C++ workload installed.
- CMake 3.14 or newer.

### 4.2 Installation Steps
1. Clone GoogleTest repository:

```powershell
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build
cd build
```

2. Run CMake with Visual Studio generator:

```powershell
cmake -G "Visual Studio 16 2019" ..
```

3. Open the generated `.sln` file in Visual Studio or use `cmake --build .` from command line.

4. To build only GoogleTest (without GoogleMock), specify `-DBUILD_GMOCK=OFF`.

5. Build the solution or use `cmake --build . --config Release`.

### 4.3 Verification
- Confirm the library (`gtest.lib`) is built.
- Try running sample tests via Visual Studio Test Explorer or command line.

### 4.4 Special Notes
- GoogleTest supports multiple Windows platforms, including MinGW and Cygwin.
- For shared library (DLL) builds, define `-DGTEST_CREATE_SHARED_LIBRARY=1`.
- For tests linking with shared GoogleTest libraries, add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1`.
- To prevent runtime linkage conflicts, match Visual Studio runtime libraries (`gtest_force_shared_crt` option in CMake).

---

## 5. Customizing Platform-Specific Macros

While GoogleTest auto-detects environment features, advanced users or build systems may override some macros. Relevant macros include:

- `GTEST_HAS_PTHREAD` (set to 1 or 0 to force pthread usage)
- `GTEST_CREATE_SHARED_LIBRARY` (set to 1 for shared library builds)
- `GTEST_LINKED_AS_SHARED_LIBRARY` (set when linking tests against shared GoogleTest)

These are usually passed as compiler definitions via build scripts or CMake.

For more information, review the [Customization Points](https://github.com/google/googletest/tree/main/googletest/include/gtest/internal/custom) in the `custom/` directory.

---

## 6. Post-Installation Verification

1. **Compile a Basic Test:** Create a `sample_test.cc` like the following:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, AssertionTrue) {
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. **Build with Compiler Flags:** Include correct paths and libraries.

3. **Run the Test Executable:** It should run and report success.

4. **Check for Threading Support:** Inspect that `GTEST_IS_THREADSAFE` macro is defined to 1 by compiling:

```cpp
#include <gtest/gtest.h>
#if !GTEST_IS_THREADSAFE
#error "GoogleTest is not thread-safe on this platform."
#endif
int main() { return 0; }
```

---

## 7. Troubleshooting Common Platform Setup Issues

<AccordionGroup title="Common Platform Setup Troubleshooting">
<Accordion title="Compiler Not Supporting C++17">
Upgrade your compiler to support C++17 or later. On Linux/macOS, GCC 7+ or Clang 7+ is recommended. On Windows, use Visual Studio 2017 or newer.
</Accordion>

<Accordion title="Missing pthread Linker Errors on Linux">
Ensure your build links to pthread library by adding `-pthread`. Using CMake, the threading library is added automatically if detected.
</Accordion>

<Accordion title="pkg-config Not Found or Wrong Paths">
Confirm `pkg-config` is installed and environment variables (`PKG_CONFIG_PATH`) are set correctly, especially in cross-compilation scenarios.
</Accordion>

<Accordion title="Conflicts in Visual Studio Runtime Libraries">
Use the `gtest_force_shared_crt` CMake option or configure your project and GoogleTest to use matching runtimes (`/MD` vs `/MT`).
</Accordion>

<Accordion title="Shared Library (DLL) Build Issues on Windows">
Define `GTEST_CREATE_SHARED_LIBRARY=1` when building GoogleTest DLL, and `GTEST_LINKED_AS_SHARED_LIBRARY=1` in your test projects.
</Accordion>
</AccordionGroup>

---

## 8. Additional Resources
- [System Requirements Guide](../getting-started/prerequisites-installation/system-requirements)
- [Installation Overview](../getting-started/prerequisites-installation/installation-overview)
- [CMake Build Integration Guide](../guides/getting_started/project_setup)
- [Using pkg-config with GoogleTest](../docs/pkgconfig.md)

---

> Tailor your platform setup carefully to ensure optimal GoogleTest performance and feature availability. Use this guide in conjunction with overall installation and project configuration documentation for a smooth onboarding experience.

---