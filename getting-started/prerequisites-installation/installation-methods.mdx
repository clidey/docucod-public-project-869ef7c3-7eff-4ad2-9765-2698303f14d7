---
title: "Installation Methods"
description: "Step-by-step installation instructions for various environments including CMake and Bazel, along with platform-specific guidance for Linux, macOS, and Windows. This page empowers users to choose the installation approach that matches their development workflow."
---

# Installation Methods

This guide provides detailed, step-by-step instructions for installing GoogleTest and GoogleMock across common development environments and platforms. Whether you are building from source using CMake, integrating into an existing project, or using Bazel, these methods empower you to choose the best fit for your workflow.

---

## 1. Prerequisites

Before installing GoogleTest, ensure the following:

- **C++17 Support:** Your compiler must support the C++17 standard.
- **Supported Platforms:** Linux, Windows, or macOS.
- **CMake Version:** Minimum version 3.14 (for fetch content integration).
- **Threading Support:** pthread library is required on Unix-like OS for multi-threaded tests.
- **Build Tools:** Git client to clone the repository; make, Visual Studio, or Xcode for building.

If you plan to build GoogleMock as well, note that it depends on GoogleTest.


## 2. Building GoogleTest with CMake (Standalone)

Follow these steps to build GoogleTest (including GoogleMock by default) as a standalone project:

<Steps>
<Step title="Clone the Repository">
Clone the official GoogleTest repository and check out a stable release tag (e.g., v1.17.0):

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
d cd googletest
```
</Step>

<Step title="Create a Build Directory">
Create a dedicated `build` directory to isolate build files:

```bash
mkdir build
cd build
```
</Step>

<Step title="Generate Build Files with CMake">
Run CMake to prepare native build files:

```bash
cmake ..
```

To build **only GoogleTest** without GoogleMock, add the option:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

</Step>

<Step title="Build the Libraries">
On Linux/macOS, run:

```bash
make
```

On Windows with Visual Studio, open the generated solution file (`gtest.sln`) and build within the IDE.

On macOS with Xcode, open the generated `.xcodeproj` and build.

</Step>

<Step title="Install System-wide (Optional)">
To install GoogleTest and GoogleMock to system directories (default: `/usr/local`), run with administrative privileges:

```bash
sudo make install
```

This installs headers and libraries where CMake `find_package` can detect them.

</Step>
</Steps>


## 3. Using GoogleTest in an Existing CMake Project

There are two ways to incorporate GoogleTest into your own CMake project:

### Option A: Link Against Installed GoogleTest

1. Ensure GoogleTest is installed on your system.
2. Use `find_package` in your `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)
```

3. Link your test executable:

```cmake
add_executable(your_test test.cpp)
target_link_libraries(your_test GTest::gtest_main)
add_test(NAME your_test COMMAND your_test)
```

### Option B: Build GoogleTest as a Subdirectory

This method ensures GoogleTest is compiled with the same compiler and flags as your project.

1. Add GoogleTest as a git submodule or place source code in a known location.
2. Add the following to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)   # For Windows dynamic CRT compatibility
FetchContent_MakeAvailable(googletest)

add_executable(your_test test.cpp)
target_link_libraries(your_test gtest_main)
add_test(NAME your_test COMMAND your_test)
```

3. Use CMake 3.14 or higher to utilize `FetchContent_MakeAvailable()`.


## 4. Platform-Specific Notes

### Linux/macOS

- Use `make` after running `cmake`.
- Make sure pthread development files are installed.
- Use `sudo make install` to install to system paths.

### Windows

- Generate Visual Studio solution using CMake.
- Be aware of runtime linkage conflicts:

  - If linking dynamically, define `gtest_force_shared_crt` to ON.
  - Ensure your project and GoogleTest use consistent runtime libraries.

### macOS

- Use Xcode project generated by CMake.
- Build and run tests in Xcode or via command line.


## 5. Using GoogleMock

GoogleMock is included along with GoogleTest when you build from the googletest repository.

- Linking against `gmock_main` provides a `main()` function that automatically runs all tests.
  
- If you want to use GoogleMock without the `main()` function (for custom runners), link against `gmock` instead.

Example linking to GoogleMock with main:

```cmake
target_link_libraries(your_test gmock_main)
```


## 6. Advanced Build Options

- **Shared Library Builds:**

  To build GoogleTest as shared libraries (DLLs on Windows), add:

  ```bash
  -DBUILD_SHARED_LIBS=ON
  ```

- **Multi-threading:**

  GoogleTest is thread-safe when linking with pthread. The CMake tooling handles this automatically.

- **Control Macros:**

  Use `GTEST_XYZ` macros to enable or disable features at compile time.


## 7. Verification and Troubleshooting

### Verify the Installation

After building and installing:

- Check that libraries (`libgtest.a`, `libgmock.a` or their dynamic equivalents) exist in the install lib directory.
- Ensure headers are installed and accessible by your project.
- Confirm sample tests compile and run correctly.

### Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake Cannot Find GoogleTest">
Make sure you:

- Installed it system-wide or specified the correct path.
- Set the `CMAKE_PREFIX_PATH` to the install directory.

Example:

```bash
cmake -DCMAKE_PREFIX_PATH=/usr/local ..
```
</Accordion>
<Accordion title="RuntimeLibrary Mismatch on Windows">
This happens when your project uses dynamic CRT but GoogleTest is built with static CRT. Fix it by:

- Enabling `gtest_force_shared_crt` option in CMake.
- Rebuilding GoogleTest.
</Accordion>
<Accordion title="Linker Errors Related to pthread">
On Unix-like systems, ensure you link your test executables with `-pthread` or equivalent.

If using custom build scripts, manually add pthread flags.
</Accordion>
</AccordionGroup>


---

## Additional Resources

- [GoogleTest Main Repository](https://github.com/google/googletest)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [GoogleMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [CMake Documentation](https://cmake.org/documentation/)


---

By following this guide, you will have GoogleTest and GoogleMock installed and ready for integration into your C++ testing workflow, empowering you to write, run, and scale your tests efficiently across platforms.


<Check>
Make sure your development environment meets all prerequisites before starting the installation.
</Check>
<Check>
Verify compiler flags and runtime library linkage to avoid build or linking errors, especially on Windows.
</Check>
<Check>
Choose between standalone build or embedded build in your CMake project according to your project needs and CI workflows.
</Check>

---