---
title: "Installing GoogleTest"
description: "Step-by-step instructions for installing GoogleTest using CMake, Bazel, or manual builds. This page addresses the needs of Linux, macOS, and Windows users, and guides you through fetching source code or integrating with your build system."
---

# Installing GoogleTest

Step-by-step instructions for installing GoogleTest using CMake, Bazel, or manual builds. This guide supports Linux, macOS, and Windows users, guiding you through fetching the source code and integrating GoogleTest into your build system.

---

## 1. Prerequisites & System Requirements

- **Supported Platforms:** Linux, macOS, Windows (Visual Studio supported), embedded systems with C++17 compatible compilers.
- **Build Tools:**
  - CMake (version 3.13 or later recommended)
  - Git (to clone sources)
  - Bazel (optional)
  - System C++ compiler supporting C++17
- **Permissions:** Write access to directories where you will build and install GoogleTest.

<Tip>
Ensure your compiler supports at least C++17; GoogleTest requires this for building.
</Tip>

---

## 2. Fetching GoogleTest Source Code

You have several options to obtain GoogleTest:

### Option A: Clone from GitHub

```bash
# Clone the repository at the stable release tag
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### Option B: Download a Zip Archive

Download a zip of the release from the [GoogleTest GitHub releases page](https://github.com/google/googletest/releases).

### Option C: Incorporate via CMake FetchContent (recommended for projects using CMake)

Add the following to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Windows runtime compatibility
FetchContent_MakeAvailable(googletest)
```

This approach keeps GoogleTest in sync and integrates it robustly.

---

## 3. Building GoogleTest with CMake

### Step 1: Create Build Directory

```bash
mkdir build
cd build
```

### Step 2: Configure Build

- To build both GoogleTest **and** GoogleMock (default):

```bash
cmake ..
```

- To build **only** GoogleTest (skip GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

> This command generates native build files (Makefiles on Linux/macOS, Visual Studio solution on Windows).

### Step 3: Build

#### On Linux/macOS

```bash
make
```

#### On Windows

Open the generated `.sln` file with Visual Studio and build the solution.

### Step 4: (Optional) Install

If you want to install globally (requires admin/root privileges):

```bash
sudo make install
```

This installs headers and libraries by default under `/usr/local`.

---

## 4. Using GoogleTest with Your Project

### Option A: Linking Pre-built GoogleTest

If you installed or built GoogleTest separately, use `find_package`:

```cmake
find_package(GTest REQUIRED)
add_executable(your_test your_test.cc)
target_link_libraries(your_test PRIVATE GTest::gtest_main)
enable_testing()
add_test(NAME your_test COMMAND your_test)
```

### Option B: Adding GoogleTest as Subdirectory

If GoogleTest source is within your project tree:

```cmake
add_subdirectory(path/to/googletest)
add_executable(your_test your_test.cc)
target_link_libraries(your_test PRIVATE gtest_main)
enable_testing()
add_test(NAME your_test COMMAND your_test)
```

<Tip>
Using `gtest_main` provides a main() function so you donâ€™t have to write one for test binaries.
</Tip>

---

## 5. Using pkg-config with GoogleTest (Advanced)

GoogleTest provides `pkg-config` files for easier integration on Linux and *nix systems.

### Step 1: Verify `pkg-config` availability

```bash
pkg-config --exists gtest_main && echo "Found gtest_main"
```

### Step 2: Use `pkg-config` in your build system

#### Example with CMake

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})

enable_testing()
add_test(first_and_only_test testapp)
```

### Step 3: Troubleshoot pkg-config not finding GoogleTest

If you installed GoogleTest in a non-standard directory (e.g., `/usr/local`), set the `PKG_CONFIG_PATH` environment variable:

```bash
export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
```

For cross-compilation, set these environment variables accordingly:

```bash
export PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=yes
export PKG_CONFIG_ALLOW_SYSTEM_LIBS=yes
export PKG_CONFIG_SYSROOT_DIR=/path/to/sysroot
export PKG_CONFIG_LIBDIR=$PKG_CONFIG_SYSROOT_DIR/usr/lib64/pkgconfig
```

---

## 6. Building with Bazel

GoogleTest integrates with Bazel, but this requires Bazel workspace setup.

Add `@com_google_googletest` dependency in your `WORKSPACE` file:

```bazel
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.10.0.zip"],
    strip_prefix = "googletest-release-1.10.0",
)
```

Then add dependencies to your `BUILD` files preventing linking errors.

---

## 7. Common Pitfalls and Tips

- **Compiler mismatch:** Ensure the same compiler and flags are used when building GoogleTest and your tests.
- **Visual Studio runtime mismatch:** Use the CMake option `gtest_force_shared_crt` to match your project's runtime.
- **C++ standard enforcement:** Add `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)` in your project `CMakeLists.txt`.
- **pthread linking:** On POSIX systems, linking with `-pthread` is required; CMake build scripts handle this automatically.

<Tip>
When using `pkg-config`, prefer `target_compile_options` over `target_include_directories` to properly inherit threading and macro flags.
</Tip>

---

## 8. Verification

After building GoogleTest and your tests, run:

```bash
ctest
# or directly execute your test binary
./your_test
```

You should see output showing test execution and a summary of passed/failed tests.

---

## 9. Troubleshooting

<AccordionGroup title="Common Installation Issues">
<Accordion title="CMake cannot find GoogleTest">

- Ensure you have run `cmake ..` in the GoogleTest source directory.
- If using `find_package(GTest)`, confirm `GTest` is installed and pkg-config paths are set.

</Accordion>
<Accordion title="Linker errors on Windows related to runtime library mismatch">

- Use the CMake option `-Dgtest_force_shared_crt=ON` to align runtimes.

</Accordion>
<Accordion title="Missing pthread errors when compiling on Linux/macOS">

- Make sure to link with `-pthread`. Using the provided CMake scripts handles this automatically.

</Accordion>
</AccordionGroup>

---

## 10. Next Steps

- Proceed to [Configuring Your Project for GoogleTest](/getting-started/configuration-first-test/project-setup) to integrate tests into your build.
- Learn to [Write and Run Your First Test](/getting-started/configuration-first-test/first-successful-run).
- Explore [Troubleshooting Installation and Configuration](/getting-started/troubleshooting-validation/common-setup-issues) for common setup fixes.

---

## Additional Resources

- Official GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- pkg-config Cross-Compilation Guide: <https://autotools.io/pkgconfig/cross-compiling.html>
- GoogleTest Primer: [Getting Started with Tests](primer.md)


---

This completes your step-by-step installation guide for GoogleTest.

If you encounter issues, please consult the troubleshooting page or reach out to the community support channels.