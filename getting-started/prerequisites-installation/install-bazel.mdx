---
title: "Installing with Bazel"
description: "Guides users through the process of adding GoogleTest as a dependency in Bazel, including setup in the `WORKSPACE` and build files. Emphasizes best practices for integrating into modern Bazel-based codebases."
---

# Installing with Bazel

This guide helps you integrate GoogleTest into your Bazel-based C++ projects by setting it up as a workspace dependency and configuring your build files for testing.

GoogleTest works seamlessly with Bazel to provide reliable and efficient C++ unit testing using modern build practices.

---

## 1. Prerequisites

Before starting, ensure the following are in place:

- **Operating System:** Compatible with Linux, macOS, or Windows.
- **C++ Compiler:** Supports at least the C++17 standard.
- **Bazel Version:** Bazel 7.0 or later installed and properly configured.

For detailed platform compatibility, see the [Supported Platforms & Environments](../overview/integration-and-ecosystem/platforms-environments.md) page.

If Bazel is not installed, visit the [Bazel installation guide](https://bazel.build/install) for instructions.

<Check>
Confirm Bazel installation by running:

```bash
bazel version
```
Output should confirm version 7.0 or higher.
</Check>

---

## 2. Set Up a Bazel Workspace

### Step 1: Create Your Workspace Directory

Open a terminal and create a new workspace directory for your project:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Add `MODULE.bazel` to Declare GoogleTest Dependency

In your workspace root, create a file named `MODULE.bazel` with the following content to declare GoogleTest as a module dependency:

```python
# MODULE.bazel

# Choose an appropriate stable version of GoogleTest from the Bazel Central Registry
bazel_dep(name = "googletest", version = "1.17.0")
```

> **Tip:** Check the latest available GoogleTest version at [Bazel Central Registry - googletest](https://registry.bazel.build/modules/googletest) and update accordingly.

---

## 3. Create and Configure Your Test

### Step 1: Create a GoogleTest Test Source File

Create a file named `hello_test.cc` with basic test assertions:

```cpp
#include <gtest/gtest.h>

// Demonstrate some basic assertions.
TEST(HelloTest, BasicAssertions) {
  // Expect two strings not to be equal.
  EXPECT_STRNE("hello", "world");
  // Expect equality.
  EXPECT_EQ(7 * 6, 42);
}
```

This file illustrates GoogleTest's core assertion macros to verify expected behavior.

### Step 2: Write the Bazel Build Target

Create a `BUILD` file in the same directory as `hello_test.cc` with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This Bazel target builds the test executable and links it against GoogleTest libraries:

- `@googletest//:gtest` provides GoogleTest library code.
- `@googletest//:gtest_main` supplies the main() function.

### Step 3: Build and Run Your Test

Build and test your code with the following command:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

**Expected output:**

```
INFO: Build completed successfully, 27 total actions
//:hello_test                                                     PASSED in 0.1s
```

You should see confirmation that the test passed.

<Check>
If your build fails, verify that:

- You are using C++17 compatible compiler options.
- The Bazel workspace is configured correctly and dependencies are reachable.
- GoogleTest version in `MODULE.bazel` matches available registry versions.
</Check>

---

## 4. Best Practices and Next Steps

- Regularly update the GoogleTest version in your `MODULE.bazel` file to stay current with improvements and bug fixes.

- Explore [Writing and Running Your First Test](../getting-started/first-test-validation/writing-running-first-test.md) to deepen your understanding of GoogleTest assertions and test fixtures.

- Use the [Feature Overview](../overview/essentials-and-concepts/feature-overview.md) to learn how to leverage parameterized tests, typed tests, and GoogleMock integration within Bazel.

- Review [Configuring GoogleTest in Your Project](../getting-started/configuration-troubleshooting/configuration-basics.md) for customization options.

- For troubleshooting common issues with Bazel and GoogleTest, visit [Common Setup Issues & Troubleshooting](../getting-started/configuration-troubleshooting/common-issues-troubleshooting.md).

---

## 5. Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest) — Official source code and latest releases.

- [Bazel C++ Tutorial](https://docs.bazel.build/versions/main/tutorial/cpp.html) — Learn how to write BUILD files with Bazel.

- [Supported Platforms & Environments](../overview/integration-and-ecosystem/platforms-environments.md) — Details on environment compatibility.

- [Getting Started with CMake](install-cmake.md) — Alternative build system guide.

---

Congratulations! You have successfully installed and run GoogleTest using Bazel. Your project is now set for efficient, integrated C++ unit testing within a modern build system.
