---
title: "Install with Bazel"
description: "Walks users through setting up GoogleTest using Bazel, including dependencies, WORKSPACE rules, and integration into Bazel build systems for rapid test setup."
---

# Install GoogleTest with Bazel

This guide walks you through setting up GoogleTest in your C++ projects using the Bazel build system. Bazel offers a robust, fast build environment ideal for integrating testing frameworks like GoogleTest, enabling you to write, build, and run tests with ease and consistency.

---

## 1. Prerequisites & Environment Setup

Before starting, ensure your development environment fulfills the following:

- **Operating System:** Compatible with Linux, macOS, or Windows.
- **Compiler:** A C++ compiler supporting at least C++17 standard (e.g., GCC 7+, Clang, or MSVC 2019+).
- **Bazel Version:** Install Bazel 7.0 or later. Refer to the [Bazel installation guide](https://bazel.build/install) for your platform.

> <Note>
> Bazel commands in this guide are cross-platform and work similarly on Unix shells and Windows command prompts.
> </Note>

---

## 2. Setting Up Your Bazel Workspace for GoogleTest

To use GoogleTest with Bazel, you need a workspace directory that Bazel manages for your project and dependencies.

### Step 1: Create Your Workspace Directory

Open your terminal or command prompt and execute:

```sh
mkdir my_workspace && cd my_workspace
```

### Step 2: Add a MODULE.bazel File

In Bazel 7.0 or newer, the recommended way to manage external dependencies is via the Bazel Central Registry using the `MODULE.bazel` file.

Create a file `MODULE.bazel` at the root of your workspace with the following content:

```python
# MODULE.bazel

# Specify the current stable GoogleTest version.
bazel_dep(name = "googletest", version = "1.17.0")
```

This declares a dependency on GoogleTest version 1.17.0 and enables Bazel to fetch it automatically.

### Step 3: Verify Your `MODULE.bazel` File

After saving, your workspace should have a `MODULE.bazel` file with the above contents — this is crucial for proper dependency resolution.

---

## 3. Writing and Building Your First GoogleTest Test

With your workspace ready, you can create and run a simple test to ensure everything is set up correctly.

### Step 1: Create a Test Source File

Create a file named `hello_test.cc` in your workspace with this sample code:

```cpp
#include <gtest/gtest.h>

// Basic test demonstrating two assertions.
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Strings are not equal.
  EXPECT_EQ(7 * 6, 42);             // Numeric equality.
}
```

### Step 2: Add a Bazel BUILD File

Create a file named `BUILD` in the same directory with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

- `cc_test` declares a test target for Bazel.
- It depends on GoogleTest libraries pulled from the Bazel Central Registry.

> <Tip>
> Adjust the `size` attribute according to your test’s scope (`small` is suitable for quick unit tests).
> </Tip>

### Step 3: Build and Run Your Test

Run the following command to build the test and run it immediately:

```sh
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

**Expected output snippet:**

```
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
```

This confirms your GoogleTest setup with Bazel is working correctly.

---

## 4. Best Practices & Tips

- **Specify C++ Standard Explicitly:** Use `--cxxopt=-std=c++17` for GCC/Clang or `--cxxopt=/std:c++17` for MSVC when running Bazel to ensure compatibility with GoogleTest.
- **Use Bazel’s Central Registry:** Always declare dependencies in `MODULE.bazel` to leverage Bazel’s efficient module management.
- **Test Output Visibility:** Use `--test_output=all` during development to see detailed test execution info.
- **Parallel Testing:** Bazel executes tests in parallel by default, improving build and test times.

---

## 5. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Bazel GoogleTest Setup">
<Accordion title="GoogleTest Version Not Found">
Ensure your `MODULE.bazel` file specifies a valid GoogleTest version available in the Bazel Central Registry. Check https://registry.bazel.build/modules/googletest for the latest versions.
</Accordion>
<Accordion title="Compiler Does Not Support C++17">
Verify your compiler version is new enough to support at least C++17. Update your compiler or toolchain accordingly.
</Accordion>
<Accordion title="Tests Not Running or Not Found">
Make sure your `BUILD` file uses `cc_test` and that test sources are properly included. Check for typos in target names.
</Accordion>
<Accordion title="Bazel Command Fails with Permissions or Network Errors">
Ensure Bazel has network access to download dependencies. Check firewall or proxy settings.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

- Explore [Writing and Running Your First Test](/getting-started/initial-setup-usage/writing-your-first-test) for test authoring techniques.
- Dive into the [GoogleTest Primer](/guides/getting-started/primer) to sharpen your testing skills.
- Learn to integrate GoogleMock with Bazel for mocking in tests.
- Review the [Continuous Integration with GoogleTest](/guides/integration-scenarios/ci-integration) guide for automated pipelines.

---

## 7. Additional References

- GoogleTest GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- Bazel Official Documentation: [https://bazel.build/](https://bazel.build/)

---

Congratulations! You now have GoogleTest successfully integrated with Bazel and can start writing efficient, automated C++ tests.


---