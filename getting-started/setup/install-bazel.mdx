---
title: "Installation with Bazel"
description: "Guide users through setup and configuration for GoogleTest using Bazel, from repository integration to running their first test. Address Bazel-specific requirements and validation steps."
---

# Installation with Bazel

This guide walks you through the process of setting up and configuring GoogleTest using the Bazel build system. From establishing your workspace to writing your first test, you will understand exactly how to integrate and run GoogleTest in a Bazel environment, with a focus on Bazel-specific nuances and validation.

---

## 1. Prerequisites

Before starting, ensure your development environment meets the following requirements:

- **Operating System**: Linux, macOS, or Windows.
- **C++ Compiler**: Must support at least C++17 standards (e.g., GCC, Clang, MSVC).
- **Bazel Version**: Bazel 7.0 or higher is required.

> For details on supported platforms and compilers, see the [Supported Platforms](platforms.md) documentation.
>
> If Bazel is not installed, refer to the official [Bazel installation guide](https://bazel.build/install).

---

## 2. Setting Up Your Bazel Workspace

A Bazel workspace is a directory that organizes your source files and dependencies.

### Step 1: Create Your Workspace Directory
Open your terminal or command prompt and run:

```bash
$ mkdir my_workspace && cd my_workspace
```

### Step 2: Declare GoogleTest Dependency Using MODULE.bazel
Create a `MODULE.bazel` file in the root of your workspace with the following content:

```python
# MODULE.bazel

# Choose the latest stable version available at https://registry.bazel.build/modules/googletest
bazel_dep(name = "googletest", version = "1.17.0")
```

This configuration pulls GoogleTest via Bazel Central Registry using Bzlmod, Bazel's modules system.

> **Tip:** Always confirm the latest GoogleTest version at the registry to stay current.

---

## 3. Creating and Building Your First Test

Now, you will add test code and build it using Bazel.

### Step 1: Create a Test Source File
Create `hello_test.cc` in your workspace directory:

```cpp
#include <gtest/gtest.h>

// Simple tests demonstrating assertions
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Verify strings are different
  EXPECT_EQ(7 * 6, 42);              // Verify arithmetic equality
}
```

### Step 2: Create the BUILD File
In the same directory, create a file named `BUILD` with the following declaration:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This Bazel `cc_test` rule defines your test binary, linking it to GoogleTest's core and main execution libraries.

### Step 3: Build and Run Your Test
Run the following command in your terminal:

```bash
$ bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- `--cxxopt=-std=c++17` ensures the C++17 standard is used.
- `--test_output=all` shows all test output for immediate feedback.

### Expected Output
You should see:

```
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[  PASSED  ] 1 test.
//:hello_test                                                     PASSED in 0.1s
```

Your test built and passed successfully.

> **Note:** On Windows with MSVC, replace `--cxxopt=-std=c++17` with `--cxxopt=/std:c++17`.

---

## 4. Validation and Best Practices

### Validate Your Setup
- Ensure Bazel is properly installed by running `bazel version`.
- Confirm the C++ compiler supports C++17 and that Bazel uses the correct compiler options.
- Verify that your workspace directory includes `MODULE.bazel`, `BUILD`, and your test files.

### Common Pitfalls
- **Dependency errors:** Make sure your Bazel workspace is correctly structured with the `MODULE.bazel` file.
- **Compiler mismatches:** Double-check the C++ version flags according to your compiler.
- **Test not found or not run:** Ensure the `cc_test` rule has accurate dependencies and file names.

---

## 5. Next Steps

- Begin writing more comprehensive tests using the [GoogleTest Primer](primer.md).
- Explore advanced GoogleTest features like fixtures, parameterized tests, and mocking with GoogleMock.
- Review the [Running Tests](running-tests.md) guide for detailed execution and test harness options.
- Consult the [Validating Setup and Troubleshooting](validating-setup.md) document for resolving integration issues.

---

## Summary
You have now successfully:

- Set up a Bazel workspace with GoogleTest dependency via `MODULE.bazel`.
- Written a basic C++ test file using GoogleTest.
- Created a Bazel `BUILD` file to build and link your tests.
- Built and ran your first test binary using Bazel.

This foundation allows you to integrate GoogleTest into your Bazel projects smoothly and scale your test suite efficiently.

---

For additional resources and guidance, see:

- [Quickstart: Bazel](quickstart-bazel.md)
- [Prerequisites & System Requirements](prerequisites.md)
- [Configuring Your Test Project](configuring-test-project.md)
- [Building and Running Your First Test](running-tests.md)


<Tip>
If you encounter build errors related to missing dependencies, verify your Bazel version is at least 7.0 and check for typographical errors in your `MODULE.bazel` and `BUILD` files.
</Tip>

<Warning>
Using an older Bazel version or unsupported compilers may cause build or runtime failures. Always target Bazel 7.0+ with a modern C++17-compliant compiler.
</Warning>

<Note>
The Bazel Central Registry and Bzlmod mechanisms simplify dependency management and minimize manual setup.
Avoid mixing legacy `WORKSPACE` files with `MODULE.bazel` for consistency.
</Note>


---