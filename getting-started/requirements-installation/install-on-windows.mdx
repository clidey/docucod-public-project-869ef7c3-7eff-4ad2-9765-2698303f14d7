---
title: "Installing on Windows"
description: "Follow a tailored guide for getting GoogleTest and GoogleMock running on Windows systems, including Visual Studio integration, CMake usage, and Bazel options. Learn to resolve frequent Windows setup pitfalls."
---

# Installing GoogleTest and GoogleMock on Windows

Follow this tailored guide to get GoogleTest and GoogleMock running seamlessly on Windows systems. This includes setting up with Visual Studio, using CMake for builds, and leveraging Bazel options if preferred. Practical tips for avoiding common Windows-specific pitfalls are included to ensure a smooth setup.

---

## 1. Prerequisites & System Requirements

- **Supported Compilers:** Visual Studio 2015 (Update 3) or later, compatible MSVC toolchains supporting C++17.
- **C++ Standard:** Ensure your environment supports C++17, as GoogleTest requires it.
- **Build Tools:** Visual Studio with C++ workload installed, CMake 3.16 or newer.
- **System:** Windows Desktop (including Windows 10 and later). Windows Mobile variants are not supported.

<Tip>
Verify that the Visual Studio Installer includes "Desktop development with C++" workload and that your PATH environment variables include necessary developer toolchains.
</Tip>

---

## 2. Installation Instructions

### 2.1 Cloning the Repository

Open PowerShell or Command Prompt and run:

```powershell
git clone https://github.com/google/googletest.git -b main
download = googletest
```

This clone contains both GoogleTest and GoogleMock.

### 2.2 Using CMake with Visual Studio

1. Navigate into the cloned directory:

```powershell
cd googletest
mkdir build
cd build
```

2. Generate Visual Studio project files with CMake:

```powershell
cmake .. -G "Visual Studio 16 2019" -A x64
```

> Replace "Visual Studio 16 2019" with your installed version generator (use `cmake --help` to see options).

3. Build the solution in Release or Debug mode:

```powershell
cmake --build . --config Release
```

Microsoft Visual Studio projects will be generated for the entire testing framework.

### 2.3 Alternative: Building Only GoogleTest

To exclude GoogleMock and build only GoogleTest:

```powershell
cmake .. -DBUILD_GMOCK=OFF
cmake --build . --config Release
```

### 2.4 Installing the Libraries

Optionally, you may install the compiled libraries system-wide (requires admin rights):

```powershell
cmake --install . --config Release
```

This places headers and binaries in the default CMake install directories (e.g., `C:\Program Files\googletest`).

### 2.5 Using Bazel on Windows

GoogleTest and GoogleMock support Bazel builds, which provide an alternative, hermetic build environment:

- Ensure Bazel is installed for Windows.
- Use existing Bazel build rules for `@com_google_googletest` as dependency.
- For detailed Bazel instructions, refer to the [GoogleTest Bazel documentation](https://github.com/google/googletest/blob/main/README.md#bazel-build).

---

## 3. Configuration and Setup

### 3.1 Visual Studio Integration

- Open the generated `.sln` file in Visual Studio.
- Ensure the C++17 standard is active:
  - Go to Project Properties > C/C++ > Language > C++ Language Standard
  - Select "ISO C++17 Standard (`/std:c++17`)" or later.
- Check runtime library settings to avoid conflicts:
  - Under C/C++ > Code Generation > Runtime Library
  - GoogleTest by default uses the static runtime (`/MT`).
  - If your project uses dynamic runtime (`/MD`), set the CMake option `-Dgtest_force_shared_crt=ON` to align runtime linkage.

### 3.2 Linking Your Tests

- Link your test executable against `gtest_main.lib` or `gmock_main.lib` (depending on whether you want GoogleMock) to get the default main function.

### 3.3 Using CMake Find Package

If GoogleTest/GoogleMock is installed, you can include it in your own CMake projects via:

```cmake
find_package(GTest REQUIRED)
add_executable(my_test ...)
target_link_libraries(my_test GTest::gtest_main GTest::gmock_main)
```

---

## 4. Running Your First Test

### 4.1 Example Test Project Setup

Create a test `example_test.cc` with a simple test case:

```cpp
#include "gtest/gtest.h"

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}
```

### 4.2 Build and Launch

- Add the test source to your Visual Studio project or your CMake test executable.
- Build the test executable.

### 4.3 Running Tests

In Visual Studio:
- Select "Debug" or "Release" configuration.
- Run the test executable.
- The output window shows test results, and tests pass if output ends with "[  PASSED  ] 1 test."

From the command line:

```powershell
example_test.exe
```

Expected output includes test progress and summary.

### 4.4 About Main() Function

GoogleMock supplies a main provided by `gmock_main.lib`. Linking with this library avoids writing your own main. The internal implementation initializes GoogleMock and GoogleTest before running all tests.

---

## 5. Common Pitfalls and Troubleshooting

### 5.1 Runtime Library Mismatch

- Error: Linker LNK2038 runtime library mismatch.
- Solution: Enable static runtime linking for your entire solution or use `-Dgtest_force_shared_crt=ON` with CMake.

### 5.2 Missing `main()` Symbol

- Occurs if you link against `gmock.lib` or `gtest.lib` but not `gmock_main.lib` or `gtest_main.lib`.
- Solution: Link your test target with the appropriate `*_main` library.

### 5.3 Unicode and Entry Point

- On Windows, Google's `gmock_main.cc` defines `main()` instead of `_tmain()` to avoid Visual Studio linker issues with Unicode entry points.
- Do not redefine `main()` yourself when linking with `gmock_main.lib`.

### 5.4 Thread Safety Notes

GoogleTest is thread-safe on Windows desktop when using MSVC compilers.

### 5.5 Building on MinGW or Non-MSVC compilers

- Pthreads support is not robust on MinGW on Windows; consider MSVC for best integration.

---

## 6. Additional Resources and Next Steps

- [GoogleTest README](https://github.com/google/googletest/blob/main/README.md) — official repository readme.
- [Configuring Your Project](https://example.com/getting-started/initial-setup-usage/project-configuration) — next step for integrating tests.
- [Writing Your First Test](https://example.com/guides/getting-started-with-googletest/writing-your-first-test) — detailed tutorial.
- [Troubleshooting Guide](https://example.com/getting-started/troubleshooting-faq/common-install-issues) — fixing common problems.

<Tip>
For smooth integration, ensure your test projects and GoogleTest builds use consistent C++ standards, compiler, and runtime settings.
</Tip>

---

With these instructions, you'll have GoogleTest and GoogleMock installed and running on your Windows machine with Visual Studio and CMake, ready to write and run your first tests with confidence.
