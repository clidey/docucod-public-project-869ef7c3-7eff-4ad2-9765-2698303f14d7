---
title: "Solving Common Setup Problems"
description: "Covers frequent installation and configuration errors, such as compiler incompatibilities, linking failures, and misconfigured include paths. Provides clear troubleshooting steps for each symptom."
---

# Solving Common Setup Problems

This guide addresses frequent installation and configuration errors encountered when setting up GoogleTest and GoogleMock. If you've experienced issues such as compiler incompatibilities, linking failures, or misconfigured include paths, this document will guide you through clear, actionable troubleshooting steps.

---

## 1. Diagnosing Compiler Compatibility Issues

GoogleTest and GoogleMock require a modern C++ compiler that supports at least C++11. Ensure your compiler version is compatible.

### Steps to Verify and Fix:

1. **Check Compiler Version**

   Run:
   ```sh
   g++ --version
   clang++ --version
   cl
   ```
   Confirm your compiler version meets GoogleTest requirements (commonly GCC 4.8+, Clang 3.3+, MSVC 2015+).

2. **Review C++ Standard Flags**

   Ensure your build system uses the `-std=c++11` or higher flag. For example, with `g++` or `clang++`:
   ```sh
   g++ -std=c++11 ...
   ```

3. **Common Pitfall: Mixing C++ Standards**  
   Avoid compiling GoogleTest source files with a different C++ standard than your project. Consistency prevents ABI incompatibilities.

<Tip>
If your compiler is outdated, upgrade it or switch to a newer toolchain that supports C++11 or later.
</Tip>

---

## 2. Resolving Linking Failures

Linking errors are common when GoogleTest or mock libraries are not correctly referenced.

### Common Symptoms:
- Undefined references to `testing::InitGoogleTest` or `testing::InitGoogleMock`
- Missing symbols like `MOCK_METHOD` implementations

### Steps to Fix:

1. **Link Against GoogleTest and GoogleMock Libraries**

   Ensure you add the googletest and googlemock static or shared libraries to your linker command. Example with `g++`:

   ```sh
   g++ test_file.cc -lgtest -lgmock -pthread
   ```

   In CMake, link with:

   ```cmake
   target_link_libraries(your_test_target gtest gmock pthread)
   ```

2. **Include Mock and Test Sources If Built from Source**

   If you build GoogleTest from source, make certain test sources (`gtest-all.cc`, `gmock-all.cc`) are part of the compilation units or linked properly.

3. **Verify Library Paths**

   If your libraries are installed in non-standard locations, specify library paths explicitly via `-L/path/to/libs` and ensure linker finds them.

4. **Order Matters**

   The order of arguments to the linker can affect symbol resolution. Place GoogleTest and GoogleMock libraries after your objects.

<Warning>
Linking errors often arise from missing `-pthread` or inconsistent linkage between static and shared versions of libraries.
</Warning>

---

## 3. Fixing Include Path and Header Issues

Setup problems often involve misconfigured include paths causing headers like `gtest/gtest.h` or `gmock/gmock.h` not found errors.

### Troubleshooting Steps:

1. **Check Include Paths**

   Add the appropriate include directory paths to your compiler flags. For example:

   ```sh
   g++ -I/path/to/googletest/include -I/path/to/googlemock/include ...
   ```

2. **Verify Installation Structure**

   Make sure the include directories contain the required headers:
   - `gtest/gtest.h`
   - `gmock/gmock.h`

3. **Use External Installation or FetchContent Carefully**

   When using CMake’s `FetchContent` or downloading prebuilt binaries, verify that include directories are correctly exposed as targets or variables.

4. **Avoid Conflicts**

   If multiple versions of GoogleTest or GoogleMock exist, clean the build environment or specify the correct include path explicitly.

<Note>
You can verify include paths chosen by your build tool by enabling verbose compilation (e.g., `make VERBOSE=1` for CMake).
</Note>

---

## 4. Common Build System Gotchas

### CMake

- Use **`find_package(GTest REQUIRED)`** and link via `target_link_libraries` to ensure correct setup.
- Avoid multiple inclusions of GoogleTest sources if depending on multiple targets.

### Bazel

- Declare googletest and googlemock dependencies appropriately in `MODULE.bazel` or `WORKSPACE`.
- Ensure the source files are included correctly and linked.

### Manual Build

- Compile GoogleTest source files (`gtest-all.cc`, `gmock-all.cc`) together with your tests.
- Link against pthread on POSIX systems.

---

## 5. Practical Tips and Best Practices

- **Use latest stable releases**: Always use the most current GoogleTest release to minimize compatibility issues.
- **Build googletest and googlemock as a unified library**: Simplifies linkage.
- **Isolate Mock Definitions**: Keep your mock classes in separate headers to avoid complex build dependencies.
- **Run `--gmock_verbose=info` for insight**: If you face obscure runtime issues, this flag provides verbose logs.

---

## 6. Troubleshooting Common Errors

<AccordionGroup title="Troubleshooting Common GoogleTest & GoogleMock Setup Problems">
<Accordion title="Compilation Fails with 'expected unqualified-id' or 'std::string' Not Found">
Ensure your compiler supports C++11 and that you've set the proper `-std=c++11` or later flag for all compilation units.
</Accordion>

<Accordion title="Linker Errors about Missing Symbols in gmock or gtest">
Verify linking with `-lgmock -lgtest -pthread`. If building from source, confirm you compiled and linked both `gmock-all.cc` and `gtest-all.cc`.
</Accordion>

<Accordion title="Headers Not Found for gtest/gtest.h or gmock/gmock.h">
Add the correct `-I` include paths pointing to the directories containing those headers. Check your build configuration and environment variables.
</Accordion>

<Accordion title="Mock Methods Seem Not to Be Called or Verified">
Ensure `EXPECT_CALL()` statements are set *before* exercising the code. Verify mock objects aren't leaked — leaks prevent automatic verification. Call `Mock::VerifyAndClearExpectations(&mock)` if needed.
</Accordion>

<Accordion title="Warning: Uninteresting Function Call Encountered">
Consider adding a catch-all expectation with `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` if you want to suppress warnings for uninteresting calls.
</Accordion>

</AccordionGroup>

---

## 7. Additional Verification and Cleanup

- Use `Mock::VerifyAndClearExpectations(&mock)` to explicitly verify expectations before mock object destruction.
- If you deliberately want to leak a mock object, suppress errors with `Mock::AllowLeak(&mock)`.

---

## 8. Support Resources

For more help:

- Explore [GoogleMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for beginner-friendly tutorials.
- Check the [Mocking Reference](https://google.github.io/googletest/reference/mocking.html) for detailed API info.
- Consult the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for advanced scenarios.
- Visit GitHub repository: [https://github.com/google/googletest](https://github.com/google/googletest)

---

## Related Pages

- [System Requirements & Supported Platforms](/getting-started/prerequisites-installation/requirements-platforms)
- [Installation with CMake](/getting-started/prerequisites-installation/installation-cmake)
- [Installation with Bazel](/getting-started/prerequisites-installation/installation-bazel)
- [Manual Installation & Source Build](/getting-started/prerequisites-installation/manual-installation)
- [Writing and Running Your First Test](/getting-started/configuration-first-test/writing-first-test)

---

If you encounter issues not resolved here, please consult the broader [Troubleshooting & FAQ](/getting-started/troubleshooting/faqs-onboarding) section or reach out to community forums.
