---
title: "Troubleshooting Common Issues"
description: "Addresses frequently encountered setup and build errors, such as C++ standard mismatches, missing dependencies, and build system misconfigurations, and links to the FAQ and relevant documentation."
---

# Troubleshooting Common Issues

This guide addresses the most frequently encountered setup and build errors with GoogleTest. Whether you're facing C++ standard mismatches, missing dependencies, or build system misconfigurations, this page provides actionable solutions and helpful pointers to get you past common hurdles quickly. For detailed FAQs and further assistance, relevant documentation links are provided.

---

## 1. Common Setup and Build Issues

### 1.1 C++ Standard Mismatch

**Symptom:** Errors during compilation citing incompatible C++ standards, missing C++17 features, or unexpected symbols.

**Cause:** GoogleTest requires a minimum of C++17 standard. Building with older standards leads to incompatibility.

**Resolution:**

- Verify your compiler supports C++17 or newer.
- Ensure your build system explicitly enables C++17. For example, add `-std=c++17` to your compiler flags.
- For CMake users, set:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- For Bazel users, ensure your `cc_binary` or `cc_library` rules specify `cxx_std = "c++17"`.

<Tip>
Always check build output for specific errors referencing standard library features or language constructs to pinpoint version conflicts.
</Tip>

### 1.2 Missing or Incorrect Dependencies

**Symptom:** Link errors or missing header errors such as missing standard headers or GoogleTest headers.

**Cause:** Your environment lacks required dependencies or the build system is not correctly locating GoogleTest headers and libraries.

**Resolution:**

- Confirm you have all prerequisites installed (see [System Requirements](/getting-started/setup-requirements/system-prerequisites)).
- When building manually or integrating GoogleTest as source, verify the include directories and link targets include GoogleTest paths.
- If using package managers (vcpkg, Conan), confirm packages are installed and referenced correctly.
- For CMake, use `find_package(GTest REQUIRED)` and link against `${GTEST_LIBRARIES}`.
- For Bazel, ensure `googletest` is correctly declared in your `WORKSPACE` and dependencies are listed.

<Warning>
Missing dependencies cause build failures and runtime errors. Double-check paths and install any required packages before building.
</Warning>

### 1.3 Build System Misconfigurations

**Symptom:** Build failures, skipping tests, or runtime errors with test discovery or execution.

**Cause:** Improper integration or configuration of GoogleTest in your build system.

**Resolution:**

- For **CMake**:
  - Use the provided CMake integration examples in [Installing with CMake](/getting-started/installation-initialization/install-cmake).
  - Ensure tests are enabled with `enable_testing()`.
  - Link your test targets with `GTest::GTest` and `GTest::Main`.

- For **Bazel**:
  - Follow the [Installing with Bazel](/getting-started/installation-initialization/install-bazel) instructions.
  - Declare correct dependencies and environment variables.

- When integrating manually, ensure source files and includes are correctly added.

<Tip>
Refer to the official build integration docs for your build tool to avoid common pitfalls.
</Tip>

---

## 2. Understanding and Resolving Runtime Test Failures

Once your tests build and run, if you encounter unexpected runtime failures or test misbehavior, consider the following frequent causes:

### 2.1 Mismatched or Missing Initialization

GoogleTest requires `::testing::InitGoogleTest()` to properly initialize flags and internal state.

- **Symptom:** Tests do not run, no tests found, or flags have no effect.
- **Resolution:**
  - Confirm your `main()` calls `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
  - If on Windows, use the wide-string overload if using Unicode arguments.

### 2.2 Tests Disabled by Default

Tests and test suites prefixed with `DISABLED_` do not run unless specifically enabled.

- Use `--gtest_also_run_disabled_tests` flag to include disabled tests.

### 2.3 Test Filtering and Sharding

Using filters (`--gtest_filter`) or sharding (`GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX`) can cause tests to be skipped unintentionally.

- Check active filters and shard indices.
- Verify that your test names match the filter patterns.

<Note>
When using filters, the format is a colon-separated list of positive patterns, optionally followed by a minus ('-') and a list of negative patterns.
</Note>

### 2.4 Fatal Failures and Exception Handling

- Fatal failures abort the current test, but not the entire test program.
- If exceptions are disabled, assertions that throw will terminate the program.
- Use `GTEST_FLAG_SET(catch_exceptions, true)` if you want exceptions caught and treated as test failures rather than terminating the program.

---

## 3. Tools for Diagnosing Errors

### 3.1 Using Scoped Traces

`SCOPED_TRACE` and `ScopedTrace` help identify where failures occur in nested calls by annotating failure messages.

Example:

```cpp
SCOPED_TRACE("Iteration " << i);
EXPECT_EQ(foo(i), expected);
```

### 3.2 Examining Stack Traces

When a test failure occurs, GoogleTest may include stack traces (if enabled via flags).

- Use `--gtest_stack_trace_depth=N` to set the number of stack frames printed.
- Enable `--gtest_show_internal_stack_frames` to see GoogleTest internal frames.

### 3.3 Recording Test Properties

Log additional diagnostic information using:

```cpp
testing::Test::RecordProperty("Key", "Value");
```

These are embedded in XML or JSON test output for post-mortem inspection.

---

## 4. Helpful Flags and Environment Variables

To control test execution and output behavior, use the following:

| Flag or Env Variable                     | Description                                          |
|----------------------------------------|------------------------------------------------------|
| `--gtest_filter` / `GTEST_FILTER`      | Specify which tests to run via positive and negative patterns |
| `--gtest_repeat` / `GTEST_REPEAT`      | Run tests multiple times (negative value means infinite) |
| `--gtest_shuffle` / `GTEST_SHUFFLE`    | Randomize test execution order                          |
| `--gtest_break_on_failure` / `GTEST_BREAK_ON_FAILURE` | Break into debugger on failure        |
| `--gtest_catch_exceptions` / `GTEST_CATCH_EXCEPTIONS` | Handle exceptions as failures        |
| `--gtest_stack_trace_depth`            | Number of stack trace frames to print on failure       |
| `--gtest_list_tests`                   | List all tests without running them                     |
| `--gtest_output` / `GTEST_OUTPUT`      | Generate XML or JSON test reports                       |

See the [Advanced Guide](../advanced.md#running-test-programs-advanced-options) and [Assertions Reference](../reference/assertions.md) for full flag descriptions.

---

## 5. Links to Further Resources

- [GoogleTest Primer](../primer.md): A beginner-friendly introduction to writing tests.
- [Assertions and Matchers Reference](../reference/assertions.md): Complete list of assertion macros and usage.
- [Advanced GoogleTest Topics](../advanced.md): Detailed explanations of advanced features.
- [Test Registration and Execution](../api-reference/core-testing-framework/test-registration-and-execution.md)
- [Build System & Integration Troubleshooting](../faq/integration-and-support/build-integration-troubleshooting.md)
- [Where to Get Help](/getting-started/troubleshooting-support/seek-help)

---

## 6. Troubleshooting Tips

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Compilation Fails due to Undefined References">
This usually indicates incorrect linking.

- Ensure you link your test executable against GoogleTest libraries.
- If using CMake, link your target with `GTest::GTest` and `GTest::Main`.
- Check the order of libraries in your linker command.
</Accordion>
<Accordion title="Tests Not Found or No Tests Run">
Check that your tests are properly registered.

- Make sure `testing::InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
- Verify that test names or test suites are not unintentionally disabled or filtered out.
- If using sharding, confirm shard environment variables are set correctly.
</Accordion>
<Accordion title="Unexpected Test Failures or Skipped Tests">
- Look for use of `DISABLED_` prefix that disables tests.
- Check for runtime `GTEST_SKIP()` calls in test fixtures or environments.
- Inspect if `fail_fast` or other flags cause premature skipping.
</Accordion>
<Accordion title="Build or Link to Incorrect GoogleTest Version">
- Confirm that your build system uses the intended GoogleTest version.
- Multiple versions of GoogleTest in your system path or submodules may cause conflicts.
</Accordion>
<Accordion title="GoogleTest Output is Not Colored or Formatting is Incorrect">
- Use `--gtest_color=yes` or `--gtest_color=auto`.
- Ensure your terminal supports ANSI colors.
- Windows consoles may require recent Windows 10 builds or use of compatible terminals.
</Accordion>
<Accordion title="Running Tests with Exceptions Disabled Causes Crashes">
- GoogleTest can catch exceptions if enabled via `catch_exceptions`.
- If exceptions are disabled or `catch_exceptions` is false, exceptions will crash tests.
- Compile with exception support or enable catching.
</Accordion>
</AccordionGroup>

---

## 7. Summary of Setup Validation

After your build and tests run successfully:

- Run the sample and your own tests as described in [Running the Sample Tests](/getting-started/first-test-experience/run-sample-tests).
- Use `--gtest_list_tests` to verify registered tests.
- Use `--gtest_filter` to select and isolate failing tests.
- Enable XML or JSON output with `--gtest_output` to integrate with CI.
- Check exit codes to confirm overall test pass/fail status.

---

## 8. Getting Help and Support

- Check [Where to Get Help](/getting-started/troubleshooting-support/seek-help).
- Review community forums, issue trackers, and GoogleTest GitHub repository.
- Refer to the [FAQ sections](/faq/common-usage-questions) for common problems.

---

By following these steps and utilizing the linked resources, most common GoogleTest setup and build issues can be quickly resolved, enabling you to focus on writing and running reliable C++ tests effectively.
