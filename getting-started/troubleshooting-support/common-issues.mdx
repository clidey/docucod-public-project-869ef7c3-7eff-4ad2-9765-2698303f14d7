---
title: "Common Installation & Build Issues"
description: "Lists frequent mistakes and errors encountered during installation or first builds, with actionable troubleshooting advice. Touches on incompatible compiler versions, include path issues, and linking errors."
---

# Common Installation & Build Issues

This page addresses frequent errors and pitfalls encountered during the installation or initial build of GoogleTest and GoogleMock. It provides practical, step-by-step troubleshooting guidance for compatibility problems, include path errors, and linker issues.

---

## 1. Compiler Version Incompatibility

GoogleTest and GoogleMock require a compiler compatible with at least C++11, with C++17 support recommended for best results.

### Symptoms
- Compilation errors related to unsupported language features
- Warnings or errors mentioning `override`, `final`, or move semantics
- Unexpected crashes or undefined behavior during build

### Actions
1. **Verify compiler version:**
   - For GCC, run:
     ```bash
     gcc --version
     ```
   - For Clang, run:
     ```bash
     clang --version
     ```
   - For MSVC, verify in Visual Studio or run:
     ```powershell
     cl
     ```
2. **Upgrade compiler if necessary:**
   - Upgrade to a recent compiler version that fully supports C++17 (e.g., GCC 7+, Clang 5+, MSVC 2017+).
3. **Check build system settings:**  Ensure your build system is configured to use the proper C++ standard (see your CMakeLists.txt or Bazel BUILD files).

### Common Pitfall
- Using older MSVC versions can cause spurious warnings about `const` qualifiers on parameters. The recommendation is to avoid unnecessary top-level `const` in parameter declarations. See [Legacy gMock FAQ](https://github.com/google/googletest/blob/main/docs/gmock_faq.md#msvc-warning-c4301-or-c4373)

---

## 2. Include Path and Header Not Found Errors

When compiling tests or mock classes, you might encounter errors such as `fatal error: gmock/gmock.h: No such file or directory`.

### Common Causes
- Missing or incorrect include paths in your build setup
- Misplaced GoogleTest/GoogleMock source or install directories

### Step-by-Step Resolution
1. **Confirm GoogleTest and GoogleMock source or install directory location.**
2. **Add include path to compiler:** 
   - For CMake, ensure you have something like:
     ```cmake
     target_include_directories(your_target PRIVATE ${GTEST_SOURCE_DIR}/include)
     target_include_directories(your_target PRIVATE ${GMOCK_SOURCE_DIR}/include)
     ```
   - For Bazel, depend on `@com_google_googletest//:gmock` or similar targets.
3. **Verify include syntax in your source files:**
   ```cpp
   #include <gmock/gmock.h>
   ```
4. **If using GoogleMock, ensure you also include GoogleTest:** 
   - GoogleMock is bundled with GoogleTest; often you need to include both.
5. **Re-run your build configuration:** Clean and regenerate build files if needed to apply changes.

### Tip
- Prefer to use the `gmock/gtest.h` header only if you want both GoogleTest and GoogleMock features.

---

## 3. Linking Errors

After successful compilation, you may face linker errors such as `undefined reference` to GoogleTest or GoogleMock symbols.

### Common Causes
- Not linking against GoogleTest and GoogleMock libraries
- Linking against incompatible or incomplete library versions

### Fix Steps
1. **Add the appropriate libraries to your link line:**
   - For CMake: 
     ```cmake
     target_link_libraries(your_target PRIVATE gmock gtest pthread)
     ```
     Note: On Linux and macOS, add `pthread` explicitly.
2. **Ensure library paths are correct and libraries are built:**
   - Build GoogleTest and GoogleMock libraries prior to linking.
3. **Check for multiple or conflicting versions of GoogleTest/GoogleMock in your link path.**
4. **Windows users:** Make sure to link against the correct runtime library and resolve conflicts between static/dynamic runtimes.

### Common Pitfall
- Linking order matters in some build systems; place GoogleMock and GoogleTest libraries **after** your test binaries.

---

## 4. Common Build System Issues

### Bazel
- Make sure to depend on `@com_google_googletest//:gmock_main` to get an executable with initialized GoogleMock if you want to run tests with GoogleMock features.
- Sample BUILD snippet:
  ```starlark
  cc_test(
      name = "my_test",
      srcs = ["my_test.cc"],
      deps = ["@com_google_googletest//:gmock_main"],
  )
  ```

### CMake
- Use the GoogleTest's recommended FindGoogleTest or GoogleMock integration modules.
- Include initialization in your main test executable:
  ```cpp
  int main(int argc, char** argv) {
    ::testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
  }
  ```

### Troubleshooting
- If your build is slow or memory-intensive, consider moving mock class constructors/destructors into `.cc` files to reduce compilation overhead, as described in [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#making-the-compilation-faster).

---

## 5. Miscellaneous Common Issues

### Warning C4301 or C4373 on MSVC (const parameter warning)
- Remove top-level `const` from parameters in your mocked methods to avoid this MSVC compiler warning. This is a compiler limitation and not an error in GoogleMock.

### Uninteresting Function Call Warnings
- If GoogleMock warns about calls to mock methods without expectations, either:
  - Add an `EXPECT_CALL(...).Times(AnyNumber())` to explicitly allow the call.
  - Use `NiceMock<T>` wrapper to suppress these warnings.
  - Adjust verbosity via `--gmock_verbose=error` to reduce output.

### Undefined or Missing Symbols When Using `MOCK_METHOD`
- Check that the mock methods use the updated `MOCK_METHOD` macro properly as per the product's supported macros.
- For complicated types with commas in return or argument types, wrap those types in extra parentheses or use `using` type aliases.

### Linker Errors Regarding Default Actions or Expectation Symbols
- Ensure you link with the correct GoogleMock and GoogleTest libraries, including their dependencies.
- Confirm no mixing of static/dynamic runtimes that causes ABI incompatibilities.

---

## 6. Where to Go Next

- For detailed understanding of mocking best practices and API usage, see the [gMock Cookbook](https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md) and the [Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md).
- If encountering unexpected mock failures or warnings, consult the [Legacy gMock FAQ](https://github.com/google/googletest/blob/main/docs/gmock_faq.md).
- For guidance on integrating gMock into your build environment, refer to the [Getting Started: Writing First Test](https://github.com/google/googletest/blob/main/getting-started/initial-configuration-validation/writing-first-test.mdx) and installation guides.

---

## Troubleshooting Summary

<AccordionGroup title="Common Troubleshooting Topics">
<Accordion title="Compiler Compatibility Issues">
Ensure your compiler supports C++11/17. Upgrade if necessary. See version commands and build flags.
</Accordion>
<Accordion title="Include Path Errors">
Verify your project includes GoogleTest and GoogleMock header paths correctly. Adjust build configurations.
</Accordion>
<Accordion title="Linker Errors">
Link against proper GoogleTest/GoogleMock libraries and dependencies (pthread on POSIX). Fix any ABI or runtime conflicts.
</Accordion>
<Accordion title="MSVC Specific Warnings">
Remove meaningless top-level const qualifiers on parameters to avoid compiler warnings.
</Accordion>
<Accordion title="Uninteresting Call Warnings">
Consider using NiceMock or adding default expectations to suppress unwanted warnings.
</Accordion>
<Accordion title="Build Performance">
Move mock constructors/destructors out of header files to speed compilation.
</Accordion>
</AccordionGroup>