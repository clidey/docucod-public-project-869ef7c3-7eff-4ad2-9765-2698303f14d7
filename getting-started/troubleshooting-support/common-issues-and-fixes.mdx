---
title: "Common Installation Issues"
description: "Find solutions to frequent setup errors such as compiler mismatches, missing dependencies, or incorrect configuration. Includes symptom-based troubleshooting to accelerate resolution and get you back on track."
---

# Common Installation Issues

This guide addresses frequent errors encountered during the setup of GoogleTest. If you face problems such as compiler mismatches, missing dependencies, or configuration errors, use this document to identify symptoms, understand root causes, and apply targeted solutions. Fixing these issues ensures you can quickly proceed with your test automation.

---

## 1. Compiler Version Mismatch

### Symptom
- Build fails with errors about incompatible runtime libraries.
- Linker errors indicating mismatched runtimes like `MTd_StaticDebug` vs `MDd_DynamicDebug`.

### Cause
GoogleTest requires building and linking with the same compiler settings as your project, especially runtime library (static vs dynamic) and debug/release configuration. Mixing settings causes ABI incompatibilities.

### Resolution
- Enable the CMake option `gtest_force_shared_crt` to force GoogleTest to link against the dynamic runtime, matching Visual Studio defaults.
- In your CMake command, add:

  ```bash
  cmake .. -Dgtest_force_shared_crt=ON
  ```

- Alternatively, ensure that both your project and GoogleTest use the same runtime linkage (all static or all dynamic).

---

## 2. Missing C++17 Support

### Symptom
- Compiler errors indicating unknown keywords such as `constexpr`, `auto`, or failed template instantiations.
- Build failures when compiling GoogleTest with messages about language features.

### Cause
GoogleTest requires at least C++17 standard support. Older compiler versions or incorrect compiler flags cause build failures.

### Resolution
- Confirm your compiler supports C++17 or newer.
- In your CMakeLists, set the C++ standard explicitly by adding:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- If `CMAKE_CXX_STANDARD` cannot be set in your project, add compiler flags manually:

  ```bash
  -std=c++17
  ```

- Verify your build environment and toolchain comply with GoogleTest requirements.

---

## 3. Missing Dependencies or Libraries

### Symptom
- Link errors indicating undefined references to pthread or other system libraries.
- Errors about missing headers like `<pthread.h>`.

### Cause
- GoogleTest uses pthread on POSIX systems for thread safety.
- If your build does not link with pthread, linker errors occur.

### Resolution
- When using CMake's GoogleTest scripts, linking with pthread is automatically handled.
- If managing your own build system:
  - Add pthread to linker flags explicitly, e.g. `-lpthread`.
  - Consult your compiler and linker documentation for correct flags.

---

## 4. Incorrect Build Integration

### Symptom
- Tests do not run or are not discovered.
- Build failures occur due to incorrect include paths or missing source files.

### Cause
- GoogleTest headers and sources are not correctly referenced in your build system.
- Mismatch in project configurations when embedding GoogleTest as a subdirectory.

### Resolution
- If using CMake:
  - Incorporate GoogleTest using `add_subdirectory()` for tight integration.
  - Ensure your project links against `gtest` or `gtest_main`.
  - Example integration snippet:

    ```cmake
    add_subdirectory(googletest)
    target_link_libraries(your_test_target gtest_main)
    ```

- If using prebuilt GoogleTest libraries:
  - Make sure include directories and library paths are correctly set.

- Verify all GoogleTest source files are compiled if added manually.

---

## 5. Link Errors Related to Shared vs Static Libraries

### Symptom
- Undefined references or multiple definition errors during linking.
- Errors when mixing shared and static GoogleTest libraries.

### Cause
- Building GoogleTest as a shared library (DLL) requires correct compiler and linker flags.
- Runtime flag `DGTEST_CREATE_SHARED_LIBRARY` must be set to create shared libs.

### Resolution
- To build GoogleTest as a shared library:

  1. Add the compiler flag:
     ```
     -DGTEST_CREATE_SHARED_LIBRARY=1
     ```

  2. Tell the linker to create a shared library as appropriate.

  3. When building your tests against the shared GoogleTest library, add:

     ```
     -DGTEST_LINKED_AS_SHARED_LIBRARY=1
     ```

- If using CMake, prefer the static library (default) unless you explicitly need a DLL.

---

## 6. Macro Name Conflicts

### Symptom
- Macro redefinition warnings or errors.
- Unexpected behavior when using GoogleTest assertions.

### Cause
- GoogleTest assertion macros can clash with other libraries defining macros with the same names.

### Resolution
- Disable specific macro definitions in GoogleTest by defining `-DGTEST_DONT_DEFINE_FOO=1`, where `FOO` is the macro name.
- Example: To rename all test macros to the prefixed version:

  ```bash
  -DGTEST_DONT_DEFINE_TEST=1
  ```

- After this, use `GTEST_TEST()` instead of `TEST()`, and `GTEST_ASSERT_EQ()` instead of `ASSERT_EQ()`, etc.

---

## 7. Troubleshooting Build and Runtime

<AccordionGroup title="Common Symptoms and Fixes">
<Accordion title="Tests are not discovered or executed">
- Make sure `InitGoogleTest()` is called before `RUN_ALL_TESTS()` in `main()`.
- Confirm build system includes GoogleTest and links test binaries against `gtest` and `gtest_main`.
- Verify test names and test suites are declared properly.
 </Accordion>
<Accordion title="Linker errors about missing symbols">
- Confirm linking GoogleTest static or shared libraries as appropriate.
- Verify `-lpthread` is included on POSIX systems if not using CMake.
- Check runtime linkage flags (`gtest_force_shared_crt`) for runtime conflicts.
 </Accordion>
<Accordion title="Unexpected runtime errors or crashes">
- Confirm your compiler supports C++17.
- Review `GTEST_BREAK_ON_FAILURE` or `GTEST_THROW_ON_FAILURE` flags that might interrupt tests.
- Check for incompatible compiler versions between GoogleTest and your project.
</Accordion>
</AccordionGroup>

---

## 8. Useful Diagnostic Flags

When running tests, the following flags can help diagnose issues:

| Flag | Description |
| --- | --- |
| `--gtest_list_tests` | Lists all tests without running them to verify discovery |
| `--gtest_filter` | Runs tests matching a glob pattern; check filtering behavior |
| `--gtest_break_on_failure` | Cause debugger break on failed assertions |
| `--gtest_catch_exceptions=0` | Disable GoogleTest catching C++ exceptions to surface debugging |

Example:

```bash
./your_test_binary --gtest_list_tests
./your_test_binary --gtest_filter=MySuite.*
```

---

## 9. Additional Resources

- [Installation with CMake](https://github.com/google/googletest/blob/main/README.md#build-with-cmake)
- [Primer: Writing Your First Test](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Advanced Troubleshooting and Debugging](https://github.com/google/googletest/blob/main/docs/advanced.md#running-test-programs-advanced-options)
- [GoogleTest Flag Documentation](https://github.com/google/googletest/blob/main/docs/advanced.md#running-test-programs-advanced-options)

Use these resources to deepen your understanding and resolve setup challenges efficiently.

---

## Troubleshooting Tips

- Always start by verifying your environment meets the [prerequisites](../getting-started/environment-setup/prerequisites-platform-support.md).
- Use `cmake` out-of-source builds in a clean directory, and carefully read CMake warnings.
- On Windows, check runtime library settings in Visual Studio project properties.
- If receiving obscure linker errors, try rebuilding GoogleTest and your tests with consistent build types (Debug vs Release).
- When in doubt, run your tests with `--gtest_list_tests` to confirm discovery.

## Summary
Quick resolution of installation issues depends on understanding common environmental and integration pitfalls. By following the outlined steps carefully, you ensure your GoogleTest setup is robust and ready to empower your testing workflow.

---

## Example: Building and Installing GoogleTest with CMake

```bash
# Clone a stable release

git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest

# Make a build directory (out-of-source)
mkdir build
cd build

# Configure build; enable shared CRT on Windows if needed
cmake .. -Dgtest_force_shared_crt=ON

# Build
make -j$(nproc)

# (Optional) Install system-wide if you have permission
sudo make install
```

Verify installation by checking for headers and libraries in your system include and lib directories. Then in your projects, link GoogleTest accordingly.

---

## FAQ

### Q: My tests fail to build with unresolved symbols for pthread.

A: Link the pthread library explicitly if not using `cmake`. For GCC or Clang, add `-lpthread`.

### Q: How do I fix linker errors about `RuntimeLibrary` mismatch on Windows?

A: Use `-Dgtest_force_shared_crt=ON` in your CMake configuration or make sure your project and GoogleTest use the same CRT linkage (either both dynamic or both static).

### Q: What if I get errors due to conflicting macros from other libraries?

A: Use compile flags like `-DGTEST_DONT_DEFINE_TEST=1` to avoid macro collisions and use the prefixed macros like `GTEST_TEST()` instead.


---