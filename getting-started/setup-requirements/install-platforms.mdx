---
title: "Installation on Linux, macOS, and Windows"
description: "Practical installation steps tailored for each major operating system, including both CMake and Bazel workflows. Users receive easy-to-follow, copy-paste instructions for setting up GoogleTest and GoogleMock in new or existing C++ projects, with references to official quickstart guides."
---

# Installation on Linux, macOS, and Windows

This guide provides practical installation steps for setting up **GoogleTest** and **GoogleMock** on Linux, macOS, and Windows platforms. It covers both **CMake** and **Bazel** build workflows, offering copy-paste commands to get you started quickly in new or existing C++ projects. You will also find tips for configuring your build environment and resolving common setup issues.

---

## 1. Prerequisites & System Requirements

Before installing GoogleTest, ensure your system meets the following requirements:

- **C++17 Standard Support:** Your compiler must support the C++17 standard.
- **Build Tools:**
  - CMake (minimum version 3.14 for FetchContent support)
  - Or Bazel (if using Bazel build system)
- **Platform Support:** Linux, macOS, or Windows
- **Build Environment:**
  - On Linux and macOS, standard shell and make build tools
  - On Windows, Visual Studio (2017 or later recommended) or equivalent

<Tip>
Ensure your compiler is up-to-date and configured to use C++17. You can do this by checking your compiler version or specifying the standard explicitly in your build configuration.
</Tip>

---

## 2. Installing with CMake

GoogleTest includes a robust, cross-platform CMake build configuration. Follow the instructions below to build and install using CMake.

### A. Building GoogleTest as a Standalone Project

This is ideal when you want to build and use GoogleTest independently.

1. **Clone the GoogleTest repository:**

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
d
```

2. **Navigate into the repository and create a build directory:**

```bash
cd googletest
mkdir build
cd build
```

3. **Configure the project:**
- To build both GoogleTest and GoogleMock:

```bash
cmake ..
```

- To build only GoogleTest (disable GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

4. **Build the libraries:**

- On Linux/macOS:

```bash
make
```

- On Windows:

Open the generated solution file (`gtest.sln`) in Visual Studio and build the project.

- On macOS with Xcode:

Open the generated `.xcodeproj` and build.

5. **Install GoogleTest (optional, requires admin privileges):**

```bash
sudo make install
```

This installs to `/usr/local` by default.

### B. Using GoogleTest in Your Existing CMake Project

There are two common integration methods:

#### 1. Using Find Package (assuming GoogleTest is installed globally)

Add to your CMakeLists.txt:

```cmake
find_package(GTest CONFIG REQUIRED)
target_link_libraries(your_target PRIVATE GTest::gtest GTest::gtest_main)
```

#### 2. Building GoogleTest as part of your project with FetchContent (recommended)

This method ensures consistent compiler settings across your project and GoogleTest.

Add the following snippet to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows: Prevent runtime library conflicts
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

> **Note:** FetchContent requires CMake 3.14 or later.

---

## 3. Building with Bazel

If you prefer Bazel, GoogleTest is compatible via the rules defined in the Bazel ecosystem.

1. **Add GoogleTest as a Bazel dependency** in your `WORKSPACE` file.
2. Use `cc_test` or `cc_binary` targets to build and run tests linking against `@com_google_googletest//:gtest`

Refer to the [official Bazel quickstart guide](https://docs.bazel.build/versions/main/tutorial/cpp.html) for detailed instructions.

---

## 4. Verifying Your Installation

After building or integrating GoogleTest, verify your setup:

- Create a minimal test file `example.cpp`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Build and run the test executable.

```bash
# Compile example.cpp linking with gtest_main and gtest
# Example using CMake (FetchContent) or your preferred method
./example
```

Expected output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

A successful run confirms correct installation and linkage.

---

## 5. Best Practices & Tips

- Always link your tests with `gtest_main` unless you require a custom `main()`.
- Keep GoogleTest and GoogleMock versions in sync to avoid incompatibilities.
- Use the `gtest_force_shared_crt` flag on Windows to avoid runtime conflicts.
- When integrating with existing CMake projects, prefer the `FetchContent` method for ease and consistency.

---

## 6. Troubleshooting

### Issue: Missing `gtest/gtest.h` header

- Ensure GoogleTest source or installed include directories are correctly added to your build target include paths.

### Issue: Link errors related to `gtest` or `gmock`

- Verify libraries `gtest`, `gtest_main`, and optionally `gmock` are linked.
- On Windows, check that runtime library flags (static vs dynamic) align.

### Issue: C++17 features not recognized

- Make sure that your compiler supports C++17, and CMakeLists.txt contains:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

### Issue: Multithreading related failures

- GoogleTest requires pthread support on Linux/macOS. Using the CMake scripts automatically configures threading.
- For manual builds, add `-pthread` to compile and link flags.

---

## 7. Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest Quickstart Guide](https://github.com/google/googletest/blob/main/googletest/README.md)
- [Writing Your First Test](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Integration & Ecosystem](../overview/feature-architecture-and-integration/integration-and-ecosystem.md)


---

By following this guide, you will have GoogleTest and GoogleMock installed and ready to create robust C++ test suites across major development platforms with minimum hassle.
