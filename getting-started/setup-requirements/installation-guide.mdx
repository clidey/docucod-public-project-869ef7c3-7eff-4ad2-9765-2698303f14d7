---
title: "Installation Guide"
description: "Step-by-step instructions to install GoogleTest and GoogleMock on popular platforms. Covers installation using CMake or Bazel, and shows how to import the framework into your projects. Includes references to sample projects and key configuration files."
---

# Installation Guide

Welcome to the step-by-step installation guide for **GoogleTest** and **GoogleMock**, the C++ testing and mocking framework widely used across platforms. This guide focuses on installing the frameworks on popular operating systems using **CMake** or **Bazel**, and demonstrates how to integrate and import them into your projects. Whether you're starting from scratch or adding these tools into an existing build, these instructions will help you get up and running quickly and reliably.

---

## 1. Prerequisites & System Requirements

Before installing, ensure your environment meets the following:

- **Supported Platforms:** Linux, Windows, macOS.
- **C++ Standard:** Requires compiler support for at least C++17.
- **Build Tools:**
  - For CMake builds: CMake version 3.14 or later.
  - Compatible build tool (e.g., Make, Ninja, Visual Studio, Xcode depending on the OS).
- **Network Access:** Internet connectivity to clone or download GoogleTest and GoogleMock source.

<Tip>
If your system does not support C++17, upgrade your compiler or build environment first, as GoogleTest leverages modern C++ features that are mandatory.
</Tip>

## 2. Installing GoogleTest and GoogleMock Using CMake

GoogleTest and GoogleMock come bundled together. The recommended method for installation is with CMake, which supports cross-platform builds efficiently.

### 2.1 Clone the Repository

Start by cloning the official GoogleTest repository:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

> *Note*: Version `v1.17.0` is specified here; you may choose the latest stable version available.

### 2.2 Standalone Build

To build and install GoogleTest and GoogleMock as standalone libraries:

```bash
mkdir build
cd build
cmake ..             # Generates the native build files, including GoogleMock.
make                 # Compiles the sources (or use appropriate build command, e.g., 'cmake --build .').
sudo make install    # Installs libraries and headers (default: /usr/local/)
```

If you want to build **only** GoogleTest (excluding GoogleMock), use:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

> On Windows with Visual Studio, opening the generated `gtest.sln` file in Visual Studio lets you build the solution normally.
>
> On macOS with Xcode, open the `.xcodeproj` generated instead.

### 2.3 Incorporate Into an Existing CMake Project

To use GoogleTest within your own CMake project, there are flexible methods:

#### Method 1: Use Installed Libraries

After installation, just call `find_package` in your projectâ€™s `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(your_test your_test.cpp)
target_link_libraries(your_test GTest::gtest_main)
```

This method requires GoogleTest to be installed on your system.

#### Method 2: Build GoogleTest as a Subdirectory

Add GoogleTest source code directly to your project tree or as a git submodule, then link it in your build:

```cmake
add_subdirectory(googletest)

add_executable(your_test your_test.cpp)
target_link_libraries(your_test gtest_main)
```

#### Method 3: Use FetchContent to Download at Configure Time

This approach fetches GoogleTest during CMake configuration, ensuring you build a consistent version:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # Matches runtimes on Windows
FetchContent_MakeAvailable(googletest)

add_executable(your_test your_test.cpp)
target_link_libraries(your_test gtest_main)
```

This requires CMake 3.14 or higher.

<Tip>
Set `gtest_force_shared_crt ON` on Windows to avoid runtime library conflicts, ensuring GoogleTest links with the dynamic runtime if your project does.
</Tip>

### 2.4 Verify the Installation

To verify that GoogleTest and GoogleMock are successfully built and installed:

- Check that the libraries (`libgtest.a`, `libgmock.a`, `libgtest_main.a`, `libgmock_main.a` or corresponding DLLs on Windows) exist in your installation path.
- Compile and run a simple test (see [Quickstart: Write & Run Your First Test](../first-tests/quickstart-example)).

## 3. Installing GoogleTest and GoogleMock Using Bazel

For users leveraging Bazel as their build system, refer to the Bazel [Quickstart guide](../first-tests/quickstart-bazel) for detailed instructions on importing GoogleTest and GoogleMock as external dependencies.

## 4. Importing GoogleTest and GoogleMock Into Your Projects

Once installed, you can import the testing frameworks into your source files:

```cpp
#include <gtest/gtest.h>   // For GoogleTest
#include <gmock/gmock.h>   // For GoogleMock
```

- Link your test binaries against `gtest_main` or `gmock_main` to automatically use the provided `main()` function that initializes and runs all tests.

Example linking using CMake:

```cmake
target_link_libraries(your_test GTest::gtest_main GTest::gmock_main)
```

### Writing your own main (if needed)

If you need custom test runner behavior, you can write your own `main`:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);  // Initializes both GoogleMock and GoogleTest
  return RUN_ALL_TESTS();
}
```

## 5. Sample Projects and Key Configuration Files

### CMakeLists.txt Example Snippet (Using FetchContent)

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_tests)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# For Windows
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(
  example_test
  example_test.cc
)
target_link_libraries(
  example_test
  gtest_main
  gmock_main
)

include(GoogleTest)
gtest_discover_tests(example_test)
```

### Simple example_test.cc

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

TEST(ExampleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
  EXPECT_TRUE(true);
}
```

## 6. Troubleshooting Common Installation Issues

<AccordionGroup title="Troubleshooting Installation">
<Accordion title="Runtime Library Conflicts on Windows">
If you receive errors like:

```
gtest.lib(gtest-all.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary'
```

Enable shared CRT linkage by setting `gtest_force_shared_crt` ON in your CMake configuration:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

This aligns your project and GoogleTest runtimes.
</Accordion>

<Accordion title="C++17 Support Errors">
If build fails due to C++ standard support:

- Ensure your compiler is configured with at least `-std=c++17`.
- In CMake, add:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

- For custom build systems, add equivalent flags.
</Accordion>

<Accordion title="PThreads Linking Errors on Unix/Linux">
On Unix/Linux, if you encounter linker errors related to `pthread`:

- Ensure `-pthread` flag is added to both compiler and linker.
- Using the provided CMake scripts handles this automatically.
</Accordion>

<Accordion title="GoogleMock Missing When Using Bazel">
Double-check dependencies and targets in your Bazel build files to ensure GoogleMock libraries are included.
</Accordion>
</AccordionGroup>

## 7. Next Steps

- Explore [Quickstart: Write & Run Your First Test](../first-tests/quickstart-example) to learn how to write and execute your first tests.
- Consult [Prerequisites & System Requirements](../setup-requirements/prerequisites-system-requirements) for detailed environment setup.
- Review [Integration & Ecosystem](../../overview/architecture-features/integration-and-dependencies) to learn how GoogleTest fits into larger systems and CI workflows.

---

Your installation journey is now complete. GoogleTest and GoogleMock are ready for use in building reliable and maintainable C++ tests.


---

## References

- [Official GoogleTest GitHub Repository](https://github.com/google/googletest)
- [CMake Documentation](https://cmake.org/documentation/)
- [GoogleTest Primer](../primer) - for learning to write tests
- [Quickstart: Write & Run Your First Test](../first-tests/quickstart-example)


---

_Last updated: v1.17.0_