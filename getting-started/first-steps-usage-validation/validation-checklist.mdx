---
title: "Validation Checklist"
description: "A concise checklist and validation steps to confirm that GoogleTest is installed and configured correctly, including how to interpret basic test output and next troubleshooting steps."
---

# Validation Checklist

Verify that your GoogleTest and GoogleMock setup is correct by following this concise checklist. This guide helps you confirm that the framework is installed and configured properly, ensures that your test environment works as expected, and shows how to interpret the test results.

---

## 1. Confirm GoogleMock Is Linked and Usable

1. **Ensure `gmock` is included in your build system:**
   - If using CMake, verify `gmock` is added as a target/dependency.
   - If using Bazel, ensure `@com_github_google_googletest//:gmock` is included.

2. **Include the proper headers in your test files:**
   ```cpp
   #include <gmock/gmock.h>
   #include <gtest/gtest.h>
   ```

3. **Initialize GoogleMock in `main`:**
   ```cpp
   int main(int argc, char** argv) {
     ::testing::InitGoogleMock(&argc, argv);
     return RUN_ALL_TESTS();
   }
   ```

> <Check> Without proper initialization, mocks and test features will not behave correctly. 

---

## 2. Validate Basic Test Execution

Create a simple mock class and write an elementary test to validate your setup:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class MockSample {
 public:
  MOCK_METHOD(void, Foo, (int));
};

TEST(BasicMockTest, SimpleCall) {
  MockSample mock;
  EXPECT_CALL(mock, Foo(42)).Times(1);
  mock.Foo(42);
}
```

- Build and run this test.
- The test should pass if GoogleMock is working correctly.

> <Tip> If this test fails, focus on build/link errors or missing initialization.

---

## 3. Use Diagnostic Flags to Improve Validation

### Adjust Verbosity

GoogleMock emits warnings about uninteresting calls (calls with no matching expectation) by default. You can control verbosity with the command-line flag `--gmock_verbose=`:

| Level   | Description                                                     |
|---------|-----------------------------------------------------------------|
| `info`  | Logs info and all warnings, including stack traces on warnings. |
| `warning` | Logs warnings and errors (default).                            |
| `error` | Logs errors only, suppressing warnings and info.                |

Run tests like this to get more detailed information:
```
./my_test_binary --gmock_verbose=info
```

### Interpret Warning and Error Messages

- **Uninteresting call warning:** Indicates your code called a mock method without an `EXPECT_CALL`. This could be benign or a missed expectation.
- **Unexpected call error:** The test calls a mock method in an unexpected way. The failure message will include the expected calls tried and argument mismatch details.
- **Excessive call error:** A mock method was called more times than expected.
- **Saturated expectation warning:** Your `.WillOnce()` actions have been exhausted without a `.WillRepeatedly()` action, leading to default action or a warning.

> <Note> Handling these messages early improves test reliability and correctness.

---

## 4. Verify Expectation Behavior

### Expected Calls

- Use `EXPECT_CALL(mock, Method(args))` before exercising your code.
- Confirm calls occur as expected and in the expected number.

### Default Behavior Without Explicit Expectation

- Use `ON_CALL(mock, Method(args)).WillByDefault(action)` to define what should happen when expected calls are not specified.
- This does not enforce the number of calls, it only sets the default action.

### Sequences and Ordering

- Use `InSequence` to require calls to occur in order:
  ```cpp
  {
    InSequence seq;
    EXPECT_CALL(mock, FirstCall());
    EXPECT_CALL(mock, SecondCall());
  }
  ```
- For partial order, use `Sequence` objects in multiple `InSequence()` clauses.

### Cardinalities

- `Times(n)`: expects exactly `n` calls.
- `Times(AnyNumber())`: expects any number of calls.
- `Times(AtLeast(n))` or `Times(AtMost(n))`: flexible counts.
- When omitted, GoogleMock infers cardinality from `.WillOnce()` and `.WillRepeatedly()` calls.

---

## 5. Analyze Mock Call Output

When tests run, GoogleMock outputs details that help you verify expectations.

### Sample Output Scenarios

- **Expected call**: Confirms a call matched expectations.
- **Unexpected call**: Lists all expectations tried with matching details.
- **Uninteresting call**: Warns about calls without matching `EXPECT_CALL`.
- **Excessive call**: Informs a call exceeded the specified number of calls.

### Interpreting Failures

- Look for the actual function calls vs expected calls.
- Use source file and line information to locate failing expectations.
- Verbosity flag can show stack traces for better debugging.

---

## 6. Common Troubleshooting Steps

- **Linker errors:** Confirm GoogleMock library is linked.
- **Compilation issues:** Check the compiler version (C++17+ is recommended).
- **Mock methods not recognized:** Ensure `MOCK_METHOD` macros are in the `public` section of your mock class.
- **Unexpected failures in tests:** Verify that all `EXPECT_CALL`s are specified before mock methods are called.
- **No verification errors on leaked mocks:** Enable `--gmock_catch_leaked_mocks` (default on recent versions) or explicitly call `Mock::VerifyAndClearExpectations(&mock)`.

---

## 7. Additional Validation Tips

- Use `Mock::AllowLeak(mock_ptr);` if intentional leaks exist.
- Use helper functions like `Mock::VerifyAndClearExpectations(&mock)` to force verification before object destruction.
- Use `NiceMock<T>` to suppress uninteresting call warnings.
- Use `StrictMock<T>` to make uninteresting calls failures.

---

## Further Reading and Resources

- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html): Friendly introduction to mocking with samples.
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html): Complete API details about mocks.
- [Setting Expectations with `EXPECT_CALL` and `ON_CALL`](https://google.github.io/googletest/reference/mocking-framework/setting-expectations.html): Deep dive into expectation syntax.
- [Understanding Mock Output](https://github.com/google/googletest/blob/main/googlemock/test/gmock_output_test_.cc): See how output messages are generated.

---

For full integration guidance, refer to the [Configuration Basics](https://github.com/google/googletest/blob/main/docs/getting-started/first-steps-usage-validation/configuration-basics.md) and the [Installation Overview](https://github.com/google/googletest/blob/main/docs/getting-started/prerequisites-installation/installation-overview.md).

---

*This checklist provides a straightforward path to validate GoogleMock configuration and basic usage, ensuring reliable test execution and clear interpretation of results.*