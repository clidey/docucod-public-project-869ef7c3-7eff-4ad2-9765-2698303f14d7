---
title: "Running Your First Test"
description: "A step-by-step walkthrough: writing a basic test case, building, and running it using the provided test runners. Highlights the use of sample code and test binaries included in the repository."
---

# Running Your First Test

This guide walks you through the essential steps to write a basic test case using GoogleTest and GoogleMock, then build and run it with the test runners included in the repository. It uses sample code and test binaries already available, allowing you to quickly validate your setup and grasp the workflow.

---

## Prerequisites

Before proceeding, ensure:

- **GoogleTest and GoogleMock are installed and built** in your environment following the installation guides.
- You have a C++17 compatible compiler.
- Your project setup supports running tests (e.g., using CMake or Bazel build systems).
- Basic familiarity with C++ syntax.

Refer to [System Requirements](/getting-started/prerequisites-installation/system-requirements) and [Installation Overview](/getting-started/prerequisites-installation/installation-overview) if any of these are missing.

---

## Writing a Basic Test Case

Let's start with a minimal example demonstrating a test that simply checks if `1 + 1` equals `2`.

1. **Include the GoogleTest header:**

```cpp
#include <gtest/gtest.h>
```

2. **Write the test:**

Use the `TEST` macro to define a test case. Here, "BasicMath" is the test suite name, and "Addition" is the test name.

```cpp
TEST(BasicMath, Addition) {
  EXPECT_EQ(1 + 1, 2);
}
```

3. **Full minimal example:**

```cpp
#include <gtest/gtest.h>

TEST(BasicMath, Addition) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

---

## Building the Test

Use your build system to compile this test. For CMake-based projects:

1. **Add test source:**

Modify your `CMakeLists.txt` to include the test file and link against GoogleTest and GoogleMock libraries.

```cmake
add_executable(basic_math_test basic_math_test.cc)
target_link_libraries(basic_math_test gtest gmock)
```

2. **Run CMake configure and build:**

```bash
mkdir -p build
cd build
cmake ..
cmake --build .
```

If using Bazel or other build systems, refer to your platform-specific build instructions.

---

## Running the Test

1. **Run the compiled test binary:**

```bash
./basic_math_test
```

2. **Expected output:**

```text
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from BasicMath
[ RUN      ] BasicMath.Addition
[       OK ] BasicMath.Addition (0 ms)
[----------] 1 test from BasicMath (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms the test ran successfully.

---

## Using Sample Test Code Included

The GoogleTest repository provides sample test code and binaries for hands-on practice.

- **Sample tests:** Located under `googlemock/test` directory.
- **Test runners:** Use `RUN_ALL_TESTS()` as shown above to execute all tests.

To try an included sample:

1. **Build the provided tests:**

For example, build `gmock-spec-builders_test.cc` which contains many expectations tests.

2. **Run the binary:**

Run tests with

```bash
./gmock-spec-builders_test
```

You can see detailed output verifying various mocking behaviors.

---

## Understanding the Test Flow

1. **Test Initialization:**

`InitGoogleMock` prepares the framework, parsing command-line flags and initializing GoogleTest and GoogleMock.

2. **Test Execution:**

`RUN_ALL_TESTS()` discovers all tests (marked via `TEST` macros) and runs them sequentially.

3. **Assertions and Expectations:**

- `EXPECT_EQ`, `EXPECT_CALL`, and similar macros verify conditions or mock object behaviors.
- Failures produce detailed diagnostic output.

4. **Test Reporting:**

Summary prints number of tests run and indicates passed/failed tests.

---

## First Mock Test Example

To introduce mock testing, let's define a simple interface and a corresponding mock class using `MOCK_METHOD`:

1. **Interface to mock:**

```cpp
class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};
```

2. **Define the mock class:**

```cpp
#include <gmock/gmock.h>

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};
```

3. **Write a test using the mock:**

```cpp
using ::testing::AtLeast;

TEST(PainterTest, DrawsLine) {
  MockTurtle mock_turtle;

  EXPECT_CALL(mock_turtle, PenDown()).Times(AtLeast(1));
  EXPECT_CALL(mock_turtle, Forward(100));
  EXPECT_CALL(mock_turtle, PenUp());

  // Imagine Painter uses Turtle to draw
  Painter painter(&mock_turtle);
  painter.DrawLine(100);
}
```

This test verifies that `PenDown()`, `Forward(100)`, and `PenUp()` are called as expected.

---

## Running Your First Mock Test

Follow the same build and run steps as above, now including your mock test file.

Run the test binary and observe:

- Successful mock expectation matches.
- Failure messages if expectations are violated.

---

## Troubleshooting Common Issues

- **Test binary not found or fails to run:** Check that the build completed without errors, and the binary path is correct.
- **Tests not detected:** Confirm tests are defined using proper `TEST` macros and `RUN_ALL_TESTS()` is called.
- **Mock expectations not met:** Ensure all `EXPECT_CALL` statements are set before the mock methods are invoked.
- **Warnings about uninteresting calls:** Use `NiceMock<>` to suppress or explicitly add catch-all expectations.
- **Linker errors:** Verify that your test executable links against the correct GoogleTest and GoogleMock libraries.

---

## Next Steps

- Explore [Configuring Your First Test Project](/getting-started/first-steps-usage-validation/configuration-basics) to integrate GoogleTest and GoogleMock with your build system.
- Proceed with [Writing Your First Unit and Mock Tests](/guides/getting_started/writing_first_tests) to deepen your test writing skills.
- Consult [Troubleshooting Common Setup Issues](/getting-started/first-steps-usage-validation/troubleshooting-common-issues) if you encounter difficulties.

<Check>
Ensure your environment matches the prerequisites, and you can build and run your first test successfully.
</Check>

---

### Additional Resources

- [GoogleMock Cheat Sheet](https://google.github.io/googletest/gmock_cheat_sheet.html)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [Mocking Reference](https://google.github.io/googletest/reference/mocking.html)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)

---

_Source:_ This page complements the 'Configuring Your First Test Project' and 'Writing Your First Unit and Mock Tests' guides, giving you the first practical walk-through for creating, building, and running your test cases with GoogleTest and GoogleMock.
