---
title: "Project Configuration"
description: "Guidance on including GoogleTest in your C++ project: setting up include paths, linking the library, and integrating with your build process. Empowers users to confidently structure their test setup regardless of project complexity."
---

# Project Configuration

This guide provides practical instructions for integrating GoogleTest into your C++ project. It covers setting up include paths, linking against GoogleTest libraries, and incorporating the framework into your build system. By following this guide, you will configure GoogleTest correctly to write and run tests confidently, whether your project is simple or complex.

---

## 1. Setting Up Include Paths

To use GoogleTest headers in your test sources, configure your build system to locate the GoogleTest include directories.

1. Identify the GoogleTest include directories:
   - `googletest/include/`
   - `googletest/`

2. Add these directories to your compiler's include path.

### Example: Adding Include Directories with CMake

```cmake
include_directories(
  "${GTEST_SOURCE_DIR}/include"
  "${GTEST_SOURCE_DIR}"
)
```

<Note>
Make sure the include paths point to the correct location where GoogleTest is hosted in your source tree or installed on your system.
</Note>

---

## 2. Linking GoogleTest Libraries

Your test binaries must link against GoogleTest libraries to resolve the framework symbols.

GoogleTest provides two main libraries:

- `gtest` — the core GoogleTest framework
- `gtest_main` — GoogleTest plus a default implementation of `main()` to run all tests

### Linking Options

- Link with `gtest` if you plan to write a custom main function.
- Link with `gtest_main` if you want to use the default main provided by GoogleTest.

### Example: Linking Libraries with CMake

```cmake
add_executable(your_test_exe test_main.cpp test_case.cpp)
target_link_libraries(your_test_exe gtest_main)
```

<Warning>
Linking only with `gtest` requires you to provide your own `main()` function, which must call `RUN_ALL_TESTS()` after initializing GoogleTest with `InitGoogleTest()`.
</Warning>

---

## 3. Incorporating GoogleTest in Your Build Process

You can add GoogleTest to your project build system in several ways:

### 3.1 Standalone Build and Install

- Build GoogleTest separately and install it on your system.
- Then configure your project to add include paths and link libraries from the installed location.

### 3.2 Embedded Directly as a Subdirectory

- Add GoogleTest source as a subdirectory in your project.
- Use CMake’s `add_subdirectory()` to build GoogleTest with your project, ensuring consistent compiler and linker settings.

Example:

```cmake
add_subdirectory(path/to/googletest)
add_executable(your_test_exe test_main.cpp test_case.cpp)
target_link_libraries(your_test_exe gtest_main)
```

### 3.3 FetchContent for Automatic Download and Build

You can download and include GoogleTest dynamically during the build using CMake’s `FetchContent`.

Example:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/release-1.17.0.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(your_test_exe test_main.cpp test_case.cpp)
target_link_libraries(your_test_exe gtest_main)
```

<Check>
This method requires CMake 3.14 or later.
</Check>

---

## 4. Configuring Compiler and Linker Flags

When building or integrating GoogleTest, ensure:

- Your compiler supports C++17 or later.
- Include any required macros such as `-DGTEST_HAS_PTHREAD=1` if your environment uses pthreads.
- When linking GoogleTest as a shared library, add `-DGTEST_CREATE_SHARED_LIBRARY=1` to compiler flags and `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` when compiling your test code.

### Visual Studio Runtime Compatibility

If you encounter linker errors about runtime library mismatches in Visual Studio, enable the `gtest_force_shared_crt` CMake option to align runtime library linkage:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "Use shared CRT for gtest")
```

---

## 5. Common Macro Definitions for Tweaking Behavior

GoogleTest supports macros to customize and configure its behavior per your environment.

### Examples:

- `-DGTEST_HAS_PTHREAD=1` — Forces enabling pthread support.
- `-DGTEST_CREATE_SHARED_LIBRARY=1` — Build `gtest` as a shared library.
- `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` — Compile tests against shared library.
- `-DGTEST_DONT_DEFINE_TEST=1` — Avoid conflicts from macro name clashes by renaming macros with `GTEST_` prefix.

---

## 6. Verifying Configuration

After setup, verify GoogleTest is correctly configured:

- Your build should compile without errors linking to GoogleTest.
- Tests compile and link against `gtest` or `gtest_main` as expected.
- Running your test binary with GoogleTest prints test results and summary.

Example: Running your test binary

```bash
./your_test_exe
```

Expected output includes the listing of tests run and their success/failure, including detailed failure messages if tests fail.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Project Configuration">
<Accordion title="Include Path Errors">
Ensure include directories point precisely to GoogleTest’s header locations. A common mistake is missing the root `googletest` or `include` folder in the path.

Check your compiler invocation for the `-I` flags.
</Accordion>
<Accordion title="Linker Errors (Unresolved Symbols)">
Verify you linked against the correct GoogleTest library:

- Did you link to `gtest` or `gtest_main`?
- For shared libraries, did you apply the proper compiler flags?

Incorrect linkage or missing libraries will cause unresolved external symbol errors.
</Accordion>
<Accordion title="Runtime Failures or Missing Tests">
- Confirm your test source files are included in the build.
- Validate your test binary runs `RUN_ALL_TESTS()`.

If using custom `main()`, ensure it is correct and initializes GoogleTest properly.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps

- Proceed to [Writing and Running Your First Test](/getting-started/configuration-first-test-validation/writing-first-test) to learn how to author tests using GoogleTest.
- Review [Installation with CMake](/getting-started/setup-prerequisites-installation/installation-cmake) if you need details on building the framework.
- Use [Troubleshooting & Quick Validation](/getting-started/configuration-first-test-validation/troubleshooting-validation) for additional problem-solving guidance.


---

## References

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleTest Primer](../../docs/primer.md)
- [GoogleTest CMake Integration](../../getting-started/setup-prerequisites-installation/installation-cmake.mdx)
- [GoogleMock Customization Points](../googlemock/include/gmock/internal/custom/README.md)


---

For detailed CMake integration examples, see the `googletest/CMakeLists.txt` and `CMakeLists.txt` in the root repository directory.

---

_This document is targeted at C++ developers integrating GoogleTest into their projects and focuses strictly on project-level configuration for successful compilation and linkage._