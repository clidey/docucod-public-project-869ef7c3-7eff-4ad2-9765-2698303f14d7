---
title: "Writing and Running Your First Test"
description: "A concise walkthrough on crafting your first unit test with GoogleTest, compiling and running it, and interpreting the output. This page ensures users achieve their critical first success, building confidence to continue."
---

# Writing and Running Your First Test

A concise walkthrough on crafting your first unit test with GoogleTest, compiling and running it, and interpreting the output. This guide is designed to help you achieve your critical first success, building confidence for further exploration.

---

## 1. Prepare Your Test Environment

Before writing your first test, ensure that you have a working GoogleTest setup.

- Verify that GoogleTest is correctly installed or integrated into your project (see [Installation with CMake](../../getting-started/setup-prerequisites-installation/installation-cmake) for detailed installation instructions).
- Make sure your build environment uses at least C++17 standard, as GoogleTest requires it.
- Include GoogleTest headers and link against its libraries.


## 2. Write a Simple Test Case

GoogleTest uses the `TEST` macro to define test cases. Here's how you write a basic test:

```cpp
#include <gtest/gtest.h>

// The test suite is "FactorialTest", and the specific test is "HandlesZeroInput".
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Verify Factorial(0) returns 1
}
```

### Explanation:
- `TEST(TestSuiteName, TestName)`: Defines a test function whose name is `TestSuiteName.TestName`.
- `EXPECT_EQ(actual, expected)`: The assertion macro verifying your code returns the expected result.

This simple structure is all you need to get started with writing tests.


## 3. Compile Your Test Program

Compile the file containing your test with GoogleTest libraries linked. An example g++ command line for a standalone test:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include \
    -pthread your_test_file.cc \
    /path/to/libgtest.a /path/to/libgtest_main.a -o your_test_executable
```

Tips:
- Adjust `/path/to/googletest` to your actual GoogleTest install location.
- Use `-pthread` to enable multi-threading support.
- You can link against `gtest_main` to get a default `main()` entry point.


## 4. Run Your Test Executable

Once compiled, running the test executable runs all registered tests:

```bash
./your_test_executable
```

Expected output:

```
Running main() from ...
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[----------] 1 test from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Understanding the Output:
- The framework lists each test and its status (OK, FAILED).
- It provides timing information.
- A summary count of tests run and their results.


## 5. Interpret Test Results

- **Passed test**: Execution proceeded and all expectations held.
- **Failed test**: GoogleTest prints a detailed failure message with file location and reason.

Example failure message:

```
your_test_file.cc:10: Failure
Expected equality of these values:
  Factorial(1)
    Which is: 2
  1
```

This output tells you exactly which assertion failed and why.


## 6. Expand Your Test Suite

- Add more tests in the same way: write additional `TEST()` functions.
- Group logically related tests under the same test suite.
- Use assertion macros like `EXPECT_TRUE`, `ASSERT_NE`, `EXPECT_THROW` for various verifications.


## 7. Use Test Fixtures for Shared Setup

For tests sharing setup or common data, use fixtures:

```cpp
class QueueTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Code here runs before each test.
  }
  void TearDown() override {
    // Code here runs after each test.
  }

  Queue<int> q_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q_.size(), 0);
}
```

`TEST_F` associates tests with the fixture, allowing shared initialization and cleanup.


## 8. Run Tests with Additional Options

GoogleTest provides flags to control test execution:

- Run a specific test: `--gtest_filter=FactorialTest.HandlesZeroInput`
- Output in XML: `--gtest_output=xml:report.xml`
- Increase verbosity for debugging: `--gtest_verbose=info`


## Troubleshooting and Tips

- **Linker errors**: Check that you link both `gtest` and `gtest_main` libraries.
- **Missing `main()` function**: If you don't link `gtest_main`, define your own `main()`:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- **Slow tests**: Consider isolating expensive tests or use fixtures to share costly setup.


## Sample Project Structure

```
my_project/
  tests/
    factorial_test.cc  # Your GoogleTest tests
  src/
    factorial.cc
    factorial.h
```

Build and run tests as part of your project build system.


## Reference Links

- [GoogleTest Primer](../../docs/primer.md) â€” foundational concepts and tutorials.
- [Installation with CMake](../../getting-started/setup-prerequisites-installation/installation-cmake)
- [Mocking for Dummies](../../docs/gmock_for_dummies.md) for extending tests with mocks.
- [GoogleTest Assertions Reference](../../api-reference/core-assertions-matchers/assertions-reference)

---

## Summary

Writing and running your first test with GoogleTest is straightforward:
1. Set up your environment with GoogleTest correctly.
2. Use the `TEST` macro to create test cases.
3. Compile using the appropriate compiler flags and link libraries.
4. Run your test executable to see results.
5. Use fixtures to share setup for related tests.

This page ensures you achieve your critical first test success, building a solid base for further learning.
