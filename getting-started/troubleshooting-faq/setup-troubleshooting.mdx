---
title: "Troubleshooting Setup Problems"
description: "Lists frequently encountered setup and integration issues, such as unsupported compiler flags or missing dependencies. Provides actionable advice to resolve problems quickly."
---

# Troubleshooting Setup Problems

This page addresses the most frequently encountered issues during the setup and integration of GoogleTest and GoogleMock. It provides actionable advice on how to quickly identify, diagnose, and resolve problems such as unsupported compiler flags, missing dependencies, linker errors, and incorrect build configurations. Use this guide to overcome obstacles and get your testing environment running reliably.

---

## 1. Common Setup Issues and Solutions

### Unsupported Compiler Flags

GoogleTest and GoogleMock require C++17 support. Using a compiler or flags that do not support C++17 will cause build failures.

**Resolution:**

- Verify your compiler version supports C++17.
- Ensure your build system explicitly sets the C++ standard to 17 or higher. For CMake, add:

  ```cmake
  set(CMAKE_CXX_STANDARD 17)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
  ```

- On MSVC and Clang, GoogleTest overrides some flags; review those in your build logs.

<Tip>
If you encounter errors related to deprecated or unsupported flags such as `/MD` or `/EHsc`, adjust your compiler settings accordingly. GoogleTest’s CMake scripts provide macros like `gtest_force_shared_crt` to help with MSVC runtime linkage mismatches.
</Tip>

---

### Missing Dependencies or Headers

If the compiler complains about missing headers like `<gtest/gtest.h>` or `<gmock/gmock.h>`, the include paths are likely not set correctly.

**Resolution:**

1. Confirm that GoogleTest and GoogleMock source or installed headers are visible to your build system.
2. For CMake, ensure you use `find_package(GTest REQUIRED)` or properly add GoogleTest as a subdirectory.
3. Check your `include_directories` paths or target include paths include the GoogleTest headers.

<Warning>
Avoid manually copying GoogleTest headers into your project; prefer referencing from the original source or installed location to simplify updates and consistency.
</Warning>

---

### Linker Errors (Undefined Symbols)

Linker errors such as unresolved references to GoogleTest or GoogleMock functions indicate that the libraries are not linked correctly.

**Resolution:**

- Link against `gtest`, `gtest_main`, `gmock`, or `gmock_main` libraries as appropriate.
- Prefer `gtest_main` or `gmock_main` libraries if you do not provide your own `main()` function.
- When using CMake, link using targets:

  ```cmake
  target_link_libraries(your_test_target GTest::gtest_main GTest::gmock)
  ```

- If you build GoogleTest as a shared library, make sure to add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` to your compile flags.

<Tip>
GoogleTest and GoogleMock headers and libraries must be built and linked consistently with your project's compiler and runtime settings (e.g., debug vs. release, static vs. dynamic CRT).
</Tip>

---

### Running Tests Fails with Missing Main or Initialization

Errors such as "undefined reference to `main`" or failing to initialize GoogleMock/GoogleTest typically arise when the test executable lacks a suitable entry point.

**Resolution:**

- Link with `gtest_main` or `gmock_main` which contains a default `main()` function.
- Alternatively, provide your own `main()` as follows:

  ```c++
  #include <gmock/gmock.h>
  
  int main(int argc, char** argv) {
    testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
  }
  ```

<Tip>
Always call `testing::InitGoogleMock()` instead of `testing::InitGoogleTest()` when using GoogleMock features, as it also initializes GoogleTest.
</Tip>

---

### Incorrect or Missing GoogleMock Flags Parsing

Some command-line flags prefixed with `--gmock_` control GoogleMock’s behavior, such as verbosity or default mock behavior. Failure to parse these flags may cause unexpected runtime behavior.

**Resolution:**

- Ensure you initialize GoogleMock using `testing::InitGoogleMock(&argc, argv);` to allow proper removal and processing of GoogleMock flags.
- Avoid manually parsing command-line flags before GoogleMock initialization.

---

## 2. Best Practices to Avoid Setup Issues

- **Use Supported Platforms and Compilers:** Refer to the [Supported Platforms and Toolchains](/overview/integration-platforms/platform-support) page to verify your development environment.
- **Prefer CMake Build:** Use the official CMake build scripts provided in the repository for streamlined configuration.
- **Check Build Logs:** Review compiler and linker output carefully to identify flag mismatches or missing files.
- **Consistent Build Configuration:** Keep runtime libraries (static vs dynamic), optimization levels, and exception settings consistent between your project and GoogleTest/GoogleMock.
- **Use Official Entry Points:** Linking against `gtest_main` or `gmock_main` reduces boilerplate and errors related to `main()`.

<Tip>
If integrating into an existing build system, consider adding GoogleTest as a Git submodule or via CMake’s `FetchContent` to ensure version compatibility and ease of updates.
</Tip>

---

## 3. Troubleshooting Checklist

Use this checklist to quickly narrow down common causes when setup problems occur.

- [ ] **Is C++17 enabled and supported by your compiler?**
- [ ] **Are all necessary GoogleTest and GoogleMock headers available and included?**
- [ ] **Are GoogleTest/GoogleMock libraries linked correctly, consistent with your build configuration?**
- [ ] **Is a proper `main()` function provided or linked via `gtest_main`/`gmock_main`?**
- [ ] **Are command-line flags initialized via `InitGoogleMock()` before `RUN_ALL_TESTS()`?**
- [ ] **Are compiler/linker flags compatible with your platform (e.g., no conflicting runtime linkage)?**

---

## 4. Common Error Examples and How to Resolve Them

### Example: Linker Error Missing `main`

```
undefined reference to `main`
```

**Fix:** Make sure your test executable links against `gtest_main` or `gmock_main`. If providing your own `main()`, initialize GoogleMock correctly.

### Example: Header Not Found

```
fatal error: gtest/gtest.h: No such file or directory
```

**Fix:** Add the include path of GoogleTest headers to your compiler’s include directories.

### Example: Runtime Failure Due to Missing Initialization

Tests fail silently or do not run.

**Fix:** Confirm you call `testing::InitGoogleMock(&argc, argv);` at program start.

---

## 5. Additional Resources

For deeper troubleshooting and setup guidance, consult the following:

- [Prerequisites & Supported Platforms](/getting-started/prereqs-installation/prerequisites)
- [Installation Methods](/getting-started/prereqs-installation/installation-methods)
- [Configuration Basics](/getting-started/prereqs-installation/configuration-basics)
- [Validating the Installation](/getting-started/quickstart-validation/quick-validation)
- [Getting Started FAQ](/getting-started/troubleshooting-faq/faq-getting-started)

<Tip>
If an issue persists despite following this guide, consider seeking help via the [GoogleTest Community and Support channels](/faq/support-and-resources/where-to-get-help).
</Tip>

---

## 6. Summary

By following the steps and resolutions in this guide, you can quickly overcome common setup hurdles involving compiler flags, missing dependencies, linkage errors, and initialization problems. Ensuring your environment meets the prerequisites, your build system includes correct references, and you properly initialize GoogleMock and GoogleTest are key to a smooth setup experience.

Keep this page handy as a first stop whenever setup issues arise.
