---
title: "Troubleshooting Installation and Build Issues"
description: "A guide to resolving the most frequent installation and configuration problems on all platforms, including common compiler errors, dependency pitfalls, and platform-specific solutions."
---

# Troubleshooting Installation and Build Issues

This guide helps you quickly identify and resolve the most common installation and build problems when setting up GoogleTest and GoogleMock on all supported platforms. Whether you encounter compiler errors, dependency conflicts, or platform-specific quirks, this document offers practical solutions and tips to get your test environment running smoothly.

---

## 1. Common Installation Problems and Solutions

### Missing or Incorrect Compiler Version

GoogleTest requires a compiler supporting at least C++17. Confirm your compiler version meets the minimum specification:

- GCC 7.1 or later
- Clang 5.0 or later
- MSVC 2015 Update 3 or later

To check your compiler version:

```bash
gcc --version
clang --version
cl
```

If your compiler is outdated, update or switch to a modern version.

<Warning>
Building with unsupported compilers can cause obscure errors or runtime failures. Always ensure compatibility before proceeding.
</Warning>

---

### Missing Headers or Libraries

Ensure you have all necessary system and development libraries installed. Common missing components include:

- pthreads for thread support (Linux/Mac)
- Windows SDK (for MSVC users)

On Linux:

```bash
sudo apt-get install build-essential libpthread-stubs0-dev
```

On macOS:

```bash
xcode-select --install
```

On Windows:

Make sure Visual Studio (with C++ workloads) and Windows SDKs are installed.

<Note>
GoogleTest depends on pthreads for thread safety. On systems without pthreads support, some features may be limited.
</Note>


### Dependency Conflicts

If using CMake to build, ensure no conflicting versions or sources of GoogleTest/GoogleMock exist in your build environment.

Common causes:

- Multiple `googletest` directories included
- Outdated submodules mixed with newer source code

Resolve by cleaning your build directory and synchronizing submodules:

```bash
rm -rf build
git submodule update --init --recursive
mkdir build && cd build
cmake ..
make
```


## 2. Platform-Specific Build Issues

### Linux

- **pthread linkage errors:** Ensure pthread is linked by adding `-pthread` flag in your build system.
- **Makefile issues:** Prefer using the provided CMakeLists.txt rather than manual Makefiles for consistent builds.

### macOS

- **Xcode or Command Line Tools missing:** Install using `xcode-select --install`.
- **Code signing errors:** Temporarily disable gatekeeper or configure your environment to trust the binaries.

### Windows

- **Runtime mismatch errors:** Ensure consistent linkage of runtime libraries. If you build GoogleTest statically, your project must also use static runtime, or enable `gtest_force_shared_crt` in the CMake configuration.
  
- **Entry point missing (_main) errors:** Link with `gtest_main` or `gmock_main` to provide the default main function.

- **Visual Studio warnings:** Use `/bigobj` compiler flag if you hit "object file too large" errors when building large mocks.

<Warning>
Mixing Debug and Release runtime libraries between your project and GoogleTest builds leads to unstable tests and linking problems.
</Warning>


## 3. Build System Integration Issues

### Using CMake

- **Incorrect CMake options:** Use `-DBUILD_GMOCK=ON` to include GoogleMock and `-DBUILD_GTEST=ON` for GoogleTest.
- **Pthread detection:** If CMake does not detect pthread, manually specify or disable pthread usage with `-Dgtest_disable_pthreads=ON` if your platform does not support it.

Example CMake configuration for a project using GoogleTest/GoogleMock:

```bash
cmake .. -DBUILD_GMOCK=ON -DCMAKE_CXX_STANDARD=17
make
```


### Using pkg-config

When using installed libraries, confirm the `pkg-config` file is correct and points to the installed headers and libraries.

```bash
pkg-config --cflags gmock_main
pkg-config --libs gmock_main
```

If incorrect, reinstall or regenerate the pkg-config files.


## 4. Common Compiler Errors and Their Fixes

### Undefined References to GoogleTest/GoogleMock Symbols

- You likely forgot to link against the appropriate libraries.
- Link with `-lgtest_main -lgtest -lgmock_main -lgmock` as needed.

For example, with g++:

```bash
g++ my_test.cpp -lgtest_main -lgtest -lpthread -o my_test
```

### Macro Conflicts

- If your code or other libraries define macros conflicting with GoogleTest macros (like `ASSERT_*`), define `-DGTEST_DONT_DEFINE_TEST=1` to rename them with the `GTEST_` prefix.
- Adjust your test code to use `GTEST_TEST()` instead of `TEST()`, etc.

### Linking Errors on Windows with Unicode and _tmain

- Use the `main()` function variant instead of `_tmain()`.
- Link with `gmock_main.lib` or `gtest_main.lib` for default `main()` if your project does not provide one.


## 5. Tips for Reliable Setup

- Always clean your build directory (`rm -rf build` or equivalent) when switching build options or updating GoogleTest sources.
- Use the GoogleTest-provided `gtest_main` or `gmock_main` targets for your executables to avoid manually writing `main()`.
- Define all test cases and fixtures in your source code clearly to avoid test discovery issues.
- Keep GoogleTest and GoogleMock versions in sync to avoid incompatibilities.

<Check>
Verify your installation and build by running the included sample tests:

```bash
./build/googlemock/gtest/gtest
./build/googlemock/gtest/gtest_main
```

These binaries should run and report results without errors.
</Check>


## 6. Resolving Flag Parsing and Initialization Issues

If you notice unexpected behavior related to command-line flags:

- GoogleMock processes `--gmock_*` flags at initialization.
- To debug flag parsing issues, run your test executable with `--gmock_verbose=info` to get detailed logs.
- Ensure that your test `main()` calls `testing::InitGoogleMock(&argc, argv);` before `RUN_ALL_TESTS()`.

Example minimal `main()` for GoogleMock:

```c++
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```


## 7. Troubleshooting Build Logs and Diagnostic Tips

- Inspect build logs carefully for missing includes or failed commands.
- Check for warnings related to macro redefinitions or missing dependencies.
- Use `VERBOSE=1` with CMake (`cmake --build . --verbose`) to see exact compiler commands.
- When all else fails, consult [GoogleTest GitHub Issues](https://github.com/google/googletest/issues) for community-reported solutions.

---

## 8. Additional Resources

- [GoogleTest README](https://github.com/google/googletest/blob/main/README.md) — Installation and build instructions.
- [System Requirements & Supported Platforms](../getting-started/requirements-installation/system-requirements.md) — Confirm supported compilers and systems.
- [Installing on Windows](../getting-started/requirements-installation/install-on-windows.md) — Windows-specific build guidance.
- [Installing on Linux](../getting-started/requirements-installation/install-on-linux.md) — Linux installation steps.
- [GoogleMock README](../googlemock/README.md) — Mocking framework specific issues.

---

By following these steps and advice, you will overcome the majority of setup challenges and have a robust GoogleTest/GoogleMock installation environment ready for productive testing.

<Tip>
Start troubleshooting by verifying compiler versions and cleaning your build environment. Often, these straightforward steps address the majority of build issues.
</Tip>

<Tip>
When encountering linker errors, double-check that your linking order includes `gtest`, `gmock`, and threading libraries in the correct sequence.
</Tip>