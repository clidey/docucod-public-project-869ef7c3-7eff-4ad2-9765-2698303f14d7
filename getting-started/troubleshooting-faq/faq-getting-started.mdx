---
title: "Getting Started FAQ"
description: "Answers the most common user questions about getting up and running, including project structure, library linking, test discovery, and version compatibility."
---

# Getting Started FAQ

This FAQ addresses the most common questions users face when beginning to work with GoogleTest and GoogleMock. It covers project structure, linking guidelines, test discovery, version compatibility, and practical tips to ensure a smooth onboarding experience.

---

## 1. What Is the Recommended Project Structure for Using GoogleTest and GoogleMock?

To organize your tests efficiently:

- Keep your test files separate from production source files.
- Place tests in a dedicated directory, e.g., `tests/` or alongside source files with a `.test.cc` suffix.
- Define mock classes in header files accessible to all tests that need them.
- Avoid placing mock definitions inside test files if they are shared or owned by other teams.

**Tip:** For classes you do not own, define mock classes in a dedicated testing package or subdirectory, so updates stay centralized and maintenance is easier.


## 2. How Should I Link GoogleTest and GoogleMock Libraries? 

GoogleMock is bundled within GoogleTest and requires linking to the appropriate libraries:

- When using CMake, link against `gtest`, `gtest_main`, `gmock`, and `gmock_main` as appropriate.
- Use `gmock_main` if you want to use the default `main()` function that initializes GoogleMock and GoogleTest automatically.
- If providing your own `main()`, link against `gmock` and `gtest` but omit the `gmock_main` or `gtest_main` libraries.

### Example CMake snippet:

```cmake
find_package(GTest REQUIRED)
# Add your test executable
add_executable(my_test test_file.cc)
target_link_libraries(my_test PRIVATE GTest::gmock_main)
```

**Note:** The linker order is important; GoogleMock depends on GoogleTest.


## 3. How Does GoogleTest Discover and Run Tests?

- Tests are discovered automatically from all source files containing `TEST()`, `TEST_F()`, `TEST_P()`, or `TYPED_TEST()` macros.
- Linking your test executables with GoogleTest libraries automatically registers these tests.
- Running the executable with no arguments runs all discovered tests.
- You can filter tests using the `--gtest_filter` flag, e.g., `./my_test --gtest_filter=FactorialTest.*`.

### Running tests:

```bash
./my_test
```

or with filtering:

```bash
./my_test --gtest_filter=MySuite.MyTest
```


## 4. How to Manage Version Compatibility?

- GoogleTest and GoogleMock are released together and share the same versioning.
- Always use compatible versions of GoogleTest and GoogleMockâ€”normally provided together in the `googletest` repository.
- When updating, consult release notes for breaking changes or migration advice.

### Verifying version compatibility:

- Use the latest stable release for new projects.
- Refer to the `CHANGELOG` documentation and `Breaking Changes & Migration Guide`.


## 5. Why Do Some Mock Methods Invoke Real Implementations Instead of Mocks?

- Only *virtual* methods can be mocked directly.
- If a mock method is not declared `virtual` in the base class, the real method will be called.

**Resolution:** Ensure that all methods you want to mock are declared `virtual` in your interface or base class.


## 6. How Do I Mock Overloaded Methods?

- You can mock overloaded methods by explicitly specifying the signature with `MOCK_METHOD`.
- Always include the full argument list and qualifiers (e.g., `(const, override)`) to disambiguate.

Example:

```cpp
MOCK_METHOD(int, Add, (int x), (override));
MOCK_METHOD(int, Add, (int n, Element x), (override));
```


## 7. How Do I Control the Expected Number of Calls to a Mock Method?

- Use `EXPECT_CALL()` with `.Times()` to specify call cardinality.
- Omit `.Times()` to infer from `.WillOnce()` or `.WillRepeatedly()` clauses.

Key cardinalities include:

- `Times(0)` to expect the method is never called.
- `Times(AnyNumber())` to allow any number of calls.
- `Times(AtLeast(n))` to expect the method at least *n* times.

Example:

```cpp
EXPECT_CALL(mock_object, DoSomething()).Times(3);
EXPECT_CALL(mock_object, DoSomethingElse()).Times(AtLeast(1));
```


## 8. What Is the Difference Between `EXPECT_CALL()` and `ON_CALL()`?

- `EXPECT_CALL()` both defines behavior and sets an expectation that the call will occur.
- `ON_CALL()` defines only the default behavior for calls when no expectation is set.

**Best practice:** Use `ON_CALL()` to set common/default behaviors and reserve `EXPECT_CALL()` for calls you actually want to verify occur.


## 9. How Can I Avoid Warnings About Uninteresting Calls?

- Uninteresting calls occur when methods with no `EXPECT_CALL()` get called.
- Use `NiceMock<T>` to suppress warnings on uninteresting calls.
- Use `StrictMock<T>` to treat uninteresting calls as errors.

Example:

```cpp
NiceMock<MockFoo> nice_mock;
EXPECT_CALL(nice_mock, DoThis());
```


## 10. What Are Common Causes of Installation or Setup Issues?

- Missing virtual destructors in mocked interfaces lead to heap checker failures.
- Compiler incompatibilities or flags not matching GoogleTest's requirements (such as missing C++17 support).
- Incorrect linking order or missing libraries.

**Troubleshooting tips:**

- Confirm minimum C++ standard support (C++17 required).
- Use the `--gmock_verbose=info` flag to get detailed logs of what GoogleMock is doing.
- Review the [Troubleshooting Setup Problems](https://google.github.io/googletest/quickstart/setup-troubleshooting) page.


## Additional Tips & Resources

- When writing mock classes, place `MOCK_METHOD` declarations in the `public:` section.
- If you mock a non-virtual method, consider alternative design approaches, such as dependency injection with interfaces.
- Use the built-in matchers and actions to write expressive and maintainable tests.

---

## Related Documentation

- [Getting Started: Writing and Running Your First Test](/getting-started/quickstart-validation/hello-test)
- [Installation Methods](/getting-started/prereqs-installation/installation-methods)
- [Configuration Basics](/getting-started/prereqs-installation/configuration-basics)
- [Troubleshooting Setup Problems](/getting-started/troubleshooting-faq/setup-troubleshooting)
- [Mocking Reference](/docs/reference/mocking.md)
- [Legacy gMock FAQ](/docs/gmock_faq.md)

---

<Callout>

**Note:** This FAQ is designed to empower you with foundational understanding and to quickly solve common obstacles when getting started with GoogleTest and GoogleMock. For detailed coding examples and advanced usage, consult the other Getting Started and Guides sections.

</Callout>
