---
title: "Project Configuration"
description: "Incorporate GoogleTest into your own C++ project, covering include paths, linking libraries, and minimal code to make sure your build environment recognizes the framework. Examples demonstrate integration for both CMake and Bazel workflows."
---

# Project Configuration

Integrating GoogleTest into your C++ project requires configuring your build environment to recognize its headers and libraries. This guide walks you through setting up **include paths**, **linking** the GoogleTest libraries, and writing minimal code to verify the integration. Sample configurations for both **CMake** and **Bazel** build workflows are included to ensure smooth incorporation.

---

## 1. Prerequisites

Before you begin, ensure you have:

- A C++17-compliant compiler and build system (refer to the [System Requirements](/getting-started/requirements-installation/system-requirements) page).
- GoogleTest source code available either installed on your system or included directly in your project.
- Familiarity with CMake or Bazel, according to your chosen build system.

---

## 2. Setting Up Include Paths

GoogleTest headers must be accessible during compilation.

### For CMake

If you have installed GoogleTest system-wide or via package managers, use `find_package`:

```cmake
find_package(GTest CONFIG REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})
```

If adding GoogleTest source directly, use `add_subdirectory`:

```cmake
add_subdirectory(path/to/googletest)
include_directories(${gtest_SOURCE_DIR}/include)
```

### For Bazel

Declare dependencies in your `BUILD` files and set the include path in your `cc_library` or `cc_test` rules using the appropriate `deps` and `includes` attributes pointing to `@com_google_googletest//googletest/include`.

---

## 3. Linking GoogleTest Libraries

To compile and link tests, your build system must link against GoogleTest libraries.

### Recommended Libraries

- `gtest`: Core GoogleTest library
- `gtest_main`: Tests with a provided `main()` entry point

### For CMake

Use the imported targets provided by `find_package`:

```cmake
target_link_libraries(your_test_target PRIVATE GTest::gtest_main)
# Alternatively, link with GTest::gtest if you provide your own main()
```

If using the source directly:

```cmake
target_link_libraries(your_test_target PRIVATE gtest_main)
```

### For Bazel

Add `@com_google_googletest//googletest` or `@com_google_googletest//googletest_main` as a dependency in your `cc_test`.

---

## 4. Minimal Example Code to Verify Integration

This example shows a basic test case that your build configuration should compile and run successfully.

```cpp
#include <gtest/gtest.h>

// Simple test case named 'ExampleTest' with test 'BasicAssertion'
TEST(ExampleTest, BasicAssertion) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Notes:
- If you link to `gtest_main`, you do not need to provide `main()` yourself.
- The test framework initializes with `InitGoogleTest`, then runs all tests with `RUN_ALL_TESTS()`.

---

## 5. Sample CMake Configuration

Here is a sample minimal `CMakeLists.txt` snippet integrating GoogleTest using `find_package`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(ExampleProject LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(GTest CONFIG REQUIRED)

add_executable(MyTests test/example_test.cpp)

# Link with gtest_main for automatic main() function
target_link_libraries(MyTests PRIVATE GTest::gtest_main)

# Enable testing
enable_testing()
add_test(NAME MyTests COMMAND MyTests)
```

**Build and run:**

```bash
mkdir build && cd build
cmake ..
cmake --build .
ctest
```

---

## 6. Sample Bazel Setup

Example snippet for your `BUILD` file to define and run tests with GoogleTest:

```python
cc_test(
    name = "example_test",
    srcs = ["example_test.cpp"],
    deps = ["@com_google_googletest//googletest"]
)
```

To use `gtest_main` (which includes `main()`):

```python
cc_test(
    name = "example_test",
    srcs = ["example_test.cpp"],
    deps = ["@com_google_googletest//googletest_main"]
)
```

Run test with:

```bash
bazel test //:example_test
```

---

## 7. Best Practices & Tips

- Use `gtest_main` when you want to avoid writing your own `main()`.
- When writing custom `main()`, ensure to call `::testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
- Keep GoogleTest source and your project compiled with compatible compiler versions and flags.
- Prefer to keep GoogleTest dependencies isolated to the test targets to avoid polluting application binaries.

---

## 8. Troubleshooting

<AccordionGroup title="Common Project Configuration Issues">
<Accordion title="GoogleTest headers not found">
Verify your include paths are correctly set. When using CMake, ensure `find_package(GTest CONFIG REQUIRED)` succeeds. If not, verify GoogleTest installed location or use `add_subdirectory()`.
</Accordion>
<Accordion title="Linker cannot find gtest_main or gtest libraries">
Ensure your target links against the correct GoogleTest library such as `GTest::gtest_main` in CMake or the correct Bazel dependency.
Make sure the libraries are built and available.
</Accordion>
<Accordion title="Multiple definitions of main() errors">
This happens if you provide your own `main()` but also link to `gtest_main` or `gmock_main`. Remove your own `main()` or link only to `gtest` (not `gtest_main`).
</Accordion>
<Accordion title="Runtime errors when running tests">
Check if your `main()` calls `InitGoogleTest` before `RUN_ALL_TESTS`. If using a custom entry, ensure proper initialization.
</Accordion>
</AccordionGroup>

---

## 9. Next Steps

After successfully configuring your project to build and link with GoogleTest:

- Write and run your first meaningful test with [Writing and Running Your First Test](/getting-started/configuration-bootstrap/first-test-case).
- Explore advanced test organization and fixtures as explained in the [Project Configuration] and [Core Features at a Glance] pages.
- Troubleshoot any issues with the [Troubleshooting Common Issues] page.

---

## References

- [System Requirements](/getting-started/requirements-installation/system-requirements)
- [Installation with CMake](/getting-started/requirements-installation/installation-cmake)
- [Installation with Bazel](/getting-started/requirements-installation/installation-bazel)
- [Writing and Running Your First Test](/getting-started/configuration-bootstrap/first-test-case)
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)

---

## Summary

Incorporating GoogleTest into your C++ project involves setting proper include paths, linking against the appropriate libraries, and verifying integration with minimal test code. This page provides actionable examples for both CMake and Bazel, guiding you to a working test build configuration quickly and reliably. Following this setup, you will be ready to write and run your first tests seamlessly.