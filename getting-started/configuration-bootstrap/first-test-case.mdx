---
title: "Writing and Running Your First Test"
description: "Guided walk-through for creating your first test case in C++. Covers basics of the TEST macro, adding assertions, and running the test binary to validate that everything is working. Includes troubleshooting tips for common errors."
---

# Writing and Running Your First Test

Welcome to your first step with GoogleTest! This guide walks you through writing your first test case in C++ using the GoogleTest framework. By the end, you'll understand how to define a test, add assertions to verify behavior, and run your test binary to confirm correct operation.

---

## 1. Understanding the `TEST` Macro: Defining Your First Test

At the core of GoogleTest lies a simple but powerful macro: `TEST`. It defines an individual test case inside a test suite.

### Syntax
```cpp
TEST(TestSuiteName, TestName) {
  // Test statements and assertions go here.
}
```

- `TestSuiteName`: Groups related tests. Choose a clear, descriptive name without underscores.
- `TestName`: Identifies this individual test uniquely within the suite. Also avoid underscores.

### Important Naming Rules

- Both names must be valid C++ identifiers.
- Avoid underscores (`_`) to prevent naming conflicts and reserved usages.
- Different test suites can contain tests with the same `TestName`.

### Example: Testing a Simple Factorial Function
```cpp
// Function under test
int Factorial(int n);

// Test Suite: FactorialTest, Tests for factorial function
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Test that factorial(0) == 1
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

This example defines simple test cases to verify that the `Factorial` function behaves correctly for specific inputs.

---

## 2. Adding Assertions: Verifying Expected Behavior

GoogleTest offers many assertion macros to check your code's correctness. They come in two forms:

- **Fatal assertions (`ASSERT_*`)**: Abort the current test function on failure.
- **Nonfatal assertions (`EXPECT_*`)**: Report a failure but continue running the test.

Examples include:

- `EXPECT_EQ(expected, actual)` — check equality
- `EXPECT_NE(val1, val2)` — check inequality
- `EXPECT_TRUE(condition)` / `EXPECT_FALSE(condition)` — boolean checks

### Adding a Custom Message
You can stream extra details into assertions for better debugging:
```cpp
EXPECT_EQ(Factorial(3), 6) << "Factorial of 3 should be 6";
```

---

## 3. Writing the `main()` Function: Running Your Tests

A GoogleTest program needs to initialize the framework and execute all registered tests. Here’s the minimal `main()`:

```cpp
#include "gtest/gtest.h"

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);  // Parse command-line flags
  return RUN_ALL_TESTS();                // Executes all tests and returns status
}
```

> **Note:** You must not ignore the return value of `RUN_ALL_TESTS()` as it communicates success or failure to the environment.

If you prefer not to write `main()`, you may link with the `gtest_main` library which provides a default `main()`.

---

## 4. Building and Running Your Test Program

Assuming you have GoogleTest installed and your project configured, compile your test program as usual (linking in GoogleTest).

Example using `g++`:
```bash
g++ -std=c++17 -isystem /usr/local/include -pthread your_test.cc -L/usr/local/lib -lgtest -lgtest_main -o your_test
```
Replace include and library paths with your system's GoogleTest locations.

### Running the Tests

Run your test binary:
```bash
./your_test
```
Expected output will look like:
```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This confirms your tests ran and passed successfully.

---

## 5. Troubleshooting Common Errors

### Compilation Errors About Missing `main`
If you get errors about missing `main`, you likely forgot to provide one or link to `gtest_main`. Add a `main()` function like above or link with `-lgtest_main`.

### Assertion Failures
If your test fails unexpectedly, read the failure messages closely. GoogleTest output includes file and line number along with assertion details.

### Naming Conflicts
Avoid underscores in `TestSuiteName` and `TestName` to prevent linker or runtime errors caused by generated class name collisions.

### Linking Problems
Ensure your build links against both `gtest` and `pthread` (on POSIX). On Windows, make sure to link correctly against the GoogleTest libraries and runtime.

---

## 6. Best Practices for Your First Tests

- Group related tests logically inside test suites.
- Use `EXPECT_` rather than `ASSERT_` where possible to allow more failures per run.
- Add informative failure messages to ease debugging.
- Keep test cases focused and independent.
- Run tests frequently during development.

---

## 7. Next Steps

After successfully writing and running your first tests, explore the following to deepen your understanding:

- [Test Fixtures and `TEST_F()`](https://github.com/google/googletest/blob/main/docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests): Share setup across multiple tests.
- [Parameterized Tests (`TEST_P()`)](https://github.com/google/googletest/blob/main/docs/advanced.md#value-parameterized-tests): Run tests with different input values easily.
- [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md): Learn more specialized assertions.
- [Global Setup and Teardown](https://github.com/google/googletest/blob/main/docs/advanced.md#global-set-up-and-tear-down): Manage resources for multiple tests.

Continue to the [Writing and Structuring Tests Guide](../guides/core-testing-workflows/writing-and-structuring-tests.md) for comprehensive instructions on building robust test suites.

---

## References

- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Testing Reference](https://github.com/google/googletest/blob/main/docs/reference/testing.md)
- [GoogleTest FAQ](https://github.com/google/googletest/blob/main/docs/faq.md)
- [Installation with CMake](../getting-started/requirements-installation/installation-cmake.md)
- [Project Configuration Guide](../getting-started/configuration-bootstrap/project-setup.md)

---

With this foundation, you are equipped to write your first effective tests and confidently verify your C++ code using GoogleTest.


<Check>
Make sure you compile your test program with the appropriate C++17 standard support and link with GoogleTest libraries and pthread (if required).
</Check>

<Note>
Test names and suite names should avoid underscores to prevent naming conflicts and reserved keyword usages.
</Note>

<Tip>
Use `EXPECT_*` assertions when you want a test to continue after failure, and `ASSERT_*` when failure should halt the current test function.
</Tip>