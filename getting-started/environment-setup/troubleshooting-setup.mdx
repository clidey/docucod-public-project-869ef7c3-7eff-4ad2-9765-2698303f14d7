---
title: "Troubleshooting Setup & Installation"
description: "Find solutions to common installation and configuration issues. This page helps you resolve typical mistakes, missing dependencies, and environmental conflictsâ€”even before they slow you down."
---

# Troubleshooting Setup & Installation

Discover clear solutions to common problems that arise during the installation and configuration of GoogleTest and GoogleMock. This guide helps you resolve typical mistakes, identify missing dependencies, and fix environmental conflicts before they impede your testing workflow.

---

## 1. Common Installation Issues and Fixes

### Issue: Missing or incompatible dependencies

- **Problem:** The build or compilation fails due to missing libraries, unsupported compilers, or incorrect platform setup.
- **Solution:**
  1. Verify your platform and compiler support by checking the [Supported Platforms and Dependencies](/overview/integration-adoption/supported-platforms) page.
  2. Ensure C++11 or later is enabled in your build system.
  3. Install required system packages for threading and regular expressions as specified by your OS.
  4. Confirm your build tools (CMake, Bazel, or make) are up to date.

<Tip>
Run `cmake --version` or `bazel version` to check your build tools.
</Tip>

### Issue: Conflicts with existing system-wide GoogleTest

- **Problem:** Your project picks up an outdated or incompatible system-installed GoogleTest version causing confusion.
- **Solution:**
  1. Use an isolated vendored copy of GoogleTest (e.g., via FetchContent in CMake).
  2. Explicitly set include directories and link targets in your build scripts to point to the correct version.

### Issue: Compilation errors due to incorrect macro usage

- **Problem:** Compiler error messages about `TEST_F` or `TEST` macros suggest misuse or missing declarations.
- **Solution:**
  1. Ensure all test fixture classes are defined before use with `TEST_F`.
  2. Avoid misspelling `SetUp()` as `Setup()` inside fixtures.
  3. Confirm you include the relevant GoogleTest headers in your test source files.

### Issue: Linking errors with `gtest_main` or `gmock_main`

- **Problem:** Undefined reference errors for `main()` indicate missing linker libraries.
- **Solution:**
  1. If using default main(), link against `gtest_main` or `gmock_main` libraries.
  2. When writing a custom `main()`, call `testing::InitGoogleTest(&argc, argv);` or `testing::InitGoogleMock(&argc, argv);` before `RUN_ALL_TESTS()`.

<Tip>
When included, `gtest_main` and `gmock_main` provide an entry point, simplifying test setup.
</Tip>

---

## 2. Configuration Pitfalls

### Problem: Arguments not parsed correctly in command line

- Incorrect handling of flags like `--gtest_filter` or `--gmock_verbose` may cause unexpected behavior.

**Resolution:** Always call `InitGoogleTest()` or `InitGoogleMock()` *before* running tests. These functions strip recognized GoogleTest and GoogleMock flags from `argv` properly.

Example minimal `main()`:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Problem: Tests not discovered or run

- Could be caused by missing `RUN_ALL_TESTS()` call or improper initialization.

**Resolution:** Confirm your `main()`:

- Uses `RUN_ALL_TESTS()` exactly once.
- Calls `InitGoogleTest()` or `InitGoogleMock()` first.

Avoid multiple calls or ignoring the return value, which leads to unpredictable results.

---

## 3. Environment-Specific Issues

### On Windows

- Use supported Visual Studio versions with C++11 or later.
- For UNICODE builds, linking errors with `main()` sometimes occur; ensure you use the plain `main()` instead of `_tmain()`.

### On Linux/Mac

- Installation prerequisites include pthread and regex support.
- Watch out for conflicts when multiple GoogleTest versions are installed.

---

## 4. How to Diagnose Problems

### Enable Verbose Output

Use GoogleMock's verbosity flag to get detailed logs:

```
--gmock_verbose=info
```

This prints call traces and internal decisions, helping to identify where expectations fail or calls are unmatched.

### Common Debugging Steps

1. Double-check include and link paths.
2. Clean your build directory and rebuild to rule out stale artifacts.
3. Run minimal sample tests (like the basic factorial example) to isolate issues.
4. Verify compiler and linker versions.

---

## 5. Troubleshooting: Typical Error Messages and Solutions

| Error Message                                   | Cause                                          | Fix                                                    |
|------------------------------------------------|------------------------------------------------|--------------------------------------------------------|
| `undefined reference to main`                   | Missing `gtest_main` or `gmock_main` linkage  | Link with `-lgtest_main` or add `gtest_main` target     |
| `virtual outside class declaration` with TEST_F | Test fixture class defined *after* TEST_F usage | Define fixture classes before using `TEST_F()`         |
| `'SetUp' function not found`                    | Misspelled `SetUp` method as `Setup`           | Rename method to `SetUp()` with uppercase U            |
| `no matching function for Invoke` (gMock)      | Incorrect use of mock action or missing header   | Verify mocking usage according to [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) |

---

## 6. When to Seek Further Help

If you have exhausted these tips:

- Review the [Overview and Quickstart Guide](/overview/integration-adoption/quickstart) for setup confirmation.
- Visit the [Installation & Setup FAQ](/faq/getting-started-issues/install-setup-faq) for more detailed resolutions.
- Check community support channels linked in the documentation for assistance.

---

## 7. Additional Best Practices for Smooth Setup

- Always prefer the latest stable release and verify supported platform compatibility.
- Use the `gtest` and `gmock` submodules or packages consistently.
- Automate your build with tools that handle dependencies robustly (CMake or Bazel).
- Keep test fixtures and test macros consistent to avoid compilation errors.

<Tip>
Regularly run small test suites after changes to ensure environment integrity.
</Tip>

---

For a deeper understanding of GoogleTest setup and test creation, see [Writing & Running Your First Test](/getting-started/first-run-validation/your-first-test) and [Configuring GoogleTest in Your Project](/getting-started/first-run-validation/configuration).


---

<AccordionGroup title="Common Troubleshooting Scenarios">
<Accordion title="Linker Error: Undefined reference to main">

**Cause:** You did not link your test executable with `gtest_main` or `gmock_main`, which provide the default `main()` function.

**Fix:**

- Link your test binary against `gtest_main` or `gmock_main` library.
- Alternatively, implement your own `main()` that calls `testing::InitGoogleTest()` or `testing::InitGoogleMock()` and `RUN_ALL_TESTS()`.

```shell
# Example linkage in CMakeLists.txt
target_link_libraries(your_test_target gtest_main)
```

</Accordion>
<Accordion title="Tests Not Running or Discovered">

**Cause:** Missing call to `RUN_ALL_TESTS()` or no proper initialization.

**Fix:**

- Ensure your `main()` calls `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
- Make sure `RUN_ALL_TESTS()` is called exactly once.

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

</Accordion>
<Accordion title="SetUp() Not Called / Spelling Mistakes">

**Cause:** Misspelling fixture `SetUp()` method as `Setup()` or wrong signature.

**Fix:**

- Rename your override to `void SetUp() override` with exact casing.

```cpp
class MyTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // setup code
  }
};
```

</Accordion>
<Accordion title="Compiler Warnings on Mock Methods">

**Cause:** Visual Studio warnings for const parameters or signature mismatches.

**Fix:**

- Remove top-level const from parameters in mocked methods.
- Ensure method signatures exactly match the virtual base methods.

See the [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) section for details.

</Accordion>
</AccordionGroup>
