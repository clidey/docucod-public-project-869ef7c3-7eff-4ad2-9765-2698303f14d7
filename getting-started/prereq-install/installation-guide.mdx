---
title: "Installation Guide"
description: "Follow detailed instructions to install GoogleTest using your preferred build system, whether via CMake, Bazel, or manual integration. Covers Linux, macOS, Windows, and includes quick validation to verify your setup."
---

# Installation Guide

Follow these detailed instructions to install GoogleTest using your preferred build system. This guide covers step-by-step installation on Linux, macOS, and Windows platforms, along with quick validation steps to confirm your setup.

---

## 1. Prerequisites

Before installing GoogleTest, ensure you have the following set up:

- **Supported Platforms:** Linux, Windows, macOS
- **Compiler Requirements:** A compiler with full C++17 support (e.g., GCC 7+, Clang 5+, MSVC 2017+)
- **Build Tools:** CMake v3.14 or later is required for fetching GoogleTest as a dependency and for building
- **Networking:** Internet access if downloading GoogleTest sources or using CMake's FetchContent

<Tip>
If you are integrating GoogleTest into an existing project, make sure your environment is configured to build C++17 code.
</Tip>

---

## 2. Installing GoogleTest Using CMake

The recommended method to build and install GoogleTest is using CMake, which supports multiple platforms and compilers.

### 2.1 Standalone Build

Use this workflow to build and install GoogleTest independently of your main project.

<Steps>
<Step title="Clone the Repository">
Run the command below to clone the GoogleTest repository at version 1.17.0:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>
<Step title="Create and Enter Build Directory">
Create a separate directory for build files and navigate into it:

```bash
mkdir build
cd build
```
</Step>
<Step title="Configure the Build">
Generate native build files using CMake. To build both GoogleTest and GoogleMock (default):

```bash
cmake ..
```

To build only GoogleTest (without GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build GoogleTest">
Start the build process:

```bash
make
```

On Windows, open the generated `gtest.sln` file in Visual Studio and build the solution.

On macOS, open the `.xcodeproj` file with Xcode.
</Step>
<Step title="Optional: Install">
If you have appropriate permissions and want to install GoogleTest system-wide (usually under `/usr/local/`), run:

```bash
sudo make install
```
</Step>
</Steps>

### 2.2 Incorporate GoogleTest into an Existing CMake Project

If your project already uses CMake, you can integrate GoogleTest in two main ways:

#### 2.2.1 Using Installed GoogleTest

If you installed GoogleTest system-wide, import it using:

```cmake
find_package(GTest CONFIG REQUIRED)
```

Use the imported libraries as targets:

```cmake
target_link_libraries(your_test_target PRIVATE GTest::gtest GTest::gtest_main)
```

#### 2.2.2 Build GoogleTest as Part of Your Project

For tighter integration and consistent compiler/linker settings, build GoogleTest from source within your project:

1. Add the GoogleTest source tree or git submodule to your project.
2. Add this snippet to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# On Windows, avoid runtime conflicts by forcing shared CRT
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(your_test_executable test.cpp)
target_link_libraries(your_test_executable gtest_main)
add_test(NAME your_test COMMAND your_test_executable)
```

3. Note that this requires CMake 3.14 or newer.

<Tip>
This approach ensures GoogleTest is compiled with the same compiler options as your project, avoiding runtime mismatches and eases maintenance.
</Tip>

---

## 3. Additional Build Configurations

### 3.1 Using Visual Studio Runtime Libraries

By default, GoogleTest links the CRT statically on Windows, which may cause conflicts if your project uses dynamic linking.

To force GoogleTest to link dynamically (matching Visual Studio defaults), add the CMake option:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

### 3.2 Building GoogleTest as a Shared Library

To build GoogleTest as a shared library (DLL on Windows), add the compiler flag:

```
-DGTEST_CREATE_SHARED_LIBRARY=1
```

and configure your linker appropriately. When linking your tests to the shared library, add:

```
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

<Tip>
Most users prefer static linking for simplicity unless you have specific reasons for shared libraries.
</Tip>

### 3.3 Controlling Threading Support

GoogleTest is thread-safe where pthreads are available. To override its detection:

- Enable pthread explicitly:

```bash
-DGTEST_HAS_PTHREAD=1
```

- Disable pthread:

```bash
-DGTEST_HAS_PTHREAD=0
```

If you set pthread explicitly, ensure you link pthread correctly if using your own build scripts.

---

## 4. Verifying the Installation

Once built, verify your GoogleTest setup with the following steps:

<Steps>
<Step title="Build a Simple Test">
Create a file named `example_test.cpp` with the following content:

```c++
#include <gtest/gtest.h>

TEST(SampleTest, SimpleAssertion) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```
</Step>
<Step title="Compile the Test">
On Linux/macOS, compile using:

```bash
c++ -std=c++17 example_test.cpp -lgtest_main -lgtest -pthread -o example_test
```

Adjust library paths if necessary based on where GoogleTest is installed.

On Windows (Visual Studio), link against `gtest.lib` and `gtest_main.lib`.
</Step>
<Step title="Run the Test">
Run the compiled executable:

```bash
./example_test
```

Expected output:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.SimpleAssertion
[       OK ] SampleTest.SimpleAssertion (0 ms)
[----------] 1 test from SampleTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```
</Step>
</Steps>

<Check>
If your test fails to compile or run, verify that your include paths and library paths point to the correct GoogleTest headers and binaries.
</Check>

---

## 5. Troubleshooting Common Installation Issues

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="CMake Command Not Found">
Make sure CMake is installed and accessible in your `PATH`. Download the latest release at [https://cmake.org/download/](https://cmake.org/download/).
</Accordion>
<Accordion title="Linker Errors About pthread">
On Linux/macOS, linker errors related to pthread usually indicate missing `-pthread` flags. When compiling manually, add `-pthread` to both compile and link commands.
</Accordion>
<Accordion title="Runtime Library Conflicts on Windows">
Ensure the `gtest_force_shared_crt` option is set if using dynamic runtimes to avoid LNK2038 errors about runtime mismatch.
</Accordion>
<Accordion title="GoogleTest Version Mismatch">
Confirm you are using compatible GoogleTest and GoogleMock versions by referencing their tags and commit hashes, especially when integrating as a submodule.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

- After successful installation, proceed to the [Writing Your First Test](https://github.com/google/googletest/tree/main/docs/getting-started/first-test-run/create-first-test) guide to learn how to author tests.
- Explore [Configuration Basics](https://github.com/google/googletest/tree/main/docs/getting-started/prereq-install/configuration-basics) to customize your GoogleTest setup.
- Review [Common Issues](https://github.com/google/googletest/tree/main/docs/getting-started/troubleshooting-qa/common-issues) if you face problems beyond installation.

---

## References

- Official GitHub repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- CMake official website: [https://cmake.org/](https://cmake.org/)
- GoogleTest README: [googletest/README.md](https://github.com/google/googletest/blob/main/googletest/README.md)
- Test Primer: [docs/primer.md](https://github.com/google/googletest/blob/main/docs/primer.md)

---

*This Installation Guide is part of the Getting Started series for GoogleTest, aligned with other guides such as Prerequisites & System Requirements, Configuration Basics, and Your First Test.*

---