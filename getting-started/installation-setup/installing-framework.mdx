---
title: "Installing GoogleTest and GoogleMock"
description: "Step-by-step instructions for installing the test framework on common platforms (Linux, macOS, Windows) using supported build systems (CMake, Bazel, etc.). Highlights recommended installation methods and any platform-specific tips."
---

# Installing GoogleTest and GoogleMock

This guide provides clear, step-by-step instructions to install the GoogleTest and GoogleMock frameworks on common platforms — Linux, macOS, and Windows — using supported build systems like CMake and Bazel. It highlights the recommended installation methods and notes any platform-specific considerations to ensure a smooth setup experience.

---

## 1. Prerequisites & System Requirements

Before installing, verify your environment meets these minimum requirements:

- **Platforms Supported:** Linux, macOS, Windows
- **Compiler Support:** A C++17-compatible compiler (GCC 7+, Clang 5+, MSVC 2017+)
- **Build Systems:**
  - CMake (version 3.14 or higher recommended)
  - Bazel can also be used; see Bazel-specific notes
- **Dependencies:**
  - CMake (if using CMake build)
  - Git client (to clone the repository)
  - For pthread support on POSIX platforms, ensure pthread library and headers are available

<Tip>
Make sure your build environment and compiler support C++17, as GoogleTest requires it for successful builds.
</Tip>

---

## 2. Installation Instructions

### Installing Using CMake (Recommended)

GoogleTest and GoogleMock are shipped together and built with a common CMake configuration.

#### 2.1 Clone the Repository

Open a terminal or command prompt and run:

```bash
# Clone the official GoogleTest repository; replace 'v1.17.0' with the desired release tag
$ git clone https://github.com/google/googletest.git -b v1.17.0
$ cd googletest
```

#### 2.2 Create and Enter a Build Directory

```bash
$ mkdir build
$ cd build
```

#### 2.3 Generate Build Files

- To build both GoogleTest and GoogleMock (default):

```bash
$ cmake ..
```

- To build GoogleTest only (exclude GoogleMock):

```bash
$ cmake .. -DBUILD_GMOCK=OFF
```

#### 2.4 Build the Libraries

- On Linux/macOS:

```bash
$ make
```

- On Windows with Visual Studio, open the generated solution (`.sln`) file and build from the IDE.

#### 2.5 Install Libraries and Headers (Optional)

- On Linux/macOS to install system-wide (requires admin/root):

```bash
$ sudo make install
```

This installs headers and libraries into `/usr/local/` by default, which allows your projects to use GoogleTest and GoogleMock without referencing the build directory.

##### Visual Studio Runtime Consideration

If using Visual Studio, by default GoogleTest links the runtime statically. To avoid runtime library conflicts, enable dynamic runtime linking by configuring CMake:

```bash
$ cmake .. -Dgtest_force_shared_crt=ON
```

---

### Bazel Installation (Advanced)

GoogleTest can be used as a Bazel dependency by referencing it via the `@com_google_googletest` external repository.

Refer to the Bazel [official documentation](https://github.com/bazelbuild/rules_cc) for the best practices on integration.

---

## 3. Configuration & Setup

### Using Installed GoogleTest and GoogleMock with Your Project

- If installed system-wide, link your tests with `gtest` and `gmock` libraries.

- For projects using CMake, you can find the packages with:

```cmake
find_package(GTest CONFIG REQUIRED)
target_link_libraries(your_test_target GTest::gtest GTest::gmock)
```

- For a custom build or local usage, include the headers from the cloned directory and link with the built libraries manually.

<Tip>
Ensure to include `-I` flags in your compiler settings to the `include` directory of GoogleTest/GoogleMock.
</Tip>

---

## 4. First Operation Walkthrough

Verify that GoogleTest and GoogleMock are correctly installed and working by compiling and running the example test below.

### 4.1 Create a Simple Test File `example_test.cpp`

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

// Simple test to verify GoogleTest framework is working
TEST(SimpleTest, BasicAssertions) {
  EXPECT_EQ(7 * 6, 42);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 4.2 Build the Test

- Using CMake, your `CMakeLists.txt` might include:

```cmake
cmake_minimum_required(VERSION 3.14)
project(ExampleTest)

find_package(GTest CONFIG REQUIRED)

add_executable(example_test example_test.cpp)
target_link_libraries(example_test GTest::gtest_main GTest::gmock_main)

include(GoogleTest)
gtest_discover_tests(example_test)
```

Build and run:

```bash
mkdir -p build && cd build
cmake ..
cmake --build .
./example_test
```

### 4.3 Expected Output

You should see output similar to:

```
Running main() from ...
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SimpleTest
[ RUN      ] SimpleTest.BasicAssertions
[       OK ] SimpleTest.BasicAssertions (0 ms)
[----------] 1 test from SimpleTest

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

This confirms your installation is correct and the frameworks can be used.

---

## 5. Platform-Specific Tips

### Linux/macOS

- Ensure pthread library is properly installed as GoogleTest uses it for thread-safety.
- If you encounter linker errors related to pthreads, add the `-lpthread` linker option.

### Windows

- Use Visual Studio to open the generated `.sln` and build.
- For runtime mismatch issues, use the `-Dgtest_force_shared_crt=ON` flag when configuring with CMake.

---

## 6. Troubleshooting

<AccordionGroup title="Common Installation Issues and Solutions">
<Accordion title="CMake Can't Find GTest Package">
Make sure you installed GoogleTest and GoogleMock system-wide or provide `CMAKE_PREFIX_PATH` to the install directory when configuring your project:

```bash
cmake -DCMAKE_PREFIX_PATH=/usr/local ..
```

If using a local build, reference the directory explicitly or use `add_subdirectory`.
</Accordion>
<Accordion title="Linker Errors on pthread Symbols">
On Linux/macOS, linker errors about pthread functions indicate missing link flag.

Add `-pthread` to both compiler and linker flags or ensure your CMake scripts handle this.
</Accordion>
<Accordion title="Compiler Does Not Support C++17">
Verify your compiler version and upgrade if necessary. GoogleTest requires C++17 features and will fail to compile otherwise.
</Accordion>
<Accordion title="Runtime Library Mismatch on Windows">
Use the `-Dgtest_force_shared_crt=ON` CMake option to use dynamic runtime libraries matching your project settings.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

- Proceed to [Configuring Your First Test Project](/getting-started/installation-setup/config-first-project) to set up your test code with GoogleTest and GoogleMock.
- Explore [Quick Validation & First Test Run](/getting-started/installation-setup/quick-validation) for running larger test suites.
- Review [Resolving Common Installation and Setup Issues](/getting-started/troubleshooting-learn/common-setup-issues) if you encounter problems.

---

## References and Further Reading

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [GoogleMock Documentation](https://google.github.io/googletest/gmock_for_dummies.html)
- [GoogleTest Primer](../primer.md)
- [Mocking Reference](../mocking.md)


---

This installation guide ensures you have a ready, working setup of GoogleTest and GoogleMock across supported platforms using the recommended approaches. Follow the instructions carefully, and you will be able to write and run tests efficiently and reliably.