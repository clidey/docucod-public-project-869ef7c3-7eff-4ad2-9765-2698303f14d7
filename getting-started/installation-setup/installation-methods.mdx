---
title: "Installing GoogleTest and GoogleMock"
description: "Explains the main installation paths for adding GoogleTest and GoogleMock to a project, covering CMake, Bazel, and manual build options. Illustrates each path with concise instructions and references to example files or further guides."
---

# Installing GoogleTest and GoogleMock

This guide walks you through the primary ways to add GoogleTest and GoogleMock to your C++ project. Whether you are building with CMake, Bazel, or prefer a manual approach, this page will help you get started quickly and correctly.

GoogleTest and GoogleMock are designed to integrate flexibly with different build systems. Choose the installation path that best matches your project’s build environment and workflows.

---

## 1. Installing with CMake

CMake is the most popular and straightforward way to build and integrate GoogleTest and GoogleMock into your C++ project.

### Step 1: Add GoogleTest as a Dependency

Use CMake’s [`FetchContent`](https://cmake.org/cmake/help/latest/module/FetchContent.html) module to download and configure GoogleTest and GoogleMock as part of your project.

Create or update your project's `CMakeLists.txt` to include:

```cmake
cmake_minimum_required(VERSION 3.14)
project(your_project_name)

# Require C++17 standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
)
# For Windows: Align runtime linkage to prevent conflicts
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)
```

> **Tip:** Update the URL to point to the latest GoogleTest commit or release tag regularly.

---

### Step 2: Link Your Test Targets

After adding GoogleTest, define your test executable and link it with `GTest::gtest_main`:

```cmake
add_executable(
  my_test
  my_test.cc
)
target_link_libraries(
  my_test
  GTest::gtest_main
)

# Enables test discovery via CTest
include(GoogleTest)
gtest_discover_tests(my_test)
```

This configuration creates a test binary `my_test` that automatically runs all tests defined in your source.

---

### Step 3: Build and Run

Run the following commands in your project root:

```bash
cmake -S . -B build
cmake --build build
cd build
ctest
```

A successful run will display your test results grouped by test suites.

---

### Troubleshooting Common CMake Issues

- Ensure your compiler supports **C++17** or later.
- On Windows, if you encounter runtime library mismatches, confirm `gtest_force_shared_crt` is set as above.
- If pthread linking errors occur on Linux/macOS, verify your environment includes threading support (the CMake scripts handle this automatically).

For advanced CMake integration and customization, see the [GoogleTest official CMake README](https://github.com/google/googletest/tree/main#source).

---

## 2. Installing with Bazel

If your project uses Bazel, GoogleTest and GoogleMock are available as Bazel external dependencies:

1. Add rules to your `WORKSPACE` file to fetch GoogleTest and GoogleMock sources.
2. Reference the `@com_google_googletest//` targets in your Bazel BUILD files.

Example minimal `WORKSPACE` snippet:

```python
# Example fetch for googletest
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/v1.11.0.zip"],
    strip_prefix = "googletest-1.11.0",
)
```

Then, in your `BUILD` file:

```python
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

Refer to the [Bazel Quickstart](https://docs.bazel.build/versions/main/tutorial/cpp.html) for detailed instructions.

---

## 3. Manual Build and Installation

If you prefer or require manual building and installation steps, either for integrating with legacy systems or custom build tools, follow these steps:

### Clone the Repository

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### Build with CMake

Create a build directory, configure, build, and optionally install:

```bash
mkdir build && cd build
cmake .. -DBUILD_GMOCK=ON
cmake --build .
# Optional: to install system-wide
sudo cmake --install .
```

> **Note:** By default, GoogleMock is built alongside GoogleTest.

### Link Your Tests

Once installed or built, include the GoogleTest headers and link your test binaries with `-lgtest` and `-lgmock` (linking order matters). For example:

```bash
g++ -std=c++17 my_test.cc -lgtest -lgmock -pthread -o my_test
./my_test
```

Make sure your compiler can find the installed headers and libraries by adding appropriate `-I` and `-L` options.

---

## References & Further Reading

- [Primer: Writing Your First Test](primer.md)
- [Quickstart with CMake](quickstart-cmake.md)
- [Supported Platforms](platforms.md)
- [Troubleshooting & Common Issues](getting-started/first-test-experience/common-issues-troubleshooting.md)

---

## Summary

Regardless of your build environment, installing GoogleTest and GoogleMock starts with choosing the right integration method:

- **CMake**: Recommended for most projects, including powerful integration with modern CMake capabilities.
- **Bazel**: Native support for GoogleTest with simple dependency declarations.
- **Manual Build**: Useful for custom or legacy build systems; requires explicit linkage.

Following the instructions here will get you compiling and running tests in no time.

<Tip>
For new projects or unfamiliar build systems, start with the CMake approach for the smoothest experience.
</Tip>

<Check>
Confirm you have a C++17 compliant compiler before starting.
</Check>

<Note>
Always verify the version of GoogleTest used to stay up to date with bug fixes and new features.
</Note>

---