---
title: "Quick Validation & First Test Run"
description: "Instructions for building and running a sample or smoke test to confirm a working setup. Covers typical output, basic test creation syntax, and quick troubleshooting for initial failures."
---

# Quick Validation & First Test Run

This guide helps you quickly verify that your GoogleMock setup works correctly by building and running a smoke test. You will learn how to compile a sample test, understand the typical output, write a basic test expectation, and troubleshoot common issues.

---

## 1. Prerequisites for Quick Validation

Before running your first GoogleMock test, ensure the following:

- **GoogleMock Installed:** You have successfully installed GoogleMock and its dependencies according to the [Installing GoogleTest and GoogleMock guide](https://github.com/google/googletest/tree/main/googletest).
- **Compiler & Build Tool:** A C++17-compliant compiler and a working build system (e.g., CMake or Bazel).
- **Test Environment:** You can compile and run basic C++ test binaries.


## 2. Building the Sample Test

GoogleMock includes comprehensive sample tests verifying its core features. The `gmock_output_test_.cc` file exercises different mock calls and expectations, printing typical output messages.

### Step-by-Step Build Example (Using CMake)

1. Create a `CMakeLists.txt` with GoogleMock linked. For example:

```cmake
cmake_minimum_required(VERSION 3.14)  # Update as needed
project(GMockSmokeTest)

find_package(GTest REQUIRED)

add_executable(gmock_smoke_test gmock_output_test_.cc)

target_link_libraries(gmock_smoke_test GTest::gtest_main gmock)

include(GoogleTest)
gtest_discover_tests(gmock_smoke_test)
```

2. Run the following commands:

```bash
mkdir build
cd build
cmake ..
make
gmock_smoke_test
```

> The above builds and runs the smoke test binary.

### Expected Outcome

The smoke test runs a suite of mock expectations and prints messages about successful matches, unexpected calls, warnings, and failures. You should see output like:

```
[ RUN      ] GMockOutputTest.ExpectedCall
[       OK ] GMockOutputTest.ExpectedCall
...
[  FAILED  ] GMockOutputTest.UnexpectedCall
...
```

It confirms that GoogleMock is functional and exercises how it reports expected, unexpected, and excessive mock calls.

## 3. Writing Your First Basic Test

To make the quick test meaningful, add expectations and calls as shown in the minimal example below.

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::Return;
using ::testing::_;

class MockFoo {
 public:
  MOCK_METHOD(int, Bar, (int), ());
};

TEST(GMockSmokeTest, BasicExpectation) {
  MockFoo foo;

  // Expect Bar(5) will be called once and will return 10.
  EXPECT_CALL(foo, Bar(5))
      .WillOnce(Return(10));

  // This triggers the expectation.
  int result = foo.Bar(5);
  EXPECT_EQ(result, 10);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this test to confirm GoogleMock behavior. This verifies that expectations are matched and return values are produced.

## 4. Understanding Typical GoogleMock Output

GoogleMock categorizes mock method calls as:

- **Expected Calls:** Matched to a declared expectation. Print messages like:

  ```
  Mock function call matches EXPECT_CALL(...)
      Function call: Bar(5)
            Returns: 10
  Stack trace:
  ```

- **Unexpected Calls:** Calls that don't match any expectation raise test failures with detailed messages explaining argument mismatches.

- **Excessive Calls:** When calls exceed the expected count, GoogleMock reports an error and either returns default values or returns early for void functions.

- **Uninteresting Calls:** Calls without expectations cause warnings, helping catch potential test oversights without failing tests.

Adjust verbosity with `--gmock_verbose=info|warning|error` to control how much detail you receive.

## 5. Troubleshooting Common Issues

- **Unexpected Call Failures:** Ensure your `EXPECT_CALL` statements accurately describe the expected arguments. Use `--gmock_verbose=info` to trace calls.

- **Failure to Match Calls:** Check if argument matchers align with call arguments. Use simple matchers like `_` to avoid over-specification.

- **Too Many or Too Few Calls:** Modify `.Times()` clause or use `.RetiresOnSaturation()` to make expectations retire after saturation.

- **Leaked Mocks Warning:** GoogleMock detects if mock objects are not deleted at program exit, risking unverified expectations. Use `testing::Mock::AllowLeak(mock_ptr);` if intentional.

- **Compiler Errors Mocking Methods:** Verify method signatures and consider wrapping complex types or commas with parentheses or type-aliases.

## 6. Next Steps after Quick Validation

- Explore the [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) for beginner-friendly mock class creation and usage.
- Proceed to [Configuring Your First Test Project](../installation-setup/config-first-project) to integrate mocks into your projects.
- Learn how to [Create Your First Mock Object](../getting-started/first-mock) with real interfaces.
- Deepen your mastery with the [Mocking Reference](../reference/mocking) and [gMock Cookbook](../gmock_cook_book) for advanced syntax and patterns.

---

## Additional Resources

- [gmock_output_test_.cc Source Code on GitHub](https://github.com/google/googletest/blob/main/googlemock/test/gmock_output_test_.cc) - for example test code of mock call outputs
- [GoogleTest Mocking Overview](https://github.com/google/googletest/blob/main/googlemock/README.md)
- [gMock FAQ](https://google.github.io/googletest/gmock_faq.html) - for common test failures and error messages

---

By running and examining the sample tests in `gmock_output_test_.cc`, you confirm that your GoogleMock installation behaves as expected, displaying typical output for mock calls, including successes, warnings, and failures. Writing your own simple expectations builds confidence as you start writing real tests.

<p>Test your installation now, and get ready to write robust, maintainable mock-based tests!</p>