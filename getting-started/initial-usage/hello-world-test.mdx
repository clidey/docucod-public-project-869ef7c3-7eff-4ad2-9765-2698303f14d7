---
title: "Creating and Running a Basic Test"
description: "Guide the user to write a simple test file using GoogleTest, including building, running, and interpreting test results for the first time. Provides a hands-on walkthrough that quickly delivers a working example."
---

# Creating and Running a Basic Test with GoogleTest

Welcome to your first hands-on experience writing a test with GoogleTest. This guide walks you through creating a simple test file, building it, running it, and understanding the test results. By the end, you'll have a working example that tests code behavior and reports results effectively.

---

## 1. Writing Your First Test File

GoogleTest organizes tests into **test suites** and **tests**. Each *test* checks a specific behavior of your code using assertions.

### Step 1: Include GoogleTest Header
Begin by including the GoogleTest header file:

```cpp
#include <gtest/gtest.h>
```

### Step 2: Define a Simple Function to Test
For demonstration, let's assume you have this simple function that calculates factorial:

```cpp
// Returns the factorial of n
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}
```

### Step 3: Write Tests Using `TEST()` Macro
Use the `TEST(TestSuiteName, TestName)` macro to define tests. Avoid underscores in names to prevent conflicts.

```cpp
// Tests factorial of 0 returns 1.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

In these tests:
- `EXPECT_EQ` verifies that two values are equal.
- If an assertion fails, it will be reported but will not abort the test function.

### Step 4: Implement `main()` Function
GoogleTest provides an optional `gtest_main` library for automatic `main()`. If you write your own, initialize GoogleTest and run all tests:

```cpp
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

**Important:** Always return the result of `RUN_ALL_TESTS()` from `main()` to reflect success or failure properly.

---

## 2. Building Your Test

### Using CMake
1. Make sure GoogleTest is installed or included as a subdirectory.
2. Create a `CMakeLists.txt` for your test:

```cmake
cmake_minimum_required(VERSION 3.14)
project(FactorialTestProject)

set(CMAKE_CXX_STANDARD 17)

# Find GoogleTest package or add it
find_package(GTest REQUIRED)

add_executable(factorial_test factorial_test.cpp)
target_link_libraries(factorial_test GTest::gtest_main)
```

3. Run CMake and build:

```bash
mkdir build && cd build
cmake ..
make
```

### Using Other Build Systems
Adapt the build to include GoogleTest headers and libraries. Link to either `gtest_main` (which provides `main()`) or `gtest` if you implement your own `main()`.

---

## 3. Running the Tests

Execute the built test binary:

```bash
./factorial_test
```

Your output will look like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If any test fails, GoogleTest will print an informative message showing the expected and actual values along with file and line information.

---

## 4. Interpreting Test Results

- **Passed tests** show with `[       OK ]` and contribute to the green `[  PASSED  ]` summary.
- **Failed tests** display `[  FAILED  ]` along with detailed failure messages indicating:
  - The test file and line number
  - The assertion that failed
  - Expected versus actual values

Example failure message:

```
/path/to/factorial_test.cpp:10: Failure
Expected equality of these values:
  Factorial(2)
    Which is: 3
  2
```

This indicates your `Factorial` function returned `3` instead of `2` for input `2`.

---

## 5. Troubleshooting Common Issues

- **Tests are not running:**
  - Ensure you call `::testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
  - Confirm your test executable is properly linked to `gtest_main` or has a correct `main()`.

- **Linker errors about missing `main()`:**
  - Link with `gtest_main` or write your own `main()`.

- **Test suite or test names invalid:**
  - Avoid underscores `_` in `TEST()` names to prevent internal naming conflicts.

- **Assertions not triggering failures as expected:**
  - Use `EXPECT_*` for nonfatal failures and `ASSERT_*` for fatal failures that abort the test run.

- **Build errors on missing headers:**
  - Make sure GoogleTest includes are in your compiler include path.

---

## 6. Next Steps

- Explore writing **test fixtures** with `TEST_F()` when you want to share setup among tests.
- Learn about **assertions** for various data types and complex conditions.
- Dive into [GoogleTest Primer](primer.md) for more conceptual foundation.
- Check `Quickstart: Setting Up with CMake or Bazel` for alternative build environments.

---

## Example: Complete Minimal Test File `factorial_test.cpp`

```cpp
#include <gtest/gtest.h>

// Function to be tested
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this file to verify your environment and get immediate feedback on your tests.

---

## Additional Resources

For detailed coverage on writing tests and expanding your testing skills, visit:

- [GoogleTest Primer](primer.md) - Fundamentals and concepts
- [Assertions Reference](reference/assertions.md) - Comprehensive assertion macros
- [Test Fixtures and SetUp/TearDown](primer.md#same-data-multiple-tests) - For shared test data
- [Installation & Integration](getting-started/environment-installation/installation-integration) - Building GoogleTest
- [Troubleshooting Common Setup Issues](getting-started/troubleshooting/common-setup-issues) - Solve setup problems

---

<Tip>
Starting with small, focused tests helps you build confidence in your build and test setup quickly. Naming tests clearly and grouping related tests into suites improves maintainability.
</Tip>

<Note>
Remember, GoogleTest automatically discovers tests defined with the `TEST()` macro—you don’t need to register your tests manually.
</Note>

<Warning>
Failing to return the value of `RUN_ALL_TESTS()` from `main()` can cause your test system to wrongly report success.
</Warning>
