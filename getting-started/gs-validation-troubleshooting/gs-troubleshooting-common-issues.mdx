---
title: "Troubleshooting Common Setup Issues"
description: "Addresses the most frequent installation, configuration, and usage issues newcomers face. Includes linker errors, missing headers, and C++ standard mismatches, with clear next steps and resource links."
---

# Troubleshooting Common Setup Issues

This guide addresses the most frequent problems users encounter when installing, configuring, and using GoogleTest and GoogleMock for the first time. Whether you face linker errors, missing headers, or C++ standard mismatches, this documentation will provide clear, actionable next steps to resolve these issues efficiently.

---

## 1. Common Linker Errors

Linker errors are among the most prevalent issues when setting up GoogleTest and GoogleMock. These errors typically happen when the compiler cannot find the required GoogleTest or GoogleMock libraries during the linking phase.

### Typical Error Messages
- `undefined reference to` functions in GoogleTest or GoogleMock
- `cannot find -lgmock` or `cannot find -lgtest`

### Root Causes
- Missing or incorrect linking against GoogleTest/GoogleMock libraries
- Using mismatched or incompatible versions
- Forgetting to link `gtest_main` or `gmock_main` libraries (which include `main` implementations)

### How to Fix
1. **Add the correct libraries to your linker command**:
   - For GoogleTest:

     ```bash
     -lgtest -lpthread
     ```

   - For GoogleMock (which includes GoogleTest):

     ```bash
     -lgmock -lgtest -lpthread
     ```

2. **Link against the `gmock_main` or `gtest_main` library if you don’t have your own `main()`**:

   ```bash
   -lgmock_main -lgmock -lgtest -lpthread
   ```

3. **Verify that the library search paths (`-L`) include your GoogleTest and GoogleMock build directories.**

4. **If using CMake or Bazel, ensure you depend on the proper targets:**
   - In CMake, link against `gtest` or `gmock` targets.
   - In Bazel, add visibility and dependencies to GoogleTest and GoogleMock.

<Tip>
Always build GoogleTest and GoogleMock as static or shared libraries before linking your test code against them.
</Tip>

---

## 2. Missing Header Files

If your build or IDE reports that it cannot find headers like `<gtest/gtest.h>` or `<gmock/gmock.h>`, the problem is usually incorrect include paths.

### Common Signs
- Compiler error: `fatal error: gtest/gtest.h: No such file or directory`
- Compiler error: `fatal error: gmock/gmock.h: No such file or directory`

### How to Fix
1. **Add the GoogleTest and GoogleMock include directories to your compiler's include path**:

   For example, if you installed GoogleTest in `/usr/local/include` or built it in `external/googletest/include`, add:

   ```bash
   -I/path/to/googletest/include
   -I/path/to/googlemock/include
   ```

2. **Use the correct include statements in your test files:**

   ```cpp
   #include <gtest/gtest.h>
   #include <gmock/gmock.h>
   ```

3. **If your project uses CMake, use the `find_package(GTest REQUIRED)` and link the include directories appropriately.**

4. **Ensure that your IDE's project settings also include these directories.**

<Warning>
Do not copy headers manually into your project source folders. Always reference them through include paths to avoid version mismatches.
</Warning>

---

## 3. C++ Standard Mismatch

GoogleTest and GoogleMock require a C++17-compatible compiler and standard library. Building or using them with older C++ standards or incompatible compiler flags will cause failures.

### Common Issues
- Compiler error messages related to missing features or syntax errors
- Linker errors caused by ABI incompatibilities

### How to Fix
1. **Set your compiler to use `-std=c++17` or higher**:

   ```bash
   g++ -std=c++17 ...
   clang++ -std=c++17 ...
   ```

2. **Align the C++ standard version between your project and GoogleTest/GoogleMock builds.**

3. **Ensure your compiler version supports C++17 features fully. Recommended compilers:**

   | Compiler      | Minimum Version     |
   |---------------|---------------------|
   | GCC           | 7.3 or higher       |
   | Clang         | 5.0 or higher       |
   | MSVC (Visual Studio) | 2017 Update 3 or higher |

4. **If using an older compiler, upgrade to a supported version.**

<Tip>
Verify the active standard by adding a test file with:

```cpp
static_assert(__cplusplus >= 201703L, "C++17 or later required");
```

Compile it with your project to catch mismatches early.
</Tip>

---

## 4. Runtime and Usage Issues

### Test Discovery Fails
If your tests do not run or are reported as "No tests found":

- Confirm you implemented `main()` or linked against `gtest_main` or `gmock_main` which provide `main()`.
- Make sure your test executable is linked properly with GoogleTest and GoogleMock.
- Confirm your tests use the correct `TEST()` or `TEST_F()` macros.

### Mock-Related Compilation Errors

- Ensure that the base class you are mocking has **virtual** methods and a virtual destructor.
- Use the exact signature and qualifiers when defining `MOCK_METHOD` (see the Mocking Reference and gMock for Dummies for details).
- When mocking overloaded methods, specify argument types clearly to avoid ambiguity.

### Handling "Uninteresting Mock Function Call" Warnings

- These warnings occur when a mock method is called without any set expectation.
- Suppress by using `NiceMock<MockType>` instead of `MockType`, or add a catch-all expectation with `EXPECT_CALL(...).Times(AnyNumber())`.

<Note>
Suppressing warnings by adding irrelevant expectations may cause brittle tests. Prefer using `NiceMock`.
</Note>

---

## 5. Additional Resources

- **[Validating Your Setup]( /getting-started/gs-validation-troubleshooting/gs-validation-checklist )** — A checklist to confirm your environment and setup are correct.
- **[Installing with CMake]( /getting-started/gs-prerequisites-installation/gs-install-cmake )** — A complete guide to installing GoogleTest and GoogleMock with CMake.
- **[Installing with Bazel]( /getting-started/gs-prerequisites-installation/gs-install-bazel )** — Instructions for Bazel users.
- **[Mocking Cookbook]( /docs/gmock_cook_book.html )** — Common mocking usage patterns and tips.
- **[Legacy gMock FAQ]( /docs/gmock_faq.html )** — Answers to frequently asked questions, including setup and debugging.

---

## 6. Quick Troubleshooting Tips

<AccordionGroup title="Quick Fixes for Common Issues">
<Accordion title="Linker cannot find GoogleTest/GoogleMock symbols">
- Verify that you linked against `libgtest.a`, `libgmock.a`, and `pthread`.
- Check library paths and linker options.
- Add `-lgmock_main` or `-lgtest_main` if you don't define `main()`.
</Accordion>
<Accordion title="Compiler cannot find gtest/gtest.h or gmock/gmock.h">
- Ensure the include directories for GoogleTest and GoogleMock are added in your compiler flags.
- Confirm that GoogleTest and GoogleMock headers exist at provided paths.
</Accordion>
<Accordion title="Compilation errors related to overridden mock methods">
- Confirm mocked base class methods are virtual.
- Match qualifiers (`const`, `noexcept`, reference qualifiers) exactly.
- Use `override` keyword for clarity and safety.
</Accordion>
<Accordion title="Warnings on uninteresting mock calls">
- Use `NiceMock` wrapper to suppress.
- Add an explicit catch-all expectation with `EXPECT_CALL(...).Times(AnyNumber())`.
</Accordion>
<Accordion title="C++ standard errors or syntax errors">
- Use C++17 or higher.
- Upgrade your compiler if necessary.
- Add `-std=c++17` to your compiler flags.
</Accordion>
</AccordionGroup>

---

## 7. When You’re Still Stuck

If the solutions above don’t resolve your issue, try the following:

- Run your tests or builds with increased verbosity flags:

  ```bash
  --gmock_verbose=info
  --gtest_verbose=info
  ```

- Review detailed error output to identify missing expectations or configuration problems.
- Consult the [GoogleTest Primer]( /overview/introduction-getting-started/what-is-googletest ) and [gMock for Dummies]( /docs/gmock_for_dummies.html ) for foundational understanding and stepwise setup.
- Check the [FAQ]( /faq/getting-started-faq/common-setup-issues ) and [Validation Checklist]( /getting-started/gs-validation-troubleshooting/gs-validation-checklist ) for advanced typical issues.
- Search and report issues at the GoogleTest GitHub repository: [https://github.com/google/googletest/issues](https://github.com/google/googletest/issues)

<Tip>
When reporting an issue, provide the error messages, your environment (OS, compiler versions), and relevant snippets of your build commands or CMakeLists.
</Tip>

---

## Summary

This troubleshooting guide provides practical solutions and explanations for frequent setup issues related to missing headers, linker errors, incompatible compiler versions, and mock usage pitfalls. Following these steps and resources will lead to a smooth initial experience with GoogleTest and GoogleMock.

---