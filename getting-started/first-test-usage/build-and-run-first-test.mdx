---
title: "Building and Running Your First Test"
description: "Covers compiling and running the sample test created in the previous step, using different build systems (CMake, Bazel). Includes what to expect as output and how to interpret the results, pointing out the main entry points and key components."
---

# Building and Running Your First Test

This guide walks you through compiling and running your first GoogleTest test program. It covers the steps for popular build systems like CMake and Bazel and explains how to interpret the output, so you can confirm your test runs correctly and understand the key components involved.

---

## 1. Prerequisites and Preparations

Before building your test:

- Ensure you have GoogleTest installed or cloned on your system. See the [Installation guide](../setup-requirements-installation/installation-multiplatform.md) for details.
- Have C++17 or later support enabled in your compiler.
- Confirm your project includes the test source file (for example, `example_test.cpp`) where your first test is defined.


## 2. Building Your Test

### 2.1 Building with CMake

GoogleTest provides CMake integration, making build automation straightforward.

#### Steps:

1. Create a new directory for your project (e.g., `my_test_project`).
2. Prepare your test source file (`example_test.cpp`) with at least one test using `TEST()` or `TEST_F()`. For reference, see the [Primer on writing tests](../first-test-usage/write-first-test.md).
3. In your project’s `CMakeLists.txt`, link against GoogleTest’s libraries as follows:

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyTestProject)

# Enable C++17 support
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find installed GoogleTest package
find_package(GTest CONFIG REQUIRED)

# Add executable for your test
add_executable(example_test example_test.cpp)

# Link to GoogleTest and pthread (if needed)
target_link_libraries(example_test PRIVATE GTest::gtest_main pthread)

# Register test with CTest (optional)
include(CTest)
add_test(NAME example_test COMMAND example_test)
```

4. Generate build files:

```bash
mkdir build
cd build
cmake ..
```

5. Build the test executable:

```bash
make
```

This produces an `example_test` binary.

#### Alternative for standalone GoogleTest build
If GoogleTest source is available locally and you prefer to add it directly using `add_subdirectory()`, refer to the [installation guide](../setup-requirements-installation/installation-multiplatform.md).


### 2.2 Building with Bazel

If your project uses Bazel:

- Add GoogleTest as an external dependency via your `WORKSPACE` file.
- Define a `cc_test` target for your test file.

Example Bazel `BUILD` snippet:

```python
cc_test(
    name = "example_test",
    srcs = ["example_test.cpp"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

Build it using:

```bash
bazel build //:example_test
```

Run with:

```bash
bazel test //:example_test
```


## 3. Running Your Test

Once you have built your test executable (e.g., `example_test`), you can run it from the command line:

```bash
./example_test
```

### Expected Output

You will see output similar to this:

```
Running main() from /path/to/gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

Points to note:

- The first line indicates the `main()` function source file running your tests (usually `gtest_main.cc`).
- Tests are grouped by **test suites** (such as `FactorialTest`).
- Each test case's run and status are displayed.
- The summary at the end zeroes in on how many tests passed or failed.

### Success Criteria

- All tests should pass with `[  PASSED  ]` status.
- If tests fail, GoogleTest outputs detailed failure messages including file, line number, and which assertion failed.


## 4. Understanding Key Components Involved

### The Main Entry Point

- When linking to `gtest_main` library, GoogleTest provides a `main()` function (defined in `gtest_main.cc`) that:
   - Calls `testing::InitGoogleTest(&argc, argv);`
   - Runs `RUN_ALL_TESTS()`
- Your test executable initiates all tests automatically.


### RUN_ALL_TESTS()

- Runs all defined tests in the program.
- Returns `0` if all tests succeed, non-zero otherwise.
- Your application’s `main()` should return this value.


## 5. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Common Build & Run Problems">
<Accordion title="Build Fails with Missing GoogleTest Libraries">
- Verify GoogleTest is installed and findable by your build system.
- Use `find_package(GTest CONFIG REQUIRED)` in CMake or correct Bazel dependencies.
- Check environment variables, include paths, and linker flags.
</Accordion>
<Accordion title="Test Executable Does Not Run or Crashes Immediately">
- Confirm test source files contain at least one valid `TEST()` or `TEST_F()`.
- Ensure you link against `gtest_main` or provide your own `main()`.
- Check if your compiler settings enable C++17.
</Accordion>
<Accordion title="Tests Fail Unexpectedly or Not Found">
- Check that you have registered tests correctly using `TEST()` macros.
- Make sure all source files are compiled and linked.
- Use GoogleTest flags like `--gtest_filter` to isolate tests.
</Accordion>
</AccordionGroup>


## 6. Next Steps

- Explore [Writing Your First Test](../first-test-usage/write-first-test.md) if you haven’t created tests yet.
- Learn about [Advanced Assertions](../../guides/core-testing-workflows/writing-effective-assertions.md) to improve your test coverage.
- Consult the [Troubleshooting Guide](../first-test-usage/troubleshooting-setup.md) if you encounter recurring issues.
- Consider integrating tests in CI pipelines for automated verification.


---

For deeper mastery, check vendor documentation on [test lifecycle](../../concepts/core-architecture/test-lifecycle.md) and [mocking with GoogleMock](../../guides/mocking-and-advanced-usage/mocking-with-gmock.md).


---

# Example: Building and Running a Simple Test with CMake

Suppose you wrote this simple test in `example_test.cpp`:

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test case
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(4), 24);
}
```

Create `CMakeLists.txt` as:

```cmake
cmake_minimum_required(VERSION 3.14)
project(ExampleTest)
set(CMAKE_CXX_STANDARD 17)

find_package(GTest CONFIG REQUIRED)

add_executable(example_test example_test.cpp)
target_link_libraries(example_test PRIVATE GTest::gtest_main pthread)

include(CTest)
add_test(NAME example_test COMMAND example_test)
```

Build and run:

```bash
mkdir build
cd build
cmake ..
make
./example_test
```

Verify all tests pass as shown above.


---

# References 
- [GoogleTest Primer: Writing Your First Test](../first-test-usage/write-first-test.md)
- [Installation Instructions](../setup-requirements-installation/installation-multiplatform.md)
- [GoogleMock Overview and Usage](../../guides/mocking-and-advanced-usage/mocking-with-gmock.md)
- [Troubleshooting Guide](../first-test-usage/troubleshooting-setup.md)
- [GoogleTest API Reference - Test Structure](../../api-reference/core-testing-api/test-structure-and-registration.md)
- [GoogleTest Primer](../primer.md)

---

This concludes building and running your first test with GoogleTest. You're ready to explore more comprehensive testing patterns and workflows.