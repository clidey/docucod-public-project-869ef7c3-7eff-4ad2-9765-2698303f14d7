---
title: "Writing Your First Test"
description: "Introduces the key concepts of test case creation using GoogleTest, with example code and explanations. Focuses on minimal working examples that new users can copy, understand, and adapt. Introduces key domain terms like 'test fixture', 'assertion', and 'test suite.'"
---

# Writing Your First Test with GoogleTest

Welcome to your first step in writing effective C++ tests using GoogleTest! This guide introduces the essentials of creating test cases with GoogleTest, focusing on minimal, understandable examples that you can copy, modify, and expand. You'll get acquainted with key concepts such as test fixtures, assertions, and test suites — all crucial to building reliable and maintainable tests.

---

## 1. Understanding Core Terms

Before writing your first test, let’s clarify some foundational terms:

- **Test Suite**: A collection of related tests grouped logically. Think of it as a category or class of tests.
- **Test Case (Test)**: An individual test within a test suite that checks a particular behavior.
- **Test Fixture**: A class that provides shared setup and teardown for a group of tests.
- **Assertion**: A statement that checks if a condition holds true. Assertions decide the success or failure of tests.

These concepts allow you to organize and scale your tests effectively.

---

## 2. Writing a Simple Test

The quickest way to start testing is using the `TEST` macro. It defines a test case within a test suite without a test fixture.

### Example: A Basic Test

```cpp
#include <gtest/gtest.h>

// Production code example: factorial function
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Define a test in test suite "FactorialTest" and test case "HandlesZeroInput"
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Another test case in the same suite
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### What You Achieve:
- Creates two test cases grouped under `FactorialTest`.
- Uses `EXPECT_EQ` assertions to verify behavior.
- Each test runs independently.

### Tip
Avoid underscores (`_`) in suite and test names to prevent conflicts with GoogleTest's internals. Use camel case or Pascal case.

---

## 3. Using a Test Fixture with TEST_F

When multiple tests need to share the same setup or state, create a *test fixture* by subclassing `testing::Test`. Use `TEST_F` to define tests that use the fixture.

### Creating a Fixture Class

```cpp
#include <gtest/gtest.h>

class QueueTest : public testing::Test {
protected:
  QueueTest() {
    // Set up test data shared by all tests
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  // Data members shared by tests
  Queue<int> q0_;  // empty queue
  Queue<int> q1_;  // has 1 element
  Queue<int> q2_;  // has 2 elements
};
```

### Writing Tests with the Fixture

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

### Benefits
- Fixtures provide reusable setup code.
- Each test operates on a fresh fixture instance, ensuring test independence.

### Common Pitfall
Ensure you spell `SetUp()` and `TearDown()` with a capital `U`. Misspelling leads to them not being called.

---

## 4. Executing Your Tests

Usually linking against `gtest_main` provides a main function for you. If not, write your own:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Call `InitGoogleTest` to parse flags.
- `RUN_ALL_TESTS()` runs every test registered.
- The return value indicates the overall success (`0` = all passed).

---

## 5. Assertions: Checking Conditions

GoogleTest provides macros for different types of assertions.

- `ASSERT_*` macros abort the current function on failure (fatal).
- `EXPECT_*` macros report failure but continue execution (non-fatal).

Example:

```cpp
EXPECT_EQ(foo.Bar(), 42);    // Non-fatal, test continues if fails
ASSERT_TRUE(ptr != nullptr); // Fatal, test aborts if fails
```

### Best Practice
Prefer `EXPECT_*` unless subsequent test statements depend on the assertion.

---

## 6. What’s Next?

Once you master simple and fixture-based tests, explore:

- **Value-Parameterized Tests** (with `TEST_P` and `INSTANTIATE_TEST_SUITE_P`) for testing with multiple inputs without code duplication.
- **Typed Tests** to test templates and multiple types automatically.
- **Advanced Assertions** for better error messages and coverage.
- **Test Event Listeners** to hook into the test lifecycle.

For hands-on examples, refer to the official [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) and sample tests in the [googletest samples directory](https://github.com/google/googletest/tree/main/googletest/samples).

---

## Troubleshooting & Tips

- **Test Fixture Creation Errors**: Ensure your fixture class has a default constructor.
- **Undetected Tests**: Confirm all test macros are outside of other function scopes.
- **Failing Tests Always Run**: Use `DISABLED_` prefix to temporarily disable tests.

<Info>
Never put assertions inside constructors or destructors. Use `SetUp()` and `TearDown()` instead.
</Info>

---

## References

- [GoogleTest Primer](../primer.md) — Introduction and basics
- [Testing Reference](../reference/testing.md) — Detailed API for tests and macros
- [Getting Started Guide](../getting-started/first-test-usage/write-first-test.md) — This documentation page

---

## Inline Example Summary

```cpp
#include <gtest/gtest.h>

// Simple test example
TEST(MathTest, Addition) {
  EXPECT_EQ(2 + 2, 4);
}

// Test fixture example
class MyFixture : public testing::Test {
 protected:
  void SetUp() override {
    data_ = 42;
  }

  int data_;
};

TEST_F(MyFixture, UsesSetUpData) {
  EXPECT_EQ(data_, 42);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Use this structure as the foundation for your GoogleTest test programs.