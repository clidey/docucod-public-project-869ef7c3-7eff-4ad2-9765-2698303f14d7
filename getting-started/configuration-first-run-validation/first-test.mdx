---
title: "Writing and Running Your First Test"
description: "Provides a minimal, step-by-step example showing how to write, build, and run a simple unit test with GoogleTest and GoogleMock. Walks users through main entry points, assertions, and test execution—ensuring a clear initial win."
---

# Writing and Running Your First Test

This guide provides a minimal, step-by-step example that shows you how to write, build, and run a simple unit test using GoogleTest and GoogleMock. It walks you through creating your first test case, using assertions, running the test executable, and interpreting the output to ensure a successful initial experience.

---

## 1. Prerequisites

Before you begin writing your first test, ensure you have completed the following:

- **Set up GoogleTest and GoogleMock** in your development environment following the installation guides for your build system.
- Verified your environment supports C++17 or later.
- Basic familiarity with C++ project setup and compilation.

If you haven't set up the framework yet, consult the [System Requirements & Supported Platforms](https://github.com/google/googletest/blob/main/docs/getting-started/set-up-prerequisites-installation/system-requirements.mdx) and installation pages for Bazel or CMake under Getting Started.

---

## 2. Writing Your First Test

Your first test will demonstrate how to create a test case with GoogleTest and verify simple behavior. Here's how:

### Step 1: Include Required Headers

Include GoogleTest headers for test framework and GoogleMock headers if mocking is needed.

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>
```

### Step 2: Define a Mock Class (if testing interactions)

If your test involves mocking, define a mock class. For example, for a `Turtle` interface:

```cpp
class Turtle {
public:
  virtual ~Turtle() {}
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
};

class MockTurtle : public Turtle {
public:
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
};
```

> **Tip:** Use `MOCK_METHOD()` in the `public` section regardless of the original method visibility.

### Step 3: Write a Test Case

Use the `TEST` macro to define your test. Here's a minimal example:

```cpp
TEST(SimpleTest, ExampleAssertion) {
  int a = 42;
  int b = 42;
  EXPECT_EQ(a, b);  // Test passes if a == b
}
```

### Step 4: Mock Object Example

Using your mock class, set expectations on mocked methods and exercise code under test:

```cpp
using ::testing::AtLeast;

TEST(MockTurtleTest, PenDownCalled) {
  MockTurtle turtle;

  EXPECT_CALL(turtle, PenDown())
      .Times(AtLeast(1));

  // Code under test, e.g., painter that commands the turtle
  turtle.PenDown();
}
```

---

## 3. Building Your Test

Integrate the test into your build system. For example, with CMake, add:

```cmake
add_executable(MyTest my_test.cc)
target_link_libraries(MyTest gtest_main gmock)
add_test(NAME MyTest COMMAND MyTest)
```

Refer to [Integrating with Build Systems](https://github.com/google/googletest/blob/main/docs/overview/workflow-integration/integration-build-systems.mdx) for detailed integration.

---

## 4. Running the Test

Execute the compiled test binary from your shell or IDE:

```sh
./MyTest
```

You will see output similar to:

```text
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SimpleTest
[ RUN      ] SimpleTest.ExampleAssertion
[       OK ] SimpleTest.ExampleAssertion (0 ms)
[----------] 1 test from SimpleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms your test ran successfully.

---

## 5. Understanding Test Assertions

Assertions verify your code behaves as expected. Basic assertion examples include:

- `EXPECT_EQ(val1, val2)` - checks *val1* equals *val2*.
- `EXPECT_TRUE(condition)` - checks condition is true.
- `EXPECT_FALSE(condition)` - checks condition is false.

If an assertion fails, GoogleTest outputs detailed failure information, including file, line number, and value details.

For advanced assertions using matchers, refer to the [Assertions Reference](https://github.com/google/googletest/blob/main/docs/reference/assertions.md).

---

## 6. Sample First Test Example

Putting it all together, here's a quick test example using GoogleTest and GoogleMock:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class Foo {
public:
  virtual ~Foo() {}
  virtual int GetValue() const = 0;
};

class MockFoo : public Foo {
public:
  MOCK_METHOD(int, GetValue, (), (const, override));
};

TEST(FooTest, ReturnsExpectedValue) {
  MockFoo mock;

  EXPECT_CALL(mock, GetValue())
    .WillOnce(::testing::Return(42));

  int result = mock.GetValue();
  EXPECT_EQ(result, 42);
}
```

Compile, run, and confirm that:

- The expectation on `GetValue()` is set before the call.
- The test verifies the mocked return value.

---

## 7. Troubleshooting Common Issues

- **Undefined reference errors:** Ensure you link against gtest and gmock libraries.
- **Tests not running:** Confirm `RUN_ALL_TESTS()` is called in your `main()`.
- **Uninteresting call warnings:** Use `NiceMock<>` or add explicit expectations on methods to suppress warnings.

---

## 8. Next Steps

- Explore [Matchers](api_reference/matchers_assertions/builtin_matchers) to write flexible argument checks.
- Learn about sequencing calls with `InSequence` for ordered expectations.
- Dive deeper into writing mocks at [gMock Cookbook](docs/gmock_cook_book.md).
- Consult the [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md) for a full beginner-friendly walkthrough.

---

## Summary

Writing and running your first test involves creating a test case with `TEST()`, setting expectations with `EXPECT_CALL()` for mocks, using assertions like `EXPECT_EQ`, building the test executable, and running it to observe test results. This establishes your first successful unit test with GoogleTest and GoogleMock, unlocking the power of automated C++ testing.

<Check>
✔ Build your tests with GoogleTest and GoogleMock correctly linked
✔ Use `MOCK_METHOD()` to define mock methods
✔ Write `EXPECT_CALL` before exercising mocks
✔ Use assertions like `EXPECT_EQ` to verify test outcomes
✔ Run tests from your shell/IDE and interpret output
</Check>