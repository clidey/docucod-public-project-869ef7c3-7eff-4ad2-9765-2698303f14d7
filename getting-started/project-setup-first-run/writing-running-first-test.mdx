---
title: "Writing & Running Your First Test"
description: "Provides a concise walkthrough for authoring a simple test using GoogleTest, compiling it, and running it successfully. Includes sample code, explanation of test discovery, and sample output to validate a working setup."
---

# Writing & Running Your First Test

Welcome to the first practical step in using GoogleTest! This guide walks you through authoring a simple test using GoogleTest, compiling it in your environment, running it, and validating successful execution.

---

## 1. Prerequisites & Setup

Before you write your first GoogleTest, ensure:

- You have GoogleTest installed or integrated into your project. Refer to the [Installation Methods](../../getting-started/prerequisites-installation/installation-methods) guide.
- Your compiler supports C++17 or later.
- Your build system knows where to find `gtest` and `gmock` headers and libraries.
- You have a C++ source file in which to write the test, and a compiler toolchain ready.

<Tip>
If you’re new to build system integration, the [Configuring Your Project](../../getting-started/project-setup-first-run/configuring-project) page provides detailed examples for CMake and Bazel.
</Tip>

---

## 2. Writing a Basic Test

Let's create a simple test function in C++ using GoogleTest’s `TEST()` macro.

```cpp
#include <gtest/gtest.h>

// Under test: a simple function
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Test suite: FactorialTest
// Test case: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Check factorial(0) == 1
}

// Test case: HandlesPositiveInput
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}
```

### Explanation

- `TEST(TestSuiteName, TestName)` defines an individual test.
- Assertions like `EXPECT_EQ` validate actual vs. expected results.
- Tests grouped by the first argument (e.g., `FactorialTest`) form a test suite.

<Tip>
Use descriptive names for test suites and test cases to clearly express what behavior is being verified.
</Tip>

---

## 3. Compiling Your Test

How to compile depends on your build environment. Here’s a minimal example using `g++` on Linux/macOS, assuming GoogleTest is installed system-wide:

```bash
# Compile test file
g++ -std=c++17 -isystem /usr/local/include -pthread \
    my_factorial_test.cc -L/usr/local/lib -lgtest -lgtest_main -o my_factorial_test
```

If GoogleTest is in your project directory or you use another build tool, adjust include paths, link libraries, and flags accordingly. For Windows or other platforms, see the [Installation Methods](../../getting-started/prerequisites-installation/installation-methods) guide.

<Tip>
Always enable threading support with `-pthread` (or the platform equivalent) as GoogleTest requires it.
</Tip>

---

## 4. Running Your Test

Once compiled, run the test executable directly:

```bash
./my_factorial_test
```

### Expected Output

```text
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

This confirms your test passed successfully.

<Tip>
If you want to run a specific test case or suite, use command-line filters like:

```bash
./my_factorial_test --gtest_filter=FactorialTest.HandlesPositiveInput
```
</Tip>

---

## 5. Understanding Test Discovery

GoogleTest automatically discovers tests in your executable by the `TEST` and `TEST_F` macros you write. This automation means:

- No test registration code required.
- Tests run in alphabetical order by default (test suites then test cases).
- You can run all tests or filter by partial suite or test names.

<Tip>
You can control test run behavior using `--gtest_*` command line flags. For example, `--gtest_repeat=10` reruns tests multiple times.
</Tip>

---

## 6. Sample First Test Source File

Here’s a complete minimal example you can copy and build immediately:

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Tip>
Although `gtest_main` provides its own `main()` in many setups, defining one lets you customize test startup behavior.
</Tip>

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Issues">
<Accordion title="Test Executable Fails to Link (Missing Symbols)">
This usually means GoogleTest libraries are not linked properly.

- Ensure you link with `-lgtest` and `-lgtest_main`.
- Add `-pthread` compiler and linker flags.
- Verify include paths point to the correct `gtest/gtest.h` location.
</Accordion>
<Accordion title="Tests Aren't Discovered or Run">
- Check you call `::testing::InitGoogleTest()` before `RUN_ALL_TESTS()`.
- Confirm you run the compiled test binary.
- If using dynamic libraries, ensure they are accessible at runtime.
</Accordion>
<Accordion title="Compilation Errors with Macros">
- Confirm your compiler supports C++17.
- Check macro usage syntax, especially for `TEST()` and `EXPECT_*`.
- Be wary of missing includes (`<gtest/gtest.h>`).
</Accordion>
<Accordion title="Tests Fail Unexpectedly or Crash">
- Run tests with `--gtest_shuffle` to detect order dependencies.
- Use AddressSanitizer or similar tools to identify memory errors.
- Check your test and production code assumptions.
</Accordion>
</AccordionGroup>

<Note>
For detailed troubleshooting, see the dedicated [Troubleshooting Common Issues](../../getting-started/troubleshooting-validation/troubleshooting-common-issues) page.
</Note>

---

## 8. What Next?

Now that you can write, compile, and run basic tests, consider exploring:

- [Configuring Your Project](../../getting-started/project-setup-first-run/configuring-project) for build system integration.
- [Mocking with GoogleMock](../mocking-best-practices/creating-mocks) to simulate dependencies.
- [Writing More Advanced Tests](../writing-tests/test-organization-suites) to organize and manage test suites.
- [Running and Configuring Tests](../writing-tests/running-and-configuring-tests) for controlling test execution.

<Tip>
Start simple, then progressively adopt gMock as your testing needs grow.
</Tip>