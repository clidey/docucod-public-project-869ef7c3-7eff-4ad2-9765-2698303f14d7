---
title: "Writing and Running Your First Test"
description: "Takes users from zero to a passing test case using hands-on code samples. Demonstrates the test macro structure, main() function entry point, and basic assertions. Helps users validate their setup immediately."
---

# Writing and Running Your First Test

Welcome to your first hands-on experience writing and running a GoogleTest test case. This guide takes you from zero to a passing test with clear, actionable code samples. You will learn the structure of a test macro, how to define a test entry point using `main()`, and apply basic assertions to validate behavior.

---

## 1. Understanding the Test Macro Structure

GoogleTest uses macros to define and name individual test cases. The primary macro is `TEST()`, which groups related checks into identifiable test suites and test names.

### How to Define a Simple Test

```cpp
TEST(TestSuiteName, TestName) {
  // Test code and assertions go here
  EXPECT_EQ(1 + 1, 2);  // A simple assertion that passes
}
```

- **TestSuiteName**: Organizes related tests (like a category or module).
- **TestName**: Specific test within that suite.

Each `TEST` block defines a function that GoogleTest runs isolated from others, ensuring independent and repeatable execution.

### Example: A Basic Passing Test

```cpp
#include <gtest/gtest.h>

TEST(ExampleTest, SimpleEquality) {
  EXPECT_EQ(4, 2 + 2);
  EXPECT_TRUE(5 > 3);
}
```

This test checks fundamental assertions and should pass immediately.

## 2. Writing the `main()` Function Entry Point

GoogleTest requires an initialization step to process any command-line flags controlling test execution. Then it runs all registered tests and returns the aggregated result.

### Minimal `main()` Implementation

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);  // Initialize GoogleTest with command-line args
  return RUN_ALL_TESTS();                // Run all tests and return 0 if all pass
}
```

- Always call `InitGoogleTest` **before** `RUN_ALL_TESTS()`.
- You must **not** ignore the return value of `RUN_ALL_TESTS()` as this signals test success or failure.

### Note on `gtest_main` Library

If you do not want to write a `main()` yourself, you can link your test binary with `gtest_main`. This library provides a default main function that calls `InitGoogleTest` and `RUN_ALL_TESTS()`.

## 3. Putting It All Together: Your First Complete Test Program

```cpp
#include <gtest/gtest.h>

// A trivial test case to validate setup
TEST(FirstTestSuite, HandlesBasicMath) {
  EXPECT_EQ(2 + 2, 4);
  EXPECT_NE(3 * 3, 8);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### How to Build and Run

1. Add this source file to your build system, linking against GoogleTest and its dependencies.
2. Compile your test program with a C++17 compliant compiler.
3. Run the resulting executable. You should see output indicating test discovery and pass/fail results.

## 4. Validating Your Test Output

After successfully running your test program, GoogleTest outputs detailed results:

```
Running main() from gtest_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from FirstTestSuite
[ RUN      ] FirstTestSuite.HandlesBasicMath
[       OK ] FirstTestSuite.HandlesBasicMath (0 ms)
[----------] 1 test from FirstTestSuite (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Success Criteria

- The test suite and test name should appear in the output.
- Status `[  PASSED  ]` confirms the test ran without failed assertions.
- The program's exit code should be 0 indicating overall success.

## 5. Tips and Best Practices

- Use `EXPECT_*` for non-fatal assertions that continue test execution on failure.
- Use `ASSERT_*` when failure should abort the current test function.
- Avoid underscores (`_`) in test suite and test names, as these are best reserved for class/member names.
- Isolate tests for repeatability and ease debugging.
- Remember to always use `InitGoogleTest` before running your tests.

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Problems When Writing and Running Your First Test">
<Accordion title="Test Not Discovered or Run">
Check that your test source file is included in the build and linked against GoogleTest. Confirm your test function uses the `TEST` macro and that `RUN_ALL_TESTS` is called.
</Accordion>
<Accordion title="Linker Errors for GoogleTest Symbols">
Ensure your compiler flags include paths to GoogleTest headers and libraries. If using CMake, link with `gtest` or `gtest_main` as required.
</Accordion>
<Accordion title="Assertion Failures Unexpectedly Occur">
Review your test code; failed assertions print file/line information. Use `EXPECT_*` or `ASSERT_*` according to whether you want failures to abort.
</Accordion>
<Accordion title="Tests Appear Skipped or Disabled">
Verify that you did not prefix test names with `DISABLED_`. Check command-line flags that filter test execution.
</Accordion>
</AccordionGroup>

## 7. Next Steps

Once your first test runs correctly:

- Explore writing more complex tests using fixtures (`TEST_F`).
- Learn how to write parameterized tests for flexible validation.
- Understand assertions in depth via the [Assertions Reference](../reference/testing.md#assertions).
- Start integrating GoogleMock to create and use mock objects to test interactions.

---

## References and Further Reading

- [GoogleTest Primer](../primer.md) — foundational concepts and practices.
- [Assertions Reference](../reference/testing.md#assertions) — detailed guide on assertion macros.
- [Getting Started with Mocks (GoogleMock)](../gs-configuration-first-test/gs-mock-first-steps) — begin mocking for interaction testing.
- [Setting Up and Running Your First Test](../getting-started/gs-configuration-first-test/gs-first-test) — quickstart guide for test execution.


---

*This page helps you swiftly write and run your first GoogleTest test program, ensuring setup validation and clear understanding of the essential test macro syntax and control flow.*