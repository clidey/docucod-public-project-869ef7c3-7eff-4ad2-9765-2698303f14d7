---
title: "Troubleshooting Common Setup Issues"
description: "Addresses the most common errors encountered during installation and initial test execution, such as compiler errors, linker issues, or configuration problems. Provides practical solutions to help users overcome setup blockers quickly."
---

# Troubleshooting Common Setup Issues

This guide addresses the most common errors users encounter during the installation and initial execution of tests with GoogleTest. Whether you face compiler errors, linker problems, or configuration hiccups, you'll find practical solutions to overcome blockers and get your tests running smoothly.

---

## 1. Common Compiler Errors

Getting compiler errors during GoogleTest setup usually relates to incorrect include paths, mismatched C++ standards, or missing dependencies.

### Typical Symptoms

- "file not found" errors for `<gtest/gtest.h>` or other headers
- Template errors due to unsupported C++ standards
- Namespace or symbol not found errors related to GoogleTest

### Solutions

1. **Verify Include Paths**
   - Confirm that your compiler's include path points to the directory containing GoogleTest headers.
   - Example for GCC/Clang:

   ```bash
   -I/path/to/googletest/include
   ```

2. **Ensure C++17 Standard Compatibility**
   - GoogleTest requires C++17 or higher.
   - Set your compiler flags accordingly:

   ```bash
   -std=c++17
   ```

3. **Check Build Tool Versions**
   - Ensure CMake, Bazel, or your manual build tools are updated and compatible.

<Tip>
Refer to the [Supported Platforms & Requirements](/overview/adoption-and-integration/supported-platforms-and-requirements) for detailed compatibility guidelines.
</Tip>

---

## 2. Linker Issues

Linker errors often occur when the GoogleTest libraries are not linked properly.

### Common Errors

- Undefined reference to GoogleTest symbols (e.g., `testing::InitGoogleTest`)
- Multiple definitions if GoogleTest is linked multiple times incorrectly

### How To Fix

1. **Link the GoogleTest Libraries**

   For example, when using CMake:

   ```cmake
   target_link_libraries(your_test_executable gtest gtest_main pthread)
   ```

2. **Avoid Duplicate Linking**
   - Link either `gtest` and `gtest_main` or provide your own `main()`.
   - Do not link GoogleMock separately unless mocking is used.

3. **Match Debug and Release Libraries**
   - Ensure linking the correct version of GoogleTest (debug vs release) that matches your build configuration.

<Note>
If you build GoogleTest from source, make sure the static/shared libraries are compiled before linking.
</Note>

---

## 3. Configuration and Flag-related Problems

Incorrect command-line flags or environment variables may interfere with test discovery and execution.

### Symptom

- Tests are compiled but not discovered or executed.
- Flags like `--gtest_filter` unintentionally exclude tests.

### Troubleshooting Steps

1. **Check Command Line Flags**
   - Run the test binary with `--gtest_list_tests` to verify what tests GoogleTest detects.

   ```bash
   ./your_test_binary --gtest_list_tests
   ```

2. **Review Test Filters**
   - Ensure you are not using an overly restrictive filter.
   - To run all tests, use `--gtest_filter=*`

3. **Environment Variables**
   - Clear or adjust any environment variables that influence GoogleTest such as `GTEST_FILTER`, `GTEST_FAIL_FAST`, etc.

4. **Disable Sharding**
   - If using sharding, ensure that `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are correctly set.

---

## 4. Runtime Failures When Running First Test

If your test binary builds and runs but tests immediately fail or crash:

### Common Causes

- Fatal assertion failures in test fixture constructors, `SetUp()`, or `TearDown()` methods
- Improper test environment or fixture setup

### Actions to Take

1. **Check for Fatal Failure Locations**
   - Use verbose output or run with

   ```bash
   ./your_test_binary --gtest_break_on_failure
   ```

   to break on the first failure and analyze the backtrace.

2. **Verify Test Fixture Code**
   - Make sure constructors do not contain fatal assertions; place fatal checks in `SetUp()` instead.

3. **Use `HasFatalFailure()` for Early Return**

   When calling test subroutines that include `ASSERT_*` assertions, use:

   ```cpp
   Subroutine();
   if (HasFatalFailure()) return;
   ```

   to prevent your test from continuing after fatal failures.

4. **Check for Disabled Tests**
   - Tests or suites prefixed with `DISABLED_` will not run.

---

## 5. Tips to Quickly Diagnose and Resolve Setup Problems

- Always start by building and running a minimal test (e.g., a single `TEST()` that always passes).
- Use `--gtest_brief=1` to reduce output and focus on failures.
- Set `--gtest_color=yes` for colored output to easily spot errors.
- Use `--gtest_xml_output=xml:<file>` to export results for detailed inspection.
- Utilize `SCOPED_TRACE` in failing subroutines to better identify failing test contexts.

---

## 6. Specific Known Issues and Workarounds

### a. Exception Handling in Death Tests

If you encounter problems running death tests that throw exceptions:

- Confirm that exceptions are enabled in your build.
- Refer to the provided death test macros such as `EXPECT_DEATH()` and `ASSERT_DEATH()`.
- When exceptions escape death tests, GoogleTest treats that as a failure.

### b. Threading Issues With Death Tests

- GoogleTest warns if multiple threads are active when a death test is run.
- Use the "threadsafe" death test style to avoid deadlock scenarios.
- Set the flag programmatically:

  ```cpp
  GTEST_FLAG_SET(death_test_style, "threadsafe");
  ```

---

## 7. When All Else Fails: Collecting Diagnostic Information

- Run your tests with `--gtest_break_on_failure` and attach a debugger to analyze failures in real-time.
- Enable verbose logging or add additional `RecordProperty()` calls to track test state.
- Use `--gtest_repeat` to reproduce flaky failures and isolate setup issues.

<Info>
For step-by-step setup and installation instructions, consult the [Installation Methods](/getting-started/setup-basics/installation-methods) and [Prerequisites & System Requirements](/getting-started/setup-basics/prerequisites-requirements) pages.
</Info>

---

## 8. Example: Fixing a Common Issue - Missing GoogleTest Headers

If your build fails with:

```none
fatal error: gtest/gtest.h: No such file or directory
```

Follow these steps:

<Steps>
<Step title="Locate GoogleTest Includes">
Find the folder where `gtest/gtest.h` resides. For example, `/usr/local/include/googletest`.
</Step>
<Step title="Update Include Paths">
Add the path to your compiler flags: `-I/usr/local/include/googletest`.
</Step>
<Step title="Verify Compilation">
Rebuild your test binary and confirm the error is resolved.
</Step>
</Steps>

---

## 9. Quick Troubleshooting Reference

<AccordionGroup title="Common Setup Issues">
<Accordion title="Compiler Errors">
- Verify C++17 support
- Correct include paths
- Check build tools versions
</Accordion>
<Accordion title="Linker Errors">
- Link with `gtest` and `gtest_main`
- Avoid duplicate linking
- Match debug/release versions
</Accordion>
<Accordion title="Tests Not Discovered or Running">
- Use `--gtest_list_tests` to verify test discovery
- Check filters and environment variables
- Verify no conflicts or disabled tests
</Accordion>
<Accordion title="Runtime Failures in Tests">
- Inspect fixture constructors and `SetUp()` code
- Use `HasFatalFailure()` after subroutines
- Enable break on failure mode
</Accordion>
<Accordion title="Death Test Failures">
- Use `ASSERT_DEATH` and `EXPECT_DEATH` properly
- Set death test style appropriately
- Confirm exception handling
</Accordion>
</AccordionGroup>

---

## 10. Getting Help and Additional Resources

- Check the [FAQ section](/faq/getting-started-and-core-concepts/setting-up-and-running-tests) for common questions.
- Visit the [GoogleTest GitHub repository](https://github.com/google/googletest) for issues and updates.
- Explore the [Assertions Reference](/docs/reference/assertions) for detailed assertion usage.
- Join community forums for broader support.

<Check>
Are you still blocked? Collect logs, test outputs, and error messages before seeking help.
</Check>

---

**Note:** This troubleshooting guide specifically addresses errors commonly encountered during setup and first test execution. For detailed installation, configuration, or test writing instructions, please consult the respective guides in the Getting Started section.
