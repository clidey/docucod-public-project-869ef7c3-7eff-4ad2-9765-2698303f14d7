---
title: "Writing and Running Your First Test"
description: "Guides users in creating, compiling, and running a simple test case using GoogleTest, with step-by-step instructions and sample code. Ensures users see a working test output, confirming success of their setup."
---

# Writing and Running Your First Test with GoogleTest and GoogleMock

Welcome to your first step toward effective C++ testing with GoogleTest and GoogleMock. This guide walks you through creating, compiling, and running your very first unit test, ensuring you see a successful test output that confirms your setup is working flawlessly.

---

## 1. Prerequisites & System Requirements

Before writing your first test, ensure your development environment meets these requirements:

- **C++ Standard**: Support for C++17 or later.
- **Compiler**: Compatible compiler such as GCC, Clang, MSVC, or other supported toolchains.
- **Build Tools**: A working build environment where you can compile and link your C++ code.
- **GoogleTest/GoogleMock Libraries**: Installed and correctly linked in your project.

If you haven’t installed GoogleTest and GoogleMock yet, consult the [Installation Methods](https://github.com/google/googletest) or the Getting Started prerequisites pages before proceeding.

---

## 2. Creating Your First Test File

You will create a simple test that uses GoogleTest’s macros to define and run unit tests, optionally including GoogleMock for mock object interaction verification.

### Step 1: Write a simple test source file (e.g., `sample_test.cc`)

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

// A simple test case named "SampleTest" with a test named "BasicAssertions".
TEST(SampleTest, BasicAssertions) {
  // Expect equality
  EXPECT_EQ(7 * 6, 42);

  // Boolean comparison
  EXPECT_TRUE(true);
  EXPECT_FALSE(false);
}

// Entry point for running all tests.
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

This example defines a basic test that will pass if the assertions hold.

**Tip:** Include `<gmock/gmock.h>` after `<gtest/gtest.h>` to enable mocking features in the same test file if needed.

---

## 3. Compiling the Test

Compile your test using your build system or command line. Below are general compiler commands assuming you have GoogleTest and GoogleMock available:

```bash
# Example using g++ with C++17, adjust include and lib paths as necessary
g++ -std=c++17 -isystem /path/to/googletest/include \
    -isystem /path/to/googlemock/include \
    -pthread sample_test.cc \
    /path/to/libgtest.a /path/to/libgmock.a \
    -o sample_test
```

### Notes:
- Replace `/path/to/...` with your actual paths.
- Linking with pthread is necessary on Linux/macOS.
- If using CMake or Bazel, configure your project accordingly to link GoogleTest/GoogleMock properly.

---

## 4. Running Your First Test

Execute the compiled binary:

```bash
./sample_test
```

You should see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This confirms your test compiled and ran successfully!

---

## 5. Understanding Test Components

- `TEST(TestSuiteName, TestName)`: Defines a test. Create multiple test cases under the same suite.
- Assertions like `EXPECT_EQ`, `EXPECT_TRUE`, and `EXPECT_FALSE` verify conditions.
- `RUN_ALL_TESTS()` runs all tests defined in the binary.

---

## 6. Adding GoogleMock Features

If you want to test interactions with mock objects, you can define mock classes using `MOCK_METHOD` macros (from `gmock`):

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};

TEST(MockTest, ReturnsExpectedValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue())
      .Times(1)
      .WillOnce(::testing::Return(42));

  EXPECT_EQ(mock.GetValue(), 42);
}
```

Compile and run as before; you’ll see expectations validated.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Issues Running Your First Test">
<Accordion title="Compile errors due to missing includes or libraries">
- Verify that your include paths and linker settings are correctly set to find GoogleTest and GoogleMock headers and libraries.
- Confirm the library version matches the headers.
</Accordion>
<Accordion title="Tests not detected or running zero tests">
- Ensure your test functions are properly declared using `TEST` macros.
- Check that `RUN_ALL_TESTS()` is called.
- Confirm your `main()` initializes the framework using `InitGoogleTest` (or `InitGoogleMock`).
</Accordion>
<Accordion title="Linker errors related to pthread or missing dependencies">
- On Linux/macOS, link with `-pthread` to enable threading support.
- Make sure all required GoogleTest and GoogleMock static or shared libraries are linked.
</Accordion>
<Accordion title="Unexpected test failures or missing behaviors">
- Use `--gmock_verbose=info` command-line flag to get detailed mock call logs.
- Check your expectations setup order — all `EXPECT_CALL` must be before exercising the mock.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps

- Experiment by writing tests with more complex assertions and multiple test cases.
- Read the [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html) to understand mocking fundamentals.
- Explore the [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) for practical recipes.
- Use [Getting Started / Quickstart Workflow](../quickstart-workflow) to scale up your testing skills.

---

## 9. Getting Help and Further Resources

- [Official GoogleTest GitHub](https://github.com/google/googletest)
- [GoogleTest Documentation Site](https://google.github.io/googletest/)
- [GoogleMock Reference](https://google.github.io/googletest/reference/mocking.html)
- [Mocking Reference](reference/mocking.md) for detailed API explanations.
- [Mocking Cheat Sheet](docs/gmock_cheat_sheet.md) for quick usage references.
- Stack Overflow, Google Groups, or company internal forums.

---

By following these steps, you’ve set up and run your first GoogleTest and optionally GoogleMock test. Seeing your test pass confirms a strong foundational start to writing robust, maintainable C++ unit tests.

Keep iterating and expanding your tests — confidence in code comes from rigorous automated testing!

---

# Appendix: Minimal Example `sample_test.cc`

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(7 * 6, 42);
  EXPECT_TRUE(true);
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run as described above.

---

# Appendix: Command-line Options to Enhance Test Output

Run your tests with additional flags:

- `--gmock_verbose=info`: Prints detailed mock call logs.
- `--gtest_filter=`: Run specific tests using wildcards.
- `--gtest_output=xml:<file>`: Produces XML test reports for CI integration.

For example:

```bash
./sample_test --gmock_verbose=info
```

---