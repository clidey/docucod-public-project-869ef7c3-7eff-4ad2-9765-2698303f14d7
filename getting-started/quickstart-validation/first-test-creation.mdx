---
title: "Create Your First Test"
description: "Walks through creating a minimal test file, compiling it, and running the test binary. Demonstrates the basic usage of GoogleTest (and optionally GoogleMock), referencing sample code to ensure immediate hands-on success."
---

# Create Your First Test

Welcome to your first hands-on experience with GoogleTest! This guide walks you through creating a minimal test file, compiling it correctly with GoogleTest (and optionally GoogleMock), and running the test binary to verify success. By the end, you will have established a working test executable, giving you immediate confidence and a solid foundation for writing more complex tests.

---

## 1. Prerequisites

Before you start, ensure the following:

- You have installed GoogleTest and GoogleMock libraries and their headers.
- Your build environment supports C++17 or later.
- Your build tool can locate the GoogleTest libraries and include files.

If you haven't set up GoogleTest yet, see the [Prerequisites & System Requirements](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/prerequisites-requirements.mdx) and [Installation: CMake & Bazel](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/installation-cmake-bazel.mdx) guides.

## 2. Writing a Minimal Test

Create a new C++ source file, e.g., `my_first_test.cc`, and write the following code:

```cpp
// my_first_test.cc

#include <gtest/gtest.h>

// Test case and test name cannot contain underscores.
TEST(SimpleTest, AdditionWorks) {
  // Check that 2 + 2 equals 4.
  EXPECT_EQ(2 + 2, 4);
}

// Entry point for the executable.
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Explanation

- `TEST(SimpleTest, AdditionWorks)` defines a test named `AdditionWorks` within the test suite `SimpleTest`.
- `EXPECT_EQ` asserts that `2 + 2` equals `4`. If not, the test fails.
- `main()` initializes GoogleTest and runs all registered tests, returning `0` on success.

## 3. Compiling the Test Executable

Compile your test with the compiler, linking against GoogleTest and GoogleMock libraries. Examples below illustrate common scenarios.

### Using g++ on Linux or Mac

```bash
# Adjust paths to your setup as needed.
g++ -std=c++17 my_first_test.cc \
  -I/path/to/googletest/include \
  -L/path/to/googletest/lib \
  -lgtest -lgtest_main -lpthread -o my_first_test
```

- `-std=c++17` ensures you use at least C++17.
- `-I` and `-L` specify the include and library directories.
- `-lgtest` and `-lgtest_main` link GoogleTest libraries.
- `-lpthread` is typically required on POSIX systems.

### Using CMake

If you use CMake, your `CMakeLists.txt` could contain:

```cmake
cmake_minimum_required(VERSION 3.14)  # Require modern CMake
project(MyFirstTest)

# Enable testing
enable_testing()

# Find GoogleTest package (assuming it's installed)
find_package(GTest REQUIRED)

add_executable(my_first_test my_first_test.cc)
target_link_libraries(my_first_test GTest::gtest GTest::gtest_main pthread)

add_test(NAME MyFirstTest COMMAND my_first_test)
```

Run `cmake`, `make`/`ninja`, then execute the test binary.

## 4. Running the Test

Execute the compiled test binary:

```bash
./my_first_test
```

You should see output like:

```none
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SimpleTest
[ RUN      ] SimpleTest.AdditionWorks
[       OK ] SimpleTest.AdditionWorks (0 ms)
[----------] 1 test from SimpleTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This indicates your test passed successfully!

## 5. Expanding to Use GoogleMock (Optional)

If you want to begin writing tests using mock objects, include GoogleMock headers along with GoogleTest in your test file:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>
```

Update your build commands to link `-lgmock` and `-lgmock_main` as well.

For example:

```bash
g++ -std=c++17 my_first_test.cc \
  -I/path/to/googlemock/include \
  -L/path/to/googlemock/lib \
  -lgmock -lgmock_main -lgtest -lgtest_main -lpthread -o my_first_test
```

Write tests by defining mock classes inheriting from your interfaces using the `MOCK_METHOD` macro (see the [Mocking Reference](https://github.com/google/googletest/tree/main/docs/reference/mocking.md)) and set expectations using `EXPECT_CALL`.

## 6. Troubleshooting Common Issues

### Test Fails to Link

- Ensure you link against the correct GoogleTest libraries.
- Check include and library paths.
- Verify C++17 or later is enabled.

### Default Constructor Missing in Test Fixture

If you get errors like "no matching function for call to 'FooTest::FooTest()'", make sure your test fixture class has a public default constructor.

### Using Underscores in Test Names

Test suites and test names should *not* contain underscores (`_`). This prevents name clashes and complies with GoogleTest conventions.

### Tests Not Running

Make sure your test binary calls `RUN_ALL_TESTS()` and that your tests are linked in the executable.

### GoogleMock Symbols Undefined

If using GoogleMock, ensure you link `-lgmock` and `-lgmock_main` libraries and include the GoogleMock headers.

## 7. Next Steps

Congratulations on running your first test!

Consider the following next actions:

- Learn more about writing tests in the [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md).
- Explore test fixtures and parameterized tests in the [Advanced GoogleTest Topics](https://github.com/google/googletest/tree/main/docs/advanced.md).
- Dive into mocking with the [gMock Cookbook](https://github.com/google/googletest/tree/main/docs/gmock_cook_book.md) and [Mocking for Dummies](https://github.com/google/googletest/tree/main/docs/gmock_for_dummies.md).
- Use the [Mocking Reference](https://github.com/google/googletest/tree/main/docs/reference/mocking.md) for detailed macro and API specifications.

---

> **Tip:** Keep your test cases small and focused. Use mocks to isolate components and write assertions that verify behavior clearly.

---

## References

- [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md)
- [Mocking Reference](https://github.com/google/googletest/tree/main/docs/reference/mocking.md)
- [gMock Cookbook](https://github.com/google/googletest/tree/main/docs/gmock_cook_book.md)
- [Installation: CMake & Bazel](https://github.com/google/googletest/tree/main/docs/getting-started/setup-installation/installation-cmake-bazel.mdx)
- [Troubleshooting Common Issues](https://github.com/google/googletest/tree/main/docs/getting-started/quickstart-validation/troubleshooting-common-issues.mdx)


---

## Diagram: Test Creation and Execution Flow

```mermaid
flowchart TD
  Start[Test code with TEST macro]
  Start --> Compile[Compile source into binary linked with GoogleTest]
  Compile --> Run[Test binary execution]
  Run --> InitInitGoogleTest[Calls testing::InitGoogleTest()]
  InitInitGoogleTest --> RunAllTests[Run RUN_ALL_TESTS()]
  RunAllTests --> DiscoverTests[Discover and register all defined tests]
  DiscoverTests --> ExecuteTests[Execute tests one by one]
  ExecuteTests --> RunTestCases[Test cases run with setUp/tearDown]
  RunTestCases --> AssertionProcessing[Process EXPECT/ASSERT within tests]
  AssertionProcessing --> ReportResults
  ReportResults --> End
```

This flow walks you from writing a test macro to compiling, running, and viewing test results.

---