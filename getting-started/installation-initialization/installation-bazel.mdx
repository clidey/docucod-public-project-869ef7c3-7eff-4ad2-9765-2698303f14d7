---
title: "Installing with Bazel"
description: "Quickly configure GoogleTest and GoogleMock for Bazel-driven projects, with clear commands and configuration steps. This page removes all ambiguity for users adopting Bazel as their primary build system."
---

# Installing with Bazel

Quickly configure GoogleTest and GoogleMock for Bazel-driven projects with straightforward commands and configuration steps. This guide eliminates any ambiguity for users adopting Bazel as their primary build system for C++ testing.

---

## 1. Prerequisites & Environment Setup

Before you start, ensure your environment meets the following:

- **Operating System:** Linux, macOS, or Windows.
- **C++ Compiler:** Must support at least C++17 (GCC, Clang, MSVC).
- **Bazel Version:** 7.0 or higher is required.

For more details on supported platforms and compiler requirements, see the [Supported Platforms & Compatibility guide](/overview/integration-platforms/supported-platforms).

If Bazel is not installed, follow the official [Bazel installation guide](https://bazel.build/install).

<Tip>
Setting the Bazel compiler option to ensure C++17 compatibility is essential. On GCC/Clang use `--cxxopt=-std=c++17`. For MSVC, use `--cxxopt=/std:c++17`.
</Tip>

---

## 2. Setting Up Your Bazel Workspace

A Bazel workspace is the root directory that contains your project and build configuration files.

### Step 1: Create Your Workspace Directory

Open your terminal and run:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Add a `MODULE.bazel` File

Create a file named `MODULE.bazel` in the root of your workspace and add the following content:

```python
# MODULE.bazel

# Select the desired GoogleTest version from Bazel Central Registry
bazel_dep(name = "googletest", version = "1.17.0")
```

This setup tells Bazel to fetch and use GoogleTest version 1.17.0 as a dependency via the Bazel Central Registry.

<Note>
Keep this version updated by checking the latest releases at https://registry.bazel.build/modules/googletest.
</Note>

---

## 3. Creating Your First Test

With the workspace ready, you can now write your first GoogleTest-based test.

### Step 1: Create a Test Source File

Create a file named `hello_test.cc` with the following content:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  // Check that two strings are not the same
  EXPECT_STRNE("hello", "world");
  // Check that multiplication is as expected
  EXPECT_EQ(7 * 6, 42);
}
```

This simple test checks basic assertions on string inequality and numeric equality.

### Step 2: Create a Bazel `BUILD` File

In the same directory, create a file named `BUILD` with the following contents:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This tells Bazel how to build the test binary, linking it against GoogleTest and its main function.

---

## 4. Building and Running Your Test

### Step 1: Build and Test Via Bazel

Run the following command in your terminal:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- `--cxxopt=-std=c++17` ensures the compiler uses C++17.
- `--test_output=all` displays all the test output in the console.

### Expected Output

You will see output similar to:

```
INFO: Analyzed target //:hello_test ...
INFO: Found 1 test target...
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
INFO: Build completed successfully
```

Congratulations! Your first Bazel-built GoogleTest binary has run successfully.

<Tip>
If you encounter linker errors related to threading, verify that your Bazel configuration passes the appropriate compiler flags (`-pthread` for Linux/macOS).
</Tip>

---

## 5. Best Practices and Next Steps

- **Keep your `MODULE.bazel` dependencies up to date** to get the latest fixes and features.
- Use `cc_test` rules in your `BUILD` files consistently to organize your tests.
- Leverage Bazel's caching and parallelization for faster test execution.

### Next Documentation to Explore

- [Creating Your First Test](/getting-started/first-test-validation/creating-first-test) for detailed sample tests.
- [Building and Running Tests](/getting-started/first-test-validation/building-running-tests) for advanced build options.
- [Troubleshooting and Common Setup Issues](/getting-started/first-test-validation/troubleshooting-setup) for common Bazel integration pitfalls.

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Bazel Setup Issues">
<Accordion title="Bazel not found or version too old">
Check Bazel is installed by running:

```bash
bazel version
```

Upgrade Bazel if the version is below 7.0.
</Accordion>
<Accordion title="Compiler does not support C++17">
Ensure your system compiler is recent enough (GCC 7+, Clang 5+, MSVC 2017+). Set Bazel compiler options appropriately with `--cxxopt`.
</Accordion>
<Accordion title="Linker errors with pthread">
Especially on Linux and macOS, missing the `-pthread` compile and link flags can cause errors. Bazel typically manages this; if not, check your toolchain config.
</Accordion>
<Accordion title="Tests not discovered or run">
Verify your `BUILD` file specifies `cc_test` correctly and links `@googletest//:gtest_main`.
</Accordion>
</AccordionGroup>

<Check>
If a problem persists, consult the [FAQ and Troubleshooting Patterns](/guides/best-practices-integrations/faq-and-troubleshooting) or seek help in the Bazel and GoogleTest communities.
</Check>

---

### Congratulations!
You have completed the essential setup for building and running GoogleTest and GoogleMock with Bazel. Youâ€™re now equipped to write, build, and run robust C++ tests seamlessly using this proven workflow.

---

_This page is part of the Getting Started guides. For other build system setups, see [Installing with CMake](/getting-started/installation-initialization/installation-cmake) and [Manual and Advanced Installation](/getting-started/installation-initialization/installation-manual)._