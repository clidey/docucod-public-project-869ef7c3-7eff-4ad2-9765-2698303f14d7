---
title: "Manual and Advanced Installation"
description: "Instructions for manually downloading, building, and linking GoogleTest/GoogleMock without automated tools. Includes guidance for custom integration, uncommon environments, and troubleshooting non-standard scenarios."
---

# Manual and Advanced Installation

This guide provides detailed instructions for manually downloading, building, and linking GoogleTest and GoogleMock without relying on automated build tools. It is intended for users working in custom setups, uncommon environments, or seeking fine-grained control over the build and integration process.

---

## 1. Prerequisites & Environment Preparation

Before proceeding, ensure your system meets the following prerequisites:

- **C++ Compiler Supporting C++17 or Later:** GoogleTest requires a compiler that supports at least C++17.
- **CMake (Version 3.13 or Higher):** Used to generate build scripts.
- **Build Tools:** A compatible build toolchain such as `make`, Visual Studio, or Xcode.

<Check>
Verify your compiler version:
```bash
c++ --version
```
Verify CMake installation:
```bash
cmake --version
```
</Check>

<Note>
If you do not have CMake installed, download it from https://cmake.org/.
</Note>

## 2. Downloading GoogleTest and GoogleMock

GoogleMock is included within the GoogleTest repository. To get the source:

<Steps>
<Step title="Clone the Repository">
Run the following git command to clone the latest release (you may choose a specific tag or branch):
```bash
git clone https://github.com/google/googletest.git -b main
```  
Change to the source directory:
```bash
cd googletest
```
</Step>
<Step title="Check the Directory Structure">
Verify that you have the following key directories:

- `googletest/` - Google Test files
- `googlemock/` - Google Mock files

The root `CMakeLists.txt` will detect and build both automatically.
</Step>
</Steps>

## 3. Building with CMake Manually

You can build both libraries using CMake with all features or customize the build.

<Steps>
<Step title="Create a Build Directory">
It is recommended to build out of source:

```bash
mkdir build
cd build
```
</Step>
<Step title="Run CMake to Configure the Build">
Run CMake to generate native build files (Makefiles, Visual Studio projects, etc.):

```bash
cmake ..
```

To build only GoogleTest without GoogleMock, disable GoogleMock:

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build the Libraries">
On Linux/macOS, build with `make`:

```bash
make
```

On Windows, open the generated Visual Studio solution `gtest.sln` and build using Visual Studio.
</Step>
</Steps>

<Info>
By default, tests for GoogleMock are not built. To enable building GoogleMock's own tests, add:

```
cmake .. -Dgmock_build_tests=ON
```
</Info>

## 4. Installation (Optional)

If you want to install the built libraries and headers system-wide or to a custom location:

```bash
sudo make install
```

This will install into default system paths (usually `/usr/local/`). Customize install location with:

```bash
cmake -DCMAKE_INSTALL_PREFIX=/your/custom/path ..
make install
```

<Warning>
Installing system-wide requires appropriate permissions (e.g., root or administrator).
</Warning>

## 5. Integrating GoogleTest/GoogleMock in Your Project Manually

Assuming you have built the libraries, you can manually link against them in your projects.

<Steps>
<Step title="Include Headers">
Make sure to add the include directories for GoogleTest and GoogleMock in your project build configuration. Typical include paths:

- `{googletest_root}/googletest/include`
- `{googletest_root}/googlemock/include`

You may also need `{googletest_root}/googletest` and `{googletest_root}/googlemock` source directories for some setups.
</Step>
<Step title="Link Libraries">
Link your test target against the compiled static or shared libraries:

- `libgtest.a` or `libgtest.so`
- `libgmock.a` or `libgmock.so`
- Optionally `libgtest_main.a` or `libgmock_main.a` if you want to use the provided `main()` function.

Example using g++:
```bash
g++ your_tests.cc -I path_to_gtest/include -I path_to_gmock/include -L path_to_built_libs -lgmock_main -lgmock -lgtest -pthread -o your_tests
```
</Step>
<Step title="Using gmock_main">
Linking with `gmock_main` provides a main function that initializes Google Mock and Google Test. If you write your own `main()`, link only `gmock` and/or `gtest`.
</Step>
</Steps>

<Note>
In many cases, you can integrate GoogleTest/GoogleMock into your CMake project using `add_subdirectory()` instead of manual linking; see the `Installing with CMake` guide for details.
</Note>

## 6. Running Tests

After building your test binaries:

```bash
./your_tests
```

This runs all tests. On success, the program returns 0. On failure, it returns a non-zero value.

<Tip>
Return values of test executables are critical when integrating with CI pipelines.
</Tip>

## 7. Advanced Customization and Build Options

GoogleMock's `CMakeLists.txt` includes options for advanced users:

- **`gmock_build_tests`**: Enable building GoogleMock's own tests
- **`BUILD_SHARED_LIBS`**: Build libraries as shared instead of static

These can be toggled by running CMake with `-Doption=ON`.

Also, GoogleMock defines multiple compilation targets with different flags for exceptions and RTTI control.

## 8. Troubleshooting Common Issues

<AccordionGroup title="Common Manual Installation Issues">
<Accordion title="CMake Can't Find GoogleTest or GoogleMock">
Make sure the paths you provide in your build system correspond to where the source and/or libraries are located. If using `add_subdirectory()`, use relative paths correctly.
</Accordion>
<Accordion title="Linker Errors Related to pthread">
For Linux/macOS, link with `-pthread` or specify pthread explicitly in your build commands.
</Accordion>
<Accordion title="Compiler Does Not Support C++17">
Update your compiler to a version supporting C++17 or switch to a compatible compiler.
</Accordion>
<Accordion title="'main' Function Multiple Definitions">
Linking with both `gmock_main` and your own `main()` causes conflicts. Link with `gmock` only if you provide a custom main.
</Accordion>
</AccordionGroup>

## 9. Additional Resources

- [GoogleTest Primer](../primer.md) - Learn how to write your first tests
- [Installing with CMake](installation-cmake.md) - Recommended automated build instructions
- [Mocking for Dummies](gmock_for_dummies.md) - Guide to creating mocks with GoogleMock
- [GoogleTest GitHub Repository](https://github.com/google/googletest) - Source, issues, latest updates

## 10. Summary

Manual installation provides you control and flexibility when integrating GoogleTest and GoogleMock into complex or unconventional environments. This page has walked you through prerequisites, manual build steps with CMake, installation, manual linking, running tests, and troubleshooting.

Following this guide ensures you can fully leverage the powerful GoogleTest and GoogleMock frameworks even when your project or environment cannot use automated integration.

---

<Check>
You have successfully:

- Downloaded the source
- Built the libraries manually with CMake
- Optionally installed them system-wide
- Linked them into your test binaries
- Run your first tests
</Check>
