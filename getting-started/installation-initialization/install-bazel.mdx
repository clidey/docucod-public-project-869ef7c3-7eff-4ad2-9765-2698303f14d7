---
title: "Installing with Bazel"
description: "Explains how to add GoogleTest to a Bazel workspace, including WORKSPACE configuration, dependencies, and BUILD file examples. Provides a simple test integration to confirm setup."
---

# Installing with Bazel

This guide explains how to add GoogleTest to your Bazel workspace, from configuring your workspace dependencies to creating test rules and running your first test. Follow these steps to quickly integrate GoogleTest into your Bazel build system and validate that it works.

---

## 1. Prerequisites & System Requirements

Before starting, ensure you have the following:

- **Operating System:** Linux, macOS, or Windows
- **Compiler:** C++ compiler supporting at least C++17
- **Bazel:** Version 7.0 or higher

Refer to the [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) documentation for detailed compatibility information.

If you don't have Bazel installed, visit the [Bazel installation guide](https://bazel.build/install) to get started.

<Check>
Verify Bazel version by running:

```bash
bazel version
```

Ensure the output is 7.0 or higher.
</Check>

---

## 2. Adding GoogleTest to Your Bazel Workspace

### Step 1: Create Your Workspace Directory

Choose or create a directory that will serve as your Bazel workspace.

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2: Define GoogleTest Dependency in MODULE.bazel

Create a file named `MODULE.bazel` in the root of your workspace. Add the following to specify GoogleTest as a dependency via the Bazel Central Registry:

```python
# MODULE.bazel

# Choose the most recent version at https://registry.bazel.build/modules/googletest
bazel_dep(name = "googletest", version = "1.17.0")
```

Using Bazel Central Registry is the recommended way to manage external dependencies starting with Bazel 7.0, ensuring reliable versioning and compatibility.

<Note>
Replace `1.17.0` with the latest stable version available from the [Bazel Central Registry page for googletest](https://registry.bazel.build/modules/googletest) when integrating in your project.
</Note>

---

## 3. Writing a Simple Test with GoogleTest

### Step 1: Create a Test Source File

Inside your workspace, create a test file named `hello_test.cc` with the following example code:

```cpp
#include <gtest/gtest.h>

// A basic test that demonstrates simple assertions.
TEST(HelloTest, BasicAssertions) {
  // Strings "hello" and "world" should not be equal.
  EXPECT_STRNE("hello", "world");

  // Arithmetic check: 7 * 6 should equal 42.
  EXPECT_EQ(7 * 6, 42);
}
```

This simple test demonstrates common GoogleTest assertions and will serve as your first verification that the setup is correct.

### Step 2: Create a BUILD File

In the same directory as `hello_test.cc`, create a file named `BUILD` with the following content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This Bazel build rule defines a C++ test named `hello_test`, compiles the test source, and links it against the GoogleTest libraries `gtest` and the `main` function from `gtest_main`.

<Note>
If you use Clang or GCC, you need to specify the C++17 standard explicitly. For MSVC, the equivalent flag differs. See [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md) for details.
</Note>

---

## 4. Building and Running Your Test

### Step 1: Build the Test

Run Bazel to compile the test binary:

```bash
bazel build //:hello_test
```

This command will analyze dependencies and build your test.

### Step 2: Run the Test

Run your tests using Bazel's test runner. Include flags to set C++17 standard and get full test output:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

You should see output similar to:

```
INFO: Analyzed target //:hello_test (1 packages loaded, 4 targets configured).
INFO: Found 1 test target...
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.

================================================================================
Target //:hello_test up-to-date:
  bazel-bin/hello_test
INFO: Elapsed time: 2.482s, Critical Path: 1.05s
INFO: 4 processes: 2 internal, 2 linux-sandbox.
INFO: Build completed successfully, 4 total actions
//:hello_test                                                     PASSED in 0.1s
```

This confirms your GoogleTest integration is fully operational.

<Check>
If you encounter errors regarding missing dependencies or failed builds, double-check your `MODULE.bazel` and `BUILD` files, and ensure Bazel version is >= 7.0.
</Check>

---

## 5. Best Practices and Tips

- **Keep GoogleTest versions updated** in your `MODULE.bazel` to benefit from the latest features and fixes.
- **Isolate tests by target** using Bazel’s granular test rules for efficient parallel runs.
- **Use `gtest_main` for simple test entry points.** Avoid writing your own main() unless necessary.
- **Specify the C++ standard explicitly** (`--cxxopt=-std=c++17`) to avoid compiler defaults causing compatibility issues.

---

## 6. Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Bazel version too low">
If your Bazel version is below 7.0, the Bazel Central Registry dependencies might not work. Upgrade Bazel by following the [Bazel install guide](https://bazel.build/install).
</Accordion>
<Accordion title="Missing @googletest dependencies">
Confirm that your `MODULE.bazel` declares the `bazel_dep` for googletest correctly. Run `bazel sync` to synchronize dependencies.
</Accordion>
<Accordion title="Compilation errors due to C++ version">
Make sure to add `--cxxopt=-std=c++17` for GCC/Clang or the equivalent for MSVC in your Bazel build/test commands.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps

After confirming your GoogleTest installation via Bazel:

- Explore creating your own tests beyond the `hello_test` example.
- Review the [GoogleTest Primer](https://google.github.io/googletest/primer.html) for writing tests and assertions.
- Consider integrating GoogleMock for advanced mocking capabilities.
- Visit other getting started pages such as [Running the Sample Tests](../first-test-experience/run-sample-tests.md) or [Writing Your First Test](../first-test-experience/write-your-first-test.md).

---

## Summary
You have successfully added GoogleTest as a dependency to your Bazel workspace using the recommended Bazel Central Registry method. You declared test targets, compiled your first C++ test, and ran it using Bazel’s testing framework. This foundation lets you confidently write and run tests in your Bazel environment with GoogleTest.

---

## Helpful References

- [Bazel Central Registry: GoogleTest](https://registry.bazel.build/modules/googletest)
- [Bazel Official Documentation](https://docs.bazel.build)
- [GoogleTest Primer](https://google.github.io/googletest/primer.html)
- [Supported Platforms](https://github.com/google/googletest/blob/main/docs/platforms.md)
- [Quickstart: Building with Bazel](../quickstart-bazel.md)
- [Troubleshooting Common Issues](../troubleshooting-support/common-issues.md)

---

<p align="center"><small>Documentation sourced from the official GoogleTest repository at <a href="https://github.com/google/googletest">https://github.com/google/googletest</a>.</small></p>