---
title: "Writing Your First Test"
description: "Walks users through creating a basic test case using GoogleTest (and optionally GoogleMock), demonstrating core testing concepts and assertions. Includes sample code to ensure immediate application."
---

# Writing Your First Test

Welcome to the world of automated testing with GoogleTest! This guide walks you through crafting your very first test using GoogleTest, showing you the essentials to get started quickly and effectively. GoogleMock usage is optionally included to enrich your tests with mocking capabilities.

---

## 1. Prerequisites & Setup

Before writing your first test, make sure you have the following:

- A working C++17-compliant compiler (e.g., GCC, Clang, MSVC).
- GoogleTest and GoogleMock source available in your project.
- Your build system configured to compile and link against GoogleTest/GoogleMock.

If you haven't set up GoogleTest yet, see the [Prerequisites & System Requirements](../../getting-started/setup-installation/prerequisites-system-requirements.md) and [Installation Methods](../../getting-started/setup-installation/installation-methods.md) guides.

---

## 2. Writing a Basic Test

A test case in GoogleTest is written as a function with a test macro. Here's the simplest form:

```cpp
#include <gtest/gtest.h>

// A simple test that always passes.
TEST(ExampleTestSuite, BasicTest) {
  EXPECT_EQ(1, 1);  // Checks that 1 equals 1
}
```

### Step-by-Step Explanation:

- `#include <gtest/gtest.h>` brings in GoogleTest functionalities.
- `TEST(TestSuiteName, TestName)` declares a test function. Here, `ExampleTestSuite` is the suite grouping related tests, and `BasicTest` is the unique test name.
- Inside the test, assertions like `EXPECT_EQ` verify expected behavior.

When you run your tests, GoogleTest will execute this function and report success or failure.

---

## 3. Adding More Assertions

GoogleTest provides many assertion macros to validate different conditions. Here are core examples:

| Assertion     | Description                                       | Example                           |
|---------------|-------------------------------------------------|---------------------------------|
| `EXPECT_EQ`   | Checks if two values are equal                    | `EXPECT_EQ(x, y);`               |
| `EXPECT_TRUE` | Checks if an expression is true                   | `EXPECT_TRUE(valid);`            |
| `EXPECT_FALSE`| Checks if an expression is false                  | `EXPECT_FALSE(has_error);`       |
| `ASSERT_*`    | Like `EXPECT_*` but halts execution on failure    | `ASSERT_NE(ptr, nullptr);`       |

Use `EXPECT_*` when you want the test to continue checking other assertions even if one fails. Use `ASSERT_*` when subsequent statements depend on the success of the assertion.

**Example:**

```cpp
TEST(MathTest, SimpleAssertions) {
  int a = 5;
  int b = 5;
  EXPECT_EQ(a, b);          // Passes
  EXPECT_TRUE(a == b);      // Passes
  EXPECT_FALSE(a != b);     // Passes
  ASSERT_NE(a, 0);          // Passes and continues
}
```

---

## 4. Writing a Test Fixture

When multiple tests share the same setup or need to reuse objects, use test fixtures. They help organize and reduce code duplication.

### Defining a Test Fixture

```cpp
class MyTestFixture : public ::testing::Test {
 protected:
  void SetUp() override {
    // Code here runs before each test
    value_ = 42;
  }

  void TearDown() override {
    // Code here runs after each test
  }

  int value_;
};
```

### Using the Test Fixture

```cpp
TEST_F(MyTestFixture, Test1) {
  EXPECT_EQ(value_, 42);
}

TEST_F(MyTestFixture, Test2) {
  value_ = 10;
  EXPECT_EQ(value_, 10);
}
```

- Use `TEST_F` macro to use the fixture.
- Each test runs independently with fresh setup and teardown.

---

## 5. Integrating GoogleMock (Optional)

To mock dependencies and observe their interactions, you can use GoogleMock alongside GoogleTest.

### Creating a Mock Class

Say you want to mock an interface `Foo`:

```cpp
class Foo {
 public:
  virtual ~Foo() = default;
  virtual int GetValue() const = 0;
  virtual void SetValue(int v) = 0;
};
```

Create a mock subclass:

```cpp
#include <gmock/gmock.h>

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (const, override));
  MOCK_METHOD(void, SetValue, (int v), (override));
};
```

### Setting Expectations and Using Mock

```cpp
TEST(MockFooTest, ExampleUsage) {
  MockFoo mock;

  // Expect GetValue to be called, returning 5.
  EXPECT_CALL(mock, GetValue()).WillOnce(::testing::Return(5));

  EXPECT_EQ(mock.GetValue(), 5);
}
```

---

## 6. Running Your Tests

Once your test code is ready, build and run your test executable.

For example, if using CMake, run:

```bash
mkdir build && cd build
cmake ..
make
./your_test_executable
```

GoogleTest will run all tests auto-discovered via the `TEST` macros and report results.

---

## 7. Troubleshooting Common Issues

- **Tests not discovered:** Ensure tests use `TEST` or `TEST_F` macros and that the executable is linked with GoogleTest.
- **Linker errors:** Check GoogleTest/GoogleMock libraries are correctly linked.
- **Confusing errors:** Run tests with `--gtest_verbose=info` for detailed logs.

---

## Next Steps

- Explore more assertion types and their best practices in the [GoogleTest Assertions Reference](../../api-reference/core-assertions-macros/googletest-assertions.md).
- Learn advanced mock usage from the [Mocking Basics](../../googletest-guides/advanced-mocking/mocking-basics.md) guide.
- For integrating GoogleMock mocks in your tests, see the [Mocking Reference](../../docs/reference/mocking.md).

---

## Summary Example

Here's a concise complete example to illustrate all the above points:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class Turtle {
 public:
  virtual ~Turtle() {}
  virtual void PenUp() = 0;
  virtual void PenDown() = 0;
  virtual void Forward(int distance) = 0;
  virtual int GetX() const = 0;
};

class MockTurtle : public Turtle {
 public:
  MOCK_METHOD(void, PenUp, (), (override));
  MOCK_METHOD(void, PenDown, (), (override));
  MOCK_METHOD(void, Forward, (int distance), (override));
  MOCK_METHOD(int, GetX, (), (const, override));
};

TEST(PainterTest, DrawsCircle) {
  MockTurtle turtle;

  EXPECT_CALL(turtle, PenDown()).Times(1);
  EXPECT_CALL(turtle, Forward(::testing::_)).Times(::testing::AtLeast(1));

  turtle.PenDown();
  turtle.Forward(100);
  EXPECT_GT(turtle.GetX(), 0);
}
```

This test sets expectations and exercises mock calls to verify interaction.

---

## Getting Help and More Information

- Access the [GoogleTest Primer](../../googletest-guides/getting-started/primer.md) for a comprehensive introduction.
- Dive into the [GoogleMock for Dummies](../../docs/gmock_for_dummies.md) for mock-specific onboarding.
- Visit the GitHub repo for issues and community support: [https://github.com/google/googletest](https://github.com/google/googletest)

---

Embrace automated testing with GoogleTest todayâ€”build confidence in your C++ code faster and easier than ever before!