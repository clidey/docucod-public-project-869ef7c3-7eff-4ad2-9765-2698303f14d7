---
title: "Installation (CMake, Bazel, Manual)"
description: "Explains the different installation methods—using CMake, Bazel, and manual build—with clear, actionable steps for each approach. Supports users in choosing the workflow best suited to their development environment."
---

# Installation (CMake, Bazel, Manual)

This guide will walk you through the different methods available to build and install GoogleTest, including CMake, Bazel, and manual build approaches. You will learn how to choose the method best suited to your environment and integrate GoogleTest into your development workflow with clear, actionable steps.

---

## 1. Prerequisites & System Requirements

- **C++17 Compatible Compiler**: GoogleTest requires a compiler supporting at least C++17. Supported compilers include GCC 7.1+, Clang 5.0+, and MSVC 2017+
- **Operating Systems Supported**: Windows, Linux, and macOS
- **Build Tools & Utilities**:
  - For CMake: CMake 3.13 or later installed
  - For Bazel: Bazel build tool installed
  - For manual build: standard C++ build toolchain (compiler, linker, make, etc.)
- **Optional Dependencies**: 
  - pthread library support on *nix systems for multi-threading
  - Python3 for certain test features (only required if building GoogleMock tests with Python)

<Tip>
Ensure your build environment's compiler and tools are up to date, and C++17 standards are enabled globally or per project to avoid compatibility issues.
</Tip>

---

## 2. Building GoogleTest Using CMake

The primary and recommended way to build GoogleTest is with CMake, a cross-platform build system.

### 2.1 Standalone Build

Use this approach if you want to build GoogleTest independently.

<Steps>
<Step title="Clone the GoogleTest repository">
Run:
```bash
git clone https://github.com/google/googletest.git -b v1.17.0
downloads a specific stable release tag.
```
</Step>
<Step title="Create and enter a separate build directory">
```bash
cd googletest
mkdir build
cd build
```
Maintaining a separate build directory helps keep source files clean and makes rebuilding easier.
</Step>
<Step title="Configure the Project with CMake">
```bash
cmake ..
```
This generates native build files for your platform.

To build only GoogleTest (without GoogleMock), run:
```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build GoogleTest">
Unix/macOS:
```bash
make
```
Windows (with Visual Studio):
Open the generated `gtest.sln` solution file in Visual Studio and build the project.

macOS (with Xcode):
Open the `.xcodeproj` file and build.
</Step>
<Step title="(Optional) Install GoogleTest">
If you want to install GoogleTest system-wide:
```bash
sudo make install
```
This copies headers and libraries to system directories like `/usr/local`.
</Step>
</Steps>

<Tip>
By default, GoogleTest builds static libraries. To build shared libraries (DLLs), enable the CMake option `BUILD_SHARED_LIBS=ON`.
</Tip>

### 2.2 Incorporate GoogleTest into an Existing CMake Project

If your project already uses CMake, you can either:

- Use pre-installed GoogleTest providing `find_package(GTest CONFIG REQUIRED)`, then link with `GTest::gtest` or `GTest::gmock`.

- Or build GoogleTest as part of your project by adding the GoogleTest source with `add_subdirectory()` for consistent compiler and linker settings.

#### Example: Adding GoogleTest via FetchContent

Add to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# Windows users: Link runtimes dynamically to match project
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

This approach requires CMake 3.14 or later.

<Warning>
Be mindful of C++ runtime linkage mismatch, especially on Windows. Use the `gtest_force_shared_crt` option to align with your project’s runtime settings to prevent linker errors.
</Warning>

---

## 3. Building GoogleTest Using Bazel

Bazel is an alternative build system primarily used internally within some organizations.

- Clone the repository as for CMake.
- Run:

```bash
bazel build //googletest:all
```

- Run tests with:

```bash
bazel test //googletest:all
```

This method is advanced and recommended if you are already using Bazel in your environment.

---

## 4. Manual Build Instructions

If you prefer or require manual build steps (e.g., custom build systems):

- Include the GoogleTest headers from the `googletest/include` directory.
- Add the source files located in `googletest/src` to your build.
- Compile all `.cc` files, including `gtest-all.cc` or individual components.
- Link compiled objects into your executable or test targets.

Example snippet for compilation (gcc or clang):

```bash
c++ -std=c++17 -I/path/to/googletest/include -c /path/to/gtest-all.cc
c++ -std=c++17 -I/path/to/googletest/include -c your_test.cc
c++ -o your_test your_test.o gtest-all.o -pthread
```

<Tip>
Ensure to define macros like `-DGTEST_HAS_PTHREAD=1` if pthread support detection fails.
</Tip>

---

## 5. Using pkg-config Files

GoogleTest provides pkg-config `.pc` files to help your build system automatically pick up include paths, macros, and link flags.

### Example usage in CMake:

```cmake
find_package(PkgConfig)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})

enable_testing()
add_test(NAME first_and_only_test COMMAND testapp)
```

### Common troubleshooting:

- If pkg-config cannot find the GoogleTest packages, set the `PKG_CONFIG_PATH` to where the `.pc` files are installed.

```bash
export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
```

- For cross-compilation, configure `PKG_CONFIG_SYSROOT_DIR` and `PKG_CONFIG_LIBDIR` appropriately.

---

## 6. Verifying Your Build

After building, confirm the libraries and headers are correctly compiled.

- Check for generated library files in your build (e.g., `libgtest.a`, `gtest.lib`).
- Run built-in tests if included:

```bash
ctest
``` 

or manually run test executables created.

- For CMake projects incorporating GoogleTest, try compiling and running a minimal test executable.

---

## 7. Troubleshooting Common Installation Issues

<AccordionGroup title="Common Build and Link Issues">
<Accordion title="Mismatch of C++ Runtime Libraries on Windows">

Ensure `gtest_force_shared_crt` is set to ON to match your project’s runtime linkage (dynamic vs static). Otherwise, linker errors such as `error LNK2038: runtime library mismatch` will occur.

</Accordion>
<Accordion title="Missing pthread Linker Errors on Unix-like Systems">

Verify that CMake found pthread support. If not, try manually adding `-pthread` to compiler and linker flags or force detection with `-DGTEST_HAS_PTHREAD=1`.

</Accordion>
<Accordion title="pkg-config Cannot Find GoogleTest">

Confirm that `.pc` files are installed in standard pkg-config directories or specify `PKG_CONFIG_PATH`. For cross compilation, use `PKG_CONFIG_SYSROOT_DIR` carefully.

</Accordion>
<Accordion title="Compiler Does Not Support C++17">

Upgrade your compiler or configure CMake with `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)`.

</Accordion>
</AccordionGroup>

---

## 8. Additional Tips & Best Practices

- Use GoogleTest’s CMake integration when possible for seamless build and link flag management.
- When embedding GoogleTest via `add_subdirectory()`, configure your tests to link against `gtest_main` to simplify main() handling.
- Use versioned release tags for consistent and stable dependency management.
- Build with strict compiler flags enabled (GoogleTest sets `-Wall`, `-Wextra` etc.) to catch warnings early.
- Consult [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md) for writing your first test and next steps.

---

## 9. Resources & References

- [GoogleTest Official Repository](https://github.com/google/googletest)
- [GoogleTest Primer and Core Concepts](../overview/getting-started/introduction)
- [Prerequisites and System Requirements](/getting-started/setup-introduction/prerequisites-requirements)
- [Using pkg-config with GoogleTest](docs/pkgconfig.md)
- [Integrating with CI/CD Systems](/gtest-guides/integration-scaling/ci_integration)

---

With these instructions, you can confidently build, install, and integrate GoogleTest into your C++ development projects using your preferred build system, ensuring optimal compatibility and maintainability.
