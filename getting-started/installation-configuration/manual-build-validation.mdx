---
title: "Manual Build & Validation"
description: "For custom workflows or advanced users, learn how to manually build and link GoogleTest, validate your installation with sample tests, and ensure your setup is working."
---

# Manual Build & Validation

For custom workflows or advanced users, this guide explains how to manually build and link GoogleTest and GoogleMock, validate your installation by running sample tests, and ensure your setup works correctly.

---

## 1. Prerequisites & System Requirements

- **System Requirements:**
  - A compatible C++ compiler supporting C++11 or later.
  - CMake 3.13 or newer (for CMake managed builds).
  - Sufficient memory and disk space to compile GoogleTest and GoogleMock.

- **Dependencies:**
  - Standard C++ library.
  - POSIX threads or Windows threading support (for multi-thread support).
  - (Optional) CMake or Bazel if you use them for builds.

- **Access Requirements:**
  - Write access to your build directories.
  - Access to a terminal or command prompt.

- **Network Requirements:**
  - Internet access if cloning from remote repositories.

---

## 2. Build Instructions

### 2.1 Building with CMake Manually

1. **Clone the Repository:**

   ```bash
   git clone https://github.com/google/googletest.git
   cd googletest
   ```

2. **Create a Build Directory:**

   ```bash
   mkdir build && cd build
   ```

3. **Configure the Build:**

   ```bash
   cmake ..
   ```

   *Expect output showing configuration summary including GoogleTest and GoogleMock targets.*

4. **Build the Libraries and Tests:**

   ```bash
   cmake --build . --config Release
   ```

   *On multi-core systems, add `-- -j <num_cores>` to speed up compilation.*

5. **(Optional) Install:**

   To install GoogleTest and GoogleMock to your system or local prefix:

   ```bash
   cmake --install .
   ```

### 2.2 Building Without CMake

If you do not want to use CMake, you can build GoogleTest and GoogleMock manually by compiling the sources, but it is not recommended as it requires additional manual steps to manage dependencies and link correctly.

### 2.3 Linking Considerations

- Link your test binaries against `gtest` and `gmock` or `gmock_main` (which includes `main()`). For example, when compiling:

   ```bash
   g++ your_test.cc -lgmock_main -lpthread -o your_test
   ```

- Ensure that the library search paths (`-L`) include the location of GoogleTest and GoogleMock libraries.

---

## 3. Validation by Running Sample Tests

After building, verify that your installation works correctly by compiling and running a simple test.

### 3.1 Sample Test Code

Create a file named `sample_test.cc` with the following content:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

// A simple class to test.
class Foo {
 public:
  virtual ~Foo() = default;
  virtual int GetValue() const = 0;
};

// Mock class implementing Foo.
class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (const, override));
};

TEST(FooTest, ReturnsExpectedValue) {
  MockFoo foo;
  EXPECT_CALL(foo, GetValue())
      .WillOnce(testing::Return(42));

  EXPECT_EQ(foo.GetValue(), 42);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 3.2 Compile and Run the Sample Test

Use a command like:

```bash
g++ -std=c++11 sample_test.cc -lgmock_main -lpthread -o sample_test
./sample_test
```

- The test should run and report success.

### 3.3 Common Issues & Troubleshooting

- **Linker errors:** Ensure `-lgmock_main` and `-lpthread` are linked and library paths are correct.
- **Include issues:** Verify GoogleMock headers are in your include path.
- **Test runner not found:** Confirm your test executable calls `RUN_ALL_TESTS()` and is linked against GoogleMock's `main` library.

---

## 4. Best Practices and Tips

- Always build GoogleMock with the same C++ standard as your project.
- Prefer building with CMake to ease dependency and configuration management.
- Use `gmock_main` library if you want to avoid defining your own main function for tests.
- Enable verbose logging for GoogleMock if debugging test failures (`--gmock_verbose=info`).
- Use `NiceMock` or `StrictMock` wrappers around mock classes to control uninteresting call behavior.

---

## 5. Next Steps

- After manual build and validation, explore writing your first tests:
  - [Writing Your First Test Case](/getting-started/first-test/writing-basic-test)
  - [Mocking Your First Class](/getting-started/first-test/mocking-first-steps)

- Configure your build system (CMake, Bazel) to integrate GoogleTest and GoogleMock:
  - [Install with CMake](/getting-started/installation-configuration/install-cmake)
  - [Install with Bazel](/getting-started/installation-configuration/install-bazel)

- Consult detailed mocking and testing guides to deepen your knowledge:
  - [gMock Cookbook](docs/gmock_cook_book.md)
  - [Mocking Reference](docs/reference/mocking.md)

- Troubleshoot common issues:
  - [Troubleshooting Common Issues](/getting-started/troubleshooting/common-issues)

---

<Check>
Make sure your compiler and linker commands include the correct paths to GoogleMock and GoogleTest headers and libraries.

If you encounter linking errors, verify the built libraries exist and you have included the necessary flags (`-lgmock_main`, `-lgmock`, `-lgtest`, and `-lpthread`).

Run tests with `--gmock_verbose=info` to gain detailed insight into mock calls and failures.
</Check>

---

This completes the manual build and validation instructions to ensure you have a working GoogleTest and GoogleMock environment.
