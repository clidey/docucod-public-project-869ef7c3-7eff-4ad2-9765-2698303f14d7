---
title: "GoogleTest Primer"
description: "Dive into a concise primer explaining the basic concepts of unit tests, assertions, and the test discovery process in GoogleTest. This page solidifies foundational knowledge for all new users."
---

# GoogleTest Primer

## Introduction: Building a Strong Testing Foundation

Welcome to the GoogleTest Primer! This page is designed to establish fundamental knowledge you need to write and understand unit tests using GoogleTest. By covering the core concepts of tests, assertions, and test discovery, you’ll be prepared to start creating reliable, maintainable tests right away.

In the journey of software development, writing good tests is crucial. GoogleTest helps you achieve this by providing a tested, portable C++ framework modeled on the proven xUnit architecture. This primer demystifies basic testing terminology and workflows, enabling you to write tests that are independent, organized, and informative.

---

## 1. Understanding Key Concepts in GoogleTest

Before writing your first test, it’s important to grasp some foundational concepts:

- **Tests and Test Suites**

  A *test* is a function that verifies a specific piece of your code. GoogleTest organizes tests into *test suites* (previously called *test cases*), which group related tests logically. For example, all tests for a `Queue` class might belong to a `QueueTest` suite.

- **Assertions**

  Assertions are the heart of any test — statements that check if your code behaves as expected. Each assertion either passes or fails. GoogleTest provides two kinds of assertions:

  - `ASSERT_*`: Generates fatal failures and aborts the current function if the assertion fails.
  - `EXPECT_*`: Generates nonfatal failures and lets the test continue running, which helps detect multiple issues in one run.

- **Test Fixtures**

  When multiple tests need to work with common data or setup, a *test fixture* class allows you to share this setup efficiently. Tests using a fixture are declared with `TEST_F()`.

- **Test Program and Test Discovery**

  GoogleTest automatically registers all the tests you define with `TEST()` or `TEST_F()`. When you run your test binary, GoogleTest discovers all these tests and executes them.

---

## 2. Writing Your First Simple Test

Let’s start with a straightforward example to check the factorial function:

```c++
// Function to test
int Factorial(int n);

// Test Suite: FactorialTest, Test Name: HandlesZeroInput
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Test Suite: FactorialTest, Test Name: HandlesPositiveInput
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### What happens here?

- `TEST()` creates independent tests inside the suite `FactorialTest`.
- `EXPECT_EQ()` assertions verify that the factorial function produces the expected output.
- If any `EXPECT_EQ()` fails, it reports the failure but continues running the test to check for more issues.

Each test in GoogleTest runs independently, ensuring that failures in one do not affect others.

---

## 3. Using Assertions Effectively

Assertions come in many varieties to accommodate different verification needs:

- **Equality & Comparison:** `ASSERT_EQ`, `EXPECT_NE`, `ASSERT_LT`, etc.
- **Boolean Conditions:** `ASSERT_TRUE`, `EXPECT_FALSE`
- **String Comparisons:** `ASSERT_STREQ`, `EXPECT_STRNE`
- **Floating-Point Comparisons:** `ASSERT_FLOAT_EQ`, `EXPECT_NEAR`
- **Custom Predicates:** For complex conditions

### Example with custom failure messages:

```c++
ASSERT_EQ(x.size(), y.size()) << "Vectors x and y differ in length";
EXPECT_EQ(x[i], y[i]) << "Mismatch at index " << i;
```

Use `EXPECT_*` assertions when you want your test to continue upon failure and `ASSERT_*` when failure means the test cannot proceed safely.

---

## 4. Sharing Setup Across Tests with Test Fixtures

When tests need common initialization or cleanup, use a test fixture:

```c++
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Common setup for all tests
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);
  
  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

Each test runs with a fresh instance of `QueueTest`, ensuring no test pollutes the state for another.

---

## 5. Test Discovery and Running Tests

After defining your tests, you run them by calling `RUN_ALL_TESTS()` in your `main()`:

```c++
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest()` parses command-line flags controlling test execution.
- `RUN_ALL_TESTS()` runs all registered tests and returns `0` on success, `1` otherwise.

Most users don’t need to write this explicitly; linking against the `gtest_main` library provides a default `main()` function.

<Tip>
Always check and forward the return value of `RUN_ALL_TESTS()` in your `main()` to ensure proper test status reporting.
</Tip>

---

## 6. Summary and Next Steps

By mastering the basics in this primer, you are ready to:

- Write simple and effective tests using `TEST()` and assertions.
- Organize tests into suites and share data with test fixtures.
- Run tests automatically and interpret results.

To deepen your understanding and expand your testing toolbox, visit:

- [GoogleTest Advanced Guide](advanced.md) – for in-depth features.
- [GoogleTest Samples](samples.md) – explore real-world example tests.
- [Using Assertions](reference/assertions.md) – comprehensive assertions reference.

---

## Troubleshooting Quick Tips

- **Tests not discovered?** Ensure your test executable links properly with GoogleTest and that you call `RUN_ALL_TESTS()`.
- **Assertion macros not recognized?** Include `<gtest/gtest.h>` in your test files.
- **Test failures unclear?** Use `EXPECT_*` assertions to get detailed failure reports without stopping tests.

If you face other issues, consult the [GoogleTest FAQ](faq.md) or troubleshooting guides.

---

## Additional Resources

- [GoogleTest User's Guide](index.md)
- [Assertions Reference](reference/assertions.md)
- [Writing and Running Your First Test](writing-and-running-your-first-test.md)

With these fundamentals, you can confidently begin writing robust C++ tests. Happy testing!
