---
title: "Writing Your First Test"
description: "Step through creating and structuring your very first GoogleTest case. Understand basic assertions and how to express test expectations using GoogleTest's user-friendly macros."
---

# Writing Your First Test

Step through creating and structuring your very first GoogleTest case. Understand basic assertions and how to express test expectations using GoogleTest's user-friendly macros.

---

### 1. Prerequisites

Before writing your first test, ensure:

- You have GoogleTest installed and properly linked to your project. See [Installation Guide](../setup-and-installation/installation-guide) for setup instructions.
- Your build system compiles C++17 or later.
- You include the GoogleTest header in your test source files:

```cpp
#include <gtest/gtest.h>
```

---

### 2. Understanding Test Structure

GoogleTest organizes tests into **test suites** and **tests**:

- **Test Suite**: A collection of related tests, identified by a `TestSuiteName`.
- **Test**: An individual test case within the suite, identified by a `TestName`.

Both names should be valid C++ identifiers and ***must not contain underscores (`_`)*** to avoid naming conflicts internally. For example, use `MathTest` and `Addition`, not `Math_Test` or `Addition_Test`.

---

### 3. Writing Your First TEST

Use the `TEST` macro to define a basic test case:

```cpp
TEST(TestSuiteName, TestName) {
  // Arrange
  int expected = 42;
  int actual = 40 + 2;

  // Assert
  EXPECT_EQ(expected, actual);
}
```

Step breakdown:

- `TEST(TestSuiteName, TestName)`: Defines a test named `TestName` in `TestSuiteName`.
- Inside the braces `{ ... }`: Code under test plus assertions.
- `EXPECT_EQ(expected, actual)`: Checks if `actual` equals `expected`. The test fails if they differ, but continues execution.

---

### 4. Running Tests

To run tests:

1. Initialize GoogleTest in your executable's `main()`:

```cpp
int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. Build and execute your test binary.
3. The console will display test results.

Tips:
- Running without arguments executes all tests.
- Use `--gtest_list_tests` to list all defined tests without running them.

---

### 5. Basic Assertions

The core GoogleTest assertions you should know:

- `EXPECT_EQ(val1, val2)`: Tests if `val1 == val2`.
- `EXPECT_NE(val1, val2)`: Tests if `val1 != val2`.
- `EXPECT_TRUE(cond)`: Tests if `cond` is true.
- `EXPECT_FALSE(cond)`: Tests if `cond` is false.

Each `EXPECT_` macro logs a failure but continues the test. Use `ASSERT_` macros (e.g., `ASSERT_EQ`) for fatal failures that abort the test.

Example:

```cpp
TEST(SampleTest, TruthCheck) {
  EXPECT_TRUE(1 + 1 == 2);
  ASSERT_EQ(5, 5);
  EXPECT_FALSE(false);
}
```

---

### 6. Best Practices for Test Naming

- Avoid underscores in both `TestSuiteName` and `TestName` to prevent potential name collisions. For example, prefer:

```cpp
TEST(MathFunctions, AdditionWorks) { ... }
```

instead of:

```cpp
TEST(Math_Functions, Addition_Works) { ... }
```

- Follow consistent naming conventions to keep your tests organized and readable.

---

### 7. Common Pitfalls & Tips

- **Do not start or end test or suite names with underscores**. Underscores are reserved for internal use and can cause compilation or runtime errors.
- **Disabled tests prefix**: use `DISABLED_` to temporarily disable tests.
- **Use `nullptr` instead of `NULL`** in assertions for pointer comparisons for clearer intent and better type safety.
- **Always check the return value of `RUN_ALL_TESTS()`** in your `main()` function to ensure test failures propagate correctly.

---

### 8. Example: Complete Test File

```cpp
#include <gtest/gtest.h>

// A simple test checking that addition works correctly.
TEST(MathTest, AdditionWorks) {
  int sum = 2 + 2;
  EXPECT_EQ(4, sum) << "Sum should be 4";
}

int main(int argc, char** argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this. You should see output indicating the test passed.

---

### 9. Troubleshooting

- Errors about test suite or test names containing underscores indicate you must rename the tests.
- If tests defined with `TEST_F` fail to run with errors about missing constructors, ensure your fixture class has a default constructor.
- If GoogleTest output is mixed with your programâ€™s `LOG` messages, redirect output: `./my_test > gtest_output.txt`.

Refer to the [GoogleTest FAQ](../../faq.md) for detailed common issues.

---

### 10. Next Steps

Once comfortable with basic `TEST` usage:

- Explore [TEST_F](../primer.md#test-fixtures) for using test fixtures to share setup/teardown.
- Learn about [Parameterized Tests](../advanced.md#value-parameterized-tests) to run tests with multiple inputs.
- Study best practices for assertions and failure messages in [Assertions Reference](../../api-reference/gtest-core-api/assertions-reference).

For more hands-on examples, see the [GoogleTest Primer](../primer.md) and our [Getting Started Guides](../../../guides/getting-started).

---

### References

- [GoogleTest Primer](../primer.md)
- [Assertions Reference](../../api-reference/gtest-core-api/assertions-reference)
- [Advanced Topics: Value-Parameterized Tests](../advanced.md#value-parameterized-tests)
- [FAQ on Test Naming Rules](../../faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)

---