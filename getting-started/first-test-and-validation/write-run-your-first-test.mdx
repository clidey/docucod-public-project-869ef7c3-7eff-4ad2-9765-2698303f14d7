---
title: "Write and Run Your First Test"
description: "Create a simple unit test using GoogleTest macros and assertions. Learn how to structure your test files, build your test binary, and execute tests in your development environment to verify everything is working end-to-end."
---

# Write and Run Your First Test

Welcome to your first step with GoogleTest! This guide walks you through creating a simple unit test using GoogleTest macros and assertions. You'll learn how to organize your test files, build your test binary, and execute it within your development environment to verify your setup is fully functional.

---

## 1. Prepare Your Test File

Before you can run tests, you need to create a test file that contains your test code.

### Create a Simple Test

Start by creating a new source file named `hello_test.cc` in your project directory. This file will contain a basic test that uses GoogleTest macros to verify assertions.

```cpp
#include <gtest/gtest.h>

// This test checks simple assertions to confirm test setup.
TEST(HelloTest, BasicAssertions) {
  // Expect two strings to be different.
  EXPECT_STRNE("hello", "world");
  // Expect numeric equality.
  EXPECT_EQ(7 * 6, 42);
}
```

> Here, `TEST(TestSuiteName, TestName)` defines a test called `BasicAssertions` within the test suite `HelloTest`. Avoid underscores in names for compatibility.

## 2. Build Your Test Binary

To compile and link your test, integrate GoogleTest into your build system. Below are quick instructions for the two most common build systems.

### With CMake

1.  Ensure your project has a `CMakeLists.txt` file configured to fetch and include GoogleTest. For example:

    ```cmake
    cmake_minimum_required(VERSION 3.14)
    project(my_project)

    set(CMAKE_CXX_STANDARD 17)
    set(CMAKE_CXX_STANDARD_REQUIRED ON)

    include(FetchContent)
    FetchContent_Declare(
      googletest
      URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
    )
    set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)  # For Windows
    FetchContent_MakeAvailable(googletest)

    enable_testing()

    add_executable(hello_test hello_test.cc)
    target_link_libraries(hello_test GTest::gtest_main)

    include(GoogleTest)
    gtest_discover_tests(hello_test)
    ```

2.  In your terminal, run:

    ```bash
    cmake -S . -B build
    cmake --build build
    ```

### With Bazel

1.  Create a `BUILD` file in your workspace directory:

    ```python
    cc_test(
        name = "hello_test",
        size = "small",
        srcs = ["hello_test.cc"],
        deps = [
            "@googletest//:gtest",
            "@googletest//:gtest_main",
        ],
    )
    ```

2.  Build and run the test with:

    ```bash
    bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
    ```

## 3. Run and Verify Your Test

Once built, execute your test binary:

- **CMake build:**

  ```bash
  cd build
  ctest
  ```

- **Bazel build:**

  Already covered by `bazel test` above, which runs tests automatically.

### Expected Output

Look for output similar to:

```none
Test project /path/to/build
    Start 1: HelloTest.BasicAssertions
1/1 Test #1: HelloTest.BasicAssertions ........   Passed    0.00 sec

100% tests passed, 0 tests failed out of 1

Total Test time (real) =   0.01 sec
```

This confirms that your test binary ran successfully and your first test passed.

## 4. Understanding Your First Test

- `TEST` macro creates a test function that contains assertions.
- `EXPECT_STRNE` verifies two strings are not equal (non-fatal failure on false).
- `EXPECT_EQ` verifies equality of two values (non-fatal failure on false).
- Assertions report errors with file and line number if they fail.

The GoogleTest framework automatically discovers and runs all tests registered by `TEST()` or `TEST_F()` macros at runtime.

## 5. Writing a Test Fixture (Optional Next Step)

Once comfortable with simple tests, you may want to organize complex tests sharing setup data using fixtures.

Example:

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }
  Queue<int> q0_;
  Queue<int> q1_;
  Queue<int> q2_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);
  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  delete n;
}
```

This pattern is covered in more detail in the [GoogleTest Primer](primer.md).

## 6. Troubleshooting Common Issues

- **Test Not Found or Running?**
  - Ensure you include `<gtest/gtest.h>` and link with `gtest_main`.
  - Confirm `RUN_ALL_TESTS()` is called in `main()` if you write your own.

- **Compilation Errors?**
  - Check your compiler supports C++17.
  - Verify that test suite and test names contain no underscores (`_`).

- **No Output?**
  - GoogleTest sends output to stdout; check your terminal or redirected logs.
  - Use `--gtest_help` flag on test binary to check available options.

- **Multiple Definitions of `main()`?**
  - Don’t link both your own `main()` and `gtest_main` simultaneously.

## 7. Next Steps & Additional Resources

- Review the [GoogleTest Primer](primer.md) to deepen your understanding of writing tests.
- Explore [Googletest Samples](samples.md) for more practical examples.
- Follow integration tutorials for [CMake Quickstart](quickstart-cmake.md) or [Bazel Quickstart](quickstart-bazel.md).
- Investigate advanced testing features in [Advanced GoogleTest Topics](advanced.md) once comfortable with basics.

---

## Sample Main Function (if you write your own)

While linking with `gtest_main` provides an automatic main, if you write your own `main` function, use this structure:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Make sure you call `InitGoogleTest()` before running `RUN_ALL_TESTS()`.

---

Congratulations! You have created, built, and run your very first GoogleTest unit test, confirming your environment is ready for test development.


---

## Links & References

- [GoogleTest Primer](primer.md) — Learn the fundamentals of writing tests.
- [Quickstart with CMake](quickstart-cmake.md) — Setup and build guide using CMake.
- [Quickstart with Bazel](quickstart-bazel.md) — Using GoogleTest in Bazel build systems.
- [Googletest Samples](samples.md) — Real examples showcasing GoogleTest features.
- [Assertions Reference](reference/assertions.md) — Details on all GoogleTest assertions.

---

## Callouts

<Tip>
Try editing `hello_test.cc` to add more tests and see how test failures are reported.
</Tip>

<Tip>
Use `--gtest_list_tests` flag with your test executable to see all discovered tests.
</Tip>

<Warning>
Always capture and return the result of `RUN_ALL_TESTS()` from your `main()` to ensure correct exit status.
</Warning>

<Note>
Avoid underscores in `TestSuiteName` and `TestName` to prevent compilation and test registration issues.
</Note>

---

<CalloutGroup title="Common Issues" >
<Warning>
If tests do not run, verify linking against `gtest_main` or provide a correct `main()`.
</Warning>
<Warning>
Failure messages include file and line number aiding debugging; ensure assertions are placed thoughtfully to catch errors early.
</Warning>
</CalloutGroup>