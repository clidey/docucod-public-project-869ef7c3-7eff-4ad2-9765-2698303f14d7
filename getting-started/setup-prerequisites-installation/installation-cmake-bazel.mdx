---
title: "Installing GoogleTest (CMake & Bazel)"
description: "Walks users through installing GoogleTest using popular build systems like CMake and Bazel, providing precise, actionable commands for each approach. Includes links to official quickstart guides and highlights common configuration tips."
---

# Installing GoogleTest (CMake & Bazel)

This guide walks you through installing GoogleTest with the two most popular C++ build systems: **CMake** and **Bazel**. You will find exact, actionable commands and configuration examples tailored to each build system so you can quickly set up and run your first test binary. Additionally, best practices for common configuration scenarios and links to official quickstart guides are included.

---

## Prerequisites & System Requirements

Before proceeding with installation, verify the following requirements:

- **Operating System:** Supported platforms include Linux, macOS, and Windows.
- **Compiler:** A C++ compiler that supports at least the C++17 standard (e.g., GCC, Clang, MSVC).
- **Build Tools:** 
  - For CMake: CMake 3.14 or later plus a compatible build system (Make, Ninja, Visual Studio, etc.).
  - For Bazel: Bazel 7.0 or higher.

See the [System Requirements](../setup-prerequisites-installation/system-requirements) page for detailed compatibility information.

<Note>
Ensure your compiler and build environment is configured to use C++17 or newer to avoid build errors.
</Note>

---

## Installing with CMake

CMake offers flexible integration for building GoogleTest either as a standalone project or inside your existing projects.

### 1. Create Your Project Directory

```bash
mkdir my_project && cd my_project
```

### 2. Create `CMakeLists.txt` to Declare the GoogleTest Dependency

Use CMake's `FetchContent` module to download and include GoogleTest automatically:

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

# Enforce C++17 standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
)

# On Windows, keep runtime linkage consistent
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)
```

> Replace the URL hash with the latest commit or release SHA regularly to stay up to date.

### 3. Add Your Test Code

Create a file named `hello_test.cc` in the same directory with the following example test:

```cpp
#include <gtest/gtest.h>

// Simple demonstration test
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

### 4. Update `CMakeLists.txt` to Build and Register the Test

Append to your `CMakeLists.txt`:

```cmake
enable_testing()

add_executable(
  hello_test
  hello_test.cc
)

target_link_libraries(
  hello_test
  GTest::gtest_main
)

include(GoogleTest)
gtest_discover_tests(hello_test)
```

### 5. Build and Run Your Tests

Run these commands:

```bash
cmake -S . -B build
cmake --build build
cd build
ctest
```

You should see the test executed successfully with output similar to:

```
1/1 Test #1: HelloTest.BasicAssertions ........   Passed    0.00 sec

100% tests passed, 0 tests failed out of 1
```

<Check>
If you encounter linker or runtime errors related to C++ standard versions, confirm your compiler supports C++17 and that `CMAKE_CXX_STANDARD` is correctly set.
</Check>

---

## Installing with Bazel

Bazel offers a robust environment for building and testing C++ projects with GoogleTest integration.

### 1. Set Up Your Bazel Workspace

Run:

```bash
mkdir my_workspace && cd my_workspace
```

Create a `MODULE.bazel` file in `my_workspace` with the following content:

```python
# MODULE.bazel

bazel_dep(name = "googletest", version = "1.17.0")
```

> Update the version string to the latest available GoogleTest version in the Bazel Central Registry.

### 2. Add Test Source File

Create `hello_test.cc` in `my_workspace` with this code:

```cpp
#include <gtest/gtest.h>

TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");
  EXPECT_EQ(7 * 6, 42);
}
```

### 3. Create a Bazel `BUILD` File

In the same directory, add a `BUILD` file:

```python
cc_test(
    name = "hello_test",
    srcs = ["hello_test.cc"],
    size = "small",
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

### 4. Build and Run the Test

Execute:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

Expected output includes a passed test case summary, confirming successful build and execution.

<Note>
Ensure you use `--cxxopt=-std=c++17` (or the equivalent for your compiler) to specify the C++ version.
</Note>

---

## Common Configuration Tips

- On **Windows**, set `gtest_force_shared_crt` to `ON` in CMake to avoid runtime library conflicts.
- Use `enable_testing()` and `gtest_discover_tests()` in CMake to integrate with CTest.
- Update Git commit hashes or Bazel module versions regularly to track latest updates.
- For **threading support**, verify that your environment supports pthreads and that your build system passes necessary flags.

---

## Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title='Build fails with "Unsupported C++ standard"'>
Ensure your compiler supports C++17 and that `CMAKE_CXX_STANDARD=17` is set in CMake or pass equivalent flags in Bazel.
</Accordion>
<Accordion title="Linker errors about missing gtest symbols">
Verify that you have linked your test executables against `gtest_main` (CMake: `GTest::gtest_main`; Bazel: `@googletest//:gtest_main`).
</Accordion>
<Accordion title="Tests not discovered or run in CTest">
Confirm that you have included `include(GoogleTest)` and called `gtest_discover_tests()` after defining your test executable.
</Accordion>
<Accordion title="Conflict with runtime library on Windows">
Set the CMake option `gtest_force_shared_crt` to `ON` to align runtime linkage with your project.
</Accordion>
</AccordionGroup>

---

## Next Steps

- Explore the [GoogleTest Primer](../intro-product-basics/welcome-googletest) to learn test-writing essentials.
- Try [Writing Your First Unit Tests](../../guides/getting-started/writing-your-first-tests) to deepen your testing skills.
- See [Integration & Workflows](../../overview/system-architecture-integrations/integration-and-workflows) for advanced build integration techniques.

---