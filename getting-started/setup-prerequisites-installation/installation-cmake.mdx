---
title: "Installation with CMake"
description: "Step-by-step instructions on how to install GoogleTest using CMake, the recommended build system. This page covers downloading the framework, integrating it into your project, and executing a basic build, providing clear guidance for new and experienced C++ developers alike."
---

# Installation with CMake

This guide walks you through the recommended process of installing GoogleTest using CMake, providing clear, step-by-step instructions for downloading, integrating, and building with the framework. Whether you're new to GoogleTest or an experienced C++ developer, these actionable steps will help you set up GoogleTest efficiently and get your first test running.

---

## 1. Prerequisites & System Requirements

Before beginning the installation, ensure your environment meets the following:

- **Operating System:** Linux, macOS, or Windows (with proper developer tools installed).
- **C++ Compiler:** Must support at least C++17 (GCC 7+, Clang, MSVC 2017+).
- **CMake Version:** 3.14 or higher is required to use the recommended `FetchContent` approach.
- **Build Tools:** Compatible with Make, Ninja, or Visual Studio generators.


<Tip>
If you haven't installed CMake yet, download it from [cmake.org](https://cmake.org/install).
</Tip>

## 2. Downloading GoogleTest

You can obtain GoogleTest by cloning the official GitHub repository or by downloading a release archive:

### Clone the Repository

Run:

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

This places GoogleTest in your local workspace.

### Alternatively, Download a Release Zip

Visit [GoogleTest GitHub releases](https://github.com/google/googletest/releases) and download the archive of the desired release. Extract it to a folder.

## 3. Building GoogleTest as a Standalone Project

To build and install GoogleTest independently:

1. Create a build directory inside the GoogleTest source folder:

```bash
mkdir build && cd build
```

2. Generate build files using CMake:

- To build both GoogleTest and GoogleMock (default):

```bash
cmake ..
```

- To build only GoogleTest:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

3. Compile the libraries:

```bash
make
```

4. (Optional) Install libraries and headers system-wide (requires admin privileges):

```bash
sudo make install
```

### On Windows and macOS

- On Windows with Visual Studio, a solution file (`.sln`) will be generated, which you can build inside Visual Studio.
- On macOS with Xcode, an `.xcodeproj` project file is generated.

## 4. Integrating GoogleTest into Your CMake Project

The best practice for using GoogleTest in your own project is to manage it via CMake's `FetchContent` module. This keeps dependencies updated and avoids manual installation steps.

### Step-by-Step Integration Example

1. **Create your project directory:**

```bash
mkdir my_project && cd my_project
```

2. **Create a `CMakeLists.txt` file with the following configuration:**

```cmake
cmake_minimum_required(VERSION 3.14)
project(my_project)

# Require C++17 standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
# For Windows: Match runtime libraries between your project and GoogleTest
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

# Enable CTest testing features
enable_testing()

# Declare a test executable
add_executable(
  hello_test
  hello_test.cc
)

# Link against GoogleTest
target_link_libraries(
  hello_test
  GTest::gtest_main
)

include(GoogleTest)
gtest_discover_tests(hello_test)
```

<Tip>
Replace `URL` with a specific release commit hash or tag for stability if preferred.
</Tip>

3. **Create a simple test source file `hello_test.cc` in your project directory:**

```cpp
#include <gtest/gtest.h>

// Basic test cases demonstrating assertions.
TEST(HelloTest, BasicAssertions) {
  EXPECT_STRNE("hello", "world");  // Strings should not be equal
  EXPECT_EQ(7 * 6, 42);               // Arithmetic check
}
```

## 5. Building and Running Tests

Execute the following commands from your project root:

```bash
cmake -S . -B build
cmake --build build
ctest --test-dir build
```

### What to Expect

- CMake will generate native build files in the `build` directory.
- Your test executable will be compiled and linked against GoogleTest.
- `ctest` will run discovered tests and show the output.

Example output snippet:

```
Test project /path/to/my_project/build
    Start 1: HelloTest.BasicAssertions
1/1 Test #1: HelloTest.BasicAssertions ........   Passed    0.00 sec

100% tests passed, 0 tests failed out of 1
```

## 6. Common Pitfalls and Troubleshooting

- **Compiler Incompatibility:** Ensure your compiler supports C++17 or later.
- **CMake Version Too Old:** `FetchContent` requires at least CMake 3.14; upgrade if needed.
- **Runtime Library Mismatch on Windows:** Use `set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)` to avoid linking errors related to static/dynamic CRT mismatches.
- **Linker Errors Related to Threads:** GoogleTest manages pthread dependencies automatically in CMake; if you write your own build scripts, ensure the pthread library is linked on Unix-like systems.

<Tip>
When in doubt, consult the GoogleTest GitHub repository README and the `docs/quickstart-cmake.md` for additional setup guidance.
</Tip>

## 7. Next Steps

- Proceed to write your first test cases. See [Writing and Running Your First Test](/getting-started/configuration-first-test-validation/writing-first-test).
- Explore advanced build options such as building GoogleMock, customizing compile flags, or integrating GoogleTest with other build systems.
- Check out the [primer](primer.md) for a comprehensive introduction to GoogleTest usage.

---

## References

- [Official GoogleTest GitHub repository](https://github.com/google/googletest)
- [CMake FetchContent documentation](https://cmake.org/cmake/help/latest/module/FetchContent.html)
- [GoogleTest Primer](primer.md)
- [GoogleTest Quickstart with CMake](docs/quickstart-cmake.md)

---

By following these steps, you'll have GoogleTest properly installed and integrated with your C++ project using CMake, setting a solid foundation for developing reliable, maintainable tests.
