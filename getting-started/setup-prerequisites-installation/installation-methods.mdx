---
title: "Installation Methods"
description: "Details the various methods to install GoogleTest and GoogleMock, including direct source integration, CMake, Bazel, and platform-specific instructions. Guides users through step-by-step installation for different environments and links to in-depth quickstart guides."
---

# Installation Methods

GoogleTest and GoogleMock offer flexible installation methods tailored to different development workflows and platforms. This guide details each approach, from direct source integration and CMake builds to Bazel usage and platform-specific instructions. Follow the step-by-step instructions to set up GoogleTest and GoogleMock efficiently in your environment.

---

## 1. Prerequisites & System Requirements

Before installing GoogleTest and GoogleMock, ensure your environment meets the following:

- **Operating System:** Compatible with Linux, macOS, Windows, and other supported platforms.
- **Compiler:** Supports at least C++17 standard.
- **Build Tools:** Depending on the method, you may need CMake (3.14 or later recommended), Make, Ninja, or Bazel.
- **Permissions:** Access to install libraries on your system (may require administrator rights).

Refer to the [System Requirements & Supported Platforms](requirements-supported-platforms.md) for full details.

---

## 2. Installation Methods Overview

GoogleTest and GoogleMock can be installed using several methods, each suited to different project needs:

- **Direct Source Integration**: Include GoogleTest/GoogleMock sources directly in your project.
- **CMake Build**: Build and install using CMake, supporting both standalone and integrated builds.
- **Pkg-config with Build Systems**: Use pkg-config files to integrate with other build systems.
- **Bazel Build**: Use Bazel for builds and dependency management.
- **Platform-Specific Package Managers**: Use OS package systems where available.

### 2.1 Direct Source Integration

This method embeds GoogleTest and GoogleMock source files directly into your project tree, simplifying dependency management for small or isolated projects.

### 2.2 CMake Build

The recommended method for most users, CMake support is community maintained and highly flexible. You can build GoogleTest standalone or embed it into your own CMake project.

### 2.3 Bazel Build

For projects using Bazel as their build system, GoogleTest and GoogleMock can be added as Bazel dependencies following the guidelines in the Bazel quickstart.

### 2.4 Pkg-config Support

GoogleTest provides pkg-config files (`gtest_main.pc` and `gmock_main.pc`) to help build systems discover necessary compile and link flags.

<Info>
Ensure your `PKG_CONFIG_PATH` includes the directory containing these `.pc` files; typically this is where GoogleTest or GoogleMock was installed.
</Info>

### 2.5 Platform-Specific Instructions

Some platforms may offer pre-built GoogleTest packages or have specific nuances. Check your platform’s package repository or the [Supported Platforms](platforms.md) guide.

---

## 3. Step-by-Step Installation Instructions

### 3.1 Building GoogleTest and GoogleMock from Source with CMake

Follow these exact steps to build and optionally install GoogleTest and GoogleMock:

<Steps>
<Step title="Clone the Repository">
Run:
```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```
This clones the latest GoogleTest repository and switches into its directory.
</Step>
<Step title="Create a Build Directory">
```bash
mkdir build
d
cd build
```
Creating a separate build directory keeps build files isolated from source.
</Step>
<Step title="Configure the Build via CMake">
Basic command to build both GoogleTest and GoogleMock:
```bash
cmake ..
```
To build only GoogleTest (without GoogleMock):
```bash
cmake .. -DBUILD_GMOCK=OFF
```

For Windows users with Visual Studio, this generates a Visual Studio solution file.
</Step>
<Step title="Build the Libraries">
Execute:
```bash
make
```
(or use your platform’s appropriate build tool, like `cmake --build .` or Visual Studio build options).
</Step>
<Step title="Install (Optional)">  
If you have admin rights and want to install to the default path `/usr/local` or your configured prefix:
```bash
sudo make install
```
This installs headers and libraries, including pkg-config files.
</Step>
</Steps>

### 3.2 Integrate GoogleTest in Your CMake Project Using FetchContent

To embed GoogleTest in your own CMake project ensuring consistent compiler settings:

Add the following in your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Windows VC runtime compatibility
FetchContent_MakeAvailable(googletest)
```

Then link to GoogleTest libraries:

```cmake
add_executable(my_tests my_test.cc)
target_link_libraries(my_tests GTest::gtest_main)
```

This approach requires CMake 3.14 or later.

### 3.3 Using pkg-config Files

GoogleTest installs `.pc` files for `gtest_main` and `gmock_main` which define compilation and linking flags.

Example usage in CMake:

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})

enable_testing()
add_test(NAME sample_test COMMAND testapp)
```

<Note>
If pkg-config cannot find these files after installation, make sure `$PKG_CONFIG_PATH` includes the directory where `.pc` files are installed, e.g., `/usr/local/lib64/pkgconfig`.
</Note>

### 3.4 Bazel Installation

If your project uses Bazel, add GoogleTest and GoogleMock as bazel dependencies. Refer to the dedicated [Quickstart for Bazel](quickstart-bazel.md) guide for detailed instructions.

---

## 4. Troubleshooting Common Installation Issues

<AccordionGroup title="Installation Troubleshooting">
<Accordion title="CMake cannot find gtest_main module via pkg-config">
This happens when pkg-config does not find the `.pc` files:

- Confirm you have installed GoogleTest (headers, libraries, and `.pc` files).
- Set the environment variable to point to the pkg-config directory, e.g.,

  ```bash
  export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig
  ```

- Retry your build.
</Accordion>
<Accordion title="Compiler errors on missing pthread support">
GoogleTest may require pthread support on POSIX systems.

- Ensure `-pthread` flag is included during compile and link steps.
- When building with CMake, this is handled automatically.
- When building manually, add `-DGTEST_HAS_PTHREAD=1` to your compiler flags.
</Accordion>
<Accordion title="Visual Studio Runtime Mismatch Errors">
Errors like `mismatch detected for 'RuntimeLibrary'` usually mean your project and GoogleTest use conflicting runtime libraries.

- Use the CMake option `gtest_force_shared_crt` to align runtimes:

  ```cmake
  set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
  ```

- Rebuild GoogleTest using this setting.
</Accordion>
</AccordionGroup>

---

## 5. Additional Platform Considerations

- On **Windows**, building with Visual Studio generates solution files; open and build using the IDE.
- On **macOS**, Xcode project files are generated for building.
- On **cross-compilation environments**, use `DESTDIR` and properly set `PKG_CONFIG_SYSROOT_DIR` and related variables when installing. See the pkg-config cross-compilation section in `docs/pkgconfig.md` for detailed guidance.

---

## 6. Next Steps

Now that you have installed GoogleTest and GoogleMock, you can:

- [Quickstart: Building with CMake](quickstart-cmake.md) — Follow a step-by-step tutorial for building your first test.
- [GoogleTest Primer](primer.md) — Learn how to write effective tests, use assertions, and fixtures.
- [Effective Mocking with GoogleMock](guides/advanced-features-and-patterns/effective-mocking.md) — Explore mocking capabilities.
- [Troubleshooting Setup Issues](troubleshooting-setup-issues.md) — Resolve common errors during build and integration.

To verify your installation, create and run a simple test following the quickstart guide.

---

## 7. Summary of Commands

```bash
# Clone the repo
git clone https://github.com/google/googletest.git -b main
cd googletest
mkdir build
cd build

# Configure and build (both GoogleTest and GoogleMock)
cmake ..
make

# Optional: install
sudo make install
```

For only GoogleTest, configure with:
```bash
cmake .. -DBUILD_GMOCK=OFF
```

---

This concludes the detailed guide on installing GoogleTest and GoogleMock via various methods. For a deeper understanding of usage and build configuration, proceed to the related quickstart and primer documentation.

---

# References

- [Quickstart: Building with CMake](quickstart-cmake.md)
- [Using pkg-config with GoogleTest](docs/pkgconfig.md)
- [GoogleTest Primer](primer.md)
- [GoogleMock CMake Build](googlemock/CMakeLists.txt)
- [GoogleTest CMake Build](googletest/CMakeLists.txt)

---