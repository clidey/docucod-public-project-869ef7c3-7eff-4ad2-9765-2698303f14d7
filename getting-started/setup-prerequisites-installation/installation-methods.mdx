---
title: "Installation (CMake, Bazel, Manual)"
description: "Step-by-step instructions for installing GoogleTest and GoogleMock using popular build systems like CMake or Bazel, as well as guidance for manual or custom setups, empowering users to start quickly regardless of their development environment."
---

# Installation (CMake, Bazel, Manual)

Step-by-step instructions for installing GoogleTest and GoogleMock using popular build systems like CMake or Bazel, as well as manual/custom setups. This guide empowers you to integrate GoogleTest quickly and reliably regardless of your development environment.

---

## 1. Prerequisites & System Requirements

Before installation, ensure your environment meets the following requirements:

- **C++ Standard**: Your compiler must support **C++17** or later.
- **Supported Platforms**: Linux, Windows, Mac OS X, and others as detailed on the Supported Platforms page.
- **Build Tools**:
  - For CMake: Version 3.14 or higher is recommended.
  - For Bazel: Refer to your Bazel workspace setup requirements.
- **Dependencies**: 
  - CMake builds automatically include GoogleMock unless disabled.
  - Bazel automatically integrates GoogleTest and GoogleMock.
- **Permissions**: Ensure you have write permissions to installation directories (e.g., `/usr/local/` on Unix systems).

<Tip>
Double-check that your compiler supports C++17 features; otherwise, the build will fail.
</Tip>

---

## 2. Installation Using CMake

GoogleTest provides an out-of-the-box CMake build script designed for maximum portability and ease of use. You can build GoogleTest and GoogleMock either standalone or incorporate them into your own project.

### 2.1 Standalone Build

Follow these steps to clone and build GoogleTest as a standalone project:

<Steps>
<Step title="Clone the GoogleTest repository">
Run the following command to clone the latest stable release (v1.17.0 used here as example):

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>
<Step title="Create a build directory and configure with CMake">
Create a directory separate from the source for building and switch into it:

```bash
mkdir build
cd build
```

Generate build files:

```bash
cmake ..
```

To build GoogleTest only (without GoogleMock), add the flag:

```bash
cmake .. -DBUILD_GMOCK=OFF
```
</Step>
<Step title="Build GoogleTest">
On Unix-like systems run:

```bash
make
```

On Windows, open the generated `gtest.sln` solution file with Visual Studio and build.

On Mac OS X, use the generated `.xcodeproj` file.
</Step>
<Step title="Optional: Install GoogleTest">
To install GoogleTest and its headers system-wide (may require admin permission):

```bash
sudo make install
```

This installs libraries to `/usr/local/lib` and headers to `/usr/local/include` by default.
</Step>
</Steps>

<Note>
If your system uses different default paths, you can customize install locations with CMake variables.
</Note>

### 2.2 Integration Into Your CMake Project

There are two main ways to add GoogleTest to an existing project:

- **Find Installed Package**: Use `find_package(GTest CONFIG REQUIRED)` if GoogleTest is installed on your system.

- **Add as a Subdirectory**: Include GoogleTest source in your project and add it with CMake's `add_subdirectory()` command. This ensures consistent compiler and linker settings.

Example `CMakeLists.txt` snippet to download and add GoogleTest during configure step:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # For Windows dynamic runtime linkage
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

<Tip>
Make sure to have CMake 3.14 or later to use `FetchContent_MakeAvailable()`.
</Tip>

### 2.3 Visual Studio Runtime Library Considerations

Visual Studio projects commonly use dynamic runtimes, while GoogleTest by default uses static runtimes. This mismatch causes linker errors like `LNK2038`.

Use the CMake option `gtest_force_shared_crt` to match your project’s runtime linkage, e.g.,

```bash
cmake -Dgtest_force_shared_crt=ON ..
```

This adjustment aligns GoogleTest’s runtime linkage to your project’s settings.

---

## 3. Installation Using Bazel

GoogleTest is readily available as a Bazel dependency and integrates seamlessly in Bazel workspaces.

### 3.1 Adding GoogleTest to Your Bazel Workspace

Add the following to your `WORKSPACE` file:

```python
load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

http_archive(
    name = "com_google_googletest",
    url = "https://github.com/google/googletest/archive/release-1.17.0.tar.gz",
    strip_prefix = "googletest-release-1.17.0",
    sha256 = "53d8df37dfa2bae5a7b8a269e7ec2f0936484c4a29c5a815874f933571b34cc2",
)
```

### 3.2 Using GoogleTest in BUILD Files

Load and link against `@com_google_googletest//:gtest` or `:gmock` targets as needed:

```python
cc_test(
    name = "your_tests",
    srcs = ["your_test.cc"],
    deps = ["@com_google_googletest//:gtest", "@com_google_googletest//:gmock"],
)
```

<Tip>
Refer to the Bazel documentation for detailed Bazel workspace and BUILD file setup tailored to your environment.
</Tip>

---

## 4. Manual or Custom Installation

If you prefer or require manual setup, follow these steps to install GoogleTest and GoogleMock without build system automation.

### 4.1 Clone the Repository

```bash
git clone https://github.com/google/googletest.git
cd googletest
```

### 4.2 Include Source Files in Your Project

Add the path to the GoogleTest include directories (e.g., `googletest/include` and `googlemock/include`) to your compiler’s include path.

Add the source files from `googletest/src` and `googlemock/src` into your build. Usually, you compile these source files along with your test sources.

### 4.3 Write Your Own `main()` (Optional)

GoogleTest offers a test runner in `gtest_main` which includes a `main()` function. If you do not link `gtest_main`, you need to provide `main()` yourself:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Alternatively, GoogleMock provides `gmock_main` which similarly initializes GoogleMock and GoogleTest.

### 4.4 Compile and Link

Compile your test sources together with GoogleTest and GoogleMock source files. Link against the standard C++ libraries and threading libraries as needed (e.g., `-pthread` on Unix).

<Tip>
If you encounter linker errors related to pthread, manually add your platform-specific threading library to the linker flags.
</Tip>

---

## 5. Verifying Your Installation

After installation, ensure everything works by running a simple test.

1. Create a test file named `sample_test.cpp`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  EXPECT_TRUE(true);
}
```

2. Build and link the test with GoogleTest and GoogleMock libraries.

3. Run the test executable. You should see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.BasicAssertions
[       OK ] SampleTest.BasicAssertions (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

If so, your installation is successful.

<Warning>
If tests fail to run or report missing symbols, check that your compiler flags, include paths, and link libraries are set correctly.
</Warning>

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="Compiler or C++ Standard Version Errors">
Make sure that your compiler supports C++17. If errors occur related to unsupported language features:
- Upgrade your compiler.
- Explicitly set C++17 standard with CMake: `set(CMAKE_CXX_STANDARD 17)` and `set(CMAKE_CXX_STANDARD_REQUIRED ON)`.
</Accordion>

<Accordion title="Linker Errors Related to Missing Symbols">
- Confirm you linked against the correct GoogleTest and GoogleMock libraries (`-lgtest_main`, `-lgmock_main` etc).
- On Unix, ensure `-pthread` is added to both compiler and linker flags.
- On Windows, use the `gtest_force_shared_crt` CMake option if you have runtime conflicts.
</Accordion>

<Accordion title="Build System Doesn’t Find GoogleTest">
- When using `find_package(GTest)`, ensure GoogleTest is installed properly.
- Use `FetchContent` or add GoogleTest as a git submodule to your project to avoid missing dependencies.
</Accordion>

<Accordion title="GoogleMock-specific Issues">
- Verify you included the correct headers: `<gmock/gmock.h>`.
- Remember GoogleMock is bundled with GoogleTest and built together when enabled.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps & Resources

- Explore the [Writing Your First Test](../first-test-execution-validation/writing-your-first-test) page to learn how to write tests with GoogleTest.
- Use the [Using Mocks in Tests](../../guides/core-workflows/using-mocks-in-tests) guide to get started with mock objects.
- Consult the [Feature Summary](../../overview/feature-overview/feature-summary) for an overview of GoogleTest capabilities.
- For CI integration and build system tips, see the [Integration and Ecosystem Compatibility](../../overview/architecture-and-concepts/integration-and-extension) page.

<Check>
Once installation succeeds and initial test runs pass, proceed to writing and organizing your tests using GoogleTest’s API.
</Check>

---

**For the latest code, examples, and source:** [GoogleTest GitHub Repository](https://github.com/google/googletest)

**Official documentation home:** [GoogleTest Document Site](https://google.github.io/googletest/)

---

*This page does not address GoogleTest usage, writing tests, or advanced configuration beyond installation. Please refer to respective guides for those topics.*

---

## References

- [GoogleTest CMake Build Instructions](https://github.com/google/googletest/blob/main/googletest/README.md)
- [GoogleMock Official Documentation](https://google.github.io/googletest/gmock_for_dummies.html)
- [Bazel Setup for GoogleTest](https://docs.bazel.build/versions/main/tutorial/cpp.html#using-a-third-party-library)
- [Supported Platforms and Requirements](../../overview/feature-overview/supported-platforms)
- [Configuration and Initial Setup](../configuration-and-initial-setup)

---

## Example Quick Commands for Standalone CMake Build (Unix-like)

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
mkdir build
cd build
cmake ..
make
sudo make install
```

## Example Minimal Manual Compile Command (Unix-like)

```bash
c++ -std=c++17 -isystem googletest/include -isystem googlemock/include \
    -pthread -c googletest/src/gtest-all.cc
c++ -std=c++17 -isystem googletest/include -isystem googlemock/include \
    -pthread -c googlemock/src/gmock-all.cc
c++ -std=c++17 -pthread your_test.cc gtest-all.o gmock-all.o -o your_test
./your_test
```

<Tip>
Adjust paths and flags as necessary for your environment.
</Tip>
