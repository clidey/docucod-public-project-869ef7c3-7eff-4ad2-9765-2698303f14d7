---
title: "Installation: Linux, macOS, and Windows"
description: "Step-by-step instructions for installing GoogleTest on major platforms, featuring both CMake and Bazel workflows. Includes scripts, example CMakeLists, and tips for integrating with new or existing projects."
---

# Installation: Linux, macOS, and Windows

This guide walks you through the step-by-step process to install GoogleTest on major platforms, including Linux, macOS, and Windows. We cover both CMake and Bazel build workflows, provide example scripts, sample `CMakeLists.txt` configurations, and share practical tips for integrating GoogleTest into new or existing projects.

---

## 1. Prerequisites & System Requirements

Before installing GoogleTest, ensure your development environment meets these requirements:

- **C++ Standard**: Compiler must support at least C++17.
- **Supported Compilers**:
  - GCC 7.0 or later
  - Clang 3.4 or later
  - MSVC 2017 Update 3 or later
- **Supported Platforms**: Linux, macOS, Windows (desktop version), including support for MinGW on Windows.
- **Threading**:
  - Platform must support pthreads or Windows threading primitives.
  - GoogleTest detects pthread availability automatically but can be overridden.
- **Build Tools**:
  - **CMake** (recommended version 3.14 or later)
  - **Bazel** (optional alternative build system)

<Check>
Verify your compiler supports C++17 by running:

```bash
${CXX:-g++} --version
${CXX:-g++} -std=c++17 -dM -E - < /dev/null | grep __cplusplus
```

Look for `__cplusplus` macro value at least `201703L`.
</Check>

---

## 2. Installation Instructions with CMake

### 2.1. Clone the Repository

Start by cloning the official GoogleTest repository:

```bash
git clone https://github.com/google/googletest.git -b main
git checkout main
cd googletest
```

### 2.2. Create a Build Directory

Create a separate directory for out-of-source build artifacts:

```bash
mkdir build
cd build
```

### 2.3. Configure the Build

Run CMake to configure GoogleTest:

```bash
cmake .. -DCMAKE_CXX_STANDARD=17
```

If you want to build GoogleTest without GoogleMock (the mocking framework), add:

```bash
cmake .. -DBUILD_GMOCK=OFF -DCMAKE_CXX_STANDARD=17
```

### 2.4. Build GoogleTest

Invoke the build using your platform's standard tool:

- On Unix-like systems (Linux/macOS):

```bash
make -j$(nproc)
```

- On Windows with Visual Studio:

Open the generated solution file (`gtest.sln`) and build using the IDE or use:

```powershell
msbuild gtest.sln /m
```

### 2.5. (Optional) Install Libraries and Headers

You can install GoogleTest system-wide (may require admin permission):

```bash
sudo make install
```

By default, this installs to `/usr/local`.

<Warning>
Running `sudo make install` modifies system directories; ensure this is intentional.
</Warning>

### 2.6. Verify the Installation

Check that libraries and headers are installed correctly:

```bash
ls /usr/local/lib | grep gtest
ls /usr/local/include/gtest
```

You should see `libgtest.a`, `libgtest_main.a` (static libs), and corresponding headers.

---

## 3. Installation Using Bazel (Optional)

If you prefer Bazel as your build system, GoogleTest supports it natively.

1. Ensure Bazel is installed (https://bazel.build/).
2. From the root `googletest` directory, run tests:

```bash
bazel test //...
```

3. Build production artifacts if needed:

```bash
bazel build //:gtest //:gtest_main
```

<Note>
Bazel builds GoogleTest with default configuration; customize via Bazel build flags.
</Note>

---

## 4. Integrating GoogleTest Into Your Project

You can consume GoogleTest either by linking installed libraries or by including it as part of your project.

### 4.1. Using Installed GoogleTest libraries with pkg-config

GoogleTest installs `.pc` files for pkg-config, simplifying usage in build systems.

Example for CMake with pkg-config:

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})

enable_testing()
add_test(NAME unit_tests COMMAND testapp)
```

If pkg-config cannot find GoogleTest, set `PKG_CONFIG_PATH` to include the `pkgconfig` directory where GoogleTest is installed.

### 4.2. Including GoogleTest Sources Directly

You can include GoogleTest as a subdirectory in your CMake project:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

This ensures GoogleTest uses the same compiler and linker settings as your project.

---

## 5. Example CMakeLists.txt

```cmake
cmake_minimum_required(VERSION 3.14)
project(MyProject CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Option 1: Use installed GoogleTest via pkg-config
# find_package(PkgConfig REQUIRED)
# pkg_search_module(GTEST REQUIRED gtest_main)

# add_executable(my_tests test.cpp)
# target_compile_options(my_tests PRIVATE ${GTEST_CFLAGS})
# target_link_libraries(my_tests PRIVATE ${GTEST_LDFLAGS})

# Option 2: Use GoogleTest as submodule or download
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/main.zip
)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests gtest_main)

enable_testing()
add_test(NAME my_tests COMMAND my_tests)
```

---

## 6. Troubleshooting and Tips

### Common Issues
- **C++17 not enabled:** Ensure your compiler flags include `-std=c++17` or equivalent.
- **Missing pthreads linkage:** With gcc/clang, add `-pthread` to compiler and linker flags.
- **Pkg-config can't find GoogleTest:** Verify `PKG_CONFIG_PATH` environment variable includes the directory where `.pc` files reside.
- **Conflicts between static vs dynamic CRT on Windows:** Use CMake option `-Dgtest_force_shared_crt=ON` to align runtimes.

### Best Practices
- Prefer out-of-source builds to keep the source directory clean.
- Use `gtest_main` library if you want GoogleTest to provide a `main()` function.
- When integrating into larger projects, build GoogleTest as part of your build to maintain compatibility.

---

## 7. Next Steps

Once GoogleTest is installed and integrated:

- Write your first test following the [Writing Your First Test](../first-test-run-validation/writing-your-first-test.md) guide.
- Learn how to build and run tests with the [Building and Running Tests](../first-test-run-validation/building-and-running-tests.md) instructions.
- Explore configuration options in [Configuring Projects with GoogleTest](./configuring-projects-with-googletest.md).

<Info>
For detailed feature descriptions and to deepen understanding, consider reading the overview sections: [What is GoogleTest?](../../overview/product-intro-core-concepts/what-is-googletest.md) and [Core Concepts and Terminology](../../overview/product-intro-core-concepts/core-concepts-terminology.md).
</Info>
