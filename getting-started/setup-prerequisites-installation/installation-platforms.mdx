---
title: "Installation: All Platforms"
description: "Detailed, platform-focused instructions for installing GoogleTest and GoogleMock, including options for CMake, Bazel, and manual integration. Covers obtaining source code, dependency handling, and supported installation patterns."
---

# Installation: All Platforms

Detailed, platform-focused instructions for installing GoogleTest and GoogleMock, including options for CMake, Bazel, and manual integration. This guide covers obtaining source code, handling dependencies, and supported installation patterns.

---

## 1. Obtaining GoogleTest and GoogleMock Source Code

GoogleTest is distributed together with GoogleMock in a single repository.

To get the source, clone the repository directly:

```bash
git clone https://github.com/google/googletest.git -b main
cd googletest
```

You can optionally switch to a tagged release version for stability:

```bash
git checkout v1.17.0
```

---

## 2. Installation Methods

You have multiple ways to build and install GoogleTest and GoogleMock depending on your platform and build environment:

### 2.1 Using CMake (Recommended)

GoogleTest includes a CMake build system supporting cross-platform builds.

#### 2.1.1 Standalone Build

1. Create and navigate to your build directory:

   ```bash
   mkdir build && cd build
   ```

2. Configure the build (this will include GoogleMock by default):

   ```bash
   cmake ..
   ```

   To only build GoogleTest (without GoogleMock), add:

   ```bash
   cmake .. -DBUILD_GMOCK=OFF
   ```

3. Build the libraries:

   ```bash
   make
   ```

4. (Optional) Install system-wide (requires admin privileges):

   ```bash
   sudo make install
   ```

On Windows, running the above `cmake ..` will generate Visual Studio solutions (`.sln`) which you can open and build using Visual Studio. On MacOS, it generates Xcode projects.

#### 2.1.2 Incorporation Into Existing CMake Projects

To integrate GoogleTest into your CMake project:

- Use `find_package(GTest REQUIRED)` after installing the libraries to link against `GTest::gtest` and `GTest::gmock`.

- Or add GoogleTest's source directly to your build by including it as a subdirectory using `add_subdirectory()`.

An example using CMake's FetchContent to incorporate GoogleTest during configure:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

> **Tip:** Ensure you use CMake 3.14 or higher to leverage `FetchContent_MakeAvailable`.


---

### 2.2 Using Bazel

GoogleTest and GoogleMock can also be built and run with Bazel. See the project’s Bazel workspace files for details on how to include GoogleTest in your Bazel builds.

---

### 2.3 Manual Integration

If you prefer not to use CMake or Bazel, you can manually integrate GoogleTest and GoogleMock:

1. Add the `googletest/include/` and `googlemock/include/` directories to your compiler include path (`-I`).

2. Build GoogleTest and GoogleMock source files and link the resulting objects into your test binary.

3. You must link with the pthread library on POSIX systems if pthread support is enabled (`-pthread`).

---

## 3. Dependency and Environment Requirements

- **C++17**: A compiler supporting the C++17 standard is required.

- **Threading library (pthreads)**: Recommended and auto-detected on Unix-like platforms.

- **Build tools**: CMake 3.10+ is recommended for cross-platform builds; make, Ninja, or IDEs like Visual Studio and Xcode are supported.

- On Windows, Visual Studio 2015 or later is required for building GoogleMock.

---

## 4. Building and Verifying Installation

### 4.1 Build Steps

After configuring the build with CMake, run the build command appropriate for your platform:

| Platform       | Build Command              |
| -------------- | -------------------------- |
| Linux/macOS    | `make` or `ninja`          |
| Windows        | Build with Visual Studio or use `cmake --build .` |


### 4.2 Verification

To verify that GoogleTest is built and installed correctly:

1. Compile and run a sample test program provided in the repository `samples/sample1_unittest.cc`.

2. Alternatively, build and run the GoogleTest built-in tests:

   ```bash
   ctest
   ```

3. Validate that the libraries can be found by your project’s build system via `find_package(GTest REQUIRED)`.

---

## 5. Customization and Build Options

- **Build only GoogleTest**: Use `-DBUILD_GMOCK=OFF` to exclude GoogleMock.

- **Enable shared libraries**: Add `-DBUILD_SHARED_LIBS=ON` to build GoogleTest/GoogleMock as shared libraries.

- **Force shared runtime (Windows)**: Use `-Dgtest_force_shared_crt=ON` to match Visual Studio default runtime linkage.

- **Threading**: GoogleTest detects pthread support by default; override with `-DGTEST_HAS_PTHREAD=1` or `0` if needed.

- **Exceptions**: GoogleTest detects compiler support; if necessary, define `-DGTEST_HAS_EXCEPTIONS=1` or `0`.

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues and Fixes">
<Accordion title="CMake cannot find pthread">
If CMake fails to locate pthreads on Unix-like systems, ensure the development headers are installed. On Debian/Ubuntu:

```
sudo apt-get install libpthread-stubs0-dev
```

Also verify the CMake version is recent enough (3.10+ recommended).
</Accordion>

<Accordion title="RuntimeLibrary mismatch error on Windows Visual Studio">
This occurs when mixing dynamic and static CRT linkage between GoogleTest and your project.

**Fix:** Set `-Dgtest_force_shared_crt=ON` in your CMake configure command.

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

</Accordion>

<Accordion title="C++ standard version error">
Ensure your compiler supports C++17. Set the C++ standard explicitly:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

Or via compiler flags `-std=c++17`.
</Accordion>

<Accordion title="Linker errors with GoogleTest symbols">
Verify the GoogleTest libraries are linked correctly. Use CMake's `find_package(GTest REQUIRED)` and link with `GTest::gtest` and `GTest::gtest_main`.

Also ensure libraries and include paths are consistent.
</Accordion>
</AccordionGroup>

---

## 7. Additional Resources

- Official GoogleTest repository: <https://github.com/google/googletest>
- [CMake Build Documentation Section](https://github.com/google/googletest/blob/main/README.md#build-with-cmake)
- [Using GoogleTest from Various Build Systems (pkg-config)](/docs/pkgconfig.md)
- [Supported Platforms and Requirements](/docs/platforms.md)

---

## Summary

This page equips you with step-by-step instructions to install GoogleTest and GoogleMock across platforms using CMake, Bazel, or manual methods. It covers dependency requirements, common build options, verification of installation, and troubleshooting tips addressing frequent setup pitfalls. Empower your testing workflow by choosing the appropriate build approach and confidently integrating GoogleTest into your C++ projects.
