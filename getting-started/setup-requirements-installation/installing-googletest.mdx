---
title: "Installation Guide"
description: "Follow step-by-step installation instructions for various platforms, including CMake and Bazel, drawing from real-world developer workflows. This page makes your initial install straightforward, and connects you with detailed platform-specific quickstarts for hassle-free setup."
---

# Installation Guide

Welcome to the GoogleTest installation guide. This page walks you through the essential steps to install GoogleTest on various platforms using popular build systems like CMake and Bazel. By following this guide, you'll set up a smooth development environment and be ready to integrate GoogleTest into your C++ projects.

---

## 1. Prerequisites

Before installing GoogleTest, ensure your environment meets the following prerequisites:

- **Supported Platforms:** Linux, Windows (including MinGW and Visual Studio), and macOS.
- **Compiler Requirements:** A C++17-compliant compiler (e.g., GCC 7+, Clang 5+, MSVC 2017+).
- **Build Tools:** 
  - For CMake instructions, have [CMake](https://cmake.org/) 3.14 or later installed.
  - For Bazel, install Bazel build system according to your platform.
- **Threading Support:** pthreads support is needed on POSIX systems; Windows uses native threading primitives.
- **Network Access:** Required to clone the GoogleTest repository from GitHub or to fetch sources during CMake configuration.

<Tip>
Verify your compiler supports C++17 by running `g++ --version` or corresponding commands and checking build flags.
</Tip>

For full platform-specific details, see the [Prerequisites & Supported Platforms](https://docs.google.com/document/d/overview/getting-started/setup-requirements-installation/prerequisites-supported-platforms) page.

---

## 2. Installation Using CMake

GoogleTest ships with a cross-platform CMake build script that supports building it standalone or integrating within your projects.

### 2.1 Cloning the Repository

Start by cloning the official GoogleTest repository and switching to the desired version tag:

```bash
# Clone the repo at a stable version
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### 2.2 Building Standalone

Create a separate build directory to keep build files organized:

```bash
mkdir build
cd build
```

Run CMake to generate build files. By default, this builds both GoogleTest and GoogleMock:

```bash
cmake ..
```

If you want to build only GoogleTest (without GoogleMock), add the option:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### 2.3 Compiling

- On Linux or macOS, run:

  ```bash
  make
  sudo make install
  ```

- On Windows with Visual Studio installed:

  - Open the generated `gtest.sln` solution file in Visual Studio.
  - Build the solution in your preferred configuration (Debug/Release).

- On macOS with Xcode installed:

  - Open the generated `.xcodeproj` project file.
  - Build using Xcode.

### 2.4 Verifying the Build

After building and installing, verify GoogleTest is available by confirming header files and libraries are installed in `/usr/local/include` and `/usr/local/lib` (default locations).

<Tip>
If you installed GoogleTest system-wide, ensure your compiler and linker are configured to find the installed headers and libraries when building your tests.
</Tip>

### 2.5 Troubleshooting Common Build Issues

- **Runtime Library Mismatch on Windows:**
  Visual Studio projects default to dynamic CRT linkage but GoogleTest uses static CRT by default, causing LNK2038 errors.

  Remedy:

  Add `-Dgtest_force_shared_crt=ON` when running CMake to force dynamic CRT linkage compatibility.

- **Pthread Link Errors:**
  If building on Linux fails due to pthread, ensure your build includes pthread linking flags. CMake scripts handle this automatically; custom scripts may need to add `-pthread`.

- **Compiler Does Not Support C++17:**
  Confirm the compiler version and explicitly set the C++ standard in your project or via CMake flags:

  ```bash
  cmake .. -DCMAKE_CXX_STANDARD=17 -DCMAKE_CXX_STANDARD_REQUIRED=ON
  ```

---

## 3. Integration into Existing CMake Projects

To integrate GoogleTest into your existing CMake project, you have two main options:

### 3.1 Use Installed GoogleTest Libraries

If GoogleTest is installed on your system, you can find and link it as follows:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests PRIVATE GTest::gtest GTest::gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

This approach assumes a system-wide or user-local installation via `make install` or equivalent.

### 3.2 Embed GoogleTest Source Directly

For tighter coupling and avoiding version mismatches, embed GoogleTest source into your build using `FetchContent`:

```cmake
include(FetchContent)

FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# Windows: prevent overriding parent project's compiler settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(my_tests test_main.cpp)
target_link_libraries(my_tests PRIVATE gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

This method ensures GoogleTest is built with the same compiler and linker settings as your project.

<Tip>
FetchContent requires CMake 3.14 or newer.
</Tip>

---

## 4. Optional Build Configurations

### 4.1 Shared vs Static Libraries

- By default, GoogleTest builds a static library.
- To build a shared library (DLL on Windows), add:
  
  ```bash
  cmake .. -DBUILD_SHARED_LIBS=ON
  ```

- When building shared libraries, ensure tests and dependent projects add `-DGTEST_LINKED_AS_SHARED_LIBRARY=1` to compiler flags.

### 4.2 Multi-threaded Tests Support

GoogleTest is thread-safe when pthread support is enabled.

- You can force pthread support detection with compiler flags:

  ```bash
  -DGTEST_HAS_PTHREAD=1
  ```

- CMake usually handles this correctly. If not, check your compiler and linker flags.

### 4.3 Avoiding Macro Name Clashes

GoogleTest macros can clash with other libraries. To rename GoogleTest macros,

add flags like:

```bash
-DGTEST_DONT_DEFINE_TEST=1
```

Then use prefixed macros like `GTEST_TEST` instead of `TEST`.

---

## 5. First Test Setup

After installing, you are ready to write and run your first test. Link your test binary with GoogleTest libraries (`gtest_main` for default main function) and include the `<gtest/gtest.h>` header.

Example minimal test file `example_test.cpp`:

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, AlwaysPasses) {
  EXPECT_EQ(1, 1);
}
```

Compile linking with GoogleTest:

```bash
g++ example_test.cpp -lgtest_main -lgtest -pthread -o example_test
```

Run your test:

```bash
./example_test
```

You should see output indicating the tests ran successfully.

---

## 6. Additional Resources & Next Steps

- Detailed platform-specific quick starts:
  - [Linux and macOS Quickstart](https://github.com/google/googletest/blob/main/docs/INSTALL.md#linux-and-macos)
  - [Windows Quickstart](https://github.com/google/googletest/blob/main/docs/INSTALL.md#windows)
- Explore writing advanced tests after installation: [Writing Your First Test](https://docs.google.com/document/d/guides/getting-started/writing-first-test)
- For integration into CI/CD pipelines, see the [CI/CD Integration guide](https://docs.google.com/document/d/guides/integration/ci-cd-integration)

<Tip>
Return here for troubleshooting installation issues after running your first test: [Installation Troubleshooting](https://docs.google.com/document/d/getting-started/first-run-validation/installation-troubleshooting)
</Tip>

---

## Appendix: Quick Command Summary

<Steps>
<Step title="Clone Repository">
Run:

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```
</Step>
<Step title="Prepare Build Directory">

```bash
mkdir build
cd build
```

</Step>
<Step title="Configure with CMake">

```bash
cmake ..
# or to build only GoogleTest
cmake .. -DBUILD_GMOCK=OFF
```

</Step>
<Step title="Build">

```bash
make
# or on Windows, build the generated solution in Visual Studio
```

</Step>
<Step title="Install (Optional)">

```bash
sudo make install
```

</Step>
</Steps>

---

For full source and build details, visit the official [googletest GitHub repository](https://github.com/google/googletest).


---

<Check>
If you run into errors during installation, verify compiler versions, threading support, and platform-specific instructions carefully.
</Check>

---

# End of Installation Guide
