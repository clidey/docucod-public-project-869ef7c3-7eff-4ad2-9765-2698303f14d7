---
title: "Installation (Linux, macOS, Windows)"
description: "Step-by-step installation instructions for the major supported platforms, covering various build systems such as CMake and Bazel, as well as manual build options. Guides users through obtaining the source, running build scripts, and verifying installation success."
---

# Installation (Linux, macOS, Windows)

This guide provides **step-by-step installation instructions** for GoogleTest on the three major supported platforms. It covers building GoogleTest using common build systems like **CMake** and provides instructions on manual builds. By following these instructions, you'll obtain the source, compile, and confirm that GoogleTest is correctly installed and ready for use.

---

## 1. Prerequisites & System Requirements

### Supported Platforms
- Linux
- macOS
- Windows (including Windows Desktop with Visual Studio and MinGW)

### Required Tools and Dependencies
- A C++ compiler supporting at least **C++17**.
- [CMake](https://cmake.org/) version **3.14 or higher**.
- For makefile builds: `make` (Linux/macOS) or Visual Studio (Windows).
- Network access to download GoogleTest source from GitHub.

### Permissions
- Administrator or sudo privileges for system-wide installations.

---

## 2. Installing GoogleTest with CMake

GoogleTest includes built-in support for CMake, making it straightforward to build and integrate.

### 2.1 Cloning the Source

Start by cloning the GoogleTest repository at a released version:

```bash
# Clone GoogleTest at version v1.17.0
git clone https://github.com/google/googletest.git -b v1.17.0
cd googletest
```

### 2.2 Creating a Build Directory

Create a separate directory for build artifacts to keep sources clean:

```bash
mkdir build
cd build
```

### 2.3 Configuring the Build

Run CMake to generate native build files.

- To build both GoogleTest and GoogleMock (default):

```bash
cmake ..
```

- To build *only* GoogleTest (skip GoogleMock):

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### 2.4 Building the Libraries

- On **Linux** or **macOS** (with Makefiles generated):

```bash
make
```

- On **Windows** (with Visual Studio):

Open the generated `gtest.sln` solution file and build the project using Visual Studio's GUI.

- On **macOS** (with Xcode):

Open the generated `.xcodeproj` file and use Xcode to build.

### 2.5 (Optional) Installing

If you have administrator permissions and want to install GoogleTest system-wide, run:

```bash
sudo make install
```

This typically installs libraries to `/usr/local/lib` and headers to `/usr/local/include`.


### 2.6 Verifying the Installation

- After building, verify that the static or shared libraries are created in the build output.
- On Unix-like systems, expect files like `libgtest.a`, `libgmock.a`, or `.so`/`.dylib` files.
- On Windows, check for `.lib` and `.dll` files as appropriate.


---

## 3. Incorporating GoogleTest Into Your Own CMake Project

GoogleTest can be integrated into your existing project in several ways:

### 3.1 Using Installed GoogleTest Libraries

If you installed GoogleTest, you can use `find_package` in your `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests PRIVATE GTest::gtest GTest::gtest_main)
```

This method assumes GoogleTest headers and libraries are in standard locations.

### 3.2 Building GoogleTest as a Subdirectory

To keep your builds consistent, add GoogleTest source code directly to your project:

- Download or clone the GoogleTest source.
- Add this to your `CMakeLists.txt` to download and make GoogleTest available:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
# On Windows: force shared runtime to match your projectâ€™s settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

add_executable(my_tests test.cpp)
target_link_libraries(my_tests PRIVATE gtest_main)
add_test(NAME my_tests COMMAND my_tests)
```

- This downloads and builds GoogleTest as part of your project, avoiding compatibility issues.

> **Note:** This requires **CMake 3.14+** due to the use of `FetchContent_MakeAvailable()`.

---

## 4. Building GoogleTest Manually (Without CMake)

If you prefer or need to build GoogleTest manually:

1. Clone the repository.
2. Navigate to the `googletest` directory.
3. Compile source files directly using your compiler.

Example command on Linux/macOS (compile to static library):

```bash
# Compile GoogleTest source files
g++ -isystem googletest/include -pthread -c googletest/src/gtest-all.cc

# Archive into a static library
ar -rv libgtest.a gtest-all.o
```

4. Link `libgtest.a` with your test binaries.

> **Warning:** This approach requires you to manage dependencies and flags manually and is not recommended unless you have a specific reason.

---

## 5. Visual Studio Specific Notes

- GoogleTest default configurations link C runtimes statically, which conflicts with Visual Studio projects that use dynamic runtimes.
- To resolve this, set the CMake option:

```cmake
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
```

- This enables dynamic runtime linking to avoid `RuntimeLibrary` mismatch errors.

---

## 6. Additional Configuration Notes

### C++ Standard

GoogleTest requires at least C++17. Ensure your project's compiler settings specify:

```cmake
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

or the equivalent compiler flags.

### Multi-threading

GoogleTest automatically detects and enables pthread support where available. If detection fails, you can force it with:

```bash
-DGTEST_HAS_PTHREAD=1   # enable pthread
-DGTEST_HAS_PTHREAD=0   # disable pthread
```

### Using GoogleTest as a Shared Library

If you prefer to build GoogleTest as a shared library (DLL on Windows), specify:

```bash
-DGTEST_CREATE_SHARED_LIBRARY=1
```

and when compiling your test binaries using it:

```bash
-DGTEST_LINKED_AS_SHARED_LIBRARY=1
```

---

## 7. Troubleshooting

### Common Issues

- **C++17 not enabled:** Build fails due to `C++ versions less than C++17 are not supported.`
  - Fix by ensuring compiler flags or CMake settings specify C++17 or higher.

- **Runtime Library mismatch on Windows:** Linker error about `RuntimeLibrary` mismatch.
  - Fix by enabling `gtest_force_shared_crt` option in your CMake configuration.

- **Pthread link errors:** Missing pthread linkage on Linux/macOS.
  - Use CMake build scripts which handle this automatically or manually add `-pthread`.

- **Build system cannot find GoogleTest when using pkg-config or find_package:**
  - Ensure GoogleTest `.pc` files are in correct `PKG_CONFIG_PATH`.
  - If cross-compiling, ensure `PKG_CONFIG_SYSROOT_DIR` and `PKG_CONFIG_LIBDIR` are correctly set.

### Validation

After building, run GoogleTest's sample binaries or your own tests to verify proper functioning:

```bash
./path/to/test_binary
```

Expect tests to run and report results successfully.

---

## 8. References and Next Steps

- [GoogleTest Primer](primer.md): Learn how to write and run tests.
- [Quickstart: Building with CMake](quickstart-cmake.md): A tutorial for starting projects.
- [Mocking with GoogleMock](guides/mocking-and-advanced-usage/mocking-with-gmock): Advanced testing techniques.
- [Troubleshooting & Common Pitfalls](getting-started/first-test-usage/troubleshooting-setup): Common issues and resolutions.
- [Supported Platforms](platforms.md): Confirm your system compatibility.

For integration into your projects, consult [Integrating into CMake and Bazel Builds](guides/integration-examples-and-best-practices/integrating-into-cmake-bazel-builds).

---

By following these instructions, you will have GoogleTest installed, configured and ready to help you write and run robust C++ tests across platforms.


---