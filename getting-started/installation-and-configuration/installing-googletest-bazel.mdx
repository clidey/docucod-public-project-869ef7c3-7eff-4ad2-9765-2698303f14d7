---
title: "Installing with Bazel"
description: "Follow instructions to set up GoogleTest in a Bazel-based workflow. This guide makes it easy to add GoogleTest as a dependency and use it in your Bazel projects."
---

# Installing with Bazel

Get started quickly with GoogleTest in a Bazel-based C++ project. This guide walks you through adding GoogleTest as a dependency, setting up your workspace, and building and running your first test with Bazel.

---

## 1. Prerequisites & System Requirements

Before setting up GoogleTest with Bazel, ensure the following:

- **Supported Platforms:** Linux, macOS, Windows (see [Supported Platforms](../overview/integration-and-ecosystem/supported-platforms) for details).
- **C++ Compiler:** Must support at least the C++17 standard.
- **Bazel Version:** Bazel 7.0 or higher is required.
- **Network Access:** Required to fetch dependencies from the Bazel Central Registry.


<Check>
Verify Bazel is installed and meets version requirements:
```bash
bazel version
```
Output should show Bazel 7.0 or newer.
</Check>

---

## 2. Setting up Your Bazel Workspace

GoogleTest integrates cleanly via the Bazel Central Registry, simplifying dependency management.

### Step 2.1: Create a Workspace Directory

Open your terminal and create a new directory for your project:

```bash
mkdir my_workspace && cd my_workspace
```

### Step 2.2: Define Dependencies in `MODULE.bazel`

Create a file named `MODULE.bazel` in your workspace root containing:

```python
# MODULE.bazel

# Declare dependency on Googletest version 1.17.0
bazel_dep(name = "googletest", version = "1.17.0")
```

This tells Bazel to fetch GoogleTest automatically via the official module registry.

<Tip>
Check the [Bazel Central Registry](https://registry.bazel.build/modules/googletest) for newer GoogleTest versions as they become available.
</Tip>

---

## 3. Creating Your First Test Target

Let’s add a simple test source file and a Bazel build rule to compile and run tests with GoogleTest.

### Step 3.1: Write a Sample Test

Create a file named `hello_test.cc` inside the workspace directory with the following content:

```cpp
#include <gtest/gtest.h>

// Simple test showing basic GoogleTest assertions.
TEST(HelloTest, BasicAssertions) {
  // Test that two strings are not the same
  EXPECT_STRNE("hello", "world");
  // Test equality of computed values
  EXPECT_EQ(7 * 6, 42);
}
```

### Step 3.2: Create a Bazel BUILD File

In the same directory, create a file named `BUILD` with this content:

```python
cc_test(
    name = "hello_test",
    size = "small",
    srcs = ["hello_test.cc"],
    deps = [
        "@googletest//:gtest",
        "@googletest//:gtest_main",
    ],
)
```

This defines a C++ test named `hello_test` with source and dependencies on GoogleTest libraries.

<Tip>
- `gtest_main` provides a ready-to-use `main()` that initializes and runs all your tests.
- Dependencies are prefixed with `@googletest//` indicating external module usage.
</Tip>

---

## 4. Build and Run Your Test

### Step 4.1: Build and Execute

From the terminal inside the workspace directory, run:

```bash
bazel test --cxxopt=-std=c++17 --test_output=all //:hello_test
```

- `--cxxopt=-std=c++17` forces the compiler to use C++17 standard, ensuring compatibility with GoogleTest.
- `--test_output=all` displays all test output, including success messages.

### Step 4.2: Expected Output

You should see Bazel analyze and build your test, then run it successfully:

```
INFO: Analyzed target //:hello_test (number of packages & targets loaded).
INFO: Found 1 test target...
INFO: From Testing //:hello_test:
Running main() from gmock_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from HelloTest
[ RUN      ] HelloTest.BasicAssertions
[       OK ] HelloTest.BasicAssertions (0 ms)
[----------] 1 test from HelloTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.

INFO: Build completed successfully
//:hello_test PASSED in 0.1s
```

<Check>
A passing test outcome with `PASSED` confirms successful GoogleTest integration.
</Check>

<Warning>
If you encounter compiler errors related to C++ standards, verify your compiler supports C++17 and you pass `--cxxopt=-std=c++17` (or equivalent for your compiler).
</Warning>

---

## 5. Tips, Best Practices, and Next Steps

- **Keep `MODULE.bazel` updated:** Always check the Bazel Central Registry for newer GoogleTest versions.
- **Leverage `gtest_main`:** Use the `gtest_main` library to avoid writing your own `main()` function unless you need custom test initialization.
- **Use the [GoogleTest Primer](../getting-started/first-test-and-validation/quickstart-primer) next:** Learn how to write effective tests using assertions, fixtures, and test suites.
- **Explore [Troubleshooting](../getting-started/first-test-and-validation/troubleshooting)** for common issues you might face in Bazel or GoogleTest.

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Installation Issues">
<Accordion title="Build fails due to missing C++17 support">
Ensure your C++ compiler supports C++17. Check compiler version and pass the required compilation flags like `--cxxopt=-std=c++17`.
</Accordion>
<Accordion title="Bazel cannot find Googletest module">
Verify `MODULE.bazel` exists in workspace root and contains the correct `bazel_dep` declaration. Also ensure network connectivity is available to fetch dependencies.
</Accordion>
<Accordion title="Test shows linking errors with `gtest_main`">
Check that your `BUILD` file correctly includes the `@googletest//:gtest_main` dependency. This provides the test runner's `main()` function.
</Accordion>
</AccordionGroup>

---

Congratulations on setting up GoogleTest with Bazel! You can now expand your tests confidently with a robust testing framework integrated into your build system.

---

## Additional Resources

- [GoogleTest Primer](../getting-started/first-test-and-validation/quickstart-primer) – Learn how to write your first tests.
- [Supported Platforms & Toolchains](../overview/integration-and-ecosystem/supported-platforms) – Understand compatibility details.
- [Troubleshooting Common Issues](../getting-started/first-test-and-validation/troubleshooting) – Resolve typical setup and runtime problems.
- Bazel Official Site: [https://bazel.build/](https://bazel.build/)
- Bazel Central Registry (GoogleTest module): [https://registry.bazel.build/modules/googletest](https://registry.bazel.build/modules/googletest)

## Source

For more details or to customize GoogleTest usage beyond Bazel, visit the [GoogleTest GitHub Repository](https://github.com/google/googletest).
