---
title: "Manual Installation & Source Integration"
description: "Describe how advanced users can manually add source files or headers to their own projects without a build system, clarifying necessary files and basic structure."
---

# Manual Installation & Source Integration

This guide explains how advanced users can manually incorporate GoogleTest and GoogleMock source files and headers into their own projects without relying on a specific build system. It clarifies which files and directories are essential and outlines the basic structure you need to set up for successful use.

---

## 1. Understanding the Source Layout

GoogleTest and GoogleMock come as source code organized primarily under the `googletest` directory in the repository. Mocking support is integrated within GoogleTest source. Key points:

- All necessary headers are found under `googletest/include/gtest` and `googletest/include/gmock`.
- Source files mainly reside in `googletest/src`.
- GoogleMock sources are within GoogleTest but include its own headers in `googletest/include/gmock`.

The repository also includes `googlemock` directory as a stand-alone reference, but the recommended approach is to use the integrated sources in `googletest`.

## 2. Essential Files and Directories to Include

When manually adding sources to your project, include the following:

- **Headers:**
  - Include the full content of `googletest/include/gtest` and `googletest/include/gmock` directories. These contain all public headers you need.

- **Source files:**
  - Add all `.cc` source files from `googletest/src` to your build. Key files include:
    - `gtest-all.cc`: contains most GoogleTest implementation.
    - `gmock-all.cc`: contains the GoogleMock implementation.
  - You may also include specific files if you want partial linkage, but this is advanced.

- **Customization:**
  - The `googlemock/include/gmock/internal/custom/` directory is an injection point for user customization (see [`gmock-port.h`](googlemock/include/gmock/internal/custom/README.md)). If you wish to define macros to tweak behavior, add your headers here and include them in your project accordingly.

## 3. Basic Steps to Integrate Sources Manually

Follow these steps to integrate GoogleTest and GoogleMock without a build system:

### Step 1: Copy Required Headers

- Copy or reference the contents of:
  - `googletest/include/gtest/` (for GoogleTest)
  - `googletest/include/gmock/` (for GoogleMock)

Ensure your compiler’s include paths reference these locations so your code can `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>` properly.

### Step 2: Copy Source Files

- Include the following source files in your compiler invocation or IDE project:

  ```plaintext
  googletest/src/gtest-all.cc
  googletest/src/gmock-all.cc
  ```

- These aggregate all relevant sources and simplify integration.

### Step 3: Configure Include Paths

- Set compiler include paths to point to the copied or referenced header directories.

### Step 4: Compile and Link

- Compile the copied source files along with your test code.
- Link the resulting objects with your test binaries.

### Step 5: Run Tests

- Tests using GoogleTest and GoogleMock should now compile and run normally.

## 4. Additional Tips and Best Practices

- **Avoid Partial Copies:** Copying only portions of the source or headers may cause missing symbols or compile errors.
- **Customization Macros:** If you want to customize the behavior of gMock, use the macros defined in `gmock-port.h` found in `googlemock/include/gmock/internal/custom/README.md`. Define these macros before compiling GoogleMock sources.
- **Stay Up to Date:** When manually integrating, plan for periodically updating the sources to get bug fixes and improvements.
- **Build System Encouraged for Large Projects:** While manual integration works, using CMake or Bazel (covered in other installation guides) is recommended for maintainability.

## 5. Basic Example: Manual Compilation Commands

Assuming you have copied sources and headers to your project directory structure:

```bash
# Example compilation with g++
g++ -std=c++17 -I./googletest/include -I./googlemock/include \
    -c googletest/src/gtest-all.cc googletest/src/gmock-all.cc \
    my_test_code.cc

# Link everything

g++ -o my_tests gtest-all.o gmock-all.o my_test_code.o -pthread

# Run the tests
./my_tests
```

Adjust include paths and source file locations according to your project layout.

## 6. Troubleshooting

### Common Issues

- **Missing Header Errors:** Recheck that all required header directories are in your include paths, including both gtest and gmock includes.
- **Linker Errors for Symbols:** Ensure you compiled and linked both `gtest-all.cc` and `gmock-all.cc` files.
- **Macro Customizations Not Taking Effect:** Confirm any macro definitions related to `gmock-port.h` are visible **before** compiling GoogleMock sources.

### Tips

- Use verbose compiler and linker output to verify file inclusion.
- Build a small example test first before integrating into large projects.
- Consider using the [Installing with CMake](installing-cmake.md) guide for automated integration as a fallback.

## 7. Related Documentation

- [Installing with CMake](installing-cmake.md) – Recommended automated build integration
- [Installing with Bazel](installing-bazel.md) – Bazel build integration
- [Customization Points](googlemock/include/gmock/internal/custom/README.md) – How to tweak gMock behavior
- [GoogleMock README](googlemock/README.md) – Overview and introduction
- [GoogleTest README](googletest/README.md) – Build instructions

---

This guide assumes familiarity with your build tools or IDE for adding headers and source files. For comprehensive build management and dependency tracking, consider using supported build systems that can automate these inclusions.

<Source url="https://github.com/google/googletest" />
