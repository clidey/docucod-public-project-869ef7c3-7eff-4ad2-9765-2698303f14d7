---
title: "Verifying Installation & Configuration"
description: "Present a quick, hands-on validation checklist—how to confirm installation was successful, ensuring libraries and headers are detected, and typical errors to watch for."
---

# Verifying Installation & Configuration

Ensure your GoogleTest and GoogleMock installation is successfully configured and ready for robust C++ testing by following this quick validation checklist.

---

## 1. Confirm Library and Header Discovery

Before attempting to run tests, verify that the compiler and build system can locate GoogleMock and GoogleTest headers and libraries:

- **Headers**: You should be able to include the primary headers without errors:
  ```cpp
  #include <gmock/gmock.h>
  #include <gtest/gtest.h>
  ```

- **Libraries**: Ensure linking to the correct libraries (`gmock`, `gmock_main`, `gtest`, or `gtest_main`) is successful.

- **Build System Integration**: If using CMake or Bazel, verify that your build files correctly reference Google Test and Mock targets or dependencies.

<Tip>
If your build system fails to find headers or libraries, double-check the `include` paths and library directories. CMake's `find_package(GMock)` or Bazel's workspace settings must correctly reference the installed packages.
</Tip>

---

## 2. Run Basic Initialization Checks

GoogleMock provides an initialization function to parse flags and get the framework ready. Verify this integration:

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- Calling `InitGoogleMock()` is essential before running tests. It also initializes GoogleTest internally.
- Test that the binary compiles and runs without errors at this stage.

<Note>
`InitGoogleMock()` also parses command-line flags such as `--gmock_verbose` and modifies internal flag values accordingly. Flags are removed from `argv` as they are processed.
</Note>

---

## 3. Verify Flag Detection and Behavior

GoogleMock uses runtime flags to control behaviors. Confirm that these flags are properly detected:

- **Verbose Output Flag**: `--gmock_verbose` controls output detail:
  - Supported values: `info`, `warning`, `error`
  - Example command line usage:
    ```sh
    ./my_test_binary --gmock_verbose=info
    ```
- **Default Mock Behavior Flag**: `--gmock_default_mock_behavior` controls mock strictness:
  - `0` = NiceMock (default allows unexpected calls)
  - `1` = NaggyMock (default generates warnings for unexpected calls)
  - `2` = StrictMock (default fails on unexpected calls)

### Test Flag Parsing

Use simple tests or inspect flag values programmatically to confirm correct parsing:

```cpp
std::cout << "Verbose flag: " << GMOCK_FLAG_GET(verbose) << std::endl;
std::cout << "Default mock behavior: " << GMOCK_FLAG_GET(default_mock_behavior) << std::endl;
```

<Warning>
If your test does not recognize or apply flags, ensure that `InitGoogleMock()` is called early and your build links against the correct framework versions supporting flags.
</Warning>

---

## 4. Run a Minimal Test to Confirm Installation

Create and run a trivial test to validate everything is working end-to-end:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

TEST(InstallationTest, BasicAssertion) {
  EXPECT_EQ(1, 1);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and execute this test:

- Success: The test runner runs the test and reports as passed.
- Failure: If the test executable fails to build or run, check your installation and configuration.

<Tip>
Ensure that your compiler flags match the requirements of GoogleMock and GoogleTest (C++17 or later) and that all dependencies are available.
</Tip>

---

## 5. Common Issues and Troubleshooting

| Issue                                   | Cause & Solution                                                                                         |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------|
| **Header not found or include errors** | Incorrect include path; verify installation and include directories.                                 |
| **Linker errors to GoogleMock libraries** | GoogleMock target not linked; confirm linking `gmock` and `gmock_main`.                                 |
| **Flags ignored or not parsed**         | Missing call to `InitGoogleMock()`; verify initialization.                                               |
| **Compilation issues on MSVC**          | Compiler version < Visual Studio 2015 not supported; upgrade MSVC compiler.                             |
| **Mismatch in runtime libraries**       | Ensure consistent CRT linking across your test and GoogleMock libraries; adjust CMake compiler flags if needed. |

---

## 6. Verify with Diagnostic Output

GoogleMock provides internal flag macros accessible during runtime: 

| Flag                     | Purpose                                                    |
|--------------------------|------------------------------------------------------------|
| `GMOCK_FLAG_GET(verbose)`| Current verbosity level (info, warning, error)             |
| `GMOCK_FLAG_GET(catch_leaked_mocks)` | Whether to detect leaked mocks and report failure             |
| `GMOCK_FLAG_GET(default_mock_behavior)` | Mock strictness behavior configuration                           |

Example diagnostic snippet you can add:

```cpp
#include <iostream>
#include "gmock/internal/gmock-port.h"

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);

  std::cout << "GoogleMock Flags:" << std::endl;
  std::cout << " verbose = " << GMOCK_FLAG_GET(verbose) << std::endl;
  std::cout << " catch_leaked_mocks = " << (GMOCK_FLAG_GET(catch_leaked_mocks) ? "true" : "false") << std::endl;
  std::cout << " default_mock_behavior = " << GMOCK_FLAG_GET(default_mock_behavior) << std::endl;

  return RUN_ALL_TESTS();
}
```

---

## 7. Final Validation Checklist

- [x] Headers `gmock/gmock.h` and `gtest/gtest.h` compile without error.
- [x] Build system resolves and links GoogleMock and GoogleTest libraries correctly.
- [x] `testing::InitGoogleMock(&argc, argv)` is called before test execution.
- [x] Command-line flags like `--gmock_verbose` affect runtime behavior.
- [x] A minimal test runs and passes when executed.
- [x] Common installation problems are absent or addressed.

---

## Additional Resources

- [Google Test Primer](https://github.com/google/googletest/blob/main/docs/primer.md) — Learn basic usage and writing tests.
- [Google Mocking Reference](https://github.com/google/googletest/blob/main/docs/reference/mocking.md) — Detailed API for mocking and expectations.
- [Installation Guide](https://github.com/google/googletest/blob/main/README.md#installation) — Includes setup and configurations.
- [Troubleshooting Guide](https://github.com/google/googletest/blob/main/README.md#troubleshooting) — Common issues and fixes.
- [Supported Platforms and Compilers](https://github.com/google/googletest/blob/main/docs/setup-introduction/platforms.md) — Verify compatibility.

---

By systematically confirming these steps, you ensure your testing environment is both functional and ready to execute GoogleTest and GoogleMock based test suites with confidence.