---
title: "Writing and Running Your First Test"
description: "Create a simple test suite using GoogleTest's core macros, compile it, and run your test binary. Understand the basic structure of a test, key assertions, and how to interpret test output."
---

# Writing and Running Your First Test

This guide walks you through creating a simple test suite using GoogleTest's core macros, compiling it, and running your first test binary. You will understand the basic structure of a test, how to use key assertions, and how to interpret the test output to verify your code is working correctly.

---

## 1. Prerequisites

Before you begin writing your first test, ensure:

- You have installed GoogleTest correctly. We recommend building with CMake following instructions in the [Installing with CMake guide](/getting-started/prerequisites-installation/installation-cmake).
- A C++ environment with support for C++17 or later.
- Your project is configured to include GoogleTest headers and link against the `gtest` or `gtest_main` libraries.

<Check>
Make sure you can compile a minimal GoogleTest program before proceeding.
</Check>

## 2. Writing a Simple Test

A test in GoogleTest is defined using the `TEST()` macro. It creates a test function automatically registered and run by the framework. 

### Structure of a Test

- **Test Suite Name**: A grouping name for related tests. Think of it as a category.
- **Test Name**: A descriptive name for a particular test within the suite.

The macro signature is:

```cpp
TEST(TestSuiteName, TestName) {
  // Test body
}
```

### Example: Testing a Simple Function

Suppose you have a function that calculates factorial:

```cpp
int Factorial(int n);  // Returns n!
```

You can write tests as:

```cpp
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Here, the test suite is `FactorialTest`, grouping tests related to the `Factorial` function.

<Tip>
Use meaningful names without underscores (`_`) for test suites and tests to follow conventions and avoid confusion.
</Tip>

## 3. Using Assertions

Assertions verify conditions within tests. They come in two flavors:

- **Fatal assertions (`ASSERT_*`)**: If a fatal assertion fails, the test function aborts immediately.
- **Non-fatal assertions (`EXPECT_*`)**: Failures are recorded but the test continues.

### Common Assertion Example

```cpp
EXPECT_EQ(actual_value, expected_value);
ASSERT_NE(pointer, nullptr);
```

Use `ASSERT_*` when continuing after failure is not safe (e.g., dereferencing a pointer).

## 4. Compiling Your Test

You need to compile your test source file(s), linking them with GoogleTest. Example using `g++` and CMake build setup:

```bash
# Using standalone GoogleTest
g++ -std=c++17 -isystem /path/to/googletest/include \
    -pthread your_test.cc \
    /path/to/googletest/lib/libgtest.a \
    /path/to/googletest/lib/libgtest_main.a \
    -o your_test_binary
```

Alternatively, if using your projectâ€™s CMakeLists.txt with GoogleTest added as a subdirectory:

```cmake
add_executable(your_test your_test.cc)
target_link_libraries(your_test gtest_main)
```

Then build via:

```bash
mkdir build && cd build
cmake ..
make
```

<Note>
Link with `gtest_main` to avoid writing your own `main()` function; it provides the test runner entry point.
</Note>

## 5. Running Your Test Binary

Execute the compiled test binary:

```bash
./your_test_binary
```

The output will look like:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

- `[ RUN      ]` indicates a test is running.
- `[       OK ]` means the test passed.
- Failed tests will show `[  FAILED  ]` with details.

<Tip>
Use the `--gtest_list_tests` flag to list all discovered tests without running them.
Example: `./your_test_binary --gtest_list_tests`
</Tip>

## 6. Understanding the Test Output

- The summary at the end shows the count of passed and failed tests.
- The report helps quickly spot failures to debug.
- If failures appear, the console output provides file and line number location.

## 7. Writing Tests with Fixtures (Optional Next Step)

For tests that need shared setup, consider using test fixtures with `TEST_F()`. See the [Test Fixtures section in the GoogleTest Primer](../primer.md#same-data-multiple-tests).

## 8. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Tips">
<Accordion title="Test Binary Not Linking">
Make sure you link against `gtest` or `gtest_main`. Including `gtest_main` provides a default entry `main()` function.
</Accordion>
<Accordion title="Compilation Errors on Missing Headers">
Verify your include paths; you must include `<gtest/gtest.h>` to use GoogleTest macros.
</Accordion>
<Accordion title="Tests Not Executed or Recognized">
Check that your test functions are properly defined using `TEST` or `TEST_F` macros and that the test binary runs `RUN_ALL_TESTS()`.
</Accordion>
<Accordion title="Assertion Failures Seem Ambiguous">
Use `EXPECT_*` for non-fatal assertions so tests show all failures. For debugging, use `SCOPED_TRACE` to add context to assertions.
</Accordion>
</AccordionGroup>

## 9. Sample Complete Test File

```cpp
#include <gtest/gtest.h>

// Function to test
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this file to get your first GoogleTest experience.

---

## 10. Next Steps

- Explore [Test Fixtures](../primer.md#same-data-multiple-tests) for reusable test setups.
- Learn about [Assertions Reference](reference/assertions.md) to deepen your assertion repertoire.
- See [Running Tests and Test Filtering](../advanced.md#running-test-programs-advanced-options) for selective test executions.
- Consult [Advanced Topics](../advanced.md) for tips on skipping tests, death tests, and custom listeners.
- For troubleshooting, refer to the [Common Setup Issues](/getting-started/troubleshooting-support/common-setup-issues) guide.

<Tip>
Link your tests with `gtest_main` to avoid writing a manual `main()`; use custom `main` only for advanced control.
</Tip>

---

### References

- [GoogleTest Primer](../primer.md)
- [Installing with CMake](/getting-started/prerequisites-installation/installation-cmake)
- [Assertions Reference](reference/assertions.md)
- [Test Fixtures](../primer.md#same-data-multiple-tests)
- [Running Test Programs - Advanced](../advanced.md#running-test-programs-advanced-options)


---

**Now you're equipped to create, build, and run your first tests with GoogleTest. Happy testing!**
