---
title: "Configuring Test Execution"
description: "Explore the available ways to run your tests, set test filtering, control output, and configure behavior via command line flags or configuration files. Learn about commonly used options to customize your test runs."
---

# Configuring Test Execution

Explore how to customize your GoogleTest runs by using command line flags and configuration files. This guide details the ways to run tests, apply filters, control output formatting, and adjust behavior to get precise, reliable test runs tailored to your needs.

---

## 1. Understanding the Execution Model

GoogleTest executes test suites and test cases based on configuration flags and filters provided either via command line or environment variables. Tests can be selected, repeated, shuffled, or disabled according to these settings.

> All configuration influences the flow of which tests run, in what order, and how results are reported.


## 2. Running Tests with Command Line Flags

GoogleTest supports rich command line flag options that affect test selection, execution, and output.

### 2.1 Basic Flags

- **`--gtest_list_tests`**
  - Lists all available tests without running them.

- **`--gtest_filter=POSITIVE_PATTERNS[-NEGATIVE_PATTERNS]`**
  - Runs only tests matching positive patterns and excludes those matching negative patterns.
  - Patterns use glob syntax:
    - `?` matches any single character
    - `*` matches any substring
    - `:` separates multiple patterns

  **Example:**
  ```bash
  ./my_test --gtest_filter=Math*:*Test-Disabled*  # Includes tests starting with "Math" or containing "Test", excluding those disabled.
  ```

- **`--gtest_also_run_disabled_tests`**
  - Runs tests marked disabled in addition to enabled tests.

### 2.2 Execution Control Flags

- **`--gtest_repeat=COUNT`**
  - Repeats each test `COUNT` times. A negative number means infinite repetitions.

- **`--gtest_shuffle`**
  - Randomizes the order of tests before running.

- **`--gtest_random_seed=SEED`**
  - Sets the seed for shuffling. Use 0 to seed based on current time.

- **`--gtest_fail_fast`**
  - Stops test execution immediately on first failure.

- **`--gtest_break_on_failure`**
  - Causes test failures to trigger debugger breakpoints.

- **`--gtest_throw_on_failure`**
  - Throws exceptions when assertions fail (useful with external frameworks).

### 2.3 Test Environment Flags

- **`--gtest_recreate_environments_when_repeating`**
  - If true, global test environments are recreated for each repeat iteration to avoid leaks.


## 3. Test Output Configuration

Customize the display and format of test results.

### 3.1 Output Verbosity and Color

- **`--gtest_color={yes|no|auto}`**
  - Enables/disables colored output. Default is `auto` (color if output is a terminal).

- **`--gtest_brief`**
  - Shows only test failures, suppressing normal success output.

- **`--gtest_print_time`**
  - Shows elapsed time for tests. Disable with `0`.

- **`--gtest_print_utf8`**
  - Enables UTF8 character printing in test messages.

### 3.2 Output Files and Formats

- **`--gtest_output=FORMAT[:PATH]`**
  - Generates test reports in `xml` or `json` format.
  - `PATH` can be a file or directory. If a directory ends with path separator, files will be placed inside with unique names.

  **Examples:**
  ```bash
  --gtest_output=xml:my_results/       # XML files in directory my_results
  --gtest_output=json:result.json      # JSON report to result.json
  ```

- Environment variables like `GTEST_OUTPUT` can also be used to specify format and output location.

### 3.3 Streaming Test Results

- **`--gtest_stream_result_to=HOST:PORT`**
  - Streams test results over TCP to the specified host and port.
  - Supported on Linux and macOS.


## 4. Advanced Test Filtering

### 4.1 Positive and Negative Filters

You can combine patterns to include or exclude tests:

```
--gtest_filter=PositivePattern1:PositivePattern2-NegativePattern1:NegativePattern2
```

Only tests matching any positive pattern and **not** matching any negative pattern run.


### 4.2 Disabling and Running Disabled Tests

Tests or test suites named starting with `DISABLED_` are excluded by default.

Use:

```
--gtest_also_run_disabled_tests
```

to override this behavior and run disabled tests as well.


## 5. Test Sharding and Parallel Execution

GoogleTest supports executing parts of the tests in shards (parallel subdivisions).

Set the environment variables:

- `GTEST_TOTAL_SHARDS` - total number of shards
- `GTEST_SHARD_INDEX` - current shard index (starting at 0)

GoogleTest will run only tests assigned to the current shard, distributing tests evenly.

Make sure to set both variables together. Incorrect or unset pairs will cause errors.


## 6. Sample User Workflow

<Steps>
<Step title="1. List available tests">
Run the executable with:

```bash
./my_test --gtest_list_tests
```
This will output all test suites and test names.
</Step>

<Step title="2. Filter test runs">
Run only math-related tests, excluding disabled ones:

```bash
./my_test --gtest_filter=Math* -DISABLED_*
```
</Step>

<Step title="3. Repeat and shuffle tests">
Run all tests 10 times in shuffled order:

```bash
./my_test --gtest_repeat=10 --gtest_shuffle
```
</Step>

<Step title="4. Generate an XML report">
Output results to a report directory:

```bash
./my_test --gtest_output=xml:reports/
```
</Step>

<Step title="5. Run subset with sharding">
Set environment variables and run a shard:

```bash
export GTEST_TOTAL_SHARDS=4
export GTEST_SHARD_INDEX=1
./my_test
```
</Step>
</Steps>


## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Problems With Test Execution">
<Accordion title="No Tests Run - Filter Mismatch or Sharding Issue">
Ensure your filter patterns match test names. Use `--gtest_list_tests` to confirm.
When sharding, confirm `GTEST_TOTAL_SHARDS` and `GTEST_SHARD_INDEX` are set properly.
</Accordion>

<Accordion title="Test Run Stops Immediately">
Check if `--gtest_fail_fast` is set. Remove the flag to allow all tests to run.
</Accordion>

<Accordion title="Color Output Not Working">
Verify terminal supports colors and `--gtest_color` is set to `auto` or `yes`.
On Windows, use an appropriate terminal or enable VT100 emulation.
</Accordion>

<Accordion title="Output File Not Generated">
Confirm that paths provided in `--gtest_output` exist or can be created.
Permissions issues could prevent file creation.
</Accordion>

<Accordion title="Test Repeating but Environments Not Reset">
If your tests require freshly set up environments each repeat, enable:

```
--gtest_recreate_environments_when_repeating
```

Otherwise, global setup runs once only.
</Accordion>
</AccordionGroup>


## 8. Additional Information

### Environment Variable Equivalents

Most flags have corresponding uppercase environment variables:

| Flag                            | Env Variable           |
|--------------------------------|-----------------------|
| `--gtest_color`                | `GTEST_COLOR`          |
| `--gtest_filter`               | `GTEST_FILTER`         |
| `--gtest_repeat`               | `GTEST_REPEAT`         |
| `--gtest_shuffle`              | `GTEST_SHUFFLE`        |
| `--gtest_output`               | `GTEST_OUTPUT`         |

Set either the flag or environment variable to control behavior.


### Configuration Files

GoogleTest supports reading flags from a `flagfile` specified by:

```
--gtest_flagfile=path/to/config.txt
```

This file contains one flag per line, facilitating complex configuration.


## 9. Summary Table of Common Flags

| Flag                        | Description                                     | Example                                    |
|-----------------------------|-------------------------------------------------|--------------------------------------------|
| `--gtest_list_tests`        | Lists all tests, does not run                    | `./my_test --gtest_list_tests`              |
| `--gtest_filter`            | Selectively runs tests matching filter           | `--gtest_filter=MySuite*`                    |
| `--gtest_repeat`            | Repeats tests `N` times                           | `--gtest_repeat=10`                          |
| `--gtest_shuffle`           | Shuffles test order                              | `--gtest_shuffle`                            |
| `--gtest_random_seed`       | Seed for shuffle (0 = current time-based seed) | `--gtest_random_seed=1234`                   |
| `--gtest_output`            | Output format and location (`xml` or `json`)    | `--gtest_output=xml:results/`                |
| `--gtest_color`             | Colorized output: yes, no, or auto               | `--gtest_color=yes`                           |
| `--gtest_fail_fast`         | Stops on first failure                           | `--gtest_fail_fast`                          |
| `--gtest_also_run_disabled_tests` | Runs disabled tests                         | `--gtest_also_run_disabled_tests`            |


---

## References

- Official flags syntax defined in [GoogleTest source: googletest/src/gtest.cc](https://github.com/google/googletest/blob/main/googletest/src/gtest.cc)
- Test suite and filtering overview: [Getting Started: Configuration Options](/getting-started/project-setup/configuration-options)
- Test execution API and configuration: [Test Configuration and Entrypoints](/api-reference/advanced-integration-extensibility/test-configuration-and-entrypoints)
- Test output formats and report generation


## Getting Help

For questions or issues, please consult the GoogleTest GitHub repository and community forums to find support and report problems.

---

<div align="center"><em>Happy Testing! Make every test run count.</em></div>

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "googletest/src/gtest.cc", "range": "10-1851"}]} />

