---
title: "Write and Run Your First Test"
description: "Follow a concise example to create your first GoogleTest-based unit test, compile it, and execute it to verify your test environment is fully functional from end to end."
---

# Write and Run Your First Test

Welcome to your first step into testing with GoogleTest! This guide shows you how to write a simple test, compile it, and run it to verify that your GoogleTest environment is set up correctly and fully functional.

---

## 1. Prerequisites & Setup

Before writing your first test, ensure you have the following:

- A C++17-compliant compiler (GCC, Clang, MSVC, etc.).
- GoogleTest properly installed and available to your build system; refer to the [System Requirements](https://google.github.io/googletest/getting-started/prerequisites-installation/system-requirements) and [Installation Guides](https://google.github.io/googletest/getting-started/prerequisites-installation/install-cmake) if needed.
- A project configured to link against the GoogleTest libraries. See [Configure Your Project](https://google.github.io/googletest/getting-started/basic-setup-first-test/configure-project) for a detailed explanation.


## 2. Writing Your First Test

GoogleTest organizes tests into test suites and individual tests. You write tests by creating C++ functions wrapped in the `TEST()` macro.

### Example: Simple Integer Test

```cpp
#include <gtest/gtest.h>

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

// Function to be tested (example implementation).
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}
```

### Key Points:

- `TEST(TestSuiteName, TestName)` defines a test function.
- Use assertions like `EXPECT_EQ` to verify expected outcomes.
- Each test runs independently.


## 3. Building the Test

To compile the test:

1. Save the code above in a `.cc` or `.cpp` file (e.g., `factorial_test.cc`).
2. Compile it with your compiler, linking against the GoogleTest and GoogleMock libraries.

Example compilation command using `g++`:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread \
    factorial_test.cc /path/to/libgtest.a /path/to/libgmock.a -o factorial_test
```

> Replace `/path/to/` with the actual paths on your system.

If using CMake or Bazel, refer to their respective install and configuration guides:
- [Install with CMake](https://google.github.io/googletest/getting-started/prerequisites-installation/install-cmake)
- [Install with Bazel](https://google.github.io/googletest/getting-started/prerequisites-installation/install-bazel)


## 4. Running Your Test

Execute your test binary:

```bash
./factorial_test
```

### What to Expect:

- The output shows each test's name and whether it passed or failed.
- At the end, you’ll see `PASSED` or details on failed tests.

Example output snippet:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```


## 5. Understanding Test Assertions

GoogleTest provides two categories of assertions:

- **`EXPECT_*`** (non-fatal): Records failure but continues test execution.
- **`ASSERT_*`** (fatal): Abort the current test function.

Use `EXPECT_*` for checking multiple conditions to gather all errors, and use `ASSERT_*` when continuation without a condition satisfied is meaningless.

Common Assertions:

| Macro         | Description                              |
| ------------- | -------------------------------------- |
| `EXPECT_EQ(a, b)` | Checks `a == b`                        |
| `EXPECT_NE(a, b)` | Checks `a != b`                        |
| `EXPECT_TRUE(cond)` | Checks `cond` is true                  |
| `ASSERT_FALSE(cond)` | Checks `cond` is false, abort on fail  |


## 6. Simplifying with gtest_main

GoogleTest provides a ready-made `main()` function in a separate library, `gtest_main`. Linking against it means you don't have to write your own `main()`.

If you need a custom `main()`, here’s a simple template:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```


## 7. Troubleshooting Common Issues

- **Linker errors**: Ensure you link against both `gtest` and `gtest_main` (or provide your own `main()`).
- **Tests not running**: Confirm that tests are compiled into the binary and the test runner is executed.
- **Compiler errors with C++ standards**: Check your compiler supports C++17 or later.
- **Missing pthread on Linux**: Link with `-pthread`.

See [Troubleshooting Common Issues](https://google.github.io/googletest/getting-started/troubleshooting-validation/common-issues) for more.

---

## 8. Next Steps

- Experiment with more assertions and test cases.
- Learn about test fixtures to reuse setup code: see [GoogleTest Primer - Test Fixtures](https://google.github.io/googletest/guides/primer.html#test-fixtures).
- Explore [Mocking with GoogleMock](https://google.github.io/googletest/gmock_for_dummies.html) to simulate dependencies.


---

**Happy Testing! Your journey to robust C++ code begins here.**


---

## References

- [GoogleTest Primer](https://google.github.io/googletest/guides/primer.html)
- [Configure Your Project](https://google.github.io/googletest/getting-started/basic-setup-first-test/configure-project)
- [gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)
- [Troubleshooting Common Issues](https://google.github.io/googletest/getting-started/troubleshooting-validation/common-issues)

<Callout type="tip">
Always keep your tests independent and use descriptive names for clarity.
</Callout>

<Callout type="note">
When your tests grow, consider using test fixtures and organizing tests into suites.
</Callout>

<Callout type="warning">
Do not ignore compiler or linker errors during setup - they usually indicate missing dependencies or configuration issues.
</Callout>
