---
title: "Common Setup Issues"
description: "Lists frequent installation, linking, and configuration obstacles with practical solutions. Includes errors, misconfigurations, and OS-specific gotchas to accelerate troubleshooting."
---

# Common Setup Issues

This page addresses frequent installation, linking, and configuration obstacles encountered when setting up GoogleTest. It offers practical solutions and workarounds for typical errors, misconfigurations, and operating system–specific nuances that may slow your development. Use this guide to quickly diagnose and fix common problems so you can focus on writing and running tests confidently.

---

## 1. Installation and Linking Problems

Getting GoogleTest built and linked correctly is the foundational step for successful testing. Below are common pitfalls and how to resolve them.

### 1.1 Missing or Incorrect Include Paths

**Problem**: Compiler cannot find `<gtest/gtest.h>` or related headers.

**Solution:**
1. Ensure the GoogleTest source directory is accessible.
2. When building your project, add the path to GoogleTest’s `googletest/include` directory to your compiler's include path.
3. If using CMake or Bazel, verify your build scripts specify GoogleTest as a dependency correctly (e.g., via `find_package(GTest REQUIRED)` or properly adding subdirectories).

<Tip>
Check your build system logs for missing header file errors and confirm relative or absolute paths to headers are set correctly.
</Tip>

### 1.2 Linking Errors (Undefined References)

**Problem**: Errors like `undefined reference to testing::Test::Run()` when linking.

**Solution:**
1. Confirm that the GoogleTest libraries (`libgtest.a`, `libgtest_main.a`, or their shared equivalents) are compiled and linked into your test executable.
2. If building GoogleTest manually, don’t forget to build the library first (e.g., run `make` inside the `build` directory).
3. When using CMake, link test targets against `GTest::gtest` and/or `GTest::gtest_main`.
4. For static libraries, ensure consistent runtime and compilation flags between GoogleTest and your tests (especially important on Windows).

<Warning>
Linking errors often arise from mixing static and shared runtimes or mismatched compiler flags.
</Warning>

### 1.3 Duplicate Symbol Errors

If you see errors about duplicate symbols for GoogleTest internals, it often means GoogleTest code is included multiple times or static/shared libraries conflict.

**Fix:**
- Avoid including GoogleTest source files multiple times manually.
- Prefer building and linking GoogleTest separately rather than compiling it directly into multiple targets.

### 1.4 Platform-Specific Gotchas

Some Operating Systems have quirks affecting GoogleTest setup.

- **Windows**: Visual Studio projects require consistent use of shared vs. static CRT. Use `gtest_force_shared_crt` CMake option to align SDL and GoogleTest CRT linkage.
- **Linux/macOS**: Pay attention to pthread requirements. GoogleTest uses pthreads for thread safety. Make sure to link with `-pthread` or equivalent.

<Note>
Refer to the [Platform-specific Notes](/getting-started/installation/platform-specific-notes) page for detailed instructions related to your OS.
</Note>

---

## 2. Running Tests and Configuration Issues

After building, you may face common runtime setup problems.

### 2.1 Tests Not Discovered or Executed

**Symptoms:**
- The test executable runs but reports "0 tests run".

**Causes & Fixes:**
- Verify that your test binary is correctly linked to GoogleTest and contains test definitions.
- Confirm that you called `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
- Ensure test macros `TEST()`, `TEST_F()`, or registrations are correctly used.
- If using parameterized tests, ensure `INSTANTIATE_TEST_SUITE_P` macros have been called.

### 2.2 Incorrect Test Filtering

GoogleTest supports running subsets of tests using `--gtest_filter`.

**Tip:**
- Verify your filter patterns and excludes.
- Use `--gtest_list_tests` to see available tests.

### 2.3 Configuration File Issues

If you use a configuration file or environment variables for GoogleTest flags, check for typo errors and conflicts.

### 2.4 Global Setup and Teardown Failures

If you define global test environments through `::testing::Environment` subclasses, failures in their `SetUp()` or `TearDown()` can halt tests or emit errors.

**Tip:**
- Use the log output to identify failures in global setups or teardowns.
- Remember that fatal failures in global setup prevent tests from running.

### 2.5 Test Fixture Setup Failures

`SetUpTestSuite()`, `TearDownTestSuite()`, `SetUp()`, and `TearDown()` can emit failures.

- Fatal failures in `SetUpTestSuite()` or `SetUp()` abort the test fixture setup, preventing tests from running.
- Use ASSERT_* macros carefully in these methods (prefer `ADD_FAILURE()` for nonfatal).

<Warning>
The test suite lifecycle enforces that a fatal failure during setup aborts the suite’s tests.
</Warning>

---

## 3. Common Runtime Errors and Debugging Tips

### 3.1 Fatal vs Nonfatal Failures

Understand that `ASSERT_*` macros generate fatal failures, aborting the current function. This can leave partially constructed objects. Use `EXPECT_*` to log failures but continue.

Use `SCOPED_TRACE()` to add context to failures in subroutines.

Example:

```cpp
SCOPED_TRACE("Check value in iteration " << i);
EXPECT_EQ(expected_value, actual_value);
```

### 3.2 Assertion Macro Usage Errors

- Avoid using `ASSERT_*` in constructors or destructors as they require void-returning functions.
- Instead, use `SetUp()` and `TearDown()` for initialization and cleanup.

### 3.3 Multi-threading Issues

- GoogleTest is thread-safe on POSIX systems if pthread is available.
- On Windows, assertions from multiple threads are discouraged and may cause errors.
- Set `-DGTEST_HAS_PTHREAD=1` if autodetection fails on your platform.

---

## 4. Troubleshooting Checklist

Use this checklist when encountering setup problems:

- [ ] Verify you meet the [System Requirements](/getting-started/setup-overview/system-requirements).
- [ ] Ensure your compiler supports C++17.
- [ ] Confirm GoogleTest sources or libraries are correctly included and linked.
- [ ] Run a minimal example test to isolate problems.
- [ ] Check for build and runtime flags correctness, e.g., `-pthread` on Linux.
- [ ] On Windows, review CRT linkage options (`gtest_force_shared_crt`).
- [ ] Use verbose logging or `--gtest_print_time` to gain insights.

---

## 5. Helpful Commands and Examples

### 5.1 Compilation with CMake

```bash
mkdir build && cd build
cmake .. -DBUILD_GMOCK=OFF  # Optional to skip GoogleMock
make
```

This builds GoogleTest libraries.

### 5.2 Linking Test Executable (Example with g++)

```bash
g++ -std=c++17 -pthread example_test.cpp -lgtest -lgtest_main -o example_test
./example_test
```

### 5.3 Sample Minimal Test Code

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1, 1);
  ASSERT_TRUE(true);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run the above to verify your setup.

---

## 6. Where to Get Help

If problems persist beyond this page’s scope, consult:

- [System Requirements](/getting-started/setup-overview/system-requirements)
- [Prerequisites](/getting-started/setup-overview/prerequisites)
- [Installation Guides (CMake & Bazel)](/getting-started/installation/installation-cmake)
- [Platform-specific Notes](/getting-started/installation/platform-specific-notes)
- [GoogleTest Primer](docs/primer.md) for conceptional understanding
- [Getting Help & Further Resources](/getting-started/support/finding-help)

<Tip>
Open an issue or ask in community forums with full build logs and environment details to expedite support.
</Tip>

---

*This page evolves as GoogleTest improves. Check back after upgrades for new tips or changed behaviors.*

---

<Source url="https://github.com/google/googletest" paths={[{"path": "googletest/README.md", "range": "1-165"},{"path": "docs/primer.md", "range": "1-260"},{"path": "docs/advanced.md", "range": "1-524"},{"path": "docs/reference/assertions.md", "range": "1-290"},{"path": "getting-started/installation/platform-specific-notes.mdx", "range": "all"}]} branch="main" />
