---
title: "Installation: Platform-Specific Instructions"
description: "Step-by-step guides for installing GoogleTest and GoogleMock using supported build systems (CMake and Bazel), tailored for Linux, macOS, and Windows. Includes verification tips and a summary of key installation files."
---

# Installation: Platform-Specific Instructions

This guide delivers step-by-step instructions for installing **GoogleTest** and **GoogleMock** on Linux, macOS, and Windows platforms using the supported build systems: **CMake** and **Bazel**. It includes verification tips to confirm a successful setup and highlights key installation files.

---

## 1. Prerequisites & System Requirements

- **C++ Compiler**: Ensure you have a compiler supporting **C++17** or higher, such as GCC 7+, Clang 5+, or MSVC 2017 Update 3 or above.
- **Build Systems**: Depending on your preference, install one or both:
  - [CMake](https://cmake.org/) (minimum version 3.14 is recommended)
  - Bazel (if using Bazel-based builds)
- **Network Access**: Required for cloning repositories and downloading dependencies during the build.
- **Permissions**: Administrator or sudo access may be needed to install system-wide.

<Tip>
Verify your compiler supports C++17 by running `g++ --version` or `clang++ --version`. GoogleTest requires this standard to build correctly.
</Tip>

---

## 2. Installing GoogleTest & GoogleMock Using CMake

### 2.1 Cloning the Repository

Open a terminal or command prompt and clone the GoogleTest repository:

```bash
# Clone the GoogleTest repository at a stable version (example: v1.17.0)
git clone https://github.com/google/googletest.git -b v1.17.0
down googletest
```

### 2.2 Building as a Standalone Project

1. Navigate to the main cloned directory:

```bash
cd googletest
```

2. Create and enter a build directory to keep artifacts separate:

```bash
mkdir build
cd build
```

3. Generate native build files:

- **To build both GoogleTest and GoogleMock (default):**
  ```bash
  cmake ..
  ```

- **To build only GoogleTest (omit GoogleMock):**
  ```bash
  cmake .. -DBUILD_GMOCK=OFF
  ```

4. Build the libraries:

- On Linux/macOS:
  ```bash
  make
  sudo make install  # Installs to /usr/local/ by default
  ```

- On Windows:
  - Open the generated `gtest.sln` solution file in Visual Studio.
  - Build the solution using your preferred configuration (Debug/Release).

- On macOS with Xcode:
  - Open the `.xcodeproj` file generated in the build directory.
  - Build the project.

### 2.3 Verifying the Installation

- Confirm that the libraries and headers are available in the expected installation directories (e.g., `/usr/local/lib`, `/usr/local/include/gtest`).
- Run sample tests or link a test project against `gtest` and `gmock` libraries to ensure proper linkage.

<Tip>
If you get linker errors on Windows about mismatched runtimes (e.g., `RuntimeLibrary` mismatch), enable dynamic CRT linking in your CMake command:

```bash
cmake .. -Dgtest_force_shared_crt=ON
```

This aligns GoogleTest's runtime with your Visual Studio project settings.
</Tip>

---

## 3. Integrating GoogleTest into an Existing CMake Project

You have two primary ways to use GoogleTest within your own CMake project:

### 3.1 Using Installed Libraries

After installing GoogleTest, find the package in your `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(my_test test_main.cpp)
target_link_libraries(my_test GTest::gtest GTest::gmock GTest::gtest_main)
add_test(NAME my_test COMMAND my_test)
```

This method requires GoogleTest to be installed and discoverable on your system.

### 3.2 Building GoogleTest as a Subdirectory

To build GoogleTest as part of your project (recommended for consistent compiler settings):

Add this snippet to your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows: align CRT linkage
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

# Link your test executable against gtest_main
add_executable(example example.cpp)
target_link_libraries(example gtest_main)
add_test(NAME example_test COMMAND example)
```

Note: This requires CMake 3.14 or above.

---

## 4. Installing GoogleTest & GoogleMock Using Bazel

If you prefer Bazel as your build system, GoogleTest and GoogleMock are available as Bazel targets within their workspace.

### 4.1 Adding GoogleTest as a Dependency

In your `WORKSPACE` file, include the following:

```bazel
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.17.0.tar.gz"],
    strip_prefix = "googletest-release-1.17.0",
)
```

### 4.2 Referencing in BUILD Files

In your Bazel `BUILD` files, declare your test binary and link against GoogleTest:

```bazel
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gtest_main"],
)
```

### 4.3 Building and Running Tests

Run:

```bash
bazel test //path/to:my_test
```

This will build and run your GoogleTest-based tests within the Bazel environment.

---

## 5. Verification and Testing Your Installation

To ensure your installation is successful and GoogleTest is operational:

1. **Sample Test Program**

Create a minimal test file `example.cpp`:

```c++
#include <gtest/gtest.h>

TEST(SampleTest, Addition) {
  EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. **Build and Run**

- Using CMake subdirectory method:
  ```bash
  cmake -S . -B build
  cmake --build build
  ./build/example
  ```

- Using Bazel method:
  ```bash
  bazel test //:my_test
  ```

3. **Expected Result**

You should see output indicating that the test passed, such as:

```plaintext
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SampleTest
[ RUN      ] SampleTest.Addition
[       OK ] SampleTest.Addition (0 ms)
[----------] 1 test from SampleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
```

<Tip>
If this test fails to compile or link, verify that your include paths and library paths are correctly set up, and that you are linking against `gtest` and `gmock` properly.
</Tip>

---

## 6. Summary of Key Installation Files

| File                   | Purpose                         |
|------------------------|--------------------------------|
| `CMakeLists.txt`       | Primary CMake build script provided by GoogleTest for building/test integration |
| `googletest/include/gtest/gtest.h` | Main header providing GoogleTest's API interface |
| `googlemock/include/gmock/gmock.h` | Main header for GoogleMock API |
| `gtest.sln` / `.xcodeproj` | IDE project files generated by CMake for Windows and macOS respectively |
| `BUILD` files (Bazel)          | Bazel build definitions for test targets |
| `example.cpp` (user-created)  | Minimal test source code for validation |

---

## Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Tips">
<Accordion title="Linker Errors on Windows">
Check if the C runtime linkage matches between your project and GoogleTest. Use the CMake flag `-Dgtest_force_shared_crt=ON` to align.
</Accordion>
<Accordion title="C++17 Support Missing">
Ensure your compiler supports C++17 by verifying compiler version and flags.
</Accordion>
<Accordion title="Bazel Not Finding GoogleTest"
>
Verify the `http_archive` URL and `strip_prefix` in your `WORKSPACE` file match the GoogleTest version.
</Accordion>
<Accordion title="Makefile Not Generated">
Ensure you're running CMake from the build directory and that CMake is correctly installed.
</Accordion>
</AccordionGroup>

---

# Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [CMake Official Site](https://cmake.org/)
- [GoogleTest Primer & Writing Tests](https://github.com/google/googletest/blob/main/docs/primer.md)
- [Integration with Build Systems & Tools](../../overview/architecture_and_integration/integration_points.md)
- [Troubleshooting Installation Issues](../../getting-started/first-run-validation/troubleshooting-common-issues.md)

---

Successful installation unlocks the power of cross-platform C++ testing. Following these steps ensures GoogleTest & GoogleMock build, integrate, and run smoothly on your platform.