---
title: "Troubleshooting & Quick Validation"
description: "Solutions for common setup and usage issues, along with checklist-style validation steps to quickly confirm your environment is working as expected. Early troubleshooting boosts confidence and helps you move forward rapidly."
---

# Troubleshooting & Quick Validation

GoogleTest's success hinges on smooth installation, configuration, and usage. This page equips you to swiftly diagnose common setup or usage problems, and verify your environment’s readiness with checklist-style validation. Addressing early issues rapidly builds confidence, helping you move forward without interruption.

---

## 1. Quick Validation Checklist
Use this checklist to confirm your GoogleTest setup is functional and your environment meets basic expectations.

- **Installation Verification**
  - Run `ctest` or your build system’s test command after building GoogleTest to confirm basic build success.
  - Execute sample tests, such as the included GoogleTest example suite.

- **Environment Compatibility**
  - Verify your compiler supports C++17 or later.
  - Confirm threading support and standard library features are available.

- **Mocking Functionality Check**
  - Write or run a simple mock test using `MOCK_METHOD` and `EXPECT_CALL`.
  - Validate the mock verifies calls and fails on unmet expectations.

- **Test Execution**
  - Run your first basic test using the `TEST` macro.
  - Check that expected results and failures appear as intended.

- **Verbosity and Logging**
  - Test setting verbosity flags (`--gmock_verbose`) to control output level.
  - Use `--gmock_verbose=info` to get detailed mock call traces for troubleshooting.


<Tip>
Make early validation simple: start with the official sample tests, then gradually add mocks and your own tests.
</Tip>

---

## 2. Common Issues and Solutions
Here are frequent problems users encounter during setup and usage, along with actionable solutions.

### Problem: Mock Methods Not Being Called or Verified
**Symptom:** Tests pass even though mock methods expected to be called are not invoked.

**Cause:** Mock object was not destroyed or expectations were not set before exercising code.

**Solution:**
1. Ensure `EXPECT_CALL` statements appear before code invocation.
2. Confirm mock objects are destructed, triggering verification (e.g., avoid leaking mocks).
3. If mocks are heap-allocated and owned externally, use `Mock::VerifyAndClearExpectations(&mock)` to enforce validation early.

### Problem: "Uninteresting Mock Function Call" Warning
**Symptom:** Console shows warnings about calls made on mock methods without corresponding expectations.

**Cause:** Calls to mock methods with no `EXPECT_CALL` set, which is naggy by default.

**Solution:**
1. Add an `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` if calls are intended but not specifically checked.
2. Use `NiceMock<YourMock>` to suppress such warnings when uninteresting calls are expected.
3. Control verbosity via `--gmock_verbose=error` to suppress warnings if sure calls are valid.

<Warning>
Suppressing warnings blindly can hide unintended issues. Prefer explicit expectations or nice mocks.
</Warning>

### Problem: Mismatched Function Signatures or Missing Virtual Destructors
**Symptom:** Compiler warnings or runtime issues such as leaks and undefined behavior.

**Cause:** Base classes mock methods must be virtual; destructors must be virtual to ensure proper cleanup.

**Solution:**
1. Verify that all mocked methods, especially destructors, are declared `virtual`.
2. Fix base interfaces/classes accordingly before mocking.

### Problem: Incorrect Call Order Errors
**Symptom:** Failures stating that calls happened out of expected order.

**Cause:** `EXPECT_CALL` order or sequencing constraints not aligned with actual calls.

**Solution:**
1. Use `InSequence` RAII blocks to enforce strict call order when needed.
2. Use `After()` clauses to specify dependencies on other expectations.
3. Review call sequence and update expectations accordingly.

### Problem: Compilation Slowdowns with Large Mock Classes
**Symptom:** Building tests with mocks is slow or exhausts memory.

**Cause:** Mock class constructors and destructors are generated inline leading to heavy compilation.

**Solution:**
1. Declare mock class constructors and destructors separately in header.
2. Define them in `.cc` files to reduce compiler load.

---

## 3. Troubleshooting Steps
When encountering issues, follow this pragmatic path to resolution:

<Steps>
<Step title="Confirm Environment and Compiler">
Verify your compiler version meets GoogleTest’s minimum requirements (C++17 support).
</Step>
<Step title="Run Included Sample Tests">
Build and execute GoogleTest’s sample tests. Failures here indicate environmental issues.
</Step>
<Step title="Increase Verbosity for Insight">
Run tests with `--gmock_verbose=info` to see detailed mock call traces. This helps diagnose expectation mismatches or unexpected calls.
</Step>
<Step title="Isolate Problematic Mocks">
Temporarily simplify tests to minimal mocks and expectations to detect where failure occurs.
</Step>
<Step title="Validate Mock Class Definitions">
Check that all mocked methods are properly declared with `MOCK_METHOD` macros and match base class methods.
</Step>
<Step title="Use GoogleTest Failures for Clues">
Read error messages carefully: they indicate missing calls, unexpected calls, or over-call issues with argument details.
</Step>
</Steps>

<Tip>
Use `NiceMock` during early test development to reduce noise from uninteresting call warnings.
</Tip>

---

## 4. Best Practices and Tips

- Always set expectations **before** exercising code that uses mocks.
- Avoid mocking non-virtual methods unless using advanced dependency injection techniques.
- Use `RetiresOnSaturation()` on expectations when multiple similar calls are possible with capped counts.
- Place expectational sequences inside `InSequence` scope to enforce call ordering clearly.
- Manage mock lifespan carefully to ensure automatic verification upon destruction.
- Use `ON_CALL` to set default actions while reserving `EXPECT_CALL` for verification.

---

## 5. Useful Validation Code Snippets

Example of a basic mock and expectation to verify your mocking setup:

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

class Foo {
 public:
  virtual ~Foo() {}
  virtual int GetValue() const = 0;
  virtual void SetValue(int v) = 0;
};

class MockFoo : public Foo {
 public:
  MOCK_METHOD(int, GetValue, (), (const, override));
  MOCK_METHOD(void, SetValue, (int), (override));
};

TEST(MockValidationTest, BasicExpectCall) {
  MockFoo mock;
  EXPECT_CALL(mock, SetValue(5)).Times(1);
  EXPECT_CALL(mock, GetValue()).WillOnce(testing::Return(5));

  mock.SetValue(5);
  int val = mock.GetValue();
  EXPECT_EQ(val, 5);
}
```

If the above test passes and respects the expectations, your mocking setup works correctly.

---

## 6. Getting Further Help

If problems persist:

- Consult the detailed **[gMock for Dummies](https://google.github.io/googletest/gmock_for_dummies.html)** guide for foundational concepts.
- Review the **[gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)** for advanced mock usage and troubleshooting.
- Check the **[Mocking Reference](docs/reference/mocking.md)** for API specifics and common idioms.
- Explore the community-created documentation and resources for user-shared tips.

Reach out to the community or check issue trackers if you suspect bugs or need extended support.

---

## 7. Summary
This page provided practical troubleshooting guidance and quick validation steps to confirm GoogleTest and GoogleMock installation and configuration are successful. It covered common issues, diagnosis workflows, example validation code, and recommended best practices to prevent failures and warnings. Early troubleshooting enables rapid progress from setup to writing effective tests with confidence.

---