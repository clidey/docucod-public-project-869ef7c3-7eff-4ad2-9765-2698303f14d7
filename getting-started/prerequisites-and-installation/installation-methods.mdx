---
title: "Installation Methods (CMake, Bazel, Manual)"
description: "Step-by-step instructions for installing GoogleTest and GoogleMock using CMake, Bazel, and manual methods. Detailed examples for each method assist users in selecting the approach best suited for their workflow."
---

# Installation Methods (CMake, Bazel, Manual)

This guide walks you through installing GoogleTest and GoogleMock using three common methods: CMake, Bazel, and manual integration. Choose the method that best fits your development environment and workflow.

---

## 1. Installing with CMake

GoogleTest and GoogleMock support native CMake integration, making it seamless to add testing to your C++ projects.

### Step-by-Step Instructions

1. **Download or clone GoogleTest sources:**

   ```bash
   git clone https://github.com/google/googletest.git
   cd googletest
   ```

2. **Create a build directory:**

   ```bash
   mkdir build && cd build
   ```

3. **Configure your build with CMake:**

   ```bash
   cmake ..
   ```

   This will configure your build environment and prepare the build files.

4. **Build the libraries:**

   ```bash
   cmake --build . --config Release
   ```

   This compiles both GoogleTest and GoogleMock libraries.

5. **(Optional) Install:**

   ```bash
   cmake --install .
   ```

   Installs libraries and headers to the default system locations or to the prefix specified by `CMAKE_INSTALL_PREFIX`.

### Using GoogleTest & GoogleMock in Your Project with CMake

Add the following to your project's `CMakeLists.txt`:

```cmake
# Enable testing
enable_testing()

# Add googletest as a subdirectory
add_subdirectory(path/to/googletest)

# Link your test executable with gtest & gmock
add_executable(my_tests test_file.cc)
target_link_libraries(my_tests gtest gmock_main)

# Register tests
add_test(NAME MyTests COMMAND my_tests)
```

Replace `path/to/googletest` with the actual path.

### Verification

Run your test executable:

```bash
./my_tests
```

You should see output confirming that tests ran, e.g., `PASSED` or details on failures.

### Troubleshooting

- **CMake version:** Ensure CMake is version 3.10 or higher.
- **Conflicts between system and local installs:** Remove old versions or specify `CMAKE_PREFIX_PATH`.
- **Build failures:** Check compiler compatibility and that required build tools are installed.

---

## 2. Installing with Bazel

Bazel users can integrate GoogleTest/GoogleMock easily as part of their build configuration.

### Step-by-Step Instructions

1. **Add googletest as an external workspace** in your `WORKSPACE` file:

```plaintext
http_archive(
    name = "com_google_googletest",
    urls = ["https://github.com/google/googletest/archive/release-1.12.1.tar.gz"],
    strip_prefix = "googletest-release-1.12.1",
    sha256 = "ad30a66af360b2a1d62a6615e96ff3bd5214b4dd1f20beafecd687a3fb0b941c",
)
```

2. **Load the GoogleTest repository in your `BUILD` files:**

```python
load("@com_google_googletest//:bazel/mock.bzl", "gmock", "gtest")
```

3. **Define your test target linking against gtest and gmock:**

```python
cc_test(
    name = "my_test",
    srcs = ["my_test.cc"],
    deps = ["@com_google_googletest//:gmock_main"],
)
```

4. **Build and run your tests:**

```bash
bazel test //path/to:my_test
```

### Verification

Bazel will execute your tests and show success or failure summaries.

### Troubleshooting

- **Version mismatches:** Use the latest or compatible googletest Bazel release.
- **Repository not found:** Confirm your `WORKSPACE` URL and checksum.
- **Build errors:** Use `bazel clean` and update Bazel rules if needed.

---

## 3. Manual Installation

If you prefer manual integration without build system automation, follow these instructions.

### Step-by-Step Instructions

1. **Download the source:**

   ```bash
   git clone https://github.com/google/googletest.git
   cd googletest
   ```

2. **Copy headers:**

   Copy the `googletest/include/gtest` and `googlemock/include/gmock` directories to your project's include path or a global include directory.

3. **Build libraries manually:**

   You can either build static libraries or add source files directly.

   - To build with **Make**:

     ```bash
     cd googletest
     make
     ```

     This produces static libraries like `libgtest.a` and `libgmock.a`.

4. **Link your test executable:**

   Add the compiled libraries and include paths in your linker and compiler flags:

   ```bash
   g++ -isystem path/to/googletest/include -isystem path/to/googlemock/include \
       -pthread path/to/test_file.cc path/to/libgtest.a path/to/libgmock.a -o my_tests
   ```

5. **Run your tests:**

   ```bash
   ./my_tests
   ```

   Expect to see the results of your test suite.

### Verification

Your test executable should run and report test results. If you see linking errors, verify library paths and compilation flags.

### Troubleshooting

- **Missing pthread:** GoogleTest requires threading support; ensure `-pthread` is used.
- **Incompatible compiler flags:** Make sure the compiler options for your project and GoogleTest match, especially C++ version (`-std=c++17` or later).
- **Linker errors:** Confirm library order and paths.

---

## Additional Tips and Best Practices

- Use the `gmock_main` library if you want GoogleMock to provide the `main()` function automatically.
- For complex projects, prefer CMake or Bazel to manage dependencies and builds.
- Always verify your environment meets the [System Requirements & Supported Platforms](system-requirements.md).
- Refer to [Configuring Your Project](project-setup.md) after installation to set up your test environment correctly.

---

## Getting Help

If you encounter problems during installation, consult the [Troubleshooting Installation & Build Problems](troubleshooting-setup.md) page or get community support listed at [Getting Help and Next Steps](community-and-next-steps.md).

---

## Summary

Installation methods for GoogleTest and GoogleMock are versatile to support diverse workflows. The CMake method is recommended for most users due to ease of integration, Bazel suits those in Bazel-based projects, while manual installation empowers fine-grained control.

Refer to this guide according to your preferences and environment to get your testing framework up and running efficiently.

---

_For the latest versions and source, visit [GoogleTest GitHub Repository](https://github.com/google/googletest)_
