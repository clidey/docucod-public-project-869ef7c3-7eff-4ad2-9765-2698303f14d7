---
title: "Troubleshooting Installation & Configuration"
description: "Lists and addresses frequent installation and configuration problems across platforms with solutions for linker errors, missing headers, and environment mismatches."
---

# Troubleshooting Installation & Configuration

This page addresses frequent installation and configuration problems encountered across platforms while setting up GoogleTest and GoogleMock. It provides clear solutions to common issues such as linker errors, missing headers, and environment mismatches that may arise during initial setup.

---

## 1. Common Installation Issues

### Linker Errors: Symbols Not Found

**Symptoms:**
- Compilation succeeds but linking fails with errors referring to missing symbols from GoogleTest or GoogleMock.

**Causes and Solutions:**
- **GoogleMock Not Linked:** GoogleMock requires linking with its static or shared library separately from GoogleTest. Ensure your build links against both `gmock` and `gmock_main` libraries if using the default main.

**How to fix:**
- In CMake, add `target_link_libraries(your_test_target gmock gmock_main)`.
- In Bazel, use `cc_test` with `googletest` and `googlemock` as dependencies.

- **Order of Linking:** Especially on some platforms (Linux, macOS), the order of linked libraries matters. Place `gmock` and `gmock_main` after your objects requiring mocking.

- **Incorrect or Missing gmock_main:** If you use the default `main()` supplied by GoogleMock (`gmock_main`), make sure it is linked. Alternatively, provide your own `main()` but that needs to call `testing::InitGoogleMock()`.


### Missing Headers (
`#include <gmock/gmock.h>` or `<gtest/gtest.h>` Fails)

**Symptoms:**
- Compilation fails claiming it cannot find `gmock.h` or `gtest.h`.

**Causes and Solutions:**
- **Incorrect Include Path:** Your build system does not have the appropriate include directories for GoogleTest/GoogleMock headers.

- **Header Location:** GoogleMock headers are under `googlemock/include/gmock/` and GoogleTest under `googletest/include/gtest/` inside the package.

**How to fix:**
- Add the GoogleTest and GoogleMock include directories to your compiler include path.
- For CMake, use `target_include_directories(your_target PRIVATE ${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)`


### Environment Mismatches and Compiler Issues

**Symptoms:**
- Compilation fails with cryptic errors, sometimes relating to `const` qualifiers or template errors.

**Common Cause:**
- GoogleMock depends on C++17 features. Using older compilers or incorrect standard settings can lead to failures.

**How to fix:**
- Ensure your compiler supports C++17 or later. For example, GCC 7+, Clang 5+, MSVC 2017 update 15.7+.
- Explicitly specify `-std=c++17` (or `/std:c++17` for MSVC) in your build settings.


## 2. Platform-Specific Notes

### Windows (MSVC)

- MSVC has specific warning behaviors around `const` parameters. GoogleMock recommends removing redundant top-level `const` from parameters to avoid warnings C4301 or C4373.
- If you encounter linker errors related to `_tmain`, ensure you link against `gmock_main` or provide your own `main()`.


### Linux/macOS

- Linker issues often stem from library order or missing dependencies such as `pthread`. Check that your linker includes `-lpthread` if needed.
- If you build GoogleTest/GoogleMock from source, confirm that the installation path is added correctly.


## 3. Configuration Errors

### Incompatible Versions or Change of API

If errors mention missing symbols or changes not accounted for, verify:
- You are using compatible versions of GoogleTest and GoogleMock.
- Your test code matches the GoogleMock API, for example using the correct `MOCK_METHOD` macros.


## 4. Debugging Tips

### Enable Verbose Logging

Run tests with the flag `--gmock_verbose=info` to get detailed traces of mock function calls. This helps in diagnosing unmet expectations or unexpected calls.


### Enabling Leak Detection

Ensure `--gmock_catch_leaked_mocks=1` is active (default) to catch leaked mock objects which may indicate improper test teardown or setup issues.


### Use Provided Sample Tests

Start with running the sample tests included in GoogleMock's repository, such as `gmock_output_test_.cc` or `gmock-spec-builders_test.cc`. Passing these confirms your setup correctness.


## 5. Common Pitfalls and How to Avoid Them

<AccordionGroup title="Common Pitfalls and Solutions">
<Accordion title="Expectations Set After Mock Usage">
Setting expectations (`EXPECT_CALL`) after calling mock methods leads to undefined behavior and failures.

**Solution:**
Always set expectations before exercising mock objects.
</Accordion>
<Accordion title="Uninteresting Calls Warning">
When mock methods are called without any `EXPECT_CALL`, gMock warns by default.

**Solution:**
If intentional, suppress warnings by using `NiceMock<YourMockClass>` or add appropriate `EXPECT_CALL(...).Times(AnyNumber())` to express expected uninteresting calls.
</Accordion>
<Accordion title="Link Order Incorrect in Linker">
Linking order matters; putting the GoogleMock libraries before your objects leads to missing symbol errors.

**Solution:**
Place `gmock` and `gmock_main` libraries after your test object files in the linker command.
</Accordion>
<Accordion title="Incorrect Flags or Compilers">
Unsupported or missing C++17 flags cause compilation errors.

**Solution:**
Verify compiler compatibility and ensure you pass `-std=c++17` or equivalent.
</Accordion>
</AccordionGroup>


## 6. Verification and Reset

You can manually verify and clear mock expectations using:

```cpp
::testing::Mock::VerifyAndClearExpectations(&mock_object);
::testing::Mock::VerifyAndClear(&mock_object);  // Clears default actions too
```

Use these in complex test setups where mocks persist longer or are managed externally.


## 7. Additional Resources

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html) — for detailed usage recipes
- [Legacy gMock FAQ](https://google.github.io/googletest/gmock_faq.html) — for troubleshooting specific issues
- [Mock Behavior & Strictness](api_reference/mocking_api/mock_behaviors_and_strategies) — for controlling mock warning and error behaviors
- [Getting Started: Installation Instructions](/getting-started/prerequisites-installation/installation-instructions) — for full installation steps and prerequisites


---

For any roadblocks outside these solutions, ensure your build environment follows system requirements ([System Requirements & Supported Platforms](/getting-started/prerequisites-installation/system-requirements)) and consult the community resources or open an issue on the GitHub repository.

<Check>
You have now the essential troubleshooting steps to resolve common installation and configuration problems and successfully set up your GoogleTest and GoogleMock environment.
</Check>