---
title: "Troubleshooting Common Installation Issues"
description: "Quick solutions to frequent setup and build problems—such as missing headers, linker errors, or environment mismatches—so users can quickly resolve roadblocks and start testing."
---

# Troubleshooting Common Installation Issues

Quick solutions to frequent setup and build problems—such as missing headers, linker errors, or environment mismatches—so you can quickly resolve roadblocks and start testing.

---

## 1. Introduction

Installation issues can be a frustrating first hurdle when getting started with GoogleTest or GoogleMock. This guide focuses specifically on common problems that block setup or build processes and offers practical fixes so you can get to writing and running tests immediately.

Typical issues include missing header files, linker errors, misconfigured environment variables, and incompatible compiler settings. We provide targeted solutions based only on the official GoogleTest context and related documentation sources.

---

## 2. Common Installation Problems and Their Fixes

### 2.1 Missing Headers (`gtest/gtest.h` or `gmock/gmock.h`)

#### Cause

- The include directories for GoogleTest or GoogleMock are not correctly specified in your compiler or build system.
- You may be trying to build tests without having downloaded or referenced the GoogleTest source code properly.

#### Resolution Steps

1. **Verify that the GoogleTest source code is obtained and accessible:**
   - Confirm that you've cloned or downloaded GoogleTest correctly.
   - Ensure your project’s include paths point to the appropriate directories containing `gtest` and `gmock` headers.

2. **Configure your build system to include GoogleTest headers:**
   - For CMake, add `target_include_directories(your_target PRIVATE path/to/googletest/include)`.
   - For Bazel, declare proper dependencies to `@com_google_googletest//:gtest_main` or appropriate targets.

3. **Double-check include directives in your source files:** Use `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>`, not relative paths.

#### Tips

- Use the provided CMake or Bazel build targets as they ensure include paths and dependencies are properly set.
- Confirm that `gmock` is bundled with GoogleTest in your source tree, so you should not need separate downloads.

---

### 2.2 Linker Errors Related to GoogleTest or GoogleMock

#### Cause

- GoogleTest or GoogleMock libraries are not linked to your test executable.
- Mixing `gtest` and `gtest_main` incorrectly, or missing `gtest_main` which provides the default `main()`.

#### Resolution Steps

1. **Link against `gtest` and optionally `gtest_main` libraries:**
   - If you use GoogleMock, also link `gmock` and its `gmock_main` if using the default `main()`.

2. **If you write your own `main()` function:**
   - Link only against `gtest` and `gmock` libraries without `gtest_main` or `gmock_main`.
   - Ensure your custom `main()` calls `testing::InitGoogleTest()` and returns `RUN_ALL_TESTS()`, as shown in the [GoogleTest Primer](docs/primer.md) sample.

3. **Uphold consistent runtime libraries:**
   - On Windows, linking with mismatched runtime libraries between your application and GoogleTest can cause link errors.

#### Verification

- Your test executable should link cleanly without unresolved external symbols related to GoogleTest or GoogleMock.
- The executable should print something like `Running main() from gmock_main.cc` when started if linked against the default main.

---

### 2.3 Environment and Compiler Compatibility Issues

#### Cause

- Compiler does not support C++17 or higher, required by GoogleTest.
- Using incompatible compiler flags or outdated compiler versions.
- Missing standard library support for exceptions, RTTI, or regex, which GoogleTest depends on.

#### Resolution Steps

1. **Confirm C++17 compatibility:**
   - Check your compiler version and flag settings. Use `-std=c++17` or equivalent.

2. **Review GoogleTest system requirements:**
   - Supported OSes: Linux, Windows, Mac.
   - Supported compilers and versions can be found in the Getting Started System Requirements documentation.

3. **Check that threading and exceptions are enabled:**
   - GoogleTest requires thread safety and exception support.

4. **Address Windows-specific runtime conflicts:**
   - Make sure you use compatible MSVC runtime libraries across all linked components.

---

### 2.4 Build Configuration Mistakes

#### Cause

- Wrong macros or flags used that disable essential GoogleTest features.
- Incorrect dependency declarations causing partial or missing builds.

#### Resolution Steps

1. **Use provided CMakeLists.txt or Bazel BUILD files directly:**
   - Avoid creating your own complex build rules for GoogleTest if possible.

2. **Make sure to initialize GoogleTest in your `main()` if custom:**

```cpp
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

3. **Avoid calling `RUN_ALL_TESTS()` more than once:**
   - This can cause crashes as stated in the [GoogleTest Primer](docs/primer.md).

4. **Set the `gtest` and `gmock` include and link paths consistently.**

---

## 3. Best Practices to Avoid Installation Issues

- **Start Simple:** Use the GoogleTest-provided prebuilt libraries and example test files before adapting to your project.
- **Use Bundled `gtest_main` / `gmock_main`:** Linking against these alleviates the need to write custom `main()` functions.
- **Check Include and Link Order:** The order can matter on some platforms, especially Windows.
- **Enable Verbose Output:** Use flags like `--gmock_verbose=info` to diagnose mock-related issues.

---

## 4. Frequently Encountered Error Messages and What They Mean

<AccordionGroup title="Common Error Messages">
  <Accordion title="Cannot open include file: 'gtest/gtest.h'"> 

  Indicates missing or incorrect include directories. See section 2.1.

  </Accordion>
  <Accordion title="Undefined reference to `testing::InitGoogleTest`"> 

  Linking GoogleTest libraries is missing or misconfigured. Check section 2.2.

  </Accordion>
  <Accordion title="Multiple definition of `main` function"> 

  Occurs when linking against both `gtest_main`/`gmock_main` and providing your own `main()`. Remove one.

  </Accordion>
  <Accordion title='Error: Unexpected call or Uninteresting mock function call'> 

  Occurs when mock expectations are violated or unset methods are called. Use `NiceMock` if you want to suppress uninteresting call warnings.

  </Accordion>
</AccordionGroup>

---

## 5. Additional Resources

- [GoogleTest Primer](docs/primer.md) — detailed introduction to writing tests, including how to write `main()`.
- [Getting Started System Requirements](getting-started/setup-prerequisites/system-requirements) — check for prerequisite environment and compiler versions.
- [Configuring Your Project](getting-started/installation-configuration/project-setup) — includes header and linking guidance.
- [Using Mocks Effectively](guides/advanced-and-mocking-guides/using-mocks-effectively) — to understand mock behaviors and verbose settings.

---

## 6. Summary

To troubleshoot installation issues:

- Ensure GoogleTest source or binaries are correctly referenced with proper include paths.
- Check linking against all required test libraries and avoid duplicate main functions.
- Verify environment and compiler compatibility with C++17 and dependencies.
- Follow sample `main()` usage and build system practices.

Resuming a working build often comes down to careful build configuration and adhering to GoogleTest's expected initialization patterns.

---

<Check>
If you continue encountering issues, re-examine compiler/linker messages for details and consult the official troubleshooting guides or community forums linked within the GoogleTest documentation.
</Check>

---

✦ This troubleshooting guide aims to empower you with clear fixes around installation roadblocks so you can focus on writing impactful tests with GoogleTest and GoogleMock.

---

<Info>
For further help, consider joining community discussions or filing issues on [GoogleTest GitHub](https://github.com/google/googletest) and explore community guides.
</Info>

---

#### End of Troubleshooting Guide

---

[Back to Running and Validating Tests](getting-started/first-test-run-validation/run-tests)

[Back to Project Setup](getting-started/installation-configuration/project-setup)

[GoogleTest Primer](docs/primer.md)