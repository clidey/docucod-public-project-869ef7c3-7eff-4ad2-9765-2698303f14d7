---
title: "Building & Running Tests"
description: "Learn how to build and execute your test suite. Explore command-line options for running tests, examine output reports, and understand what success looks like. This ensures your workflow is productive from the very first run."
---

# Building & Running Tests

Learn how to build and execute your test suite using GoogleTest and GoogleMock. This guide covers compiling your tests, running them from the command line, understanding output reports, and determining success to keep your development workflow productive from the first run.

---

## 1. Building Your Test Executable

Before running tests, you must compile your test code into an executable linked against GoogleTest and GoogleMock libraries.

### Step 1: Ensure Your Test Code Is Ready
- Write tests using `TEST()`, `TEST_F()`, or mocks as described in earlier guides.
- Your test source files should include the appropriate headers, e.g., `#include <gtest/gtest.h>` and `#include <gmock/gmock.h>` if you use mocking.

### Step 2: Use Your Build System (CMake Example)
If you use CMake, add your test sources and link libraries as shown:

```cmake
# Add your test executable
add_executable(my_tests test_file1.cpp test_file2.cpp)

# Link against GoogleTest and GoogleMock (with main)
target_link_libraries(my_tests gmock_main gtest_main pthread)
```

- Use `gmock_main` or `gtest_main` libraries to provide the default `main()` — no need to write your own unless you require custom initialization.
- For platform-specific threading support, link `pthread` on Linux/macOS.

### Step 3: Build the Test Executable
Run your build process (e.g., from build directory):

```bash
cmake --build .
```

Verify the executable is created successfully.

<Tip>
If you encounter linker errors regarding `main()`, confirm you are linking against `gmock_main` or `gtest_main` libraries.
</Tip>

---

## 2. Running Tests

GoogleTest provides a built-in mechanism to automatically discover and run all tests registered via the `TEST()` and `TEST_F()` macros.

### Step 1: Run the Test Executable
Execute your built test binary from the command line:

```bash
./my_tests
```

This starts all tests and runs them sequentially.

### Step 2: Interpret the Output
On execution, you will see output indicating:

- Test names grouped by test suite
- Detailed results for each test (PASSED / FAILED)
- Summary including total tests run, failures, and elapsed time

Example of successful output:

```
Running main() from gmock_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

### Step 3: Run Specific Tests (Optional)
You can run specific tests or test suites by passing command-line flags.

- Run a particular test suite:

```bash
./my_tests --gtest_filter=FactorialTest.*
```

- Run a specific test inside a suite:

```bash
./my_tests --gtest_filter=FactorialTest.HandlesZeroInput
```

### Step 4: Use Verbosity or Output Controls
Common useful flags:

- `--gtest_repeat=N` — Run tests N times (useful for flaky test detection).
- `--gtest_output=xml:filename.xml` — Output test results in XML format, useful for CI or reports.
- `--gtest_break_on_failure` — Breaks into debugger on first failure.

For a full list of options, run:

```bash
./my_tests --help
```

<Note>
Passing unrecognized flags will be ignored after `InitGoogleTest()` parses known flags. Always call `testing::InitGoogleTest(&argc, argv)` before running tests.
</Note>

---

## 3. Understanding Test Results and Exit Codes

- `RUN_ALL_TESTS()` returns 0 if all tests pass.
- A non-zero return value indicates one or more test failures.

Integrate this return code in your build or CI system to detect test failures automatically.

<Tip>
Always check and propagate `RUN_ALL_TESTS()`'s return value in your `main()` function. Omitting this may prevent CI systems from detecting test failures.
</Tip>

---

## 4. Using Your Own `main()` Function (Optional)

Most users rely on `gtest_main` or `gmock_main` for automatic `main()`.
If you require custom setup, write a `main()` like this:

```c++
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- You must call `InitGoogleTest` before running `RUN_ALL_TESTS()`.
- Consider calling `InitGoogleMock(&argc, argv)` if you use gMock features.

---

## 5. Troubleshooting Common Issues

<AccordionGroup title="Common Test Execution Issues">
<Accordion title="Tests Do Not Run, Output Shows 'No tests found.'">
- Verify you have test cases defined with `TEST()` or `TEST_F()` macros.
- Confirm your test files are linked with the test executable.
- Ensure you called `InitGoogleTest()` before running tests.
</Accordion>
<Accordion title="Linker Errors about 'main' Symbol">
- Check that you link against `gtest_main` or `gmock_main` if you do not provide your own `main()` function.
- If you provide your own `main()`, do not link these libraries.
</Accordion>
<Accordion title="Tests Always Pass Even When Assertions Fail">
- Confirm you use `EXPECT_*` or `ASSERT_*` macros correctly inside tests.
- Make sure that no exceptions or segmentation faults are silently terminating tests.
</Accordion>
<Accordion title="Command-Line Flags Not Working or Ignored">
- Ensure `InitGoogleTest(&argc, &argv)` is passed the actual `argc` and `argv`.
- Always call `InitGoogleTest` early to parse flags properly.
</Accordion>
</AccordionGroup>

---

## 6. Next Steps

- Explore [Writing Your First Test](/getting-started/first-test-run-validation/writing-your-first-test) to create effective test cases.
- Learn [Mocking Basics](/guides/getting-started/mocking-basics) to write tests with mocks.
- Consult [Test Configuration & Environment Setup](/getting-started/setup-basics/configuration-setup) to integrate GoogleTest into your project build.

<Check>
You are now equipped to build and run your GoogleTest and GoogleMock test suites confidently. For seamless development, automate test runs in your build system or continuous integration pipeline.
</Check>

---