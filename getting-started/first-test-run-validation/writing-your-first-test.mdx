---
title: "Writing Your First Test"
description: "Introduces users to the basic test structure in GoogleTest, showing how to write a simple C++ test file, include the necessary headers, and use assertions. Includes a narrative code walkthrough for newcomers."
---

# Writing Your First Test

## Introduction

Welcome to GoogleTest! Writing your first test might feel daunting, but GoogleTest makes it straightforward and intuitive. This guide walks you through creating a simple C++ test using GoogleTest, highlighting how to include necessary headers, define tests, and use assertions to verify your code's behavior.

By the end of this walkthrough, you will understand the basic structure of a GoogleTest test file, how to write test cases, and how assertions determine test success or failure.

---

## 1. Include the GoogleTest Header

Before writing tests, you must include the GoogleTest main header file. This header provides all the macros and functions needed to define and run tests.

```cpp
#include <gtest/gtest.h>
```

This is essential for your test program to compile and link correctly.

---

## 2. Define a Simple Test with the `TEST()` Macro

GoogleTest organizes tests into *test suites* and *tests*. A test suite groups related tests, while each test contains assertions to verify behavior.

To define a test, use the `TEST(test_suite_name, test_name)` macro: 

```cpp
TEST(ExampleTestSuite, SimpleEqualityTest) {
  EXPECT_EQ(7 * 6, 42);
  EXPECT_STRNE("hello", "world");
}
```

- The first argument, `ExampleTestSuite`, is the name of the test suite. Group related tests logically under the same suite.
- The second argument, `SimpleEqualityTest`, describes what this test is verifying.
- Inside the test body, use GoogleTest assertion macros (like `EXPECT_EQ` and `EXPECT_STRNE`) to perform checks.

### Important Naming Rules

* Do not use underscores (`_`) in test suite or test names, as underscores are reserved for GoogleTest's internal use.
* Both names must be valid C++ identifiers.
* Multiple tests may share the same test suite name but must have unique test names within it.

---

## 3. Understand Assertions: Verify Conditions

Assertions are at the heart of tests. They check expected conditions:

- **Fatal failures (`ASSERT_` macros):** Stop the current test immediately if the assertion fails.
- **Nonfatal failures (`EXPECT_` macros):** Log the failure but continue running the current test.

In the example above:

- `EXPECT_EQ(7 * 6, 42);` verifies that `7 * 6` equals `42`.
- `EXPECT_STRNE("hello", "world");` checks that two strings are not equal.

If any assertion fails, GoogleTest reports it along with file and line number information.

---

## 4. Create Multiple Tests in One Test Suite

You can define numerous tests under the same test suite to verify different behaviors:

```cpp
TEST(ExampleTestSuite, HandlesZero) {
  EXPECT_EQ(0, Factorial(0));
}

TEST(ExampleTestSuite, HandlesPositiveInput) {
  EXPECT_EQ(1, Factorial(1));
  EXPECT_EQ(2, Factorial(2));
  EXPECT_EQ(6, Factorial(3));
}
```

Each test runs independently, providing an isolated environment for checking one behavior.

---

## 5. Writing Your Own Main Function

GoogleTest provides a default `main()` function when linked with `gtest_main`. However, if you want custom setup or teardown, you can write your own:

```cpp
#include <gtest/gtest.h>

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` parses command-line options relevant to GoogleTest BEFORE running tests.
- `RUN_ALL_TESTS()` runs all tests registered via `TEST()` and returns `0` on success or `1` on failure.

*Never* ignore the return value of `RUN_ALL_TESTS()`, as it determines the overall test result.

---

## 6. Summary Code Example

Here's a complete, minimal example of a simple GoogleTest file:

```cpp
#include <gtest/gtest.h>

// Simple test that checks arithmetic and strings
TEST(SampleTestSuite, BasicAssertions) {
  EXPECT_EQ(7 * 6, 42) << "7 times 6 should be 42";
  EXPECT_STRNE("hello", "world") << "Strings should not be equal";
}

// Another test in the same suite
TEST(SampleTestSuite, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Main function that runs all tests
int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}

// Example function for demonstration
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}
```

When you run the compiled test binary, GoogleTest automatically discovers and runs all tests, and outputs a summary showing which tests passed or failed.

---

## 7. Practical Tips for New Users

- Choose meaningful test suite and test names that convey the expected behavior.
- Prefer `EXPECT_*` assertions to allow multiple checks per test; use `ASSERT_*` when failure should abort the current function immediately.
- Remember that each `TEST()` runs independently and sequentially.
- Use streaming (`<<`) in assertions to add custom diagnostic messages, enhancing failure output clarity.
- Always check the return value of `RUN_ALL_TESTS()` in your `main()`.
- Consider exploring [GoogleTest Primer](primer.md) and [Assertions Reference](reference/assertions.md) for deeper insights.

---

## Troubleshooting Common Issues

<AccordionGroup title="Common Pitfalls and Solutions">
<Accordion title="Why does my test fail to compile with 'no matching function for call to FooTest::FooTest()'?">
This happens if your test fixture class does not have a default constructor. Ensure that any test fixtures used with `TEST_F()` have a public, default constructor.
</Accordion>
<Accordion title="Why should test and test suite names not contain underscores?">
Underscores may lead to naming collisions internally in GoogleTest and cause confusing compiler errors. Use camel case or concatenated words instead.
</Accordion>
<Accordion title="My assertions sometimes abort the entire test unexpectedly. Why?">
Assertions with the `ASSERT_*` prefix cause fatal failures and abort the current function. Use them when it doesn't make sense to continue after failure; otherwise, prefer `EXPECT_*` assertions.
</Accordion>
<Accordion title="What if I want to run only a subset of tests?">
You can pass the `--gtest_filter` flag to your test executable. For example, `--gtest_filter=SampleTestSuite.BasicAssertions` runs only that test.
</Accordion>
</AccordionGroup>

---

## Next Steps

Now that you’ve learned how to write your first test:

- Explore the [GoogleTest Primer](primer.md) for foundational concepts and best practices.
- Learn about [Using Assertions and Matchers Effectively](guides/core-workflows/using-assertions-and-matchers) to write meaningful and efficient checks.
- Try out sample tests in the [Googletest Samples](samples.md) to see real-world usage patterns.
- Review the build and run process in [Building and Running Tests](getting-started/first-test-run-validation/building-and-running-tests).

Focus on practicing writing individual tests, experimenting with assertions, and gradually expanding test coverage.

---

**Congratulations!** You’re off to an excellent start with GoogleTest.


---

## References

- [GoogleTest Primer](primer.md)
- [Assertions Reference](reference/assertions.md)
- [Building and Running Tests](getting-started/first-test-run-validation/building-and-running-tests)
- [GoogleTest Samples](samples.md)

For comprehensive guidance, explore the entire [GoogleTest User's Guide](index.md).

---

## Appendix: Sample Test Output

Running the example test might produce output similar to:

```none
Running main() from gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from SampleTestSuite
[ RUN      ] SampleTestSuite.BasicAssertions
[       OK ] SampleTestSuite.BasicAssertions (0 ms)
[ RUN      ] SampleTestSuite.HandlesZeroInput
[       OK ] SampleTestSuite.HandlesZeroInput (0 ms)
[----------] 2 tests from SampleTestSuite (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

Failures, if any, will be clearly indicated with file/line numbers and messages.
