---
title: "Writing Your First Test"
description: "Craft a simple test using GoogleTest or GoogleMock to validate your installation. This example-driven page helps you understand the basics of test structure, assertions, and mocks so you can experience early success."
---

# Writing Your First Test

Craft a simple test using GoogleTest or GoogleMock to validate your installation. This example-driven page helps you understand the basics of test structure, assertions, and mocks so you can experience early success.

---

## 1. Understanding the Test Structure

Before writing tests, it's important to understand how GoogleTest organizes tests logically.

- **Test Suites** (sometimes called Test Cases) group related tests under a common name.
- **Tests** are individual functions that verify specific behavior.

GoogleTest provides the `TEST()` macro to define standalone tests and `TEST_F()` to define tests associated with a test fixture (shared setup).

## 2. Writing a Simple Test Using `TEST()`

The `TEST(TestSuiteName, TestName)` macro declares a test function:

```cpp
#include <gtest/gtest.h>

// A simple test that checks basic expectations.
TEST(HelloTest, BasicAssertions) {
  // Expect that the two strings are not equal.
  EXPECT_STRNE("hello", "world");

  // Expect equality.
  EXPECT_EQ(7 * 6, 42);
}
```

**How to run this test:**
1. Compile it into a binary linked against GoogleTest.
2. Run the binary; GoogleTest will automatically discover and run this test.

### Key Points
- Test suite and test names must be valid C++ identifiers and should avoid underscores (`_`) to prevent naming conflicts.
- Assertions such as `EXPECT_EQ` and `EXPECT_STRNE` verify expected results.
- `EXPECT_*` macros report failures, but the test continues running, allowing multiple checks per test.

## 3. Using Test Fixtures with `TEST_F()`

When multiple tests share common objects or setup, use a test fixture.

### Define a Test Fixture Class

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Initialize queues with some elements for shared use among tests
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  // Test member data
  Queue<int> q0_;  // empty queue
  Queue<int> q1_;  // one element
  Queue<int> q2_;  // two elements
};
```

### Write Tests Using the Fixture

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);  // Fatal failure stops here if nullptr
  EXPECT_EQ(*n, 1);
  delete n;
}
```

### How It Works
- Each test gets a fresh instance of the fixture class.
- The constructor (or optionally `SetUp()`) initializes shared data.
- After a test finishes, the fixture is destructed (or `TearDown()` called).

## 4. Writing Your First GoogleMock Test

GoogleMock extends GoogleTest to allow mocking and verifying interactions.

### Define a Mock Class

```cpp
#include <gmock/gmock.h>

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), (const));
};
```

### Write a Test Using the Mock

```cpp
TEST(MockFooTest, ReturnsExpectedValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue())
      .Times(1)
      .WillOnce(testing::Return(42));

  EXPECT_EQ(mock.GetValue(), 42);
}
```

### What Happens
- `EXPECT_CALL` sets expectations on mock method calls.
- The test verifies the mock behaves as expected.

## 5. Running Your First Test

1. Make sure your project links against `gtest_main` or provides a `main()` that calls:

```cpp
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

2. Build and run the executable.
3. The test runner will output the results with test names and success/failure status.

## 6. Best Practices and Tips

- Always use `EXPECT_*` for non-fatal checks; `ASSERT_*` stops the current test on failure.
- Avoid underscores in test and fixture names to prevent internal naming conflicts.
- Use test fixtures (`TEST_F`) when multiple tests share setup.
- For mocking, set expectations clearly and verify behavior.
- Name your tests clearly to reflect what they verify.

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Troubleshooting Topics">
<Accordion title="Test Not Running or Found">
Make sure to call `InitGoogleTest()` before `RUN_ALL_TESTS()`. If you write your own `main()`, ensure it returns the result of `RUN_ALL_TESTS()`. Also, verify your test macro usage follows guidelines.
</Accordion>
<Accordion title="Linker Errors for gtest_main or gmock_main">
Check that you are linking against the GoogleTest `gtest_main` or `gmock_main` library. If you provide your own main, do not link against these to avoid conflicts.
</Accordion>
<Accordion title="Assertion Macros in Constructors/Destructors">
Avoid using `ASSERT_*` macros inside constructors or destructors as they are not supported there. Use `SetUp()`/`TearDown()` instead.
</Accordion>
<Accordion title="Using Disabled Tests">
Prefix test names with `DISABLED_` to disable them. Run disabled tests with the `--gtest_also_run_disabled_tests` flag.
</Accordion>
</AccordionGroup>

## 8. Where to Go Next

- [GoogleTest Primer](../primer.md) — For detailed introduction and more examples.
- [Basic Mocking: Using GoogleMock](../guides/getting-started/mocking-basics.md) — Kickstart mocking skills.
- [Building & Running Tests](../getting-started/first-test-run-validation/running-tests.md) — Instructions for compiling and executing tests.
- [Troubleshooting Common Issues](../getting-started/first-test-run-validation/troubleshooting-common-issues.md) — Help if things go wrong.

---

Happy testing! This first test is your gateway to writing effective, maintainable C++ tests and mocks using GoogleTest and GoogleMock.

<Check>
You now know how to write simple tests, use fixtures, apply assertions, define basic mocks, and run your tests effectively.
</Check>