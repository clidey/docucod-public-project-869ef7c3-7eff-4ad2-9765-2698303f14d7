---
title: "Writing Your First Test"
description: "A practical walk-through: creating a basic test using GoogleTest, including how to structure test files, select assertions, and organize test functions. Prepares you to immediately see your test framework in action."
---

# Writing Your First Test with GoogleTest

Welcome to the practical walk-through of creating your very first test using GoogleTest. This guide will take you step-by-step through structuring test files, selecting assertions, and organizing test functions. By the end, you'll have a simple test framework in place that you can immediately run and see in action.

---

## 1. Understanding the Basic Test Structure

GoogleTest revolves around creating *tests* organized into *test suites.* Each test verifies a small piece of your C++ code by making *assertions* about expected behavior.

- **Test Suite**: A group of related tests. Analogous to a class or module under test.
- **Test**: An individual test function inside a suite.

### Defining a Simple Test

You use the `TEST()` macro, where you specify the test suite name and the test name. Inside the macro body, you write assertions and test logic.

```cpp
TEST(TestSuiteName, TestName) {
  // Your test code and assertions here
}
```

- The test suite name should reflect the component or class under test.
- The test name describes what the test specifically verifies.

### Example: Testing a Factorial Function

```cpp
int Factorial(int n);  // Assume this function returns n!

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of small positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

Notice that both tests belong to the `FactorialTest` suite, logically grouping tests for the factorial function.

---

## 2. Writing Assertions: The Heart of Your Tests

GoogleTest comes with a rich set of assertions to verify conditions in tests:

- `EXPECT_*` assertions issue a **non-fatal failure** if the check fails — your test continues.
- `ASSERT_*` assertions issue a **fatal failure** if the check fails — your test aborts immediately.

For example:

```cpp
EXPECT_EQ(x, y);  // Test continues even if x != y
ASSERT_NE(ptr, nullptr);  // Test stops if ptr is nullptr
```

### Choosing Between EXPECT and ASSERT

- Use `EXPECT_*` when the test can continue despite a failure, allowing multiple failures to be reported.
- Use `ASSERT_*` if the following code depends on this condition being true (such as safe dereferencing).

### Streaming Custom Messages

All assertions support streaming custom failure messages to help debugging:

```cpp
ASSERT_EQ(vec.size(), expected_size) << "Vector size mismatch";
EXPECT_EQ(vec[i], expected_value) << "Mismatch at index " << i;
```

---

## 3. Organizing Tests with Test Fixtures

If multiple tests share common setup code or data, define a **test fixture** by subclassing `testing::Test`. This lets you reuse setup and teardown logic.

### Defining a Test Fixture

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    q1_.Enqueue(1);
    q2_.Enqueue(2);
    q2_.Enqueue(3);
  }

  Queue<int> q0_;  // Empty queue
  Queue<int> q1_;  // Queue with 1 element
  Queue<int> q2_;  // Queue with 2 elements
};
```

### Writing Tests Using This Fixture

Use `TEST_F()` macro and provide the fixture class name:

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}
```

Each test gets a fresh instance of `QueueTest`. Setup runs automatically before each test.

---

## 4. Running Your Tests

After writing tests, create a `main()` function if your build configuration doesn't provide one.

### Typical Main Function

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

- `InitGoogleTest` initializes internal flags and parses command-line options.
- `RUN_ALL_TESTS()` executes all registered tests and returns `0` if successful.

### Using the Provided main()

GoogleTest offers `gtest_main` library with a suitable main function. If that meets your needs, just link against it and skip writing the main.

---

## 5. Interpreting Test Results

When you run your test binary, GoogleTest prints test results grouped by test suites:

```none
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[  FAILED  ] FactorialTest.HandlesPositiveInput (1 ms)
...
[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] FactorialTest.HandlesPositiveInput
```

A failure message will include the file and line number, plus an explanation of which assertion failed and why.

---

## 6. Best Practices and Tips

- **Name tests clearly**: Use meaningful test suite and test names for easy identification.
- **Group related tests**: Put logically connected tests in the same test suite.
- **Use test fixtures**: Avoid duplicating setup code; keep tests independent.
- **Prefer EXPECT_* over ASSERT_*** to allow multiple failures to show per test run unless test cannot safely continue.
- **Add custom failure messages**: Use the streaming `<<` operator with assertions for clearer diagnostics.
- **Run tests frequently**: Integrate tests into your build process to catch errors early.

---

## 7. Troubleshooting

### Common Issues

- **Tests run but no output visible:** Ensure your test executable is linked against the GoogleTest libraries and that the tests are correctly registered using `TEST()` or `TEST_F()` macros.
- **Compilation errors with `TEST_F` usage:** Confirm that your fixture class inherits from `testing::Test` and is declared before use.
- **Assertion failures:** Review the failure messages to identify mismatched expectations or logic errors in your code.
- **Linker errors for `RUN_ALL_TESTS()`:** Make sure to link with `gtest_main` or provide your own main function.

### Verifying Test Registration

All tests defined with `TEST()` or `TEST_F()` macros are automatically registered. You do not need to list them manually.

### Running Tests Selectively

Use the `--gtest_filter=` command-line flag to run subsets of tests. For example:

```bash
./my_test_binary --gtest_filter=FactorialTest.*
```

Runs all tests in the `FactorialTest` suite.

---

## 8. Next Steps

Once you have mastered writing simple tests:

- Explore **assertions** in greater detail ([Assertions Reference](../api-reference/core-test-apis/assertions.md)).
- Learn about **mocking** and how to test interactions ([Using Mocks Effectively](../guides/advanced-and-mocking-guides/using-mocks-effectively.md)).
- Discover **parameterized tests** to test multiple inputs efficiently.
- Integrate your tests with **build systems and CI/CD pipelines** ([Integration & Extensibility](../overview/quick-glance/integration-overview.md)).

---

## References and Further Reading

- [GoogleTest Primer](primer.md) — A conceptual overview and introduction.
- [Assertions Reference](../api-reference/core-test-apis/assertions.md) — Complete list and usage of GoogleTest assertion macros.
- [Writing Your First Test Guide](getting-started/first-test-run-validation/write-first-test.md) — Extended guide with examples.
- [Test Fixtures](primer.md#same-data-multiple-tests) — Detailed explanation of using fixtures.
- [Running and Validating Tests](getting-started/first-test-run-validation/run-tests.md).
- [Project Setup](getting-started/installation-configuration/project-setup.md) — How to integrate GoogleTest into your build.


<Tip>
Keep your tests simple and focused. Each test should assert one concept or behavior to maximize diagnostic value when failures occur.
</Tip>

<Note>
The `TEST()` macro requires valid C++ identifiers for suite and test names and disallows underscores `_` to ensure compatibility and consistent naming across all platforms.
</Note>

<Warning>
Do not ignore the return value of `RUN_ALL_TESTS()`. It indicates your test program's success (`0`) or failure (`1`). Your `main()` function should return this value.
</Warning>

---

Happy testing with GoogleTest! Your first test is just the beginning of a robust, maintainable, and highly reliable C++ testing journey.
