---
title: "Troubleshooting Common Issues"
description: "Collects actionable solutions for the most frequent problems: build errors, linker issues, missing headers, and runtime test failures. Steers users toward quick resolution instead of deep debugging."
---

# Troubleshooting Common Issues

This guide helps you quickly identify and resolve the most frequent problems encountered when building, linking, or running tests with GoogleTest and GoogleMock. Designed to steer you toward efficient solutions, it focuses on practical fixes rather than deep debugging techniques.

---

## 1. Build Errors

### Common Causes:
- Missing or incorrect include paths for GoogleTest and GoogleMock headers.
- Incomplete or incorrect linkage between test binaries and GoogleTest/GoogleMock libraries.
- Using an unsupported or mismatched compiler version.

### Step-by-Step Resolution:

1. **Verify Include Paths**
   - Ensure your build system includes the directory containing `gtest/gtest.h` and `gmock/gmock.h`.
   - For example, in CMake, add:
     ```cmake
     include_directories(${gtest_SOURCE_DIR}/include ${gmock_SOURCE_DIR}/include)
     ```

2. **Link Proper Libraries**
   - Link against the correct GoogleTest and GoogleMock libraries such as `gtest`, `gtest_main`, `gmock`, and `gmock_main`.
   - Example CMake linkage:
     ```cmake
     target_link_libraries(your_test_target gtest gtest_main gmock gmock_main)
     ```

3. **Check Compiler Compatibility**
   - Confirm your compiler is supported: GCC 7.0+, MSVC 2015+, or Clang.
   - Confirm you are compiling with C++17 enabled.

### Practical Tips:
- Wrap template parameters or argument types with unprotected commas in parentheses when mocking methods to avoid parse errors.
- If your build system is Bazel or CMake, consult the respective installation page to ensure workspace and dependencies are declared correctly.

<Accordion title="Example of a MOCK_METHOD with complex types">
```cpp
class MockFoo {
 public:
  // Wrap return type with parentheses if it contains commas.
  MOCK_METHOD((std::pair<bool, int>), GetPair, ());
};
```
</Accordion>

---

## 2. Linker Issues

### Common Causes:
- Undefined references to GoogleTest or GoogleMock symbols.
- Forgetting to link the main function provider (`gtest_main` or `gmock_main`) if using default main.
- Mixing static and shared libraries inconsistently.

### Remediation Steps:

1. **Include `gtest_main` or Your Own `main()`**
   - If you rely on GoogleTest’s `gtest_main` library to provide `main()`, link it explicitly.
   - Alternatively, write your own `main()` and link only `gtest` and `gmock` libraries.

2. **Match Library and Compiler Types**
   - Ensure that your test binary and GoogleTest/GoogleMock libraries are built with the same compiler and settings.

3. **Order of Libraries**
   - Place GoogleTest and GoogleMock libraries **after** your source files in the compiler/linker command to satisfy symbol dependencies.

---

## 3. Missing Headers

### Causes:
- Include paths not set correctly for GoogleTest/GoogleMock headers.
- Incorrect or incomplete installation of GoogleTest/GoogleMock.

### Quick Fix:
- Verify your include directories point to the root of the `googletest/include` folder.
- Double-check installed subfolders; headers should be accessible at:
  - `gtest/gtest.h`
  - `gmock/gmock.h`


---

## 4. Runtime Test Failures

### Symptoms:
- Tests report failed assertions.
- Unexpected call errors or warnings about "Uninteresting mock function call".
- Test crashes or leaks.

### Immediate Actions:

1. **Interpret Assertion Failures**
   - Review test output logs; GoogleTest provides file names, line numbers, and detailed error messages.
   - Use `--gtest_filter` to run specific failing tests for targeted debugging.

2. **Address Unexpected Calls**
   - Unexpected calls may indicate missing or incorrect `EXPECT_CALL` in mocks.
   - Use `EXPECT_CALL(mock, Method(...)).Times(0);` to explicitly forbid calls.
   - Suppress warnings for uninteresting calls with `NiceMock<T>` or carefully use `ON_CALL` to define default actions.

3. **Use Verbose Logging for Diagnostics**
   - Run your tests with the flag `--gmock_verbose=info` to log all mock interactions.
   - This reveals which calls matched which expectations and which failed.

4. **Common Pitfalls**
   - Expectations are not sticky by default; use `.RetiresOnSaturation()` if you want expectations to become inactive after being satisfied.
   - Be cautious when over-specifying calls – too strict `EXPECT_CALL` can lead to brittle tests.

<Accordion title="Suppress 'Uninteresting mock function call' warnings">
Use `NiceMock` to silence warnings when you don't care about some calls:

```cpp
using ::testing::NiceMock;
NiceMock<MockFoo> mock;
// Now, uninteresting calls don't produce warnings.
```
</Accordion>

---

## 5. Common Troubleshooting Tips

- **Verify Virtual Destructors:** Ensure interfaces you're mocking have virtual destructors to avoid memory leaks.

- **Mock Methods Should Be Public:** Place all `MOCK_METHOD` declarations in the `public:` section, even when mocking protected or private base class methods.

- **Use Aliases for Complex Types:** To avoid errors from unprotected commas in `MOCK_METHOD` parameters, use `using` aliases.

- **Set Expectations Before Exercise:** Call `EXPECT_CALL` **before** exercising the mock; setting expectations after use leads to undefined behavior.

- **Use Sequences for Ordered Calls:** If order matters, group expectations in an `InSequence` block.


---

## 6. When You Are Stuck

- Consult the verbose mock call logs with `--gmock_verbose=info` and `--gtest_stack_trace_depth` to your desired depth.

- Check [GoogleMock FAQ](https://github.com/google/googletest/blob/main/docs/gmock_faq.md) for common questions.

- Use heap checkers to detect leaks related to mock destruction.

- Verify that your environment meets the [System Requirements](https://github.com/google/googletest/blob/main/getting-started/prerequisites-installation/system-requirements.md).

---

## 7. Additional Resources

- [gMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html): Recipes covering mock creation, actions, and expectations.
- [GoogleTest Primer](https://github.com/google/googletest/blob/main/docs/primer.md): Getting started with test writing.
- [Configuring Your Project](https://github.com/google/googletest/blob/main/getting-started/configuration-first-run/configure-project.md): Guidance on setting up your project.

---

## Summary
This page delivers actionable solutions for the most frequent build, linking, header, and runtime issues with GoogleTest and GoogleMock, emphasizing quick remediation over deep debugging.

---