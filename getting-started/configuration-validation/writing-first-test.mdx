---
title: "Writing and Running Your First Test"
description: "Walks users through creating, building, and running their first simple C++ test with GoogleTest. Covers essential test structure, use of assertions, and verifying that the test suite runs as expected."
---

# Writing and Running Your First Test

This guide walks you through creating, building, and running your first simple C++ test using GoogleTest. It covers essential test structure, how to use assertions, and how to verify that your test suite runs successfully.

---

## 1. Prerequisites & Setup

Before writing your first test, ensure you have:  

- GoogleTest installed and built. Refer to the [Installing with CMake](../requirements-installation/installation-cmake.md) or [Installing with Bazel](../requirements-installation/installation-bazel.md) guides for detailed setup instructions.
- A C++17-compatible compiler.
- A project configured to include GoogleTest headers and link against GoogleTest libraries. See [Configuring Your Project](../configuration-validation/project-integration.md) for integration steps.

<Tip>
For newcomers, linking against the provided `gtest_main` library can save you from writing your own `main()` function.
</Tip>

## 2. Writing Your First Test

GoogleTest tests are written within the `TEST()` macro, which defines an individual test. The macro takes two parameters:

- **TestSuiteName**: A logical grouping name for related tests.
- **TestName**: The unique name of the individual test within the suite.

Both names must be valid C++ identifiers without underscores.

### Example: Testing a Factorial Function

Suppose you have a factorial function declared as:

```cpp
int Factorial(int n);  // Computes factorial of n.
```

A basic test suite for this function would look like:

```cpp
#include <gtest/gtest.h>

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Running this code:

- Each invocation of `TEST()` creates a separate test case.
- Assertions like `EXPECT_EQ` check if conditions hold; failures are reported but allow test execution to continue where appropriate.

<Tip>
Use the `ASSERT_*` versions for checks that must stop execution on failure (fatal failures).
</Tip>

## 3. Using Test Fixtures for Shared Setup

When multiple tests in a suite share setup code or data, use test fixtures with `TEST_F()`.

### Create a Test Fixture Class

Derive a class from `testing::Test` and put shared data and setup there.

```cpp
class QueueTest : public testing::Test {
 protected:
  QueueTest() {
    // Prepare queues with different initial states.
    q0_.Enqueue(0);
    q1_.Enqueue(1);
  }

  Queue<int> q0_;
  Queue<int> q1_;
};
```

### Write Tests Using the Fixture

```cpp
TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 1);  // q0_ has 1 element enqueued
}

TEST_F(QueueTest, CanDequeue) {
  int* val = q1_.Dequeue();
  ASSERT_NE(val, nullptr);
  EXPECT_EQ(*val, 1);
  delete val;
}
```

For each test, GoogleTest:

1. Creates a fresh fixture object.
2. Runs the constructor and optional `SetUp()` method.
3. Runs the test body.
4. Runs optional `TearDown()` and then destructs the fixture.

<Tip>
Ensure you use `override` on `SetUp()` and `TearDown()` to avoid common spelling mistakes.
</Tip>

## 4. Building Your Test

You need to compile your test code with the GoogleTest libraries linked. For example, using `g++` directly:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include \
    -pthread your_test.cc \
    /path/to/libgtest.a /path/to/libgtest_main.a -o runTests
```

Or, with CMake, link against `gtest` and optionally `gtest_main` per your project setup.

## 5. Running Your Test Suite

Run your compiled test binary:

```bash
./runTests
```

GoogleTest automatically discovers all tests and runs them. Sample output looks like:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

<Tip>
If tests fail, the output shows where and why. Use that info to debug.
</Tip>

## 6. Verifying Success and Troubleshooting

- Successful tests show `[  PASSED  ]` messages.
- Failures include file name, line number, and failure messages.
- Common issues:
  - Missing includes: Ensure you include `<gtest/gtest.h>` in your test files.
  - Linking errors: Verify your build links with GoogleTest libraries.
  - Compiler errors around `TEST()` or `TEST_F()`: Confirm your test names don't contain underscores and fixture classes are defined correctly.

<Warning>
Do not ignore the return value of `RUN_ALL_TESTS()`. Your main function should return its value to indicate overall test success or failure.
</Warning>

## 7. Sample Full Code Example

```cpp
#include <gtest/gtest.h>

// A sample factorial function.
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// A simple test suite for Factorial.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and execute this to confirm that tests run and pass successfully.

---

## Additional Resources

- [GoogleTest Primer](../primer.md) for foundational concepts and writing basic tests.
- [Assertions Reference](../reference/assertions.md) to master the variety of assertion macros.
- [Configuring Your Project](../configuration-validation/project-integration.md) for build integration details.
- [Mocking for Dummies](../../googlemock/gmock_for_dummies.html) if you want to extend tests with mocks.

---

Start small, write meaningful assertions, and run tests frequently to build confidence in your C++ code with GoogleTest.


---

<Check>
Everything you need to write, build, and run a simple GoogleTest test is covered on this page.
</Check>

