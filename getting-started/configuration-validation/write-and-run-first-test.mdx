---
title: "Writing and Running Your First Test"
description: "A hands-on guide to writing a basic test case, compiling, and running it. Helps users validate that their environment is set up and provides an experiential introduction to the GoogleTest workflow."
---

# Writing and Running Your First Test

A hands-on guide to writing a basic test case, compiling, and running it with GoogleTest. This page helps you validate that your environment is correctly set up and provides an experiential introduction to the GoogleTest workflow.

---

## 1. Prerequisites & Environment Validation

Before writing your first test, ensure your development environment meets GoogleTest requirements:

- **C++17 or later:** GoogleTest depends on features introduced in C++17.
- **Supported Platforms & Compilers:** Windows (MSVC), Linux (GCC, Clang), macOS (Clang).
- **Build System Setup:** Have CMake or Bazel configured for GoogleTest integration.
- **Project Setup:** GoogleTest must be installed and linked correctly; see the [Installation Guide](https://github.com/google/googletest) for details.

<Tip>
Use the system verification steps in the [Prerequisites & Supported Platforms](https://github.com/google/googletest/tree/main/getting-started/setup-prerequisites-installation/prerequisites-supported-platforms) page to confirm your environment is compatible.
</Tip>

---

## 2. Writing Your First Test

Let's write a simple test to check your environment and familiarize yourself with GoogleTest's syntax.

### Step-by-Step:

<Steps>
<Step title="Include GoogleTest headers">
Include the primary GoogleTest header in your test source file:

```cpp
#include <gtest/gtest.h>
```

This brings in all the basic testing functionality.
</Step>

<Step title="Define a test with TEST macro">
Use the `TEST` macro to create your first test function. It takes two parameters: a test suite name and a test name.

Example:

```cpp
TEST(ExampleTestSuite, BasicAssertions) {
  EXPECT_EQ(1, 1);  // This assertion checks that 1 equals 1.
}
```

- **Test Suite:** Groups related tests, here `ExampleTestSuite`.
- **Test Name:** The specific test case, here `BasicAssertions`.

GoogleTest runs each test independently.
</Step>

<Step title="Add assertions">
Inside the test body, add assertions to check expected behavior.

Basic assertions include:

- `EXPECT_EQ(val1, val2)` — Checks that `val1 == val2`.
- `ASSERT_TRUE(condition)` — Checks that `condition` is true.

Example extended:

```cpp
TEST(ExampleTestSuite, BasicAssertions) {
  EXPECT_EQ(3 + 4, 7);
  ASSERT_TRUE(5 > 2);
}
```

Assertions prefixed `EXPECT_` report failure but continue test execution; those with `ASSERT_` abort if the condition fails.
</Step>

<Step title="Implement test logic">
Expand your test by adding more logic, function calls, or preparation to verify real code.

For example, to test a factorial function:

```cpp
int Factorial(int n);

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(5), 120);
}
```

The above shows how to group tests into suites and name them descriptively.
</Step>
</Steps>

<Tip>
Choose clear, descriptive names for test suites and test names to communicate the intent effectively.
</Tip>

---

## 3. Compiling Your Test Program

To run your tests, you need to compile them with GoogleTest libraries linked.

### Basic steps:

1. **Ensure GoogleTest is installed and built**
   - Follow standard installation guides using CMake or Bazel.
2. **Create your test file** (e.g., `example_test.cc`) containing your test code.
3. **Compile with your build tool**, linking against GoogleTest:

#### Example using g++ and CMake-generated Makefile:

```bash
g++ -std=c++17 -isystem /path/to/googletest/include -pthread \
  example_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o example_test
```

Alternatively, use CMake build targets as outlined in the installation docs.

### Linking Notes:

- Link `libgtest` and `libgtest_main` (or provide your own `main()`).
- Include threading support (e.g., `-pthread`).

<Tip>
GoogleTest provides a main program implementation in `gtest_main` to simplify your test code by not requiring a manual `main()` function.
</Tip>

---

## 4. Running Your First Test

Once compiled into an executable, simply run it:

```bash
./example_test
```

Expected output for a passing test suite looks like:

```shell
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from ExampleTestSuite
[ RUN      ] ExampleTestSuite.BasicAssertions
[       OK ] ExampleTestSuite.BasicAssertions (0 ms)
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from ExampleTestSuite (0 ms total)
[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest will report the failure location and message.

<Tip>
GoogleTest supports command-line options to filter tests, output in XML format for integration with CI/CD tools, and verbose output for debugging.
</Tip>

---

## 5. Understanding the Output and Success Criteria

- **Success**: The test runner prints `[  PASSED  ]` for all tests.
- **Failure**: Detailed messages indicate which assertion failed, alongside file and line number.
- **Test Isolation**: Each test runs independently; failure in one does not affect others.

---

## 6. Common Pitfalls

<AccordionGroup title="Troubleshooting Common Issues">
<Accordion title="Test Not Running">
- Ensure tests are linked correctly with GoogleTest.
- Avoid naming conflicts.
- Confirm the test functions use `TEST` or `TEST_F` macros.
</Accordion>
<Accordion title="Linker Errors">
- Confirm linking against `libgtest` and `libgtest_main`.
- Check compiler flags, especially `-pthread`.
</Accordion>
<Accordion title="Tests Not Discovered">
- Confirm test functions are globally visible and not inside anonymous namespaces.
- Use the correct macro syntax.
</Accordion>
<Accordion title="Assertions Not Working as Expected">
- Distinguish between `EXPECT_*` and `ASSERT_*` assertions.
- Use proper test naming conventions.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps & Additional Resources

- **Write More Tests:** Group related tests into suites using descriptive names.
- **Learn Test Fixtures:** Use `TEST_F` for tests sharing common setup.
- **Explore GoogleMock:** Add powerful mocking capabilities for complex dependencies.
- **Consult Documentation:**
  - [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md) — foundational testing knowledge.
  - [Initial Configuration](https://github.com/google/googletest/tree/main/getting-started/configuration-validation/initial-configuration) — setup and linking.
  - [Mocking Basics](https://github.com/google/googletest/tree/main/gmock_for_dummies.md) — for creating mock classes.

---

## 8. Example Complete Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(5), 120);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this test to see GoogleTest in action.

---

<Check>
Always verify tests by checking the output status and running diagnostics with `--gtest_break_on_failure` to debug hangs or segmentation faults.
</Check>

---

For comprehensive understanding, refer to the full [GoogleTest Primer](https://github.com/google/googletest/tree/main/docs/primer.md) and [GoogleMock for Dummies](https://github.com/google/googletest/tree/main/gmock_for_dummies.md).

---

<Source url="https://github.com/google/googletest" branch="main" paths={[{"path": "docs/primer.md", "range": "1-200"},{"path": "docs/gmock_for_dummies.md", "range": "1-175"}]} />
