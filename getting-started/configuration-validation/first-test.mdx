---
title: "Writing and Running Your First Test"
description: "Walk users through crafting a basic test suite using GoogleTest and, if desired, GoogleMock, building the test binary, and running it to verify the framework is working as expected."
---

# Writing and Running Your First Test

This guide takes you through creating a basic test suite using GoogleTest, optionally incorporating GoogleMock, building your test binary, and running it to confirm everything works as expected. By following these steps, you'll verify your setup and gain confidence in writing tests with the framework.

---

## 1. Prepare Your Test Environment

Before writing your first test, ensure you have completed the installation and configuration steps. Confirm that GoogleTest and GoogleMock (if needed) are available in your build environment and included properly.

<Tip>
If you have not set up the includes and linking yet, see the [Configuring Includes and Linking](../../getting-started/configuration-validation/include-and-link) guide for detailed instructions.
</Tip>

---

## 2. Write a Basic Test Using GoogleTest

GoogleTest uses the `TEST` macro to define individual tests. Each test consists of a test suite name and a test name, which act as identifiers.

Here's a minimal test example:

```cpp
#include <gtest/gtest.h>

// Basic test case called "ExampleTest" with individual test "BasicAssertion".
TEST(ExampleTest, BasicAssertion) {
  EXPECT_EQ(1, 1);  // Check that 1 equals 1.
}
```

### Explanation:
- **`TEST(TestSuiteName, TestName)`**: Defines a test within a named group.
- **`EXPECT_EQ(expected, actual)`**: Compares two values and fails the test if they're not equal without aborting the test.

The test's body may contain multiple assertions depending on what you need to verify.

---

## 3. (Optional) Add GoogleMock Support

If you want to write tests involving mock objects:

1. Include GoogleMock headers:

```cpp
#include <gmock/gmock.h>
```

2. Define a mock class with mocked methods using the `MOCK_METHOD` macro. For example:

```cpp
class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};
```

3. Write tests using expectations:

```cpp
TEST(MockTest, ReturnsExpectedValue) {
  MockFoo mock;
  EXPECT_CALL(mock, GetValue()).WillOnce(::testing::Return(42));

  EXPECT_EQ(mock.GetValue(), 42);
}
```

<Tip>
See the [Mocking with GoogleMock: The Basics](../../guides/getting-started/first-mock) guide for expanded coverage on mocking.
</Tip>

---

## 4. Build Your Test Binary

How you build your test depends on your build system.

### Using CMake

1. Ensure your `CMakeLists.txt` includes and links to GoogleTest (and GoogleMock, if used). Here's a minimal configuration:

```cmake
cmake_minimum_required(VERSION 3.13)
project(MyTests)

# Enable testing
enable_testing()

# Find GoogleTest and GoogleMock, assuming installed or brought in via FetchContent
find_package(GTest REQUIRED)

add_executable(my_test my_test.cc)

# Link against gtest_main (gtest main function) and optionally gmock
target_link_libraries(my_test GTest::gtest_main GTest::gmock)

add_test(NAME MyTest COMMAND my_test)
```

2. Build your test:

```shell
mkdir build && cd build
cmake ..
make
```

### Using Other Build Systems

Refer to your system's documentation for building and linking.

<Tip>
If you want guidance with Bazel, check the [Installing with Bazel](../../getting-started/prerequisites-installation/installation-bazel) page.
</Tip>

---

## 5. Run Your Test

Once built, execute the binary:

```shell
./my_test
```

### Expected Output:

If all tests pass, you will see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ExampleTest
[ RUN      ] ExampleTest.BasicAssertion
[       OK ] ExampleTest.BasicAssertion (0 ms)
[----------] 1 test from ExampleTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

### Running Specific Tests

Use the `--gtest_filter` flag to run specific tests, e.g.,

```shell
./my_test --gtest_filter=ExampleTest.BasicAssertion
```

### Listing Available Tests

You can list all tests without running them:

```shell
./my_test --gtest_list_tests
```

This will output available test suites and tests which you can use for filtering.

---

## 6. Verify Your Test Setup

You have a working test if:

- The test binary builds without errors.
- Running tests executes and shows all tests passing.
- You can list and filter tests with flags.

<Tip>
If you encounter build or runtime problems, review the [Troubleshooting Common Setup Issues](../../getting-started/troubleshooting-help/common-issues) page.
</Tip>

---

## Additional Best Practices & Tips

- **Use `ASSERT_*` vs `EXPECT_*`**: Use `ASSERT_*` when failure should abort the current test immediately.
- **Avoid underscores in test names**: As per GoogleTest conventions and limitations, do not use underscores in test suite or test names.
- **Name conventions**: Follow standard C++ naming conventions for clarity and compatibility.
- **Use `gtest_main` if you don’t need custom `main()`**: This library provides a main function so you can omit writing one.

---

## Summary Example

Here’s a complete minimal test file to get started:

```cpp
#include <gtest/gtest.h>

// Simple test checking if true equals true.
TEST(SmokeTest, BasicCheck) {
  EXPECT_TRUE(true);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Save as `my_test.cc`, build, and run.

---

For a richer experience and next steps, explore writing test fixtures, using assertions effectively, and adopting mocking when needed.
