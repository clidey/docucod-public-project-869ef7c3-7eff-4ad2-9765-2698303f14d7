---
title: "Validating Setup & Troubleshooting"
description: "Describes how to check that GoogleTest and GoogleMock are correctly installed and configured by running sample and built-in tests. Offers troubleshooting advice for common setup errors, misconfigurations, and hints for resolving them quickly."
---

# Validating Setup & Troubleshooting

Verify your GoogleTest and GoogleMock installation and configuration by running built-in and sample tests. This guide walks you through checking your environment, running tests to confirm everything works, and solving common issues quickly.

---

## 1. Confirming GoogleTest & GoogleMock Installation

### Prerequisites
- Ensure you have previously installed GoogleTest and GoogleMock following the installation guides for your build system (e.g., CMake or Bazel).
- Your project's include paths and linker settings must reference the GoogleTest/GoogleMock headers and libraries.

### Running Built-in Tests
GoogleTest and GoogleMock provide sample and internal tests to confirm correct installation.

#### Using CMake
If installed via CMake, after building GoogleTest:

```bash
# Navigate to your build directory
cd build

# Run the GoogleTest tests
ctest -V
```

Look for test results like `PASS` indicating successful runs.

#### Using Bazel
With Bazel-built tests:

```bash
bazel test //...
```

This runs all configured tests, including GoogleTest and GoogleMock’s own. Check logs for failures.

### Running Sample Tests in Your Project
To validate integration, compile and run a simple test from your project that uses GoogleTest and GoogleMock:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::Return;
using ::testing::_;

class MockFoo {
 public:
  MOCK_METHOD(int, GetValue, (), ());
};

TEST(SampleTest, BasicMock) {
  MockFoo mock;
  ON_CALL(mock, GetValue()).WillByDefault(Return(42));
  EXPECT_EQ(42, mock.GetValue());
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and execute this. Passing results confirm setup is valid.

---

## 2. What to Expect When Running Tests

- **Success:** All tests pass showing `PASSED` or `OK` messages.
- **Uninteresting Calls Warning:** If a mock method without an `EXPECT_CALL` is called, you may see warnings about "uninteresting mock function call" — normal unless you explicitly want to disallow unused calls.
- **Failures:** Indicate configuration or code issues; verify mocks, matchers, and test expectations.

---

## 3. Common Setup Issues and How to Fix Them

### Issue: GoogleMock Flags Not Applied
- Symptoms: Flags like `--gmock_verbose` appear ignored.
- Actions:
  - Verify you initialize GoogleMock by calling `::testing::InitGoogleMock(&argc, argv);` in `main()` before running tests.
  - Confirm command-line flags are correctly passed and parsed.

### Issue: Unexpected Mock Function Call Errors
- Symptoms: Failures stating a mock function was called with unexpected arguments.
- Resolution:
  - Add appropriate `EXPECT_CALL` or `ON_CALL` clauses to cover all expected calls.
  - Use wildcard matcher `_` if you want to ignore specific arguments.
  - Set `--gmock_verbose=info` to get detailed call match traces.

### Issue: "Uninteresting call" Warnings
- Explanation: Mock method was called without any expectations.
- Solutions:
  - Use `NiceMock<T>` to suppress such warnings for a mock.
  - Add `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` to explicitly allow calls.
  - Set `--gmock_verbose=error` to suppress all warnings.

### Issue: Failures due to Missing Virtual Destructors
- Symptoms: Heap check errors or leaks when deleting mock objects.
- Fix: Verify the base class of your mock has a virtual destructor.

### Issue: Slow Compilation When Mocking Many Methods
- Remedy: Move mock class constructor and destructor definitions out of headers into `.cc` files to improve compilation times.

---

## 4. Tips for Troubleshooting & Diagnostics

### Enable Verbose Logging
Run your tests with the verbosity flag to diagnose call matching:

```bash
./your_test_binary --gmock_verbose=info
```

This shows every mock call, matched expectations, and stack traces.

### Using `Mock::VerifyAndClearExpectations()`
In complex tests, you might need to verify mocks before they are destroyed:

```cpp
ASSERT_TRUE(::testing::Mock::VerifyAndClearExpectations(&mock_obj));
```

This can catch unsatisfied expectations early.

### Suppress and Manage Warnings
- To reduce noise, consider using `NiceMock<T>` instead of `T`.
- Review your use of `ON_CALL` vs. `EXPECT_CALL` to correctly distinguish setting default behaviors from expectations.

### Diagnosing Argument Mismatches
- Use matchers like `_`, `NotNull()`, `Eq(value)`, and more to precisely control expected call arguments.
- Combine with `.With()` clause to validate composite argument tuples.

### Use Sequences and Ordering
If call order matters, wrap related expectations in an `InSequence` block:

```cpp
{
  ::testing::InSequence seq;
  EXPECT_CALL(mock, FirstCall());
  EXPECT_CALL(mock, SecondCall());
}
```

Test failures due to order issues will be reported clearly.

### Preventing Silent Test Failures
Avoid setting expectations with missing or incorrect mock behavior that causes tests to pass unexpectedly. Always check test reports carefully.

---

## 5. Useful Resources and Next Steps

- **GoogleMock Cookbook:** [https://google.github.io/googletest/gmock_cook_book.html](https://google.github.io/googletest/gmock_cook_book.html) — Comprehensive recipes for mocking and expectations
- **Assertions Reference:** [reference/assertions.md](../reference/assertions.md) — Detailed description of GoogleTest macros for validating code behavior
- **Common Use Cases & Real World Impact:** [common-use-cases.mdx](../overview/adoption-and-integration/common-use-cases.mdx) — Learn how real teams leverage GoogleTest and GoogleMock
- **Integration with Build & Dev Toolchains:** [integration-touchpoints.mdx](../overview/adoption-and-integration/integration-touchpoints.mdx) — Guide to integrating GoogleTest into your environment

---

## Troubleshooting Checklist

| Symptom                                | Cause                               | Action                  |
|----------------------------------------|-----------------------------------|-------------------------|
| Tests fail unexpectedly                 | Missing `EXPECT_CALL` or mismatched | Add proper expectations |
| "Uninteresting mock function call"    | No expectations for called mock method | Use `NiceMock` or add explicit `EXPECT_CALL`/
| Memory leaks or heap errors             | Non-virtual base class destructor   | Add virtual destructor to base class |
| Flags like `--gmock_verbose` not working| `InitGoogleMock` not called or called incorrectly | Use `InitGoogleMock` properly |
| Slow compilation time                   | Mock class inline constructors     | Move constructors to `.cc` |

---

## Quick Verification Sample

```cpp
#include <gmock/gmock.h>
#include <gtest/gtest.h>

using ::testing::Return;

class MockExample {
 public:
  MOCK_METHOD(int, GetNumber, (), ());
};

TEST(ValidationTest, SimpleInvocation) {
  MockExample mock;
  ON_CALL(mock, GetNumber()).WillByDefault(Return(123));
  EXPECT_EQ(123, mock.GetNumber());
}

int main(int argc, char** argv) {
  ::testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile this with GoogleTest and GoogleMock linked, run it, and expect a success message.

---

## Summary
This page guides you to verify your GoogleTest and GoogleMock setup by running built-in and example tests, understanding typical test output, and resolving common issues to achieve a stable, validated test environment.

---

<AccordionGroup title="Troubleshooting Common Issues">
<Accordion title="Uninteresting Mock Function Call Warning">
GoogleMock warns by default if a mock method is called without an `EXPECT_CALL`. To suppress this:

- Wrap your mock in `NiceMock<T>`, which suppresses such warnings.
- Add an explicit `EXPECT_CALL(mock, Method(_)).Times(AnyNumber())` if you expect calls but don’t want detailed expectations.
- Adjust verbosity using `--gmock_verbose=error` to silence warnings.

This ensures you know about likely unintentional calls while allowing flexibility.
</Accordion>
<Accordion title="Unexpected Call Failures">
Caused by mock function calls that don't match any `EXPECT_CALL`. To fix:

- Add the missing expectation to cover the call.
- Use wildcards `_` if parameters don’t matter.
- Use verbose mode (`--gmock_verbose=info`) for detailed matching diagnosis.
</Accordion>
<Accordion title="GoogleMock Flags Not Applied">
Verify that you call `::testing::InitGoogleMock(&argc, argv);` early in `main()`. Without it, flags like `--gmock_verbose` will not be processed.
</Accordion>
<Accordion title="Virtual Destructors Missing">
Your mocked base classes must have virtual destructors to avoid undefined behavior and memory leaks. Add virtual destructors to all polymorphic base classes.
</Accordion>
<Accordion title="Slow Compilation Times">
Define mock constructors and destructors in `.cc` files rather than inline in headers to reduce compile time and improve incremental builds.
</Accordion>
</AccordionGroup>

---

## Get Help
For further assistance:

- Visit the [GoogleTest & GoogleMock GitHub repository](https://github.com/google/googletest)
- Check the comprehensive [GoogleMock Cookbook](https://google.github.io/googletest/gmock_cook_book.html)
- Explore API references for detailed macros and classes
- Ask questions on community forums or mailing lists linked from the main repo

<h5>Ensure your development environment meets all system requirements described in the System Requirements page before attempting installation or troubleshooting.</h5>

---