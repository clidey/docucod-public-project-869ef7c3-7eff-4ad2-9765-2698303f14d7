---
title: "Writing and Running Your First Test"
description: "Progressive guide for writing a beginner-friendly test case using GoogleTest. Includes compiling and running the test to verify the setup is successful, and highlights the basic structure of a C++ test file."
---

# Writing and Running Your First Test with GoogleTest

Welcome to your first test with GoogleTest! This guide walks you through writing a simple, beginner-friendly test case in C++. You will learn the essential structure of a test file, how to compile it, run the test program, and verify the output to ensure everything is set up correctly.

---

## 1. Understanding the Basic Test Structure

A GoogleTest test starts with the `TEST()` macro, which defines an individual test. Each test has two key identifiers:

- **Test Suite Name:** Groups related tests together.
- **Test Name:** Identifies a specific test within the suite.

These names must be valid C++ identifiers without underscores (`_`) to avoid conflicts.

### Simple Test Example
Here is a minimal example of a GoogleTest test file that tests a simple factorial function:

```cpp
#include <gtest/gtest.h>

// Example function to test
int Factorial(int n) {
  return n <= 1 ? 1 : n * Factorial(n - 1);
}

// Define test suite "FactorialTest" and a test named "HandlesZeroInput"
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);  // Expect factorial of 0 to be 1
}

// Another test in the same test suite
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);  // Initializes GoogleTest
  return RUN_ALL_TESTS();               // Runs all tests and returns success code
}
```

> **Key Points:**
> - `EXPECT_EQ` is an assertion comparing expected and actual values.
> - `testing::InitGoogleTest()` processes command-line arguments for GoogleTest.
> - `RUN_ALL_TESTS()` executes all registered tests and returns `0` if all pass.

---

## 2. Compiling Your First Test

Assuming you have already installed GoogleTest and configured your build environment (see [Installing with CMake](/getting-started/setup-and-installation/installing-with-cmake)), compile your test program as follows.

### Using g++/clang++ (Manual Compilation)

```bash
# Adjust include and library paths as necessary
g++ -std=c++17 -I/path/to/googletest/include \
    -L/path/to/googletest/lib \
    your_test.cc -lgtest -lgtest_main -pthread -o your_test
```

- Ensure you link `-lgtest` and `-lgtest_main`.
- The `-pthread` flag is required for threading support.

### Using CMake

If you use CMake, write a simple `CMakeLists.txt`:

```cmake
cmake_minimum_required(VERSION 3.14)
project(FirstTest)

find_package(GTest CONFIG REQUIRED)

add_executable(your_test your_test.cc)
target_link_libraries(your_test GTest::gtest_main)

include(GoogleTest)
gtest_discover_tests(your_test)
```

Then build:

```bash
mkdir build && cd build
cmake ..
cmake --build .
```

---

## 3. Running Your Test

Run the compiled test executable:

```bash
./your_test
```

### Expected Output

If all tests pass, you will see something similar to:

```none
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If a test fails, GoogleTest will provide detailed information, including the file and line number where the failure occurred.

---

## 4. Basic Structure of a GoogleTest File

A typical test file includes these parts:

1. **Headers:** Include `<gtest/gtest.h>`.
2. **Test Definitions:** Use `TEST(TestSuiteName, TestName)` macro to add tests.
3. **Main Function:** Initialize and run tests with `InitGoogleTest` and `RUN_ALL_TESTS`.

### What You Should Avoid

- Using underscores in test suite or test names (e.g., `TEST(Foo_Bar, Baz_Test)`), as it may cause name clashes.
- Ignoring the return value of `RUN_ALL_TESTS()`. You must return it as the program's exit code.

---

## 5. Tips and Best Practices for Your First Test

- Use **meaningful** test suite and test names for clear test outputs.
- Favor `EXPECT_*` assertions for non-fatal checks, allowing tests to continue reporting multiple failures.
- Use `ASSERT_*` assertions if subsequent code in the test depends on the previous check.
- Declare one test per `TEST()` macro for clarity and independent test runs.
- Keep each test focused on a particular behavior or property.

---

## 6. Troubleshooting Common Issues

<Tip>
**Test Does Not Compile?** Check for missing `#include <gtest/gtest.h>` or incorrect linking to `gtest` libraries.
</Tip>

<Tip>
**Tests Run but No Output?** Ensure you call `testing::InitGoogleTest(&argc, argv);` before `RUN_ALL_TESTS()`.
</Tip>

<Warning>
**Ignoring RUN_ALL_TESTS() Return Value:** Doing so will cause a compiler error and may falsely indicate test success.
Always return this value from `main()`.
</Warning>

<Tip>
**Naming Tests With Underscores:** Avoid underscores in `TestSuiteName` and `TestName` to prevent naming conflicts.
See the [FAQ on naming](docs/faq.md#Why_should_test_suite_names_and_test_names_not_contain_underscore) for details.
</Tip>

---

## 7. Next Steps

After writing and running your first test:

- Explore writing *test fixtures* with `TEST_F()` for sharing data across tests.
- Learn about *assertions* in depth to better verify conditions.
- Experiment with *parameterized tests* (`TEST_P()`) to run tests across multiple inputs.
- Read the [GoogleTest Primer](docs/primer.md) and [Testing Reference](docs/reference/testing.md) for detailed concepts.

---

## Resources

- [GoogleTest Primer](docs/primer.md)
- [GoogleTest FAQ](docs/faq.md)
- [Installing with CMake](getting-started/setup-and-installation/installing-with-cmake)
- [Assertions and Test Patterns](guides/core-test-workflows/assertions-best-practices)

---

Start your test-writing journey with confidence and gradually build up your test suite to ensure your code behaves as expected!

---

*Happy Testing!*