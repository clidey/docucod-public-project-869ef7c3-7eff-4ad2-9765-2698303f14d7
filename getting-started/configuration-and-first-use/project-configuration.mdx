---
title: "Project Configuration"
description: "Detailed walkthrough for linking GoogleTest/GoogleMock to your project, including include paths, library linking, and integration with IDEs or build systems. Empowers users to set up their development environment confidently."
---

# Project Configuration

Detailed walkthrough for linking GoogleTest/GoogleMock to your project, including include paths, library linking, and integration with IDEs or build systems. This guide empowers you to set up your development environment confidently and seamlessly.

---

## 1. Overview

Integrating GoogleTest and GoogleMock involves correctly configuring your project to include necessary header paths, link appropriate libraries, and optionally integrate with your IDE or build system like CMake. This page provides a step-by-step guide for achieving a fully functional test environment.

## 2. Setting Include Paths

GoogleTest and GoogleMock require their header files to be accessible by your compiler during the build process. Correctly setting these include paths ensures your project can find all necessary declarations.

### Include Path Directories

When incorporating GoogleTest/GoogleMock, add the following include directories to your compiler's search paths:

- For GoogleTest:
  - `googletest/include`
  - `googletest`

- For GoogleMock:
  - `googlemock/include`
  - `googlemock`
  - GoogleTest's include dirs (as GoogleMock depends on GoogleTest)


#### Example: Include Paths in CMake

If you are using CMake, GoogleTest and GoogleMock targets export these include directories automatically. When building your test target, link against GoogleTest or GoogleMock, and CMake will handle the include directories.

```cmake
# For GoogleTest-only
find_package(GTest REQUIRED)
add_executable(my_tests test/my_tests.cc)
target_link_libraries(my_tests PRIVATE GTest::gtest_main)

# For GoogleMock (which includes GoogleTest)
find_package(GMock REQUIRED)
add_executable(my_mock_tests test/my_mock_tests.cc)
target_link_libraries(my_mock_tests PRIVATE GMock::gmock_main)
```


## 3. Linking Libraries

Your test binaries need to link against the appropriate GoogleTest or GoogleMock libraries.

- `gtest` library
- `gtest_main` library (defines main() function for your test executable)
- `gmock` library
- `gmock_main` library

Link to either `gtest_main` or `gmock_main` if you want to use the provided main() entry point. If you write your own `main()`, link only the core libraries (`gtest`/`gmock`).

### Static vs Shared Libraries

- By default, GoogleTest and GoogleMock build as static libraries.
- You can control shared vs static through CMake `BUILD_SHARED_LIBS` option.
- On Windows, Visual Studio project compatibility and runtime linkage (CRT) can affect how you configure linking (see the CMake option `gtest_force_shared_crt` to match your runtime linkage).

### CMake Linking Examples

GoogleTest libraries:
```cmake
target_link_libraries(my_target PRIVATE GTest::gtest)
# or link with gtest_main for default main()
target_link_libraries(my_target PRIVATE GTest::gtest_main)
```

GoogleMock libraries:
```cmake
target_link_libraries(my_target PRIVATE GMock::gmock)
# or link with gmock_main for default main()
target_link_libraries(my_target PRIVATE GMock::gmock_main)
```

## 4. Integration with Build Tools and IDEs

### Using CMake

GoogleTest and GoogleMock provide official CMake scripts and targets, but they are community-maintained. The recommended way to integrate:

1. Use `add_subdirectory` to add the GoogleTest and/or GoogleMock source tree to your build.
2. Use `target_link_libraries` to link your test executables to the provided targets.

Example CMake snippet:

```cmake
cmake_minimum_required(VERSION 3.13)
project(MyProject)

# Add GoogleTest (if source is a subdirectory or fetched)
add_subdirectory(path/to/googletest)

add_executable(my_tests tests/my_tests.cc)
target_link_libraries(my_tests PRIVATE gtest_main)

enable_testing()
add_test(NAME my_tests COMMAND my_tests)
```

### Using pkg-config

GoogleTest provides `.pc` files for pkg-config. If your environment supports pkg-config:

```cmake
find_package(PkgConfig REQUIRED)
pkg_search_module(GTEST REQUIRED gtest_main)

add_executable(testapp samples/sample3_unittest.cc)
target_compile_options(testapp PRIVATE ${GTEST_CFLAGS})
target_link_libraries(testapp PRIVATE ${GTEST_LDFLAGS})

enable_testing()
add_test(NAME example_test COMMAND testapp)
```

### IDE Support

- Ensure the include directories and linked libraries are configured in your IDE project settings.
- Import GoogleTest/GoogleMock CMake projects if your IDE supports CMake.
- On Visual Studio, the provided `.sln` and `.vcxproj` files generated by building GoogleTest/GoogleMock may be opened directly.

## 5. Best Practices & Tips

- **Use provided main()**: For simplest startup, link against `gtest_main` or `gmock_main`. Otherwise, initialize GoogleTest manually with `testing::InitGoogleTest()`.
- **Threading Support**: GoogleTest detects pthread availability automatically, add `-DGTEST_HAS_PTHREAD=1` if needed.
- **Match Runtime Libraries**: On Windows/MSVC, use `gtest_force_shared_crt` CMake option to match your project’s runtime linkage to avoid linker errors.
- **Build GoogleTest as Part of Your Project**: Avoid mixed compiler/linker flags by building GoogleTest inside your main project using `add_subdirectory`.
- **Build Samples and Tests**: Enable `gtest_build_samples` and `gtest_build_tests` CMake options to build example tests for verification.

## 6. Common Pitfalls

| Issue                                         | Solution                                                      |
|-----------------------------------------------|---------------------------------------------------------------|
| Linker errors about missing GoogleTest symbols | Ensure libraries linked: link either `gtest`/`gmock` or `gtest_main`/`gmock_main`.| 
| Compilation errors about missing headers        | Confirm include paths include `googletest/include` and `googlemock/include` where relevant.| 
| Runtime errors due to mixing static/shared CRT libraries | On Windows with MSVC, use `-Dgtest_force_shared_crt=ON` or match your project’s runtime setting.| 
| Test executable missing `main()` function       | Link against `gtest_main` or `gmock_main` libraries or implement `main()` yourself.| 

## 7. Verification: Running Your First Test

1. Build your test executable linking with GoogleTest or GoogleMock.
2. Run the executable; you should see output from GoogleTest's test runner.
3. Confirm tests are discovered and executed.

Example command line:

```bash
./my_tests
```

Expected output snippet:

```text
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from MyTestSuite
[ RUN      ] MyTestSuite.Test1
[       OK ] MyTestSuite.Test1 (0 ms)
[ RUN      ] MyTestSuite.Test2
[       OK ] MyTestSuite.Test2 (0 ms)
[----------] 2 tests from MyTestSuite (0 ms total)

[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If you see the above, your project configuration is correct.

## 8. Additional Resources and Next Steps

- [Installing with CMake](https://github.com/google/googletest/blob/main/docs/getting-started/setup-and-installation/installing-with-cmake.md): Guide for installing and building GoogleTest with CMake.
- [Writing and Running Your First Test](https://github.com/google/googletest/blob/main/docs/getting-started/configuration-and-first-use/writing-first-test.md): A tutorial on authoring and running basic tests.
- [Quick Verification Checklist](https://github.com/google/googletest/blob/main/docs/getting-started/configuration-and-first-use/quick-verification.md): Steps to validate your setup.

---

## Troubleshooting

<AccordionGroup title="Common Build & Linking Issues">
<Accordion title="Linker errors related to runtime library mismatch on Windows">
Ensure that the GoogleTest’s runtime flags match your project. Use the `gtest_force_shared_crt` CMake option when building to switch to dynamic CRT linkage if your project uses dynamic CRT.
</Accordion>
<Accordion title="Missing headers during compilation">
Verify that your include directories contain both GoogleTest and GoogleMock include paths if using mocks. Also confirm that you have not renamed or moved source files without updating include paths.
</Accordion>
<Accordion title="Undefined reference to GoogleTest symbols">
Double-check that your target links against `gtest`, `gtest_main`, `gmock`, or `gmock_main` as appropriate.
</Accordion>
</AccordionGroup>

<Note>
If you are not using CMake, adapt these linkage and include instructions to your build system accordingly.
</Note>

---

## References

- GoogleTest GitHub Repository: [https://github.com/google/googletest](https://github.com/google/googletest)
- GoogleTest CMakeLists.txt details: https://github.com/google/googletest/blob/main/googletest/CMakeLists.txt
- GoogleMock CMakeLists.txt details: https://github.com/google/googletest/blob/main/googlemock/CMakeLists.txt

---

End of Project Configuration guide.
