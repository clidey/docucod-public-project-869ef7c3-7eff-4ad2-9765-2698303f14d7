---
title: "Validating Your Environment"
description: "Outlines simple steps and checks to confirm that GoogleTest and GoogleMock have been installed and configured properly. Encourages running provided example tests or using built-in validation commands to ensure the setup works before proceeding."
---

# Validating Your Environment

Ensure your GoogleTest and GoogleMock installation is correctly set up by following this straightforward validation guide. By running simple, provided example tests or utilizing built-in verification commands, you can confidently confirm that your testing environment is ready for use.

---

## 1. Confirm Installation and Build Success

Before validating further, make sure you have successfully built GoogleTest and GoogleMock according to the installation instructions for your platform. A successful build typically generates libraries (`libgtest.a`, `libgmock.a`) and headers accessible in your project's include path.

If you are unsure about your build, refer back to [Installation (CMake, Bazel & More)](/getting-started/setup-basics/installation-platforms) and [Configuration and Project Setup](/getting-started/setup-basics/configuration-setup).


## 2. Compile and Run the Example Tests

The GoogleTest repository includes example tests that are guaranteed to pass if your environment is correctly configured. Running these tests is the quickest way to validate your setup.

### Step-by-step Instructions

<Steps>
<Step title="Navigate to the GoogleTest build directory">
Open a terminal or command prompt and navigate to the directory where you built GoogleTest (e.g., `build` or your chosen build output directory).
</Step>
<Step title="Run the test executable">
Execute the test binary. For CMake builds, this might be:

```shell
ctest --output-on-failure
```

Or directly run the test executable, such as:

```shell
./gmock_tests
```

Observe the test results; all tests should pass with no errors.
</Step>
</Steps>


<Tip>
If tests fail, verify that your compiler and linker flags correctly include GoogleTest and GoogleMock headers and libraries.
Make sure your environment meets the [Prerequisites & System Requirements](/getting-started/setup-basics/prerequisites-requirements).
</Tip>


## 3. Run a Minimal User Test

To check your environment from your own code base, create a minimal test file using the GoogleTest and GoogleMock APIs. Here's a simple example:

```cpp
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using ::testing::Return;
using ::testing::_;

class MockExample {
 public:
  MOCK_METHOD(int, GetValue, (int), ());
};

TEST(GoogleMockEnvironmentTest, BasicMockCall) {
  MockExample mock;
  EXPECT_CALL(mock, GetValue(_)).WillOnce(Return(42));

  int result = mock.GetValue(7);
  EXPECT_EQ(result, 42);
}

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Compile and run:

```shell
$ g++ my_test.cc -lgmock -lgtest -pthread -o my_test
$ ./my_test
```

A successful run should show all tests passing.


## 4. Use Built-in Tools for Verification

GoogleMock provides functions to programmatically verify expectations on mocks.

- `Mock::VerifyAndClearExpectations(&mock_object)` verifies that all expected calls have been made and clears the expectations.
- `Mock::VerifyAndClear(&mock_object)` also clears default actions in addition to expectations.

Use these to ensure mocks are in expected state at any point in your test code.


## 5. Troubleshooting and Next Steps

### Common Pitfalls

- Forgetting to link both GoogleTest and GoogleMock libraries.
- Missing `-pthread` or equivalent threading flags, especially on Linux/macOS.
- Header files not in include path.
- Using mismatched versions of compiler and GoogleTest which require C++17.


### Additional Tips

- Use `--gmock_verbose=info` to get verbose logs, including detailed call arguments, which helps in debugging mock setup issues.

- Consider wrapping tests with `InSequence` to validate call orders, or use `NiceMock` to suppress uninteresting call warnings after validation.


## 6. Reference Links

- [Writing and Running Your First Test](/getting-started/running-first-test/your-first-test) for writing minimal tests
- [Troubleshooting Common Setup Issues](/getting-started/running-first-test/troubleshooting-setup) for addressing build or runtime problems
- [Configuration and Project Setup](/getting-started/setup-basics/configuration-setup) for setting up your project
- [Installation (CMake, Bazel & More)](/getting-started/setup-basics/installation-platforms) for detailed installation instructions


---

<Tip>
This page sits under the _First Test & Validation_ group. After successful environment validation, proceed to writing effective assertions and mocking behaviors via the guides like [Mocking and Setting Expectations](/guides/core-testing-workflows/mocking-and-expectations) and the [gMock Cookbook](docs/gmock_cook_book.md).
</Tip>


---

## Quick Validation Checklist

| Checkpoint                            | How to Verify                          |
|-------------------------------------|--------------------------------------|
| GoogleMock libraries available       | Compile/link test with `-lgmock` and `-lgtest` |
| Compiled example tests pass          | Run existing GoogleMock test binaries       |
| Basic mock function behaves as expected | Execute minimal user mock test (e.g., returns value as set in EXPECT_CALL) |
| Mock verification methods work       | Use `Mock::VerifyAndClearExpectations()` to validate mocks inside tests  |
| Verbose logging enabled if needed    | Run tests with `--gmock_verbose=info`          |


---

## Summary

This guide walks you through essential steps and checks to confirm your GoogleTest and GoogleMock installation is functional. Starting from verifying build success, running example tests, creating minimal user tests, to using built-in verification commands, it ensures a smooth and confident start with GoogleMock. For unresolved issues, refer to troubleshooting and official configuration documentation.
