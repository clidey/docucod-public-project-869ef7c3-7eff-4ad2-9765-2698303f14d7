---
title: "Writing and Running Your First Test"
description: "Provides a walkthrough for creating a simple test file, compiling, and executing it. Highlights directory structure, essential test macros, and points to example test and sample files users can reference for a successful first run."
---

# Writing and Running Your First Test

Welcome to your first step in using GoogleTest and GoogleMock! This guide walks you through creating a simple test file, compiling it, and running your test program successfully. By following these instructions, you'll understand the basic directory structure, the essential macros to write tests, and where to find example files to reference.

---

## 1. Directory Structure and Setup

Before writing any code, let's understand the minimal layout expected:

```
<your-project-root>/
  ├── tests/
  │    ├── your_first_test.cc
  │    └── mock_some_interface.h
  ├── include/
  │    └── ... (your public headers)
  ├── src/
  │    └── ... (your source files)
  └── CMakeLists.txt or BUILD (depending on build system)
```

- Your test files typically reside under `tests/`.
- Include necessary header files for GoogleTest and GoogleMock.


## 2. Writing a Basic Test File

Create a file named `your_first_test.cc` in your `tests/` folder.

### Minimal Example

```cpp
#include <gtest/gtest.h>

// Sample function to test.
int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

// Define a test case named FactorialTest and a test named HandlesZeroInput.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Another test within the same test suite.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
}

// main() is optional if you link with gtest_main.
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### Key Points

- `TEST(TestSuiteName, TestName)` defines a test.
- Use `EXPECT_*` macros to make assertions.
- `RUN_ALL_TESTS()` runs all defined tests and returns 0 if all succeed.


## 3. Compiling Your First Test

Ensure you have GoogleTest and GoogleMock installed and accessible in your build environment.

### Using CMake Example

Here is an example `CMakeLists.txt` snippet:

```cmake
cmake_minimum_required(VERSION 3.10)
project(FirstTest)

# Find GoogleTest package (assumes it is installed).
find_package(GTest REQUIRED)

add_executable(your_first_test tests/your_first_test.cc)

target_link_libraries(your_first_test GTest::gtest_main GTest::gmock_main pthread)

target_include_directories(your_first_test PRIVATE include)
```

Run:

```
mkdir build
cd build
cmake ..
make
```

### Using Bazel

If your project uses Bazel, create a `BUILD` file:

```python
cc_test(
    name = "your_first_test",
    srcs = ["your_first_test.cc"],
    deps = ["@com_google_googletest//:gmock_main"],
)
```

And run:

```
bazel test //tests:your_first_test
```

## 4. Running Your Test

After compilation, run the test executable:

```bash
./your_first_test
```

Expected output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If you see failures, GoogleTest will print detailed messages including file, line number, and expected vs actual values.


## 5. Referencing Example and Sample Test Files

For practical guidance and further examples, refer to the following:

- **Example test:** `googletest/samples/sample1_unittest.cc` shows a full test with simple assertions.
- **Sample mocks:** `googletest/samples/sample3_mocks.h` illustrates creating mocks with GoogleMock.
- GoogleTest Primer and Getting Started guides provide conceptual and detailed walkthroughs.


## 6. Common Pitfalls and Tips

- Always call `testing::InitGoogleTest(&argc, argv);` before running tests.
- If you link with `gtest_main` or `gmock_main`, you can omit defining `main()`.
- Use `EXPECT_*` macros for non-fatal failures; `ASSERT_*` to abort tests early if needed.
- Keep tests focused on one behavior and clearly name your test cases and tests.
- Use mocks to isolate dependencies, but mock only interfaces you own.


## 7. Next Steps

After successfully running your first test:

- Explore **Writing Effective Assertions** to learn varied checks.
- Read the **gMock for Dummies** to start mocking dependencies.
- Dive into **Mocking and Setting Expectations** for advanced mocking control.


---

## Additional Resources

- [GoogleTest Primer](../guides/getting-started/primer.md) – In-depth beginner guide.
- [Mocking for Dummies](../docs/gmock_for_dummies.md) – Introduction to mocks.
- [gMock Cookbook](../docs/gmock_cook_book.md) – Recipes and patterns.
- [Mocking Reference](../docs/reference/mocking.md) – Full gMock macros and usage.


---

*This guide prepares you for creating tests and understanding the full workflow of writing, compiling, running, and verifying C++ tests using GoogleTest and GoogleMock.*


---

### Callouts

<Tip>
If you're new to testing or unsure why tests fail, run your tests with verbose output enabled by adding `--gtest_break_on_failure` to stop exactly where an error occurs.
</Tip>

<Note>
Linking with `gtest_main` or `gmock_main` provides a ready-made `main()` function. Avoid defining `main()` yourself to prevent conflicts.
</Note>

<Warning>
Ensure all GoogleTest and GoogleMock headers are correctly included to avoid compilation errors.
</Warning>