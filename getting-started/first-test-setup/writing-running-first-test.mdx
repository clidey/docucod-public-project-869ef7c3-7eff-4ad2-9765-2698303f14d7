---
title: "Writing and Running Your First Test"
description: "Follow a hands-on walkthrough to create your first C++ test case using GoogleTest, and run it to see immediate results. Includes annotated code samples, expected output, and basic usage of key assertion macros."
---

# Writing and Running Your First Test

Welcome to your hands-on introduction to writing and running your first C++ test case using GoogleTest. This guide walks you through creating a simple test, running it, and understanding the results with annotated code examples and explanations of key GoogleTest features.

---

## 1. Prerequisites

Before diving in, ensure you have the following ready:

- **Development Environment:**
  - A C++17-compliant compiler (e.g., GCC 7+, Clang, MSVC 2017+).
  - GoogleTest and GoogleMock libraries installed and correctly linked to your project.
- **Basic C++ Knowledge:** Understanding of functions and classes is helpful.
- **Build Setup:** Ability to compile and run C++ code using your preferred build system or command line.

<Tip>
If you haven’t installed GoogleTest or set up your project yet, refer to the installation and project configuration guides in the Getting Started section.
</Tip>

---

## 2. Writing Your First Test

Your first test will check a simple function's output. The steps include writing the test file and using GoogleTest’s macros to assert expectations.

### Step 2.1: Create a Test Source File

Create a file named `sample_test.cc`.

### Step 2.2: Include the GoogleTest Header

At the top of your file, include GoogleTest’s main header:

```cpp
#include <gtest/gtest.h>
```

### Step 2.3: Write a Simple Test Function

Use the `TEST()` macro to define a test. This macro takes two parameters: a test suite name and a test name. Both must be valid C++ identifiers without underscores.

Example - Testing a simple factorial function:

```cpp
// Example function to test
int Factorial(int n) {
  if (n <= 1) return 1;
  return n * Factorial(n - 1);
}

// Test case
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);    // Checks factorial of 1
  EXPECT_EQ(Factorial(2), 2);    // Checks factorial of 2
  EXPECT_EQ(Factorial(3), 6);    // Checks factorial of 3
  EXPECT_EQ(Factorial(4), 24);   // Checks factorial of 4
}
```

### Understanding the Code:

- `TEST(FactorialTest, HandlesPositiveInput)`: Defines a test named `HandlesPositiveInput` in the test suite `FactorialTest`.
- `EXPECT_EQ(actual, expected)`: An assertion that verifies if `actual == expected`.

<Info>
For more assertion types, see the [Assertions Reference](../reference/assertions.md).
</Info>

---

## 3. Compiling and Running the Test

### Step 3.1: Compile

Compile your test program linking to GoogleTest and GoogleMock. Here is an example compilation command (adjust paths and filenames accordingly):

```bash
g++ sample_test.cc -o sample_test -lgtest -lgmock -pthread
```

### Step 3.2: Run the Test

Execute the compiled binary:

```bash
./sample_test
```

If successful, you will see output similar to:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from FactorialTest
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 1 test from FactorialTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

<Note>
If tests fail, the output will display the failure location, expected and actual values, helping you debug.
</Note>

---

## 4. Understanding Key GoogleTest Concepts

### Test Suites and Test Names

- Test suites group related tests, identified by their first `TEST()` argument (e.g., `FactorialTest`).
- Tests within suites have unique names (e.g., `HandlesPositiveInput`).
- Reusing test names in different suites is allowed.

### Assertions: EXPECT vs ASSERT

- `EXPECT_*` assertions report failures but continue test execution.
- `ASSERT_*` assertions abort the current test on failure.
- Use `ASSERT_*` when continuing makes no sense (e.g., dereferencing null pointers).

### Fixture Usage (Simple Note)

To reuse setup code or share objects across multiple tests, you can use test fixtures with `TEST_F()` (covered in other guides).

---

## 5. Running Your Test with GoogleMock Support

GoogleMock is bundled with GoogleTest, so when you run your tests compiled with GoogleMock support, you also get mocking capabilities out of the box.

Here’s a minimal example of a `main()` function that initializes GoogleTest and runs all tests:

```cpp
#include <gmock/gmock.h>

int main(int argc, char** argv) {
  testing::InitGoogleMock(&argc, argv);
  return RUN_ALL_TESTS();
}
```

<Note>
`InitGoogleMock()` initializes both GoogleMock and GoogleTest. If you only call `InitGoogleTest()`, mocks might not initialize properly.
</Note>

---

## 6. Example: Running the Provided Sample Test

To illustrate, here is a complete minimal example file `sample_test.cc`. Save and compile this to test your environment.

```cpp
#include <gtest/gtest.h>

// Sample function
int Add(int a, int b) {
  return a + b;
}

// Test suite and test
TEST(AdditionTest, AddsPositiveNumbers) {
  EXPECT_EQ(Add(1, 1), 2);
  EXPECT_EQ(Add(2, 3), 5);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Run the commands:

```bash
g++ sample_test.cc -o sample_test -lgtest -lgmock -pthread
./sample_test
```

You should see output confirming that the test passed.

---

## 7. Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Test Not Running or Found">
- Ensure you use correct `TEST` or `TEST_F` macros.
- Check that `RUN_ALL_TESTS()` is called in `main()` after initialization.
</Accordion>
<Accordion title="Linking Errors">
- Make sure GoogleTest and GoogleMock libraries and headers are found.
- Confirm compiler and linker flags include `-lgtest -lgmock -pthread`.
</Accordion>
<Accordion title="Test Failures Unexpected">
- Confirm your `EXPECT_` and `ASSERT_` statements correctly express your expectations.
- Use `--gtest_repeat=1 --gtest_filter=*` to run all tests with full verbosity.
</Accordion>
<Accordion title="Compiler Errors Using MOCK_METHOD">
- Verify your function signatures match the mocked interface.
- Enclose types containing commas in parentheses or use type aliases.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps

- Explore writing test fixtures with [`TEST_F()`](../reference/testing.md#TEST_F) to share setup code.
- Learn to write and configure mocks with GoogleMock by visiting the [Getting Started with Mocking](../guides/core-workflows/introduction-to-mocking.md) guide.
- Dive into assertion macros in detail at the [Assertions Reference](../reference/assertions.md).
- Understand organizing larger tests and suites to improve maintainability.

<Tip>
Writing tests is iterative — start small, grow confidence with simple tests, then extend coverage and complexity as your project evolves.
</Tip>

---

## 9. Related Documentation

- [GoogleTest Primer](../docs/primer.md) — Understand the basics of GoogleTest testing framework.
- [GoogleMock for Dummies](../docs/gmock_for_dummies.md) — Introduction to mocking with GoogleMock.
- [gMock Cookbook](../docs/gmock_cook_book.md) — Practical recipes for common mocking scenarios.
- [Writing and Running Your First Unit Test](../guides/core-workflows/writing-unit-tests.md) — For another perspective and advanced concepts on unit testing.

---

## 10. Summary

You’ve learned the basics of setting up a test with GoogleTest: writing tests with `TEST()`, compiling, running, and interpreting simple test results. With this foundation, you’re ready to start expanding your test suite and explore mocking dependencies using GoogleMock.
