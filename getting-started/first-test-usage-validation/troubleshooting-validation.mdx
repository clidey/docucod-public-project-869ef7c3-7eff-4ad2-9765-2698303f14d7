---
title: "Troubleshooting and Validation"
description: "Identify and resolve common setup and build issues—such as missing dependencies or linking failures. Confirm your installation with quick validation steps and understand how to interpret and address test output."
---

# Troubleshooting and Validation

Identify and resolve common setup and build issues—such as missing dependencies or linking failures. Confirm your installation with quick validation steps and understand how to interpret and address test output.

---

## 1. Common Setup Issues and How to Fix Them

When working with GoogleTest and GoogleMock, you might encounter configuration or build problems. Here is a practical approach to diagnose and resolve these challenges:

### 1.1 Missing or Incorrect Dependencies

- **Problem**: Build errors indicating missing headers like `gtest/gtest.h` or `gmock/gmock.h`.
- **Solution**:
  1. Ensure you have installed GoogleTest and GoogleMock correctly.
  2. Verify that your include paths point to the correct directories where the headers are located.
  3. Check that your build system (CMake, Bazel, Makefiles) correctly links against GoogleTest libraries.

<Tip>
For CMake, verify `target_link_libraries` includes `gtest` and `gmock`.
</Tip>

### 1.2 Linking Failures

- **Problem**: Linker errors about undefined symbols from GoogleTest or GoogleMock.
- **Solution**:
  1. Confirm that your test target links with GoogleTest and GoogleMock libraries.
  2. Verify the correct order of linking (e.g., `-lgmock -lgtest -lpthread`).
  3. On Windows, ensure the proper configuration for calling conventions.

### 1.3 Compiler Compatibility

- **Problem**: Compilation failures due to language standard or compiler version issues.
- **Solution**:
  1. GoogleTest and GoogleMock require a modern C++ compiler supporting at least C++11.
  2. Adjust your compiler flags to enable the appropriate C++ standard (e.g., `-std=c++11` or higher).
  3. Consult the [Prerequisites & System Requirements](getting-started/setup-prerequisites-installation/prerequisites-requirements) for supported platforms and compiler versions.

### 1.4 Build System Misconfigurations

- **Problem**: Tests build but fail to run or are not discovered.
- **Solution**:
  1. Check that your test executable calls `testing::InitGoogleTest()` and/or `testing::InitGoogleMock()`.
  2. Confirm that your build system includes `-pthread` or platform-specific threading libraries where needed.
  3. Make sure test discovery mechanisms (if using IDEs or other tools) are correctly configured.

---

## 2. Quick Validation of Installation

After installation, validate your environment by building and running a simple test.

### 2.1 Writing a Simple Test

Create a test file `sample_test.cc` with the following content:

```cpp
#include <gtest/gtest.h>

TEST(SimpleTest, BasicAssertions) {
  EXPECT_EQ(4, 2 + 2);
  EXPECT_NE(5, 2 * 2);
}

int main(int argc, char** argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

### 2.2 Building the Test

Using CMake, for example, add:

```cmake
add_executable(sample_test sample_test.cc)
target_link_libraries(sample_test gtest gtest_main)
```

Then build and run:

```bash
mkdir build && cd build
cmake ..
make
./sample_test
```

### 2.3 Expected Output

The test should run successfully and display:

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from SimpleTest
[ RUN      ] SimpleTest.BasicAssertions
[       OK ] SimpleTest.BasicAssertions (0 ms)
[----------] 1 test from SimpleTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

---

## 3. Understanding Common GoogleMock Test Output

GoogleMock enhances GoogleTest with mock object support. Interpreting output when writing mock-based tests is essential.

### 3.1 Expected Call

An expected call occurs when an invocation matches your `EXPECT_CALL` expectation.

Example:

```
FILE:#: EXPECT_CALL(foo_, Bar2(0, _)) invoked
Stack trace:

FILE:#: Mock function call matches EXPECT_CALL(foo_, Bar2(0, _))...
    Function call: Bar2(0, 0)
          Returns: false
Stack trace:
[       OK ]
```

This shows that the expected call was made and passed.

### 3.2 Unexpected Call

Occurs when a mock method is called with arguments not matching any active expectation.

Example:

```
Unexpected mock function call - returning default value.
    Function call: Bar2(1, 0)
Google Mock tried the following 1 expectation, but it didn't match:
FILE:#: EXPECT_CALL(foo_, Bar2(0, _))...
```

This means that `Bar2` was called with an argument differing from expectation, causing a failure.

### 3.3 Excessive Call

When a method is called more times than expected (upper bound exceeded), the test will fail.

Example:

```
Mock function called more times than expected - returning default value.
    Function call: Bar2(0, 1)
         Expected: to be called once
           Actual: called twice - over-saturated and active
```

### 3.4 Uninteresting Call

A call for which there is no expectation.

This triggers a warning but not a test failure by default (called "naggy" behavior):

```
GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: Bar2(0, 1)
          Returns: false
NOTE: You can safely ignore the above warning unless this call should not happen...
```

To suppress this warning, either use `NiceMock` or explicitly add expectations matching these calls.

### 3.5 Retired Expectations

An expectation marked with `.RetiresOnSaturation()` becomes inactive after meeting its cardinality.

Calls matching retired expectations may fail with an unexpected call error:

```
Unexpected mock function call - returning default value.
Google Mock tried the following 2 expectations, but none matched:
FILE:#: tried expectation #0: ...
Expected: the expectation is active
  Actual: it is retired
```

This indicates the call hit an expectation that is no longer active.

### 3.6 Unsatisfied Prerequisites

When expectations are ordered with sequences or prerequisites, calling a method out of order will fail:

```
Unexpected mock function call - returning default value.
Google Mock tried the following 2 expectations, but none matched:
Expected: all pre-requisites are satisfied
  Actual: the following immediate pre-requisites are not satisfied:
pre-requisite #0
```

Indicates that an expectation requires some prior calls before it becomes active.

### 3.7 Mismatched Arguments or Conditions (`With()`)

If argument matchers or `.With()` conditions don't match a call, GoogleMock will report why:

```
Expected arg #0: references the variable ...
Actual: "Ho" which is located ...
Expected: to be called once
Actual: never called - unsatisfied and active
```

This helps debug argument mismatches.

---

## 4. Tips for Effective Troubleshooting

- **Enable verbose logging:** Use `--gmock_verbose=info` to get detailed mock call traces including stack traces.

- **Check expectation order:** If using `.InSequence()` or `.After()`, confirm call ordering matches.

- **Suppress noisy warnings:** Switch to `NiceMock<YourMock>` to ignore uninteresting calls if intentional.

- **Verify mock destruction:** Leaked mocks prevent verification. Use `testing::Mock::AllowLeak()` if deliberate.

- **Review matching rules:** Remember expectation matching is from last defined to first; order matters.

- **Ensure complete mock definitions:** Mock all virtual methods you expect to invoke.

---

## 5. Further Resources and Next Steps

- Read the [gMock Cookbook](guides/advanced-testing-patterns/custom-matchers-actions) for recipes on advanced debugging and use cases.

- Consult the [Mocking Reference](api-reference/core-mocking-apis/expectations-on-call) for detailed behavior of `EXPECT_CALL` and `ON_CALL`.

- Review [Mock Object Behaviors](api-reference/core-mocking-apis/mock-object-behaviors) to understand `NiceMock`, `NaggyMock`, and `StrictMock` models.

- Explore [Writing Your First Test](getting-started/first-test-usage-validation/creating-first-test) if you are beginning with GoogleTest.

- Use the [Troubleshooting guide](faq/troubleshooting-integration/build-issues) for more problem-solving strategies.

---

## 6. Troubleshooting Checklist

<AccordionGroup title="Checklist">
<Accordion title="Build fails with missing headers or libraries">
1. Verify GoogleTest and GoogleMock are installed.
2. Check include and linker paths.
3. Review build system dependencies.
</Accordion>
<Accordion title="Test binary runs but no tests found">
1. Confirm `InitGoogleTest()` or `InitGoogleMock()` is called.
2. Check naming conventions and test discovery.
</Accordion>
<Accordion title="Unexpected or excessive mock calls">
1. Check `EXPECT_CALL` argument matchers.
2. Review call sequences and constraints.
3. Use verbose mode to trace calls.
4. Adjust `.RetiresOnSaturation()` or `.Times()` as needed.
</Accordion>
<Accordion title="Uninteresting call warnings">
1. Add expected calls for those methods or switch to `NiceMock`.
2. Evaluate if `ON_CALL` default actions are set appropriately.
</Accordion>
<Accordion title="Leaks detected on test exit">
1. Delete all mocks or use `Mock::AllowLeak()` if leaks are intentional.
2. Verify ownership and lifetimes within tests.
</Accordion>
</AccordionGroup>

---

## 7. Example: Enabling Verbose Output for Debugging

Run your tests with the additional flag to get detailed insights:

```bash
./your_test_binary --gmock_verbose=info
```

You will see trace messages for all mock function invocations, matched expectations, and detailed argument values.

<Note>
Verbose mode helps pinpoint why an expectation was not matched or why an unexpected call occurred.
</Note>

---

For more detailed explanations and examples, consult the [GoogleMock Output Test](googlemock/test/gmock_output_test_.cc), and compare your output to the [golden output](googlemock/test/gmock_output_test_golden.txt).


---

# Additional Notes

This documentation focuses explicitly on troubleshooting and interpreting test output for GoogleTest and GoogleMock. For comprehensive information about defining mocks, setting expectations, matchers, and actions, see related references and guides in the navigation.


---