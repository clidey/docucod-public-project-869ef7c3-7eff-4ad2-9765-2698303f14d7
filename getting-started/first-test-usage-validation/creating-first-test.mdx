---
title: "Writing Your First Test"
description: "A hands-on guide to writing your first test using GoogleTest. Walk through creating a simple test case, including implementation details and explanations of basic test macros."
---

# Writing Your First Test

Welcome to your hands-on guide for composing your first test case using GoogleTest. This guide will walk you through creating a simple, runnable test, explaining the key building blocks of GoogleTestâ€™s testing macros, and offering a clear introduction to writing effective C++ tests.

---

## 1. Understanding the Basics of a GoogleTest Test

A GoogleTest test case combines two pieces:

- **Test Suites**: Logical groupings of related tests.
- **Test Functions**: Individual tests that assert behavior.

GoogleTest uses the `TEST` macro to define these test functions, where you pass the Test Suite name and the test name. Each test is an independent function.

### Core Syntax

```cpp
TEST(TestSuiteName, TestName) {
  // Test body: assert expected behavior here.
  EXPECT_EQ(actual_value, expected_value);
}
```

#### Explanation:
- `TestSuiteName`: Groups related tests.
- `TestName`: Describes the specific behavior under test.
- Inside the test body, assertions like `EXPECT_EQ` verify code behavior.


## 2. Writing Your First Test Step-by-Step

Let's create a simple test validating an arithmetic function `Factorial()`. This example will guide you through:

- Writing the test
- Compiling and running it
- Understanding the test output

### Step 1: Define the Test Function

Imagine you have a function:

```cpp
int Factorial(int n);
```

Your test might look like this:

```cpp
#include <gtest/gtest.h>

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Step 2: Compile Your Test

Ensure you link against GoogleTest and include necessary headers:

```sh
# Example for compilation
c++ -std=c++11 -isystem /path/to/gtest/include \
    -pthread my_factorial_test.cc /path/to/libgtest.a -o my_factorial_test
```

_Tip_: Use your preferred build system or follow the installation and configuration instructions in the related [Installing GoogleTest](../setup-prerequisites-installation/installing-googletest.md) and [Configuration Basics](../setup-prerequisites-installation/configuration-basics.md) pages.

### Step 3: Run Your Test

Execute the test binary:

```sh
./my_factorial_test
```

Sample output:

```
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[----------] 2 tests from FactorialTest (1 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 2 tests.
```

Your test passed if GoogleTest reports `[  PASSED  ]`.

---

## 3. Understanding Basic Test Macros

GoogleTest provides various assertions to verify behavior:

- `EXPECT_EQ(val1, val2)`: Checks for equality; non-fatal failure if false.
- `ASSERT_EQ(val1, val2)`: Same, but fatal failure stopping current test.
- `EXPECT_TRUE(condition)` / `ASSERT_TRUE(condition)`: Checks truth.
- `EXPECT_FALSE(condition)` / `ASSERT_FALSE(condition)`: Checks falsehood.

Choose `EXPECT_*` macros when you want tests to continue after failures, and `ASSERT_*` when continuing makes no sense.

Example:

```cpp
TEST(MyTestSuite, CheckValues) {
  int x = ComputeMeaningOfLife();
  ASSERT_EQ(x, 42) << "Meaning of life must be 42";
  EXPECT_GT(x, 0);
}
```

Customize failure messages by appending streams as shown, to provide context.

---

## 4. Organizing Tests with Test Fixtures

When tests share common setup and teardown, use **test fixtures** by deriving a class from `testing::Test` and defining member variables or functions.

Example:

```cpp
class FactorialTest : public ::testing::Test {
 protected:
  void SetUp() override {
    // Common initialization for each test
  }

  void TearDown() override {
    // Cleanup
  }
};

TEST_F(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(5), 120);
}
```

Here, `TEST_F` ties the test to the fixture class.

---

## 5. Practical Tips for Effective Tests

- Use **descriptive test and suite names** reflecting behavior being verified.
- Avoid overly strict expectations on implementations (reduce brittleness).
- Provide **meaningful failure messages** with assertions to help debugging.
- Prefer `EXPECT_*` macros for less intrusive failures.
- Separate tests by behavior for clarity and maintainability.
- Run tests frequently during development to catch regressions early.
- Use fixtures to avoid repeating setup/teardown code.

---

## 6. Troubleshooting Common Issues

| Issue                                            | Solution                                      |
|--------------------------------------------------|----------------------------------------------|
| Test not compiling due to missing headers         | Include `<gtest/gtest.h>` and link `libgtest.a` or equivalent |
| Tests run but no outputs shown                     | Make sure you call `RUN_ALL_TESTS()` in your main function and initialize GoogleTest with `InitGoogleTest()` |
| Unexpected test failures on similar tests         | Check your test isolation; use fixtures to avoid state sharing |
| Tests hang or crash on execution                    | Review your assertions or external dependencies, use debugging tools |

If issues persist, refer to the [GoogleTest Primer](../primer.md) and [Getting Started Troubleshooting](../first-test-usage-validation/troubleshooting-validation.md) sections.

---

## 7. Next Steps & Useful Links

- Explore [Building & Running Tests](../first-test-usage-validation/building-running-tests.md) to automate test execution.
- Delve into [Mocking Reference](../../reference/mocking.md) and [gMock Cookbook](../../gmock_cook_book.md) for advanced mock usage.
- Expand understanding with [Core Concepts & Terminology](../../overview/product-intro/core-concepts-terminology.md).
- Access API details for assertions and matchers to enhance test expressiveness.

---

For complete guidance, always ensure you have gone through the prerequisite installation and configuration steps covered on [Prerequisites & System Requirements](../setup-prerequisites-installation/prerequisites-requirements.md) and [Installing GoogleTest](../setup-prerequisites-installation/installing-googletest.md).

Happy testing!