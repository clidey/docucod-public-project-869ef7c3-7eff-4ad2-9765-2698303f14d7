---
title: "Writing Your First Test"
description: "Follow a step-by-step walkthrough on writing, building, and running your first test using GoogleTest. See how to structure basic ASSERT/EXPECT statements and interpret test runner output, with code examples adapted for new users."
---

# Writing Your First Test with GoogleTest

Welcome to your first hands-on experience with GoogleTest! This guide walks you through writing, building, and running your initial C++ tests using GoogleTest. You’ll learn how to create basic tests, use assertion macros to verify behavior, and read test outputs effectively.

---

## 1. Preparing to Write Your First Test

Before diving into test code, ensure that you have installed GoogleTest correctly. If you have not yet set up GoogleTest, please refer to the [Installation Guide](../setup-and-installation/installing-with-cmake-bazel.md) or [Verifying Your Installation](../setup-and-installation/verifying-installation.md).

You also need a basic C++ development environment with support for C++17 or later.

<Tip>
Start with small, focused tests reflecting specific behaviors of your code. GoogleTest encourages independent, repeatable tests grouped into clear suites.
</Tip>

## 2. Creating Your First Test File

Create a new C++ source file, for example, `first_test.cpp`. This file will contain your test cases. To get started quickly, include the GoogleTest header:

```cpp
#include <gtest/gtest.h>
```

This header defines all necessary macros and functions.

## 3. Writing Simple Tests Using TEST()

Use the `TEST()` macro to define and name a test. The first parameter is the test suite name (a logical grouping), and the second is the test name within that suite. Note:

- Both names must be valid C++ identifiers.
- Avoid underscores in these names as they can cause naming issues.

Below is a simple example that tests a hypothetical factorial function:

```cpp
// Function to test
int Factorial(int n) {
  if (n <= 1) 
    return 1;
  else 
    return n * Factorial(n - 1);
}

// Tests factorial of 0.
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

// Tests factorial of positive numbers.
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}
```

### Key Points:
- `EXPECT_EQ(actual, expected)` checks equality and reports failure without aborting the test, allowing multiple checks.
- Use `ASSERT_*` when failure should abort the test immediately.

## 4. Using Assertions Effectively

Assertions are the core of GoogleTest. They verify if conditions hold true. There are two categories:

- **Fatal assertions (e.g., `ASSERT_EQ`)**: Abort the current test function immediately upon failure.
- **Non-fatal assertions (e.g., `EXPECT_EQ`)**: Report failure but continue execution to show more errors in a single run.

Choose `EXPECT_*` to catch multiple failures per test, and `ASSERT_*` when a failure means the test cannot proceed safely.

### Providing Custom Failure Messages

You can append extra messages to assertions for clarity:

```cpp
ASSERT_EQ(vec1.size(), vec2.size()) << "Vectors differ in length";
for (size_t i = 0; i < vec1.size(); ++i) {
  EXPECT_EQ(vec1[i], vec2[i]) << "Mismatch at index " << i;
}
```

This helps quickly identify the cause and location of test failures.

## 5. Building and Running Your Tests

### Main Function

If you link to `gtest_main` (common approach), you do not need to write your own `main()`.

Otherwise, provide this boilerplate:

```cpp
#include <gtest/gtest.h>

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

`InitGoogleTest` initializes command-line flags, and `RUN_ALL_TESTS()` runs all tests registered.

### Build Commands

Use your build system (CMake, Bazel, or others) to compile your source along with GoogleTest libraries. See:
- [Building with CMake](../../getting-started/setup-and-installation/installing-with-cmake-bazel.md)
- [Building with Bazel](../../getting-started/setup-and-installation/quickstart-bazel.md)

### Running Tests

After building, execute your test binary. You will see output like:

```
[==========] Running 2 tests from 1 test suite.
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput (0 ms)
[ RUN      ] FactorialTest.HandlesPositiveInput
[       OK ] FactorialTest.HandlesPositiveInput (0 ms)
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```

If tests fail, relevant file and line number information will be displayed, along with failure messages.

## 6. Understanding Test Output

- **`[ RUN      ]`** indicates a test is executing.
- **`[       OK ]`** marks a successful test.
- **`[  FAILED  ]`** marks a failed test.

Failures include assertion messages and locations to help debug.

## 7. Using Test Fixtures for Shared Setup (Optional Next Step)

When several tests need common setup, define a test fixture class derived from `testing::Test` and use `TEST_F()` instead of `TEST()`. This is covered in detail in the [GoogleTest Primer](../../primer.md#same-data-multiple-tests).

## 8. Practical Tips & Common Pitfalls

- **Avoid underscores in test and suite names** to prevent naming conflicts.
- **Use `EXPECT_*` for soft checks** allowing the test to continue and reveal multiple issues.
- **Use `ASSERT_*` for essential conditions** where continuing the test does not make sense.
- **Keep tests small and focused** for faster diagnosis and clearer reports.
- **Provide clear failure messages** to aid debugging.
- **Always return the result of `RUN_ALL_TESTS()` from `main()`** to properly report test status to CI systems.

<Warning>
Never ignore the return value of `RUN_ALL_TESTS()`. Doing so can cause your test results to be misinterpreted by automated systems.
</Warning>

## 9. Troubleshooting Your First Test

- If tests do not run:
  - Confirm `InitGoogleTest()` is called before `RUN_ALL_TESTS()`.
  - Ensure the test binary links to `gtest_main` or includes a proper `main()`.
- If assertions don’t report failures:
  - Verify macros are correctly used (`EXPECT_EQ`, not `EXPECT_EQUAL`).
  - Check for C++ exceptions interfering if enabled.
- If compilation errors arise:
  - Check for invalid test names containing underscores.
  - Confirm C++17 or later support is enabled in your compiler.

## 10. Next Steps

Now that you have written and run your first tests, explore:

- [GoogleTest Primer](../../primer.md) for deeper understanding of concepts.
- [Writing Test Fixtures](../../primer.md#same-data-multiple-tests) for reusing test setup.
- [GoogleTest Samples](../../samples.md) for diverse example tests.
- [Advanced GoogleTest Topics](../../advanced.md) to leverage powerful features.

---

## Example: Complete Minimal Test File

```cpp
#include <gtest/gtest.h>

// Sample function to test
int Square(int x) {
  return x * x;
}

// Test suite named "SquareTest" and a test "Positive"
TEST(SquareTest, Positive) {
  EXPECT_EQ(Square(2), 4);
  EXPECT_EQ(Square(3), 9);
}

// Another test in the same suite
TEST(SquareTest, Zero) {
  EXPECT_EQ(Square(0), 0);
}

// Main function
int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Build and run this file to verify your environment.

---

For more detailed step-by-step instructions tailored to your build system, refer to the installation guides in the [Setup & Installation](../../setup-and-installation/) section.

---

© Google 2024

---