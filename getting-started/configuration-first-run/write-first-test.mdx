---
title: "Write and Run Your First Test"
description: "Step-by-step instructions to author a basic test using GoogleTest, including code samples. Covers compiling and running the test, interpreting output, and demonstrates how to validate that the setup works end-to-end."
---

# Write and Run Your First Test

Welcome to your first hands-on experience with GoogleTest! This guide will walk you through creating a simple test program, compiling it, running the test, and understanding the results. By the end, you will have a working test that confirms your setup and shows the power of GoogleTest's assertion and test organization framework.

---

## 1. Create Your Test Source File

Start by creating a C++ source file, e.g., `my_first_test.cc`. This file will contain the code for your first test.

In the file, include the GoogleTest header and define a basic test:

```cpp
#include <gtest/gtest.h>

// Define a test named HandlesZeroInput in test suite FactorialTest
TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(1, 1);  // A simple assertion that checks if 1 equals 1
}
```

This test checks a trivial condition to verify your GoogleTest integration.

---

## 2. Compile Your Test

You need to compile your test file linking against the GoogleTest library.

### Using g++ (example for Linux/macOS)

```sh
g++ -std=c++17 -isystem /path/to/googletest/include -pthread my_first_test.cc /path/to/libgtest.a /path/to/libgtest_main.a -o my_first_test
```

- Replace `/path/to/googletest/include` with the actual path to GoogleTest headers.
- Replace `/path/to/libgtest.a` and `/path/to/libgtest_main.a` with the paths to the static libraries.

### Using CMake

Create a `CMakeLists.txt` for a smoother build process:

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyFirstTest)

# Enable testing support
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

add_executable(my_first_test my_first_test.cc)
target_link_libraries(my_first_test ${GTEST_LIBRARIES} pthread)

enable_testing()
add_test(NAME MyFirstTest COMMAND my_first_test)
```

Run CMake to configure and build your test.

---

## 3. Run Your Test

After compiling, execute your test binary from the command line:

```sh
./my_first_test
```

### Expected Output

```
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from FactorialTest
[ RUN      ] FactorialTest.HandlesZeroInput
[       OK ] FactorialTest.HandlesZeroInput
[----------] 1 test from FactorialTest ran. (0 ms total)
[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```

This output indicates the test execution flow and that your test passed.

---

## 4. Analyze the Test Code and Output

- The macro `TEST(TestSuiteName, TestName)` defines a test method under the specified suite.
- The **test suite** groups related tests and should logically reflect your code structure.
- The **assertion** `EXPECT_EQ(expected, actual)` checks equality; on failure, it reports but continues the test.

Running your test shows GoogleTest handles test registration, setup, execution, and teardown automatically.

---

## 5. Expand Your Test

You can add more assertions and test cases:

```cpp
TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(1, Factorial(1));
  EXPECT_EQ(2, Factorial(2));
  EXPECT_EQ(6, Factorial(3));
  EXPECT_EQ(40320, Factorial(8));
}
```

Make sure the function `Factorial` is implemented and visible.

---

## 6. Incorporate Test Fixtures

For multiple tests that share common setup, use test fixtures:

```cpp
class QueueTest : public testing::Test {
 protected:
  void SetUp() override {
    // Initialization code here
  }

  void TearDown() override {
    // Cleanup code here
  }

  // Shared objects for tests
  Queue<int> queue_;
};

TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(queue_.size(), 0);
}

TEST_F(QueueTest, EnqueueIncreasesSize) {
  queue_.Enqueue(10);
  EXPECT_EQ(queue_.size(), 1);
}
```

Use `TEST_F(TestFixtureName, TestName)` to define tests that use fixtures.

---

## 7. Running Tests with Filters and Flags

- Run specific tests using `--gtest_filter`:

  ```sh
  ./my_first_test --gtest_filter=FactorialTest.HandlesZeroInput
  ```

- List all tests without running them using:

  ```sh
  ./my_first_test --gtest_list_tests
  ```

- Stop on first failure with `--gtest_fail_fast`.

---

## 8. Troubleshooting Tips

- **Build errors**: Check that GoogleTest headers and libraries are correctly included and linked.
- **Tests not running**: Verify `main()` returns the value of `RUN_ALL_TESTS()`.
- **Naming issues**: Avoid underscores in test suite and test names to prevent name conflicts.
- **Assertion failures**: Read the GoogleTest output carefully; it provides file, line, and detailed messages.
- **Disabled tests**: Tests prefixed with `DISABLED_` won't run unless you use `--gtest_also_run_disabled_tests`.

---

## 9. Next Steps

- Add real code and write meaningful tests covering it.
- Explore advanced [assertions](reference/assertions.md) and [parameterized tests](reference/testing.md#INSTANTIATE_TEST_SUITE_P).
- Use [test fixtures](primer.md#same-data-multiple-tests) for shared setup.
- Consider integrating GoogleMock for mocking dependencies.
- Refer to the [GoogleTest Primer](primer.md) and [Advanced Topics](advanced.md) for deeper knowledge.

---

## Sample Complete Test File

```cpp
#include <gtest/gtest.h>

int Factorial(int n) {
  return (n <= 1) ? 1 : n * Factorial(n - 1);
}

TEST(FactorialTest, HandlesZeroInput) {
  EXPECT_EQ(Factorial(0), 1);
}

TEST(FactorialTest, HandlesPositiveInput) {
  EXPECT_EQ(Factorial(1), 1);
  EXPECT_EQ(Factorial(2), 2);
  EXPECT_EQ(Factorial(3), 6);
  EXPECT_EQ(Factorial(8), 40320);
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
}
```

Compile and run this file to verify your GoogleTest environment is correctly set up.

---

## References

- [GoogleTest Primer](primer.md)
- [Testing Reference: Writing Tests](reference/testing.md)
- [Getting Started with GoogleMock](getting-started/configuration-first-run/quick-start-mocking)
- [FAQ: Why No Underscores in Test Names?](faq.md#why-should-test-suite-names-and-test-names-not-contain-underscore)
- [Advanced GoogleTest Topics](advanced.md)

---