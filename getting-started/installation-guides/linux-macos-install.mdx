---
title: "Installing on Linux/macOS"
description: "Follow detailed instructions for building and integrating GoogleTest on Linux and macOS systems. Includes both local source and external project scenarios, and uses CMake as a primary example."
---

# Installing on Linux/macOS

This guide provides detailed, step-by-step instructions to build and integrate GoogleTest on Linux and macOS platforms using CMake. You will learn how to build both GoogleTest and GoogleMock, either as standalone projects or integrated into your own CMake-based project.

---

## 1. Prerequisites & System Requirements

- **Operating Systems Supported**: Linux distributions and macOS (including recent versions with C++17 support).
- **Build Tools**: CMake (3.14 or later), Git, and a C++17-capable compiler (e.g., GCC 7+, Clang 7+, or Apple Clang).
- **Build Environment**: A terminal shell with appropriate permissions.
- **Network Access**: Required for cloning the repository or for CMake fetch operations when using external content.

### Important Notes

- GoogleTest requires full C++17 support from your compiler. Ensure your compiler version supports this standard.
- On Linux/macOS, pthread libraries are utilized for thread-safe tests by default. CMake automatically links them.

<Tip>
If you do not have CMake installed, download the latest version from [https://cmake.org/](https://cmake.org/) and install it before proceeding.
</Tip>

---

## 2. Building GoogleTest and GoogleMock as a Standalone Project

Follow these steps to clone, build, and optionally install GoogleTest and GoogleMock.

### Step 1: Clone the Repository

```bash
git clone https://github.com/google/googletest.git -b v1.17.0
d
```

Change directory into the repository:

```bash
cd googletest
```

### Step 2: Create a Build Directory

```bash
mkdir build && cd build
```

This keeps build artifacts separate from source files.

### Step 3: Configure the Build with CMake

By default, GoogleMock is included in the build. To build both GoogleTest and GoogleMock, run:

```bash
cmake ..
```

If you want to build only GoogleTest without GoogleMock, disable GoogleMock explicitly:

```bash
cmake .. -DBUILD_GMOCK=OFF
```

### Step 4: Build the Project

On Linux/macOS, a `Makefile` is generated. Build with:

```bash
make
```

This will compile the GoogleTest and GoogleMock libraries and the built-in unit tests.

### Step 5: Optional Installation

If you want to install the libraries system-wide (usually in `/usr/local/`), run:

```bash
sudo make install
```

This allows your projects to reference GoogleTest and GoogleMock via standard system paths.

<Warning>
You need administrative privileges to install globally.
</Warning>

### Step 6: Verify the Build

Run the built-in tests to confirm a successful build:

```bash
./googletest/gtest/gtest
```

or for GoogleMock:

```bash
./googlemock/gmock/gtest/gtest
```

Expected output reports the tests run and their success.

---

## 3. Integrating GoogleTest into an Existing CMake Project

You have two primary options to incorporate GoogleTest:

### Option 1: Use Installed GoogleTest

If you installed GoogleTest system-wide (Step 5 above), simply add the following in your project's `CMakeLists.txt`:

```cmake
find_package(GTest CONFIG REQUIRED)

add_executable(your_test_executable your_test.cpp)
target_link_libraries(your_test_executable GTest::gtest_main)
add_test(NAME your_test COMMAND your_test_executable)
```

This method uses the pre-built libraries and headers from your system.

### Option 2: Build GoogleTest as Part of Your Project

Include GoogleTest source directly within your project to ensure build settings compatibility and easier updates.

Add this in your `CMakeLists.txt`:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)

# For Windows: prevent overriding parent compiler/linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

add_executable(your_test_executable your_test.cpp)
target_link_libraries(your_test_executable gtest_main)
add_test(NAME your_test COMMAND your_test_executable)
```

**Notes:**
- Requires CMake 3.14+ due to `FetchContent_MakeAvailable()`.
- Use `gtest_force_shared_crt` to ensure CRT linkage consistency on Windows.

---

## 4. Building and Running Your First Test

After incorporating GoogleTest, create a simple test file to verify setup.

### Example Test Source: `example_test.cpp`

```cpp
#include <gtest/gtest.h>

TEST(SampleTest, BasicAssertions) {
  EXPECT_EQ(1 + 1, 2);
  EXPECT_NE(2 * 2, 5);
}
```

### Compile and Link

If building standalone GoogleTest with installed headers and libraries:

```bash
g++ example_test.cpp -lgtest_main -lgtest -lpthread -o example_test
```

Alternatively, if using CMake integration as above, just run `cmake` and `make` on your project.

### Run the Test

```bash
./example_test
```

You should see output indicating that tests ran successfully.

---

## 5. Troubleshooting Common Issues

- **C++17 not supported:** Ensure your compiler supports C++17. Use `-std=c++17` with GCC/Clang.
- **pthread missing during linking:** When building manually, link pthread explicitly with `-lpthread`.
- **Mismatch in Runtime Library on Windows:** Use the `gtest_force_shared_crt` CMake option to align runtime linkage.
- **CMake errors:** Verify CMake version is 3.14 or newer.

<Tip>
Re-run configuration steps (`cmake ..`) after resolving environment or build tool issues.
</Tip>

---

## 6. Summary and Next Steps

Congratulations! You now have GoogleTest and GoogleMock built and integrated on your Linux or macOS system.

### What to try next:

- Write more comprehensive tests using fixtures and parameterized tests.
- Explore mocking capabilities with GoogleMock.
- Consult the [Writing & Running Your First Test](../first-test-experience/writing-your-first-test) guide for test authoring.
- Review platform-specific build considerations on the [Prerequisites & Supported Platforms](../setup-requirements/prerequisites) page.

---

### References
- [Official GoogleTest GitHub Repository](https://github.com/google/googletest)
- [CMake Official Website](https://cmake.org/)
- See the [Installation Overview](../setup-requirements/installation-overview) for other installation methodologies

---

If you encounter further issues, consult the [Troubleshooting & Best Practices](../../faq/troubleshooting-and-best-practices/build-and-link-errors) or ask in community channels linked in our documentation.
