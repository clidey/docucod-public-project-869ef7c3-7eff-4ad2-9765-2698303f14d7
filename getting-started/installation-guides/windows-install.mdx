---
title: "Installing on Windows"
description: "Covers step-by-step guidance for setting up GoogleTest in Windows environments. Highlights common configuration practices and provides troubleshooting advice tailored for Visual Studio and related toolchains."
---

# Installing on Windows

Set up GoogleTest in Windows environments quickly and reliably by following this step-by-step guide. Tailored for Visual Studio users and the Windows build ecosystem, this guide walks you through cloning, building, integrating, and troubleshooting GoogleTest with confidence.

---

## 1. Prerequisites & System Requirements

- **Operating System**: Windows 7 or later
- **Build System**: Visual Studio 2015 or newer
  - Recommended editions: Community, Professional, Enterprise
- **CMake Version**: 3.14 or later (required for FetchContent and build configuration)
- **C++ Compiler**: MSVC compiler supporting C++17 standard
- **Git**: Installed for cloning the repository (https://git-scm.com/)

<Tip>
Ensure your Visual Studio installation includes the "Desktop development with C++" workload to get the MSVC compiler and CMake integration.
</Tip>

## 2. Cloning and Preparing GoogleTest

Follow these commands in PowerShell or Command Prompt to get the GoogleTest source. This includes both GoogleTest and GoogleMock by default.

```powershell
# Clone the repository and checkout a stable release (replace v1.17.0 with desired tag)
git clone https://github.com/google/googletest.git -b v1.17.0
drive:
cd googletest
mkdir build
cd build
```

<Tip>
Using a tagged release ensures stability and compatibility.
</Tip>

## 3. Configuring with CMake

Inside the `build` directory, generate Visual Studio project files:

- To build both GoogleTest and GoogleMock (default):

  ```powershell
  cmake ..
  ```

- To build GoogleTest only, exclude GoogleMock by disabling it explicitly:

  ```powershell
  cmake .. -DBUILD_GMOCK=OFF
  ```

By default, CMake generates `.sln` and project files compatible with your installed Visual Studio version.

<Warning>
Make sure your CMake version is 3.14 or higher to use `FetchContent` features recommended for integrating GoogleTest into your projects.
</Warning>

## 4. Building GoogleTest with Visual Studio

Open the generated solution file `gtest.sln` in Visual Studio:

- Use the Solution Explorer to select and build desired targets, such as `gtest`, `gmock`, `gtest_main`, and `gmock_main`.
- Alternatively, build from the command line with MSBuild:

  ```powershell
  msbuild gtest.sln /p:Configuration=Release
  ```

Successful build produces `.lib` files and executables in the `build` output folders.

## 5. Installing GoogleTest (Optional)

If you want to install GoogleTest libraries and headers system-wide (typically requires admin privileges):

```powershell
msbuild INSTALL.vcxproj /p:Configuration=Release
```

By default, installation paths are under `%ProgramFiles%` or user-defined CMake `INSTALL` prefixes.

<Tip>
You generally only need to install GoogleTest if multiple projects on your machine will share it.
</Tip>

## 6. Incorporating GoogleTest into Your Own Windows Project

### a. Using Installed Libraries

If you've installed GoogleTest, add the include directories and library paths to your Visual Studio project settings:

- Include directories:
  - Point to the installed `include/` folder (e.g., `C:\Program Files\googletest\include`)
- Library directories:
  - Point to the installed library folder (e.g., `C:\Program Files\googletest\lib`)

Link against:

- `gtest.lib` for GoogleTest
- `gmock.lib` for GoogleMock (if used)
- `gtest_main.lib` if you want to link in the default main function.

### b. Building GoogleTest as a Submodule or Part of Your Build

Add GoogleTest source directly to your project or as a git submodule.
In your project's `CMakeLists.txt`, add:

```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/5376968f6948923e2411081fd9372e71a59d8e77.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # Match your runtime
FetchContent_MakeAvailable(googletest)

add_executable(my_test my_test.cpp)
target_link_libraries(my_test gtest_main)
add_test(NAME my_test COMMAND my_test)
```

<Tip>
Setting `gtest_force_shared_crt ON` ensures GoogleTest uses the same dynamic runtime libraries as your project, avoiding runtime linking conflicts and `LNK2038` errors.
</Tip>

## 7. Running Your First Test

Once your test executable is built, run it from Visual Studio or the command line:

```powershell
my_test.exe
```

You should see output indicating test results and passing/failing tests.

<Check>
If tests don't run, verify the executable links properly with `gtest_main` or that you have provided your own `main()` function.
</Check>

## 8. Troubleshooting Common Windows Issues

### Linker Error: RuntimeLibrary Mismatches (LNK2038)

Cause: Your project uses dynamic CRT (`/MD`), but GoogleTest was built with static CRT (`/MT`).

Solution:
- Set `gtest_force_shared_crt=ON` when configuring GoogleTest with CMake.
- Rebuild GoogleTest and your project to use consistent runtime libraries.

### Missing `gtest_main` or `main()` Entry Point

- If you use `gtest` instead of `gtest_main` library, you'll need to provide your own `main` function.
- Alternatively, link against `gtest_main` to get default main provided by GoogleTest.

### C++17 Compiler Support Required

Ensure your MSVC version supports C++17 features:
- Visual Studio 2017 version 15.7 or later fully supports C++17.
- Set your projectâ€™s C++ language standard to C++17 or higher.

### Permission Issues during Install

Run Visual Studio or Command Prompt with Administrator privileges when installing GoogleTest system-wide.

## 9. Summary and Next Steps

By completing these steps, you have GoogleTest built and integrated into your Windows development environment.
Next, explore:

- Writing and running your first unit tests: `/getting-started/first-test-experience/writing-your-first-test`
- Project setup and advanced configuration: `/getting-started/first-test-experience/project-setup`
- Troubleshooting build and linking errors: `/faq/troubleshooting-and-best-practices/build-and-link-errors`

For comprehensive platform support details, consult the [Supported Platforms](../docs/platforms.md) documentation.

---

## Additional Resources

- [GoogleTest GitHub Repository](https://github.com/google/googletest)
- [CMake Official Site](https://cmake.org/)
- [Visual Studio Download](https://visualstudio.microsoft.com/)
- [GoogleTest Installation Overview](../getting-started/setup-requirements/installation-overview)

## References

See the internal CMake build script for Windows specifics in `googletest/cmake/internal_utils.cmake`.


---

<AccordionGroup title="Troubleshooting & Tips">
<Accordion title="Avoiding LNK2038 Runtime Library Mismatch">
Your Visual Studio project must use the same runtime linkage as GoogleTest.

Set `gtest_force_shared_crt=ON` during CMake configuration to align runtimes.
If you see linker errors about `RuntimeLibrary` mismatch, rebuild all components with consistent settings.
</Accordion>
<Accordion title="Building Without GoogleMock">
If mocking features are not needed, you can build GoogleTest without GoogleMock:

```powershell
cmake .. -DBUILD_GMOCK=OFF
```

This reduces build time and binary size.
</Accordion>
<Accordion title="Linking with gtest_main vs Providing Own main()">
The `gtest_main` library provides a default main() function.
If you want to provide your own test driver main(), link against `gtest` only.
</Accordion>
<Accordion title="Command Line Build with MSBuild">
Build your tests efficiently without Visual Studio GUI using:

```powershell
msbuild gtest.sln /p:Configuration=Release
```

Optionally specify Platform and other properties as needed.
</Accordion>
</AccordionGroup>
